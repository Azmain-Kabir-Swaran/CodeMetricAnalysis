{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "JsonUtilClient.java",
  "functionName": "toSnapshottableDirectoryStatus",
  "functionId": "toSnapshottableDirectoryStatus___json-Map__?,?__",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/web/JsonUtilClient.java",
  "functionStartLine": 860,
  "functionEndLine": 874,
  "numCommitsSeen": 41,
  "timeTaken": 1511,
  "changeHistory": [
    "b2b9ce585984a1791a8af3e2287c75c75b95586f",
    "0355ec20ebeb988679c7192c7024bef7a2a3bced"
  ],
  "changeHistoryShort": {
    "b2b9ce585984a1791a8af3e2287c75c75b95586f": "Ybodychange",
    "0355ec20ebeb988679c7192c7024bef7a2a3bced": "Yintroduced"
  },
  "changeHistoryDetails": {
    "b2b9ce585984a1791a8af3e2287c75c75b95586f": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-13271. WebHDFS: Add constructor in SnapshottableDirectoryStatus with HdfsFileStatus as argument. Contributed by Lokesh Jain\n",
      "commitDate": "13/03/18 9:43 AM",
      "commitName": "b2b9ce585984a1791a8af3e2287c75c75b95586f",
      "commitAuthor": "Chris Douglas",
      "commitDateOld": "12/03/18 8:41 PM",
      "commitNameOld": "0355ec20ebeb988679c7192c7024bef7a2a3bced",
      "commitAuthorOld": "Xiaoyu Yao",
      "daysBetweenCommits": 0.54,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,22 +1,15 @@\n   private static SnapshottableDirectoryStatus toSnapshottableDirectoryStatus(\n       Map\u003c?, ?\u003e json) {\n     if (json \u003d\u003d null) {\n       return null;\n     }\n     int snapshotNumber \u003d getInt(json, \"snapshotNumber\", 0);\n     int snapshotQuota \u003d getInt(json, \"snapshotQuota\", 0);\n     byte[] parentFullPath \u003d toByteArray((String) json.get(\"parentFullPath\"));\n     HdfsFileStatus dirStatus \u003d\n         toFileStatus((Map\u003c?, ?\u003e) json.get(\"dirStatus\"), false);\n-    Set\u003cFileStatus.AttrFlags\u003e attrFlags \u003d FileStatus\n-        .attributes(dirStatus.hasAcl(), dirStatus.isEncrypted(),\n-            dirStatus.isErasureCoded(), dirStatus.isSnapshotEnabled());\n     SnapshottableDirectoryStatus snapshottableDirectoryStatus \u003d\n-        new SnapshottableDirectoryStatus(dirStatus.getModificationTime(),\n-            dirStatus.getAccessTime(), dirStatus.getPermission(),\n-            HdfsFileStatus.Flags.convert(attrFlags), dirStatus.getOwner(),\n-            dirStatus.getGroup(), dirStatus.getLocalNameInBytes(),\n-            dirStatus.getFileId(), dirStatus.getChildrenNum(), snapshotNumber,\n+        new SnapshottableDirectoryStatus(dirStatus, snapshotNumber,\n             snapshotQuota, parentFullPath);\n     return snapshottableDirectoryStatus;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private static SnapshottableDirectoryStatus toSnapshottableDirectoryStatus(\n      Map\u003c?, ?\u003e json) {\n    if (json \u003d\u003d null) {\n      return null;\n    }\n    int snapshotNumber \u003d getInt(json, \"snapshotNumber\", 0);\n    int snapshotQuota \u003d getInt(json, \"snapshotQuota\", 0);\n    byte[] parentFullPath \u003d toByteArray((String) json.get(\"parentFullPath\"));\n    HdfsFileStatus dirStatus \u003d\n        toFileStatus((Map\u003c?, ?\u003e) json.get(\"dirStatus\"), false);\n    SnapshottableDirectoryStatus snapshottableDirectoryStatus \u003d\n        new SnapshottableDirectoryStatus(dirStatus, snapshotNumber,\n            snapshotQuota, parentFullPath);\n    return snapshottableDirectoryStatus;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/web/JsonUtilClient.java",
      "extendedDetails": {}
    },
    "0355ec20ebeb988679c7192c7024bef7a2a3bced": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-13141. WebHDFS: Add support for getting snasphottable directory list. Contributed by Lokesh Jain.\n",
      "commitDate": "12/03/18 8:41 PM",
      "commitName": "0355ec20ebeb988679c7192c7024bef7a2a3bced",
      "commitAuthor": "Xiaoyu Yao",
      "diff": "@@ -0,0 +1,22 @@\n+  private static SnapshottableDirectoryStatus toSnapshottableDirectoryStatus(\n+      Map\u003c?, ?\u003e json) {\n+    if (json \u003d\u003d null) {\n+      return null;\n+    }\n+    int snapshotNumber \u003d getInt(json, \"snapshotNumber\", 0);\n+    int snapshotQuota \u003d getInt(json, \"snapshotQuota\", 0);\n+    byte[] parentFullPath \u003d toByteArray((String) json.get(\"parentFullPath\"));\n+    HdfsFileStatus dirStatus \u003d\n+        toFileStatus((Map\u003c?, ?\u003e) json.get(\"dirStatus\"), false);\n+    Set\u003cFileStatus.AttrFlags\u003e attrFlags \u003d FileStatus\n+        .attributes(dirStatus.hasAcl(), dirStatus.isEncrypted(),\n+            dirStatus.isErasureCoded(), dirStatus.isSnapshotEnabled());\n+    SnapshottableDirectoryStatus snapshottableDirectoryStatus \u003d\n+        new SnapshottableDirectoryStatus(dirStatus.getModificationTime(),\n+            dirStatus.getAccessTime(), dirStatus.getPermission(),\n+            HdfsFileStatus.Flags.convert(attrFlags), dirStatus.getOwner(),\n+            dirStatus.getGroup(), dirStatus.getLocalNameInBytes(),\n+            dirStatus.getFileId(), dirStatus.getChildrenNum(), snapshotNumber,\n+            snapshotQuota, parentFullPath);\n+    return snapshottableDirectoryStatus;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private static SnapshottableDirectoryStatus toSnapshottableDirectoryStatus(\n      Map\u003c?, ?\u003e json) {\n    if (json \u003d\u003d null) {\n      return null;\n    }\n    int snapshotNumber \u003d getInt(json, \"snapshotNumber\", 0);\n    int snapshotQuota \u003d getInt(json, \"snapshotQuota\", 0);\n    byte[] parentFullPath \u003d toByteArray((String) json.get(\"parentFullPath\"));\n    HdfsFileStatus dirStatus \u003d\n        toFileStatus((Map\u003c?, ?\u003e) json.get(\"dirStatus\"), false);\n    Set\u003cFileStatus.AttrFlags\u003e attrFlags \u003d FileStatus\n        .attributes(dirStatus.hasAcl(), dirStatus.isEncrypted(),\n            dirStatus.isErasureCoded(), dirStatus.isSnapshotEnabled());\n    SnapshottableDirectoryStatus snapshottableDirectoryStatus \u003d\n        new SnapshottableDirectoryStatus(dirStatus.getModificationTime(),\n            dirStatus.getAccessTime(), dirStatus.getPermission(),\n            HdfsFileStatus.Flags.convert(attrFlags), dirStatus.getOwner(),\n            dirStatus.getGroup(), dirStatus.getLocalNameInBytes(),\n            dirStatus.getFileId(), dirStatus.getChildrenNum(), snapshotNumber,\n            snapshotQuota, parentFullPath);\n    return snapshottableDirectoryStatus;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/web/JsonUtilClient.java"
    }
  }
}