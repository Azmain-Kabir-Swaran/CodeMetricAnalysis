{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "FSImagePreTransactionalStorageInspector.java",
  "functionName": "readCheckpointTime",
  "functionId": "readCheckpointTime___sd-StorageDirectory",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSImagePreTransactionalStorageInspector.java",
  "functionStartLine": 129,
  "functionEndLine": 144,
  "numCommitsSeen": 20,
  "timeTaken": 6922,
  "changeHistory": [
    "7a3188d054481b9bd563e337901e93476303ce7f",
    "eca1a4bfe952fc184fe90dde50bac9b0e5293568",
    "3704e091a8d6c4181dfb29ac9d950e997b1170c0",
    "e2091275dc26745c4e919cd767283d32608a1817",
    "fb30240b87500c1b3c9f8036bb9e6712ec8e2655",
    "e34d2c075d8a6d7a283062f364f7ed67b3babcd7",
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1",
    "d86f3183d93714ba078416af4f609d26376eadb0",
    "28e6a4e44a3e920dcaf858f9a74a6358226b3a63",
    "a196766ea07775f18ded69bd9e8d239f8cfd3ccc"
  ],
  "changeHistoryShort": {
    "7a3188d054481b9bd563e337901e93476303ce7f": "Ybodychange",
    "eca1a4bfe952fc184fe90dde50bac9b0e5293568": "Ybodychange",
    "3704e091a8d6c4181dfb29ac9d950e997b1170c0": "Ybodychange",
    "e2091275dc26745c4e919cd767283d32608a1817": "Ybodychange",
    "fb30240b87500c1b3c9f8036bb9e6712ec8e2655": "Ybodychange",
    "e34d2c075d8a6d7a283062f364f7ed67b3babcd7": "Ybodychange",
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1": "Yfilerename",
    "d86f3183d93714ba078416af4f609d26376eadb0": "Yfilerename",
    "28e6a4e44a3e920dcaf858f9a74a6358226b3a63": "Ymultichange(Ymovefromfile,Ymodifierchange,Ybodychange)",
    "a196766ea07775f18ded69bd9e8d239f8cfd3ccc": "Yintroduced"
  },
  "changeHistoryDetails": {
    "7a3188d054481b9bd563e337901e93476303ce7f": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-16282. Avoid FileStream to improve performance. Contributed by Ayush Saxena.\n",
      "commitDate": "02/05/19 12:58 PM",
      "commitName": "7a3188d054481b9bd563e337901e93476303ce7f",
      "commitAuthor": "Giovanni Matteo Fumarola",
      "commitDateOld": "06/09/18 2:48 PM",
      "commitNameOld": "eca1a4bfe952fc184fe90dde50bac9b0e5293568",
      "commitAuthorOld": "Giovanni Matteo Fumarola",
      "daysBetweenCommits": 237.92,
      "commitsBetweenForRepo": 1864,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,16 @@\n   static long readCheckpointTime(StorageDirectory sd) throws IOException {\n     File timeFile \u003d NNStorage.getStorageFile(sd, NameNodeFile.TIME);\n     long timeStamp \u003d 0L;\n     if (timeFile.exists() \u0026\u0026 FileUtil.canRead(timeFile)) {\n-      DataInputStream in \u003d new DataInputStream(new FileInputStream(timeFile));\n+      DataInputStream in \u003d new DataInputStream(\n+          Files.newInputStream(timeFile.toPath()));\n       try {\n         timeStamp \u003d in.readLong();\n         in.close();\n         in \u003d null;\n       } finally {\n         IOUtils.cleanupWithLogger(LOG, in);\n       }\n     }\n     return timeStamp;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  static long readCheckpointTime(StorageDirectory sd) throws IOException {\n    File timeFile \u003d NNStorage.getStorageFile(sd, NameNodeFile.TIME);\n    long timeStamp \u003d 0L;\n    if (timeFile.exists() \u0026\u0026 FileUtil.canRead(timeFile)) {\n      DataInputStream in \u003d new DataInputStream(\n          Files.newInputStream(timeFile.toPath()));\n      try {\n        timeStamp \u003d in.readLong();\n        in.close();\n        in \u003d null;\n      } finally {\n        IOUtils.cleanupWithLogger(LOG, in);\n      }\n    }\n    return timeStamp;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSImagePreTransactionalStorageInspector.java",
      "extendedDetails": {}
    },
    "eca1a4bfe952fc184fe90dde50bac9b0e5293568": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-13695. Move logging to slf4j in HDFS package. Contributed by Ian Pickering.\n",
      "commitDate": "06/09/18 2:48 PM",
      "commitName": "eca1a4bfe952fc184fe90dde50bac9b0e5293568",
      "commitAuthor": "Giovanni Matteo Fumarola",
      "commitDateOld": "27/12/16 1:03 PM",
      "commitNameOld": "e216e8e2334519b7c833d99586218e99a39265f3",
      "commitAuthorOld": "Daniel Templeton",
      "daysBetweenCommits": 618.03,
      "commitsBetweenForRepo": 4717,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,15 @@\n   static long readCheckpointTime(StorageDirectory sd) throws IOException {\n     File timeFile \u003d NNStorage.getStorageFile(sd, NameNodeFile.TIME);\n     long timeStamp \u003d 0L;\n     if (timeFile.exists() \u0026\u0026 FileUtil.canRead(timeFile)) {\n       DataInputStream in \u003d new DataInputStream(new FileInputStream(timeFile));\n       try {\n         timeStamp \u003d in.readLong();\n         in.close();\n         in \u003d null;\n       } finally {\n-        IOUtils.cleanup(LOG, in);\n+        IOUtils.cleanupWithLogger(LOG, in);\n       }\n     }\n     return timeStamp;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  static long readCheckpointTime(StorageDirectory sd) throws IOException {\n    File timeFile \u003d NNStorage.getStorageFile(sd, NameNodeFile.TIME);\n    long timeStamp \u003d 0L;\n    if (timeFile.exists() \u0026\u0026 FileUtil.canRead(timeFile)) {\n      DataInputStream in \u003d new DataInputStream(new FileInputStream(timeFile));\n      try {\n        timeStamp \u003d in.readLong();\n        in.close();\n        in \u003d null;\n      } finally {\n        IOUtils.cleanupWithLogger(LOG, in);\n      }\n    }\n    return timeStamp;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSImagePreTransactionalStorageInspector.java",
      "extendedDetails": {}
    },
    "3704e091a8d6c4181dfb29ac9d950e997b1170c0": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-4610. Use common utils FileUtil#setReadable/Writable/Executable and FileUtil#canRead/Write/Execute. Contrbitued by Ivan Mitic.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1477427 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "29/04/13 5:35 PM",
      "commitName": "3704e091a8d6c4181dfb29ac9d950e997b1170c0",
      "commitAuthor": "Suresh Srinivas",
      "commitDateOld": "29/04/13 3:40 PM",
      "commitNameOld": "e2091275dc26745c4e919cd767283d32608a1817",
      "commitAuthorOld": "Suresh Srinivas",
      "daysBetweenCommits": 0.08,
      "commitsBetweenForRepo": 3,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,15 @@\n   static long readCheckpointTime(StorageDirectory sd) throws IOException {\n     File timeFile \u003d NNStorage.getStorageFile(sd, NameNodeFile.TIME);\n     long timeStamp \u003d 0L;\n-    if (timeFile.exists() \u0026\u0026 timeFile.canRead()) {\n+    if (timeFile.exists() \u0026\u0026 FileUtil.canRead(timeFile)) {\n       DataInputStream in \u003d new DataInputStream(new FileInputStream(timeFile));\n       try {\n         timeStamp \u003d in.readLong();\n         in.close();\n         in \u003d null;\n       } finally {\n         IOUtils.cleanup(LOG, in);\n       }\n     }\n     return timeStamp;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  static long readCheckpointTime(StorageDirectory sd) throws IOException {\n    File timeFile \u003d NNStorage.getStorageFile(sd, NameNodeFile.TIME);\n    long timeStamp \u003d 0L;\n    if (timeFile.exists() \u0026\u0026 FileUtil.canRead(timeFile)) {\n      DataInputStream in \u003d new DataInputStream(new FileInputStream(timeFile));\n      try {\n        timeStamp \u003d in.readLong();\n        in.close();\n        in \u003d null;\n      } finally {\n        IOUtils.cleanup(LOG, in);\n      }\n    }\n    return timeStamp;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSImagePreTransactionalStorageInspector.java",
      "extendedDetails": {}
    },
    "e2091275dc26745c4e919cd767283d32608a1817": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-4610. Reverting the patch Jenkins build is not run.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1477396 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "29/04/13 3:40 PM",
      "commitName": "e2091275dc26745c4e919cd767283d32608a1817",
      "commitAuthor": "Suresh Srinivas",
      "commitDateOld": "29/04/13 3:26 PM",
      "commitNameOld": "fb30240b87500c1b3c9f8036bb9e6712ec8e2655",
      "commitAuthorOld": "Suresh Srinivas",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,15 @@\n   static long readCheckpointTime(StorageDirectory sd) throws IOException {\n     File timeFile \u003d NNStorage.getStorageFile(sd, NameNodeFile.TIME);\n     long timeStamp \u003d 0L;\n-    if (timeFile.exists() \u0026\u0026 FileUtil.canRead(timeFile)) {\n+    if (timeFile.exists() \u0026\u0026 timeFile.canRead()) {\n       DataInputStream in \u003d new DataInputStream(new FileInputStream(timeFile));\n       try {\n         timeStamp \u003d in.readLong();\n         in.close();\n         in \u003d null;\n       } finally {\n         IOUtils.cleanup(LOG, in);\n       }\n     }\n     return timeStamp;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  static long readCheckpointTime(StorageDirectory sd) throws IOException {\n    File timeFile \u003d NNStorage.getStorageFile(sd, NameNodeFile.TIME);\n    long timeStamp \u003d 0L;\n    if (timeFile.exists() \u0026\u0026 timeFile.canRead()) {\n      DataInputStream in \u003d new DataInputStream(new FileInputStream(timeFile));\n      try {\n        timeStamp \u003d in.readLong();\n        in.close();\n        in \u003d null;\n      } finally {\n        IOUtils.cleanup(LOG, in);\n      }\n    }\n    return timeStamp;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSImagePreTransactionalStorageInspector.java",
      "extendedDetails": {}
    },
    "fb30240b87500c1b3c9f8036bb9e6712ec8e2655": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-4610. Use common utils FileUtil#setReadable/Writable/Executable \u0026 FileUtil#canRead/Write/Execute. Contributed by Ivan Mitic.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1477385 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "29/04/13 3:26 PM",
      "commitName": "fb30240b87500c1b3c9f8036bb9e6712ec8e2655",
      "commitAuthor": "Suresh Srinivas",
      "commitDateOld": "14/03/13 11:04 AM",
      "commitNameOld": "bcabbcdf4cf7b4bcda62d74b06c9736bc55f6fc1",
      "commitAuthorOld": "Aaron Myers",
      "daysBetweenCommits": 46.18,
      "commitsBetweenForRepo": 256,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,15 @@\n   static long readCheckpointTime(StorageDirectory sd) throws IOException {\n     File timeFile \u003d NNStorage.getStorageFile(sd, NameNodeFile.TIME);\n     long timeStamp \u003d 0L;\n-    if (timeFile.exists() \u0026\u0026 timeFile.canRead()) {\n+    if (timeFile.exists() \u0026\u0026 FileUtil.canRead(timeFile)) {\n       DataInputStream in \u003d new DataInputStream(new FileInputStream(timeFile));\n       try {\n         timeStamp \u003d in.readLong();\n         in.close();\n         in \u003d null;\n       } finally {\n         IOUtils.cleanup(LOG, in);\n       }\n     }\n     return timeStamp;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  static long readCheckpointTime(StorageDirectory sd) throws IOException {\n    File timeFile \u003d NNStorage.getStorageFile(sd, NameNodeFile.TIME);\n    long timeStamp \u003d 0L;\n    if (timeFile.exists() \u0026\u0026 FileUtil.canRead(timeFile)) {\n      DataInputStream in \u003d new DataInputStream(new FileInputStream(timeFile));\n      try {\n        timeStamp \u003d in.readLong();\n        in.close();\n        in \u003d null;\n      } finally {\n        IOUtils.cleanup(LOG, in);\n      }\n    }\n    return timeStamp;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSImagePreTransactionalStorageInspector.java",
      "extendedDetails": {}
    },
    "e34d2c075d8a6d7a283062f364f7ed67b3babcd7": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-2330. In NNStorage and FSImagePreTransactionalStorageInspector, IOExceptions of stream closures can mask root exceptions.  Contributed by Uma Maheswara Rao G\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1172219 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "18/09/11 1:30 AM",
      "commitName": "e34d2c075d8a6d7a283062f364f7ed67b3babcd7",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "06/09/11 1:27 PM",
      "commitNameOld": "bdc3720d5b67a1c8fc2dfb29be16e4155c0e7f15",
      "commitAuthorOld": "Jitendra Nath Pandey",
      "daysBetweenCommits": 11.5,
      "commitsBetweenForRepo": 86,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,13 +1,15 @@\n   static long readCheckpointTime(StorageDirectory sd) throws IOException {\n     File timeFile \u003d NNStorage.getStorageFile(sd, NameNodeFile.TIME);\n     long timeStamp \u003d 0L;\n     if (timeFile.exists() \u0026\u0026 timeFile.canRead()) {\n       DataInputStream in \u003d new DataInputStream(new FileInputStream(timeFile));\n       try {\n         timeStamp \u003d in.readLong();\n-      } finally {\n         in.close();\n+        in \u003d null;\n+      } finally {\n+        IOUtils.cleanup(LOG, in);\n       }\n     }\n     return timeStamp;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  static long readCheckpointTime(StorageDirectory sd) throws IOException {\n    File timeFile \u003d NNStorage.getStorageFile(sd, NameNodeFile.TIME);\n    long timeStamp \u003d 0L;\n    if (timeFile.exists() \u0026\u0026 timeFile.canRead()) {\n      DataInputStream in \u003d new DataInputStream(new FileInputStream(timeFile));\n      try {\n        timeStamp \u003d in.readLong();\n        in.close();\n        in \u003d null;\n      } finally {\n        IOUtils.cleanup(LOG, in);\n      }\n    }\n    return timeStamp;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSImagePreTransactionalStorageInspector.java",
      "extendedDetails": {}
    },
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1": {
      "type": "Yfilerename",
      "commitMessage": "HADOOP-7560. Change src layout to be heirarchical. Contributed by Alejandro Abdelnur.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1161332 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/08/11 5:14 PM",
      "commitName": "cd7157784e5e5ddc4e77144d042e54dd0d04bac1",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "24/08/11 5:06 PM",
      "commitNameOld": "bb0005cfec5fd2861600ff5babd259b48ba18b63",
      "commitAuthorOld": "Arun Murthy",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  static long readCheckpointTime(StorageDirectory sd) throws IOException {\n    File timeFile \u003d NNStorage.getStorageFile(sd, NameNodeFile.TIME);\n    long timeStamp \u003d 0L;\n    if (timeFile.exists() \u0026\u0026 timeFile.canRead()) {\n      DataInputStream in \u003d new DataInputStream(new FileInputStream(timeFile));\n      try {\n        timeStamp \u003d in.readLong();\n      } finally {\n        in.close();\n      }\n    }\n    return timeStamp;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSImagePreTransactionalStorageInspector.java",
      "extendedDetails": {
        "oldPath": "hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSImagePreTransactionalStorageInspector.java",
        "newPath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSImagePreTransactionalStorageInspector.java"
      }
    },
    "d86f3183d93714ba078416af4f609d26376eadb0": {
      "type": "Yfilerename",
      "commitMessage": "HDFS-2096. Mavenization of hadoop-hdfs. Contributed by Alejandro Abdelnur.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1159702 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "19/08/11 10:36 AM",
      "commitName": "d86f3183d93714ba078416af4f609d26376eadb0",
      "commitAuthor": "Thomas White",
      "commitDateOld": "19/08/11 10:26 AM",
      "commitNameOld": "6ee5a73e0e91a2ef27753a32c576835e951d8119",
      "commitAuthorOld": "Thomas White",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  static long readCheckpointTime(StorageDirectory sd) throws IOException {\n    File timeFile \u003d NNStorage.getStorageFile(sd, NameNodeFile.TIME);\n    long timeStamp \u003d 0L;\n    if (timeFile.exists() \u0026\u0026 timeFile.canRead()) {\n      DataInputStream in \u003d new DataInputStream(new FileInputStream(timeFile));\n      try {\n        timeStamp \u003d in.readLong();\n      } finally {\n        in.close();\n      }\n    }\n    return timeStamp;\n  }",
      "path": "hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSImagePreTransactionalStorageInspector.java",
      "extendedDetails": {
        "oldPath": "hdfs/src/java/org/apache/hadoop/hdfs/server/namenode/FSImagePreTransactionalStorageInspector.java",
        "newPath": "hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSImagePreTransactionalStorageInspector.java"
      }
    },
    "28e6a4e44a3e920dcaf858f9a74a6358226b3a63": {
      "type": "Ymultichange(Ymovefromfile,Ymodifierchange,Ybodychange)",
      "commitMessage": "HDFS-1073. Redesign the NameNode\u0027s storage layout for image checkpoints and edit logs to introduce transaction IDs and be more robust. Contributed by Todd Lipcon and Ivan Kelly.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1152295 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "29/07/11 9:28 AM",
      "commitName": "28e6a4e44a3e920dcaf858f9a74a6358226b3a63",
      "commitAuthor": "Todd Lipcon",
      "subchanges": [
        {
          "type": "Ymovefromfile",
          "commitMessage": "HDFS-1073. Redesign the NameNode\u0027s storage layout for image checkpoints and edit logs to introduce transaction IDs and be more robust. Contributed by Todd Lipcon and Ivan Kelly.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1152295 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "29/07/11 9:28 AM",
          "commitName": "28e6a4e44a3e920dcaf858f9a74a6358226b3a63",
          "commitAuthor": "Todd Lipcon",
          "commitDateOld": "29/07/11 6:44 AM",
          "commitNameOld": "c58366acd1d09bc657594382b640d008e9b21ba7",
          "commitAuthorOld": "Steve Loughran",
          "daysBetweenCommits": 0.11,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,13 +1,13 @@\n-  long readCheckpointTime(StorageDirectory sd) throws IOException {\n-    File timeFile \u003d getStorageFile(sd, NameNodeFile.TIME);\n+  static long readCheckpointTime(StorageDirectory sd) throws IOException {\n+    File timeFile \u003d NNStorage.getStorageFile(sd, NameNodeFile.TIME);\n     long timeStamp \u003d 0L;\n     if (timeFile.exists() \u0026\u0026 timeFile.canRead()) {\n       DataInputStream in \u003d new DataInputStream(new FileInputStream(timeFile));\n       try {\n         timeStamp \u003d in.readLong();\n       } finally {\n         in.close();\n       }\n     }\n     return timeStamp;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  static long readCheckpointTime(StorageDirectory sd) throws IOException {\n    File timeFile \u003d NNStorage.getStorageFile(sd, NameNodeFile.TIME);\n    long timeStamp \u003d 0L;\n    if (timeFile.exists() \u0026\u0026 timeFile.canRead()) {\n      DataInputStream in \u003d new DataInputStream(new FileInputStream(timeFile));\n      try {\n        timeStamp \u003d in.readLong();\n      } finally {\n        in.close();\n      }\n    }\n    return timeStamp;\n  }",
          "path": "hdfs/src/java/org/apache/hadoop/hdfs/server/namenode/FSImagePreTransactionalStorageInspector.java",
          "extendedDetails": {
            "oldPath": "hdfs/src/java/org/apache/hadoop/hdfs/server/namenode/NNStorage.java",
            "newPath": "hdfs/src/java/org/apache/hadoop/hdfs/server/namenode/FSImagePreTransactionalStorageInspector.java",
            "oldMethodName": "readCheckpointTime",
            "newMethodName": "readCheckpointTime"
          }
        },
        {
          "type": "Ymodifierchange",
          "commitMessage": "HDFS-1073. Redesign the NameNode\u0027s storage layout for image checkpoints and edit logs to introduce transaction IDs and be more robust. Contributed by Todd Lipcon and Ivan Kelly.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1152295 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "29/07/11 9:28 AM",
          "commitName": "28e6a4e44a3e920dcaf858f9a74a6358226b3a63",
          "commitAuthor": "Todd Lipcon",
          "commitDateOld": "29/07/11 6:44 AM",
          "commitNameOld": "c58366acd1d09bc657594382b640d008e9b21ba7",
          "commitAuthorOld": "Steve Loughran",
          "daysBetweenCommits": 0.11,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,13 +1,13 @@\n-  long readCheckpointTime(StorageDirectory sd) throws IOException {\n-    File timeFile \u003d getStorageFile(sd, NameNodeFile.TIME);\n+  static long readCheckpointTime(StorageDirectory sd) throws IOException {\n+    File timeFile \u003d NNStorage.getStorageFile(sd, NameNodeFile.TIME);\n     long timeStamp \u003d 0L;\n     if (timeFile.exists() \u0026\u0026 timeFile.canRead()) {\n       DataInputStream in \u003d new DataInputStream(new FileInputStream(timeFile));\n       try {\n         timeStamp \u003d in.readLong();\n       } finally {\n         in.close();\n       }\n     }\n     return timeStamp;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  static long readCheckpointTime(StorageDirectory sd) throws IOException {\n    File timeFile \u003d NNStorage.getStorageFile(sd, NameNodeFile.TIME);\n    long timeStamp \u003d 0L;\n    if (timeFile.exists() \u0026\u0026 timeFile.canRead()) {\n      DataInputStream in \u003d new DataInputStream(new FileInputStream(timeFile));\n      try {\n        timeStamp \u003d in.readLong();\n      } finally {\n        in.close();\n      }\n    }\n    return timeStamp;\n  }",
          "path": "hdfs/src/java/org/apache/hadoop/hdfs/server/namenode/FSImagePreTransactionalStorageInspector.java",
          "extendedDetails": {
            "oldValue": "[]",
            "newValue": "[static]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-1073. Redesign the NameNode\u0027s storage layout for image checkpoints and edit logs to introduce transaction IDs and be more robust. Contributed by Todd Lipcon and Ivan Kelly.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1152295 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "29/07/11 9:28 AM",
          "commitName": "28e6a4e44a3e920dcaf858f9a74a6358226b3a63",
          "commitAuthor": "Todd Lipcon",
          "commitDateOld": "29/07/11 6:44 AM",
          "commitNameOld": "c58366acd1d09bc657594382b640d008e9b21ba7",
          "commitAuthorOld": "Steve Loughran",
          "daysBetweenCommits": 0.11,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,13 +1,13 @@\n-  long readCheckpointTime(StorageDirectory sd) throws IOException {\n-    File timeFile \u003d getStorageFile(sd, NameNodeFile.TIME);\n+  static long readCheckpointTime(StorageDirectory sd) throws IOException {\n+    File timeFile \u003d NNStorage.getStorageFile(sd, NameNodeFile.TIME);\n     long timeStamp \u003d 0L;\n     if (timeFile.exists() \u0026\u0026 timeFile.canRead()) {\n       DataInputStream in \u003d new DataInputStream(new FileInputStream(timeFile));\n       try {\n         timeStamp \u003d in.readLong();\n       } finally {\n         in.close();\n       }\n     }\n     return timeStamp;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  static long readCheckpointTime(StorageDirectory sd) throws IOException {\n    File timeFile \u003d NNStorage.getStorageFile(sd, NameNodeFile.TIME);\n    long timeStamp \u003d 0L;\n    if (timeFile.exists() \u0026\u0026 timeFile.canRead()) {\n      DataInputStream in \u003d new DataInputStream(new FileInputStream(timeFile));\n      try {\n        timeStamp \u003d in.readLong();\n      } finally {\n        in.close();\n      }\n    }\n    return timeStamp;\n  }",
          "path": "hdfs/src/java/org/apache/hadoop/hdfs/server/namenode/FSImagePreTransactionalStorageInspector.java",
          "extendedDetails": {}
        }
      ]
    },
    "a196766ea07775f18ded69bd9e8d239f8cfd3ccc": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-7106. Reorganize SVN layout to combine HDFS, Common, and MR in a single tree (project unsplit)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1134994 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "12/06/11 3:00 PM",
      "commitName": "a196766ea07775f18ded69bd9e8d239f8cfd3ccc",
      "commitAuthor": "Todd Lipcon",
      "diff": "@@ -0,0 +1,13 @@\n+  long readCheckpointTime(StorageDirectory sd) throws IOException {\n+    File timeFile \u003d getStorageFile(sd, NameNodeFile.TIME);\n+    long timeStamp \u003d 0L;\n+    if (timeFile.exists() \u0026\u0026 timeFile.canRead()) {\n+      DataInputStream in \u003d new DataInputStream(new FileInputStream(timeFile));\n+      try {\n+        timeStamp \u003d in.readLong();\n+      } finally {\n+        in.close();\n+      }\n+    }\n+    return timeStamp;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  long readCheckpointTime(StorageDirectory sd) throws IOException {\n    File timeFile \u003d getStorageFile(sd, NameNodeFile.TIME);\n    long timeStamp \u003d 0L;\n    if (timeFile.exists() \u0026\u0026 timeFile.canRead()) {\n      DataInputStream in \u003d new DataInputStream(new FileInputStream(timeFile));\n      try {\n        timeStamp \u003d in.readLong();\n      } finally {\n        in.close();\n      }\n    }\n    return timeStamp;\n  }",
      "path": "hdfs/src/java/org/apache/hadoop/hdfs/server/namenode/NNStorage.java"
    }
  }
}