{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "AggregatedLogFormat.java",
  "functionName": "getApplicationOwner",
  "functionId": "getApplicationOwner",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/logaggregation/AggregatedLogFormat.java",
  "functionStartLine": 603,
  "functionEndLine": 621,
  "numCommitsSeen": 56,
  "timeTaken": 3120,
  "changeHistory": [
    "22de9449f8aa72c5b0bb586b8253390773502189",
    "c2cb7ea1ef6532020b69031dbd18b0f9b8369f0f",
    "688617d6d7e6377a37682b5676b805cc6e8cf3f0",
    "e1fdf62123625e4ba399af02f8aad500637d29d1",
    "c27601fefebd0af887a12d684bfc6f90d9fc0321",
    "670fa24b48acb407c22fbfdde87ae3123dcbf449"
  ],
  "changeHistoryShort": {
    "22de9449f8aa72c5b0bb586b8253390773502189": "Ybodychange",
    "c2cb7ea1ef6532020b69031dbd18b0f9b8369f0f": "Ybodychange",
    "688617d6d7e6377a37682b5676b805cc6e8cf3f0": "Ybodychange",
    "e1fdf62123625e4ba399af02f8aad500637d29d1": "Yfilerename",
    "c27601fefebd0af887a12d684bfc6f90d9fc0321": "Yfilerename",
    "670fa24b48acb407c22fbfdde87ae3123dcbf449": "Yintroduced"
  },
  "changeHistoryDetails": {
    "22de9449f8aa72c5b0bb586b8253390773502189": {
      "type": "Ybodychange",
      "commitMessage": "YARN-7144. Log Aggregation controller should not swallow the exceptions when it calls closeWriter and closeReader. Contributed by Xuan Gong.\n",
      "commitDate": "06/09/17 2:53 PM",
      "commitName": "22de9449f8aa72c5b0bb586b8253390773502189",
      "commitAuthor": "Junping Du",
      "commitDateOld": "06/09/17 1:19 PM",
      "commitNameOld": "63231a2a3008794c5ebcbc9d3855638fc5f28216",
      "commitAuthorOld": "Junping Du",
      "daysBetweenCommits": 0.07,
      "commitsBetweenForRepo": 3,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,19 @@\n     public String getApplicationOwner() throws IOException {\n       TFile.Reader.Scanner ownerScanner \u003d null;\n       try {\n         ownerScanner \u003d reader.createScanner();\n         LogKey key \u003d new LogKey();\n         while (!ownerScanner.atEnd()) {\n           TFile.Reader.Scanner.Entry entry \u003d ownerScanner.entry();\n           key.readFields(entry.getKeyStream());\n           if (key.toString().equals(APPLICATION_OWNER_KEY.toString())) {\n             DataInputStream valueStream \u003d entry.getValueStream();\n             return valueStream.readUTF();\n           }\n           ownerScanner.advance();\n         }\n         return null;\n       } finally {\n-        IOUtils.closeQuietly(ownerScanner);\n+        IOUtils.cleanupWithLogger(LOG, ownerScanner);\n       }\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public String getApplicationOwner() throws IOException {\n      TFile.Reader.Scanner ownerScanner \u003d null;\n      try {\n        ownerScanner \u003d reader.createScanner();\n        LogKey key \u003d new LogKey();\n        while (!ownerScanner.atEnd()) {\n          TFile.Reader.Scanner.Entry entry \u003d ownerScanner.entry();\n          key.readFields(entry.getKeyStream());\n          if (key.toString().equals(APPLICATION_OWNER_KEY.toString())) {\n            DataInputStream valueStream \u003d entry.getValueStream();\n            return valueStream.readUTF();\n          }\n          ownerScanner.advance();\n        }\n        return null;\n      } finally {\n        IOUtils.cleanupWithLogger(LOG, ownerScanner);\n      }\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/logaggregation/AggregatedLogFormat.java",
      "extendedDetails": {}
    },
    "c2cb7ea1ef6532020b69031dbd18b0f9b8369f0f": {
      "type": "Ybodychange",
      "commitMessage": "YARN-6876. Create an abstract log writer for extendability. Contributed by Xuan Gong.\n",
      "commitDate": "24/08/17 1:36 PM",
      "commitName": "c2cb7ea1ef6532020b69031dbd18b0f9b8369f0f",
      "commitAuthor": "Junping Du",
      "commitDateOld": "18/06/17 7:23 AM",
      "commitNameOld": "7582dedad1c73eabdc3eeece0a3a860e7bb33c1a",
      "commitAuthorOld": "Naganarasimha",
      "daysBetweenCommits": 67.26,
      "commitsBetweenForRepo": 421,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,19 @@\n     public String getApplicationOwner() throws IOException {\n       TFile.Reader.Scanner ownerScanner \u003d null;\n       try {\n         ownerScanner \u003d reader.createScanner();\n         LogKey key \u003d new LogKey();\n         while (!ownerScanner.atEnd()) {\n           TFile.Reader.Scanner.Entry entry \u003d ownerScanner.entry();\n           key.readFields(entry.getKeyStream());\n           if (key.toString().equals(APPLICATION_OWNER_KEY.toString())) {\n             DataInputStream valueStream \u003d entry.getValueStream();\n             return valueStream.readUTF();\n           }\n           ownerScanner.advance();\n         }\n         return null;\n       } finally {\n-        IOUtils.cleanup(LOG, ownerScanner);\n+        IOUtils.closeQuietly(ownerScanner);\n       }\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public String getApplicationOwner() throws IOException {\n      TFile.Reader.Scanner ownerScanner \u003d null;\n      try {\n        ownerScanner \u003d reader.createScanner();\n        LogKey key \u003d new LogKey();\n        while (!ownerScanner.atEnd()) {\n          TFile.Reader.Scanner.Entry entry \u003d ownerScanner.entry();\n          key.readFields(entry.getKeyStream());\n          if (key.toString().equals(APPLICATION_OWNER_KEY.toString())) {\n            DataInputStream valueStream \u003d entry.getValueStream();\n            return valueStream.readUTF();\n          }\n          ownerScanner.advance();\n        }\n        return null;\n      } finally {\n        IOUtils.closeQuietly(ownerScanner);\n      }\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/logaggregation/AggregatedLogFormat.java",
      "extendedDetails": {}
    },
    "688617d6d7e6377a37682b5676b805cc6e8cf3f0": {
      "type": "Ybodychange",
      "commitMessage": "YARN-3882. AggregatedLogFormat should close aclScanner and ownerScanner\nafter create them. Contributed by zhihai xu\n",
      "commitDate": "04/07/15 9:51 PM",
      "commitName": "688617d6d7e6377a37682b5676b805cc6e8cf3f0",
      "commitAuthor": "Xuan",
      "commitDateOld": "13/04/15 5:29 PM",
      "commitNameOld": "a77d628339afaf2f5a085c73fd81a805b18348c9",
      "commitAuthorOld": "Junping Du",
      "daysBetweenCommits": 82.18,
      "commitsBetweenForRepo": 709,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,14 +1,19 @@\n     public String getApplicationOwner() throws IOException {\n-      TFile.Reader.Scanner ownerScanner \u003d reader.createScanner();\n-      LogKey key \u003d new LogKey();\n-      while (!ownerScanner.atEnd()) {\n-        TFile.Reader.Scanner.Entry entry \u003d ownerScanner.entry();\n-        key.readFields(entry.getKeyStream());\n-        if (key.toString().equals(APPLICATION_OWNER_KEY.toString())) {\n-          DataInputStream valueStream \u003d entry.getValueStream();\n-          return valueStream.readUTF();\n+      TFile.Reader.Scanner ownerScanner \u003d null;\n+      try {\n+        ownerScanner \u003d reader.createScanner();\n+        LogKey key \u003d new LogKey();\n+        while (!ownerScanner.atEnd()) {\n+          TFile.Reader.Scanner.Entry entry \u003d ownerScanner.entry();\n+          key.readFields(entry.getKeyStream());\n+          if (key.toString().equals(APPLICATION_OWNER_KEY.toString())) {\n+            DataInputStream valueStream \u003d entry.getValueStream();\n+            return valueStream.readUTF();\n+          }\n+          ownerScanner.advance();\n         }\n-        ownerScanner.advance();\n+        return null;\n+      } finally {\n+        IOUtils.cleanup(LOG, ownerScanner);\n       }\n-      return null;\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public String getApplicationOwner() throws IOException {\n      TFile.Reader.Scanner ownerScanner \u003d null;\n      try {\n        ownerScanner \u003d reader.createScanner();\n        LogKey key \u003d new LogKey();\n        while (!ownerScanner.atEnd()) {\n          TFile.Reader.Scanner.Entry entry \u003d ownerScanner.entry();\n          key.readFields(entry.getKeyStream());\n          if (key.toString().equals(APPLICATION_OWNER_KEY.toString())) {\n            DataInputStream valueStream \u003d entry.getValueStream();\n            return valueStream.readUTF();\n          }\n          ownerScanner.advance();\n        }\n        return null;\n      } finally {\n        IOUtils.cleanup(LOG, ownerScanner);\n      }\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/logaggregation/AggregatedLogFormat.java",
      "extendedDetails": {}
    },
    "e1fdf62123625e4ba399af02f8aad500637d29d1": {
      "type": "Yfilerename",
      "commitMessage": "YARN-1. Promote YARN to be a sub-project of Apache Hadoop.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1370666 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "07/08/12 10:22 PM",
      "commitName": "e1fdf62123625e4ba399af02f8aad500637d29d1",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "07/08/12 7:53 PM",
      "commitNameOld": "34554d1e11ee1d5b564d7d9ed3e6d55931d72749",
      "commitAuthorOld": "Aaron Myers",
      "daysBetweenCommits": 0.1,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "    public String getApplicationOwner() throws IOException {\n      TFile.Reader.Scanner ownerScanner \u003d reader.createScanner();\n      LogKey key \u003d new LogKey();\n      while (!ownerScanner.atEnd()) {\n        TFile.Reader.Scanner.Entry entry \u003d ownerScanner.entry();\n        key.readFields(entry.getKeyStream());\n        if (key.toString().equals(APPLICATION_OWNER_KEY.toString())) {\n          DataInputStream valueStream \u003d entry.getValueStream();\n          return valueStream.readUTF();\n        }\n        ownerScanner.advance();\n      }\n      return null;\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/logaggregation/AggregatedLogFormat.java",
      "extendedDetails": {
        "oldPath": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/logaggregation/AggregatedLogFormat.java",
        "newPath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/logaggregation/AggregatedLogFormat.java"
      }
    },
    "c27601fefebd0af887a12d684bfc6f90d9fc0321": {
      "type": "Yfilerename",
      "commitMessage": "MAPREDUCE-3297. Moved log related components into yarn-common so that HistoryServer and clients can use them without depending on the yarn-server-nodemanager module. Contributed by Siddharth Seth.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1196986 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "03/11/11 1:02 AM",
      "commitName": "c27601fefebd0af887a12d684bfc6f90d9fc0321",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "03/11/11 12:06 AM",
      "commitNameOld": "0df4878033b797b9313c887ca9d75f8ea104d029",
      "commitAuthorOld": "Arun Murthy",
      "daysBetweenCommits": 0.04,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "    public String getApplicationOwner() throws IOException {\n      TFile.Reader.Scanner ownerScanner \u003d reader.createScanner();\n      LogKey key \u003d new LogKey();\n      while (!ownerScanner.atEnd()) {\n        TFile.Reader.Scanner.Entry entry \u003d ownerScanner.entry();\n        key.readFields(entry.getKeyStream());\n        if (key.toString().equals(APPLICATION_OWNER_KEY.toString())) {\n          DataInputStream valueStream \u003d entry.getValueStream();\n          return valueStream.readUTF();\n        }\n        ownerScanner.advance();\n      }\n      return null;\n    }",
      "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/logaggregation/AggregatedLogFormat.java",
      "extendedDetails": {
        "oldPath": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/logaggregation/AggregatedLogFormat.java",
        "newPath": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/logaggregation/AggregatedLogFormat.java"
      }
    },
    "670fa24b48acb407c22fbfdde87ae3123dcbf449": {
      "type": "Yintroduced",
      "commitMessage": "MAPREDUCE-2989. Modified JobHistory to link to task and AM logs from the JobHistoryServer. Contributed by Siddharth Seth.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1190174 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "27/10/11 11:45 PM",
      "commitName": "670fa24b48acb407c22fbfdde87ae3123dcbf449",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "diff": "@@ -0,0 +1,14 @@\n+    public String getApplicationOwner() throws IOException {\n+      TFile.Reader.Scanner ownerScanner \u003d reader.createScanner();\n+      LogKey key \u003d new LogKey();\n+      while (!ownerScanner.atEnd()) {\n+        TFile.Reader.Scanner.Entry entry \u003d ownerScanner.entry();\n+        key.readFields(entry.getKeyStream());\n+        if (key.toString().equals(APPLICATION_OWNER_KEY.toString())) {\n+          DataInputStream valueStream \u003d entry.getValueStream();\n+          return valueStream.readUTF();\n+        }\n+        ownerScanner.advance();\n+      }\n+      return null;\n+    }\n\\ No newline at end of file\n",
      "actualSource": "    public String getApplicationOwner() throws IOException {\n      TFile.Reader.Scanner ownerScanner \u003d reader.createScanner();\n      LogKey key \u003d new LogKey();\n      while (!ownerScanner.atEnd()) {\n        TFile.Reader.Scanner.Entry entry \u003d ownerScanner.entry();\n        key.readFields(entry.getKeyStream());\n        if (key.toString().equals(APPLICATION_OWNER_KEY.toString())) {\n          DataInputStream valueStream \u003d entry.getValueStream();\n          return valueStream.readUTF();\n        }\n        ownerScanner.advance();\n      }\n      return null;\n    }",
      "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/logaggregation/AggregatedLogFormat.java"
    }
  }
}