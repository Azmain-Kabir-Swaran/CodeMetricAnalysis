{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "ProportionalCapacityPreemptionPolicy.java",
  "functionName": "editSchedule",
  "functionId": "editSchedule",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/monitor/capacity/ProportionalCapacityPreemptionPolicy.java",
  "functionStartLine": 313,
  "functionEndLine": 325,
  "numCommitsSeen": 49,
  "timeTaken": 3165,
  "changeHistory": [
    "e6ec02001fc4eed9eb51c8653d8f931135e49eda",
    "bb62e0592566b2fcae7136b30972aad2d3ac55b0",
    "7cb3a3da96e59fc9b6528644dae5fb0ac1e44eac",
    "d497f6ea2be559aa31ed76f37ae949dbfabe2a51",
    "0a2d3e717d9c42090a32ff177991a222a1e34132",
    "82f3454f5ac1f1c457e668e2cee12b4dcc800ee1",
    "85f0efb68f9d1d9ee3466e3939c4fc2f985ccf61"
  ],
  "changeHistoryShort": {
    "e6ec02001fc4eed9eb51c8653d8f931135e49eda": "Ybodychange",
    "bb62e0592566b2fcae7136b30972aad2d3ac55b0": "Ybodychange",
    "7cb3a3da96e59fc9b6528644dae5fb0ac1e44eac": "Ymodifierchange",
    "d497f6ea2be559aa31ed76f37ae949dbfabe2a51": "Ybodychange",
    "0a2d3e717d9c42090a32ff177991a222a1e34132": "Ybodychange",
    "82f3454f5ac1f1c457e668e2cee12b4dcc800ee1": "Ybodychange",
    "85f0efb68f9d1d9ee3466e3939c4fc2f985ccf61": "Yintroduced"
  },
  "changeHistoryDetails": {
    "e6ec02001fc4eed9eb51c8653d8f931135e49eda": {
      "type": "Ybodychange",
      "commitMessage": "YARN-7370: Preemption properties should be refreshable. Contrubted by Gergely Nov√°k.\n",
      "commitDate": "02/11/17 10:37 AM",
      "commitName": "e6ec02001fc4eed9eb51c8653d8f931135e49eda",
      "commitAuthor": "Eric Payne",
      "commitDateOld": "11/08/17 2:04 PM",
      "commitNameOld": "218588be773123404af4fd26eed5c9e3625feaa7",
      "commitAuthorOld": "Daniel Templeton",
      "daysBetweenCommits": 82.86,
      "commitsBetweenForRepo": 688,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,11 +1,13 @@\n   public synchronized void editSchedule() {\n+    updateConfigIfNeeded();\n+\n     long startTs \u003d clock.getTime();\n \n     CSQueue root \u003d scheduler.getRootQueue();\n     Resource clusterResources \u003d Resources.clone(scheduler.getClusterResource());\n     containerBasedPreemptOrKill(root, clusterResources);\n \n     if (LOG.isDebugEnabled()) {\n       LOG.debug(\"Total time used\u003d\" + (clock.getTime() - startTs) + \" ms.\");\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public synchronized void editSchedule() {\n    updateConfigIfNeeded();\n\n    long startTs \u003d clock.getTime();\n\n    CSQueue root \u003d scheduler.getRootQueue();\n    Resource clusterResources \u003d Resources.clone(scheduler.getClusterResource());\n    containerBasedPreemptOrKill(root, clusterResources);\n\n    if (LOG.isDebugEnabled()) {\n      LOG.debug(\"Total time used\u003d\" + (clock.getTime() - startTs) + \" ms.\");\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/monitor/capacity/ProportionalCapacityPreemptionPolicy.java",
      "extendedDetails": {}
    },
    "bb62e0592566b2fcae7136b30972aad2d3ac55b0": {
      "type": "Ybodychange",
      "commitMessage": "YARN-4390. Do surgical preemption based on reserved container in CapacityScheduler. Contributed by Wangda Tan\n",
      "commitDate": "05/05/16 12:56 PM",
      "commitName": "bb62e0592566b2fcae7136b30972aad2d3ac55b0",
      "commitAuthor": "Jian He",
      "commitDateOld": "22/04/16 11:40 AM",
      "commitNameOld": "7cb3a3da96e59fc9b6528644dae5fb0ac1e44eac",
      "commitAuthorOld": "Wangda Tan",
      "daysBetweenCommits": 13.05,
      "commitsBetweenForRepo": 72,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,5 +1,11 @@\n   public synchronized void editSchedule() {\n+    long startTs \u003d clock.getTime();\n+\n     CSQueue root \u003d scheduler.getRootQueue();\n     Resource clusterResources \u003d Resources.clone(scheduler.getClusterResource());\n     containerBasedPreemptOrKill(root, clusterResources);\n+\n+    if (LOG.isDebugEnabled()) {\n+      LOG.debug(\"Total time used\u003d\" + (clock.getTime() - startTs) + \" ms.\");\n+    }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public synchronized void editSchedule() {\n    long startTs \u003d clock.getTime();\n\n    CSQueue root \u003d scheduler.getRootQueue();\n    Resource clusterResources \u003d Resources.clone(scheduler.getClusterResource());\n    containerBasedPreemptOrKill(root, clusterResources);\n\n    if (LOG.isDebugEnabled()) {\n      LOG.debug(\"Total time used\u003d\" + (clock.getTime() - startTs) + \" ms.\");\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/monitor/capacity/ProportionalCapacityPreemptionPolicy.java",
      "extendedDetails": {}
    },
    "7cb3a3da96e59fc9b6528644dae5fb0ac1e44eac": {
      "type": "Ymodifierchange",
      "commitMessage": "YARN-4846. Fix random failures for TestCapacitySchedulerPreemption#testPreemptionPolicyShouldRespectAlreadyMarkedKillableContainers. (Bibin A Chundatt via wangda)\n",
      "commitDate": "22/04/16 11:40 AM",
      "commitName": "7cb3a3da96e59fc9b6528644dae5fb0ac1e44eac",
      "commitAuthor": "Wangda Tan",
      "commitDateOld": "30/03/16 12:43 PM",
      "commitNameOld": "60e4116bf1d00afed91010e57357fe54057e4e39",
      "commitAuthorOld": "Jian He",
      "daysBetweenCommits": 22.96,
      "commitsBetweenForRepo": 153,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,5 +1,5 @@\n-  public void editSchedule() {\n+  public synchronized void editSchedule() {\n     CSQueue root \u003d scheduler.getRootQueue();\n     Resource clusterResources \u003d Resources.clone(scheduler.getClusterResource());\n     containerBasedPreemptOrKill(root, clusterResources);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public synchronized void editSchedule() {\n    CSQueue root \u003d scheduler.getRootQueue();\n    Resource clusterResources \u003d Resources.clone(scheduler.getClusterResource());\n    containerBasedPreemptOrKill(root, clusterResources);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/monitor/capacity/ProportionalCapacityPreemptionPolicy.java",
      "extendedDetails": {
        "oldValue": "[public]",
        "newValue": "[public, synchronized]"
      }
    },
    "d497f6ea2be559aa31ed76f37ae949dbfabe2a51": {
      "type": "Ybodychange",
      "commitMessage": "YARN-2498. Respect labels in preemption policy of capacity scheduler for inter-queue preemption. Contributed by Wangda Tan\n",
      "commitDate": "24/04/15 5:03 PM",
      "commitName": "d497f6ea2be559aa31ed76f37ae949dbfabe2a51",
      "commitAuthor": "Jian He",
      "commitDateOld": "20/04/15 5:12 PM",
      "commitNameOld": "44872b76fcc0ddfbc7b0a4e54eef50fe8708e0f5",
      "commitAuthorOld": "Wangda Tan",
      "daysBetweenCommits": 3.99,
      "commitsBetweenForRepo": 60,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,8 +1,5 @@\n   public void editSchedule() {\n     CSQueue root \u003d scheduler.getRootQueue();\n     Resource clusterResources \u003d Resources.clone(scheduler.getClusterResource());\n-    clusterResources \u003d getNonLabeledResources(clusterResources);\n-    setNodeLabels(scheduler.getRMContext().getNodeLabelManager()\n-        .getNodeLabels());\n     containerBasedPreemptOrKill(root, clusterResources);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void editSchedule() {\n    CSQueue root \u003d scheduler.getRootQueue();\n    Resource clusterResources \u003d Resources.clone(scheduler.getClusterResource());\n    containerBasedPreemptOrKill(root, clusterResources);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/monitor/capacity/ProportionalCapacityPreemptionPolicy.java",
      "extendedDetails": {}
    },
    "0a2d3e717d9c42090a32ff177991a222a1e34132": {
      "type": "Ybodychange",
      "commitMessage": "YARN-2933. Capacity Scheduler preemption policy should only consider capacity without labels temporarily. Contributed by Mayank Bansal\n",
      "commitDate": "19/01/15 4:48 PM",
      "commitName": "0a2d3e717d9c42090a32ff177991a222a1e34132",
      "commitAuthor": "Wangda Tan",
      "commitDateOld": "05/12/14 1:06 PM",
      "commitNameOld": "4b130821995a3cfe20c71e38e0f63294085c0491",
      "commitAuthorOld": "Jason Lowe",
      "daysBetweenCommits": 45.15,
      "commitsBetweenForRepo": 253,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,6 +1,8 @@\n-  public void editSchedule(){\n+  public void editSchedule() {\n     CSQueue root \u003d scheduler.getRootQueue();\n-    Resource clusterResources \u003d\n-      Resources.clone(scheduler.getClusterResource());\n+    Resource clusterResources \u003d Resources.clone(scheduler.getClusterResource());\n+    clusterResources \u003d getNonLabeledResources(clusterResources);\n+    setNodeLabels(scheduler.getRMContext().getNodeLabelManager()\n+        .getNodeLabels());\n     containerBasedPreemptOrKill(root, clusterResources);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void editSchedule() {\n    CSQueue root \u003d scheduler.getRootQueue();\n    Resource clusterResources \u003d Resources.clone(scheduler.getClusterResource());\n    clusterResources \u003d getNonLabeledResources(clusterResources);\n    setNodeLabels(scheduler.getRMContext().getNodeLabelManager()\n        .getNodeLabels());\n    containerBasedPreemptOrKill(root, clusterResources);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/monitor/capacity/ProportionalCapacityPreemptionPolicy.java",
      "extendedDetails": {}
    },
    "82f3454f5ac1f1c457e668e2cee12b4dcc800ee1": {
      "type": "Ybodychange",
      "commitMessage": "YARN-2017. Merged some of the common scheduler code. Contributed by Jian He.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1596753 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "21/05/14 10:32 PM",
      "commitName": "82f3454f5ac1f1c457e668e2cee12b4dcc800ee1",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "13/05/14 4:15 PM",
      "commitNameOld": "45b42676f9333ed4fa05355ccb4e1f91a9556525",
      "commitAuthorOld": "Christopher Douglas",
      "daysBetweenCommits": 8.26,
      "commitsBetweenForRepo": 50,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,6 +1,6 @@\n   public void editSchedule(){\n     CSQueue root \u003d scheduler.getRootQueue();\n     Resource clusterResources \u003d\n-      Resources.clone(scheduler.getClusterResources());\n+      Resources.clone(scheduler.getClusterResource());\n     containerBasedPreemptOrKill(root, clusterResources);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void editSchedule(){\n    CSQueue root \u003d scheduler.getRootQueue();\n    Resource clusterResources \u003d\n      Resources.clone(scheduler.getClusterResource());\n    containerBasedPreemptOrKill(root, clusterResources);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/monitor/capacity/ProportionalCapacityPreemptionPolicy.java",
      "extendedDetails": {}
    },
    "85f0efb68f9d1d9ee3466e3939c4fc2f985ccf61": {
      "type": "Yintroduced",
      "commitMessage": "YARN-569. Add support for requesting and enforcing preemption requests via\na capacity monitor. Contributed by Carlo Curino, Chris Douglas\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1502083 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "10/07/13 6:20 PM",
      "commitName": "85f0efb68f9d1d9ee3466e3939c4fc2f985ccf61",
      "commitAuthor": "Christopher Douglas",
      "diff": "@@ -0,0 +1,6 @@\n+  public void editSchedule(){\n+    CSQueue root \u003d scheduler.getRootQueue();\n+    Resource clusterResources \u003d\n+      Resources.clone(scheduler.getClusterResources());\n+    containerBasedPreemptOrKill(root, clusterResources);\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public void editSchedule(){\n    CSQueue root \u003d scheduler.getRootQueue();\n    Resource clusterResources \u003d\n      Resources.clone(scheduler.getClusterResources());\n    containerBasedPreemptOrKill(root, clusterResources);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/monitor/capacity/ProportionalCapacityPreemptionPolicy.java"
    }
  }
}