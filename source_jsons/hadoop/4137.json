{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "CombinedHostsFileWriter.java",
  "functionName": "writeFile",
  "functionId": "writeFile___hostsFile-String(modifiers-final)__allDNs-Set__DatanodeAdminProperties__(modifiers-final)",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/util/CombinedHostsFileWriter.java",
  "functionStartLine": 59,
  "functionEndLine": 68,
  "numCommitsSeen": 5,
  "timeTaken": 1469,
  "changeHistory": [
    "7a3188d054481b9bd563e337901e93476303ce7f",
    "230b85d5865b7e08fb7aaeab45295b5b966011ef",
    "991c946593454b73b56f3c403fe128afe6f46355",
    "4fcfea71bfb16295f3a661e712d66351a1edc55e"
  ],
  "changeHistoryShort": {
    "7a3188d054481b9bd563e337901e93476303ce7f": "Ybodychange",
    "230b85d5865b7e08fb7aaeab45295b5b966011ef": "Ybodychange",
    "991c946593454b73b56f3c403fe128afe6f46355": "Ybodychange",
    "4fcfea71bfb16295f3a661e712d66351a1edc55e": "Yintroduced"
  },
  "changeHistoryDetails": {
    "7a3188d054481b9bd563e337901e93476303ce7f": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-16282. Avoid FileStream to improve performance. Contributed by Ayush Saxena.\n",
      "commitDate": "02/05/19 12:58 PM",
      "commitName": "7a3188d054481b9bd563e337901e93476303ce7f",
      "commitAuthor": "Giovanni Matteo Fumarola",
      "commitDateOld": "20/09/17 9:03 AM",
      "commitNameOld": "230b85d5865b7e08fb7aaeab45295b5b966011ef",
      "commitAuthorOld": "Ming Ma",
      "daysBetweenCommits": 589.16,
      "commitsBetweenForRepo": 4945,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,9 +1,10 @@\n   public static void writeFile(final String hostsFile,\n       final Set\u003cDatanodeAdminProperties\u003e allDNs) throws IOException {\n     final ObjectMapper objectMapper \u003d new ObjectMapper();\n \n     try (Writer output \u003d\n-       new OutputStreamWriter(new FileOutputStream(hostsFile), \"UTF-8\")) {\n+        new OutputStreamWriter(Files.newOutputStream(Paths.get(hostsFile)),\n+            \"UTF-8\")) {\n       objectMapper.writeValue(output, allDNs);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void writeFile(final String hostsFile,\n      final Set\u003cDatanodeAdminProperties\u003e allDNs) throws IOException {\n    final ObjectMapper objectMapper \u003d new ObjectMapper();\n\n    try (Writer output \u003d\n        new OutputStreamWriter(Files.newOutputStream(Paths.get(hostsFile)),\n            \"UTF-8\")) {\n      objectMapper.writeValue(output, allDNs);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/util/CombinedHostsFileWriter.java",
      "extendedDetails": {}
    },
    "230b85d5865b7e08fb7aaeab45295b5b966011ef": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-12473. Change hosts JSON file format.\n",
      "commitDate": "20/09/17 9:03 AM",
      "commitName": "230b85d5865b7e08fb7aaeab45295b5b966011ef",
      "commitAuthor": "Ming Ma",
      "commitDateOld": "06/11/16 6:16 PM",
      "commitNameOld": "049e7d27bea13d4254baccf49401daae820b71df",
      "commitAuthorOld": "Akira Ajisaka",
      "daysBetweenCommits": 317.57,
      "commitsBetweenForRepo": 1924,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,11 +1,9 @@\n   public static void writeFile(final String hostsFile,\n       final Set\u003cDatanodeAdminProperties\u003e allDNs) throws IOException {\n-    StringBuilder configs \u003d new StringBuilder();\n+    final ObjectMapper objectMapper \u003d new ObjectMapper();\n+\n     try (Writer output \u003d\n        new OutputStreamWriter(new FileOutputStream(hostsFile), \"UTF-8\")) {\n-      for (DatanodeAdminProperties datanodeAdminProperties: allDNs) {\n-        configs.append(MAPPER.writeValueAsString(datanodeAdminProperties));\n-      }\n-      output.write(configs.toString());\n+      objectMapper.writeValue(output, allDNs);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void writeFile(final String hostsFile,\n      final Set\u003cDatanodeAdminProperties\u003e allDNs) throws IOException {\n    final ObjectMapper objectMapper \u003d new ObjectMapper();\n\n    try (Writer output \u003d\n       new OutputStreamWriter(new FileOutputStream(hostsFile), \"UTF-8\")) {\n      objectMapper.writeValue(output, allDNs);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/util/CombinedHostsFileWriter.java",
      "extendedDetails": {}
    },
    "991c946593454b73b56f3c403fe128afe6f46355": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-10568. Reuse ObjectMapper instance in CombinedHostsFileReader and CombinedHostsFileWriter. Contributed by Yiqun Lin.\n",
      "commitDate": "29/06/16 10:10 AM",
      "commitName": "991c946593454b73b56f3c403fe128afe6f46355",
      "commitAuthor": "Akira Ajisaka",
      "commitDateOld": "25/03/16 5:09 PM",
      "commitNameOld": "4fcfea71bfb16295f3a661e712d66351a1edc55e",
      "commitAuthorOld": "Lei Xu",
      "daysBetweenCommits": 95.71,
      "commitsBetweenForRepo": 659,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,12 +1,11 @@\n   public static void writeFile(final String hostsFile,\n       final Set\u003cDatanodeAdminProperties\u003e allDNs) throws IOException {\n     StringBuilder configs \u003d new StringBuilder();\n     try (Writer output \u003d\n        new OutputStreamWriter(new FileOutputStream(hostsFile), \"UTF-8\")) {\n       for (DatanodeAdminProperties datanodeAdminProperties: allDNs) {\n-        ObjectMapper mapper \u003d new ObjectMapper();\n-        configs.append(mapper.writeValueAsString(datanodeAdminProperties));\n+        configs.append(MAPPER.writeValueAsString(datanodeAdminProperties));\n       }\n       output.write(configs.toString());\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void writeFile(final String hostsFile,\n      final Set\u003cDatanodeAdminProperties\u003e allDNs) throws IOException {\n    StringBuilder configs \u003d new StringBuilder();\n    try (Writer output \u003d\n       new OutputStreamWriter(new FileOutputStream(hostsFile), \"UTF-8\")) {\n      for (DatanodeAdminProperties datanodeAdminProperties: allDNs) {\n        configs.append(MAPPER.writeValueAsString(datanodeAdminProperties));\n      }\n      output.write(configs.toString());\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/util/CombinedHostsFileWriter.java",
      "extendedDetails": {}
    },
    "4fcfea71bfb16295f3a661e712d66351a1edc55e": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-9005. Provide support for upgrade domain script. (Ming Ma via Lei Xu)\n",
      "commitDate": "25/03/16 5:09 PM",
      "commitName": "4fcfea71bfb16295f3a661e712d66351a1edc55e",
      "commitAuthor": "Lei Xu",
      "diff": "@@ -0,0 +1,12 @@\n+  public static void writeFile(final String hostsFile,\n+      final Set\u003cDatanodeAdminProperties\u003e allDNs) throws IOException {\n+    StringBuilder configs \u003d new StringBuilder();\n+    try (Writer output \u003d\n+       new OutputStreamWriter(new FileOutputStream(hostsFile), \"UTF-8\")) {\n+      for (DatanodeAdminProperties datanodeAdminProperties: allDNs) {\n+        ObjectMapper mapper \u003d new ObjectMapper();\n+        configs.append(mapper.writeValueAsString(datanodeAdminProperties));\n+      }\n+      output.write(configs.toString());\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public static void writeFile(final String hostsFile,\n      final Set\u003cDatanodeAdminProperties\u003e allDNs) throws IOException {\n    StringBuilder configs \u003d new StringBuilder();\n    try (Writer output \u003d\n       new OutputStreamWriter(new FileOutputStream(hostsFile), \"UTF-8\")) {\n      for (DatanodeAdminProperties datanodeAdminProperties: allDNs) {\n        ObjectMapper mapper \u003d new ObjectMapper();\n        configs.append(mapper.writeValueAsString(datanodeAdminProperties));\n      }\n      output.write(configs.toString());\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/util/CombinedHostsFileWriter.java"
    }
  }
}