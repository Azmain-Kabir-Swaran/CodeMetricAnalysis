{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "StorageLocation.java",
  "functionName": "matchesStorageDirectory",
  "functionId": "matchesStorageDirectory___sd-StorageDirectory__bpid-String",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/StorageLocation.java",
  "functionStartLine": 103,
  "functionEndLine": 117,
  "numCommitsSeen": 19,
  "timeTaken": 2461,
  "changeHistory": [
    "8239e3afb31d3c4485817d4b8b8b195b554acbe7",
    "b668eb91556b8c85c2b4925808ccb1f769031c20",
    "f209e93566b159c22054dcb276e45f23a2b7b7d1"
  ],
  "changeHistoryShort": {
    "8239e3afb31d3c4485817d4b8b8b195b554acbe7": "Ybodychange",
    "b668eb91556b8c85c2b4925808ccb1f769031c20": "Ybodychange",
    "f209e93566b159c22054dcb276e45f23a2b7b7d1": "Yintroduced"
  },
  "changeHistoryDetails": {
    "8239e3afb31d3c4485817d4b8b8b195b554acbe7": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-12712. [9806] Code style cleanup\n",
      "commitDate": "15/12/17 5:51 PM",
      "commitName": "8239e3afb31d3c4485817d4b8b8b195b554acbe7",
      "commitAuthor": "Virajith Jalaparti",
      "commitDateOld": "15/12/17 5:51 PM",
      "commitNameOld": "663b3c08b131ea2db693e1a5d2f5da98242fa854",
      "commitAuthorOld": "Virajith Jalaparti",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 28,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,15 @@\n   public boolean matchesStorageDirectory(StorageDirectory sd,\n       String bpid) throws IOException {\n     if (sd.getStorageLocation().getStorageType() \u003d\u003d StorageType.PROVIDED \u0026\u0026\n         storageType \u003d\u003d StorageType.PROVIDED) {\n       return matchesStorageDirectory(sd);\n     }\n     if (sd.getStorageLocation().getStorageType() \u003d\u003d StorageType.PROVIDED ||\n         storageType \u003d\u003d StorageType.PROVIDED) {\n-      //only one of these is PROVIDED; so it cannot be a match!\n+      // only one PROVIDED storage directory can exist; so this cannot match!\n       return false;\n     }\n-    //both storage directories are local\n+    // both storage directories are local\n     return this.getBpURI(bpid, Storage.STORAGE_DIR_CURRENT).normalize()\n         .equals(sd.getRoot().toURI().normalize());\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public boolean matchesStorageDirectory(StorageDirectory sd,\n      String bpid) throws IOException {\n    if (sd.getStorageLocation().getStorageType() \u003d\u003d StorageType.PROVIDED \u0026\u0026\n        storageType \u003d\u003d StorageType.PROVIDED) {\n      return matchesStorageDirectory(sd);\n    }\n    if (sd.getStorageLocation().getStorageType() \u003d\u003d StorageType.PROVIDED ||\n        storageType \u003d\u003d StorageType.PROVIDED) {\n      // only one PROVIDED storage directory can exist; so this cannot match!\n      return false;\n    }\n    // both storage directories are local\n    return this.getBpURI(bpid, Storage.STORAGE_DIR_CURRENT).normalize()\n        .equals(sd.getRoot().toURI().normalize());\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/StorageLocation.java",
      "extendedDetails": {}
    },
    "b668eb91556b8c85c2b4925808ccb1f769031c20": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-10675. Datanode support to read from external stores.\n",
      "commitDate": "15/12/17 5:51 PM",
      "commitName": "b668eb91556b8c85c2b4925808ccb1f769031c20",
      "commitAuthor": "Virajith Jalaparti",
      "commitDateOld": "11/11/16 3:02 PM",
      "commitNameOld": "3d267177776547ceb32c5b9ed04cd9ec05b3421a",
      "commitAuthorOld": "Arpit Agarwal",
      "daysBetweenCommits": 399.12,
      "commitsBetweenForRepo": 2535,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,5 +1,15 @@\n   public boolean matchesStorageDirectory(StorageDirectory sd,\n       String bpid) throws IOException {\n+    if (sd.getStorageLocation().getStorageType() \u003d\u003d StorageType.PROVIDED \u0026\u0026\n+        storageType \u003d\u003d StorageType.PROVIDED) {\n+      return matchesStorageDirectory(sd);\n+    }\n+    if (sd.getStorageLocation().getStorageType() \u003d\u003d StorageType.PROVIDED ||\n+        storageType \u003d\u003d StorageType.PROVIDED) {\n+      //only one of these is PROVIDED; so it cannot be a match!\n+      return false;\n+    }\n+    //both storage directories are local\n     return this.getBpURI(bpid, Storage.STORAGE_DIR_CURRENT).normalize()\n         .equals(sd.getRoot().toURI().normalize());\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public boolean matchesStorageDirectory(StorageDirectory sd,\n      String bpid) throws IOException {\n    if (sd.getStorageLocation().getStorageType() \u003d\u003d StorageType.PROVIDED \u0026\u0026\n        storageType \u003d\u003d StorageType.PROVIDED) {\n      return matchesStorageDirectory(sd);\n    }\n    if (sd.getStorageLocation().getStorageType() \u003d\u003d StorageType.PROVIDED ||\n        storageType \u003d\u003d StorageType.PROVIDED) {\n      //only one of these is PROVIDED; so it cannot be a match!\n      return false;\n    }\n    //both storage directories are local\n    return this.getBpURI(bpid, Storage.STORAGE_DIR_CURRENT).normalize()\n        .equals(sd.getRoot().toURI().normalize());\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/StorageLocation.java",
      "extendedDetails": {}
    },
    "f209e93566b159c22054dcb276e45f23a2b7b7d1": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-10638. Modifications to remove the assumption that StorageLocation is associated with java.io.File in Datanode. (Virajith Jalaparti via lei)\n",
      "commitDate": "26/10/16 10:32 AM",
      "commitName": "f209e93566b159c22054dcb276e45f23a2b7b7d1",
      "commitAuthor": "Lei Xu",
      "diff": "@@ -0,0 +1,5 @@\n+  public boolean matchesStorageDirectory(StorageDirectory sd,\n+      String bpid) throws IOException {\n+    return this.getBpURI(bpid, Storage.STORAGE_DIR_CURRENT).normalize()\n+        .equals(sd.getRoot().toURI().normalize());\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public boolean matchesStorageDirectory(StorageDirectory sd,\n      String bpid) throws IOException {\n    return this.getBpURI(bpid, Storage.STORAGE_DIR_CURRENT).normalize()\n        .equals(sd.getRoot().toURI().normalize());\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/StorageLocation.java"
    }
  }
}