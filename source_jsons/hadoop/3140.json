{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "WebHdfsFileSystem.java",
  "functionName": "getHomeDirectory",
  "functionId": "getHomeDirectory",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/web/WebHdfsFileSystem.java",
  "functionStartLine": 420,
  "functionEndLine": 441,
  "numCommitsSeen": 179,
  "timeTaken": 4653,
  "changeHistory": [
    "d78854b928bb877f26b11b5b212a100a79941f35",
    "fac4e04dd359a7ff31f286d664fb06f019ec0b58",
    "bcf89ddc7d52e04725caf104f5958e33d9f51b35",
    "09a156fcce2bc1be4081717bf7ef7d290e80d818",
    "61d0b7530c8978c095ab6f62d9d38e168bd829c6"
  ],
  "changeHistoryShort": {
    "d78854b928bb877f26b11b5b212a100a79941f35": "Ybodychange",
    "fac4e04dd359a7ff31f286d664fb06f019ec0b58": "Ybodychange",
    "bcf89ddc7d52e04725caf104f5958e33d9f51b35": "Yfilerename",
    "09a156fcce2bc1be4081717bf7ef7d290e80d818": "Ybodychange",
    "61d0b7530c8978c095ab6f62d9d38e168bd829c6": "Yintroduced"
  },
  "changeHistoryDetails": {
    "d78854b928bb877f26b11b5b212a100a79941f35": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-14434.  Ignore user.name query parameter in secure WebHDFS.\n             Contributed by KWON BYUNGCHANG\n",
      "commitDate": "28/05/19 2:31 PM",
      "commitName": "d78854b928bb877f26b11b5b212a100a79941f35",
      "commitAuthor": "Eric Yang",
      "commitDateOld": "17/05/19 10:20 AM",
      "commitNameOld": "3e5e5b028ad7e199d08e524fe7cddeee5db51a6d",
      "commitAuthorOld": "Srinivasu Majeti",
      "daysBetweenCommits": 11.17,
      "commitsBetweenForRepo": 58,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,23 +1,22 @@\n   public Path getHomeDirectory() {\n     if (cachedHomeDirectory \u003d\u003d null) {\n       final HttpOpParam.Op op \u003d GetOpParam.Op.GETHOMEDIRECTORY;\n       try {\n-        String pathFromDelegatedFS \u003d new FsPathResponseRunner\u003cString\u003e(op, null,\n-            new UserParam(ugi)) {\n+        String pathFromDelegatedFS \u003d new FsPathResponseRunner\u003cString\u003e(op, null){\n           @Override\n           String decodeResponse(Map\u003c?, ?\u003e json) throws IOException {\n             return JsonUtilClient.getPath(json);\n           }\n         }   .run();\n \n         cachedHomeDirectory \u003d new Path(pathFromDelegatedFS).makeQualified(\n             this.getUri(), null);\n \n       } catch (IOException e) {\n         LOG.error(\"Unable to get HomeDirectory from original File System\", e);\n         cachedHomeDirectory \u003d new Path(\"/user/\" + ugi.getShortUserName())\n             .makeQualified(this.getUri(), null);\n       }\n     }\n     return cachedHomeDirectory;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public Path getHomeDirectory() {\n    if (cachedHomeDirectory \u003d\u003d null) {\n      final HttpOpParam.Op op \u003d GetOpParam.Op.GETHOMEDIRECTORY;\n      try {\n        String pathFromDelegatedFS \u003d new FsPathResponseRunner\u003cString\u003e(op, null){\n          @Override\n          String decodeResponse(Map\u003c?, ?\u003e json) throws IOException {\n            return JsonUtilClient.getPath(json);\n          }\n        }   .run();\n\n        cachedHomeDirectory \u003d new Path(pathFromDelegatedFS).makeQualified(\n            this.getUri(), null);\n\n      } catch (IOException e) {\n        LOG.error(\"Unable to get HomeDirectory from original File System\", e);\n        cachedHomeDirectory \u003d new Path(\"/user/\" + ugi.getShortUserName())\n            .makeQualified(this.getUri(), null);\n      }\n    }\n    return cachedHomeDirectory;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/web/WebHdfsFileSystem.java",
      "extendedDetails": {}
    },
    "fac4e04dd359a7ff31f286d664fb06f019ec0b58": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-8542. WebHDFS getHomeDirectory behavior does not match specification. Contributed by  Kanaka Kumar Avvaru.\n",
      "commitDate": "22/06/15 4:30 PM",
      "commitName": "fac4e04dd359a7ff31f286d664fb06f019ec0b58",
      "commitAuthor": "Jakob Homan",
      "commitDateOld": "02/05/15 10:03 AM",
      "commitNameOld": "6ae2a0d048e133b43249c248a75a4d77d9abb80d",
      "commitAuthorOld": "Haohui Mai",
      "daysBetweenCommits": 51.27,
      "commitsBetweenForRepo": 460,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,3 +1,23 @@\n   public Path getHomeDirectory() {\n-    return makeQualified(new Path(getHomeDirectoryString(ugi)));\n+    if (cachedHomeDirectory \u003d\u003d null) {\n+      final HttpOpParam.Op op \u003d GetOpParam.Op.GETHOMEDIRECTORY;\n+      try {\n+        String pathFromDelegatedFS \u003d new FsPathResponseRunner\u003cString\u003e(op, null,\n+            new UserParam(ugi)) {\n+          @Override\n+          String decodeResponse(Map\u003c?, ?\u003e json) throws IOException {\n+            return JsonUtilClient.getPath(json);\n+          }\n+        }   .run();\n+\n+        cachedHomeDirectory \u003d new Path(pathFromDelegatedFS).makeQualified(\n+            this.getUri(), null);\n+\n+      } catch (IOException e) {\n+        LOG.error(\"Unable to get HomeDirectory from original File System\", e);\n+        cachedHomeDirectory \u003d new Path(\"/user/\" + ugi.getShortUserName())\n+            .makeQualified(this.getUri(), null);\n+      }\n+    }\n+    return cachedHomeDirectory;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public Path getHomeDirectory() {\n    if (cachedHomeDirectory \u003d\u003d null) {\n      final HttpOpParam.Op op \u003d GetOpParam.Op.GETHOMEDIRECTORY;\n      try {\n        String pathFromDelegatedFS \u003d new FsPathResponseRunner\u003cString\u003e(op, null,\n            new UserParam(ugi)) {\n          @Override\n          String decodeResponse(Map\u003c?, ?\u003e json) throws IOException {\n            return JsonUtilClient.getPath(json);\n          }\n        }   .run();\n\n        cachedHomeDirectory \u003d new Path(pathFromDelegatedFS).makeQualified(\n            this.getUri(), null);\n\n      } catch (IOException e) {\n        LOG.error(\"Unable to get HomeDirectory from original File System\", e);\n        cachedHomeDirectory \u003d new Path(\"/user/\" + ugi.getShortUserName())\n            .makeQualified(this.getUri(), null);\n      }\n    }\n    return cachedHomeDirectory;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/web/WebHdfsFileSystem.java",
      "extendedDetails": {}
    },
    "bcf89ddc7d52e04725caf104f5958e33d9f51b35": {
      "type": "Yfilerename",
      "commitMessage": "HDFS-8052. Move WebHdfsFileSystem into hadoop-hdfs-client. Contributed by Haohui Mai.\n",
      "commitDate": "23/04/15 5:33 PM",
      "commitName": "bcf89ddc7d52e04725caf104f5958e33d9f51b35",
      "commitAuthor": "Haohui Mai",
      "commitDateOld": "23/04/15 4:40 PM",
      "commitNameOld": "0b3f8957a87ada1a275c9904b211fdbdcefafb02",
      "commitAuthorOld": "Xuan",
      "daysBetweenCommits": 0.04,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  public Path getHomeDirectory() {\n    return makeQualified(new Path(getHomeDirectoryString(ugi)));\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/web/WebHdfsFileSystem.java",
      "extendedDetails": {
        "oldPath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/web/WebHdfsFileSystem.java",
        "newPath": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/web/WebHdfsFileSystem.java"
      }
    },
    "09a156fcce2bc1be4081717bf7ef7d290e80d818": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-2539. Support doAs and GETHOMEDIRECTORY in webhdfs.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1200731 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "10/11/11 8:19 PM",
      "commitName": "09a156fcce2bc1be4081717bf7ef7d290e80d818",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "08/11/11 11:25 AM",
      "commitNameOld": "94c631af1fc49f5ae5881fcd5f0e80b17308d15d",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 2.37,
      "commitsBetweenForRepo": 6,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,3 +1,3 @@\n   public Path getHomeDirectory() {\n-    return makeQualified(new Path(\"/user/\" + ugi.getShortUserName()));\n+    return makeQualified(new Path(getHomeDirectoryString(ugi)));\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public Path getHomeDirectory() {\n    return makeQualified(new Path(getHomeDirectoryString(ugi)));\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/web/WebHdfsFileSystem.java",
      "extendedDetails": {}
    },
    "61d0b7530c8978c095ab6f62d9d38e168bd829c6": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-2284. Add a new FileSystem, webhdfs://, for supporting write Http access to HDFS.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1167662 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "10/09/11 6:41 PM",
      "commitName": "61d0b7530c8978c095ab6f62d9d38e168bd829c6",
      "commitAuthor": "Tsz-wo Sze",
      "diff": "@@ -0,0 +1,3 @@\n+  public Path getHomeDirectory() {\n+    return makeQualified(new Path(\"/user/\" + ugi.getShortUserName()));\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public Path getHomeDirectory() {\n    return makeQualified(new Path(\"/user/\" + ugi.getShortUserName()));\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/web/WebHdfsFileSystem.java"
    }
  }
}