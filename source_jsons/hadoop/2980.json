{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "DFSUtilClient.java",
  "functionName": "isLocalAddress",
  "functionId": "isLocalAddress___targetAddr-InetSocketAddress",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DFSUtilClient.java",
  "functionStartLine": 637,
  "functionEndLine": 654,
  "numCommitsSeen": 269,
  "timeTaken": 8327,
  "changeHistory": [
    "b061215ecfebe476bf58f70788113d1af816f553",
    "39285e6a1978ea5e53bdc1b0aef62421382124a8",
    "6ee0539ede78b640f01c5eac18ded161182a7835",
    "d5a9a3daa0224249221ffa7b8bd5751ab2feca56",
    "c992bcf9c136d3df686655a80e636bb7bb0664da",
    "f93d99990a9a02ce693cd74466c2e5f127c1f560",
    "9a4030e0e84a688c12daa21fe9a165808c3eca70",
    "78f22bc525679a286285dd5e70a68f9b5a6f6ed7",
    "0e79131981297c29f866f325d63ffd42a4435f88",
    "197634f2f7f4fcb5d33cdae8c3528172d731766f",
    "2ab10e29d9cca5018064be46a40e3c74423615a8"
  ],
  "changeHistoryShort": {
    "b061215ecfebe476bf58f70788113d1af816f553": "Ymultichange(Yexceptionschange,Ybodychange)",
    "39285e6a1978ea5e53bdc1b0aef62421382124a8": "Ybodychange",
    "6ee0539ede78b640f01c5eac18ded161182a7835": "Ybodychange",
    "d5a9a3daa0224249221ffa7b8bd5751ab2feca56": "Ybodychange",
    "c992bcf9c136d3df686655a80e636bb7bb0664da": "Ymovefromfile",
    "f93d99990a9a02ce693cd74466c2e5f127c1f560": "Ymodifierchange",
    "9a4030e0e84a688c12daa21fe9a165808c3eca70": "Ymodifierchange",
    "78f22bc525679a286285dd5e70a68f9b5a6f6ed7": "Ybodychange",
    "0e79131981297c29f866f325d63ffd42a4435f88": "Ybodychange",
    "197634f2f7f4fcb5d33cdae8c3528172d731766f": "Ybodychange",
    "2ab10e29d9cca5018064be46a40e3c74423615a8": "Yintroduced"
  },
  "changeHistoryDetails": {
    "b061215ecfebe476bf58f70788113d1af816f553": {
      "type": "Ymultichange(Yexceptionschange,Ybodychange)",
      "commitMessage": "HDFS-11701. NPE from Unresolved Host causes permanent DFSInputStream failures. Contributed by Lokesh Jain.\n",
      "commitDate": "07/02/18 11:22 AM",
      "commitName": "b061215ecfebe476bf58f70788113d1af816f553",
      "commitAuthor": "Jitendra Pandey",
      "subchanges": [
        {
          "type": "Yexceptionschange",
          "commitMessage": "HDFS-11701. NPE from Unresolved Host causes permanent DFSInputStream failures. Contributed by Lokesh Jain.\n",
          "commitDate": "07/02/18 11:22 AM",
          "commitName": "b061215ecfebe476bf58f70788113d1af816f553",
          "commitAuthor": "Jitendra Pandey",
          "commitDateOld": "04/12/17 10:40 AM",
          "commitNameOld": "404eab4dc0582e0384b93664ea6ee77ccd5eeebc",
          "commitAuthorOld": "Xiao Chen",
          "daysBetweenCommits": 65.03,
          "commitsBetweenForRepo": 401,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,14 +1,18 @@\n-  public static boolean isLocalAddress(InetSocketAddress targetAddr) {\n+  public static boolean isLocalAddress(InetSocketAddress targetAddr)\n+      throws IOException {\n+    if (targetAddr.isUnresolved()) {\n+      throw new IOException(\"Unresolved host: \" + targetAddr);\n+    }\n     InetAddress addr \u003d targetAddr.getAddress();\n     Boolean cached \u003d localAddrMap.get(addr.getHostAddress());\n     if (cached !\u003d null) {\n       LOG.trace(\"Address {} is {} local\", targetAddr, (cached ? \"\" : \"not\"));\n       return cached;\n     }\n \n     boolean local \u003d NetUtils.isLocalAddress(addr);\n \n     LOG.trace(\"Address {} is {} local\", targetAddr, (local ? \"\" : \"not\"));\n     localAddrMap.put(addr.getHostAddress(), local);\n     return local;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public static boolean isLocalAddress(InetSocketAddress targetAddr)\n      throws IOException {\n    if (targetAddr.isUnresolved()) {\n      throw new IOException(\"Unresolved host: \" + targetAddr);\n    }\n    InetAddress addr \u003d targetAddr.getAddress();\n    Boolean cached \u003d localAddrMap.get(addr.getHostAddress());\n    if (cached !\u003d null) {\n      LOG.trace(\"Address {} is {} local\", targetAddr, (cached ? \"\" : \"not\"));\n      return cached;\n    }\n\n    boolean local \u003d NetUtils.isLocalAddress(addr);\n\n    LOG.trace(\"Address {} is {} local\", targetAddr, (local ? \"\" : \"not\"));\n    localAddrMap.put(addr.getHostAddress(), local);\n    return local;\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DFSUtilClient.java",
          "extendedDetails": {
            "oldValue": "[]",
            "newValue": "[IOException]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-11701. NPE from Unresolved Host causes permanent DFSInputStream failures. Contributed by Lokesh Jain.\n",
          "commitDate": "07/02/18 11:22 AM",
          "commitName": "b061215ecfebe476bf58f70788113d1af816f553",
          "commitAuthor": "Jitendra Pandey",
          "commitDateOld": "04/12/17 10:40 AM",
          "commitNameOld": "404eab4dc0582e0384b93664ea6ee77ccd5eeebc",
          "commitAuthorOld": "Xiao Chen",
          "daysBetweenCommits": 65.03,
          "commitsBetweenForRepo": 401,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,14 +1,18 @@\n-  public static boolean isLocalAddress(InetSocketAddress targetAddr) {\n+  public static boolean isLocalAddress(InetSocketAddress targetAddr)\n+      throws IOException {\n+    if (targetAddr.isUnresolved()) {\n+      throw new IOException(\"Unresolved host: \" + targetAddr);\n+    }\n     InetAddress addr \u003d targetAddr.getAddress();\n     Boolean cached \u003d localAddrMap.get(addr.getHostAddress());\n     if (cached !\u003d null) {\n       LOG.trace(\"Address {} is {} local\", targetAddr, (cached ? \"\" : \"not\"));\n       return cached;\n     }\n \n     boolean local \u003d NetUtils.isLocalAddress(addr);\n \n     LOG.trace(\"Address {} is {} local\", targetAddr, (local ? \"\" : \"not\"));\n     localAddrMap.put(addr.getHostAddress(), local);\n     return local;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public static boolean isLocalAddress(InetSocketAddress targetAddr)\n      throws IOException {\n    if (targetAddr.isUnresolved()) {\n      throw new IOException(\"Unresolved host: \" + targetAddr);\n    }\n    InetAddress addr \u003d targetAddr.getAddress();\n    Boolean cached \u003d localAddrMap.get(addr.getHostAddress());\n    if (cached !\u003d null) {\n      LOG.trace(\"Address {} is {} local\", targetAddr, (cached ? \"\" : \"not\"));\n      return cached;\n    }\n\n    boolean local \u003d NetUtils.isLocalAddress(addr);\n\n    LOG.trace(\"Address {} is {} local\", targetAddr, (local ? \"\" : \"not\"));\n    localAddrMap.put(addr.getHostAddress(), local);\n    return local;\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DFSUtilClient.java",
          "extendedDetails": {}
        }
      ]
    },
    "39285e6a1978ea5e53bdc1b0aef62421382124a8": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-8971. Remove guards when calling LOG.debug() and LOG.trace() in client package. Contributed by Mingliang Liu.\n",
      "commitDate": "29/09/15 5:52 PM",
      "commitName": "39285e6a1978ea5e53bdc1b0aef62421382124a8",
      "commitAuthor": "Haohui Mai",
      "commitDateOld": "29/09/15 5:51 PM",
      "commitNameOld": "6ee0539ede78b640f01c5eac18ded161182a7835",
      "commitAuthorOld": "Haohui Mai",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,20 +1,14 @@\n   public static boolean isLocalAddress(InetSocketAddress targetAddr) {\n     InetAddress addr \u003d targetAddr.getAddress();\n     Boolean cached \u003d localAddrMap.get(addr.getHostAddress());\n     if (cached !\u003d null) {\n-      if (LOG.isTraceEnabled()) {\n-        LOG.trace(\"Address \" + targetAddr +\n-            (cached ? \" is local\" : \" is not local\"));\n-      }\n+      LOG.trace(\"Address {} is {} local\", targetAddr, (cached ? \"\" : \"not\"));\n       return cached;\n     }\n \n     boolean local \u003d NetUtils.isLocalAddress(addr);\n \n-    if (LOG.isTraceEnabled()) {\n-      LOG.trace(\"Address \" + targetAddr +\n-          (local ? \" is local\" : \" is not local\"));\n-    }\n+    LOG.trace(\"Address {} is {} local\", targetAddr, (local ? \"\" : \"not\"));\n     localAddrMap.put(addr.getHostAddress(), local);\n     return local;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static boolean isLocalAddress(InetSocketAddress targetAddr) {\n    InetAddress addr \u003d targetAddr.getAddress();\n    Boolean cached \u003d localAddrMap.get(addr.getHostAddress());\n    if (cached !\u003d null) {\n      LOG.trace(\"Address {} is {} local\", targetAddr, (cached ? \"\" : \"not\"));\n      return cached;\n    }\n\n    boolean local \u003d NetUtils.isLocalAddress(addr);\n\n    LOG.trace(\"Address {} is {} local\", targetAddr, (local ? \"\" : \"not\"));\n    localAddrMap.put(addr.getHostAddress(), local);\n    return local;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DFSUtilClient.java",
      "extendedDetails": {}
    },
    "6ee0539ede78b640f01c5eac18ded161182a7835": {
      "type": "Ybodychange",
      "commitMessage": "Revert \"HDFS-9170. Move libhdfs / fuse-dfs / libwebhdfs to hdfs-client. Contributed by Haohui Mai.\"\n\nThis reverts commit d5a9a3daa0224249221ffa7b8bd5751ab2feca56.\n",
      "commitDate": "29/09/15 5:51 PM",
      "commitName": "6ee0539ede78b640f01c5eac18ded161182a7835",
      "commitAuthor": "Haohui Mai",
      "commitDateOld": "29/09/15 5:48 PM",
      "commitNameOld": "d5a9a3daa0224249221ffa7b8bd5751ab2feca56",
      "commitAuthorOld": "Haohui Mai",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,14 +1,20 @@\n   public static boolean isLocalAddress(InetSocketAddress targetAddr) {\n     InetAddress addr \u003d targetAddr.getAddress();\n     Boolean cached \u003d localAddrMap.get(addr.getHostAddress());\n     if (cached !\u003d null) {\n-      LOG.trace(\"Address {} is {} local\", targetAddr, (cached ? \"\" : \"not\"));\n+      if (LOG.isTraceEnabled()) {\n+        LOG.trace(\"Address \" + targetAddr +\n+            (cached ? \" is local\" : \" is not local\"));\n+      }\n       return cached;\n     }\n \n     boolean local \u003d NetUtils.isLocalAddress(addr);\n \n-    LOG.trace(\"Address {} is {} local\", targetAddr, (local ? \"\" : \"not\"));\n+    if (LOG.isTraceEnabled()) {\n+      LOG.trace(\"Address \" + targetAddr +\n+          (local ? \" is local\" : \" is not local\"));\n+    }\n     localAddrMap.put(addr.getHostAddress(), local);\n     return local;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static boolean isLocalAddress(InetSocketAddress targetAddr) {\n    InetAddress addr \u003d targetAddr.getAddress();\n    Boolean cached \u003d localAddrMap.get(addr.getHostAddress());\n    if (cached !\u003d null) {\n      if (LOG.isTraceEnabled()) {\n        LOG.trace(\"Address \" + targetAddr +\n            (cached ? \" is local\" : \" is not local\"));\n      }\n      return cached;\n    }\n\n    boolean local \u003d NetUtils.isLocalAddress(addr);\n\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(\"Address \" + targetAddr +\n          (local ? \" is local\" : \" is not local\"));\n    }\n    localAddrMap.put(addr.getHostAddress(), local);\n    return local;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DFSUtilClient.java",
      "extendedDetails": {}
    },
    "d5a9a3daa0224249221ffa7b8bd5751ab2feca56": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-9170. Move libhdfs / fuse-dfs / libwebhdfs to hdfs-client. Contributed by Haohui Mai.\n",
      "commitDate": "29/09/15 5:48 PM",
      "commitName": "d5a9a3daa0224249221ffa7b8bd5751ab2feca56",
      "commitAuthor": "Haohui Mai",
      "commitDateOld": "26/09/15 11:08 AM",
      "commitNameOld": "bf37d3d80e5179dea27e5bd5aea804a38aa9934c",
      "commitAuthorOld": "Haohui Mai",
      "daysBetweenCommits": 3.28,
      "commitsBetweenForRepo": 24,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,20 +1,14 @@\n   public static boolean isLocalAddress(InetSocketAddress targetAddr) {\n     InetAddress addr \u003d targetAddr.getAddress();\n     Boolean cached \u003d localAddrMap.get(addr.getHostAddress());\n     if (cached !\u003d null) {\n-      if (LOG.isTraceEnabled()) {\n-        LOG.trace(\"Address \" + targetAddr +\n-            (cached ? \" is local\" : \" is not local\"));\n-      }\n+      LOG.trace(\"Address {} is {} local\", targetAddr, (cached ? \"\" : \"not\"));\n       return cached;\n     }\n \n     boolean local \u003d NetUtils.isLocalAddress(addr);\n \n-    if (LOG.isTraceEnabled()) {\n-      LOG.trace(\"Address \" + targetAddr +\n-          (local ? \" is local\" : \" is not local\"));\n-    }\n+    LOG.trace(\"Address {} is {} local\", targetAddr, (local ? \"\" : \"not\"));\n     localAddrMap.put(addr.getHostAddress(), local);\n     return local;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static boolean isLocalAddress(InetSocketAddress targetAddr) {\n    InetAddress addr \u003d targetAddr.getAddress();\n    Boolean cached \u003d localAddrMap.get(addr.getHostAddress());\n    if (cached !\u003d null) {\n      LOG.trace(\"Address {} is {} local\", targetAddr, (cached ? \"\" : \"not\"));\n      return cached;\n    }\n\n    boolean local \u003d NetUtils.isLocalAddress(addr);\n\n    LOG.trace(\"Address {} is {} local\", targetAddr, (local ? \"\" : \"not\"));\n    localAddrMap.put(addr.getHostAddress(), local);\n    return local;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DFSUtilClient.java",
      "extendedDetails": {}
    },
    "c992bcf9c136d3df686655a80e636bb7bb0664da": {
      "type": "Ymovefromfile",
      "commitMessage": "HDFS-8951. Move the shortcircuit package to hdfs-client. Contributed by Mingliang Liu.\n",
      "commitDate": "26/08/15 2:02 PM",
      "commitName": "c992bcf9c136d3df686655a80e636bb7bb0664da",
      "commitAuthor": "Haohui Mai",
      "commitDateOld": "25/08/15 2:29 PM",
      "commitNameOld": "a4d9acc51d1a977bc333da17780c00c72e8546f1",
      "commitAuthorOld": "Colin Patrick Mccabe",
      "daysBetweenCommits": 0.98,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,20 +1,20 @@\n   public static boolean isLocalAddress(InetSocketAddress targetAddr) {\n     InetAddress addr \u003d targetAddr.getAddress();\n     Boolean cached \u003d localAddrMap.get(addr.getHostAddress());\n     if (cached !\u003d null) {\n       if (LOG.isTraceEnabled()) {\n         LOG.trace(\"Address \" + targetAddr +\n-                  (cached ? \" is local\" : \" is not local\"));\n+            (cached ? \" is local\" : \" is not local\"));\n       }\n       return cached;\n     }\n-    \n+\n     boolean local \u003d NetUtils.isLocalAddress(addr);\n \n     if (LOG.isTraceEnabled()) {\n       LOG.trace(\"Address \" + targetAddr +\n-                (local ? \" is local\" : \" is not local\"));\n+          (local ? \" is local\" : \" is not local\"));\n     }\n     localAddrMap.put(addr.getHostAddress(), local);\n     return local;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static boolean isLocalAddress(InetSocketAddress targetAddr) {\n    InetAddress addr \u003d targetAddr.getAddress();\n    Boolean cached \u003d localAddrMap.get(addr.getHostAddress());\n    if (cached !\u003d null) {\n      if (LOG.isTraceEnabled()) {\n        LOG.trace(\"Address \" + targetAddr +\n            (cached ? \" is local\" : \" is not local\"));\n      }\n      return cached;\n    }\n\n    boolean local \u003d NetUtils.isLocalAddress(addr);\n\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(\"Address \" + targetAddr +\n          (local ? \" is local\" : \" is not local\"));\n    }\n    localAddrMap.put(addr.getHostAddress(), local);\n    return local;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DFSUtilClient.java",
      "extendedDetails": {
        "oldPath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSClient.java",
        "newPath": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DFSUtilClient.java",
        "oldMethodName": "isLocalAddress",
        "newMethodName": "isLocalAddress"
      }
    },
    "f93d99990a9a02ce693cd74466c2e5f127c1f560": {
      "type": "Ymodifierchange",
      "commitMessage": "HDFS-6167. Relocate the non-public API classes in the hdfs.client package.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1583878 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "01/04/14 10:09 PM",
      "commitName": "f93d99990a9a02ce693cd74466c2e5f127c1f560",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "25/03/14 9:11 PM",
      "commitNameOld": "1fbb04e367d7c330e6052207f9f11911f4f5f368",
      "commitAuthorOld": "Arpit Agarwal",
      "daysBetweenCommits": 7.04,
      "commitsBetweenForRepo": 44,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,20 +1,20 @@\n-  static boolean isLocalAddress(InetSocketAddress targetAddr) {\n+  public static boolean isLocalAddress(InetSocketAddress targetAddr) {\n     InetAddress addr \u003d targetAddr.getAddress();\n     Boolean cached \u003d localAddrMap.get(addr.getHostAddress());\n     if (cached !\u003d null) {\n       if (LOG.isTraceEnabled()) {\n         LOG.trace(\"Address \" + targetAddr +\n                   (cached ? \" is local\" : \" is not local\"));\n       }\n       return cached;\n     }\n     \n     boolean local \u003d NetUtils.isLocalAddress(addr);\n \n     if (LOG.isTraceEnabled()) {\n       LOG.trace(\"Address \" + targetAddr +\n                 (local ? \" is local\" : \" is not local\"));\n     }\n     localAddrMap.put(addr.getHostAddress(), local);\n     return local;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static boolean isLocalAddress(InetSocketAddress targetAddr) {\n    InetAddress addr \u003d targetAddr.getAddress();\n    Boolean cached \u003d localAddrMap.get(addr.getHostAddress());\n    if (cached !\u003d null) {\n      if (LOG.isTraceEnabled()) {\n        LOG.trace(\"Address \" + targetAddr +\n                  (cached ? \" is local\" : \" is not local\"));\n      }\n      return cached;\n    }\n    \n    boolean local \u003d NetUtils.isLocalAddress(addr);\n\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(\"Address \" + targetAddr +\n                (local ? \" is local\" : \" is not local\"));\n    }\n    localAddrMap.put(addr.getHostAddress(), local);\n    return local;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSClient.java",
      "extendedDetails": {
        "oldValue": "[static]",
        "newValue": "[public, static]"
      }
    },
    "9a4030e0e84a688c12daa21fe9a165808c3eca70": {
      "type": "Ymodifierchange",
      "commitMessage": "HDFS-4356. BlockReaderLocal should use passed file descriptors rather than paths. Contributed by Colin Patrick McCabe.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-347@1432335 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "11/01/13 3:52 PM",
      "commitName": "9a4030e0e84a688c12daa21fe9a165808c3eca70",
      "commitAuthor": "Todd Lipcon",
      "commitDateOld": "09/01/13 1:34 PM",
      "commitNameOld": "c9db06f2e4d1c1f71f021d5070323f9fc194cdd7",
      "commitAuthorOld": "Todd Lipcon",
      "daysBetweenCommits": 2.1,
      "commitsBetweenForRepo": 2,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,20 +1,20 @@\n-  private static boolean isLocalAddress(InetSocketAddress targetAddr) {\n+  static boolean isLocalAddress(InetSocketAddress targetAddr) {\n     InetAddress addr \u003d targetAddr.getAddress();\n     Boolean cached \u003d localAddrMap.get(addr.getHostAddress());\n     if (cached !\u003d null) {\n       if (LOG.isTraceEnabled()) {\n         LOG.trace(\"Address \" + targetAddr +\n                   (cached ? \" is local\" : \" is not local\"));\n       }\n       return cached;\n     }\n     \n     boolean local \u003d NetUtils.isLocalAddress(addr);\n \n     if (LOG.isTraceEnabled()) {\n       LOG.trace(\"Address \" + targetAddr +\n                 (local ? \" is local\" : \" is not local\"));\n     }\n     localAddrMap.put(addr.getHostAddress(), local);\n     return local;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  static boolean isLocalAddress(InetSocketAddress targetAddr) {\n    InetAddress addr \u003d targetAddr.getAddress();\n    Boolean cached \u003d localAddrMap.get(addr.getHostAddress());\n    if (cached !\u003d null) {\n      if (LOG.isTraceEnabled()) {\n        LOG.trace(\"Address \" + targetAddr +\n                  (cached ? \" is local\" : \" is not local\"));\n      }\n      return cached;\n    }\n    \n    boolean local \u003d NetUtils.isLocalAddress(addr);\n\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(\"Address \" + targetAddr +\n                (local ? \" is local\" : \" is not local\"));\n    }\n    localAddrMap.put(addr.getHostAddress(), local);\n    return local;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSClient.java",
      "extendedDetails": {
        "oldValue": "[private, static]",
        "newValue": "[static]"
      }
    },
    "78f22bc525679a286285dd5e70a68f9b5a6f6ed7": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-3008. Negative caching of local addrs doesn\u0027t work. Contributed by Eli Collins\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1293419 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/02/12 1:14 PM",
      "commitName": "78f22bc525679a286285dd5e70a68f9b5a6f6ed7",
      "commitAuthor": "Eli Collins",
      "commitDateOld": "24/02/12 11:29 AM",
      "commitNameOld": "0e79131981297c29f866f325d63ffd42a4435f88",
      "commitAuthorOld": "Suresh Srinivas",
      "daysBetweenCommits": 0.07,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,20 @@\n   private static boolean isLocalAddress(InetSocketAddress targetAddr) {\n     InetAddress addr \u003d targetAddr.getAddress();\n     Boolean cached \u003d localAddrMap.get(addr.getHostAddress());\n-    if (cached !\u003d null \u0026\u0026 cached) {\n+    if (cached !\u003d null) {\n       if (LOG.isTraceEnabled()) {\n-        LOG.trace(\"Address \" + targetAddr + \" is local\");\n+        LOG.trace(\"Address \" + targetAddr +\n+                  (cached ? \" is local\" : \" is not local\"));\n       }\n-      return true;\n+      return cached;\n     }\n     \n     boolean local \u003d NetUtils.isLocalAddress(addr);\n \n     if (LOG.isTraceEnabled()) {\n-      LOG.trace(\"Address \" + targetAddr + \" is local\");\n+      LOG.trace(\"Address \" + targetAddr +\n+                (local ? \" is local\" : \" is not local\"));\n     }\n     localAddrMap.put(addr.getHostAddress(), local);\n     return local;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private static boolean isLocalAddress(InetSocketAddress targetAddr) {\n    InetAddress addr \u003d targetAddr.getAddress();\n    Boolean cached \u003d localAddrMap.get(addr.getHostAddress());\n    if (cached !\u003d null) {\n      if (LOG.isTraceEnabled()) {\n        LOG.trace(\"Address \" + targetAddr +\n                  (cached ? \" is local\" : \" is not local\"));\n      }\n      return cached;\n    }\n    \n    boolean local \u003d NetUtils.isLocalAddress(addr);\n\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(\"Address \" + targetAddr +\n                (local ? \" is local\" : \" is not local\"));\n    }\n    localAddrMap.put(addr.getHostAddress(), local);\n    return local;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSClient.java",
      "extendedDetails": {}
    },
    "0e79131981297c29f866f325d63ffd42a4435f88": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-3009. Remove duplicate code in DFSClient#isLocalAddress by using NetUtils. Contributed by Hari Mankude.  \n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1293390 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/02/12 11:29 AM",
      "commitName": "0e79131981297c29f866f325d63ffd42a4435f88",
      "commitAuthor": "Suresh Srinivas",
      "commitDateOld": "02/02/12 11:04 AM",
      "commitNameOld": "9eb8f4d267ca38c16e3ba191a3b754de7d167669",
      "commitAuthorOld": "Jitendra Nath Pandey",
      "daysBetweenCommits": 22.02,
      "commitsBetweenForRepo": 146,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,27 +1,18 @@\n   private static boolean isLocalAddress(InetSocketAddress targetAddr) {\n     InetAddress addr \u003d targetAddr.getAddress();\n     Boolean cached \u003d localAddrMap.get(addr.getHostAddress());\n     if (cached !\u003d null \u0026\u0026 cached) {\n       if (LOG.isTraceEnabled()) {\n         LOG.trace(\"Address \" + targetAddr + \" is local\");\n       }\n       return true;\n     }\n+    \n+    boolean local \u003d NetUtils.isLocalAddress(addr);\n \n-    // Check if the address is any local or loop back\n-    boolean local \u003d addr.isAnyLocalAddress() || addr.isLoopbackAddress();\n-\n-    // Check if the address is defined on any interface\n-    if (!local) {\n-      try {\n-        local \u003d NetworkInterface.getByInetAddress(addr) !\u003d null;\n-      } catch (SocketException e) {\n-        local \u003d false;\n-      }\n-    }\n     if (LOG.isTraceEnabled()) {\n       LOG.trace(\"Address \" + targetAddr + \" is local\");\n     }\n     localAddrMap.put(addr.getHostAddress(), local);\n     return local;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private static boolean isLocalAddress(InetSocketAddress targetAddr) {\n    InetAddress addr \u003d targetAddr.getAddress();\n    Boolean cached \u003d localAddrMap.get(addr.getHostAddress());\n    if (cached !\u003d null \u0026\u0026 cached) {\n      if (LOG.isTraceEnabled()) {\n        LOG.trace(\"Address \" + targetAddr + \" is local\");\n      }\n      return true;\n    }\n    \n    boolean local \u003d NetUtils.isLocalAddress(addr);\n\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(\"Address \" + targetAddr + \" is local\");\n    }\n    localAddrMap.put(addr.getHostAddress(), local);\n    return local;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSClient.java",
      "extendedDetails": {}
    },
    "197634f2f7f4fcb5d33cdae8c3528172d731766f": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-2653. DFSClient should cache whether addrs are non-local when short-circuiting is enabled. Contributed by Eli Collins\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1213586 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "12/12/11 11:51 PM",
      "commitName": "197634f2f7f4fcb5d33cdae8c3528172d731766f",
      "commitAuthor": "Eli Collins",
      "commitDateOld": "11/12/11 9:36 PM",
      "commitNameOld": "48da033901d3471ef176a94104158546152353e9",
      "commitAuthorOld": "Sanjay Radia",
      "daysBetweenCommits": 1.09,
      "commitsBetweenForRepo": 12,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,28 +1,27 @@\n   private static boolean isLocalAddress(InetSocketAddress targetAddr) {\n     InetAddress addr \u003d targetAddr.getAddress();\n-    if (localIpAddresses.contains(addr.getHostAddress())) {\n+    Boolean cached \u003d localAddrMap.get(addr.getHostAddress());\n+    if (cached !\u003d null \u0026\u0026 cached) {\n       if (LOG.isTraceEnabled()) {\n         LOG.trace(\"Address \" + targetAddr + \" is local\");\n       }\n       return true;\n     }\n \n     // Check if the address is any local or loop back\n     boolean local \u003d addr.isAnyLocalAddress() || addr.isLoopbackAddress();\n \n     // Check if the address is defined on any interface\n     if (!local) {\n       try {\n         local \u003d NetworkInterface.getByInetAddress(addr) !\u003d null;\n       } catch (SocketException e) {\n         local \u003d false;\n       }\n     }\n     if (LOG.isTraceEnabled()) {\n       LOG.trace(\"Address \" + targetAddr + \" is local\");\n     }\n-    if (local \u003d\u003d true) {\n-      localIpAddresses.add(addr.getHostAddress());\n-    }\n+    localAddrMap.put(addr.getHostAddress(), local);\n     return local;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private static boolean isLocalAddress(InetSocketAddress targetAddr) {\n    InetAddress addr \u003d targetAddr.getAddress();\n    Boolean cached \u003d localAddrMap.get(addr.getHostAddress());\n    if (cached !\u003d null \u0026\u0026 cached) {\n      if (LOG.isTraceEnabled()) {\n        LOG.trace(\"Address \" + targetAddr + \" is local\");\n      }\n      return true;\n    }\n\n    // Check if the address is any local or loop back\n    boolean local \u003d addr.isAnyLocalAddress() || addr.isLoopbackAddress();\n\n    // Check if the address is defined on any interface\n    if (!local) {\n      try {\n        local \u003d NetworkInterface.getByInetAddress(addr) !\u003d null;\n      } catch (SocketException e) {\n        local \u003d false;\n      }\n    }\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(\"Address \" + targetAddr + \" is local\");\n    }\n    localAddrMap.put(addr.getHostAddress(), local);\n    return local;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSClient.java",
      "extendedDetails": {}
    },
    "2ab10e29d9cca5018064be46a40e3c74423615a8": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-2246. Enable reading a block directly from local file system for a client on the same node as the block file.  Contributed by Andrew Purtell, Suresh Srinivas and Jitendra Nath Pandey\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1204792 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "21/11/11 6:57 PM",
      "commitName": "2ab10e29d9cca5018064be46a40e3c74423615a8",
      "commitAuthor": "Tsz-wo Sze",
      "diff": "@@ -0,0 +1,28 @@\n+  private static boolean isLocalAddress(InetSocketAddress targetAddr) {\n+    InetAddress addr \u003d targetAddr.getAddress();\n+    if (localIpAddresses.contains(addr.getHostAddress())) {\n+      if (LOG.isTraceEnabled()) {\n+        LOG.trace(\"Address \" + targetAddr + \" is local\");\n+      }\n+      return true;\n+    }\n+\n+    // Check if the address is any local or loop back\n+    boolean local \u003d addr.isAnyLocalAddress() || addr.isLoopbackAddress();\n+\n+    // Check if the address is defined on any interface\n+    if (!local) {\n+      try {\n+        local \u003d NetworkInterface.getByInetAddress(addr) !\u003d null;\n+      } catch (SocketException e) {\n+        local \u003d false;\n+      }\n+    }\n+    if (LOG.isTraceEnabled()) {\n+      LOG.trace(\"Address \" + targetAddr + \" is local\");\n+    }\n+    if (local \u003d\u003d true) {\n+      localIpAddresses.add(addr.getHostAddress());\n+    }\n+    return local;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private static boolean isLocalAddress(InetSocketAddress targetAddr) {\n    InetAddress addr \u003d targetAddr.getAddress();\n    if (localIpAddresses.contains(addr.getHostAddress())) {\n      if (LOG.isTraceEnabled()) {\n        LOG.trace(\"Address \" + targetAddr + \" is local\");\n      }\n      return true;\n    }\n\n    // Check if the address is any local or loop back\n    boolean local \u003d addr.isAnyLocalAddress() || addr.isLoopbackAddress();\n\n    // Check if the address is defined on any interface\n    if (!local) {\n      try {\n        local \u003d NetworkInterface.getByInetAddress(addr) !\u003d null;\n      } catch (SocketException e) {\n        local \u003d false;\n      }\n    }\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(\"Address \" + targetAddr + \" is local\");\n    }\n    if (local \u003d\u003d true) {\n      localIpAddresses.add(addr.getHostAddress());\n    }\n    return local;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSClient.java"
    }
  }
}