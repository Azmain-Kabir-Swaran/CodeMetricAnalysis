{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "DFSAdmin.java",
  "functionName": "printMessage",
  "functionId": "printMessage___info-RollingUpgradeInfo__out-PrintStream",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/tools/DFSAdmin.java",
  "functionStartLine": 382,
  "functionEndLine": 402,
  "numCommitsSeen": 114,
  "timeTaken": 3345,
  "changeHistory": [
    "3560180b6e9926aa3ee1357da59b28a4b4689a0d",
    "3dfd6e68fe5028fe3766ae5056dc175c38cc97e1"
  ],
  "changeHistoryShort": {
    "3560180b6e9926aa3ee1357da59b28a4b4689a0d": "Ybodychange",
    "3dfd6e68fe5028fe3766ae5056dc175c38cc97e1": "Ybodychange"
  },
  "changeHistoryDetails": {
    "3560180b6e9926aa3ee1357da59b28a4b4689a0d": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-7869. Inconsistency in the return information while performing rolling upgrade ( Contributed by J.Andreina )\n",
      "commitDate": "04/03/15 1:08 AM",
      "commitName": "3560180b6e9926aa3ee1357da59b28a4b4689a0d",
      "commitAuthor": "Vinayakumar B",
      "commitDateOld": "24/02/15 6:59 AM",
      "commitNameOld": "b53fd7163bc3a4eef4632afb55e5513c7c592fcf",
      "commitAuthorOld": "Tsuyoshi Ozawa",
      "daysBetweenCommits": 7.76,
      "commitsBetweenForRepo": 70,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,21 +1,21 @@\n     private static void printMessage(RollingUpgradeInfo info,\n         PrintStream out) {\n       if (info !\u003d null \u0026\u0026 info.isStarted()) {\n-        if (!info.createdRollbackImages()) {\n+        if (!info.createdRollbackImages() \u0026\u0026 !info.isFinalized()) {\n           out.println(\n               \"Preparing for upgrade. Data is being saved for rollback.\"\n               + \"\\nRun \\\"dfsadmin -rollingUpgrade query\\\" to check the status\"\n               + \"\\nfor proceeding with rolling upgrade\");\n             out.println(info);\n         } else if (!info.isFinalized()) {\n           out.println(\"Proceed with rolling upgrade:\");\n           out.println(info);\n         } else {\n           out.println(\"Rolling upgrade is finalized.\");\n           out.println(info);\n         }\n       } else {\n         out.println(\"There is no rolling upgrade in progress or rolling \" +\n             \"upgrade has already been finalized.\");\n       }\n     }\n\\ No newline at end of file\n",
      "actualSource": "    private static void printMessage(RollingUpgradeInfo info,\n        PrintStream out) {\n      if (info !\u003d null \u0026\u0026 info.isStarted()) {\n        if (!info.createdRollbackImages() \u0026\u0026 !info.isFinalized()) {\n          out.println(\n              \"Preparing for upgrade. Data is being saved for rollback.\"\n              + \"\\nRun \\\"dfsadmin -rollingUpgrade query\\\" to check the status\"\n              + \"\\nfor proceeding with rolling upgrade\");\n            out.println(info);\n        } else if (!info.isFinalized()) {\n          out.println(\"Proceed with rolling upgrade:\");\n          out.println(info);\n        } else {\n          out.println(\"Rolling upgrade is finalized.\");\n          out.println(info);\n        }\n      } else {\n        out.println(\"There is no rolling upgrade in progress or rolling \" +\n            \"upgrade has already been finalized.\");\n      }\n    }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/tools/DFSAdmin.java",
      "extendedDetails": {}
    },
    "3dfd6e68fe5028fe3766ae5056dc175c38cc97e1": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-7340. Make rollingUpgrade start/finalize idempotent. Contributed by Jing Zhao.\n",
      "commitDate": "04/11/14 10:16 AM",
      "commitName": "3dfd6e68fe5028fe3766ae5056dc175c38cc97e1",
      "commitAuthor": "Jing Zhao",
      "commitDateOld": "27/10/14 9:53 AM",
      "commitNameOld": "baf794dc404ac54f4e8332654eadfac1bebacb8f",
      "commitAuthorOld": "Colin Patrick Mccabe",
      "daysBetweenCommits": 8.06,
      "commitsBetweenForRepo": 87,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,20 +1,21 @@\n     private static void printMessage(RollingUpgradeInfo info,\n         PrintStream out) {\n       if (info !\u003d null \u0026\u0026 info.isStarted()) {\n         if (!info.createdRollbackImages()) {\n           out.println(\n               \"Preparing for upgrade. Data is being saved for rollback.\"\n               + \"\\nRun \\\"dfsadmin -rollingUpgrade query\\\" to check the status\"\n               + \"\\nfor proceeding with rolling upgrade\");\n             out.println(info);\n         } else if (!info.isFinalized()) {\n           out.println(\"Proceed with rolling upgrade:\");\n           out.println(info);\n         } else {\n           out.println(\"Rolling upgrade is finalized.\");\n           out.println(info);\n         }\n       } else {\n-        out.println(\"There is no rolling upgrade in progress.\");\n+        out.println(\"There is no rolling upgrade in progress or rolling \" +\n+            \"upgrade has already been finalized.\");\n       }\n     }\n\\ No newline at end of file\n",
      "actualSource": "    private static void printMessage(RollingUpgradeInfo info,\n        PrintStream out) {\n      if (info !\u003d null \u0026\u0026 info.isStarted()) {\n        if (!info.createdRollbackImages()) {\n          out.println(\n              \"Preparing for upgrade. Data is being saved for rollback.\"\n              + \"\\nRun \\\"dfsadmin -rollingUpgrade query\\\" to check the status\"\n              + \"\\nfor proceeding with rolling upgrade\");\n            out.println(info);\n        } else if (!info.isFinalized()) {\n          out.println(\"Proceed with rolling upgrade:\");\n          out.println(info);\n        } else {\n          out.println(\"Rolling upgrade is finalized.\");\n          out.println(info);\n        }\n      } else {\n        out.println(\"There is no rolling upgrade in progress or rolling \" +\n            \"upgrade has already been finalized.\");\n      }\n    }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/tools/DFSAdmin.java",
      "extendedDetails": {}
    }
  }
}