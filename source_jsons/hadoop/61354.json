{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "PlacementConstraintToProtoConverter.java",
  "functionName": "visit",
  "functionId": "visit___constraint-SingleConstraint",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/api/pb/PlacementConstraintToProtoConverter.java",
  "functionStartLine": 68,
  "functionEndLine": 94,
  "numCommitsSeen": 4,
  "timeTaken": 1426,
  "changeHistory": [
    "1654497f98fb7f2de8214d2fbad305b7a2854816",
    "67ae81f0e0ac7f107261ee15f2eb4d189e3b1983",
    "33a796d9b778bf7350e87a4e36ca30c925cf7036"
  ],
  "changeHistoryShort": {
    "1654497f98fb7f2de8214d2fbad305b7a2854816": "Yreturntypechange",
    "67ae81f0e0ac7f107261ee15f2eb4d189e3b1983": "Ybodychange",
    "33a796d9b778bf7350e87a4e36ca30c925cf7036": "Yintroduced"
  },
  "changeHistoryDetails": {
    "1654497f98fb7f2de8214d2fbad305b7a2854816": {
      "type": "Yreturntypechange",
      "commitMessage": "HADOOP-16557. [pb-upgrade] Upgrade protobuf.version to 3.7.1 (#1432)\n\nHADOOP-16557. [pb-upgrade] Upgrade protobuf.version to 3.7.1. Contributed by Vinayakumar B.",
      "commitDate": "20/09/19 3:38 AM",
      "commitName": "1654497f98fb7f2de8214d2fbad305b7a2854816",
      "commitAuthor": "Vinayakumar B",
      "commitDateOld": "12/09/18 3:31 AM",
      "commitNameOld": "67ae81f0e0ac7f107261ee15f2eb4d189e3b1983",
      "commitAuthorOld": "Naganarasimha",
      "daysBetweenCommits": 373.01,
      "commitsBetweenForRepo": 2937,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,27 +1,27 @@\n-  public GeneratedMessage visit(SingleConstraint constraint) {\n+  public GeneratedMessageV3 visit(SingleConstraint constraint) {\n     SimplePlacementConstraintProto.Builder sb \u003d\n         SimplePlacementConstraintProto.newBuilder();\n \n     if (constraint.getScope() !\u003d null) {\n       sb.setScope(constraint.getScope());\n     }\n     sb.setMinCardinality(constraint.getMinCardinality());\n     sb.setMaxCardinality(constraint.getMaxCardinality());\n     if (constraint.getNodeAttributeOpCode() !\u003d null) {\n       sb.setAttributeOpCode(\n           convertToProtoFormat(constraint.getNodeAttributeOpCode()));\n     }\n     if (constraint.getTargetExpressions() !\u003d null) {\n       for (TargetExpression target : constraint.getTargetExpressions()) {\n         sb.addTargetExpressions(\n             (PlacementConstraintTargetProto) target.accept(this));\n       }\n \n     }\n     SimplePlacementConstraintProto sProto \u003d sb.build();\n \n     // Wrap around PlacementConstraintProto object.\n     PlacementConstraintProto.Builder pb \u003d PlacementConstraintProto.newBuilder();\n     pb.setSimpleConstraint(sProto);\n     return pb.build();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public GeneratedMessageV3 visit(SingleConstraint constraint) {\n    SimplePlacementConstraintProto.Builder sb \u003d\n        SimplePlacementConstraintProto.newBuilder();\n\n    if (constraint.getScope() !\u003d null) {\n      sb.setScope(constraint.getScope());\n    }\n    sb.setMinCardinality(constraint.getMinCardinality());\n    sb.setMaxCardinality(constraint.getMaxCardinality());\n    if (constraint.getNodeAttributeOpCode() !\u003d null) {\n      sb.setAttributeOpCode(\n          convertToProtoFormat(constraint.getNodeAttributeOpCode()));\n    }\n    if (constraint.getTargetExpressions() !\u003d null) {\n      for (TargetExpression target : constraint.getTargetExpressions()) {\n        sb.addTargetExpressions(\n            (PlacementConstraintTargetProto) target.accept(this));\n      }\n\n    }\n    SimplePlacementConstraintProto sProto \u003d sb.build();\n\n    // Wrap around PlacementConstraintProto object.\n    PlacementConstraintProto.Builder pb \u003d PlacementConstraintProto.newBuilder();\n    pb.setSimpleConstraint(sProto);\n    return pb.build();\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/api/pb/PlacementConstraintToProtoConverter.java",
      "extendedDetails": {
        "oldValue": "GeneratedMessage",
        "newValue": "GeneratedMessageV3"
      }
    },
    "67ae81f0e0ac7f107261ee15f2eb4d189e3b1983": {
      "type": "Ybodychange",
      "commitMessage": "YARN-7863. Modify placement constraints to support node attributes. Contributed by Sunil Govindan.\n",
      "commitDate": "12/09/18 3:31 AM",
      "commitName": "67ae81f0e0ac7f107261ee15f2eb4d189e3b1983",
      "commitAuthor": "Naganarasimha",
      "commitDateOld": "31/01/18 1:30 AM",
      "commitNameOld": "33a796d9b778bf7350e87a4e36ca30c925cf7036",
      "commitAuthorOld": "Wangda Tan",
      "daysBetweenCommits": 224.04,
      "commitsBetweenForRepo": 2251,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,23 +1,27 @@\n   public GeneratedMessage visit(SingleConstraint constraint) {\n     SimplePlacementConstraintProto.Builder sb \u003d\n         SimplePlacementConstraintProto.newBuilder();\n \n     if (constraint.getScope() !\u003d null) {\n       sb.setScope(constraint.getScope());\n     }\n     sb.setMinCardinality(constraint.getMinCardinality());\n     sb.setMaxCardinality(constraint.getMaxCardinality());\n+    if (constraint.getNodeAttributeOpCode() !\u003d null) {\n+      sb.setAttributeOpCode(\n+          convertToProtoFormat(constraint.getNodeAttributeOpCode()));\n+    }\n     if (constraint.getTargetExpressions() !\u003d null) {\n       for (TargetExpression target : constraint.getTargetExpressions()) {\n         sb.addTargetExpressions(\n             (PlacementConstraintTargetProto) target.accept(this));\n       }\n \n     }\n     SimplePlacementConstraintProto sProto \u003d sb.build();\n \n     // Wrap around PlacementConstraintProto object.\n     PlacementConstraintProto.Builder pb \u003d PlacementConstraintProto.newBuilder();\n     pb.setSimpleConstraint(sProto);\n     return pb.build();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public GeneratedMessage visit(SingleConstraint constraint) {\n    SimplePlacementConstraintProto.Builder sb \u003d\n        SimplePlacementConstraintProto.newBuilder();\n\n    if (constraint.getScope() !\u003d null) {\n      sb.setScope(constraint.getScope());\n    }\n    sb.setMinCardinality(constraint.getMinCardinality());\n    sb.setMaxCardinality(constraint.getMaxCardinality());\n    if (constraint.getNodeAttributeOpCode() !\u003d null) {\n      sb.setAttributeOpCode(\n          convertToProtoFormat(constraint.getNodeAttributeOpCode()));\n    }\n    if (constraint.getTargetExpressions() !\u003d null) {\n      for (TargetExpression target : constraint.getTargetExpressions()) {\n        sb.addTargetExpressions(\n            (PlacementConstraintTargetProto) target.accept(this));\n      }\n\n    }\n    SimplePlacementConstraintProto sProto \u003d sb.build();\n\n    // Wrap around PlacementConstraintProto object.\n    PlacementConstraintProto.Builder pb \u003d PlacementConstraintProto.newBuilder();\n    pb.setSimpleConstraint(sProto);\n    return pb.build();\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/api/pb/PlacementConstraintToProtoConverter.java",
      "extendedDetails": {}
    },
    "33a796d9b778bf7350e87a4e36ca30c925cf7036": {
      "type": "Yintroduced",
      "commitMessage": "YARN-6593. [API] Introduce Placement Constraint object. (Konstantinos Karanasos via wangda)\n\nChange-Id: Id00edb7185fdf01cce6e40f920cac3585f8cbe9c\n",
      "commitDate": "31/01/18 1:30 AM",
      "commitName": "33a796d9b778bf7350e87a4e36ca30c925cf7036",
      "commitAuthor": "Wangda Tan",
      "diff": "@@ -0,0 +1,23 @@\n+  public GeneratedMessage visit(SingleConstraint constraint) {\n+    SimplePlacementConstraintProto.Builder sb \u003d\n+        SimplePlacementConstraintProto.newBuilder();\n+\n+    if (constraint.getScope() !\u003d null) {\n+      sb.setScope(constraint.getScope());\n+    }\n+    sb.setMinCardinality(constraint.getMinCardinality());\n+    sb.setMaxCardinality(constraint.getMaxCardinality());\n+    if (constraint.getTargetExpressions() !\u003d null) {\n+      for (TargetExpression target : constraint.getTargetExpressions()) {\n+        sb.addTargetExpressions(\n+            (PlacementConstraintTargetProto) target.accept(this));\n+      }\n+\n+    }\n+    SimplePlacementConstraintProto sProto \u003d sb.build();\n+\n+    // Wrap around PlacementConstraintProto object.\n+    PlacementConstraintProto.Builder pb \u003d PlacementConstraintProto.newBuilder();\n+    pb.setSimpleConstraint(sProto);\n+    return pb.build();\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public GeneratedMessage visit(SingleConstraint constraint) {\n    SimplePlacementConstraintProto.Builder sb \u003d\n        SimplePlacementConstraintProto.newBuilder();\n\n    if (constraint.getScope() !\u003d null) {\n      sb.setScope(constraint.getScope());\n    }\n    sb.setMinCardinality(constraint.getMinCardinality());\n    sb.setMaxCardinality(constraint.getMaxCardinality());\n    if (constraint.getTargetExpressions() !\u003d null) {\n      for (TargetExpression target : constraint.getTargetExpressions()) {\n        sb.addTargetExpressions(\n            (PlacementConstraintTargetProto) target.accept(this));\n      }\n\n    }\n    SimplePlacementConstraintProto sProto \u003d sb.build();\n\n    // Wrap around PlacementConstraintProto object.\n    PlacementConstraintProto.Builder pb \u003d PlacementConstraintProto.newBuilder();\n    pb.setSimpleConstraint(sProto);\n    return pb.build();\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/api/pb/PlacementConstraintToProtoConverter.java"
    }
  }
}