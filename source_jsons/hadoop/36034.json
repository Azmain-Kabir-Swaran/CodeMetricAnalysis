{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "AdminService.java",
  "functionName": "refreshClusterMaxPriority",
  "functionId": "refreshClusterMaxPriority___request-RefreshClusterMaxPriorityRequest",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/AdminService.java",
  "functionStartLine": 952,
  "functionEndLine": 970,
  "numCommitsSeen": 78,
  "timeTaken": 2579,
  "changeHistory": [
    "d9a354c2f39274b2810144d1ae133201e44e3bfc",
    "c63afdbe14df7359841aa4b213252a8a275e8c4b",
    "a9c8ea71aa427ff5f25caec98be15bc880e578a7"
  ],
  "changeHistoryShort": {
    "d9a354c2f39274b2810144d1ae133201e44e3bfc": "Ybodychange",
    "c63afdbe14df7359841aa4b213252a8a275e8c4b": "Ybodychange",
    "a9c8ea71aa427ff5f25caec98be15bc880e578a7": "Yintroduced"
  },
  "changeHistoryDetails": {
    "d9a354c2f39274b2810144d1ae133201e44e3bfc": {
      "type": "Ybodychange",
      "commitMessage": "YARN-5333. Some recovered apps are put into default queue when RM HA. Contributed by Jun Gong.\n",
      "commitDate": "05/08/16 9:05 AM",
      "commitName": "d9a354c2f39274b2810144d1ae133201e44e3bfc",
      "commitAuthor": "Rohith Sharma K S",
      "commitDateOld": "20/07/16 4:51 PM",
      "commitNameOld": "c63afdbe14df7359841aa4b213252a8a275e8c4b",
      "commitAuthorOld": "Akira Ajisaka",
      "daysBetweenCommits": 15.68,
      "commitsBetweenForRepo": 112,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,23 +1,19 @@\n   public RefreshClusterMaxPriorityResponse refreshClusterMaxPriority(\n       RefreshClusterMaxPriorityRequest request) throws YarnException,\n       IOException {\n     final String operation \u003d \"refreshClusterMaxPriority\";\n     final String msg \u003d \"refresh cluster max priority\";\n     UserGroupInformation user \u003d checkAcls(operation);\n \n     checkRMStatus(user.getShortUserName(), operation, msg);\n     try {\n-      Configuration conf \u003d\n-          getConfiguration(new Configuration(false),\n-              YarnConfiguration.YARN_SITE_CONFIGURATION_FILE);\n-\n-      rmContext.getScheduler().setClusterMaxPriority(conf);\n+      refreshClusterMaxPriority();\n \n       RMAuditLogger\n           .logSuccess(user.getShortUserName(), operation, \"AdminService\");\n       return recordFactory\n           .newRecordInstance(RefreshClusterMaxPriorityResponse.class);\n     } catch (YarnException e) {\n       throw logAndWrapException(e, user.getShortUserName(), operation, msg);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public RefreshClusterMaxPriorityResponse refreshClusterMaxPriority(\n      RefreshClusterMaxPriorityRequest request) throws YarnException,\n      IOException {\n    final String operation \u003d \"refreshClusterMaxPriority\";\n    final String msg \u003d \"refresh cluster max priority\";\n    UserGroupInformation user \u003d checkAcls(operation);\n\n    checkRMStatus(user.getShortUserName(), operation, msg);\n    try {\n      refreshClusterMaxPriority();\n\n      RMAuditLogger\n          .logSuccess(user.getShortUserName(), operation, \"AdminService\");\n      return recordFactory\n          .newRecordInstance(RefreshClusterMaxPriorityResponse.class);\n    } catch (YarnException e) {\n      throw logAndWrapException(e, user.getShortUserName(), operation, msg);\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/AdminService.java",
      "extendedDetails": {}
    },
    "c63afdbe14df7359841aa4b213252a8a275e8c4b": {
      "type": "Ybodychange",
      "commitMessage": "YARN-4883. Make consistent operation name in AdminService. Contributed by Kai Sasaki.\n",
      "commitDate": "20/07/16 4:51 PM",
      "commitName": "c63afdbe14df7359841aa4b213252a8a275e8c4b",
      "commitAuthor": "Akira Ajisaka",
      "commitDateOld": "09/04/16 10:31 AM",
      "commitNameOld": "ff95fd547b3030529983fa4e701ac728c54ab63a",
      "commitAuthorOld": "Karthik Kambatla",
      "daysBetweenCommits": 102.26,
      "commitsBetweenForRepo": 794,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,23 +1,23 @@\n   public RefreshClusterMaxPriorityResponse refreshClusterMaxPriority(\n       RefreshClusterMaxPriorityRequest request) throws YarnException,\n       IOException {\n-    String argName \u003d \"refreshClusterMaxPriority\";\n-    String msg \u003d \"refresh cluster max priority\";\n-    UserGroupInformation user \u003d checkAcls(argName);\n+    final String operation \u003d \"refreshClusterMaxPriority\";\n+    final String msg \u003d \"refresh cluster max priority\";\n+    UserGroupInformation user \u003d checkAcls(operation);\n \n-    checkRMStatus(user.getShortUserName(), argName, msg);\n+    checkRMStatus(user.getShortUserName(), operation, msg);\n     try {\n       Configuration conf \u003d\n           getConfiguration(new Configuration(false),\n               YarnConfiguration.YARN_SITE_CONFIGURATION_FILE);\n \n       rmContext.getScheduler().setClusterMaxPriority(conf);\n \n       RMAuditLogger\n-          .logSuccess(user.getShortUserName(), argName, \"AdminService\");\n+          .logSuccess(user.getShortUserName(), operation, \"AdminService\");\n       return recordFactory\n           .newRecordInstance(RefreshClusterMaxPriorityResponse.class);\n     } catch (YarnException e) {\n-      throw logAndWrapException(e, user.getShortUserName(), argName, msg);\n+      throw logAndWrapException(e, user.getShortUserName(), operation, msg);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public RefreshClusterMaxPriorityResponse refreshClusterMaxPriority(\n      RefreshClusterMaxPriorityRequest request) throws YarnException,\n      IOException {\n    final String operation \u003d \"refreshClusterMaxPriority\";\n    final String msg \u003d \"refresh cluster max priority\";\n    UserGroupInformation user \u003d checkAcls(operation);\n\n    checkRMStatus(user.getShortUserName(), operation, msg);\n    try {\n      Configuration conf \u003d\n          getConfiguration(new Configuration(false),\n              YarnConfiguration.YARN_SITE_CONFIGURATION_FILE);\n\n      rmContext.getScheduler().setClusterMaxPriority(conf);\n\n      RMAuditLogger\n          .logSuccess(user.getShortUserName(), operation, \"AdminService\");\n      return recordFactory\n          .newRecordInstance(RefreshClusterMaxPriorityResponse.class);\n    } catch (YarnException e) {\n      throw logAndWrapException(e, user.getShortUserName(), operation, msg);\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/AdminService.java",
      "extendedDetails": {}
    },
    "a9c8ea71aa427ff5f25caec98be15bc880e578a7": {
      "type": "Yintroduced",
      "commitMessage": "YARN-3250. Support admin cli interface in for Application Priority. Contributed by Rohith Sharma K S\n",
      "commitDate": "27/08/15 1:25 PM",
      "commitName": "a9c8ea71aa427ff5f25caec98be15bc880e578a7",
      "commitAuthor": "Jian He",
      "diff": "@@ -0,0 +1,23 @@\n+  public RefreshClusterMaxPriorityResponse refreshClusterMaxPriority(\n+      RefreshClusterMaxPriorityRequest request) throws YarnException,\n+      IOException {\n+    String argName \u003d \"refreshClusterMaxPriority\";\n+    String msg \u003d \"refresh cluster max priority\";\n+    UserGroupInformation user \u003d checkAcls(argName);\n+\n+    checkRMStatus(user.getShortUserName(), argName, msg);\n+    try {\n+      Configuration conf \u003d\n+          getConfiguration(new Configuration(false),\n+              YarnConfiguration.YARN_SITE_CONFIGURATION_FILE);\n+\n+      rmContext.getScheduler().setClusterMaxPriority(conf);\n+\n+      RMAuditLogger\n+          .logSuccess(user.getShortUserName(), argName, \"AdminService\");\n+      return recordFactory\n+          .newRecordInstance(RefreshClusterMaxPriorityResponse.class);\n+    } catch (YarnException e) {\n+      throw logAndWrapException(e, user.getShortUserName(), argName, msg);\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public RefreshClusterMaxPriorityResponse refreshClusterMaxPriority(\n      RefreshClusterMaxPriorityRequest request) throws YarnException,\n      IOException {\n    String argName \u003d \"refreshClusterMaxPriority\";\n    String msg \u003d \"refresh cluster max priority\";\n    UserGroupInformation user \u003d checkAcls(argName);\n\n    checkRMStatus(user.getShortUserName(), argName, msg);\n    try {\n      Configuration conf \u003d\n          getConfiguration(new Configuration(false),\n              YarnConfiguration.YARN_SITE_CONFIGURATION_FILE);\n\n      rmContext.getScheduler().setClusterMaxPriority(conf);\n\n      RMAuditLogger\n          .logSuccess(user.getShortUserName(), argName, \"AdminService\");\n      return recordFactory\n          .newRecordInstance(RefreshClusterMaxPriorityResponse.class);\n    } catch (YarnException e) {\n      throw logAndWrapException(e, user.getShortUserName(), argName, msg);\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/AdminService.java"
    }
  }
}