{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "KMSConfiguration.java",
  "functionName": "isACLsFileNewer",
  "functionId": "isACLsFileNewer___time-long",
  "sourceFilePath": "hadoop-common-project/hadoop-kms/src/main/java/org/apache/hadoop/crypto/key/kms/server/KMSConfiguration.java",
  "functionStartLine": 147,
  "functionEndLine": 164,
  "numCommitsSeen": 16,
  "timeTaken": 998,
  "changeHistory": [
    "b7ff624c767f76ca007d695afdc7a3815fceb04c",
    "957414d4cb57cb8172070cc53530b7da78b8c9ca",
    "17d4fbbf0af9b93de9502afb274e91533140d1c6"
  ],
  "changeHistoryShort": {
    "b7ff624c767f76ca007d695afdc7a3815fceb04c": "Ybodychange",
    "957414d4cb57cb8172070cc53530b7da78b8c9ca": "Ybodychange",
    "17d4fbbf0af9b93de9502afb274e91533140d1c6": "Yintroduced"
  },
  "changeHistoryDetails": {
    "b7ff624c767f76ca007d695afdc7a3815fceb04c": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-14949. TestKMS#testACLs fails intermittently.\n",
      "commitDate": "16/10/17 2:19 PM",
      "commitName": "b7ff624c767f76ca007d695afdc7a3815fceb04c",
      "commitAuthor": "Xiao Chen",
      "commitDateOld": "06/02/17 1:14 PM",
      "commitNameOld": "d88497d44a7c34ae4cf0295c89b3584d834057d5",
      "commitAuthorOld": "Xiao Chen",
      "daysBetweenCommits": 252.0,
      "commitsBetweenForRepo": 1650,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,18 @@\n   public static boolean isACLsFileNewer(long time) {\n     boolean newer \u003d false;\n     String confDir \u003d System.getProperty(KMS_CONFIG_DIR);\n     if (confDir !\u003d null) {\n       Path confPath \u003d new Path(confDir);\n       if (!confPath.isUriPathAbsolute()) {\n         throw new RuntimeException(\"System property \u0027\" + KMS_CONFIG_DIR +\n             \"\u0027 must be an absolute path: \" + confDir);\n       }\n       File f \u003d new File(confDir, KMS_ACLS_XML);\n+      LOG.trace(\"Checking file {}, modification time is {}, last reload time is\"\n+          + \" {}\", f.getPath(), f.lastModified(), time);\n       // at least 100ms newer than time, we do this to ensure the file\n       // has been properly closed/flushed\n       newer \u003d f.lastModified() - time \u003e 100;\n     }\n     return newer;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static boolean isACLsFileNewer(long time) {\n    boolean newer \u003d false;\n    String confDir \u003d System.getProperty(KMS_CONFIG_DIR);\n    if (confDir !\u003d null) {\n      Path confPath \u003d new Path(confDir);\n      if (!confPath.isUriPathAbsolute()) {\n        throw new RuntimeException(\"System property \u0027\" + KMS_CONFIG_DIR +\n            \"\u0027 must be an absolute path: \" + confDir);\n      }\n      File f \u003d new File(confDir, KMS_ACLS_XML);\n      LOG.trace(\"Checking file {}, modification time is {}, last reload time is\"\n          + \" {}\", f.getPath(), f.lastModified(), time);\n      // at least 100ms newer than time, we do this to ensure the file\n      // has been properly closed/flushed\n      newer \u003d f.lastModified() - time \u003e 100;\n    }\n    return newer;\n  }",
      "path": "hadoop-common-project/hadoop-kms/src/main/java/org/apache/hadoop/crypto/key/kms/server/KMSConfiguration.java",
      "extendedDetails": {}
    },
    "957414d4cb57cb8172070cc53530b7da78b8c9ca": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-11088. Unittest TestKeyShell, TestCredShell and TestKMS assume UNIX path separator for JECKS key store path. Contributed by Xiaoyu Yao.\n",
      "commitDate": "12/09/14 2:50 PM",
      "commitName": "957414d4cb57cb8172070cc53530b7da78b8c9ca",
      "commitAuthor": "cnauroth",
      "commitDateOld": "10/09/14 2:26 PM",
      "commitNameOld": "b02a4b40610e93eef6559db09a11d287e859446d",
      "commitAuthorOld": "Alejandro Abdelnur",
      "daysBetweenCommits": 2.02,
      "commitsBetweenForRepo": 25,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,16 @@\n   public static boolean isACLsFileNewer(long time) {\n     boolean newer \u003d false;\n     String confDir \u003d System.getProperty(KMS_CONFIG_DIR);\n     if (confDir !\u003d null) {\n-      if (!confDir.startsWith(\"/\")) {\n+      Path confPath \u003d new Path(confDir);\n+      if (!confPath.isUriPathAbsolute()) {\n         throw new RuntimeException(\"System property \u0027\" + KMS_CONFIG_DIR +\n             \"\u0027 must be an absolute path: \" + confDir);\n       }\n-      if (!confDir.endsWith(\"/\")) {\n-        confDir +\u003d \"/\";\n-      }\n       File f \u003d new File(confDir, KMS_ACLS_XML);\n       // at least 100ms newer than time, we do this to ensure the file\n       // has been properly closed/flushed\n       newer \u003d f.lastModified() - time \u003e 100;\n     }\n     return newer;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static boolean isACLsFileNewer(long time) {\n    boolean newer \u003d false;\n    String confDir \u003d System.getProperty(KMS_CONFIG_DIR);\n    if (confDir !\u003d null) {\n      Path confPath \u003d new Path(confDir);\n      if (!confPath.isUriPathAbsolute()) {\n        throw new RuntimeException(\"System property \u0027\" + KMS_CONFIG_DIR +\n            \"\u0027 must be an absolute path: \" + confDir);\n      }\n      File f \u003d new File(confDir, KMS_ACLS_XML);\n      // at least 100ms newer than time, we do this to ensure the file\n      // has been properly closed/flushed\n      newer \u003d f.lastModified() - time \u003e 100;\n    }\n    return newer;\n  }",
      "path": "hadoop-common-project/hadoop-kms/src/main/java/org/apache/hadoop/crypto/key/kms/server/KMSConfiguration.java",
      "extendedDetails": {}
    },
    "17d4fbbf0af9b93de9502afb274e91533140d1c6": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-10433. Key Management Server based on KeyProvider API. (tucu)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1592637 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "05/05/14 2:43 PM",
      "commitName": "17d4fbbf0af9b93de9502afb274e91533140d1c6",
      "commitAuthor": "Alejandro Abdelnur",
      "diff": "@@ -0,0 +1,18 @@\n+  public static boolean isACLsFileNewer(long time) {\n+    boolean newer \u003d false;\n+    String confDir \u003d System.getProperty(KMS_CONFIG_DIR);\n+    if (confDir !\u003d null) {\n+      if (!confDir.startsWith(\"/\")) {\n+        throw new RuntimeException(\"System property \u0027\" + KMS_CONFIG_DIR +\n+            \"\u0027 must be an absolute path: \" + confDir);\n+      }\n+      if (!confDir.endsWith(\"/\")) {\n+        confDir +\u003d \"/\";\n+      }\n+      File f \u003d new File(confDir, KMS_ACLS_XML);\n+      // at least 100ms newer than time, we do this to ensure the file\n+      // has been properly closed/flushed\n+      newer \u003d f.lastModified() - time \u003e 100;\n+    }\n+    return newer;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public static boolean isACLsFileNewer(long time) {\n    boolean newer \u003d false;\n    String confDir \u003d System.getProperty(KMS_CONFIG_DIR);\n    if (confDir !\u003d null) {\n      if (!confDir.startsWith(\"/\")) {\n        throw new RuntimeException(\"System property \u0027\" + KMS_CONFIG_DIR +\n            \"\u0027 must be an absolute path: \" + confDir);\n      }\n      if (!confDir.endsWith(\"/\")) {\n        confDir +\u003d \"/\";\n      }\n      File f \u003d new File(confDir, KMS_ACLS_XML);\n      // at least 100ms newer than time, we do this to ensure the file\n      // has been properly closed/flushed\n      newer \u003d f.lastModified() - time \u003e 100;\n    }\n    return newer;\n  }",
      "path": "hadoop-common-project/hadoop-kms/src/main/java/org/apache/hadoop/crypto/key/kms/server/KMSConfiguration.java"
    }
  }
}