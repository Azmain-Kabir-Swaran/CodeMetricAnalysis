{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "NamenodeWebHdfsMethods.java",
  "functionName": "delete",
  "functionId": "delete___ugi-UserGroupInformation(annotations-@Context__modifiers-final)__delegation-DelegationParam(annotations-@QueryParam(DelegationParam.NAME)-@DefaultValue(DelegationParam.DEFAULT)__modifiers-final)__username-UserParam(annotations-@QueryParam(UserParam.NAME)-@DefaultValue(UserParam.DEFAULT)__modifiers-final)__doAsUser-DoAsParam(annotations-@QueryParam(DoAsParam.NAME)-@DefaultValue(DoAsParam.DEFAULT)__modifiers-final)__path-UriFsPathParam(annotations-@PathParam(UriFsPathParam.NAME)__modifiers-final)__op-DeleteOpParam(annotations-@QueryParam(DeleteOpParam.NAME)-@DefaultValue(DeleteOpParam.DEFAULT)__modifiers-final)__recursive-RecursiveParam(annotations-@QueryParam(RecursiveParam.NAME)-@DefaultValue(RecursiveParam.DEFAULT)__modifiers-final)__snapshotName-SnapshotNameParam(annotations-@QueryParam(SnapshotNameParam.NAME)-@DefaultValue(SnapshotNameParam.DEFAULT)__modifiers-final)",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
  "functionStartLine": 1473,
  "functionEndLine": 1499,
  "numCommitsSeen": 176,
  "timeTaken": 4095,
  "changeHistory": [
    "85cd06f6636f295ad1f3bf2a90063f4714c9cca7",
    "752a9d84bb3ff7451667de3cfaa74fe7feeecb83",
    "02d0f0ba549e584f98b4606c7cea325c9c1afb6c",
    "eeec4dc72abf4c540146a81c5419828520b80fa4",
    "09a156fcce2bc1be4081717bf7ef7d290e80d818",
    "7d1a5078b73c8523d63c1250812238dcc0963530",
    "1b1016beeb716bef8dad93bb2c7c4631a14b3d57",
    "4dc4e9e63f7385ddd1d64ae1345e0d32a4acb9de",
    "78e3821b819b441d1faf4bc66c659cdeddc6006c",
    "61d0b7530c8978c095ab6f62d9d38e168bd829c6"
  ],
  "changeHistoryShort": {
    "85cd06f6636f295ad1f3bf2a90063f4714c9cca7": "Ybodychange",
    "752a9d84bb3ff7451667de3cfaa74fe7feeecb83": "Ymultichange(Yparameterchange,Ybodychange)",
    "02d0f0ba549e584f98b4606c7cea325c9c1afb6c": "Ybodychange",
    "eeec4dc72abf4c540146a81c5419828520b80fa4": "Ybodychange",
    "09a156fcce2bc1be4081717bf7ef7d290e80d818": "Ymultichange(Yparameterchange,Ybodychange)",
    "7d1a5078b73c8523d63c1250812238dcc0963530": "Ybodychange",
    "1b1016beeb716bef8dad93bb2c7c4631a14b3d57": "Ybodychange",
    "4dc4e9e63f7385ddd1d64ae1345e0d32a4acb9de": "Ybodychange",
    "78e3821b819b441d1faf4bc66c659cdeddc6006c": "Ymultichange(Yparameterchange,Yexceptionschange,Ybodychange)",
    "61d0b7530c8978c095ab6f62d9d38e168bd829c6": "Yintroduced"
  },
  "changeHistoryDetails": {
    "85cd06f6636f295ad1f3bf2a90063f4714c9cca7": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-10789. Route webhdfs through the RPC call queue. Contributed by Daryn Sharp and Rushabh S Shah.\n",
      "commitDate": "12/10/16 1:11 PM",
      "commitName": "85cd06f6636f295ad1f3bf2a90063f4714c9cca7",
      "commitAuthor": "Kihwal Lee",
      "commitDateOld": "06/09/16 11:02 AM",
      "commitNameOld": "f0d5382ff3e31a47d13e4cb6c3a244cca82b17ce",
      "commitAuthorOld": "Chris Nauroth",
      "daysBetweenCommits": 36.09,
      "commitsBetweenForRepo": 241,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,31 +1,27 @@\n   public Response delete(\n       @Context final UserGroupInformation ugi,\n       @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n           final DelegationParam delegation,\n       @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n           final UserParam username,\n       @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n           final DoAsParam doAsUser,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n           final DeleteOpParam op,\n       @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n           final RecursiveParam recursive,\n       @QueryParam(SnapshotNameParam.NAME) @DefaultValue(SnapshotNameParam.DEFAULT)\n           final SnapshotNameParam snapshotName\n       ) throws IOException, InterruptedException {\n \n     init(ugi, delegation, username, doAsUser, path, op, recursive, snapshotName);\n \n-    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n+    return doAs(ugi, new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException {\n-        try {\n           return delete(ugi, delegation, username, doAsUser,\n               path.getAbsolutePath(), op, recursive, snapshotName);\n-        } finally {\n-          reset();\n-        }\n       }\n     });\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public Response delete(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n          final UserParam username,\n      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n          final DoAsParam doAsUser,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n          final DeleteOpParam op,\n      @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n          final RecursiveParam recursive,\n      @QueryParam(SnapshotNameParam.NAME) @DefaultValue(SnapshotNameParam.DEFAULT)\n          final SnapshotNameParam snapshotName\n      ) throws IOException, InterruptedException {\n\n    init(ugi, delegation, username, doAsUser, path, op, recursive, snapshotName);\n\n    return doAs(ugi, new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException {\n          return delete(ugi, delegation, username, doAsUser,\n              path.getAbsolutePath(), op, recursive, snapshotName);\n      }\n    });\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
      "extendedDetails": {}
    },
    "752a9d84bb3ff7451667de3cfaa74fe7feeecb83": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "HDFS-6438. DeleteSnapshot should be a DELETE request in WebHdfs. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1596772 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "22/05/14 12:30 AM",
      "commitName": "752a9d84bb3ff7451667de3cfaa74fe7feeecb83",
      "commitAuthor": "Jing Zhao",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-6438. DeleteSnapshot should be a DELETE request in WebHdfs. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1596772 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "22/05/14 12:30 AM",
          "commitName": "752a9d84bb3ff7451667de3cfaa74fe7feeecb83",
          "commitAuthor": "Jing Zhao",
          "commitDateOld": "21/05/14 6:57 AM",
          "commitNameOld": "ac23a55547716df29b3e25c98a113399e184d9d1",
          "commitAuthorOld": "Uma Maheswara Rao G",
          "daysBetweenCommits": 0.73,
          "commitsBetweenForRepo": 8,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,29 +1,31 @@\n   public Response delete(\n       @Context final UserGroupInformation ugi,\n       @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n           final DelegationParam delegation,\n       @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n           final UserParam username,\n       @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n           final DoAsParam doAsUser,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n           final DeleteOpParam op,\n       @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n-          final RecursiveParam recursive\n+          final RecursiveParam recursive,\n+      @QueryParam(SnapshotNameParam.NAME) @DefaultValue(SnapshotNameParam.DEFAULT)\n+          final SnapshotNameParam snapshotName\n       ) throws IOException, InterruptedException {\n \n-    init(ugi, delegation, username, doAsUser, path, op, recursive);\n+    init(ugi, delegation, username, doAsUser, path, op, recursive, snapshotName);\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException {\n         try {\n           return delete(ugi, delegation, username, doAsUser,\n-              path.getAbsolutePath(), op, recursive);\n+              path.getAbsolutePath(), op, recursive, snapshotName);\n         } finally {\n           reset();\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public Response delete(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n          final UserParam username,\n      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n          final DoAsParam doAsUser,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n          final DeleteOpParam op,\n      @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n          final RecursiveParam recursive,\n      @QueryParam(SnapshotNameParam.NAME) @DefaultValue(SnapshotNameParam.DEFAULT)\n          final SnapshotNameParam snapshotName\n      ) throws IOException, InterruptedException {\n\n    init(ugi, delegation, username, doAsUser, path, op, recursive, snapshotName);\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException {\n        try {\n          return delete(ugi, delegation, username, doAsUser,\n              path.getAbsolutePath(), op, recursive, snapshotName);\n        } finally {\n          reset();\n        }\n      }\n    });\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {
            "oldValue": "[ugi-UserGroupInformation(annotations-@Context__modifiers-final), delegation-DelegationParam(annotations-@QueryParam(DelegationParam.NAME)-@DefaultValue(DelegationParam.DEFAULT)__modifiers-final), username-UserParam(annotations-@QueryParam(UserParam.NAME)-@DefaultValue(UserParam.DEFAULT)__modifiers-final), doAsUser-DoAsParam(annotations-@QueryParam(DoAsParam.NAME)-@DefaultValue(DoAsParam.DEFAULT)__modifiers-final), path-UriFsPathParam(annotations-@PathParam(UriFsPathParam.NAME)__modifiers-final), op-DeleteOpParam(annotations-@QueryParam(DeleteOpParam.NAME)-@DefaultValue(DeleteOpParam.DEFAULT)__modifiers-final), recursive-RecursiveParam(annotations-@QueryParam(RecursiveParam.NAME)-@DefaultValue(RecursiveParam.DEFAULT)__modifiers-final)]",
            "newValue": "[ugi-UserGroupInformation(annotations-@Context__modifiers-final), delegation-DelegationParam(annotations-@QueryParam(DelegationParam.NAME)-@DefaultValue(DelegationParam.DEFAULT)__modifiers-final), username-UserParam(annotations-@QueryParam(UserParam.NAME)-@DefaultValue(UserParam.DEFAULT)__modifiers-final), doAsUser-DoAsParam(annotations-@QueryParam(DoAsParam.NAME)-@DefaultValue(DoAsParam.DEFAULT)__modifiers-final), path-UriFsPathParam(annotations-@PathParam(UriFsPathParam.NAME)__modifiers-final), op-DeleteOpParam(annotations-@QueryParam(DeleteOpParam.NAME)-@DefaultValue(DeleteOpParam.DEFAULT)__modifiers-final), recursive-RecursiveParam(annotations-@QueryParam(RecursiveParam.NAME)-@DefaultValue(RecursiveParam.DEFAULT)__modifiers-final), snapshotName-SnapshotNameParam(annotations-@QueryParam(SnapshotNameParam.NAME)-@DefaultValue(SnapshotNameParam.DEFAULT)__modifiers-final)]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-6438. DeleteSnapshot should be a DELETE request in WebHdfs. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1596772 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "22/05/14 12:30 AM",
          "commitName": "752a9d84bb3ff7451667de3cfaa74fe7feeecb83",
          "commitAuthor": "Jing Zhao",
          "commitDateOld": "21/05/14 6:57 AM",
          "commitNameOld": "ac23a55547716df29b3e25c98a113399e184d9d1",
          "commitAuthorOld": "Uma Maheswara Rao G",
          "daysBetweenCommits": 0.73,
          "commitsBetweenForRepo": 8,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,29 +1,31 @@\n   public Response delete(\n       @Context final UserGroupInformation ugi,\n       @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n           final DelegationParam delegation,\n       @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n           final UserParam username,\n       @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n           final DoAsParam doAsUser,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n           final DeleteOpParam op,\n       @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n-          final RecursiveParam recursive\n+          final RecursiveParam recursive,\n+      @QueryParam(SnapshotNameParam.NAME) @DefaultValue(SnapshotNameParam.DEFAULT)\n+          final SnapshotNameParam snapshotName\n       ) throws IOException, InterruptedException {\n \n-    init(ugi, delegation, username, doAsUser, path, op, recursive);\n+    init(ugi, delegation, username, doAsUser, path, op, recursive, snapshotName);\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException {\n         try {\n           return delete(ugi, delegation, username, doAsUser,\n-              path.getAbsolutePath(), op, recursive);\n+              path.getAbsolutePath(), op, recursive, snapshotName);\n         } finally {\n           reset();\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public Response delete(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n          final UserParam username,\n      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n          final DoAsParam doAsUser,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n          final DeleteOpParam op,\n      @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n          final RecursiveParam recursive,\n      @QueryParam(SnapshotNameParam.NAME) @DefaultValue(SnapshotNameParam.DEFAULT)\n          final SnapshotNameParam snapshotName\n      ) throws IOException, InterruptedException {\n\n    init(ugi, delegation, username, doAsUser, path, op, recursive, snapshotName);\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException {\n        try {\n          return delete(ugi, delegation, username, doAsUser,\n              path.getAbsolutePath(), op, recursive, snapshotName);\n        } finally {\n          reset();\n        }\n      }\n    });\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {}
        }
      ]
    },
    "02d0f0ba549e584f98b4606c7cea325c9c1afb6c": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-6218. Audit log should use true client IP for proxied webhdfs operations. Contributed by Daryn Sharp.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1590640 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "28/04/14 7:00 AM",
      "commitName": "02d0f0ba549e584f98b4606c7cea325c9c1afb6c",
      "commitAuthor": "Kihwal Lee",
      "commitDateOld": "19/03/14 10:29 AM",
      "commitNameOld": "7817245d88cb20ece994cc1c5afb3afa0da2661c",
      "commitAuthorOld": "Jing Zhao",
      "daysBetweenCommits": 39.85,
      "commitsBetweenForRepo": 264,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,30 +1,29 @@\n   public Response delete(\n       @Context final UserGroupInformation ugi,\n       @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n           final DelegationParam delegation,\n       @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n           final UserParam username,\n       @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n           final DoAsParam doAsUser,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n           final DeleteOpParam op,\n       @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n           final RecursiveParam recursive\n       ) throws IOException, InterruptedException {\n \n     init(ugi, delegation, username, doAsUser, path, op, recursive);\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException {\n-        REMOTE_ADDRESS.set(request.getRemoteAddr());\n         try {\n           return delete(ugi, delegation, username, doAsUser,\n               path.getAbsolutePath(), op, recursive);\n         } finally {\n-          REMOTE_ADDRESS.set(null);\n+          reset();\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public Response delete(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n          final UserParam username,\n      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n          final DoAsParam doAsUser,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n          final DeleteOpParam op,\n      @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n          final RecursiveParam recursive\n      ) throws IOException, InterruptedException {\n\n    init(ugi, delegation, username, doAsUser, path, op, recursive);\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException {\n        try {\n          return delete(ugi, delegation, username, doAsUser,\n              path.getAbsolutePath(), op, recursive);\n        } finally {\n          reset();\n        }\n      }\n    });\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
      "extendedDetails": {}
    },
    "eeec4dc72abf4c540146a81c5419828520b80fa4": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-3294. Fix code indentation in NamenodeWebHdfsMethods and DatanodeWebHdfsMethods.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1327365 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "17/04/12 8:25 PM",
      "commitName": "eeec4dc72abf4c540146a81c5419828520b80fa4",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "15/03/12 5:01 PM",
      "commitNameOld": "7e5b60116eede44d1cb5b6a263b4fec13da3c473",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 33.14,
      "commitsBetweenForRepo": 258,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,43 +1,30 @@\n   public Response delete(\n       @Context final UserGroupInformation ugi,\n       @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n           final DelegationParam delegation,\n       @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n           final UserParam username,\n       @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n           final DoAsParam doAsUser,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n           final DeleteOpParam op,\n       @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n           final RecursiveParam recursive\n       ) throws IOException, InterruptedException {\n \n     init(ugi, delegation, username, doAsUser, path, op, recursive);\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException {\n         REMOTE_ADDRESS.set(request.getRemoteAddr());\n         try {\n-\n-        final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n-        final String fullpath \u003d path.getAbsolutePath();\n-\n-        switch(op.getValue()) {\n-        case DELETE:\n-        {\n-          final boolean b \u003d namenode.getRpcServer().delete(fullpath, recursive.getValue());\n-          final String js \u003d JsonUtil.toJsonString(\"boolean\", b);\n-          return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n-        }\n-        default:\n-          throw new UnsupportedOperationException(op + \" is not supported\");\n-        }\n-\n+          return delete(ugi, delegation, username, doAsUser,\n+              path.getAbsolutePath(), op, recursive);\n         } finally {\n           REMOTE_ADDRESS.set(null);\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public Response delete(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n          final UserParam username,\n      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n          final DoAsParam doAsUser,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n          final DeleteOpParam op,\n      @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n          final RecursiveParam recursive\n      ) throws IOException, InterruptedException {\n\n    init(ugi, delegation, username, doAsUser, path, op, recursive);\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException {\n        REMOTE_ADDRESS.set(request.getRemoteAddr());\n        try {\n          return delete(ugi, delegation, username, doAsUser,\n              path.getAbsolutePath(), op, recursive);\n        } finally {\n          REMOTE_ADDRESS.set(null);\n        }\n      }\n    });\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
      "extendedDetails": {}
    },
    "09a156fcce2bc1be4081717bf7ef7d290e80d818": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "HDFS-2539. Support doAs and GETHOMEDIRECTORY in webhdfs.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1200731 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "10/11/11 8:19 PM",
      "commitName": "09a156fcce2bc1be4081717bf7ef7d290e80d818",
      "commitAuthor": "Tsz-wo Sze",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-2539. Support doAs and GETHOMEDIRECTORY in webhdfs.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1200731 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "10/11/11 8:19 PM",
          "commitName": "09a156fcce2bc1be4081717bf7ef7d290e80d818",
          "commitAuthor": "Tsz-wo Sze",
          "commitDateOld": "08/11/11 11:25 AM",
          "commitNameOld": "94c631af1fc49f5ae5881fcd5f0e80b17308d15d",
          "commitAuthorOld": "Tsz-wo Sze",
          "daysBetweenCommits": 2.37,
          "commitsBetweenForRepo": 6,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,43 +1,43 @@\n   public Response delete(\n       @Context final UserGroupInformation ugi,\n+      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n+          final DelegationParam delegation,\n+      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n+          final UserParam username,\n+      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n+          final DoAsParam doAsUser,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n           final DeleteOpParam op,\n       @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n           final RecursiveParam recursive\n       ) throws IOException, InterruptedException {\n \n-    if (LOG.isTraceEnabled()) {\n-      LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n-          + Param.toSortedString(\", \", recursive));\n-    }\n-\n-    //clear content type\n-    response.setContentType(null);\n+    init(ugi, delegation, username, doAsUser, path, op, recursive);\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException {\n         REMOTE_ADDRESS.set(request.getRemoteAddr());\n         try {\n \n         final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n         final String fullpath \u003d path.getAbsolutePath();\n \n         switch(op.getValue()) {\n         case DELETE:\n         {\n           final boolean b \u003d namenode.getRpcServer().delete(fullpath, recursive.getValue());\n           final String js \u003d JsonUtil.toJsonString(\"boolean\", b);\n           return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n         }\n         default:\n           throw new UnsupportedOperationException(op + \" is not supported\");\n         }\n \n         } finally {\n           REMOTE_ADDRESS.set(null);\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public Response delete(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n          final UserParam username,\n      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n          final DoAsParam doAsUser,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n          final DeleteOpParam op,\n      @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n          final RecursiveParam recursive\n      ) throws IOException, InterruptedException {\n\n    init(ugi, delegation, username, doAsUser, path, op, recursive);\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException {\n        REMOTE_ADDRESS.set(request.getRemoteAddr());\n        try {\n\n        final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n        final String fullpath \u003d path.getAbsolutePath();\n\n        switch(op.getValue()) {\n        case DELETE:\n        {\n          final boolean b \u003d namenode.getRpcServer().delete(fullpath, recursive.getValue());\n          final String js \u003d JsonUtil.toJsonString(\"boolean\", b);\n          return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n        }\n        default:\n          throw new UnsupportedOperationException(op + \" is not supported\");\n        }\n\n        } finally {\n          REMOTE_ADDRESS.set(null);\n        }\n      }\n    });\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {
            "oldValue": "[ugi-UserGroupInformation(annotations-@Context__modifiers-final), path-UriFsPathParam(annotations-@PathParam(UriFsPathParam.NAME)__modifiers-final), op-DeleteOpParam(annotations-@QueryParam(DeleteOpParam.NAME)-@DefaultValue(DeleteOpParam.DEFAULT)__modifiers-final), recursive-RecursiveParam(annotations-@QueryParam(RecursiveParam.NAME)-@DefaultValue(RecursiveParam.DEFAULT)__modifiers-final)]",
            "newValue": "[ugi-UserGroupInformation(annotations-@Context__modifiers-final), delegation-DelegationParam(annotations-@QueryParam(DelegationParam.NAME)-@DefaultValue(DelegationParam.DEFAULT)__modifiers-final), username-UserParam(annotations-@QueryParam(UserParam.NAME)-@DefaultValue(UserParam.DEFAULT)__modifiers-final), doAsUser-DoAsParam(annotations-@QueryParam(DoAsParam.NAME)-@DefaultValue(DoAsParam.DEFAULT)__modifiers-final), path-UriFsPathParam(annotations-@PathParam(UriFsPathParam.NAME)__modifiers-final), op-DeleteOpParam(annotations-@QueryParam(DeleteOpParam.NAME)-@DefaultValue(DeleteOpParam.DEFAULT)__modifiers-final), recursive-RecursiveParam(annotations-@QueryParam(RecursiveParam.NAME)-@DefaultValue(RecursiveParam.DEFAULT)__modifiers-final)]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-2539. Support doAs and GETHOMEDIRECTORY in webhdfs.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1200731 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "10/11/11 8:19 PM",
          "commitName": "09a156fcce2bc1be4081717bf7ef7d290e80d818",
          "commitAuthor": "Tsz-wo Sze",
          "commitDateOld": "08/11/11 11:25 AM",
          "commitNameOld": "94c631af1fc49f5ae5881fcd5f0e80b17308d15d",
          "commitAuthorOld": "Tsz-wo Sze",
          "daysBetweenCommits": 2.37,
          "commitsBetweenForRepo": 6,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,43 +1,43 @@\n   public Response delete(\n       @Context final UserGroupInformation ugi,\n+      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n+          final DelegationParam delegation,\n+      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n+          final UserParam username,\n+      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n+          final DoAsParam doAsUser,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n           final DeleteOpParam op,\n       @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n           final RecursiveParam recursive\n       ) throws IOException, InterruptedException {\n \n-    if (LOG.isTraceEnabled()) {\n-      LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n-          + Param.toSortedString(\", \", recursive));\n-    }\n-\n-    //clear content type\n-    response.setContentType(null);\n+    init(ugi, delegation, username, doAsUser, path, op, recursive);\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException {\n         REMOTE_ADDRESS.set(request.getRemoteAddr());\n         try {\n \n         final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n         final String fullpath \u003d path.getAbsolutePath();\n \n         switch(op.getValue()) {\n         case DELETE:\n         {\n           final boolean b \u003d namenode.getRpcServer().delete(fullpath, recursive.getValue());\n           final String js \u003d JsonUtil.toJsonString(\"boolean\", b);\n           return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n         }\n         default:\n           throw new UnsupportedOperationException(op + \" is not supported\");\n         }\n \n         } finally {\n           REMOTE_ADDRESS.set(null);\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public Response delete(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n          final UserParam username,\n      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n          final DoAsParam doAsUser,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n          final DeleteOpParam op,\n      @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n          final RecursiveParam recursive\n      ) throws IOException, InterruptedException {\n\n    init(ugi, delegation, username, doAsUser, path, op, recursive);\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException {\n        REMOTE_ADDRESS.set(request.getRemoteAddr());\n        try {\n\n        final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n        final String fullpath \u003d path.getAbsolutePath();\n\n        switch(op.getValue()) {\n        case DELETE:\n        {\n          final boolean b \u003d namenode.getRpcServer().delete(fullpath, recursive.getValue());\n          final String js \u003d JsonUtil.toJsonString(\"boolean\", b);\n          return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n        }\n        default:\n          throw new UnsupportedOperationException(op + \" is not supported\");\n        }\n\n        } finally {\n          REMOTE_ADDRESS.set(null);\n        }\n      }\n    });\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {}
        }
      ]
    },
    "7d1a5078b73c8523d63c1250812238dcc0963530": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-2441. Remove the Content-Type set by HttpServer.QuotingInputFilter in webhdfs responses.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1183081 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "13/10/11 1:41 PM",
      "commitName": "7d1a5078b73c8523d63c1250812238dcc0963530",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "09/10/11 6:49 PM",
      "commitNameOld": "676f488efffd50eb47e75cd750f9bc948b9e12fb",
      "commitAuthorOld": "Suresh Srinivas",
      "daysBetweenCommits": 3.79,
      "commitsBetweenForRepo": 34,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,40 +1,43 @@\n   public Response delete(\n       @Context final UserGroupInformation ugi,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n           final DeleteOpParam op,\n       @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n           final RecursiveParam recursive\n       ) throws IOException, InterruptedException {\n \n     if (LOG.isTraceEnabled()) {\n       LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n           + Param.toSortedString(\", \", recursive));\n     }\n \n+    //clear content type\n+    response.setContentType(null);\n+\n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException {\n         REMOTE_ADDRESS.set(request.getRemoteAddr());\n         try {\n \n         final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n         final String fullpath \u003d path.getAbsolutePath();\n \n         switch(op.getValue()) {\n         case DELETE:\n         {\n           final boolean b \u003d namenode.getRpcServer().delete(fullpath, recursive.getValue());\n           final String js \u003d JsonUtil.toJsonString(\"boolean\", b);\n           return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n         }\n         default:\n           throw new UnsupportedOperationException(op + \" is not supported\");\n         }\n \n         } finally {\n           REMOTE_ADDRESS.set(null);\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public Response delete(\n      @Context final UserGroupInformation ugi,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n          final DeleteOpParam op,\n      @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n          final RecursiveParam recursive\n      ) throws IOException, InterruptedException {\n\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n          + Param.toSortedString(\", \", recursive));\n    }\n\n    //clear content type\n    response.setContentType(null);\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException {\n        REMOTE_ADDRESS.set(request.getRemoteAddr());\n        try {\n\n        final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n        final String fullpath \u003d path.getAbsolutePath();\n\n        switch(op.getValue()) {\n        case DELETE:\n        {\n          final boolean b \u003d namenode.getRpcServer().delete(fullpath, recursive.getValue());\n          final String js \u003d JsonUtil.toJsonString(\"boolean\", b);\n          return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n        }\n        default:\n          throw new UnsupportedOperationException(op + \" is not supported\");\n        }\n\n        } finally {\n          REMOTE_ADDRESS.set(null);\n        }\n      }\n    });\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
      "extendedDetails": {}
    },
    "1b1016beeb716bef8dad93bb2c7c4631a14b3d57": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-2395. Add a root element in the JSON responses of webhdfs.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1179169 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "05/10/11 4:29 AM",
      "commitName": "1b1016beeb716bef8dad93bb2c7c4631a14b3d57",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "30/09/11 9:49 PM",
      "commitNameOld": "dc8464f943b61b795df0cc8baec171bf07355763",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 4.28,
      "commitsBetweenForRepo": 25,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,40 +1,40 @@\n   public Response delete(\n       @Context final UserGroupInformation ugi,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n           final DeleteOpParam op,\n       @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n           final RecursiveParam recursive\n       ) throws IOException, InterruptedException {\n \n     if (LOG.isTraceEnabled()) {\n       LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n           + Param.toSortedString(\", \", recursive));\n     }\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException {\n         REMOTE_ADDRESS.set(request.getRemoteAddr());\n         try {\n \n         final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n         final String fullpath \u003d path.getAbsolutePath();\n \n         switch(op.getValue()) {\n         case DELETE:\n         {\n           final boolean b \u003d namenode.getRpcServer().delete(fullpath, recursive.getValue());\n-          final String js \u003d JsonUtil.toJsonString(DeleteOpParam.Op.DELETE, b);\n+          final String js \u003d JsonUtil.toJsonString(\"boolean\", b);\n           return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n         }\n         default:\n           throw new UnsupportedOperationException(op + \" is not supported\");\n         }\n \n         } finally {\n           REMOTE_ADDRESS.set(null);\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public Response delete(\n      @Context final UserGroupInformation ugi,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n          final DeleteOpParam op,\n      @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n          final RecursiveParam recursive\n      ) throws IOException, InterruptedException {\n\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n          + Param.toSortedString(\", \", recursive));\n    }\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException {\n        REMOTE_ADDRESS.set(request.getRemoteAddr());\n        try {\n\n        final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n        final String fullpath \u003d path.getAbsolutePath();\n\n        switch(op.getValue()) {\n        case DELETE:\n        {\n          final boolean b \u003d namenode.getRpcServer().delete(fullpath, recursive.getValue());\n          final String js \u003d JsonUtil.toJsonString(\"boolean\", b);\n          return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n        }\n        default:\n          throw new UnsupportedOperationException(op + \" is not supported\");\n        }\n\n        } finally {\n          REMOTE_ADDRESS.set(null);\n        }\n      }\n    });\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
      "extendedDetails": {}
    },
    "4dc4e9e63f7385ddd1d64ae1345e0d32a4acb9de": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-2340. Support getFileBlockLocations and getDelegationToken in webhdfs.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1173468 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "20/09/11 7:56 PM",
      "commitName": "4dc4e9e63f7385ddd1d64ae1345e0d32a4acb9de",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "16/09/11 8:02 AM",
      "commitNameOld": "78e3821b819b441d1faf4bc66c659cdeddc6006c",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 4.5,
      "commitsBetweenForRepo": 31,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,33 +1,40 @@\n   public Response delete(\n       @Context final UserGroupInformation ugi,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n           final DeleteOpParam op,\n       @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n           final RecursiveParam recursive\n       ) throws IOException, InterruptedException {\n \n     if (LOG.isTraceEnabled()) {\n       LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n           + Param.toSortedString(\", \", recursive));\n     }\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException {\n+        REMOTE_ADDRESS.set(request.getRemoteAddr());\n+        try {\n+\n         final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n         final String fullpath \u003d path.getAbsolutePath();\n \n         switch(op.getValue()) {\n         case DELETE:\n         {\n           final boolean b \u003d namenode.getRpcServer().delete(fullpath, recursive.getValue());\n           final String js \u003d JsonUtil.toJsonString(DeleteOpParam.Op.DELETE, b);\n           return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n         }\n         default:\n           throw new UnsupportedOperationException(op + \" is not supported\");\n         }\n+\n+        } finally {\n+          REMOTE_ADDRESS.set(null);\n+        }\n       }\n     });\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public Response delete(\n      @Context final UserGroupInformation ugi,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n          final DeleteOpParam op,\n      @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n          final RecursiveParam recursive\n      ) throws IOException, InterruptedException {\n\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n          + Param.toSortedString(\", \", recursive));\n    }\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException {\n        REMOTE_ADDRESS.set(request.getRemoteAddr());\n        try {\n\n        final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n        final String fullpath \u003d path.getAbsolutePath();\n\n        switch(op.getValue()) {\n        case DELETE:\n        {\n          final boolean b \u003d namenode.getRpcServer().delete(fullpath, recursive.getValue());\n          final String js \u003d JsonUtil.toJsonString(DeleteOpParam.Op.DELETE, b);\n          return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n        }\n        default:\n          throw new UnsupportedOperationException(op + \" is not supported\");\n        }\n\n        } finally {\n          REMOTE_ADDRESS.set(null);\n        }\n      }\n    });\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
      "extendedDetails": {}
    },
    "78e3821b819b441d1faf4bc66c659cdeddc6006c": {
      "type": "Ymultichange(Yparameterchange,Yexceptionschange,Ybodychange)",
      "commitMessage": "HDFS-2318. Provide authentication to webhdfs using SPNEGO and delegation tokens.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1171611 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "16/09/11 8:02 AM",
      "commitName": "78e3821b819b441d1faf4bc66c659cdeddc6006c",
      "commitAuthor": "Tsz-wo Sze",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-2318. Provide authentication to webhdfs using SPNEGO and delegation tokens.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1171611 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "16/09/11 8:02 AM",
          "commitName": "78e3821b819b441d1faf4bc66c659cdeddc6006c",
          "commitAuthor": "Tsz-wo Sze",
          "commitDateOld": "13/09/11 1:34 AM",
          "commitNameOld": "6c3b59505b863f03629da52a1e9b886fe9b496d0",
          "commitAuthorOld": "Tsz-wo Sze",
          "daysBetweenCommits": 3.27,
          "commitsBetweenForRepo": 20,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,25 +1,33 @@\n   public Response delete(\n+      @Context final UserGroupInformation ugi,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n           final DeleteOpParam op,\n       @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n           final RecursiveParam recursive\n-      ) throws IOException {\n+      ) throws IOException, InterruptedException {\n \n     if (LOG.isTraceEnabled()) {\n-      LOG.trace(op + \", \" + path\n-        + Param.toSortedString(\", \", recursive));\n+      LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n+          + Param.toSortedString(\", \", recursive));\n     }\n \n-    switch(op.getValue()) {\n-    case DELETE:\n-      final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n-      final String fullpath \u003d path.getAbsolutePath();\n-      final boolean b \u003d namenode.getRpcServer().delete(fullpath, recursive.getValue());\n-      final String js \u003d JsonUtil.toJsonString(DeleteOpParam.Op.DELETE, b);\n-      return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n+    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n+      @Override\n+      public Response run() throws IOException {\n+        final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n+        final String fullpath \u003d path.getAbsolutePath();\n \n-    default:\n-      throw new UnsupportedOperationException(op + \" is not supported\");\n-    }    \n+        switch(op.getValue()) {\n+        case DELETE:\n+        {\n+          final boolean b \u003d namenode.getRpcServer().delete(fullpath, recursive.getValue());\n+          final String js \u003d JsonUtil.toJsonString(DeleteOpParam.Op.DELETE, b);\n+          return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n+        }\n+        default:\n+          throw new UnsupportedOperationException(op + \" is not supported\");\n+        }\n+      }\n+    });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public Response delete(\n      @Context final UserGroupInformation ugi,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n          final DeleteOpParam op,\n      @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n          final RecursiveParam recursive\n      ) throws IOException, InterruptedException {\n\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n          + Param.toSortedString(\", \", recursive));\n    }\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException {\n        final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n        final String fullpath \u003d path.getAbsolutePath();\n\n        switch(op.getValue()) {\n        case DELETE:\n        {\n          final boolean b \u003d namenode.getRpcServer().delete(fullpath, recursive.getValue());\n          final String js \u003d JsonUtil.toJsonString(DeleteOpParam.Op.DELETE, b);\n          return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n        }\n        default:\n          throw new UnsupportedOperationException(op + \" is not supported\");\n        }\n      }\n    });\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {
            "oldValue": "[path-UriFsPathParam(annotations-@PathParam(UriFsPathParam.NAME)__modifiers-final), op-DeleteOpParam(annotations-@QueryParam(DeleteOpParam.NAME)-@DefaultValue(DeleteOpParam.DEFAULT)__modifiers-final), recursive-RecursiveParam(annotations-@QueryParam(RecursiveParam.NAME)-@DefaultValue(RecursiveParam.DEFAULT)__modifiers-final)]",
            "newValue": "[ugi-UserGroupInformation(annotations-@Context__modifiers-final), path-UriFsPathParam(annotations-@PathParam(UriFsPathParam.NAME)__modifiers-final), op-DeleteOpParam(annotations-@QueryParam(DeleteOpParam.NAME)-@DefaultValue(DeleteOpParam.DEFAULT)__modifiers-final), recursive-RecursiveParam(annotations-@QueryParam(RecursiveParam.NAME)-@DefaultValue(RecursiveParam.DEFAULT)__modifiers-final)]"
          }
        },
        {
          "type": "Yexceptionschange",
          "commitMessage": "HDFS-2318. Provide authentication to webhdfs using SPNEGO and delegation tokens.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1171611 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "16/09/11 8:02 AM",
          "commitName": "78e3821b819b441d1faf4bc66c659cdeddc6006c",
          "commitAuthor": "Tsz-wo Sze",
          "commitDateOld": "13/09/11 1:34 AM",
          "commitNameOld": "6c3b59505b863f03629da52a1e9b886fe9b496d0",
          "commitAuthorOld": "Tsz-wo Sze",
          "daysBetweenCommits": 3.27,
          "commitsBetweenForRepo": 20,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,25 +1,33 @@\n   public Response delete(\n+      @Context final UserGroupInformation ugi,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n           final DeleteOpParam op,\n       @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n           final RecursiveParam recursive\n-      ) throws IOException {\n+      ) throws IOException, InterruptedException {\n \n     if (LOG.isTraceEnabled()) {\n-      LOG.trace(op + \", \" + path\n-        + Param.toSortedString(\", \", recursive));\n+      LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n+          + Param.toSortedString(\", \", recursive));\n     }\n \n-    switch(op.getValue()) {\n-    case DELETE:\n-      final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n-      final String fullpath \u003d path.getAbsolutePath();\n-      final boolean b \u003d namenode.getRpcServer().delete(fullpath, recursive.getValue());\n-      final String js \u003d JsonUtil.toJsonString(DeleteOpParam.Op.DELETE, b);\n-      return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n+    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n+      @Override\n+      public Response run() throws IOException {\n+        final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n+        final String fullpath \u003d path.getAbsolutePath();\n \n-    default:\n-      throw new UnsupportedOperationException(op + \" is not supported\");\n-    }    \n+        switch(op.getValue()) {\n+        case DELETE:\n+        {\n+          final boolean b \u003d namenode.getRpcServer().delete(fullpath, recursive.getValue());\n+          final String js \u003d JsonUtil.toJsonString(DeleteOpParam.Op.DELETE, b);\n+          return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n+        }\n+        default:\n+          throw new UnsupportedOperationException(op + \" is not supported\");\n+        }\n+      }\n+    });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public Response delete(\n      @Context final UserGroupInformation ugi,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n          final DeleteOpParam op,\n      @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n          final RecursiveParam recursive\n      ) throws IOException, InterruptedException {\n\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n          + Param.toSortedString(\", \", recursive));\n    }\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException {\n        final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n        final String fullpath \u003d path.getAbsolutePath();\n\n        switch(op.getValue()) {\n        case DELETE:\n        {\n          final boolean b \u003d namenode.getRpcServer().delete(fullpath, recursive.getValue());\n          final String js \u003d JsonUtil.toJsonString(DeleteOpParam.Op.DELETE, b);\n          return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n        }\n        default:\n          throw new UnsupportedOperationException(op + \" is not supported\");\n        }\n      }\n    });\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {
            "oldValue": "[IOException]",
            "newValue": "[IOException, InterruptedException]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-2318. Provide authentication to webhdfs using SPNEGO and delegation tokens.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1171611 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "16/09/11 8:02 AM",
          "commitName": "78e3821b819b441d1faf4bc66c659cdeddc6006c",
          "commitAuthor": "Tsz-wo Sze",
          "commitDateOld": "13/09/11 1:34 AM",
          "commitNameOld": "6c3b59505b863f03629da52a1e9b886fe9b496d0",
          "commitAuthorOld": "Tsz-wo Sze",
          "daysBetweenCommits": 3.27,
          "commitsBetweenForRepo": 20,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,25 +1,33 @@\n   public Response delete(\n+      @Context final UserGroupInformation ugi,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n           final DeleteOpParam op,\n       @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n           final RecursiveParam recursive\n-      ) throws IOException {\n+      ) throws IOException, InterruptedException {\n \n     if (LOG.isTraceEnabled()) {\n-      LOG.trace(op + \", \" + path\n-        + Param.toSortedString(\", \", recursive));\n+      LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n+          + Param.toSortedString(\", \", recursive));\n     }\n \n-    switch(op.getValue()) {\n-    case DELETE:\n-      final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n-      final String fullpath \u003d path.getAbsolutePath();\n-      final boolean b \u003d namenode.getRpcServer().delete(fullpath, recursive.getValue());\n-      final String js \u003d JsonUtil.toJsonString(DeleteOpParam.Op.DELETE, b);\n-      return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n+    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n+      @Override\n+      public Response run() throws IOException {\n+        final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n+        final String fullpath \u003d path.getAbsolutePath();\n \n-    default:\n-      throw new UnsupportedOperationException(op + \" is not supported\");\n-    }    \n+        switch(op.getValue()) {\n+        case DELETE:\n+        {\n+          final boolean b \u003d namenode.getRpcServer().delete(fullpath, recursive.getValue());\n+          final String js \u003d JsonUtil.toJsonString(DeleteOpParam.Op.DELETE, b);\n+          return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n+        }\n+        default:\n+          throw new UnsupportedOperationException(op + \" is not supported\");\n+        }\n+      }\n+    });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public Response delete(\n      @Context final UserGroupInformation ugi,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n          final DeleteOpParam op,\n      @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n          final RecursiveParam recursive\n      ) throws IOException, InterruptedException {\n\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n          + Param.toSortedString(\", \", recursive));\n    }\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException {\n        final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n        final String fullpath \u003d path.getAbsolutePath();\n\n        switch(op.getValue()) {\n        case DELETE:\n        {\n          final boolean b \u003d namenode.getRpcServer().delete(fullpath, recursive.getValue());\n          final String js \u003d JsonUtil.toJsonString(DeleteOpParam.Op.DELETE, b);\n          return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n        }\n        default:\n          throw new UnsupportedOperationException(op + \" is not supported\");\n        }\n      }\n    });\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {}
        }
      ]
    },
    "61d0b7530c8978c095ab6f62d9d38e168bd829c6": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-2284. Add a new FileSystem, webhdfs://, for supporting write Http access to HDFS.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1167662 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "10/09/11 6:41 PM",
      "commitName": "61d0b7530c8978c095ab6f62d9d38e168bd829c6",
      "commitAuthor": "Tsz-wo Sze",
      "diff": "@@ -0,0 +1,25 @@\n+  public Response delete(\n+      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n+      @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n+          final DeleteOpParam op,\n+      @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n+          final RecursiveParam recursive\n+      ) throws IOException {\n+\n+    if (LOG.isTraceEnabled()) {\n+      LOG.trace(op + \", \" + path\n+        + Param.toSortedString(\", \", recursive));\n+    }\n+\n+    switch(op.getValue()) {\n+    case DELETE:\n+      final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n+      final String fullpath \u003d path.getAbsolutePath();\n+      final boolean b \u003d namenode.getRpcServer().delete(fullpath, recursive.getValue());\n+      final String js \u003d JsonUtil.toJsonString(DeleteOpParam.Op.DELETE, b);\n+      return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n+\n+    default:\n+      throw new UnsupportedOperationException(op + \" is not supported\");\n+    }    \n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public Response delete(\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(DeleteOpParam.NAME) @DefaultValue(DeleteOpParam.DEFAULT)\n          final DeleteOpParam op,\n      @QueryParam(RecursiveParam.NAME) @DefaultValue(RecursiveParam.DEFAULT)\n          final RecursiveParam recursive\n      ) throws IOException {\n\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(op + \", \" + path\n        + Param.toSortedString(\", \", recursive));\n    }\n\n    switch(op.getValue()) {\n    case DELETE:\n      final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n      final String fullpath \u003d path.getAbsolutePath();\n      final boolean b \u003d namenode.getRpcServer().delete(fullpath, recursive.getValue());\n      final String js \u003d JsonUtil.toJsonString(DeleteOpParam.Op.DELETE, b);\n      return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n\n    default:\n      throw new UnsupportedOperationException(op + \" is not supported\");\n    }    \n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java"
    }
  }
}