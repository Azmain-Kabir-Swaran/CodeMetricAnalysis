{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "NNStorage.java",
  "functionName": "writeAll",
  "functionId": "writeAll",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NNStorage.java",
  "functionStartLine": 1165,
  "functionEndLine": 1180,
  "numCommitsSeen": 61,
  "timeTaken": 2442,
  "changeHistory": [
    "b3ae11d59790bb08b81848e9f944db7d3afbbd8a",
    "a4f66655ec22ca8c960f971f2b0cdafbd3430ad7",
    "010e6ac328855bad59f138b6aeaec535272f448c"
  ],
  "changeHistoryShort": {
    "b3ae11d59790bb08b81848e9f944db7d3afbbd8a": "Ybodychange",
    "a4f66655ec22ca8c960f971f2b0cdafbd3430ad7": "Ybodychange",
    "010e6ac328855bad59f138b6aeaec535272f448c": "Yintroduced"
  },
  "changeHistoryDetails": {
    "b3ae11d59790bb08b81848e9f944db7d3afbbd8a": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-12997. Move logging to slf4j in BlockPoolSliceStorage and Storage. Contributed by Ajay Kumar.\n",
      "commitDate": "01/02/18 10:45 AM",
      "commitName": "b3ae11d59790bb08b81848e9f944db7d3afbbd8a",
      "commitAuthor": "Xiaoyu Yao",
      "commitDateOld": "15/12/17 5:51 PM",
      "commitNameOld": "b668eb91556b8c85c2b4925808ccb1f769031c20",
      "commitAuthorOld": "Virajith Jalaparti",
      "daysBetweenCommits": 47.7,
      "commitsBetweenForRepo": 277,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,16 @@\n   public void writeAll() throws IOException {\n     this.layoutVersion \u003d getServiceLayoutVersion();\n     for (StorageDirectory sd : getStorageDirs()) {\n       try {\n         writeProperties(sd);\n       } catch (Exception e) {\n-        LOG.warn(\"Error during write properties to the VERSION file to \" +\n-            sd.toString(), e);\n+        LOG.warn(\"Error during write properties to the VERSION file to {}\",\n+            sd, e);\n         reportErrorsOnDirectory(sd);\n         if (getStorageDirs().isEmpty()) {\n           throw new IOException(\"All the storage failed while writing \" +\n               \"properties to VERSION file\");\n         }\n       }\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void writeAll() throws IOException {\n    this.layoutVersion \u003d getServiceLayoutVersion();\n    for (StorageDirectory sd : getStorageDirs()) {\n      try {\n        writeProperties(sd);\n      } catch (Exception e) {\n        LOG.warn(\"Error during write properties to the VERSION file to {}\",\n            sd, e);\n        reportErrorsOnDirectory(sd);\n        if (getStorageDirs().isEmpty()) {\n          throw new IOException(\"All the storage failed while writing \" +\n              \"properties to VERSION file\");\n        }\n      }\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NNStorage.java",
      "extendedDetails": {}
    },
    "a4f66655ec22ca8c960f971f2b0cdafbd3430ad7": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-11267. Avoid redefinition of storageDirs in NNStorage and cleanup its accessors in Storage. (Manoj Govindassamy via lei)\n",
      "commitDate": "29/12/16 12:57 AM",
      "commitName": "a4f66655ec22ca8c960f971f2b0cdafbd3430ad7",
      "commitAuthor": "Lei Xu",
      "commitDateOld": "05/12/16 10:54 AM",
      "commitNameOld": "1b5cceaffbdde50a87ede81552dc380832db8e79",
      "commitAuthorOld": "Wei-Chiu Chuang",
      "daysBetweenCommits": 23.59,
      "commitsBetweenForRepo": 127,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,16 @@\n   public void writeAll() throws IOException {\n     this.layoutVersion \u003d getServiceLayoutVersion();\n-    for (StorageDirectory sd : storageDirs) {\n+    for (StorageDirectory sd : getStorageDirs()) {\n       try {\n         writeProperties(sd);\n       } catch (Exception e) {\n         LOG.warn(\"Error during write properties to the VERSION file to \" +\n             sd.toString(), e);\n         reportErrorsOnDirectory(sd);\n-        if (storageDirs.isEmpty()) {\n+        if (getStorageDirs().isEmpty()) {\n           throw new IOException(\"All the storage failed while writing \" +\n               \"properties to VERSION file\");\n         }\n       }\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void writeAll() throws IOException {\n    this.layoutVersion \u003d getServiceLayoutVersion();\n    for (StorageDirectory sd : getStorageDirs()) {\n      try {\n        writeProperties(sd);\n      } catch (Exception e) {\n        LOG.warn(\"Error during write properties to the VERSION file to \" +\n            sd.toString(), e);\n        reportErrorsOnDirectory(sd);\n        if (getStorageDirs().isEmpty()) {\n          throw new IOException(\"All the storage failed while writing \" +\n              \"properties to VERSION file\");\n        }\n      }\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NNStorage.java",
      "extendedDetails": {}
    },
    "010e6ac328855bad59f138b6aeaec535272f448c": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-2173. saveNamespace should not throw IOE when only one storage directory fails to write VERSION file. Contributed by Andras Bokor.\n",
      "commitDate": "18/05/16 2:13 PM",
      "commitName": "010e6ac328855bad59f138b6aeaec535272f448c",
      "commitAuthor": "Andrew Wang",
      "diff": "@@ -0,0 +1,16 @@\n+  public void writeAll() throws IOException {\n+    this.layoutVersion \u003d getServiceLayoutVersion();\n+    for (StorageDirectory sd : storageDirs) {\n+      try {\n+        writeProperties(sd);\n+      } catch (Exception e) {\n+        LOG.warn(\"Error during write properties to the VERSION file to \" +\n+            sd.toString(), e);\n+        reportErrorsOnDirectory(sd);\n+        if (storageDirs.isEmpty()) {\n+          throw new IOException(\"All the storage failed while writing \" +\n+              \"properties to VERSION file\");\n+        }\n+      }\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public void writeAll() throws IOException {\n    this.layoutVersion \u003d getServiceLayoutVersion();\n    for (StorageDirectory sd : storageDirs) {\n      try {\n        writeProperties(sd);\n      } catch (Exception e) {\n        LOG.warn(\"Error during write properties to the VERSION file to \" +\n            sd.toString(), e);\n        reportErrorsOnDirectory(sd);\n        if (storageDirs.isEmpty()) {\n          throw new IOException(\"All the storage failed while writing \" +\n              \"properties to VERSION file\");\n        }\n      }\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NNStorage.java"
    }
  }
}