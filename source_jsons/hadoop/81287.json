{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "DomainSocketWatcher.java",
  "functionName": "kick",
  "functionId": "kick",
  "sourceFilePath": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/net/unix/DomainSocketWatcher.java",
  "functionStartLine": 359,
  "functionEndLine": 374,
  "numCommitsSeen": 15,
  "timeTaken": 1431,
  "changeHistory": [
    "86e3993def01223f92b8d1dd35f6c1f8ab6033f5",
    "687d83c9e10a4432c8d54c2cd406c7ccb4392187",
    "8099de259fb91a29674bf17cb1382c038b707a90",
    "dd049a2f6097da189ccce2f5890a2b9bc77fa73f",
    "140246bad816ae7bf06eda193cc624e1e62923e0"
  ],
  "changeHistoryShort": {
    "86e3993def01223f92b8d1dd35f6c1f8ab6033f5": "Ybodychange",
    "687d83c9e10a4432c8d54c2cd406c7ccb4392187": "Ybodychange",
    "8099de259fb91a29674bf17cb1382c038b707a90": "Ybodychange",
    "dd049a2f6097da189ccce2f5890a2b9bc77fa73f": "Ybodychange",
    "140246bad816ae7bf06eda193cc624e1e62923e0": "Yintroduced"
  },
  "changeHistoryDetails": {
    "86e3993def01223f92b8d1dd35f6c1f8ab6033f5": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-11333. Fix deadlock in DomainSocketWatcher when the notification pipe is full (zhaoyunjiong via cmccabe)\n",
      "commitDate": "01/12/14 11:42 AM",
      "commitName": "86e3993def01223f92b8d1dd35f6c1f8ab6033f5",
      "commitAuthor": "Colin Patrick Mccabe",
      "commitDateOld": "06/10/14 2:44 PM",
      "commitNameOld": "687d83c9e10a4432c8d54c2cd406c7ccb4392187",
      "commitAuthorOld": "Colin Patrick Mccabe",
      "daysBetweenCommits": 55.92,
      "commitsBetweenForRepo": 459,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,10 +1,16 @@\n   private void kick() {\n     assert(lock.isHeldByCurrentThread());\n+    \n+    if (kicked) {\n+      return;\n+    }\n+    \n     try {\n       notificationSockets[0].getOutputStream().write(0);\n+      kicked \u003d true;\n     } catch (IOException e) {\n       if (!closed) {\n         LOG.error(this + \": error writing to notificationSockets[0]\", e);\n       }\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void kick() {\n    assert(lock.isHeldByCurrentThread());\n    \n    if (kicked) {\n      return;\n    }\n    \n    try {\n      notificationSockets[0].getOutputStream().write(0);\n      kicked \u003d true;\n    } catch (IOException e) {\n      if (!closed) {\n        LOG.error(this + \": error writing to notificationSockets[0]\", e);\n      }\n    }\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/net/unix/DomainSocketWatcher.java",
      "extendedDetails": {}
    },
    "687d83c9e10a4432c8d54c2cd406c7ccb4392187": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-10404.  Commit correct version of patch (cmccabe)\n",
      "commitDate": "06/10/14 2:44 PM",
      "commitName": "687d83c9e10a4432c8d54c2cd406c7ccb4392187",
      "commitAuthor": "Colin Patrick Mccabe",
      "commitDateOld": "06/10/14 2:40 PM",
      "commitNameOld": "8099de259fb91a29674bf17cb1382c038b707a90",
      "commitAuthorOld": "Colin Patrick Mccabe",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,12 +1,10 @@\n   private void kick() {\n-    lock.lock();\n+    assert(lock.isHeldByCurrentThread());\n     try {\n       notificationSockets[0].getOutputStream().write(0);\n     } catch (IOException e) {\n       if (!closed) {\n         LOG.error(this + \": error writing to notificationSockets[0]\", e);\n       }\n-    } finally {\n-      lock.unlock();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void kick() {\n    assert(lock.isHeldByCurrentThread());\n    try {\n      notificationSockets[0].getOutputStream().write(0);\n    } catch (IOException e) {\n      if (!closed) {\n        LOG.error(this + \": error writing to notificationSockets[0]\", e);\n      }\n    }\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/net/unix/DomainSocketWatcher.java",
      "extendedDetails": {}
    },
    "8099de259fb91a29674bf17cb1382c038b707a90": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-10404. Some accesses to DomainSocketWatcher#closed are not protected by the lock (cmccabe)\n",
      "commitDate": "06/10/14 2:40 PM",
      "commitName": "8099de259fb91a29674bf17cb1382c038b707a90",
      "commitAuthor": "Colin Patrick Mccabe",
      "commitDateOld": "05/03/14 11:57 PM",
      "commitNameOld": "95e0f616b96371824e653e761f3188c06615fe35",
      "commitAuthorOld": "Colin McCabe",
      "daysBetweenCommits": 214.57,
      "commitsBetweenForRepo": 1712,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,9 +1,12 @@\n   private void kick() {\n+    lock.lock();\n     try {\n       notificationSockets[0].getOutputStream().write(0);\n     } catch (IOException e) {\n       if (!closed) {\n         LOG.error(this + \": error writing to notificationSockets[0]\", e);\n       }\n+    } finally {\n+      lock.unlock();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void kick() {\n    lock.lock();\n    try {\n      notificationSockets[0].getOutputStream().write(0);\n    } catch (IOException e) {\n      if (!closed) {\n        LOG.error(this + \": error writing to notificationSockets[0]\", e);\n      }\n    } finally {\n      lock.unlock();\n    }\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/net/unix/DomainSocketWatcher.java",
      "extendedDetails": {}
    },
    "dd049a2f6097da189ccce2f5890a2b9bc77fa73f": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-5950. The DFSClient and DataNode should use shared memory segments to communicate short-circuit information (cmccabe)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1573433 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "02/03/14 7:58 PM",
      "commitName": "dd049a2f6097da189ccce2f5890a2b9bc77fa73f",
      "commitAuthor": "Colin McCabe",
      "commitDateOld": "12/02/14 7:10 PM",
      "commitNameOld": "f0d64a078da7e932b9509734f75170e3e525e68c",
      "commitAuthorOld": "Colin McCabe",
      "daysBetweenCommits": 18.03,
      "commitsBetweenForRepo": 129,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,7 +1,9 @@\n   private void kick() {\n     try {\n       notificationSockets[0].getOutputStream().write(0);\n     } catch (IOException e) {\n-      LOG.error(this + \": error writing to notificationSockets[0]\", e);\n+      if (!closed) {\n+        LOG.error(this + \": error writing to notificationSockets[0]\", e);\n+      }\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void kick() {\n    try {\n      notificationSockets[0].getOutputStream().write(0);\n    } catch (IOException e) {\n      if (!closed) {\n        LOG.error(this + \": error writing to notificationSockets[0]\", e);\n      }\n    }\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/net/unix/DomainSocketWatcher.java",
      "extendedDetails": {}
    },
    "140246bad816ae7bf06eda193cc624e1e62923e0": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-5746.  Add ShortCircuitSharedMemorySegment (cmccabe)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1563362 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "31/01/14 6:25 PM",
      "commitName": "140246bad816ae7bf06eda193cc624e1e62923e0",
      "commitAuthor": "Colin McCabe",
      "diff": "@@ -0,0 +1,7 @@\n+  private void kick() {\n+    try {\n+      notificationSockets[0].getOutputStream().write(0);\n+    } catch (IOException e) {\n+      LOG.error(this + \": error writing to notificationSockets[0]\", e);\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private void kick() {\n    try {\n      notificationSockets[0].getOutputStream().write(0);\n    } catch (IOException e) {\n      LOG.error(this + \": error writing to notificationSockets[0]\", e);\n    }\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/net/unix/DomainSocketWatcher.java"
    }
  }
}