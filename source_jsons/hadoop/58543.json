{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "CommonNodeLabelsManager.java",
  "functionName": "serviceStart",
  "functionId": "serviceStart",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/nodelabels/CommonNodeLabelsManager.java",
  "functionStartLine": 264,
  "functionEndLine": 281,
  "numCommitsSeen": 42,
  "timeTaken": 1791,
  "changeHistory": [
    "b4078bd17b41fbfff5a5c0bca5bf903a327826a7",
    "8966d4217969eb71767ba83a3ff2b5bb38189b19",
    "e9c66e8fd2ccb658db2848e1ab911f1502de4de5",
    "db7f1653198b950e89567c06898d64f6b930a0ee"
  ],
  "changeHistoryShort": {
    "b4078bd17b41fbfff5a5c0bca5bf903a327826a7": "Ybodychange",
    "8966d4217969eb71767ba83a3ff2b5bb38189b19": "Ybodychange",
    "e9c66e8fd2ccb658db2848e1ab911f1502de4de5": "Ybodychange",
    "db7f1653198b950e89567c06898d64f6b930a0ee": "Yintroduced"
  },
  "changeHistoryDetails": {
    "b4078bd17b41fbfff5a5c0bca5bf903a327826a7": {
      "type": "Ybodychange",
      "commitMessage": "YARN-3971. Skip RMNodeLabelsManager#checkRemoveFromClusterNodeLabelsOfQueue on nodelabel recovery. (addendum patch). Contributed by Bibin A chundatt\n",
      "commitDate": "23/05/16 5:06 PM",
      "commitName": "b4078bd17b41fbfff5a5c0bca5bf903a327826a7",
      "commitAuthor": "Naganarasimha",
      "commitDateOld": "21/12/15 11:30 AM",
      "commitNameOld": "bc038b382cb2ce561ce718405fbcee4382f3b204",
      "commitAuthorOld": "Wangda Tan",
      "daysBetweenCommits": 154.19,
      "commitsBetweenForRepo": 965,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,18 @@\n   protected void serviceStart() throws Exception {\n     if (nodeLabelsEnabled) {\n+      setInitNodeLabelStoreInProgress(true);\n       initNodeLabelStore(getConfig());\n+      setInitNodeLabelStoreInProgress(false);\n     }\n     \n     // init dispatcher only when service start, because recover will happen in\n     // service init, we don\u0027t want to trigger any event handling at that time.\n     initDispatcher(getConfig());\n \n     if (null !\u003d dispatcher) {\n       dispatcher.register(NodeLabelsStoreEventType.class,\n           new ForwardingEventHandler());\n     }\n     \n     startDispatcher();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected void serviceStart() throws Exception {\n    if (nodeLabelsEnabled) {\n      setInitNodeLabelStoreInProgress(true);\n      initNodeLabelStore(getConfig());\n      setInitNodeLabelStoreInProgress(false);\n    }\n    \n    // init dispatcher only when service start, because recover will happen in\n    // service init, we don\u0027t want to trigger any event handling at that time.\n    initDispatcher(getConfig());\n\n    if (null !\u003d dispatcher) {\n      dispatcher.register(NodeLabelsStoreEventType.class,\n          new ForwardingEventHandler());\n    }\n    \n    startDispatcher();\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/nodelabels/CommonNodeLabelsManager.java",
      "extendedDetails": {}
    },
    "8966d4217969eb71767ba83a3ff2b5bb38189b19": {
      "type": "Ybodychange",
      "commitMessage": "YARN-3609. Load node labels from storage inside RM serviceStart. Contributed by Wangda Tan\n",
      "commitDate": "20/05/15 4:30 PM",
      "commitName": "8966d4217969eb71767ba83a3ff2b5bb38189b19",
      "commitAuthor": "Jian He",
      "commitDateOld": "19/05/15 4:34 PM",
      "commitNameOld": "b37da52a1c4fb3da2bd21bfadc5ec61c5f953a59",
      "commitAuthorOld": "Wangda Tan",
      "daysBetweenCommits": 1.0,
      "commitsBetweenForRepo": 7,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,12 +1,16 @@\n   protected void serviceStart() throws Exception {\n+    if (nodeLabelsEnabled) {\n+      initNodeLabelStore(getConfig());\n+    }\n+    \n     // init dispatcher only when service start, because recover will happen in\n     // service init, we don\u0027t want to trigger any event handling at that time.\n     initDispatcher(getConfig());\n \n     if (null !\u003d dispatcher) {\n       dispatcher.register(NodeLabelsStoreEventType.class,\n           new ForwardingEventHandler());\n     }\n     \n     startDispatcher();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected void serviceStart() throws Exception {\n    if (nodeLabelsEnabled) {\n      initNodeLabelStore(getConfig());\n    }\n    \n    // init dispatcher only when service start, because recover will happen in\n    // service init, we don\u0027t want to trigger any event handling at that time.\n    initDispatcher(getConfig());\n\n    if (null !\u003d dispatcher) {\n      dispatcher.register(NodeLabelsStoreEventType.class,\n          new ForwardingEventHandler());\n    }\n    \n    startDispatcher();\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/nodelabels/CommonNodeLabelsManager.java",
      "extendedDetails": {}
    },
    "e9c66e8fd2ccb658db2848e1ab911f1502de4de5": {
      "type": "Ybodychange",
      "commitMessage": "YARN-2705. Fixed bugs in ResourceManager node-label manager that were causing test-failures: added a dummy in-memory labels-manager. Contributed by Wangda Tan.\n",
      "commitDate": "17/10/14 6:26 PM",
      "commitName": "e9c66e8fd2ccb658db2848e1ab911f1502de4de5",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "17/10/14 8:58 AM",
      "commitNameOld": "abae63caf9c53b404f2f2db7d482555484eaeaf8",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 0.39,
      "commitsBetweenForRepo": 5,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,10 +1,12 @@\n   protected void serviceStart() throws Exception {\n     // init dispatcher only when service start, because recover will happen in\n     // service init, we don\u0027t want to trigger any event handling at that time.\n     initDispatcher(getConfig());\n \n-    dispatcher.register(NodeLabelsStoreEventType.class,\n-        new ForwardingEventHandler());\n-\n+    if (null !\u003d dispatcher) {\n+      dispatcher.register(NodeLabelsStoreEventType.class,\n+          new ForwardingEventHandler());\n+    }\n+    \n     startDispatcher();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected void serviceStart() throws Exception {\n    // init dispatcher only when service start, because recover will happen in\n    // service init, we don\u0027t want to trigger any event handling at that time.\n    initDispatcher(getConfig());\n\n    if (null !\u003d dispatcher) {\n      dispatcher.register(NodeLabelsStoreEventType.class,\n          new ForwardingEventHandler());\n    }\n    \n    startDispatcher();\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/nodelabels/CommonNodeLabelsManager.java",
      "extendedDetails": {}
    },
    "db7f1653198b950e89567c06898d64f6b930a0ee": {
      "type": "Yintroduced",
      "commitMessage": "YARN-2494. Added NodeLabels Manager internal API and implementation. Contributed by Wangda Tan.\n",
      "commitDate": "10/10/14 11:44 AM",
      "commitName": "db7f1653198b950e89567c06898d64f6b930a0ee",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "diff": "@@ -0,0 +1,10 @@\n+  protected void serviceStart() throws Exception {\n+    // init dispatcher only when service start, because recover will happen in\n+    // service init, we don\u0027t want to trigger any event handling at that time.\n+    initDispatcher(getConfig());\n+\n+    dispatcher.register(NodeLabelsStoreEventType.class,\n+        new ForwardingEventHandler());\n+\n+    startDispatcher();\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  protected void serviceStart() throws Exception {\n    // init dispatcher only when service start, because recover will happen in\n    // service init, we don\u0027t want to trigger any event handling at that time.\n    initDispatcher(getConfig());\n\n    dispatcher.register(NodeLabelsStoreEventType.class,\n        new ForwardingEventHandler());\n\n    startDispatcher();\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/nodelabels/CommonNodeLabelsManager.java"
    }
  }
}