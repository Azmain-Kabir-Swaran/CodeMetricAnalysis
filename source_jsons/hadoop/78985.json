{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "ChecksumFileSystem.java",
  "functionName": "openFileWithOptions",
  "functionId": "openFileWithOptions___path-Path(modifiers-final)__parameters-OpenFileParameters(modifiers-final)",
  "sourceFilePath": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/ChecksumFileSystem.java",
  "functionStartLine": 845,
  "functionEndLine": 855,
  "numCommitsSeen": 57,
  "timeTaken": 2482,
  "changeHistory": [
    "5e2ce370a322a46b496541ccd17443197fcfeb5a",
    "feccd282febb5fe5d043480ba989b6f045409efa"
  ],
  "changeHistoryShort": {
    "5e2ce370a322a46b496541ccd17443197fcfeb5a": "Ymultichange(Yparameterchange,Ybodychange)",
    "feccd282febb5fe5d043480ba989b6f045409efa": "Yintroduced"
  },
  "changeHistoryDetails": {
    "5e2ce370a322a46b496541ccd17443197fcfeb5a": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "HADOOP-16759. Filesystem openFile() builder to take a FileStatus param (#1761). Contributed by Steve Loughran\n\n* Enhanced builder + FS spec\r\n* s3a FS to use this to skip HEAD on open\r\n* and to use version/etag when opening the file\r\n\r\nworks with S3AFileStatus FS and S3ALocatedFileStatus",
      "commitDate": "21/01/20 2:31 PM",
      "commitName": "5e2ce370a322a46b496541ccd17443197fcfeb5a",
      "commitAuthor": "Steve Loughran",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HADOOP-16759. Filesystem openFile() builder to take a FileStatus param (#1761). Contributed by Steve Loughran\n\n* Enhanced builder + FS spec\r\n* s3a FS to use this to skip HEAD on open\r\n* and to use version/etag when opening the file\r\n\r\nworks with S3AFileStatus FS and S3ALocatedFileStatus",
          "commitDate": "21/01/20 2:31 PM",
          "commitName": "5e2ce370a322a46b496541ccd17443197fcfeb5a",
          "commitAuthor": "Steve Loughran",
          "commitDateOld": "25/09/19 4:16 AM",
          "commitNameOld": "e346e3638c595a512cd582739ff51fb64c3b4950",
          "commitAuthorOld": "Steve Loughran",
          "daysBetweenCommits": 118.47,
          "commitsBetweenForRepo": 504,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,11 +1,11 @@\n   protected CompletableFuture\u003cFSDataInputStream\u003e openFileWithOptions(\n       final Path path,\n-      final Set\u003cString\u003e mandatoryKeys,\n-      final Configuration options,\n-      final int bufferSize) throws IOException {\n-    AbstractFSBuilderImpl.rejectUnknownMandatoryKeys(mandatoryKeys,\n+      final OpenFileParameters parameters) throws IOException {\n+    AbstractFSBuilderImpl.rejectUnknownMandatoryKeys(\n+        parameters.getMandatoryKeys(),\n         Collections.emptySet(),\n         \"for \" + path);\n     return LambdaUtils.eval(\n-        new CompletableFuture\u003c\u003e(), () -\u003e open(path, bufferSize));\n+        new CompletableFuture\u003c\u003e(),\n+        () -\u003e open(path, parameters.getBufferSize()));\n   }\n\\ No newline at end of file\n",
          "actualSource": "  protected CompletableFuture\u003cFSDataInputStream\u003e openFileWithOptions(\n      final Path path,\n      final OpenFileParameters parameters) throws IOException {\n    AbstractFSBuilderImpl.rejectUnknownMandatoryKeys(\n        parameters.getMandatoryKeys(),\n        Collections.emptySet(),\n        \"for \" + path);\n    return LambdaUtils.eval(\n        new CompletableFuture\u003c\u003e(),\n        () -\u003e open(path, parameters.getBufferSize()));\n  }",
          "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/ChecksumFileSystem.java",
          "extendedDetails": {
            "oldValue": "[path-Path(modifiers-final), mandatoryKeys-Set\u003cString\u003e(modifiers-final), options-Configuration(modifiers-final), bufferSize-int(modifiers-final)]",
            "newValue": "[path-Path(modifiers-final), parameters-OpenFileParameters(modifiers-final)]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HADOOP-16759. Filesystem openFile() builder to take a FileStatus param (#1761). Contributed by Steve Loughran\n\n* Enhanced builder + FS spec\r\n* s3a FS to use this to skip HEAD on open\r\n* and to use version/etag when opening the file\r\n\r\nworks with S3AFileStatus FS and S3ALocatedFileStatus",
          "commitDate": "21/01/20 2:31 PM",
          "commitName": "5e2ce370a322a46b496541ccd17443197fcfeb5a",
          "commitAuthor": "Steve Loughran",
          "commitDateOld": "25/09/19 4:16 AM",
          "commitNameOld": "e346e3638c595a512cd582739ff51fb64c3b4950",
          "commitAuthorOld": "Steve Loughran",
          "daysBetweenCommits": 118.47,
          "commitsBetweenForRepo": 504,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,11 +1,11 @@\n   protected CompletableFuture\u003cFSDataInputStream\u003e openFileWithOptions(\n       final Path path,\n-      final Set\u003cString\u003e mandatoryKeys,\n-      final Configuration options,\n-      final int bufferSize) throws IOException {\n-    AbstractFSBuilderImpl.rejectUnknownMandatoryKeys(mandatoryKeys,\n+      final OpenFileParameters parameters) throws IOException {\n+    AbstractFSBuilderImpl.rejectUnknownMandatoryKeys(\n+        parameters.getMandatoryKeys(),\n         Collections.emptySet(),\n         \"for \" + path);\n     return LambdaUtils.eval(\n-        new CompletableFuture\u003c\u003e(), () -\u003e open(path, bufferSize));\n+        new CompletableFuture\u003c\u003e(),\n+        () -\u003e open(path, parameters.getBufferSize()));\n   }\n\\ No newline at end of file\n",
          "actualSource": "  protected CompletableFuture\u003cFSDataInputStream\u003e openFileWithOptions(\n      final Path path,\n      final OpenFileParameters parameters) throws IOException {\n    AbstractFSBuilderImpl.rejectUnknownMandatoryKeys(\n        parameters.getMandatoryKeys(),\n        Collections.emptySet(),\n        \"for \" + path);\n    return LambdaUtils.eval(\n        new CompletableFuture\u003c\u003e(),\n        () -\u003e open(path, parameters.getBufferSize()));\n  }",
          "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/ChecksumFileSystem.java",
          "extendedDetails": {}
        }
      ]
    },
    "feccd282febb5fe5d043480ba989b6f045409efa": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-16107.  Update ChecksumFileSystem createFile/openFile API to generate checksum.\n               Contributed by Steve Loughran\n",
      "commitDate": "27/02/19 12:53 PM",
      "commitName": "feccd282febb5fe5d043480ba989b6f045409efa",
      "commitAuthor": "Eric Yang",
      "diff": "@@ -0,0 +1,11 @@\n+  protected CompletableFuture\u003cFSDataInputStream\u003e openFileWithOptions(\n+      final Path path,\n+      final Set\u003cString\u003e mandatoryKeys,\n+      final Configuration options,\n+      final int bufferSize) throws IOException {\n+    AbstractFSBuilderImpl.rejectUnknownMandatoryKeys(mandatoryKeys,\n+        Collections.emptySet(),\n+        \"for \" + path);\n+    return LambdaUtils.eval(\n+        new CompletableFuture\u003c\u003e(), () -\u003e open(path, bufferSize));\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  protected CompletableFuture\u003cFSDataInputStream\u003e openFileWithOptions(\n      final Path path,\n      final Set\u003cString\u003e mandatoryKeys,\n      final Configuration options,\n      final int bufferSize) throws IOException {\n    AbstractFSBuilderImpl.rejectUnknownMandatoryKeys(mandatoryKeys,\n        Collections.emptySet(),\n        \"for \" + path);\n    return LambdaUtils.eval(\n        new CompletableFuture\u003c\u003e(), () -\u003e open(path, bufferSize));\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/ChecksumFileSystem.java"
    }
  }
}