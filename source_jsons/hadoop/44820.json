{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "ClusterCLI.java",
  "functionName": "run",
  "functionId": "run___args-String[]",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client/src/main/java/org/apache/hadoop/yarn/client/cli/ClusterCLI.java",
  "functionStartLine": 71,
  "functionEndLine": 121,
  "numCommitsSeen": 6,
  "timeTaken": 1540,
  "changeHistory": [
    "7dc272199ffea28c8597151e17d4606928a7f9f3",
    "eb08543c7a5d1fd97a1915dbc5a11a2ba2066ba1",
    "cab7674e54c4fe56838668462de99a6787841309",
    "138c9cadee32da4d17be9835461bde646825d8d5"
  ],
  "changeHistoryShort": {
    "7dc272199ffea28c8597151e17d4606928a7f9f3": "Ybodychange",
    "eb08543c7a5d1fd97a1915dbc5a11a2ba2066ba1": "Ybodychange",
    "cab7674e54c4fe56838668462de99a6787841309": "Ybodychange",
    "138c9cadee32da4d17be9835461bde646825d8d5": "Yintroduced"
  },
  "changeHistoryDetails": {
    "7dc272199ffea28c8597151e17d4606928a7f9f3": {
      "type": "Ybodychange",
      "commitMessage": "YARN-9034. ApplicationCLI should have option to take clusterId. Contributed by Rohith Sharma K S.\n",
      "commitDate": "28/11/18 12:42 AM",
      "commitName": "7dc272199ffea28c8597151e17d4606928a7f9f3",
      "commitAuthor": "Suma Shivaprasad",
      "commitDateOld": "12/09/18 3:31 AM",
      "commitNameOld": "eb08543c7a5d1fd97a1915dbc5a11a2ba2066ba1",
      "commitAuthorOld": "Naganarasimha",
      "daysBetweenCommits": 76.92,
      "commitsBetweenForRepo": 699,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,49 +1,51 @@\n   public int run(String[] args) throws Exception {    \n     Options opts \u003d new Options();\n \n     opts.addOption(\"lnl\", LIST_LABELS_CMD, false,\n         \"List cluster node-label collection\");\n     opts.addOption(\"lna\", LIST_CLUSTER_ATTRIBUTES, false,\n         \"List cluster node-attribute collection\");\n     opts.addOption(\"h\", HELP_CMD, false, \"Displays help for all commands.\");\n     opts.addOption(\"dnl\", DIRECTLY_ACCESS_NODE_LABEL_STORE, false,\n         \"This is DEPRECATED, will be removed in future releases. Directly access node label store, \"\n             + \"with this option, all node label related operations\"\n             + \" will NOT connect RM. Instead, they will\"\n             + \" access/modify stored node labels directly.\"\n             + \" By default, it is false (access via RM).\"\n             + \" AND PLEASE NOTE: if you configured \"\n             + YarnConfiguration.FS_NODE_LABELS_STORE_ROOT_DIR\n             + \" to a local directory\"\n             + \" (instead of NFS or HDFS), this option will only work\"\n             + \" when the command run on the machine where RM is running.\"\n             + \" Also, this option is UNSTABLE, could be removed in future\"\n             + \" releases.\");\n \n     int exitCode \u003d -1;\n     CommandLine parsedCli \u003d null;\n     try {\n       parsedCli \u003d new GnuParser().parse(opts, args);\n     } catch (MissingArgumentException ex) {\n       sysout.println(\"Missing argument for options\");\n       printUsage(opts);\n       return exitCode;\n     }\n \n+    createAndStartYarnClient();\n+\n     if (parsedCli.hasOption(DIRECTLY_ACCESS_NODE_LABEL_STORE)) {\n       accessLocal \u003d true;\n     }\n \n     if (parsedCli.hasOption(LIST_LABELS_CMD)) {\n       printClusterNodeLabels();\n     } else if(parsedCli.hasOption(LIST_CLUSTER_ATTRIBUTES)){\n       printClusterNodeAttributes();\n     } else if (parsedCli.hasOption(HELP_CMD)) {\n       printUsage(opts);\n       return 0;\n     } else {\n       syserr.println(\"Invalid Command Usage : \");\n       printUsage(opts);\n     }\n     return 0;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public int run(String[] args) throws Exception {    \n    Options opts \u003d new Options();\n\n    opts.addOption(\"lnl\", LIST_LABELS_CMD, false,\n        \"List cluster node-label collection\");\n    opts.addOption(\"lna\", LIST_CLUSTER_ATTRIBUTES, false,\n        \"List cluster node-attribute collection\");\n    opts.addOption(\"h\", HELP_CMD, false, \"Displays help for all commands.\");\n    opts.addOption(\"dnl\", DIRECTLY_ACCESS_NODE_LABEL_STORE, false,\n        \"This is DEPRECATED, will be removed in future releases. Directly access node label store, \"\n            + \"with this option, all node label related operations\"\n            + \" will NOT connect RM. Instead, they will\"\n            + \" access/modify stored node labels directly.\"\n            + \" By default, it is false (access via RM).\"\n            + \" AND PLEASE NOTE: if you configured \"\n            + YarnConfiguration.FS_NODE_LABELS_STORE_ROOT_DIR\n            + \" to a local directory\"\n            + \" (instead of NFS or HDFS), this option will only work\"\n            + \" when the command run on the machine where RM is running.\"\n            + \" Also, this option is UNSTABLE, could be removed in future\"\n            + \" releases.\");\n\n    int exitCode \u003d -1;\n    CommandLine parsedCli \u003d null;\n    try {\n      parsedCli \u003d new GnuParser().parse(opts, args);\n    } catch (MissingArgumentException ex) {\n      sysout.println(\"Missing argument for options\");\n      printUsage(opts);\n      return exitCode;\n    }\n\n    createAndStartYarnClient();\n\n    if (parsedCli.hasOption(DIRECTLY_ACCESS_NODE_LABEL_STORE)) {\n      accessLocal \u003d true;\n    }\n\n    if (parsedCli.hasOption(LIST_LABELS_CMD)) {\n      printClusterNodeLabels();\n    } else if(parsedCli.hasOption(LIST_CLUSTER_ATTRIBUTES)){\n      printClusterNodeAttributes();\n    } else if (parsedCli.hasOption(HELP_CMD)) {\n      printUsage(opts);\n      return 0;\n    } else {\n      syserr.println(\"Invalid Command Usage : \");\n      printUsage(opts);\n    }\n    return 0;\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client/src/main/java/org/apache/hadoop/yarn/client/cli/ClusterCLI.java",
      "extendedDetails": {}
    },
    "eb08543c7a5d1fd97a1915dbc5a11a2ba2066ba1": {
      "type": "Ybodychange",
      "commitMessage": "YARN-8103. Add CLI interface to query node attributes. Contributed by Bibin A Chundatt.\n",
      "commitDate": "12/09/18 3:31 AM",
      "commitName": "eb08543c7a5d1fd97a1915dbc5a11a2ba2066ba1",
      "commitAuthor": "Naganarasimha",
      "commitDateOld": "12/06/18 8:35 AM",
      "commitNameOld": "652bcbb3e4950758e61ce123ecc1798ae2b60a7f",
      "commitAuthorOld": "Akira Ajisaka",
      "daysBetweenCommits": 91.79,
      "commitsBetweenForRepo": 656,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,45 +1,49 @@\n   public int run(String[] args) throws Exception {    \n     Options opts \u003d new Options();\n \n     opts.addOption(\"lnl\", LIST_LABELS_CMD, false,\n         \"List cluster node-label collection\");\n+    opts.addOption(\"lna\", LIST_CLUSTER_ATTRIBUTES, false,\n+        \"List cluster node-attribute collection\");\n     opts.addOption(\"h\", HELP_CMD, false, \"Displays help for all commands.\");\n     opts.addOption(\"dnl\", DIRECTLY_ACCESS_NODE_LABEL_STORE, false,\n         \"This is DEPRECATED, will be removed in future releases. Directly access node label store, \"\n             + \"with this option, all node label related operations\"\n             + \" will NOT connect RM. Instead, they will\"\n             + \" access/modify stored node labels directly.\"\n             + \" By default, it is false (access via RM).\"\n             + \" AND PLEASE NOTE: if you configured \"\n             + YarnConfiguration.FS_NODE_LABELS_STORE_ROOT_DIR\n             + \" to a local directory\"\n             + \" (instead of NFS or HDFS), this option will only work\"\n             + \" when the command run on the machine where RM is running.\"\n             + \" Also, this option is UNSTABLE, could be removed in future\"\n             + \" releases.\");\n \n     int exitCode \u003d -1;\n     CommandLine parsedCli \u003d null;\n     try {\n       parsedCli \u003d new GnuParser().parse(opts, args);\n     } catch (MissingArgumentException ex) {\n       sysout.println(\"Missing argument for options\");\n       printUsage(opts);\n       return exitCode;\n     }\n \n     if (parsedCli.hasOption(DIRECTLY_ACCESS_NODE_LABEL_STORE)) {\n       accessLocal \u003d true;\n     }\n \n     if (parsedCli.hasOption(LIST_LABELS_CMD)) {\n       printClusterNodeLabels();\n+    } else if(parsedCli.hasOption(LIST_CLUSTER_ATTRIBUTES)){\n+      printClusterNodeAttributes();\n     } else if (parsedCli.hasOption(HELP_CMD)) {\n       printUsage(opts);\n       return 0;\n     } else {\n       syserr.println(\"Invalid Command Usage : \");\n       printUsage(opts);\n     }\n     return 0;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public int run(String[] args) throws Exception {    \n    Options opts \u003d new Options();\n\n    opts.addOption(\"lnl\", LIST_LABELS_CMD, false,\n        \"List cluster node-label collection\");\n    opts.addOption(\"lna\", LIST_CLUSTER_ATTRIBUTES, false,\n        \"List cluster node-attribute collection\");\n    opts.addOption(\"h\", HELP_CMD, false, \"Displays help for all commands.\");\n    opts.addOption(\"dnl\", DIRECTLY_ACCESS_NODE_LABEL_STORE, false,\n        \"This is DEPRECATED, will be removed in future releases. Directly access node label store, \"\n            + \"with this option, all node label related operations\"\n            + \" will NOT connect RM. Instead, they will\"\n            + \" access/modify stored node labels directly.\"\n            + \" By default, it is false (access via RM).\"\n            + \" AND PLEASE NOTE: if you configured \"\n            + YarnConfiguration.FS_NODE_LABELS_STORE_ROOT_DIR\n            + \" to a local directory\"\n            + \" (instead of NFS or HDFS), this option will only work\"\n            + \" when the command run on the machine where RM is running.\"\n            + \" Also, this option is UNSTABLE, could be removed in future\"\n            + \" releases.\");\n\n    int exitCode \u003d -1;\n    CommandLine parsedCli \u003d null;\n    try {\n      parsedCli \u003d new GnuParser().parse(opts, args);\n    } catch (MissingArgumentException ex) {\n      sysout.println(\"Missing argument for options\");\n      printUsage(opts);\n      return exitCode;\n    }\n\n    if (parsedCli.hasOption(DIRECTLY_ACCESS_NODE_LABEL_STORE)) {\n      accessLocal \u003d true;\n    }\n\n    if (parsedCli.hasOption(LIST_LABELS_CMD)) {\n      printClusterNodeLabels();\n    } else if(parsedCli.hasOption(LIST_CLUSTER_ATTRIBUTES)){\n      printClusterNodeAttributes();\n    } else if (parsedCli.hasOption(HELP_CMD)) {\n      printUsage(opts);\n      return 0;\n    } else {\n      syserr.println(\"Invalid Command Usage : \");\n      printUsage(opts);\n    }\n    return 0;\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client/src/main/java/org/apache/hadoop/yarn/client/cli/ClusterCLI.java",
      "extendedDetails": {}
    },
    "cab7674e54c4fe56838668462de99a6787841309": {
      "type": "Ybodychange",
      "commitMessage": "YARN-3581. Deprecate -directlyAccessNodeLabelStore in RMAdminCLI. (Naganarasimha G R via wangda)\n",
      "commitDate": "27/05/15 3:34 PM",
      "commitName": "cab7674e54c4fe56838668462de99a6787841309",
      "commitAuthor": "Wangda Tan",
      "commitDateOld": "23/04/15 11:19 AM",
      "commitNameOld": "f5fe35e297ed4a00a1ba93d090207ef67cebcc9d",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 34.18,
      "commitsBetweenForRepo": 359,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,45 +1,45 @@\n   public int run(String[] args) throws Exception {    \n     Options opts \u003d new Options();\n \n     opts.addOption(\"lnl\", LIST_LABELS_CMD, false,\n         \"List cluster node-label collection\");\n     opts.addOption(\"h\", HELP_CMD, false, \"Displays help for all commands.\");\n     opts.addOption(\"dnl\", DIRECTLY_ACCESS_NODE_LABEL_STORE, false,\n-        \"Directly access node label store, \"\n+        \"This is DEPRECATED, will be removed in future releases. Directly access node label store, \"\n             + \"with this option, all node label related operations\"\n             + \" will NOT connect RM. Instead, they will\"\n             + \" access/modify stored node labels directly.\"\n             + \" By default, it is false (access via RM).\"\n             + \" AND PLEASE NOTE: if you configured \"\n             + YarnConfiguration.FS_NODE_LABELS_STORE_ROOT_DIR\n             + \" to a local directory\"\n             + \" (instead of NFS or HDFS), this option will only work\"\n             + \" when the command run on the machine where RM is running.\"\n             + \" Also, this option is UNSTABLE, could be removed in future\"\n             + \" releases.\");\n \n     int exitCode \u003d -1;\n     CommandLine parsedCli \u003d null;\n     try {\n       parsedCli \u003d new GnuParser().parse(opts, args);\n     } catch (MissingArgumentException ex) {\n       sysout.println(\"Missing argument for options\");\n       printUsage(opts);\n       return exitCode;\n     }\n \n     if (parsedCli.hasOption(DIRECTLY_ACCESS_NODE_LABEL_STORE)) {\n       accessLocal \u003d true;\n     }\n \n     if (parsedCli.hasOption(LIST_LABELS_CMD)) {\n       printClusterNodeLabels();\n     } else if (parsedCli.hasOption(HELP_CMD)) {\n       printUsage(opts);\n       return 0;\n     } else {\n       syserr.println(\"Invalid Command Usage : \");\n       printUsage(opts);\n     }\n     return 0;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public int run(String[] args) throws Exception {    \n    Options opts \u003d new Options();\n\n    opts.addOption(\"lnl\", LIST_LABELS_CMD, false,\n        \"List cluster node-label collection\");\n    opts.addOption(\"h\", HELP_CMD, false, \"Displays help for all commands.\");\n    opts.addOption(\"dnl\", DIRECTLY_ACCESS_NODE_LABEL_STORE, false,\n        \"This is DEPRECATED, will be removed in future releases. Directly access node label store, \"\n            + \"with this option, all node label related operations\"\n            + \" will NOT connect RM. Instead, they will\"\n            + \" access/modify stored node labels directly.\"\n            + \" By default, it is false (access via RM).\"\n            + \" AND PLEASE NOTE: if you configured \"\n            + YarnConfiguration.FS_NODE_LABELS_STORE_ROOT_DIR\n            + \" to a local directory\"\n            + \" (instead of NFS or HDFS), this option will only work\"\n            + \" when the command run on the machine where RM is running.\"\n            + \" Also, this option is UNSTABLE, could be removed in future\"\n            + \" releases.\");\n\n    int exitCode \u003d -1;\n    CommandLine parsedCli \u003d null;\n    try {\n      parsedCli \u003d new GnuParser().parse(opts, args);\n    } catch (MissingArgumentException ex) {\n      sysout.println(\"Missing argument for options\");\n      printUsage(opts);\n      return exitCode;\n    }\n\n    if (parsedCli.hasOption(DIRECTLY_ACCESS_NODE_LABEL_STORE)) {\n      accessLocal \u003d true;\n    }\n\n    if (parsedCli.hasOption(LIST_LABELS_CMD)) {\n      printClusterNodeLabels();\n    } else if (parsedCli.hasOption(HELP_CMD)) {\n      printUsage(opts);\n      return 0;\n    } else {\n      syserr.println(\"Invalid Command Usage : \");\n      printUsage(opts);\n    }\n    return 0;\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client/src/main/java/org/apache/hadoop/yarn/client/cli/ClusterCLI.java",
      "extendedDetails": {}
    },
    "138c9cadee32da4d17be9835461bde646825d8d5": {
      "type": "Yintroduced",
      "commitMessage": "YARN-2786. Created a yarn cluster CLI and seeded with one command for listing node-labels collection. Contributed by Wangda Tan.\n",
      "commitDate": "05/03/15 10:54 AM",
      "commitName": "138c9cadee32da4d17be9835461bde646825d8d5",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "diff": "@@ -0,0 +1,45 @@\n+  public int run(String[] args) throws Exception {    \n+    Options opts \u003d new Options();\n+\n+    opts.addOption(\"lnl\", LIST_LABELS_CMD, false,\n+        \"List cluster node-label collection\");\n+    opts.addOption(\"h\", HELP_CMD, false, \"Displays help for all commands.\");\n+    opts.addOption(\"dnl\", DIRECTLY_ACCESS_NODE_LABEL_STORE, false,\n+        \"Directly access node label store, \"\n+            + \"with this option, all node label related operations\"\n+            + \" will NOT connect RM. Instead, they will\"\n+            + \" access/modify stored node labels directly.\"\n+            + \" By default, it is false (access via RM).\"\n+            + \" AND PLEASE NOTE: if you configured \"\n+            + YarnConfiguration.FS_NODE_LABELS_STORE_ROOT_DIR\n+            + \" to a local directory\"\n+            + \" (instead of NFS or HDFS), this option will only work\"\n+            + \" when the command run on the machine where RM is running.\"\n+            + \" Also, this option is UNSTABLE, could be removed in future\"\n+            + \" releases.\");\n+\n+    int exitCode \u003d -1;\n+    CommandLine parsedCli \u003d null;\n+    try {\n+      parsedCli \u003d new GnuParser().parse(opts, args);\n+    } catch (MissingArgumentException ex) {\n+      sysout.println(\"Missing argument for options\");\n+      printUsage(opts);\n+      return exitCode;\n+    }\n+\n+    if (parsedCli.hasOption(DIRECTLY_ACCESS_NODE_LABEL_STORE)) {\n+      accessLocal \u003d true;\n+    }\n+\n+    if (parsedCli.hasOption(LIST_LABELS_CMD)) {\n+      printClusterNodeLabels();\n+    } else if (parsedCli.hasOption(HELP_CMD)) {\n+      printUsage(opts);\n+      return 0;\n+    } else {\n+      syserr.println(\"Invalid Command Usage : \");\n+      printUsage(opts);\n+    }\n+    return 0;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public int run(String[] args) throws Exception {    \n    Options opts \u003d new Options();\n\n    opts.addOption(\"lnl\", LIST_LABELS_CMD, false,\n        \"List cluster node-label collection\");\n    opts.addOption(\"h\", HELP_CMD, false, \"Displays help for all commands.\");\n    opts.addOption(\"dnl\", DIRECTLY_ACCESS_NODE_LABEL_STORE, false,\n        \"Directly access node label store, \"\n            + \"with this option, all node label related operations\"\n            + \" will NOT connect RM. Instead, they will\"\n            + \" access/modify stored node labels directly.\"\n            + \" By default, it is false (access via RM).\"\n            + \" AND PLEASE NOTE: if you configured \"\n            + YarnConfiguration.FS_NODE_LABELS_STORE_ROOT_DIR\n            + \" to a local directory\"\n            + \" (instead of NFS or HDFS), this option will only work\"\n            + \" when the command run on the machine where RM is running.\"\n            + \" Also, this option is UNSTABLE, could be removed in future\"\n            + \" releases.\");\n\n    int exitCode \u003d -1;\n    CommandLine parsedCli \u003d null;\n    try {\n      parsedCli \u003d new GnuParser().parse(opts, args);\n    } catch (MissingArgumentException ex) {\n      sysout.println(\"Missing argument for options\");\n      printUsage(opts);\n      return exitCode;\n    }\n\n    if (parsedCli.hasOption(DIRECTLY_ACCESS_NODE_LABEL_STORE)) {\n      accessLocal \u003d true;\n    }\n\n    if (parsedCli.hasOption(LIST_LABELS_CMD)) {\n      printClusterNodeLabels();\n    } else if (parsedCli.hasOption(HELP_CMD)) {\n      printUsage(opts);\n      return 0;\n    } else {\n      syserr.println(\"Invalid Command Usage : \");\n      printUsage(opts);\n    }\n    return 0;\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client/src/main/java/org/apache/hadoop/yarn/client/cli/ClusterCLI.java"
    }
  }
}