{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "FSDirErasureCodingOp.java",
  "functionName": "disableErasureCodingPolicy",
  "functionId": "disableErasureCodingPolicy___fsn-FSNamesystem(modifiers-final)__ecPolicyName-String__logRetryCache-boolean(modifiers-final)",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirErasureCodingOp.java",
  "functionStartLine": 302,
  "functionEndLine": 312,
  "numCommitsSeen": 71,
  "timeTaken": 4166,
  "changeHistory": [
    "770d9d9bb686bacef601ec8c4f884dc5afa9d4e2",
    "08d996d3e9265efad737efad50cbc5b10a0202f8",
    "f99b6d19de77c6e730fed8444f8848a7e63d6130"
  ],
  "changeHistoryShort": {
    "770d9d9bb686bacef601ec8c4f884dc5afa9d4e2": "Ymultichange(Yreturntypechange,Ybodychange)",
    "08d996d3e9265efad737efad50cbc5b10a0202f8": "Ymultichange(Yrename,Yparameterchange,Ybodychange)",
    "f99b6d19de77c6e730fed8444f8848a7e63d6130": "Yintroduced"
  },
  "changeHistoryDetails": {
    "770d9d9bb686bacef601ec8c4f884dc5afa9d4e2": {
      "type": "Ymultichange(Yreturntypechange,Ybodychange)",
      "commitMessage": "HDFS-13772. Erasure coding: Unnecessary NameNode Logs displaying for Enabling/Disabling Erasure coding policies which are already enabled/disabled. Contributed by Ayush Saxena\n",
      "commitDate": "20/08/18 9:03 PM",
      "commitName": "770d9d9bb686bacef601ec8c4f884dc5afa9d4e2",
      "commitAuthor": "Vinayakumar B",
      "subchanges": [
        {
          "type": "Yreturntypechange",
          "commitMessage": "HDFS-13772. Erasure coding: Unnecessary NameNode Logs displaying for Enabling/Disabling Erasure coding policies which are already enabled/disabled. Contributed by Ayush Saxena\n",
          "commitDate": "20/08/18 9:03 PM",
          "commitName": "770d9d9bb686bacef601ec8c4f884dc5afa9d4e2",
          "commitAuthor": "Vinayakumar B",
          "commitDateOld": "18/06/18 10:17 AM",
          "commitNameOld": "fba9d7cd746cd7b659d2fd9d2bfa23266be9009b",
          "commitAuthorOld": "Akira Ajisaka",
          "daysBetweenCommits": 63.45,
          "commitsBetweenForRepo": 454,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,6 +1,11 @@\n-  static void disableErasureCodingPolicy(final FSNamesystem fsn,\n+  static boolean disableErasureCodingPolicy(final FSNamesystem fsn,\n       String ecPolicyName, final boolean logRetryCache) throws IOException {\n     Preconditions.checkNotNull(ecPolicyName);\n-    fsn.getErasureCodingPolicyManager().disablePolicy(ecPolicyName);\n-    fsn.getEditLog().logDisableErasureCodingPolicy(ecPolicyName, logRetryCache);\n+    boolean success \u003d\n+        fsn.getErasureCodingPolicyManager().disablePolicy(ecPolicyName);\n+    if (success) {\n+      fsn.getEditLog().logDisableErasureCodingPolicy(ecPolicyName,\n+          logRetryCache);\n+    }\n+    return success;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  static boolean disableErasureCodingPolicy(final FSNamesystem fsn,\n      String ecPolicyName, final boolean logRetryCache) throws IOException {\n    Preconditions.checkNotNull(ecPolicyName);\n    boolean success \u003d\n        fsn.getErasureCodingPolicyManager().disablePolicy(ecPolicyName);\n    if (success) {\n      fsn.getEditLog().logDisableErasureCodingPolicy(ecPolicyName,\n          logRetryCache);\n    }\n    return success;\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirErasureCodingOp.java",
          "extendedDetails": {
            "oldValue": "void",
            "newValue": "boolean"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-13772. Erasure coding: Unnecessary NameNode Logs displaying for Enabling/Disabling Erasure coding policies which are already enabled/disabled. Contributed by Ayush Saxena\n",
          "commitDate": "20/08/18 9:03 PM",
          "commitName": "770d9d9bb686bacef601ec8c4f884dc5afa9d4e2",
          "commitAuthor": "Vinayakumar B",
          "commitDateOld": "18/06/18 10:17 AM",
          "commitNameOld": "fba9d7cd746cd7b659d2fd9d2bfa23266be9009b",
          "commitAuthorOld": "Akira Ajisaka",
          "daysBetweenCommits": 63.45,
          "commitsBetweenForRepo": 454,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,6 +1,11 @@\n-  static void disableErasureCodingPolicy(final FSNamesystem fsn,\n+  static boolean disableErasureCodingPolicy(final FSNamesystem fsn,\n       String ecPolicyName, final boolean logRetryCache) throws IOException {\n     Preconditions.checkNotNull(ecPolicyName);\n-    fsn.getErasureCodingPolicyManager().disablePolicy(ecPolicyName);\n-    fsn.getEditLog().logDisableErasureCodingPolicy(ecPolicyName, logRetryCache);\n+    boolean success \u003d\n+        fsn.getErasureCodingPolicyManager().disablePolicy(ecPolicyName);\n+    if (success) {\n+      fsn.getEditLog().logDisableErasureCodingPolicy(ecPolicyName,\n+          logRetryCache);\n+    }\n+    return success;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  static boolean disableErasureCodingPolicy(final FSNamesystem fsn,\n      String ecPolicyName, final boolean logRetryCache) throws IOException {\n    Preconditions.checkNotNull(ecPolicyName);\n    boolean success \u003d\n        fsn.getErasureCodingPolicyManager().disablePolicy(ecPolicyName);\n    if (success) {\n      fsn.getEditLog().logDisableErasureCodingPolicy(ecPolicyName,\n          logRetryCache);\n    }\n    return success;\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirErasureCodingOp.java",
          "extendedDetails": {}
        }
      ]
    },
    "08d996d3e9265efad737efad50cbc5b10a0202f8": {
      "type": "Ymultichange(Yrename,Yparameterchange,Ybodychange)",
      "commitMessage": "HDFS-12395. Support erasure coding policy operations in namenode edit log. Contributed by Sammi Chen\n",
      "commitDate": "14/09/17 6:43 PM",
      "commitName": "08d996d3e9265efad737efad50cbc5b10a0202f8",
      "commitAuthor": "Kai Zheng",
      "subchanges": [
        {
          "type": "Yrename",
          "commitMessage": "HDFS-12395. Support erasure coding policy operations in namenode edit log. Contributed by Sammi Chen\n",
          "commitDate": "14/09/17 6:43 PM",
          "commitName": "08d996d3e9265efad737efad50cbc5b10a0202f8",
          "commitAuthor": "Kai Zheng",
          "commitDateOld": "13/09/17 6:15 PM",
          "commitNameOld": "e0b3c644e186d89138d4174efe0cbe77a0200315",
          "commitAuthorOld": "ChenSammi",
          "daysBetweenCommits": 1.02,
          "commitsBetweenForRepo": 15,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,5 +1,6 @@\n-  static void disableErasureCodePolicy(final FSNamesystem fsn,\n-      String ecPolicyName) throws IOException {\n+  static void disableErasureCodingPolicy(final FSNamesystem fsn,\n+      String ecPolicyName, final boolean logRetryCache) throws IOException {\n     Preconditions.checkNotNull(ecPolicyName);\n     fsn.getErasureCodingPolicyManager().disablePolicy(ecPolicyName);\n+    fsn.getEditLog().logDisableErasureCodingPolicy(ecPolicyName, logRetryCache);\n   }\n\\ No newline at end of file\n",
          "actualSource": "  static void disableErasureCodingPolicy(final FSNamesystem fsn,\n      String ecPolicyName, final boolean logRetryCache) throws IOException {\n    Preconditions.checkNotNull(ecPolicyName);\n    fsn.getErasureCodingPolicyManager().disablePolicy(ecPolicyName);\n    fsn.getEditLog().logDisableErasureCodingPolicy(ecPolicyName, logRetryCache);\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirErasureCodingOp.java",
          "extendedDetails": {
            "oldValue": "disableErasureCodePolicy",
            "newValue": "disableErasureCodingPolicy"
          }
        },
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-12395. Support erasure coding policy operations in namenode edit log. Contributed by Sammi Chen\n",
          "commitDate": "14/09/17 6:43 PM",
          "commitName": "08d996d3e9265efad737efad50cbc5b10a0202f8",
          "commitAuthor": "Kai Zheng",
          "commitDateOld": "13/09/17 6:15 PM",
          "commitNameOld": "e0b3c644e186d89138d4174efe0cbe77a0200315",
          "commitAuthorOld": "ChenSammi",
          "daysBetweenCommits": 1.02,
          "commitsBetweenForRepo": 15,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,5 +1,6 @@\n-  static void disableErasureCodePolicy(final FSNamesystem fsn,\n-      String ecPolicyName) throws IOException {\n+  static void disableErasureCodingPolicy(final FSNamesystem fsn,\n+      String ecPolicyName, final boolean logRetryCache) throws IOException {\n     Preconditions.checkNotNull(ecPolicyName);\n     fsn.getErasureCodingPolicyManager().disablePolicy(ecPolicyName);\n+    fsn.getEditLog().logDisableErasureCodingPolicy(ecPolicyName, logRetryCache);\n   }\n\\ No newline at end of file\n",
          "actualSource": "  static void disableErasureCodingPolicy(final FSNamesystem fsn,\n      String ecPolicyName, final boolean logRetryCache) throws IOException {\n    Preconditions.checkNotNull(ecPolicyName);\n    fsn.getErasureCodingPolicyManager().disablePolicy(ecPolicyName);\n    fsn.getEditLog().logDisableErasureCodingPolicy(ecPolicyName, logRetryCache);\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirErasureCodingOp.java",
          "extendedDetails": {
            "oldValue": "[fsn-FSNamesystem(modifiers-final), ecPolicyName-String]",
            "newValue": "[fsn-FSNamesystem(modifiers-final), ecPolicyName-String, logRetryCache-boolean(modifiers-final)]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-12395. Support erasure coding policy operations in namenode edit log. Contributed by Sammi Chen\n",
          "commitDate": "14/09/17 6:43 PM",
          "commitName": "08d996d3e9265efad737efad50cbc5b10a0202f8",
          "commitAuthor": "Kai Zheng",
          "commitDateOld": "13/09/17 6:15 PM",
          "commitNameOld": "e0b3c644e186d89138d4174efe0cbe77a0200315",
          "commitAuthorOld": "ChenSammi",
          "daysBetweenCommits": 1.02,
          "commitsBetweenForRepo": 15,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,5 +1,6 @@\n-  static void disableErasureCodePolicy(final FSNamesystem fsn,\n-      String ecPolicyName) throws IOException {\n+  static void disableErasureCodingPolicy(final FSNamesystem fsn,\n+      String ecPolicyName, final boolean logRetryCache) throws IOException {\n     Preconditions.checkNotNull(ecPolicyName);\n     fsn.getErasureCodingPolicyManager().disablePolicy(ecPolicyName);\n+    fsn.getEditLog().logDisableErasureCodingPolicy(ecPolicyName, logRetryCache);\n   }\n\\ No newline at end of file\n",
          "actualSource": "  static void disableErasureCodingPolicy(final FSNamesystem fsn,\n      String ecPolicyName, final boolean logRetryCache) throws IOException {\n    Preconditions.checkNotNull(ecPolicyName);\n    fsn.getErasureCodingPolicyManager().disablePolicy(ecPolicyName);\n    fsn.getEditLog().logDisableErasureCodingPolicy(ecPolicyName, logRetryCache);\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirErasureCodingOp.java",
          "extendedDetails": {}
        }
      ]
    },
    "f99b6d19de77c6e730fed8444f8848a7e63d6130": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-11870. Add CLI cmd to enable/disable an erasure code policy. Contributed by lufei.\n",
      "commitDate": "28/06/17 10:54 AM",
      "commitName": "f99b6d19de77c6e730fed8444f8848a7e63d6130",
      "commitAuthor": "Wei-Chiu Chuang",
      "diff": "@@ -0,0 +1,5 @@\n+  static void disableErasureCodePolicy(final FSNamesystem fsn,\n+      String ecPolicyName) throws IOException {\n+    Preconditions.checkNotNull(ecPolicyName);\n+    fsn.getErasureCodingPolicyManager().disablePolicy(ecPolicyName);\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  static void disableErasureCodePolicy(final FSNamesystem fsn,\n      String ecPolicyName) throws IOException {\n    Preconditions.checkNotNull(ecPolicyName);\n    fsn.getErasureCodingPolicyManager().disablePolicy(ecPolicyName);\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirErasureCodingOp.java"
    }
  }
}