{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "DFSUtil.java",
  "functionName": "loadSslConfToHttpServerBuilder",
  "functionId": "loadSslConfToHttpServerBuilder___builder-HttpServer2.Builder__sslConf-Configuration",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSUtil.java",
  "functionStartLine": 1497,
  "functionEndLine": 1512,
  "numCommitsSeen": 233,
  "timeTaken": 3848,
  "changeHistory": [
    "a2fdfff02daef85b651eda31e99868986aab5b28",
    "812ac91add512c518394178c5162720d61957e1f",
    "33a47743a5f4263bc21b345587370c5ecf43f5b4",
    "d02baff9a0d8cec92bde751777f3e575da2339c8",
    "2214871d916fdcae62aa51afbb5fd571f2808745"
  ],
  "changeHistoryShort": {
    "a2fdfff02daef85b651eda31e99868986aab5b28": "Ybodychange",
    "812ac91add512c518394178c5162720d61957e1f": "Ybodychange",
    "33a47743a5f4263bc21b345587370c5ecf43f5b4": "Ymultichange(Yparameterchange,Yreturntypechange)",
    "d02baff9a0d8cec92bde751777f3e575da2339c8": "Ybodychange",
    "2214871d916fdcae62aa51afbb5fd571f2808745": "Yintroduced"
  },
  "changeHistoryDetails": {
    "a2fdfff02daef85b651eda31e99868986aab5b28": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-12668. Support excluding weak Ciphers in HttpServer2 through ssl-server.conf. Contributed by Vijay Singh.\n\nChange-Id: Ie46a5427d29188935427f67e55203c19fcd83335\n",
      "commitDate": "22/02/16 2:13 PM",
      "commitName": "a2fdfff02daef85b651eda31e99868986aab5b28",
      "commitAuthor": "Zhe Zhang",
      "commitDateOld": "27/10/15 11:07 PM",
      "commitNameOld": "bf8e45298218f70e38838152f69c7705d8606bd6",
      "commitAuthorOld": "cnauroth",
      "daysBetweenCommits": 117.67,
      "commitsBetweenForRepo": 761,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,14 +1,16 @@\n   public static HttpServer2.Builder loadSslConfToHttpServerBuilder(HttpServer2.Builder builder,\n       Configuration sslConf) {\n     return builder\n         .needsClientAuth(\n             sslConf.getBoolean(DFS_CLIENT_HTTPS_NEED_AUTH_KEY,\n                 DFS_CLIENT_HTTPS_NEED_AUTH_DEFAULT))\n         .keyPassword(getPassword(sslConf, DFS_SERVER_HTTPS_KEYPASSWORD_KEY))\n         .keyStore(sslConf.get(\"ssl.server.keystore.location\"),\n             getPassword(sslConf, DFS_SERVER_HTTPS_KEYSTORE_PASSWORD_KEY),\n             sslConf.get(\"ssl.server.keystore.type\", \"jks\"))\n         .trustStore(sslConf.get(\"ssl.server.truststore.location\"),\n             getPassword(sslConf, DFS_SERVER_HTTPS_TRUSTSTORE_PASSWORD_KEY),\n-            sslConf.get(\"ssl.server.truststore.type\", \"jks\"));\n+            sslConf.get(\"ssl.server.truststore.type\", \"jks\"))\n+        .excludeCiphers(\n+            sslConf.get(\"ssl.server.exclude.cipher.list\"));\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static HttpServer2.Builder loadSslConfToHttpServerBuilder(HttpServer2.Builder builder,\n      Configuration sslConf) {\n    return builder\n        .needsClientAuth(\n            sslConf.getBoolean(DFS_CLIENT_HTTPS_NEED_AUTH_KEY,\n                DFS_CLIENT_HTTPS_NEED_AUTH_DEFAULT))\n        .keyPassword(getPassword(sslConf, DFS_SERVER_HTTPS_KEYPASSWORD_KEY))\n        .keyStore(sslConf.get(\"ssl.server.keystore.location\"),\n            getPassword(sslConf, DFS_SERVER_HTTPS_KEYSTORE_PASSWORD_KEY),\n            sslConf.get(\"ssl.server.keystore.type\", \"jks\"))\n        .trustStore(sslConf.get(\"ssl.server.truststore.location\"),\n            getPassword(sslConf, DFS_SERVER_HTTPS_TRUSTSTORE_PASSWORD_KEY),\n            sslConf.get(\"ssl.server.truststore.type\", \"jks\"))\n        .excludeCiphers(\n            sslConf.get(\"ssl.server.exclude.cipher.list\"));\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSUtil.java",
      "extendedDetails": {}
    },
    "812ac91add512c518394178c5162720d61957e1f": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-6790. DFSUtil Should Use configuration.getPassword for SSL passwords. Contributed by Larry McCay\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1616058 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "05/08/14 5:50 PM",
      "commitName": "812ac91add512c518394178c5162720d61957e1f",
      "commitAuthor": "Brandon Li",
      "commitDateOld": "23/04/14 1:13 PM",
      "commitNameOld": "876fd8ab7913a259ff9f69c16cc2d9af46ad3f9b",
      "commitAuthorOld": "Suresh Srinivas",
      "daysBetweenCommits": 104.19,
      "commitsBetweenForRepo": 655,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,14 +1,14 @@\n   public static HttpServer2.Builder loadSslConfToHttpServerBuilder(HttpServer2.Builder builder,\n       Configuration sslConf) {\n     return builder\n         .needsClientAuth(\n             sslConf.getBoolean(DFS_CLIENT_HTTPS_NEED_AUTH_KEY,\n                 DFS_CLIENT_HTTPS_NEED_AUTH_DEFAULT))\n-        .keyPassword(sslConf.get(\"ssl.server.keystore.keypassword\"))\n+        .keyPassword(getPassword(sslConf, DFS_SERVER_HTTPS_KEYPASSWORD_KEY))\n         .keyStore(sslConf.get(\"ssl.server.keystore.location\"),\n-            sslConf.get(\"ssl.server.keystore.password\"),\n+            getPassword(sslConf, DFS_SERVER_HTTPS_KEYSTORE_PASSWORD_KEY),\n             sslConf.get(\"ssl.server.keystore.type\", \"jks\"))\n         .trustStore(sslConf.get(\"ssl.server.truststore.location\"),\n-            sslConf.get(\"ssl.server.truststore.password\"),\n+            getPassword(sslConf, DFS_SERVER_HTTPS_TRUSTSTORE_PASSWORD_KEY),\n             sslConf.get(\"ssl.server.truststore.type\", \"jks\"));\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static HttpServer2.Builder loadSslConfToHttpServerBuilder(HttpServer2.Builder builder,\n      Configuration sslConf) {\n    return builder\n        .needsClientAuth(\n            sslConf.getBoolean(DFS_CLIENT_HTTPS_NEED_AUTH_KEY,\n                DFS_CLIENT_HTTPS_NEED_AUTH_DEFAULT))\n        .keyPassword(getPassword(sslConf, DFS_SERVER_HTTPS_KEYPASSWORD_KEY))\n        .keyStore(sslConf.get(\"ssl.server.keystore.location\"),\n            getPassword(sslConf, DFS_SERVER_HTTPS_KEYSTORE_PASSWORD_KEY),\n            sslConf.get(\"ssl.server.keystore.type\", \"jks\"))\n        .trustStore(sslConf.get(\"ssl.server.truststore.location\"),\n            getPassword(sslConf, DFS_SERVER_HTTPS_TRUSTSTORE_PASSWORD_KEY),\n            sslConf.get(\"ssl.server.truststore.type\", \"jks\"));\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSUtil.java",
      "extendedDetails": {}
    },
    "33a47743a5f4263bc21b345587370c5ecf43f5b4": {
      "type": "Ymultichange(Yparameterchange,Yreturntypechange)",
      "commitMessage": "HADOOP-10255. Rename HttpServer to HttpServer2 to retain older HttpServer in branch-2 for compatibility. Contributed by Haohui Mai.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1561959 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "27/01/14 11:32 PM",
      "commitName": "33a47743a5f4263bc21b345587370c5ecf43f5b4",
      "commitAuthor": "Suresh Srinivas",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HADOOP-10255. Rename HttpServer to HttpServer2 to retain older HttpServer in branch-2 for compatibility. Contributed by Haohui Mai.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1561959 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "27/01/14 11:32 PM",
          "commitName": "33a47743a5f4263bc21b345587370c5ecf43f5b4",
          "commitAuthor": "Suresh Srinivas",
          "commitDateOld": "25/01/14 12:01 PM",
          "commitNameOld": "edb6dc5f303093c2604cd07b0c0dacf12dbce5de",
          "commitAuthorOld": "Todd Lipcon",
          "daysBetweenCommits": 2.48,
          "commitsBetweenForRepo": 18,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,14 +1,14 @@\n-  public static HttpServer.Builder loadSslConfToHttpServerBuilder(HttpServer.Builder builder,\n+  public static HttpServer2.Builder loadSslConfToHttpServerBuilder(HttpServer2.Builder builder,\n       Configuration sslConf) {\n     return builder\n         .needsClientAuth(\n             sslConf.getBoolean(DFS_CLIENT_HTTPS_NEED_AUTH_KEY,\n                 DFS_CLIENT_HTTPS_NEED_AUTH_DEFAULT))\n         .keyPassword(sslConf.get(\"ssl.server.keystore.keypassword\"))\n         .keyStore(sslConf.get(\"ssl.server.keystore.location\"),\n             sslConf.get(\"ssl.server.keystore.password\"),\n             sslConf.get(\"ssl.server.keystore.type\", \"jks\"))\n         .trustStore(sslConf.get(\"ssl.server.truststore.location\"),\n             sslConf.get(\"ssl.server.truststore.password\"),\n             sslConf.get(\"ssl.server.truststore.type\", \"jks\"));\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public static HttpServer2.Builder loadSslConfToHttpServerBuilder(HttpServer2.Builder builder,\n      Configuration sslConf) {\n    return builder\n        .needsClientAuth(\n            sslConf.getBoolean(DFS_CLIENT_HTTPS_NEED_AUTH_KEY,\n                DFS_CLIENT_HTTPS_NEED_AUTH_DEFAULT))\n        .keyPassword(sslConf.get(\"ssl.server.keystore.keypassword\"))\n        .keyStore(sslConf.get(\"ssl.server.keystore.location\"),\n            sslConf.get(\"ssl.server.keystore.password\"),\n            sslConf.get(\"ssl.server.keystore.type\", \"jks\"))\n        .trustStore(sslConf.get(\"ssl.server.truststore.location\"),\n            sslConf.get(\"ssl.server.truststore.password\"),\n            sslConf.get(\"ssl.server.truststore.type\", \"jks\"));\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSUtil.java",
          "extendedDetails": {
            "oldValue": "[builder-HttpServer.Builder, sslConf-Configuration]",
            "newValue": "[builder-HttpServer2.Builder, sslConf-Configuration]"
          }
        },
        {
          "type": "Yreturntypechange",
          "commitMessage": "HADOOP-10255. Rename HttpServer to HttpServer2 to retain older HttpServer in branch-2 for compatibility. Contributed by Haohui Mai.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1561959 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "27/01/14 11:32 PM",
          "commitName": "33a47743a5f4263bc21b345587370c5ecf43f5b4",
          "commitAuthor": "Suresh Srinivas",
          "commitDateOld": "25/01/14 12:01 PM",
          "commitNameOld": "edb6dc5f303093c2604cd07b0c0dacf12dbce5de",
          "commitAuthorOld": "Todd Lipcon",
          "daysBetweenCommits": 2.48,
          "commitsBetweenForRepo": 18,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,14 +1,14 @@\n-  public static HttpServer.Builder loadSslConfToHttpServerBuilder(HttpServer.Builder builder,\n+  public static HttpServer2.Builder loadSslConfToHttpServerBuilder(HttpServer2.Builder builder,\n       Configuration sslConf) {\n     return builder\n         .needsClientAuth(\n             sslConf.getBoolean(DFS_CLIENT_HTTPS_NEED_AUTH_KEY,\n                 DFS_CLIENT_HTTPS_NEED_AUTH_DEFAULT))\n         .keyPassword(sslConf.get(\"ssl.server.keystore.keypassword\"))\n         .keyStore(sslConf.get(\"ssl.server.keystore.location\"),\n             sslConf.get(\"ssl.server.keystore.password\"),\n             sslConf.get(\"ssl.server.keystore.type\", \"jks\"))\n         .trustStore(sslConf.get(\"ssl.server.truststore.location\"),\n             sslConf.get(\"ssl.server.truststore.password\"),\n             sslConf.get(\"ssl.server.truststore.type\", \"jks\"));\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public static HttpServer2.Builder loadSslConfToHttpServerBuilder(HttpServer2.Builder builder,\n      Configuration sslConf) {\n    return builder\n        .needsClientAuth(\n            sslConf.getBoolean(DFS_CLIENT_HTTPS_NEED_AUTH_KEY,\n                DFS_CLIENT_HTTPS_NEED_AUTH_DEFAULT))\n        .keyPassword(sslConf.get(\"ssl.server.keystore.keypassword\"))\n        .keyStore(sslConf.get(\"ssl.server.keystore.location\"),\n            sslConf.get(\"ssl.server.keystore.password\"),\n            sslConf.get(\"ssl.server.keystore.type\", \"jks\"))\n        .trustStore(sslConf.get(\"ssl.server.truststore.location\"),\n            sslConf.get(\"ssl.server.truststore.password\"),\n            sslConf.get(\"ssl.server.truststore.type\", \"jks\"));\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSUtil.java",
          "extendedDetails": {
            "oldValue": "HttpServer.Builder",
            "newValue": "HttpServer2.Builder"
          }
        }
      ]
    },
    "d02baff9a0d8cec92bde751777f3e575da2339c8": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-5536. Implement HTTP policy for Namenode and DataNode. Contributed by Haohui Mai.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1547925 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "04/12/13 1:40 PM",
      "commitName": "d02baff9a0d8cec92bde751777f3e575da2339c8",
      "commitAuthor": "Jing Zhao",
      "commitDateOld": "27/11/13 11:20 PM",
      "commitNameOld": "9da451cac57f3cd64c2c047675e5b60ca88ecf83",
      "commitAuthorOld": "Andrew Wang",
      "daysBetweenCommits": 6.6,
      "commitsBetweenForRepo": 22,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,14 +1,14 @@\n-  public static HttpServer.Builder loadSslConfToHttpServerBuilder(\n-      HttpServer.Builder builder, Configuration sslConf) {\n+  public static HttpServer.Builder loadSslConfToHttpServerBuilder(HttpServer.Builder builder,\n+      Configuration sslConf) {\n     return builder\n         .needsClientAuth(\n-            sslConf.getBoolean(DFSConfigKeys.DFS_CLIENT_HTTPS_NEED_AUTH_KEY,\n-                DFSConfigKeys.DFS_CLIENT_HTTPS_NEED_AUTH_DEFAULT))\n+            sslConf.getBoolean(DFS_CLIENT_HTTPS_NEED_AUTH_KEY,\n+                DFS_CLIENT_HTTPS_NEED_AUTH_DEFAULT))\n         .keyPassword(sslConf.get(\"ssl.server.keystore.keypassword\"))\n         .keyStore(sslConf.get(\"ssl.server.keystore.location\"),\n             sslConf.get(\"ssl.server.keystore.password\"),\n             sslConf.get(\"ssl.server.keystore.type\", \"jks\"))\n         .trustStore(sslConf.get(\"ssl.server.truststore.location\"),\n             sslConf.get(\"ssl.server.truststore.password\"),\n             sslConf.get(\"ssl.server.truststore.type\", \"jks\"));\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static HttpServer.Builder loadSslConfToHttpServerBuilder(HttpServer.Builder builder,\n      Configuration sslConf) {\n    return builder\n        .needsClientAuth(\n            sslConf.getBoolean(DFS_CLIENT_HTTPS_NEED_AUTH_KEY,\n                DFS_CLIENT_HTTPS_NEED_AUTH_DEFAULT))\n        .keyPassword(sslConf.get(\"ssl.server.keystore.keypassword\"))\n        .keyStore(sslConf.get(\"ssl.server.keystore.location\"),\n            sslConf.get(\"ssl.server.keystore.password\"),\n            sslConf.get(\"ssl.server.keystore.type\", \"jks\"))\n        .trustStore(sslConf.get(\"ssl.server.truststore.location\"),\n            sslConf.get(\"ssl.server.truststore.password\"),\n            sslConf.get(\"ssl.server.truststore.type\", \"jks\"));\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSUtil.java",
      "extendedDetails": {}
    },
    "2214871d916fdcae62aa51afbb5fd571f2808745": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-5545. Allow specifying endpoints for listeners in HttpServer. Contributed by Haohui Mai.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1546151 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "27/11/13 10:20 AM",
      "commitName": "2214871d916fdcae62aa51afbb5fd571f2808745",
      "commitAuthor": "Jing Zhao",
      "diff": "@@ -0,0 +1,14 @@\n+  public static HttpServer.Builder loadSslConfToHttpServerBuilder(\n+      HttpServer.Builder builder, Configuration sslConf) {\n+    return builder\n+        .needsClientAuth(\n+            sslConf.getBoolean(DFSConfigKeys.DFS_CLIENT_HTTPS_NEED_AUTH_KEY,\n+                DFSConfigKeys.DFS_CLIENT_HTTPS_NEED_AUTH_DEFAULT))\n+        .keyPassword(sslConf.get(\"ssl.server.keystore.keypassword\"))\n+        .keyStore(sslConf.get(\"ssl.server.keystore.location\"),\n+            sslConf.get(\"ssl.server.keystore.password\"),\n+            sslConf.get(\"ssl.server.keystore.type\", \"jks\"))\n+        .trustStore(sslConf.get(\"ssl.server.truststore.location\"),\n+            sslConf.get(\"ssl.server.truststore.password\"),\n+            sslConf.get(\"ssl.server.truststore.type\", \"jks\"));\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public static HttpServer.Builder loadSslConfToHttpServerBuilder(\n      HttpServer.Builder builder, Configuration sslConf) {\n    return builder\n        .needsClientAuth(\n            sslConf.getBoolean(DFSConfigKeys.DFS_CLIENT_HTTPS_NEED_AUTH_KEY,\n                DFSConfigKeys.DFS_CLIENT_HTTPS_NEED_AUTH_DEFAULT))\n        .keyPassword(sslConf.get(\"ssl.server.keystore.keypassword\"))\n        .keyStore(sslConf.get(\"ssl.server.keystore.location\"),\n            sslConf.get(\"ssl.server.keystore.password\"),\n            sslConf.get(\"ssl.server.keystore.type\", \"jks\"))\n        .trustStore(sslConf.get(\"ssl.server.truststore.location\"),\n            sslConf.get(\"ssl.server.truststore.password\"),\n            sslConf.get(\"ssl.server.truststore.type\", \"jks\"));\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSUtil.java"
    }
  }
}