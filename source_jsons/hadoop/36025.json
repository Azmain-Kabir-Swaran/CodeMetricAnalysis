{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "AdminService.java",
  "functionName": "refreshAll",
  "functionId": "refreshAll",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/AdminService.java",
  "functionStartLine": 758,
  "functionEndLine": 782,
  "numCommitsSeen": 78,
  "timeTaken": 3644,
  "changeHistory": [
    "ff39c0de206a4fce1f0e8a416357a7a8261f8634",
    "a6b06f71797ad1ed9edbcef279bcf7d9e569f955",
    "d9a354c2f39274b2810144d1ae133201e44e3bfc",
    "ff95fd547b3030529983fa4e701ac728c54ab63a",
    "a9c8ea71aa427ff5f25caec98be15bc880e578a7",
    "fad9d7e85b1ba0934ab592daa9d3c9550b2bb501",
    "ad70f26b1fe6579166a042fec2e9f21ec56464cb"
  ],
  "changeHistoryShort": {
    "ff39c0de206a4fce1f0e8a416357a7a8261f8634": "Ybodychange",
    "a6b06f71797ad1ed9edbcef279bcf7d9e569f955": "Ybodychange",
    "d9a354c2f39274b2810144d1ae133201e44e3bfc": "Ybodychange",
    "ff95fd547b3030529983fa4e701ac728c54ab63a": "Ymodifierchange",
    "a9c8ea71aa427ff5f25caec98be15bc880e578a7": "Ybodychange",
    "fad9d7e85b1ba0934ab592daa9d3c9550b2bb501": "Ybodychange",
    "ad70f26b1fe6579166a042fec2e9f21ec56464cb": "Yintroduced"
  },
  "changeHistoryDetails": {
    "ff39c0de206a4fce1f0e8a416357a7a8261f8634": {
      "type": "Ybodychange",
      "commitMessage": "YARN-6840. Implement zookeeper based store for scheduler configuration updates. (Jonathan Hung via wangda)\n\nChange-Id: I9debea674fe8c7e4109d4ca136965a1ea4c48bcc\n",
      "commitDate": "09/10/17 11:11 AM",
      "commitName": "ff39c0de206a4fce1f0e8a416357a7a8261f8634",
      "commitAuthor": "Wangda Tan",
      "commitDateOld": "09/10/17 11:11 AM",
      "commitNameOld": "4c8b208adb8c7639628676387e275856cf0842c9",
      "commitAuthorOld": "Xuan",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 2,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,25 @@\n   void refreshAll() throws ServiceFailedException {\n     try {\n       checkAcls(\"refreshAll\");\n+      if (isSchedulerMutable()) {\n+        try {\n+          ((MutableConfScheduler) rm.getRMContext().getScheduler())\n+              .getMutableConfProvider().reloadConfigurationFromStore();\n+        } catch (Exception e) {\n+          throw new IOException(\"Failed to refresh configuration:\", e);\n+        }\n+      }\n       refreshQueues();\n       refreshNodes();\n       refreshSuperUserGroupsConfiguration();\n       refreshUserToGroupsMappings();\n       if (getConfig().getBoolean(\n           CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHORIZATION,\n           false)) {\n         refreshServiceAcls();\n       }\n       refreshClusterMaxPriority();\n     } catch (Exception ex) {\n       throw new ServiceFailedException(\"RefreshAll operation failed\", ex);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  void refreshAll() throws ServiceFailedException {\n    try {\n      checkAcls(\"refreshAll\");\n      if (isSchedulerMutable()) {\n        try {\n          ((MutableConfScheduler) rm.getRMContext().getScheduler())\n              .getMutableConfProvider().reloadConfigurationFromStore();\n        } catch (Exception e) {\n          throw new IOException(\"Failed to refresh configuration:\", e);\n        }\n      }\n      refreshQueues();\n      refreshNodes();\n      refreshSuperUserGroupsConfiguration();\n      refreshUserToGroupsMappings();\n      if (getConfig().getBoolean(\n          CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHORIZATION,\n          false)) {\n        refreshServiceAcls();\n      }\n      refreshClusterMaxPriority();\n    } catch (Exception ex) {\n      throw new ServiceFailedException(\"RefreshAll operation failed\", ex);\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/AdminService.java",
      "extendedDetails": {}
    },
    "a6b06f71797ad1ed9edbcef279bcf7d9e569f955": {
      "type": "Ybodychange",
      "commitMessage": "YARN-6072. RM unable to start in secure mode. Contributed by Ajith S.\n",
      "commitDate": "11/01/17 5:10 PM",
      "commitName": "a6b06f71797ad1ed9edbcef279bcf7d9e569f955",
      "commitAuthor": "Naganarasimha",
      "commitDateOld": "03/01/17 10:39 PM",
      "commitNameOld": "e49e0a6e37f4a32535d7d4a07015fbf9eb33c74a",
      "commitAuthorOld": "Rohith Sharma K S",
      "daysBetweenCommits": 7.77,
      "commitsBetweenForRepo": 45,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,17 @@\n   void refreshAll() throws ServiceFailedException {\n     try {\n       checkAcls(\"refreshAll\");\n       refreshQueues();\n       refreshNodes();\n       refreshSuperUserGroupsConfiguration();\n       refreshUserToGroupsMappings();\n       if (getConfig().getBoolean(\n           CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHORIZATION,\n           false)) {\n         refreshServiceAcls();\n       }\n       refreshClusterMaxPriority();\n     } catch (Exception ex) {\n-      throw new ServiceFailedException(ex.getMessage());\n+      throw new ServiceFailedException(\"RefreshAll operation failed\", ex);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  void refreshAll() throws ServiceFailedException {\n    try {\n      checkAcls(\"refreshAll\");\n      refreshQueues();\n      refreshNodes();\n      refreshSuperUserGroupsConfiguration();\n      refreshUserToGroupsMappings();\n      if (getConfig().getBoolean(\n          CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHORIZATION,\n          false)) {\n        refreshServiceAcls();\n      }\n      refreshClusterMaxPriority();\n    } catch (Exception ex) {\n      throw new ServiceFailedException(\"RefreshAll operation failed\", ex);\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/AdminService.java",
      "extendedDetails": {}
    },
    "d9a354c2f39274b2810144d1ae133201e44e3bfc": {
      "type": "Ybodychange",
      "commitMessage": "YARN-5333. Some recovered apps are put into default queue when RM HA. Contributed by Jun Gong.\n",
      "commitDate": "05/08/16 9:05 AM",
      "commitName": "d9a354c2f39274b2810144d1ae133201e44e3bfc",
      "commitAuthor": "Rohith Sharma K S",
      "commitDateOld": "20/07/16 4:51 PM",
      "commitNameOld": "c63afdbe14df7359841aa4b213252a8a275e8c4b",
      "commitAuthorOld": "Akira Ajisaka",
      "daysBetweenCommits": 15.68,
      "commitsBetweenForRepo": 112,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,17 @@\n   void refreshAll() throws ServiceFailedException {\n     try {\n-      refreshQueues(RefreshQueuesRequest.newInstance());\n-      refreshNodes(RefreshNodesRequest.newInstance(DecommissionType.NORMAL));\n-      refreshSuperUserGroupsConfiguration(\n-          RefreshSuperUserGroupsConfigurationRequest.newInstance());\n-      refreshUserToGroupsMappings(\n-          RefreshUserToGroupsMappingsRequest.newInstance());\n+      checkAcls(\"refreshAll\");\n+      refreshQueues();\n+      refreshNodes();\n+      refreshSuperUserGroupsConfiguration();\n+      refreshUserToGroupsMappings();\n       if (getConfig().getBoolean(\n           CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHORIZATION,\n           false)) {\n-        refreshServiceAcls(RefreshServiceAclsRequest.newInstance());\n+        refreshServiceAcls();\n       }\n-      refreshClusterMaxPriority(RefreshClusterMaxPriorityRequest.newInstance());\n+      refreshClusterMaxPriority();\n     } catch (Exception ex) {\n       throw new ServiceFailedException(ex.getMessage());\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  void refreshAll() throws ServiceFailedException {\n    try {\n      checkAcls(\"refreshAll\");\n      refreshQueues();\n      refreshNodes();\n      refreshSuperUserGroupsConfiguration();\n      refreshUserToGroupsMappings();\n      if (getConfig().getBoolean(\n          CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHORIZATION,\n          false)) {\n        refreshServiceAcls();\n      }\n      refreshClusterMaxPriority();\n    } catch (Exception ex) {\n      throw new ServiceFailedException(ex.getMessage());\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/AdminService.java",
      "extendedDetails": {}
    },
    "ff95fd547b3030529983fa4e701ac728c54ab63a": {
      "type": "Ymodifierchange",
      "commitMessage": "YARN-4927. TestRMHA#testTransitionedToActiveRefreshFail fails with FairScheduler. (Bibin A Chundatt via kasha)\n",
      "commitDate": "09/04/16 10:31 AM",
      "commitName": "ff95fd547b3030529983fa4e701ac728c54ab63a",
      "commitAuthor": "Karthik Kambatla",
      "commitDateOld": "28/03/16 11:12 AM",
      "commitNameOld": "524bc3c33aff301c1a8d60ed8e6a3b240e305045",
      "commitAuthorOld": "Jian He",
      "daysBetweenCommits": 11.97,
      "commitsBetweenForRepo": 85,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,18 @@\n-  private void refreshAll() throws ServiceFailedException {\n+  void refreshAll() throws ServiceFailedException {\n     try {\n       refreshQueues(RefreshQueuesRequest.newInstance());\n       refreshNodes(RefreshNodesRequest.newInstance(DecommissionType.NORMAL));\n       refreshSuperUserGroupsConfiguration(\n           RefreshSuperUserGroupsConfigurationRequest.newInstance());\n       refreshUserToGroupsMappings(\n           RefreshUserToGroupsMappingsRequest.newInstance());\n       if (getConfig().getBoolean(\n           CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHORIZATION,\n           false)) {\n         refreshServiceAcls(RefreshServiceAclsRequest.newInstance());\n       }\n       refreshClusterMaxPriority(RefreshClusterMaxPriorityRequest.newInstance());\n     } catch (Exception ex) {\n       throw new ServiceFailedException(ex.getMessage());\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  void refreshAll() throws ServiceFailedException {\n    try {\n      refreshQueues(RefreshQueuesRequest.newInstance());\n      refreshNodes(RefreshNodesRequest.newInstance(DecommissionType.NORMAL));\n      refreshSuperUserGroupsConfiguration(\n          RefreshSuperUserGroupsConfigurationRequest.newInstance());\n      refreshUserToGroupsMappings(\n          RefreshUserToGroupsMappingsRequest.newInstance());\n      if (getConfig().getBoolean(\n          CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHORIZATION,\n          false)) {\n        refreshServiceAcls(RefreshServiceAclsRequest.newInstance());\n      }\n      refreshClusterMaxPriority(RefreshClusterMaxPriorityRequest.newInstance());\n    } catch (Exception ex) {\n      throw new ServiceFailedException(ex.getMessage());\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/AdminService.java",
      "extendedDetails": {
        "oldValue": "[private]",
        "newValue": "[]"
      }
    },
    "a9c8ea71aa427ff5f25caec98be15bc880e578a7": {
      "type": "Ybodychange",
      "commitMessage": "YARN-3250. Support admin cli interface in for Application Priority. Contributed by Rohith Sharma K S\n",
      "commitDate": "27/08/15 1:25 PM",
      "commitName": "a9c8ea71aa427ff5f25caec98be15bc880e578a7",
      "commitAuthor": "Jian He",
      "commitDateOld": "17/06/15 4:23 PM",
      "commitNameOld": "a826d432f9b45550cc5ab79ef63ca39b176dabb2",
      "commitAuthorOld": "Xuan",
      "daysBetweenCommits": 70.88,
      "commitsBetweenForRepo": 415,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,18 @@\n   private void refreshAll() throws ServiceFailedException {\n     try {\n       refreshQueues(RefreshQueuesRequest.newInstance());\n       refreshNodes(RefreshNodesRequest.newInstance(DecommissionType.NORMAL));\n       refreshSuperUserGroupsConfiguration(\n           RefreshSuperUserGroupsConfigurationRequest.newInstance());\n       refreshUserToGroupsMappings(\n           RefreshUserToGroupsMappingsRequest.newInstance());\n       if (getConfig().getBoolean(\n           CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHORIZATION,\n           false)) {\n         refreshServiceAcls(RefreshServiceAclsRequest.newInstance());\n       }\n+      refreshClusterMaxPriority(RefreshClusterMaxPriorityRequest.newInstance());\n     } catch (Exception ex) {\n       throw new ServiceFailedException(ex.getMessage());\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void refreshAll() throws ServiceFailedException {\n    try {\n      refreshQueues(RefreshQueuesRequest.newInstance());\n      refreshNodes(RefreshNodesRequest.newInstance(DecommissionType.NORMAL));\n      refreshSuperUserGroupsConfiguration(\n          RefreshSuperUserGroupsConfigurationRequest.newInstance());\n      refreshUserToGroupsMappings(\n          RefreshUserToGroupsMappingsRequest.newInstance());\n      if (getConfig().getBoolean(\n          CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHORIZATION,\n          false)) {\n        refreshServiceAcls(RefreshServiceAclsRequest.newInstance());\n      }\n      refreshClusterMaxPriority(RefreshClusterMaxPriorityRequest.newInstance());\n    } catch (Exception ex) {\n      throw new ServiceFailedException(ex.getMessage());\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/AdminService.java",
      "extendedDetails": {}
    },
    "fad9d7e85b1ba0934ab592daa9d3c9550b2bb501": {
      "type": "Ybodychange",
      "commitMessage": "New parameter of CLI for decommissioning node gracefully in RMAdmin CLI. Contributed by Devaraj K\n",
      "commitDate": "22/04/15 10:07 AM",
      "commitName": "fad9d7e85b1ba0934ab592daa9d3c9550b2bb501",
      "commitAuthor": "Junping Du",
      "commitDateOld": "24/03/15 10:38 AM",
      "commitNameOld": "97a7277a2d696474b5c8e2d814c8291d4bde246e",
      "commitAuthorOld": "Wangda Tan",
      "daysBetweenCommits": 28.98,
      "commitsBetweenForRepo": 236,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,17 @@\n   private void refreshAll() throws ServiceFailedException {\n     try {\n       refreshQueues(RefreshQueuesRequest.newInstance());\n-      refreshNodes(RefreshNodesRequest.newInstance());\n+      refreshNodes(RefreshNodesRequest.newInstance(DecommissionType.NORMAL));\n       refreshSuperUserGroupsConfiguration(\n           RefreshSuperUserGroupsConfigurationRequest.newInstance());\n       refreshUserToGroupsMappings(\n           RefreshUserToGroupsMappingsRequest.newInstance());\n       if (getConfig().getBoolean(\n           CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHORIZATION,\n           false)) {\n         refreshServiceAcls(RefreshServiceAclsRequest.newInstance());\n       }\n     } catch (Exception ex) {\n       throw new ServiceFailedException(ex.getMessage());\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void refreshAll() throws ServiceFailedException {\n    try {\n      refreshQueues(RefreshQueuesRequest.newInstance());\n      refreshNodes(RefreshNodesRequest.newInstance(DecommissionType.NORMAL));\n      refreshSuperUserGroupsConfiguration(\n          RefreshSuperUserGroupsConfigurationRequest.newInstance());\n      refreshUserToGroupsMappings(\n          RefreshUserToGroupsMappingsRequest.newInstance());\n      if (getConfig().getBoolean(\n          CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHORIZATION,\n          false)) {\n        refreshServiceAcls(RefreshServiceAclsRequest.newInstance());\n      }\n    } catch (Exception ex) {\n      throw new ServiceFailedException(ex.getMessage());\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/AdminService.java",
      "extendedDetails": {}
    },
    "ad70f26b1fe6579166a042fec2e9f21ec56464cb": {
      "type": "Yintroduced",
      "commitMessage": "YARN-1734. Fixed ResourceManager to update the configurations when it transits from standby to active mode so as to assimilate any changes that happened while it was in standby mode. Contributed by Xuan Gong.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1571539 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/02/14 6:07 PM",
      "commitName": "ad70f26b1fe6579166a042fec2e9f21ec56464cb",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "diff": "@@ -0,0 +1,17 @@\n+  private void refreshAll() throws ServiceFailedException {\n+    try {\n+      refreshQueues(RefreshQueuesRequest.newInstance());\n+      refreshNodes(RefreshNodesRequest.newInstance());\n+      refreshSuperUserGroupsConfiguration(\n+          RefreshSuperUserGroupsConfigurationRequest.newInstance());\n+      refreshUserToGroupsMappings(\n+          RefreshUserToGroupsMappingsRequest.newInstance());\n+      if (getConfig().getBoolean(\n+          CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHORIZATION,\n+          false)) {\n+        refreshServiceAcls(RefreshServiceAclsRequest.newInstance());\n+      }\n+    } catch (Exception ex) {\n+      throw new ServiceFailedException(ex.getMessage());\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private void refreshAll() throws ServiceFailedException {\n    try {\n      refreshQueues(RefreshQueuesRequest.newInstance());\n      refreshNodes(RefreshNodesRequest.newInstance());\n      refreshSuperUserGroupsConfiguration(\n          RefreshSuperUserGroupsConfigurationRequest.newInstance());\n      refreshUserToGroupsMappings(\n          RefreshUserToGroupsMappingsRequest.newInstance());\n      if (getConfig().getBoolean(\n          CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHORIZATION,\n          false)) {\n        refreshServiceAcls(RefreshServiceAclsRequest.newInstance());\n      }\n    } catch (Exception ex) {\n      throw new ServiceFailedException(ex.getMessage());\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/AdminService.java"
    }
  }
}