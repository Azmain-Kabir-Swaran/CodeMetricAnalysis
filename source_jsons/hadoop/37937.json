{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "ResourceTrackerService.java",
  "functionName": "populateKeys",
  "functionId": "populateKeys___request-NodeHeartbeatRequest__nodeHeartBeatResponse-NodeHeartbeatResponse",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/ResourceTrackerService.java",
  "functionStartLine": 897,
  "functionEndLine": 921,
  "numCommitsSeen": 98,
  "timeTaken": 1915,
  "changeHistory": [
    "f0eb4bc342370ec87d1f2665ffaf48ff4b3fbacb"
  ],
  "changeHistoryShort": {
    "f0eb4bc342370ec87d1f2665ffaf48ff4b3fbacb": "Yintroduced"
  },
  "changeHistoryDetails": {
    "f0eb4bc342370ec87d1f2665ffaf48ff4b3fbacb": {
      "type": "Yintroduced",
      "commitMessage": "YARN-692. Creating NMToken master key on RM and sharing it with NM as a part of RM-NM heartbeat. Contributed by Omkar Vinit Joshi.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1492907 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "13/06/13 5:06 PM",
      "commitName": "f0eb4bc342370ec87d1f2665ffaf48ff4b3fbacb",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "diff": "@@ -0,0 +1,25 @@\n+  private void populateKeys(NodeHeartbeatRequest request,\n+      NodeHeartbeatResponse nodeHeartBeatResponse) {\n+\n+    // Check if node\u0027s masterKey needs to be updated and if the currentKey has\n+    // roller over, send it across\n+\n+    // ContainerTokenMasterKey\n+\n+    MasterKey nextMasterKeyForNode \u003d\n+        this.containerTokenSecretManager.getNextKey();\n+    if (nextMasterKeyForNode !\u003d null\n+        \u0026\u0026 (request.getLastKnownContainerTokenMasterKey().getKeyId()\n+            !\u003d nextMasterKeyForNode.getKeyId())) {\n+      nodeHeartBeatResponse.setContainerTokenMasterKey(nextMasterKeyForNode);\n+    }\n+\n+    // NMTokenMasterKey\n+\n+    nextMasterKeyForNode \u003d this.nmTokenSecretManager.getNextKey();\n+    if (nextMasterKeyForNode !\u003d null\n+        \u0026\u0026 (request.getLastKnownNMTokenMasterKey().getKeyId() \n+            !\u003d nextMasterKeyForNode.getKeyId())) {\n+      nodeHeartBeatResponse.setNMTokenMasterKey(nextMasterKeyForNode);\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private void populateKeys(NodeHeartbeatRequest request,\n      NodeHeartbeatResponse nodeHeartBeatResponse) {\n\n    // Check if node\u0027s masterKey needs to be updated and if the currentKey has\n    // roller over, send it across\n\n    // ContainerTokenMasterKey\n\n    MasterKey nextMasterKeyForNode \u003d\n        this.containerTokenSecretManager.getNextKey();\n    if (nextMasterKeyForNode !\u003d null\n        \u0026\u0026 (request.getLastKnownContainerTokenMasterKey().getKeyId()\n            !\u003d nextMasterKeyForNode.getKeyId())) {\n      nodeHeartBeatResponse.setContainerTokenMasterKey(nextMasterKeyForNode);\n    }\n\n    // NMTokenMasterKey\n\n    nextMasterKeyForNode \u003d this.nmTokenSecretManager.getNextKey();\n    if (nextMasterKeyForNode !\u003d null\n        \u0026\u0026 (request.getLastKnownNMTokenMasterKey().getKeyId() \n            !\u003d nextMasterKeyForNode.getKeyId())) {\n      nodeHeartBeatResponse.setNMTokenMasterKey(nextMasterKeyForNode);\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/ResourceTrackerService.java"
    }
  }
}