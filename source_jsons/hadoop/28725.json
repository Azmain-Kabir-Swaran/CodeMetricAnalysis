{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "YarnServerSecurityUtils.java",
  "functionName": "authorizeRequest",
  "functionId": "authorizeRequest",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-common/src/main/java/org/apache/hadoop/yarn/server/utils/YarnServerSecurityUtils.java",
  "functionStartLine": 61,
  "functionEndLine": 97,
  "numCommitsSeen": 117,
  "timeTaken": 3404,
  "changeHistory": [
    "6f72f1e6003ab11679bebeb96f27f1f62b3b3e02",
    "eeb4acd955802e2a84ea94cecf2e2341b83d5efb",
    "ac914f79bc80b152e71e7de5497b73f22824f4a7",
    "32bc200d54928d39acdc837c2c77b4c443fb46be",
    "a83fb61ac07c0468cbc7a38526e92683883dd932",
    "e1fdf62123625e4ba399af02f8aad500637d29d1",
    "db8ac0ec3cbec046f9cf32644c16fd2a51dd85a2"
  ],
  "changeHistoryShort": {
    "6f72f1e6003ab11679bebeb96f27f1f62b3b3e02": "Ymultichange(Ymovefromfile,Ymodifierchange)",
    "eeb4acd955802e2a84ea94cecf2e2341b83d5efb": "Ymultichange(Yreturntypechange,Ybodychange)",
    "ac914f79bc80b152e71e7de5497b73f22824f4a7": "Ymultichange(Yparameterchange,Yreturntypechange,Ybodychange)",
    "32bc200d54928d39acdc837c2c77b4c443fb46be": "Ybodychange",
    "a83fb61ac07c0468cbc7a38526e92683883dd932": "Yexceptionschange",
    "e1fdf62123625e4ba399af02f8aad500637d29d1": "Yfilerename",
    "db8ac0ec3cbec046f9cf32644c16fd2a51dd85a2": "Yintroduced"
  },
  "changeHistoryDetails": {
    "6f72f1e6003ab11679bebeb96f27f1f62b3b3e02": {
      "type": "Ymultichange(Ymovefromfile,Ymodifierchange)",
      "commitMessage": "YARN-2884. Added a proxy service in NM to proxy the the communication between AM and RM. Contributed by Kishore Chaliparambil\n",
      "commitDate": "07/09/15 6:35 PM",
      "commitName": "6f72f1e6003ab11679bebeb96f27f1f62b3b3e02",
      "commitAuthor": "Jian He",
      "subchanges": [
        {
          "type": "Ymovefromfile",
          "commitMessage": "YARN-2884. Added a proxy service in NM to proxy the the communication between AM and RM. Contributed by Kishore Chaliparambil\n",
          "commitDate": "07/09/15 6:35 PM",
          "commitName": "6f72f1e6003ab11679bebeb96f27f1f62b3b3e02",
          "commitAuthor": "Jian He",
          "commitDateOld": "07/09/15 5:45 PM",
          "commitNameOld": "9b78e6e33d8c117c1e909df414f20d9db56efe4b",
          "commitAuthorOld": "Xuan",
          "daysBetweenCommits": 0.03,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,39 +1,39 @@\n-  private AMRMTokenIdentifier authorizeRequest()\n+  public static AMRMTokenIdentifier authorizeRequest()\n       throws YarnException {\n \n     UserGroupInformation remoteUgi;\n     try {\n       remoteUgi \u003d UserGroupInformation.getCurrentUser();\n     } catch (IOException e) {\n       String msg \u003d\n           \"Cannot obtain the user-name for authorizing ApplicationMaster. \"\n               + \"Got exception: \" + StringUtils.stringifyException(e);\n       LOG.warn(msg);\n       throw RPCUtil.getRemoteException(msg);\n     }\n \n     boolean tokenFound \u003d false;\n     String message \u003d \"\";\n     AMRMTokenIdentifier appTokenIdentifier \u003d null;\n     try {\n       appTokenIdentifier \u003d selectAMRMTokenIdentifier(remoteUgi);\n       if (appTokenIdentifier \u003d\u003d null) {\n         tokenFound \u003d false;\n         message \u003d \"No AMRMToken found for user \" + remoteUgi.getUserName();\n       } else {\n         tokenFound \u003d true;\n       }\n     } catch (IOException e) {\n       tokenFound \u003d false;\n       message \u003d\n           \"Got exception while looking for AMRMToken for user \"\n               + remoteUgi.getUserName();\n     }\n \n     if (!tokenFound) {\n       LOG.warn(message);\n       throw RPCUtil.getRemoteException(message);\n     }\n \n     return appTokenIdentifier;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public static AMRMTokenIdentifier authorizeRequest()\n      throws YarnException {\n\n    UserGroupInformation remoteUgi;\n    try {\n      remoteUgi \u003d UserGroupInformation.getCurrentUser();\n    } catch (IOException e) {\n      String msg \u003d\n          \"Cannot obtain the user-name for authorizing ApplicationMaster. \"\n              + \"Got exception: \" + StringUtils.stringifyException(e);\n      LOG.warn(msg);\n      throw RPCUtil.getRemoteException(msg);\n    }\n\n    boolean tokenFound \u003d false;\n    String message \u003d \"\";\n    AMRMTokenIdentifier appTokenIdentifier \u003d null;\n    try {\n      appTokenIdentifier \u003d selectAMRMTokenIdentifier(remoteUgi);\n      if (appTokenIdentifier \u003d\u003d null) {\n        tokenFound \u003d false;\n        message \u003d \"No AMRMToken found for user \" + remoteUgi.getUserName();\n      } else {\n        tokenFound \u003d true;\n      }\n    } catch (IOException e) {\n      tokenFound \u003d false;\n      message \u003d\n          \"Got exception while looking for AMRMToken for user \"\n              + remoteUgi.getUserName();\n    }\n\n    if (!tokenFound) {\n      LOG.warn(message);\n      throw RPCUtil.getRemoteException(message);\n    }\n\n    return appTokenIdentifier;\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-common/src/main/java/org/apache/hadoop/yarn/server/utils/YarnServerSecurityUtils.java",
          "extendedDetails": {
            "oldPath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/ApplicationMasterService.java",
            "newPath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-common/src/main/java/org/apache/hadoop/yarn/server/utils/YarnServerSecurityUtils.java",
            "oldMethodName": "authorizeRequest",
            "newMethodName": "authorizeRequest"
          }
        },
        {
          "type": "Ymodifierchange",
          "commitMessage": "YARN-2884. Added a proxy service in NM to proxy the the communication between AM and RM. Contributed by Kishore Chaliparambil\n",
          "commitDate": "07/09/15 6:35 PM",
          "commitName": "6f72f1e6003ab11679bebeb96f27f1f62b3b3e02",
          "commitAuthor": "Jian He",
          "commitDateOld": "07/09/15 5:45 PM",
          "commitNameOld": "9b78e6e33d8c117c1e909df414f20d9db56efe4b",
          "commitAuthorOld": "Xuan",
          "daysBetweenCommits": 0.03,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,39 +1,39 @@\n-  private AMRMTokenIdentifier authorizeRequest()\n+  public static AMRMTokenIdentifier authorizeRequest()\n       throws YarnException {\n \n     UserGroupInformation remoteUgi;\n     try {\n       remoteUgi \u003d UserGroupInformation.getCurrentUser();\n     } catch (IOException e) {\n       String msg \u003d\n           \"Cannot obtain the user-name for authorizing ApplicationMaster. \"\n               + \"Got exception: \" + StringUtils.stringifyException(e);\n       LOG.warn(msg);\n       throw RPCUtil.getRemoteException(msg);\n     }\n \n     boolean tokenFound \u003d false;\n     String message \u003d \"\";\n     AMRMTokenIdentifier appTokenIdentifier \u003d null;\n     try {\n       appTokenIdentifier \u003d selectAMRMTokenIdentifier(remoteUgi);\n       if (appTokenIdentifier \u003d\u003d null) {\n         tokenFound \u003d false;\n         message \u003d \"No AMRMToken found for user \" + remoteUgi.getUserName();\n       } else {\n         tokenFound \u003d true;\n       }\n     } catch (IOException e) {\n       tokenFound \u003d false;\n       message \u003d\n           \"Got exception while looking for AMRMToken for user \"\n               + remoteUgi.getUserName();\n     }\n \n     if (!tokenFound) {\n       LOG.warn(message);\n       throw RPCUtil.getRemoteException(message);\n     }\n \n     return appTokenIdentifier;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public static AMRMTokenIdentifier authorizeRequest()\n      throws YarnException {\n\n    UserGroupInformation remoteUgi;\n    try {\n      remoteUgi \u003d UserGroupInformation.getCurrentUser();\n    } catch (IOException e) {\n      String msg \u003d\n          \"Cannot obtain the user-name for authorizing ApplicationMaster. \"\n              + \"Got exception: \" + StringUtils.stringifyException(e);\n      LOG.warn(msg);\n      throw RPCUtil.getRemoteException(msg);\n    }\n\n    boolean tokenFound \u003d false;\n    String message \u003d \"\";\n    AMRMTokenIdentifier appTokenIdentifier \u003d null;\n    try {\n      appTokenIdentifier \u003d selectAMRMTokenIdentifier(remoteUgi);\n      if (appTokenIdentifier \u003d\u003d null) {\n        tokenFound \u003d false;\n        message \u003d \"No AMRMToken found for user \" + remoteUgi.getUserName();\n      } else {\n        tokenFound \u003d true;\n      }\n    } catch (IOException e) {\n      tokenFound \u003d false;\n      message \u003d\n          \"Got exception while looking for AMRMToken for user \"\n              + remoteUgi.getUserName();\n    }\n\n    if (!tokenFound) {\n      LOG.warn(message);\n      throw RPCUtil.getRemoteException(message);\n    }\n\n    return appTokenIdentifier;\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-common/src/main/java/org/apache/hadoop/yarn/server/utils/YarnServerSecurityUtils.java",
          "extendedDetails": {
            "oldValue": "[private]",
            "newValue": "[public, static]"
          }
        }
      ]
    },
    "eeb4acd955802e2a84ea94cecf2e2341b83d5efb": {
      "type": "Ymultichange(Yreturntypechange,Ybodychange)",
      "commitMessage": "YARN-2212: ApplicationMaster needs to find a way to update the AMRMToken periodically. Contributed by Xuan Gong\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1616892 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "08/08/14 2:38 PM",
      "commitName": "eeb4acd955802e2a84ea94cecf2e2341b83d5efb",
      "commitAuthor": "Xuan Gong",
      "subchanges": [
        {
          "type": "Yreturntypechange",
          "commitMessage": "YARN-2212: ApplicationMaster needs to find a way to update the AMRMToken periodically. Contributed by Xuan Gong\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1616892 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "08/08/14 2:38 PM",
          "commitName": "eeb4acd955802e2a84ea94cecf2e2341b83d5efb",
          "commitAuthor": "Xuan Gong",
          "commitDateOld": "31/07/14 1:06 PM",
          "commitNameOld": "e52f67e3897a67a0b6d29e557a31cfa881738821",
          "commitAuthorOld": "Xuan Gong",
          "daysBetweenCommits": 8.06,
          "commitsBetweenForRepo": 70,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,39 +1,39 @@\n-  private ApplicationAttemptId authorizeRequest()\n+  private AMRMTokenIdentifier authorizeRequest()\n       throws YarnException {\n \n     UserGroupInformation remoteUgi;\n     try {\n       remoteUgi \u003d UserGroupInformation.getCurrentUser();\n     } catch (IOException e) {\n       String msg \u003d\n           \"Cannot obtain the user-name for authorizing ApplicationMaster. \"\n               + \"Got exception: \" + StringUtils.stringifyException(e);\n       LOG.warn(msg);\n       throw RPCUtil.getRemoteException(msg);\n     }\n \n     boolean tokenFound \u003d false;\n     String message \u003d \"\";\n     AMRMTokenIdentifier appTokenIdentifier \u003d null;\n     try {\n       appTokenIdentifier \u003d selectAMRMTokenIdentifier(remoteUgi);\n       if (appTokenIdentifier \u003d\u003d null) {\n         tokenFound \u003d false;\n         message \u003d \"No AMRMToken found for user \" + remoteUgi.getUserName();\n       } else {\n         tokenFound \u003d true;\n       }\n     } catch (IOException e) {\n       tokenFound \u003d false;\n       message \u003d\n           \"Got exception while looking for AMRMToken for user \"\n               + remoteUgi.getUserName();\n     }\n \n     if (!tokenFound) {\n       LOG.warn(message);\n       throw RPCUtil.getRemoteException(message);\n     }\n \n-    return appTokenIdentifier.getApplicationAttemptId();\n+    return appTokenIdentifier;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private AMRMTokenIdentifier authorizeRequest()\n      throws YarnException {\n\n    UserGroupInformation remoteUgi;\n    try {\n      remoteUgi \u003d UserGroupInformation.getCurrentUser();\n    } catch (IOException e) {\n      String msg \u003d\n          \"Cannot obtain the user-name for authorizing ApplicationMaster. \"\n              + \"Got exception: \" + StringUtils.stringifyException(e);\n      LOG.warn(msg);\n      throw RPCUtil.getRemoteException(msg);\n    }\n\n    boolean tokenFound \u003d false;\n    String message \u003d \"\";\n    AMRMTokenIdentifier appTokenIdentifier \u003d null;\n    try {\n      appTokenIdentifier \u003d selectAMRMTokenIdentifier(remoteUgi);\n      if (appTokenIdentifier \u003d\u003d null) {\n        tokenFound \u003d false;\n        message \u003d \"No AMRMToken found for user \" + remoteUgi.getUserName();\n      } else {\n        tokenFound \u003d true;\n      }\n    } catch (IOException e) {\n      tokenFound \u003d false;\n      message \u003d\n          \"Got exception while looking for AMRMToken for user \"\n              + remoteUgi.getUserName();\n    }\n\n    if (!tokenFound) {\n      LOG.warn(message);\n      throw RPCUtil.getRemoteException(message);\n    }\n\n    return appTokenIdentifier;\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/ApplicationMasterService.java",
          "extendedDetails": {
            "oldValue": "ApplicationAttemptId",
            "newValue": "AMRMTokenIdentifier"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "YARN-2212: ApplicationMaster needs to find a way to update the AMRMToken periodically. Contributed by Xuan Gong\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1616892 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "08/08/14 2:38 PM",
          "commitName": "eeb4acd955802e2a84ea94cecf2e2341b83d5efb",
          "commitAuthor": "Xuan Gong",
          "commitDateOld": "31/07/14 1:06 PM",
          "commitNameOld": "e52f67e3897a67a0b6d29e557a31cfa881738821",
          "commitAuthorOld": "Xuan Gong",
          "daysBetweenCommits": 8.06,
          "commitsBetweenForRepo": 70,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,39 +1,39 @@\n-  private ApplicationAttemptId authorizeRequest()\n+  private AMRMTokenIdentifier authorizeRequest()\n       throws YarnException {\n \n     UserGroupInformation remoteUgi;\n     try {\n       remoteUgi \u003d UserGroupInformation.getCurrentUser();\n     } catch (IOException e) {\n       String msg \u003d\n           \"Cannot obtain the user-name for authorizing ApplicationMaster. \"\n               + \"Got exception: \" + StringUtils.stringifyException(e);\n       LOG.warn(msg);\n       throw RPCUtil.getRemoteException(msg);\n     }\n \n     boolean tokenFound \u003d false;\n     String message \u003d \"\";\n     AMRMTokenIdentifier appTokenIdentifier \u003d null;\n     try {\n       appTokenIdentifier \u003d selectAMRMTokenIdentifier(remoteUgi);\n       if (appTokenIdentifier \u003d\u003d null) {\n         tokenFound \u003d false;\n         message \u003d \"No AMRMToken found for user \" + remoteUgi.getUserName();\n       } else {\n         tokenFound \u003d true;\n       }\n     } catch (IOException e) {\n       tokenFound \u003d false;\n       message \u003d\n           \"Got exception while looking for AMRMToken for user \"\n               + remoteUgi.getUserName();\n     }\n \n     if (!tokenFound) {\n       LOG.warn(message);\n       throw RPCUtil.getRemoteException(message);\n     }\n \n-    return appTokenIdentifier.getApplicationAttemptId();\n+    return appTokenIdentifier;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private AMRMTokenIdentifier authorizeRequest()\n      throws YarnException {\n\n    UserGroupInformation remoteUgi;\n    try {\n      remoteUgi \u003d UserGroupInformation.getCurrentUser();\n    } catch (IOException e) {\n      String msg \u003d\n          \"Cannot obtain the user-name for authorizing ApplicationMaster. \"\n              + \"Got exception: \" + StringUtils.stringifyException(e);\n      LOG.warn(msg);\n      throw RPCUtil.getRemoteException(msg);\n    }\n\n    boolean tokenFound \u003d false;\n    String message \u003d \"\";\n    AMRMTokenIdentifier appTokenIdentifier \u003d null;\n    try {\n      appTokenIdentifier \u003d selectAMRMTokenIdentifier(remoteUgi);\n      if (appTokenIdentifier \u003d\u003d null) {\n        tokenFound \u003d false;\n        message \u003d \"No AMRMToken found for user \" + remoteUgi.getUserName();\n      } else {\n        tokenFound \u003d true;\n      }\n    } catch (IOException e) {\n      tokenFound \u003d false;\n      message \u003d\n          \"Got exception while looking for AMRMToken for user \"\n              + remoteUgi.getUserName();\n    }\n\n    if (!tokenFound) {\n      LOG.warn(message);\n      throw RPCUtil.getRemoteException(message);\n    }\n\n    return appTokenIdentifier;\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/ApplicationMasterService.java",
          "extendedDetails": {}
        }
      ]
    },
    "ac914f79bc80b152e71e7de5497b73f22824f4a7": {
      "type": "Ymultichange(Yparameterchange,Yreturntypechange,Ybodychange)",
      "commitMessage": "YARN-918. Remove ApplicationAttemptId from RegisterApplicationMasterRequestProto. Contributed by Vinod K V.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1504735 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "18/07/13 5:57 PM",
      "commitName": "ac914f79bc80b152e71e7de5497b73f22824f4a7",
      "commitAuthor": "Arun Murthy",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "YARN-918. Remove ApplicationAttemptId from RegisterApplicationMasterRequestProto. Contributed by Vinod K V.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1504735 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "18/07/13 5:57 PM",
          "commitName": "ac914f79bc80b152e71e7de5497b73f22824f4a7",
          "commitAuthor": "Arun Murthy",
          "commitDateOld": "18/07/13 12:03 PM",
          "commitNameOld": "32bc200d54928d39acdc837c2c77b4c443fb46be",
          "commitAuthorOld": "Arun Murthy",
          "daysBetweenCommits": 0.25,
          "commitsBetweenForRepo": 6,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,48 +1,39 @@\n-  private void authorizeRequest(ApplicationAttemptId appAttemptID)\n+  private ApplicationAttemptId authorizeRequest()\n       throws YarnException {\n \n-    String appAttemptIDStr \u003d appAttemptID.toString();\n-\n     UserGroupInformation remoteUgi;\n     try {\n       remoteUgi \u003d UserGroupInformation.getCurrentUser();\n     } catch (IOException e) {\n-      String msg \u003d \"Cannot obtain the user-name for ApplicationAttemptID: \"\n-          + appAttemptIDStr + \". Got exception: \"\n-          + StringUtils.stringifyException(e);\n+      String msg \u003d\n+          \"Cannot obtain the user-name for authorizing ApplicationMaster. \"\n+              + \"Got exception: \" + StringUtils.stringifyException(e);\n       LOG.warn(msg);\n       throw RPCUtil.getRemoteException(msg);\n     }\n \n     boolean tokenFound \u003d false;\n     String message \u003d \"\";\n     AMRMTokenIdentifier appTokenIdentifier \u003d null;\n     try {\n       appTokenIdentifier \u003d selectAMRMTokenIdentifier(remoteUgi);\n       if (appTokenIdentifier \u003d\u003d null) {\n         tokenFound \u003d false;\n-        message \u003d \"No AMRMToken found for \" + appAttemptIDStr;\n+        message \u003d \"No AMRMToken found for user \" + remoteUgi.getUserName();\n       } else {\n         tokenFound \u003d true;\n       }\n     } catch (IOException e) {\n       tokenFound \u003d false;\n       message \u003d\n-          \"Got exception while looking for AMRMToken for \" + appAttemptIDStr;\n+          \"Got exception while looking for AMRMToken for user \"\n+              + remoteUgi.getUserName();\n     }\n \n     if (!tokenFound) {\n       LOG.warn(message);\n       throw RPCUtil.getRemoteException(message);\n     }\n \n-    ApplicationAttemptId remoteApplicationAttemptId \u003d\n-        appTokenIdentifier.getApplicationAttemptId();\n-    if (!remoteApplicationAttemptId.equals(appAttemptID)) {\n-      String msg \u003d \"Unauthorized request from ApplicationMaster. \"\n-          + \"Expected ApplicationAttemptID: \" + remoteApplicationAttemptId\n-          + \" Found: \" + appAttemptIDStr;\n-      LOG.warn(msg);\n-      throw RPCUtil.getRemoteException(msg);\n-    }\n+    return appTokenIdentifier.getApplicationAttemptId();\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private ApplicationAttemptId authorizeRequest()\n      throws YarnException {\n\n    UserGroupInformation remoteUgi;\n    try {\n      remoteUgi \u003d UserGroupInformation.getCurrentUser();\n    } catch (IOException e) {\n      String msg \u003d\n          \"Cannot obtain the user-name for authorizing ApplicationMaster. \"\n              + \"Got exception: \" + StringUtils.stringifyException(e);\n      LOG.warn(msg);\n      throw RPCUtil.getRemoteException(msg);\n    }\n\n    boolean tokenFound \u003d false;\n    String message \u003d \"\";\n    AMRMTokenIdentifier appTokenIdentifier \u003d null;\n    try {\n      appTokenIdentifier \u003d selectAMRMTokenIdentifier(remoteUgi);\n      if (appTokenIdentifier \u003d\u003d null) {\n        tokenFound \u003d false;\n        message \u003d \"No AMRMToken found for user \" + remoteUgi.getUserName();\n      } else {\n        tokenFound \u003d true;\n      }\n    } catch (IOException e) {\n      tokenFound \u003d false;\n      message \u003d\n          \"Got exception while looking for AMRMToken for user \"\n              + remoteUgi.getUserName();\n    }\n\n    if (!tokenFound) {\n      LOG.warn(message);\n      throw RPCUtil.getRemoteException(message);\n    }\n\n    return appTokenIdentifier.getApplicationAttemptId();\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/ApplicationMasterService.java",
          "extendedDetails": {
            "oldValue": "[appAttemptID-ApplicationAttemptId]",
            "newValue": "[]"
          }
        },
        {
          "type": "Yreturntypechange",
          "commitMessage": "YARN-918. Remove ApplicationAttemptId from RegisterApplicationMasterRequestProto. Contributed by Vinod K V.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1504735 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "18/07/13 5:57 PM",
          "commitName": "ac914f79bc80b152e71e7de5497b73f22824f4a7",
          "commitAuthor": "Arun Murthy",
          "commitDateOld": "18/07/13 12:03 PM",
          "commitNameOld": "32bc200d54928d39acdc837c2c77b4c443fb46be",
          "commitAuthorOld": "Arun Murthy",
          "daysBetweenCommits": 0.25,
          "commitsBetweenForRepo": 6,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,48 +1,39 @@\n-  private void authorizeRequest(ApplicationAttemptId appAttemptID)\n+  private ApplicationAttemptId authorizeRequest()\n       throws YarnException {\n \n-    String appAttemptIDStr \u003d appAttemptID.toString();\n-\n     UserGroupInformation remoteUgi;\n     try {\n       remoteUgi \u003d UserGroupInformation.getCurrentUser();\n     } catch (IOException e) {\n-      String msg \u003d \"Cannot obtain the user-name for ApplicationAttemptID: \"\n-          + appAttemptIDStr + \". Got exception: \"\n-          + StringUtils.stringifyException(e);\n+      String msg \u003d\n+          \"Cannot obtain the user-name for authorizing ApplicationMaster. \"\n+              + \"Got exception: \" + StringUtils.stringifyException(e);\n       LOG.warn(msg);\n       throw RPCUtil.getRemoteException(msg);\n     }\n \n     boolean tokenFound \u003d false;\n     String message \u003d \"\";\n     AMRMTokenIdentifier appTokenIdentifier \u003d null;\n     try {\n       appTokenIdentifier \u003d selectAMRMTokenIdentifier(remoteUgi);\n       if (appTokenIdentifier \u003d\u003d null) {\n         tokenFound \u003d false;\n-        message \u003d \"No AMRMToken found for \" + appAttemptIDStr;\n+        message \u003d \"No AMRMToken found for user \" + remoteUgi.getUserName();\n       } else {\n         tokenFound \u003d true;\n       }\n     } catch (IOException e) {\n       tokenFound \u003d false;\n       message \u003d\n-          \"Got exception while looking for AMRMToken for \" + appAttemptIDStr;\n+          \"Got exception while looking for AMRMToken for user \"\n+              + remoteUgi.getUserName();\n     }\n \n     if (!tokenFound) {\n       LOG.warn(message);\n       throw RPCUtil.getRemoteException(message);\n     }\n \n-    ApplicationAttemptId remoteApplicationAttemptId \u003d\n-        appTokenIdentifier.getApplicationAttemptId();\n-    if (!remoteApplicationAttemptId.equals(appAttemptID)) {\n-      String msg \u003d \"Unauthorized request from ApplicationMaster. \"\n-          + \"Expected ApplicationAttemptID: \" + remoteApplicationAttemptId\n-          + \" Found: \" + appAttemptIDStr;\n-      LOG.warn(msg);\n-      throw RPCUtil.getRemoteException(msg);\n-    }\n+    return appTokenIdentifier.getApplicationAttemptId();\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private ApplicationAttemptId authorizeRequest()\n      throws YarnException {\n\n    UserGroupInformation remoteUgi;\n    try {\n      remoteUgi \u003d UserGroupInformation.getCurrentUser();\n    } catch (IOException e) {\n      String msg \u003d\n          \"Cannot obtain the user-name for authorizing ApplicationMaster. \"\n              + \"Got exception: \" + StringUtils.stringifyException(e);\n      LOG.warn(msg);\n      throw RPCUtil.getRemoteException(msg);\n    }\n\n    boolean tokenFound \u003d false;\n    String message \u003d \"\";\n    AMRMTokenIdentifier appTokenIdentifier \u003d null;\n    try {\n      appTokenIdentifier \u003d selectAMRMTokenIdentifier(remoteUgi);\n      if (appTokenIdentifier \u003d\u003d null) {\n        tokenFound \u003d false;\n        message \u003d \"No AMRMToken found for user \" + remoteUgi.getUserName();\n      } else {\n        tokenFound \u003d true;\n      }\n    } catch (IOException e) {\n      tokenFound \u003d false;\n      message \u003d\n          \"Got exception while looking for AMRMToken for user \"\n              + remoteUgi.getUserName();\n    }\n\n    if (!tokenFound) {\n      LOG.warn(message);\n      throw RPCUtil.getRemoteException(message);\n    }\n\n    return appTokenIdentifier.getApplicationAttemptId();\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/ApplicationMasterService.java",
          "extendedDetails": {
            "oldValue": "void",
            "newValue": "ApplicationAttemptId"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "YARN-918. Remove ApplicationAttemptId from RegisterApplicationMasterRequestProto. Contributed by Vinod K V.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1504735 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "18/07/13 5:57 PM",
          "commitName": "ac914f79bc80b152e71e7de5497b73f22824f4a7",
          "commitAuthor": "Arun Murthy",
          "commitDateOld": "18/07/13 12:03 PM",
          "commitNameOld": "32bc200d54928d39acdc837c2c77b4c443fb46be",
          "commitAuthorOld": "Arun Murthy",
          "daysBetweenCommits": 0.25,
          "commitsBetweenForRepo": 6,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,48 +1,39 @@\n-  private void authorizeRequest(ApplicationAttemptId appAttemptID)\n+  private ApplicationAttemptId authorizeRequest()\n       throws YarnException {\n \n-    String appAttemptIDStr \u003d appAttemptID.toString();\n-\n     UserGroupInformation remoteUgi;\n     try {\n       remoteUgi \u003d UserGroupInformation.getCurrentUser();\n     } catch (IOException e) {\n-      String msg \u003d \"Cannot obtain the user-name for ApplicationAttemptID: \"\n-          + appAttemptIDStr + \". Got exception: \"\n-          + StringUtils.stringifyException(e);\n+      String msg \u003d\n+          \"Cannot obtain the user-name for authorizing ApplicationMaster. \"\n+              + \"Got exception: \" + StringUtils.stringifyException(e);\n       LOG.warn(msg);\n       throw RPCUtil.getRemoteException(msg);\n     }\n \n     boolean tokenFound \u003d false;\n     String message \u003d \"\";\n     AMRMTokenIdentifier appTokenIdentifier \u003d null;\n     try {\n       appTokenIdentifier \u003d selectAMRMTokenIdentifier(remoteUgi);\n       if (appTokenIdentifier \u003d\u003d null) {\n         tokenFound \u003d false;\n-        message \u003d \"No AMRMToken found for \" + appAttemptIDStr;\n+        message \u003d \"No AMRMToken found for user \" + remoteUgi.getUserName();\n       } else {\n         tokenFound \u003d true;\n       }\n     } catch (IOException e) {\n       tokenFound \u003d false;\n       message \u003d\n-          \"Got exception while looking for AMRMToken for \" + appAttemptIDStr;\n+          \"Got exception while looking for AMRMToken for user \"\n+              + remoteUgi.getUserName();\n     }\n \n     if (!tokenFound) {\n       LOG.warn(message);\n       throw RPCUtil.getRemoteException(message);\n     }\n \n-    ApplicationAttemptId remoteApplicationAttemptId \u003d\n-        appTokenIdentifier.getApplicationAttemptId();\n-    if (!remoteApplicationAttemptId.equals(appAttemptID)) {\n-      String msg \u003d \"Unauthorized request from ApplicationMaster. \"\n-          + \"Expected ApplicationAttemptID: \" + remoteApplicationAttemptId\n-          + \" Found: \" + appAttemptIDStr;\n-      LOG.warn(msg);\n-      throw RPCUtil.getRemoteException(msg);\n-    }\n+    return appTokenIdentifier.getApplicationAttemptId();\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private ApplicationAttemptId authorizeRequest()\n      throws YarnException {\n\n    UserGroupInformation remoteUgi;\n    try {\n      remoteUgi \u003d UserGroupInformation.getCurrentUser();\n    } catch (IOException e) {\n      String msg \u003d\n          \"Cannot obtain the user-name for authorizing ApplicationMaster. \"\n              + \"Got exception: \" + StringUtils.stringifyException(e);\n      LOG.warn(msg);\n      throw RPCUtil.getRemoteException(msg);\n    }\n\n    boolean tokenFound \u003d false;\n    String message \u003d \"\";\n    AMRMTokenIdentifier appTokenIdentifier \u003d null;\n    try {\n      appTokenIdentifier \u003d selectAMRMTokenIdentifier(remoteUgi);\n      if (appTokenIdentifier \u003d\u003d null) {\n        tokenFound \u003d false;\n        message \u003d \"No AMRMToken found for user \" + remoteUgi.getUserName();\n      } else {\n        tokenFound \u003d true;\n      }\n    } catch (IOException e) {\n      tokenFound \u003d false;\n      message \u003d\n          \"Got exception while looking for AMRMToken for user \"\n              + remoteUgi.getUserName();\n    }\n\n    if (!tokenFound) {\n      LOG.warn(message);\n      throw RPCUtil.getRemoteException(message);\n    }\n\n    return appTokenIdentifier.getApplicationAttemptId();\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/ApplicationMasterService.java",
          "extendedDetails": {}
        }
      ]
    },
    "32bc200d54928d39acdc837c2c77b4c443fb46be": {
      "type": "Ybodychange",
      "commitMessage": "YARN-701. Use application tokens irrespective of secure or non-secure mode. Contributed by Vinod K V.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1504604 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "18/07/13 12:03 PM",
      "commitName": "32bc200d54928d39acdc837c2c77b4c443fb46be",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "17/07/13 12:31 AM",
      "commitNameOld": "c6facfb10db3f7791e35dd02d11990924a89711f",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 1.48,
      "commitsBetweenForRepo": 7,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,28 +1,48 @@\n   private void authorizeRequest(ApplicationAttemptId appAttemptID)\n       throws YarnException {\n \n-    if (!UserGroupInformation.isSecurityEnabled()) {\n-      return;\n-    }\n-\n     String appAttemptIDStr \u003d appAttemptID.toString();\n \n     UserGroupInformation remoteUgi;\n     try {\n       remoteUgi \u003d UserGroupInformation.getCurrentUser();\n     } catch (IOException e) {\n       String msg \u003d \"Cannot obtain the user-name for ApplicationAttemptID: \"\n           + appAttemptIDStr + \". Got exception: \"\n           + StringUtils.stringifyException(e);\n       LOG.warn(msg);\n       throw RPCUtil.getRemoteException(msg);\n     }\n \n-    if (!remoteUgi.getUserName().equals(appAttemptIDStr)) {\n+    boolean tokenFound \u003d false;\n+    String message \u003d \"\";\n+    AMRMTokenIdentifier appTokenIdentifier \u003d null;\n+    try {\n+      appTokenIdentifier \u003d selectAMRMTokenIdentifier(remoteUgi);\n+      if (appTokenIdentifier \u003d\u003d null) {\n+        tokenFound \u003d false;\n+        message \u003d \"No AMRMToken found for \" + appAttemptIDStr;\n+      } else {\n+        tokenFound \u003d true;\n+      }\n+    } catch (IOException e) {\n+      tokenFound \u003d false;\n+      message \u003d\n+          \"Got exception while looking for AMRMToken for \" + appAttemptIDStr;\n+    }\n+\n+    if (!tokenFound) {\n+      LOG.warn(message);\n+      throw RPCUtil.getRemoteException(message);\n+    }\n+\n+    ApplicationAttemptId remoteApplicationAttemptId \u003d\n+        appTokenIdentifier.getApplicationAttemptId();\n+    if (!remoteApplicationAttemptId.equals(appAttemptID)) {\n       String msg \u003d \"Unauthorized request from ApplicationMaster. \"\n-          + \"Expected ApplicationAttemptID: \" + remoteUgi.getUserName()\n+          + \"Expected ApplicationAttemptID: \" + remoteApplicationAttemptId\n           + \" Found: \" + appAttemptIDStr;\n       LOG.warn(msg);\n       throw RPCUtil.getRemoteException(msg);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void authorizeRequest(ApplicationAttemptId appAttemptID)\n      throws YarnException {\n\n    String appAttemptIDStr \u003d appAttemptID.toString();\n\n    UserGroupInformation remoteUgi;\n    try {\n      remoteUgi \u003d UserGroupInformation.getCurrentUser();\n    } catch (IOException e) {\n      String msg \u003d \"Cannot obtain the user-name for ApplicationAttemptID: \"\n          + appAttemptIDStr + \". Got exception: \"\n          + StringUtils.stringifyException(e);\n      LOG.warn(msg);\n      throw RPCUtil.getRemoteException(msg);\n    }\n\n    boolean tokenFound \u003d false;\n    String message \u003d \"\";\n    AMRMTokenIdentifier appTokenIdentifier \u003d null;\n    try {\n      appTokenIdentifier \u003d selectAMRMTokenIdentifier(remoteUgi);\n      if (appTokenIdentifier \u003d\u003d null) {\n        tokenFound \u003d false;\n        message \u003d \"No AMRMToken found for \" + appAttemptIDStr;\n      } else {\n        tokenFound \u003d true;\n      }\n    } catch (IOException e) {\n      tokenFound \u003d false;\n      message \u003d\n          \"Got exception while looking for AMRMToken for \" + appAttemptIDStr;\n    }\n\n    if (!tokenFound) {\n      LOG.warn(message);\n      throw RPCUtil.getRemoteException(message);\n    }\n\n    ApplicationAttemptId remoteApplicationAttemptId \u003d\n        appTokenIdentifier.getApplicationAttemptId();\n    if (!remoteApplicationAttemptId.equals(appAttemptID)) {\n      String msg \u003d \"Unauthorized request from ApplicationMaster. \"\n          + \"Expected ApplicationAttemptID: \" + remoteApplicationAttemptId\n          + \" Found: \" + appAttemptIDStr;\n      LOG.warn(msg);\n      throw RPCUtil.getRemoteException(msg);\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/ApplicationMasterService.java",
      "extendedDetails": {}
    },
    "a83fb61ac07c0468cbc7a38526e92683883dd932": {
      "type": "Yexceptionschange",
      "commitMessage": "YARN-635. Renamed YarnRemoteException to YarnException. Contributed by Siddharth Seth.\nMAPREDUCE-5301. Updated MR code to work with YARN-635 changes of renaming YarnRemoteException to YarnException. Contributed by Siddharth Seth\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1489283 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "03/06/13 9:05 PM",
      "commitName": "a83fb61ac07c0468cbc7a38526e92683883dd932",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "03/06/13 5:34 PM",
      "commitNameOld": "d33534c4fb35cb82ff8d56abeeb63a949e72a031",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 0.15,
      "commitsBetweenForRepo": 5,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,28 +1,28 @@\n   private void authorizeRequest(ApplicationAttemptId appAttemptID)\n-      throws YarnRemoteException {\n+      throws YarnException {\n \n     if (!UserGroupInformation.isSecurityEnabled()) {\n       return;\n     }\n \n     String appAttemptIDStr \u003d appAttemptID.toString();\n \n     UserGroupInformation remoteUgi;\n     try {\n       remoteUgi \u003d UserGroupInformation.getCurrentUser();\n     } catch (IOException e) {\n       String msg \u003d \"Cannot obtain the user-name for ApplicationAttemptID: \"\n           + appAttemptIDStr + \". Got exception: \"\n           + StringUtils.stringifyException(e);\n       LOG.warn(msg);\n       throw RPCUtil.getRemoteException(msg);\n     }\n \n     if (!remoteUgi.getUserName().equals(appAttemptIDStr)) {\n       String msg \u003d \"Unauthorized request from ApplicationMaster. \"\n           + \"Expected ApplicationAttemptID: \" + remoteUgi.getUserName()\n           + \" Found: \" + appAttemptIDStr;\n       LOG.warn(msg);\n       throw RPCUtil.getRemoteException(msg);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void authorizeRequest(ApplicationAttemptId appAttemptID)\n      throws YarnException {\n\n    if (!UserGroupInformation.isSecurityEnabled()) {\n      return;\n    }\n\n    String appAttemptIDStr \u003d appAttemptID.toString();\n\n    UserGroupInformation remoteUgi;\n    try {\n      remoteUgi \u003d UserGroupInformation.getCurrentUser();\n    } catch (IOException e) {\n      String msg \u003d \"Cannot obtain the user-name for ApplicationAttemptID: \"\n          + appAttemptIDStr + \". Got exception: \"\n          + StringUtils.stringifyException(e);\n      LOG.warn(msg);\n      throw RPCUtil.getRemoteException(msg);\n    }\n\n    if (!remoteUgi.getUserName().equals(appAttemptIDStr)) {\n      String msg \u003d \"Unauthorized request from ApplicationMaster. \"\n          + \"Expected ApplicationAttemptID: \" + remoteUgi.getUserName()\n          + \" Found: \" + appAttemptIDStr;\n      LOG.warn(msg);\n      throw RPCUtil.getRemoteException(msg);\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/ApplicationMasterService.java",
      "extendedDetails": {
        "oldValue": "[YarnRemoteException]",
        "newValue": "[YarnException]"
      }
    },
    "e1fdf62123625e4ba399af02f8aad500637d29d1": {
      "type": "Yfilerename",
      "commitMessage": "YARN-1. Promote YARN to be a sub-project of Apache Hadoop.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1370666 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "07/08/12 10:22 PM",
      "commitName": "e1fdf62123625e4ba399af02f8aad500637d29d1",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "07/08/12 7:53 PM",
      "commitNameOld": "34554d1e11ee1d5b564d7d9ed3e6d55931d72749",
      "commitAuthorOld": "Aaron Myers",
      "daysBetweenCommits": 0.1,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  private void authorizeRequest(ApplicationAttemptId appAttemptID)\n      throws YarnRemoteException {\n\n    if (!UserGroupInformation.isSecurityEnabled()) {\n      return;\n    }\n\n    String appAttemptIDStr \u003d appAttemptID.toString();\n\n    UserGroupInformation remoteUgi;\n    try {\n      remoteUgi \u003d UserGroupInformation.getCurrentUser();\n    } catch (IOException e) {\n      String msg \u003d \"Cannot obtain the user-name for ApplicationAttemptID: \"\n          + appAttemptIDStr + \". Got exception: \"\n          + StringUtils.stringifyException(e);\n      LOG.warn(msg);\n      throw RPCUtil.getRemoteException(msg);\n    }\n\n    if (!remoteUgi.getUserName().equals(appAttemptIDStr)) {\n      String msg \u003d \"Unauthorized request from ApplicationMaster. \"\n          + \"Expected ApplicationAttemptID: \" + remoteUgi.getUserName()\n          + \" Found: \" + appAttemptIDStr;\n      LOG.warn(msg);\n      throw RPCUtil.getRemoteException(msg);\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/ApplicationMasterService.java",
      "extendedDetails": {
        "oldPath": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/ApplicationMasterService.java",
        "newPath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/ApplicationMasterService.java"
      }
    },
    "db8ac0ec3cbec046f9cf32644c16fd2a51dd85a2": {
      "type": "Yintroduced",
      "commitMessage": "MAPREDUCE-3257. Added authorization checks for the protocol between ResourceManager and ApplicatoinMaster. Contributed by Vinod K V. \n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1189630 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "26/10/11 11:24 PM",
      "commitName": "db8ac0ec3cbec046f9cf32644c16fd2a51dd85a2",
      "commitAuthor": "Arun Murthy",
      "diff": "@@ -0,0 +1,28 @@\n+  private void authorizeRequest(ApplicationAttemptId appAttemptID)\n+      throws YarnRemoteException {\n+\n+    if (!UserGroupInformation.isSecurityEnabled()) {\n+      return;\n+    }\n+\n+    String appAttemptIDStr \u003d appAttemptID.toString();\n+\n+    UserGroupInformation remoteUgi;\n+    try {\n+      remoteUgi \u003d UserGroupInformation.getCurrentUser();\n+    } catch (IOException e) {\n+      String msg \u003d \"Cannot obtain the user-name for ApplicationAttemptID: \"\n+          + appAttemptIDStr + \". Got exception: \"\n+          + StringUtils.stringifyException(e);\n+      LOG.warn(msg);\n+      throw RPCUtil.getRemoteException(msg);\n+    }\n+\n+    if (!remoteUgi.getUserName().equals(appAttemptIDStr)) {\n+      String msg \u003d \"Unauthorized request from ApplicationMaster. \"\n+          + \"Expected ApplicationAttemptID: \" + remoteUgi.getUserName()\n+          + \" Found: \" + appAttemptIDStr;\n+      LOG.warn(msg);\n+      throw RPCUtil.getRemoteException(msg);\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private void authorizeRequest(ApplicationAttemptId appAttemptID)\n      throws YarnRemoteException {\n\n    if (!UserGroupInformation.isSecurityEnabled()) {\n      return;\n    }\n\n    String appAttemptIDStr \u003d appAttemptID.toString();\n\n    UserGroupInformation remoteUgi;\n    try {\n      remoteUgi \u003d UserGroupInformation.getCurrentUser();\n    } catch (IOException e) {\n      String msg \u003d \"Cannot obtain the user-name for ApplicationAttemptID: \"\n          + appAttemptIDStr + \". Got exception: \"\n          + StringUtils.stringifyException(e);\n      LOG.warn(msg);\n      throw RPCUtil.getRemoteException(msg);\n    }\n\n    if (!remoteUgi.getUserName().equals(appAttemptIDStr)) {\n      String msg \u003d \"Unauthorized request from ApplicationMaster. \"\n          + \"Expected ApplicationAttemptID: \" + remoteUgi.getUserName()\n          + \" Found: \" + appAttemptIDStr;\n      LOG.warn(msg);\n      throw RPCUtil.getRemoteException(msg);\n    }\n  }",
      "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/ApplicationMasterService.java"
    }
  }
}