{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "FSDirectory.java",
  "functionName": "isNonEmptyDirectory",
  "functionId": "isNonEmptyDirectory___inodesInPath-INodesInPath",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
  "functionStartLine": 769,
  "functionEndLine": 782,
  "numCommitsSeen": 564,
  "timeTaken": 13103,
  "changeHistory": [
    "67f2c491fe3cd400605fb6082fd3504bc5e97037",
    "5776a41da08af653206bb94d7c76c9c4dcce059a",
    "475c6b4978045d55d1ebcea69cc9a2f24355aca2",
    "0689363343a281a6f7f6f395227668bddc2663eb",
    "70cff9e2f0c8f78c1dc54a064182971bb2106795",
    "b1333e5b561d01a010e2e1311e8501879f377bdc",
    "2372e394dd99d69d396327d5a5e172953a8b8c6a",
    "099762a0bc960066f8157fdd1e495b6752a6f802",
    "0e796b61e829c4bf763caf13b0f53cb1bcefdeee",
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1",
    "d86f3183d93714ba078416af4f609d26376eadb0",
    "a196766ea07775f18ded69bd9e8d239f8cfd3ccc"
  ],
  "changeHistoryShort": {
    "67f2c491fe3cd400605fb6082fd3504bc5e97037": "Ymodifierchange",
    "5776a41da08af653206bb94d7c76c9c4dcce059a": "Ybodychange",
    "475c6b4978045d55d1ebcea69cc9a2f24355aca2": "Ymultichange(Yparameterchange,Yexceptionschange,Ybodychange)",
    "0689363343a281a6f7f6f395227668bddc2663eb": "Ybodychange",
    "70cff9e2f0c8f78c1dc54a064182971bb2106795": "Ybodychange",
    "b1333e5b561d01a010e2e1311e8501879f377bdc": "Ybodychange",
    "2372e394dd99d69d396327d5a5e172953a8b8c6a": "Ybodychange",
    "099762a0bc960066f8157fdd1e495b6752a6f802": "Ybodychange",
    "0e796b61e829c4bf763caf13b0f53cb1bcefdeee": "Ymultichange(Yrename,Yparameterchange,Yexceptionschange,Ybodychange)",
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1": "Yfilerename",
    "d86f3183d93714ba078416af4f609d26376eadb0": "Yfilerename",
    "a196766ea07775f18ded69bd9e8d239f8cfd3ccc": "Yintroduced"
  },
  "changeHistoryDetails": {
    "67f2c491fe3cd400605fb6082fd3504bc5e97037": {
      "type": "Ymodifierchange",
      "commitMessage": "HDFS-14802. The feature of protect directories should be used in RenameOp (#1669)\n\n",
      "commitDate": "15/11/19 12:35 PM",
      "commitName": "67f2c491fe3cd400605fb6082fd3504bc5e97037",
      "commitAuthor": "Hui Fei",
      "commitDateOld": "03/09/19 9:29 AM",
      "commitNameOld": "3c117163a343d7da7ac958e22789b461c24efa5f",
      "commitAuthorOld": "Xiaoyu Yao",
      "daysBetweenCommits": 73.17,
      "commitsBetweenForRepo": 441,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,14 +1,14 @@\n-  boolean isNonEmptyDirectory(INodesInPath inodesInPath) {\n+  public boolean isNonEmptyDirectory(INodesInPath inodesInPath) {\n     readLock();\n     try {\n       final INode inode \u003d inodesInPath.getLastINode();\n       if (inode \u003d\u003d null || !inode.isDirectory()) {\n         //not found or not a directory\n         return false;\n       }\n       final int s \u003d inodesInPath.getPathSnapshotId();\n       return !inode.asDirectory().getChildrenList(s).isEmpty();\n     } finally {\n       readUnlock();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public boolean isNonEmptyDirectory(INodesInPath inodesInPath) {\n    readLock();\n    try {\n      final INode inode \u003d inodesInPath.getLastINode();\n      if (inode \u003d\u003d null || !inode.isDirectory()) {\n        //not found or not a directory\n        return false;\n      }\n      final int s \u003d inodesInPath.getPathSnapshotId();\n      return !inode.asDirectory().getChildrenList(s).isEmpty();\n    } finally {\n      readUnlock();\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
      "extendedDetails": {
        "oldValue": "[]",
        "newValue": "[public]"
      }
    },
    "5776a41da08af653206bb94d7c76c9c4dcce059a": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-7498. Simplify the logic in INodesInPath. Contributed by Jing Zhao.\n",
      "commitDate": "09/12/14 11:37 AM",
      "commitName": "5776a41da08af653206bb94d7c76c9c4dcce059a",
      "commitAuthor": "Jing Zhao",
      "commitDateOld": "08/12/14 11:52 AM",
      "commitNameOld": "6c5bbd7a42d1e8b4416fd8870fd60c67867b35c9",
      "commitAuthorOld": "Haohui Mai",
      "daysBetweenCommits": 0.99,
      "commitsBetweenForRepo": 14,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,14 @@\n   boolean isNonEmptyDirectory(INodesInPath inodesInPath) {\n     readLock();\n     try {\n-      final INode[] inodes \u003d inodesInPath.getINodes();\n-      final INode inode \u003d inodes[inodes.length - 1];\n+      final INode inode \u003d inodesInPath.getLastINode();\n       if (inode \u003d\u003d null || !inode.isDirectory()) {\n         //not found or not a directory\n         return false;\n       }\n       final int s \u003d inodesInPath.getPathSnapshotId();\n       return !inode.asDirectory().getChildrenList(s).isEmpty();\n     } finally {\n       readUnlock();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  boolean isNonEmptyDirectory(INodesInPath inodesInPath) {\n    readLock();\n    try {\n      final INode inode \u003d inodesInPath.getLastINode();\n      if (inode \u003d\u003d null || !inode.isDirectory()) {\n        //not found or not a directory\n        return false;\n      }\n      final int s \u003d inodesInPath.getPathSnapshotId();\n      return !inode.asDirectory().getChildrenList(s).isEmpty();\n    } finally {\n      readUnlock();\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
      "extendedDetails": {}
    },
    "475c6b4978045d55d1ebcea69cc9a2f24355aca2": {
      "type": "Ymultichange(Yparameterchange,Yexceptionschange,Ybodychange)",
      "commitMessage": "HDFS-7474. Avoid resolving path in FSPermissionChecker. Contributed by Jing Zhao.\n",
      "commitDate": "05/12/14 2:17 PM",
      "commitName": "475c6b4978045d55d1ebcea69cc9a2f24355aca2",
      "commitAuthor": "Jing Zhao",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-7474. Avoid resolving path in FSPermissionChecker. Contributed by Jing Zhao.\n",
          "commitDate": "05/12/14 2:17 PM",
          "commitName": "475c6b4978045d55d1ebcea69cc9a2f24355aca2",
          "commitAuthor": "Jing Zhao",
          "commitDateOld": "04/12/14 2:09 PM",
          "commitNameOld": "26d8dec756da1d9bd3df3b41a4dd5d8ff03bc5b2",
          "commitAuthorOld": "Haohui Mai",
          "daysBetweenCommits": 1.01,
          "commitsBetweenForRepo": 9,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,15 +1,15 @@\n-  boolean isNonEmptyDirectory(String path) throws UnresolvedLinkException {\n+  boolean isNonEmptyDirectory(INodesInPath inodesInPath) {\n     readLock();\n     try {\n-      final INodesInPath inodesInPath \u003d getLastINodeInPath(path, false);\n-      final INode inode \u003d inodesInPath.getINode(0);\n+      final INode[] inodes \u003d inodesInPath.getINodes();\n+      final INode inode \u003d inodes[inodes.length - 1];\n       if (inode \u003d\u003d null || !inode.isDirectory()) {\n         //not found or not a directory\n         return false;\n       }\n       final int s \u003d inodesInPath.getPathSnapshotId();\n       return !inode.asDirectory().getChildrenList(s).isEmpty();\n     } finally {\n       readUnlock();\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  boolean isNonEmptyDirectory(INodesInPath inodesInPath) {\n    readLock();\n    try {\n      final INode[] inodes \u003d inodesInPath.getINodes();\n      final INode inode \u003d inodes[inodes.length - 1];\n      if (inode \u003d\u003d null || !inode.isDirectory()) {\n        //not found or not a directory\n        return false;\n      }\n      final int s \u003d inodesInPath.getPathSnapshotId();\n      return !inode.asDirectory().getChildrenList(s).isEmpty();\n    } finally {\n      readUnlock();\n    }\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
          "extendedDetails": {
            "oldValue": "[path-String]",
            "newValue": "[inodesInPath-INodesInPath]"
          }
        },
        {
          "type": "Yexceptionschange",
          "commitMessage": "HDFS-7474. Avoid resolving path in FSPermissionChecker. Contributed by Jing Zhao.\n",
          "commitDate": "05/12/14 2:17 PM",
          "commitName": "475c6b4978045d55d1ebcea69cc9a2f24355aca2",
          "commitAuthor": "Jing Zhao",
          "commitDateOld": "04/12/14 2:09 PM",
          "commitNameOld": "26d8dec756da1d9bd3df3b41a4dd5d8ff03bc5b2",
          "commitAuthorOld": "Haohui Mai",
          "daysBetweenCommits": 1.01,
          "commitsBetweenForRepo": 9,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,15 +1,15 @@\n-  boolean isNonEmptyDirectory(String path) throws UnresolvedLinkException {\n+  boolean isNonEmptyDirectory(INodesInPath inodesInPath) {\n     readLock();\n     try {\n-      final INodesInPath inodesInPath \u003d getLastINodeInPath(path, false);\n-      final INode inode \u003d inodesInPath.getINode(0);\n+      final INode[] inodes \u003d inodesInPath.getINodes();\n+      final INode inode \u003d inodes[inodes.length - 1];\n       if (inode \u003d\u003d null || !inode.isDirectory()) {\n         //not found or not a directory\n         return false;\n       }\n       final int s \u003d inodesInPath.getPathSnapshotId();\n       return !inode.asDirectory().getChildrenList(s).isEmpty();\n     } finally {\n       readUnlock();\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  boolean isNonEmptyDirectory(INodesInPath inodesInPath) {\n    readLock();\n    try {\n      final INode[] inodes \u003d inodesInPath.getINodes();\n      final INode inode \u003d inodes[inodes.length - 1];\n      if (inode \u003d\u003d null || !inode.isDirectory()) {\n        //not found or not a directory\n        return false;\n      }\n      final int s \u003d inodesInPath.getPathSnapshotId();\n      return !inode.asDirectory().getChildrenList(s).isEmpty();\n    } finally {\n      readUnlock();\n    }\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
          "extendedDetails": {
            "oldValue": "[UnresolvedLinkException]",
            "newValue": "[]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-7474. Avoid resolving path in FSPermissionChecker. Contributed by Jing Zhao.\n",
          "commitDate": "05/12/14 2:17 PM",
          "commitName": "475c6b4978045d55d1ebcea69cc9a2f24355aca2",
          "commitAuthor": "Jing Zhao",
          "commitDateOld": "04/12/14 2:09 PM",
          "commitNameOld": "26d8dec756da1d9bd3df3b41a4dd5d8ff03bc5b2",
          "commitAuthorOld": "Haohui Mai",
          "daysBetweenCommits": 1.01,
          "commitsBetweenForRepo": 9,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,15 +1,15 @@\n-  boolean isNonEmptyDirectory(String path) throws UnresolvedLinkException {\n+  boolean isNonEmptyDirectory(INodesInPath inodesInPath) {\n     readLock();\n     try {\n-      final INodesInPath inodesInPath \u003d getLastINodeInPath(path, false);\n-      final INode inode \u003d inodesInPath.getINode(0);\n+      final INode[] inodes \u003d inodesInPath.getINodes();\n+      final INode inode \u003d inodes[inodes.length - 1];\n       if (inode \u003d\u003d null || !inode.isDirectory()) {\n         //not found or not a directory\n         return false;\n       }\n       final int s \u003d inodesInPath.getPathSnapshotId();\n       return !inode.asDirectory().getChildrenList(s).isEmpty();\n     } finally {\n       readUnlock();\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  boolean isNonEmptyDirectory(INodesInPath inodesInPath) {\n    readLock();\n    try {\n      final INode[] inodes \u003d inodesInPath.getINodes();\n      final INode inode \u003d inodes[inodes.length - 1];\n      if (inode \u003d\u003d null || !inode.isDirectory()) {\n        //not found or not a directory\n        return false;\n      }\n      final int s \u003d inodesInPath.getPathSnapshotId();\n      return !inode.asDirectory().getChildrenList(s).isEmpty();\n    } finally {\n      readUnlock();\n    }\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
          "extendedDetails": {}
        }
      ]
    },
    "0689363343a281a6f7f6f395227668bddc2663eb": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-6304. Consolidate the logic of path resolution in FSDirectory. Contributed by Haohui Mai.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1591411 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "30/04/14 10:44 AM",
      "commitName": "0689363343a281a6f7f6f395227668bddc2663eb",
      "commitAuthor": "Haohui Mai",
      "commitDateOld": "24/04/14 7:05 PM",
      "commitNameOld": "10a037cccb00c9f791da394bf2dc05985fb80612",
      "commitAuthorOld": "Jing Zhao",
      "daysBetweenCommits": 5.65,
      "commitsBetweenForRepo": 24,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,15 @@\n   boolean isNonEmptyDirectory(String path) throws UnresolvedLinkException {\n     readLock();\n     try {\n-      final INodesInPath inodesInPath \u003d rootDir.getLastINodeInPath(path, false);\n+      final INodesInPath inodesInPath \u003d getLastINodeInPath(path, false);\n       final INode inode \u003d inodesInPath.getINode(0);\n       if (inode \u003d\u003d null || !inode.isDirectory()) {\n         //not found or not a directory\n         return false;\n       }\n       final int s \u003d inodesInPath.getPathSnapshotId();\n       return !inode.asDirectory().getChildrenList(s).isEmpty();\n     } finally {\n       readUnlock();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  boolean isNonEmptyDirectory(String path) throws UnresolvedLinkException {\n    readLock();\n    try {\n      final INodesInPath inodesInPath \u003d getLastINodeInPath(path, false);\n      final INode inode \u003d inodesInPath.getINode(0);\n      if (inode \u003d\u003d null || !inode.isDirectory()) {\n        //not found or not a directory\n        return false;\n      }\n      final int s \u003d inodesInPath.getPathSnapshotId();\n      return !inode.asDirectory().getChildrenList(s).isEmpty();\n    } finally {\n      readUnlock();\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
      "extendedDetails": {}
    },
    "70cff9e2f0c8f78c1dc54a064182971bb2106795": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-5715. Use Snapshot ID to indicate the corresponding Snapshot for a FileDiff/DirectoryDiff. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1556353 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "07/01/14 12:52 PM",
      "commitName": "70cff9e2f0c8f78c1dc54a064182971bb2106795",
      "commitAuthor": "Jing Zhao",
      "commitDateOld": "14/12/13 2:13 AM",
      "commitNameOld": "44a6560b5da3f79d2299579a36e7a2a60a91f823",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 24.44,
      "commitsBetweenForRepo": 98,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,15 @@\n   boolean isNonEmptyDirectory(String path) throws UnresolvedLinkException {\n     readLock();\n     try {\n       final INodesInPath inodesInPath \u003d rootDir.getLastINodeInPath(path, false);\n       final INode inode \u003d inodesInPath.getINode(0);\n       if (inode \u003d\u003d null || !inode.isDirectory()) {\n         //not found or not a directory\n         return false;\n       }\n-      final Snapshot s \u003d inodesInPath.getPathSnapshot();\n+      final int s \u003d inodesInPath.getPathSnapshotId();\n       return !inode.asDirectory().getChildrenList(s).isEmpty();\n     } finally {\n       readUnlock();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  boolean isNonEmptyDirectory(String path) throws UnresolvedLinkException {\n    readLock();\n    try {\n      final INodesInPath inodesInPath \u003d rootDir.getLastINodeInPath(path, false);\n      final INode inode \u003d inodesInPath.getINode(0);\n      if (inode \u003d\u003d null || !inode.isDirectory()) {\n        //not found or not a directory\n        return false;\n      }\n      final int s \u003d inodesInPath.getPathSnapshotId();\n      return !inode.asDirectory().getChildrenList(s).isEmpty();\n    } finally {\n      readUnlock();\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
      "extendedDetails": {}
    },
    "b1333e5b561d01a010e2e1311e8501879f377bdc": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-4545. With snapshots, FSDirectory.unprotectedSetReplication(..) always changes file replication but it may or may not changes block replication.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1452636 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "04/03/13 6:23 PM",
      "commitName": "b1333e5b561d01a010e2e1311e8501879f377bdc",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "27/02/13 7:08 PM",
      "commitNameOld": "c7cf85ccb4ff2f58839e113f1baf903a468b606d",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 4.97,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,15 @@\n   boolean isNonEmptyDirectory(String path) throws UnresolvedLinkException {\n     readLock();\n     try {\n       final INodesInPath inodesInPath \u003d rootDir.getLastINodeInPath(path, false);\n       final INode inode \u003d inodesInPath.getINode(0);\n       if (inode \u003d\u003d null || !inode.isDirectory()) {\n         //not found or not a directory\n         return false;\n       }\n       final Snapshot s \u003d inodesInPath.getPathSnapshot();\n-      return !((INodeDirectory)inode).getChildrenList(s).isEmpty();\n+      return !inode.asDirectory().getChildrenList(s).isEmpty();\n     } finally {\n       readUnlock();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  boolean isNonEmptyDirectory(String path) throws UnresolvedLinkException {\n    readLock();\n    try {\n      final INodesInPath inodesInPath \u003d rootDir.getLastINodeInPath(path, false);\n      final INode inode \u003d inodesInPath.getINode(0);\n      if (inode \u003d\u003d null || !inode.isDirectory()) {\n        //not found or not a directory\n        return false;\n      }\n      final Snapshot s \u003d inodesInPath.getPathSnapshot();\n      return !inode.asDirectory().getChildrenList(s).isEmpty();\n    } finally {\n      readUnlock();\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
      "extendedDetails": {}
    },
    "2372e394dd99d69d396327d5a5e172953a8b8c6a": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-4189. Renames the getMutableXxx methods to getXxx4Write and fix a bug that some getExistingPathINodes calls should be getINodesInPath4Write.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1441193 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "31/01/13 1:13 PM",
      "commitName": "2372e394dd99d69d396327d5a5e172953a8b8c6a",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "25/01/13 4:01 PM",
      "commitNameOld": "a3bf2083867db5d848ea14f145d120f02b820af2",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 5.88,
      "commitsBetweenForRepo": 22,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,15 @@\n   boolean isNonEmptyDirectory(String path) throws UnresolvedLinkException {\n     readLock();\n     try {\n-      final INodesInPath inodesInPath \u003d rootDir.getINodesInPath(path, false);\n+      final INodesInPath inodesInPath \u003d rootDir.getLastINodeInPath(path, false);\n       final INode inode \u003d inodesInPath.getINode(0);\n       if (inode \u003d\u003d null || !inode.isDirectory()) {\n         //not found or not a directory\n         return false;\n       }\n       final Snapshot s \u003d inodesInPath.getPathSnapshot();\n       return !((INodeDirectory)inode).getChildrenList(s).isEmpty();\n     } finally {\n       readUnlock();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  boolean isNonEmptyDirectory(String path) throws UnresolvedLinkException {\n    readLock();\n    try {\n      final INodesInPath inodesInPath \u003d rootDir.getLastINodeInPath(path, false);\n      final INode inode \u003d inodesInPath.getINode(0);\n      if (inode \u003d\u003d null || !inode.isDirectory()) {\n        //not found or not a directory\n        return false;\n      }\n      final Snapshot s \u003d inodesInPath.getPathSnapshot();\n      return !((INodeDirectory)inode).getChildrenList(s).isEmpty();\n    } finally {\n      readUnlock();\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
      "extendedDetails": {}
    },
    "099762a0bc960066f8157fdd1e495b6752a6f802": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-4177. Add a snapshot parameter to INodeDirectory.getChildrenList() for selecting particular snapshot children list views.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1408923 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "13/11/12 11:59 AM",
      "commitName": "099762a0bc960066f8157fdd1e495b6752a6f802",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "09/11/12 4:49 PM",
      "commitNameOld": "40fe1ffbaa157afc3515bfb7a630dbfeca856f04",
      "commitAuthorOld": "",
      "daysBetweenCommits": 3.8,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,13 +1,15 @@\n   boolean isNonEmptyDirectory(String path) throws UnresolvedLinkException {\n     readLock();\n     try {\n-      final INode inode \u003d rootDir.getNode(path, false);\n+      final INodesInPath inodesInPath \u003d rootDir.getINodesInPath(path, false);\n+      final INode inode \u003d inodesInPath.getINode(0);\n       if (inode \u003d\u003d null || !inode.isDirectory()) {\n         //not found or not a directory\n         return false;\n       }\n-      return ((INodeDirectory)inode).getChildrenList().size() !\u003d 0;\n+      final Snapshot s \u003d inodesInPath.getPathSnapshot();\n+      return !((INodeDirectory)inode).getChildrenList(s).isEmpty();\n     } finally {\n       readUnlock();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  boolean isNonEmptyDirectory(String path) throws UnresolvedLinkException {\n    readLock();\n    try {\n      final INodesInPath inodesInPath \u003d rootDir.getINodesInPath(path, false);\n      final INode inode \u003d inodesInPath.getINode(0);\n      if (inode \u003d\u003d null || !inode.isDirectory()) {\n        //not found or not a directory\n        return false;\n      }\n      final Snapshot s \u003d inodesInPath.getPathSnapshot();\n      return !((INodeDirectory)inode).getChildrenList(s).isEmpty();\n    } finally {\n      readUnlock();\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
      "extendedDetails": {}
    },
    "0e796b61e829c4bf763caf13b0f53cb1bcefdeee": {
      "type": "Ymultichange(Yrename,Yparameterchange,Yexceptionschange,Ybodychange)",
      "commitMessage": "HDFS-4112. A few improvements on INodeDirectory include adding a utility method for casting; avoiding creation of new empty lists; cleaning up some code and rewriting some javadoc.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1402599 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "26/10/12 11:08 AM",
      "commitName": "0e796b61e829c4bf763caf13b0f53cb1bcefdeee",
      "commitAuthor": "Tsz-wo Sze",
      "subchanges": [
        {
          "type": "Yrename",
          "commitMessage": "HDFS-4112. A few improvements on INodeDirectory include adding a utility method for casting; avoiding creation of new empty lists; cleaning up some code and rewriting some javadoc.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1402599 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "26/10/12 11:08 AM",
          "commitName": "0e796b61e829c4bf763caf13b0f53cb1bcefdeee",
          "commitAuthor": "Tsz-wo Sze",
          "commitDateOld": "25/10/12 11:44 AM",
          "commitNameOld": "ba2ee1d7fb91462c861169224d250d2d90bec3a6",
          "commitAuthorOld": "Tsz-wo Sze",
          "daysBetweenCommits": 0.97,
          "commitsBetweenForRepo": 2,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,11 +1,13 @@\n-  boolean isEmpty() {\n+  boolean isNonEmptyDirectory(String path) throws UnresolvedLinkException {\n+    readLock();\n     try {\n-      return isDirEmpty(\"/\");\n-    } catch (UnresolvedLinkException e) {\n-      if(NameNode.stateChangeLog.isDebugEnabled()) {\n-        NameNode.stateChangeLog.debug(\"/ cannot be a symlink\");\n+      final INode inode \u003d rootDir.getNode(path, false);\n+      if (inode \u003d\u003d null || !inode.isDirectory()) {\n+        //not found or not a directory\n+        return false;\n       }\n-      assert false : \"/ cannot be a symlink\";\n-      return true;\n+      return ((INodeDirectory)inode).getChildrenList().size() !\u003d 0;\n+    } finally {\n+      readUnlock();\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  boolean isNonEmptyDirectory(String path) throws UnresolvedLinkException {\n    readLock();\n    try {\n      final INode inode \u003d rootDir.getNode(path, false);\n      if (inode \u003d\u003d null || !inode.isDirectory()) {\n        //not found or not a directory\n        return false;\n      }\n      return ((INodeDirectory)inode).getChildrenList().size() !\u003d 0;\n    } finally {\n      readUnlock();\n    }\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
          "extendedDetails": {
            "oldValue": "isEmpty",
            "newValue": "isNonEmptyDirectory"
          }
        },
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-4112. A few improvements on INodeDirectory include adding a utility method for casting; avoiding creation of new empty lists; cleaning up some code and rewriting some javadoc.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1402599 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "26/10/12 11:08 AM",
          "commitName": "0e796b61e829c4bf763caf13b0f53cb1bcefdeee",
          "commitAuthor": "Tsz-wo Sze",
          "commitDateOld": "25/10/12 11:44 AM",
          "commitNameOld": "ba2ee1d7fb91462c861169224d250d2d90bec3a6",
          "commitAuthorOld": "Tsz-wo Sze",
          "daysBetweenCommits": 0.97,
          "commitsBetweenForRepo": 2,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,11 +1,13 @@\n-  boolean isEmpty() {\n+  boolean isNonEmptyDirectory(String path) throws UnresolvedLinkException {\n+    readLock();\n     try {\n-      return isDirEmpty(\"/\");\n-    } catch (UnresolvedLinkException e) {\n-      if(NameNode.stateChangeLog.isDebugEnabled()) {\n-        NameNode.stateChangeLog.debug(\"/ cannot be a symlink\");\n+      final INode inode \u003d rootDir.getNode(path, false);\n+      if (inode \u003d\u003d null || !inode.isDirectory()) {\n+        //not found or not a directory\n+        return false;\n       }\n-      assert false : \"/ cannot be a symlink\";\n-      return true;\n+      return ((INodeDirectory)inode).getChildrenList().size() !\u003d 0;\n+    } finally {\n+      readUnlock();\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  boolean isNonEmptyDirectory(String path) throws UnresolvedLinkException {\n    readLock();\n    try {\n      final INode inode \u003d rootDir.getNode(path, false);\n      if (inode \u003d\u003d null || !inode.isDirectory()) {\n        //not found or not a directory\n        return false;\n      }\n      return ((INodeDirectory)inode).getChildrenList().size() !\u003d 0;\n    } finally {\n      readUnlock();\n    }\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
          "extendedDetails": {
            "oldValue": "[]",
            "newValue": "[path-String]"
          }
        },
        {
          "type": "Yexceptionschange",
          "commitMessage": "HDFS-4112. A few improvements on INodeDirectory include adding a utility method for casting; avoiding creation of new empty lists; cleaning up some code and rewriting some javadoc.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1402599 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "26/10/12 11:08 AM",
          "commitName": "0e796b61e829c4bf763caf13b0f53cb1bcefdeee",
          "commitAuthor": "Tsz-wo Sze",
          "commitDateOld": "25/10/12 11:44 AM",
          "commitNameOld": "ba2ee1d7fb91462c861169224d250d2d90bec3a6",
          "commitAuthorOld": "Tsz-wo Sze",
          "daysBetweenCommits": 0.97,
          "commitsBetweenForRepo": 2,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,11 +1,13 @@\n-  boolean isEmpty() {\n+  boolean isNonEmptyDirectory(String path) throws UnresolvedLinkException {\n+    readLock();\n     try {\n-      return isDirEmpty(\"/\");\n-    } catch (UnresolvedLinkException e) {\n-      if(NameNode.stateChangeLog.isDebugEnabled()) {\n-        NameNode.stateChangeLog.debug(\"/ cannot be a symlink\");\n+      final INode inode \u003d rootDir.getNode(path, false);\n+      if (inode \u003d\u003d null || !inode.isDirectory()) {\n+        //not found or not a directory\n+        return false;\n       }\n-      assert false : \"/ cannot be a symlink\";\n-      return true;\n+      return ((INodeDirectory)inode).getChildrenList().size() !\u003d 0;\n+    } finally {\n+      readUnlock();\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  boolean isNonEmptyDirectory(String path) throws UnresolvedLinkException {\n    readLock();\n    try {\n      final INode inode \u003d rootDir.getNode(path, false);\n      if (inode \u003d\u003d null || !inode.isDirectory()) {\n        //not found or not a directory\n        return false;\n      }\n      return ((INodeDirectory)inode).getChildrenList().size() !\u003d 0;\n    } finally {\n      readUnlock();\n    }\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
          "extendedDetails": {
            "oldValue": "[]",
            "newValue": "[UnresolvedLinkException]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-4112. A few improvements on INodeDirectory include adding a utility method for casting; avoiding creation of new empty lists; cleaning up some code and rewriting some javadoc.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1402599 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "26/10/12 11:08 AM",
          "commitName": "0e796b61e829c4bf763caf13b0f53cb1bcefdeee",
          "commitAuthor": "Tsz-wo Sze",
          "commitDateOld": "25/10/12 11:44 AM",
          "commitNameOld": "ba2ee1d7fb91462c861169224d250d2d90bec3a6",
          "commitAuthorOld": "Tsz-wo Sze",
          "daysBetweenCommits": 0.97,
          "commitsBetweenForRepo": 2,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,11 +1,13 @@\n-  boolean isEmpty() {\n+  boolean isNonEmptyDirectory(String path) throws UnresolvedLinkException {\n+    readLock();\n     try {\n-      return isDirEmpty(\"/\");\n-    } catch (UnresolvedLinkException e) {\n-      if(NameNode.stateChangeLog.isDebugEnabled()) {\n-        NameNode.stateChangeLog.debug(\"/ cannot be a symlink\");\n+      final INode inode \u003d rootDir.getNode(path, false);\n+      if (inode \u003d\u003d null || !inode.isDirectory()) {\n+        //not found or not a directory\n+        return false;\n       }\n-      assert false : \"/ cannot be a symlink\";\n-      return true;\n+      return ((INodeDirectory)inode).getChildrenList().size() !\u003d 0;\n+    } finally {\n+      readUnlock();\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  boolean isNonEmptyDirectory(String path) throws UnresolvedLinkException {\n    readLock();\n    try {\n      final INode inode \u003d rootDir.getNode(path, false);\n      if (inode \u003d\u003d null || !inode.isDirectory()) {\n        //not found or not a directory\n        return false;\n      }\n      return ((INodeDirectory)inode).getChildrenList().size() !\u003d 0;\n    } finally {\n      readUnlock();\n    }\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
          "extendedDetails": {}
        }
      ]
    },
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1": {
      "type": "Yfilerename",
      "commitMessage": "HADOOP-7560. Change src layout to be heirarchical. Contributed by Alejandro Abdelnur.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1161332 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/08/11 5:14 PM",
      "commitName": "cd7157784e5e5ddc4e77144d042e54dd0d04bac1",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "24/08/11 5:06 PM",
      "commitNameOld": "bb0005cfec5fd2861600ff5babd259b48ba18b63",
      "commitAuthorOld": "Arun Murthy",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  boolean isEmpty() {\n    try {\n      return isDirEmpty(\"/\");\n    } catch (UnresolvedLinkException e) {\n      if(NameNode.stateChangeLog.isDebugEnabled()) {\n        NameNode.stateChangeLog.debug(\"/ cannot be a symlink\");\n      }\n      assert false : \"/ cannot be a symlink\";\n      return true;\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
      "extendedDetails": {
        "oldPath": "hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
        "newPath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java"
      }
    },
    "d86f3183d93714ba078416af4f609d26376eadb0": {
      "type": "Yfilerename",
      "commitMessage": "HDFS-2096. Mavenization of hadoop-hdfs. Contributed by Alejandro Abdelnur.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1159702 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "19/08/11 10:36 AM",
      "commitName": "d86f3183d93714ba078416af4f609d26376eadb0",
      "commitAuthor": "Thomas White",
      "commitDateOld": "19/08/11 10:26 AM",
      "commitNameOld": "6ee5a73e0e91a2ef27753a32c576835e951d8119",
      "commitAuthorOld": "Thomas White",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  boolean isEmpty() {\n    try {\n      return isDirEmpty(\"/\");\n    } catch (UnresolvedLinkException e) {\n      if(NameNode.stateChangeLog.isDebugEnabled()) {\n        NameNode.stateChangeLog.debug(\"/ cannot be a symlink\");\n      }\n      assert false : \"/ cannot be a symlink\";\n      return true;\n    }\n  }",
      "path": "hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
      "extendedDetails": {
        "oldPath": "hdfs/src/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
        "newPath": "hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java"
      }
    },
    "a196766ea07775f18ded69bd9e8d239f8cfd3ccc": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-7106. Reorganize SVN layout to combine HDFS, Common, and MR in a single tree (project unsplit)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1134994 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "12/06/11 3:00 PM",
      "commitName": "a196766ea07775f18ded69bd9e8d239f8cfd3ccc",
      "commitAuthor": "Todd Lipcon",
      "diff": "@@ -0,0 +1,11 @@\n+  boolean isEmpty() {\n+    try {\n+      return isDirEmpty(\"/\");\n+    } catch (UnresolvedLinkException e) {\n+      if(NameNode.stateChangeLog.isDebugEnabled()) {\n+        NameNode.stateChangeLog.debug(\"/ cannot be a symlink\");\n+      }\n+      assert false : \"/ cannot be a symlink\";\n+      return true;\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  boolean isEmpty() {\n    try {\n      return isDirEmpty(\"/\");\n    } catch (UnresolvedLinkException e) {\n      if(NameNode.stateChangeLog.isDebugEnabled()) {\n        NameNode.stateChangeLog.debug(\"/ cannot be a symlink\");\n      }\n      assert false : \"/ cannot be a symlink\";\n      return true;\n    }\n  }",
      "path": "hdfs/src/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java"
    }
  }
}