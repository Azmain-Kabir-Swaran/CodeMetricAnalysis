{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "HostnameFilter.java",
  "functionName": "doFilter",
  "functionId": "doFilter___request-ServletRequest__response-ServletResponse__chain-FilterChain",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs-httpfs/src/main/java/org/apache/hadoop/lib/servlet/HostnameFilter.java",
  "functionStartLine": 70,
  "functionEndLine": 91,
  "numCommitsSeen": 5,
  "timeTaken": 514,
  "changeHistory": [
    "b3b9485271a7d16cb6ada7b9da6a0770196ad16b",
    "3334306512b5dc932814fded31a89ba1ee97cd9f"
  ],
  "changeHistoryShort": {
    "b3b9485271a7d16cb6ada7b9da6a0770196ad16b": "Ybodychange",
    "3334306512b5dc932814fded31a89ba1ee97cd9f": "Yintroduced"
  },
  "changeHistoryDetails": {
    "b3b9485271a7d16cb6ada7b9da6a0770196ad16b": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-4415. HostnameFilter should handle hostname resolution failures and continue processing. Contributed by Robert Kanter.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1434951 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "17/01/13 3:08 PM",
      "commitName": "b3b9485271a7d16cb6ada7b9da6a0770196ad16b",
      "commitAuthor": "Aaron Myers",
      "commitDateOld": "01/08/12 4:14 PM",
      "commitNameOld": "08e89662170010dd619c0df859c670cb37b630dd",
      "commitAuthorOld": "Alejandro Abdelnur",
      "daysBetweenCommits": 169.0,
      "commitsBetweenForRepo": 900,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,10 +1,22 @@\n   public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\n     throws IOException, ServletException {\n     try {\n-      String hostname \u003d InetAddress.getByName(request.getRemoteAddr()).getCanonicalHostName();\n+      String hostname;\n+      try {\n+        String address \u003d request.getRemoteAddr();\n+        if (address !\u003d null) {\n+          hostname \u003d InetAddress.getByName(address).getCanonicalHostName();\n+        } else {\n+          log.warn(\"Request remote address is NULL\");\n+          hostname \u003d \"???\";\n+        }\n+      } catch (UnknownHostException ex) {\n+        log.warn(\"Request remote address could not be resolved, {0}\", ex.toString(), ex);\n+        hostname \u003d \"???\";\n+      }\n       HOSTNAME_TL.set(hostname);\n       chain.doFilter(request, response);\n     } finally {\n       HOSTNAME_TL.remove();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\n    throws IOException, ServletException {\n    try {\n      String hostname;\n      try {\n        String address \u003d request.getRemoteAddr();\n        if (address !\u003d null) {\n          hostname \u003d InetAddress.getByName(address).getCanonicalHostName();\n        } else {\n          log.warn(\"Request remote address is NULL\");\n          hostname \u003d \"???\";\n        }\n      } catch (UnknownHostException ex) {\n        log.warn(\"Request remote address could not be resolved, {0}\", ex.toString(), ex);\n        hostname \u003d \"???\";\n      }\n      HOSTNAME_TL.set(hostname);\n      chain.doFilter(request, response);\n    } finally {\n      HOSTNAME_TL.remove();\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-httpfs/src/main/java/org/apache/hadoop/lib/servlet/HostnameFilter.java",
      "extendedDetails": {}
    },
    "3334306512b5dc932814fded31a89ba1ee97cd9f": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-2178. Contributing Hoop to HDFS, replacement for HDFS proxy with read/write capabilities. (tucu)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1212060 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "08/12/11 11:25 AM",
      "commitName": "3334306512b5dc932814fded31a89ba1ee97cd9f",
      "commitAuthor": "Alejandro Abdelnur",
      "diff": "@@ -0,0 +1,10 @@\n+  public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\n+    throws IOException, ServletException {\n+    try {\n+      String hostname \u003d InetAddress.getByName(request.getRemoteAddr()).getCanonicalHostName();\n+      HOSTNAME_TL.set(hostname);\n+      chain.doFilter(request, response);\n+    } finally {\n+      HOSTNAME_TL.remove();\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain)\n    throws IOException, ServletException {\n    try {\n      String hostname \u003d InetAddress.getByName(request.getRemoteAddr()).getCanonicalHostName();\n      HOSTNAME_TL.set(hostname);\n      chain.doFilter(request, response);\n    } finally {\n      HOSTNAME_TL.remove();\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-httpfs/src/main/java/org/apache/hadoop/lib/servlet/HostnameFilter.java"
    }
  }
}