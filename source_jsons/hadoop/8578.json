{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "FSImageFormatPBINode.java",
  "functionName": "loadAclEntries",
  "functionId": "loadAclEntries___proto-AclFeatureProto__stringTable-StringTable(modifiers-final)",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSImageFormatPBINode.java",
  "functionStartLine": 108,
  "functionEndLine": 115,
  "numCommitsSeen": 121,
  "timeTaken": 3349,
  "changeHistory": [
    "b60ca37914b22550e3630fa02742d40697decb31"
  ],
  "changeHistoryShort": {
    "b60ca37914b22550e3630fa02742d40697decb31": "Ymultichange(Yparameterchange,Ybodychange)"
  },
  "changeHistoryDetails": {
    "b60ca37914b22550e3630fa02742d40697decb31": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "Fix potential FSImage corruption. Contributed by Daryn Sharp.\n",
      "commitDate": "15/10/18 3:18 AM",
      "commitName": "b60ca37914b22550e3630fa02742d40697decb31",
      "commitAuthor": "Vinayakumar B",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "Fix potential FSImage corruption. Contributed by Daryn Sharp.\n",
          "commitDate": "15/10/18 3:18 AM",
          "commitName": "b60ca37914b22550e3630fa02742d40697decb31",
          "commitAuthor": "Vinayakumar B",
          "commitDateOld": "06/09/18 2:48 PM",
          "commitNameOld": "eca1a4bfe952fc184fe90dde50bac9b0e5293568",
          "commitAuthorOld": "Giovanni Matteo Fumarola",
          "daysBetweenCommits": 38.52,
          "commitsBetweenForRepo": 414,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,16 +1,8 @@\n     public static ImmutableList\u003cAclEntry\u003e loadAclEntries(\n-        AclFeatureProto proto, final String[] stringTable) {\n+        AclFeatureProto proto, final StringTable stringTable) {\n       ImmutableList.Builder\u003cAclEntry\u003e b \u003d ImmutableList.builder();\n       for (int v : proto.getEntriesList()) {\n-        int p \u003d v \u0026 ACL_ENTRY_PERM_MASK;\n-        int t \u003d (v \u003e\u003e ACL_ENTRY_TYPE_OFFSET) \u0026 ACL_ENTRY_TYPE_MASK;\n-        int s \u003d (v \u003e\u003e ACL_ENTRY_SCOPE_OFFSET) \u0026 ACL_ENTRY_SCOPE_MASK;\n-        int nid \u003d (v \u003e\u003e ACL_ENTRY_NAME_OFFSET) \u0026 ACL_ENTRY_NAME_MASK;\n-        String name \u003d stringTable[nid];\n-        b.add(new AclEntry.Builder().setName(name)\n-            .setPermission(FSACTION_VALUES[p])\n-            .setScope(ACL_ENTRY_SCOPE_VALUES[s])\n-            .setType(ACL_ENTRY_TYPE_VALUES[t]).build());\n+        b.add(AclEntryStatusFormat.toAclEntry(v, stringTable));\n       }\n       return b.build();\n     }\n\\ No newline at end of file\n",
          "actualSource": "    public static ImmutableList\u003cAclEntry\u003e loadAclEntries(\n        AclFeatureProto proto, final StringTable stringTable) {\n      ImmutableList.Builder\u003cAclEntry\u003e b \u003d ImmutableList.builder();\n      for (int v : proto.getEntriesList()) {\n        b.add(AclEntryStatusFormat.toAclEntry(v, stringTable));\n      }\n      return b.build();\n    }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSImageFormatPBINode.java",
          "extendedDetails": {
            "oldValue": "[proto-AclFeatureProto, stringTable-String[](modifiers-final)]",
            "newValue": "[proto-AclFeatureProto, stringTable-StringTable(modifiers-final)]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "Fix potential FSImage corruption. Contributed by Daryn Sharp.\n",
          "commitDate": "15/10/18 3:18 AM",
          "commitName": "b60ca37914b22550e3630fa02742d40697decb31",
          "commitAuthor": "Vinayakumar B",
          "commitDateOld": "06/09/18 2:48 PM",
          "commitNameOld": "eca1a4bfe952fc184fe90dde50bac9b0e5293568",
          "commitAuthorOld": "Giovanni Matteo Fumarola",
          "daysBetweenCommits": 38.52,
          "commitsBetweenForRepo": 414,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,16 +1,8 @@\n     public static ImmutableList\u003cAclEntry\u003e loadAclEntries(\n-        AclFeatureProto proto, final String[] stringTable) {\n+        AclFeatureProto proto, final StringTable stringTable) {\n       ImmutableList.Builder\u003cAclEntry\u003e b \u003d ImmutableList.builder();\n       for (int v : proto.getEntriesList()) {\n-        int p \u003d v \u0026 ACL_ENTRY_PERM_MASK;\n-        int t \u003d (v \u003e\u003e ACL_ENTRY_TYPE_OFFSET) \u0026 ACL_ENTRY_TYPE_MASK;\n-        int s \u003d (v \u003e\u003e ACL_ENTRY_SCOPE_OFFSET) \u0026 ACL_ENTRY_SCOPE_MASK;\n-        int nid \u003d (v \u003e\u003e ACL_ENTRY_NAME_OFFSET) \u0026 ACL_ENTRY_NAME_MASK;\n-        String name \u003d stringTable[nid];\n-        b.add(new AclEntry.Builder().setName(name)\n-            .setPermission(FSACTION_VALUES[p])\n-            .setScope(ACL_ENTRY_SCOPE_VALUES[s])\n-            .setType(ACL_ENTRY_TYPE_VALUES[t]).build());\n+        b.add(AclEntryStatusFormat.toAclEntry(v, stringTable));\n       }\n       return b.build();\n     }\n\\ No newline at end of file\n",
          "actualSource": "    public static ImmutableList\u003cAclEntry\u003e loadAclEntries(\n        AclFeatureProto proto, final StringTable stringTable) {\n      ImmutableList.Builder\u003cAclEntry\u003e b \u003d ImmutableList.builder();\n      for (int v : proto.getEntriesList()) {\n        b.add(AclEntryStatusFormat.toAclEntry(v, stringTable));\n      }\n      return b.build();\n    }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSImageFormatPBINode.java",
          "extendedDetails": {}
        }
      ]
    }
  }
}