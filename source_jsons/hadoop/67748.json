{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "DynamicInputChunkContext.java",
  "functionName": "acquire",
  "functionId": "acquire___taskAttemptContext-TaskAttemptContext",
  "sourceFilePath": "hadoop-tools/hadoop-distcp/src/main/java/org/apache/hadoop/tools/mapred/lib/DynamicInputChunkContext.java",
  "functionStartLine": 80,
  "functionEndLine": 100,
  "numCommitsSeen": 2,
  "timeTaken": 398,
  "changeHistory": [
    "b24fe0648348d325d14931f80cee8a170fb3358a"
  ],
  "changeHistoryShort": {
    "b24fe0648348d325d14931f80cee8a170fb3358a": "Yintroduced"
  },
  "changeHistoryDetails": {
    "b24fe0648348d325d14931f80cee8a170fb3358a": {
      "type": "Yintroduced",
      "commitMessage": "Addendum to MAPREDUCE-6451\n",
      "commitDate": "30/10/15 2:05 PM",
      "commitName": "b24fe0648348d325d14931f80cee8a170fb3358a",
      "commitAuthor": "Kihwal Lee",
      "diff": "@@ -0,0 +1,21 @@\n+  public DynamicInputChunk acquire(TaskAttemptContext taskAttemptContext)\n+      throws IOException, InterruptedException {\n+\n+    String taskId\n+        \u003d taskAttemptContext.getTaskAttemptID().getTaskID().toString();\n+    Path acquiredFilePath \u003d new Path(getChunkRootPath(), taskId);\n+\n+    if (fs.exists(acquiredFilePath)) {\n+      LOG.info(\"Acquiring pre-assigned chunk: \" + acquiredFilePath);\n+      return new DynamicInputChunk(acquiredFilePath, taskAttemptContext, this);\n+    }\n+\n+    for (FileStatus chunkFile : getListOfChunkFiles()) {\n+      if (fs.rename(chunkFile.getPath(), acquiredFilePath)) {\n+        LOG.info(taskId + \" acquired \" + chunkFile.getPath());\n+        return new DynamicInputChunk(acquiredFilePath, taskAttemptContext,\n+            this);\n+      }\n+    }\n+    return null;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public DynamicInputChunk acquire(TaskAttemptContext taskAttemptContext)\n      throws IOException, InterruptedException {\n\n    String taskId\n        \u003d taskAttemptContext.getTaskAttemptID().getTaskID().toString();\n    Path acquiredFilePath \u003d new Path(getChunkRootPath(), taskId);\n\n    if (fs.exists(acquiredFilePath)) {\n      LOG.info(\"Acquiring pre-assigned chunk: \" + acquiredFilePath);\n      return new DynamicInputChunk(acquiredFilePath, taskAttemptContext, this);\n    }\n\n    for (FileStatus chunkFile : getListOfChunkFiles()) {\n      if (fs.rename(chunkFile.getPath(), acquiredFilePath)) {\n        LOG.info(taskId + \" acquired \" + chunkFile.getPath());\n        return new DynamicInputChunk(acquiredFilePath, taskAttemptContext,\n            this);\n      }\n    }\n    return null;\n  }",
      "path": "hadoop-tools/hadoop-distcp/src/main/java/org/apache/hadoop/tools/mapred/lib/DynamicInputChunkContext.java"
    }
  }
}