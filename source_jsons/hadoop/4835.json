{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "SnapshotDiffInfo.java",
  "functionName": "generateReport",
  "functionId": "generateReport",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/SnapshotDiffInfo.java",
  "functionStartLine": 236,
  "functionEndLine": 257,
  "numCommitsSeen": 62,
  "timeTaken": 4314,
  "changeHistory": [
    "d98b881e9ab826eb7b70485d0de2a41ab7345334",
    "16c8dbde574f49827fde5ee9add1861ee65d4645",
    "6dc8812a95bf369ec1f2e3d8a9473033172736cd",
    "bdf3de9f6b377b6bfeaa95faadd12e7b29ece5dc",
    "8a83bb7ad6177f473c20c4cc9c0f46746224332c",
    "44a6560b5da3f79d2299579a36e7a2a60a91f823",
    "cc2f96f655d0fd4121125fc801056571f4a20a2a",
    "d9e2514d21c2ae356ee7fe8d4a857748b5defa4c",
    "24d96cbcdb80a2de4ada7aa70056a481da24fcc5"
  ],
  "changeHistoryShort": {
    "d98b881e9ab826eb7b70485d0de2a41ab7345334": "Ybodychange",
    "16c8dbde574f49827fde5ee9add1861ee65d4645": "Ybodychange",
    "6dc8812a95bf369ec1f2e3d8a9473033172736cd": "Ybodychange",
    "bdf3de9f6b377b6bfeaa95faadd12e7b29ece5dc": "Ymultichange(Ymovefromfile,Ybodychange)",
    "8a83bb7ad6177f473c20c4cc9c0f46746224332c": "Ybodychange",
    "44a6560b5da3f79d2299579a36e7a2a60a91f823": "Ybodychange",
    "cc2f96f655d0fd4121125fc801056571f4a20a2a": "Ybodychange",
    "d9e2514d21c2ae356ee7fe8d4a857748b5defa4c": "Ybodychange",
    "24d96cbcdb80a2de4ada7aa70056a481da24fcc5": "Yintroduced"
  },
  "changeHistoryDetails": {
    "d98b881e9ab826eb7b70485d0de2a41ab7345334": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-14008. NN should log snapshotdiff report. Contributed by Pranay Singh.\n\nSigned-off-by: Wei-Chiu Chuang \u003cweichiu@apache.org\u003e\n",
      "commitDate": "01/11/18 5:26 PM",
      "commitName": "d98b881e9ab826eb7b70485d0de2a41ab7345334",
      "commitAuthor": "Pranay Singh",
      "commitDateOld": "09/03/18 3:50 PM",
      "commitNameOld": "ba0da2785d251745969f88a50d33ce61876d91aa",
      "commitAuthorOld": "Tsz-Wo Nicholas Sze",
      "daysBetweenCommits": 237.02,
      "commitsBetweenForRepo": 2510,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,22 @@\n   public SnapshotDiffReport generateReport() {\n     List\u003cDiffReportEntry\u003e diffReportList \u003d new ChunkedArrayList\u003c\u003e();\n     for (Map.Entry\u003cINode,byte[][]\u003e drEntry : diffMap.entrySet()) {\n       INode node \u003d drEntry.getKey();\n       byte[][] path \u003d drEntry.getValue();\n       diffReportList.add(new DiffReportEntry(DiffType.MODIFY, path, null));\n       if (node.isDirectory()) {\n         List\u003cDiffReportEntry\u003e subList \u003d generateReport(dirDiffMap.get(node),\n             path, isFromEarlier(), renameMap);\n         diffReportList.addAll(subList);\n       }\n     }\n+\n+    SnapshotDiffReport.DiffStats dStats \u003d new SnapshotDiffReport.DiffStats(\n+        this.totalDirsCompared, this.totalDirsProcessed,\n+        this.totalFilesCompared, this.totalFilesProcessed,\n+        this.childrenListingTime);\n+\n     return new SnapshotDiffReport(snapshotRoot.getFullPathName(),\n         Snapshot.getSnapshotName(from), Snapshot.getSnapshotName(to),\n-        diffReportList);\n+        dStats, diffReportList);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public SnapshotDiffReport generateReport() {\n    List\u003cDiffReportEntry\u003e diffReportList \u003d new ChunkedArrayList\u003c\u003e();\n    for (Map.Entry\u003cINode,byte[][]\u003e drEntry : diffMap.entrySet()) {\n      INode node \u003d drEntry.getKey();\n      byte[][] path \u003d drEntry.getValue();\n      diffReportList.add(new DiffReportEntry(DiffType.MODIFY, path, null));\n      if (node.isDirectory()) {\n        List\u003cDiffReportEntry\u003e subList \u003d generateReport(dirDiffMap.get(node),\n            path, isFromEarlier(), renameMap);\n        diffReportList.addAll(subList);\n      }\n    }\n\n    SnapshotDiffReport.DiffStats dStats \u003d new SnapshotDiffReport.DiffStats(\n        this.totalDirsCompared, this.totalDirsProcessed,\n        this.totalFilesCompared, this.totalFilesProcessed,\n        this.childrenListingTime);\n\n    return new SnapshotDiffReport(snapshotRoot.getFullPathName(),\n        Snapshot.getSnapshotName(from), Snapshot.getSnapshotName(to),\n        dStats, diffReportList);\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/SnapshotDiffInfo.java",
      "extendedDetails": {}
    },
    "16c8dbde574f49827fde5ee9add1861ee65d4645": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-11881. NameNode consumes a lot of memory for snapshot diff report generation. Contributed by Manoj Govindassamy.\n",
      "commitDate": "29/06/17 6:38 AM",
      "commitName": "16c8dbde574f49827fde5ee9add1861ee65d4645",
      "commitAuthor": "Wei-Chiu Chuang",
      "commitDateOld": "17/02/15 2:47 PM",
      "commitNameOld": "6dc8812a95bf369ec1f2e3d8a9473033172736cd",
      "commitAuthorOld": "Akira Ajisaka",
      "daysBetweenCommits": 862.62,
      "commitsBetweenForRepo": 6067,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,16 @@\n   public SnapshotDiffReport generateReport() {\n-    List\u003cDiffReportEntry\u003e diffReportList \u003d new ArrayList\u003cDiffReportEntry\u003e();\n+    List\u003cDiffReportEntry\u003e diffReportList \u003d new ChunkedArrayList\u003c\u003e();\n     for (Map.Entry\u003cINode,byte[][]\u003e drEntry : diffMap.entrySet()) {\n       INode node \u003d drEntry.getKey();\n       byte[][] path \u003d drEntry.getValue();\n       diffReportList.add(new DiffReportEntry(DiffType.MODIFY, path, null));\n       if (node.isDirectory()) {\n         List\u003cDiffReportEntry\u003e subList \u003d generateReport(dirDiffMap.get(node),\n             path, isFromEarlier(), renameMap);\n         diffReportList.addAll(subList);\n       }\n     }\n     return new SnapshotDiffReport(snapshotRoot.getFullPathName(),\n         Snapshot.getSnapshotName(from), Snapshot.getSnapshotName(to),\n         diffReportList);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public SnapshotDiffReport generateReport() {\n    List\u003cDiffReportEntry\u003e diffReportList \u003d new ChunkedArrayList\u003c\u003e();\n    for (Map.Entry\u003cINode,byte[][]\u003e drEntry : diffMap.entrySet()) {\n      INode node \u003d drEntry.getKey();\n      byte[][] path \u003d drEntry.getValue();\n      diffReportList.add(new DiffReportEntry(DiffType.MODIFY, path, null));\n      if (node.isDirectory()) {\n        List\u003cDiffReportEntry\u003e subList \u003d generateReport(dirDiffMap.get(node),\n            path, isFromEarlier(), renameMap);\n        diffReportList.addAll(subList);\n      }\n    }\n    return new SnapshotDiffReport(snapshotRoot.getFullPathName(),\n        Snapshot.getSnapshotName(from), Snapshot.getSnapshotName(to),\n        diffReportList);\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/SnapshotDiffInfo.java",
      "extendedDetails": {}
    },
    "6dc8812a95bf369ec1f2e3d8a9473033172736cd": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-7780. Update use of Iterator to Iterable in DataXceiverServer and SnapshotDiffInfo. Contributed by Ray Chiang.\n",
      "commitDate": "17/02/15 2:47 PM",
      "commitName": "6dc8812a95bf369ec1f2e3d8a9473033172736cd",
      "commitAuthor": "Akira Ajisaka",
      "commitDateOld": "07/07/14 5:08 PM",
      "commitNameOld": "76a621ffd2d66bf012a554f4400091a92a5b473e",
      "commitAuthorOld": "Haohui Mai",
      "daysBetweenCommits": 224.94,
      "commitsBetweenForRepo": 1966,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,16 @@\n   public SnapshotDiffReport generateReport() {\n     List\u003cDiffReportEntry\u003e diffReportList \u003d new ArrayList\u003cDiffReportEntry\u003e();\n-    for (INode node : diffMap.keySet()) {\n-      diffReportList.add(new DiffReportEntry(DiffType.MODIFY, diffMap\n-          .get(node), null));\n+    for (Map.Entry\u003cINode,byte[][]\u003e drEntry : diffMap.entrySet()) {\n+      INode node \u003d drEntry.getKey();\n+      byte[][] path \u003d drEntry.getValue();\n+      diffReportList.add(new DiffReportEntry(DiffType.MODIFY, path, null));\n       if (node.isDirectory()) {\n         List\u003cDiffReportEntry\u003e subList \u003d generateReport(dirDiffMap.get(node),\n-            diffMap.get(node), isFromEarlier(), renameMap);\n+            path, isFromEarlier(), renameMap);\n         diffReportList.addAll(subList);\n       }\n     }\n     return new SnapshotDiffReport(snapshotRoot.getFullPathName(),\n         Snapshot.getSnapshotName(from), Snapshot.getSnapshotName(to),\n         diffReportList);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public SnapshotDiffReport generateReport() {\n    List\u003cDiffReportEntry\u003e diffReportList \u003d new ArrayList\u003cDiffReportEntry\u003e();\n    for (Map.Entry\u003cINode,byte[][]\u003e drEntry : diffMap.entrySet()) {\n      INode node \u003d drEntry.getKey();\n      byte[][] path \u003d drEntry.getValue();\n      diffReportList.add(new DiffReportEntry(DiffType.MODIFY, path, null));\n      if (node.isDirectory()) {\n        List\u003cDiffReportEntry\u003e subList \u003d generateReport(dirDiffMap.get(node),\n            path, isFromEarlier(), renameMap);\n        diffReportList.addAll(subList);\n      }\n    }\n    return new SnapshotDiffReport(snapshotRoot.getFullPathName(),\n        Snapshot.getSnapshotName(from), Snapshot.getSnapshotName(to),\n        diffReportList);\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/SnapshotDiffInfo.java",
      "extendedDetails": {}
    },
    "bdf3de9f6b377b6bfeaa95faadd12e7b29ece5dc": {
      "type": "Ymultichange(Ymovefromfile,Ybodychange)",
      "commitMessage": "HDFS-6593. Move SnapshotDiffInfo out of INodeDirectorySnapshottable. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1605169 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/06/14 12:59 PM",
      "commitName": "bdf3de9f6b377b6bfeaa95faadd12e7b29ece5dc",
      "commitAuthor": "Haohui Mai",
      "subchanges": [
        {
          "type": "Ymovefromfile",
          "commitMessage": "HDFS-6593. Move SnapshotDiffInfo out of INodeDirectorySnapshottable. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1605169 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "24/06/14 12:59 PM",
          "commitName": "bdf3de9f6b377b6bfeaa95faadd12e7b29ece5dc",
          "commitAuthor": "Haohui Mai",
          "commitDateOld": "24/06/14 12:34 PM",
          "commitNameOld": "1f9a0fd927ab7bef13db42dd80368fd781b3d2d1",
          "commitAuthorOld": "Thomas Graves",
          "daysBetweenCommits": 0.02,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,16 +1,15 @@\n-    public SnapshotDiffReport generateReport() {\n-      List\u003cDiffReportEntry\u003e diffReportList \u003d new ArrayList\u003cDiffReportEntry\u003e();\n-      for (INode node : diffMap.keySet()) {\n-        diffReportList.add(new DiffReportEntry(DiffType.MODIFY, diffMap\n-            .get(node), null));\n-        if (node.isDirectory()) {\n-          ChildrenDiff dirDiff \u003d dirDiffMap.get(node);\n-          List\u003cDiffReportEntry\u003e subList \u003d dirDiff.generateReport(\n-              diffMap.get(node), isFromEarlier(), renameMap);\n-          diffReportList.addAll(subList);\n-        }\n+  public SnapshotDiffReport generateReport() {\n+    List\u003cDiffReportEntry\u003e diffReportList \u003d new ArrayList\u003cDiffReportEntry\u003e();\n+    for (INode node : diffMap.keySet()) {\n+      diffReportList.add(new DiffReportEntry(DiffType.MODIFY, diffMap\n+          .get(node), null));\n+      if (node.isDirectory()) {\n+        List\u003cDiffReportEntry\u003e subList \u003d generateReport(dirDiffMap.get(node),\n+            diffMap.get(node), isFromEarlier(), renameMap);\n+        diffReportList.addAll(subList);\n       }\n-      return new SnapshotDiffReport(snapshotRoot.getFullPathName(),\n-          Snapshot.getSnapshotName(from), Snapshot.getSnapshotName(to),\n-          diffReportList);\n-    }\n\\ No newline at end of file\n+    }\n+    return new SnapshotDiffReport(snapshotRoot.getFullPathName(),\n+        Snapshot.getSnapshotName(from), Snapshot.getSnapshotName(to),\n+        diffReportList);\n+  }\n\\ No newline at end of file\n",
          "actualSource": "  public SnapshotDiffReport generateReport() {\n    List\u003cDiffReportEntry\u003e diffReportList \u003d new ArrayList\u003cDiffReportEntry\u003e();\n    for (INode node : diffMap.keySet()) {\n      diffReportList.add(new DiffReportEntry(DiffType.MODIFY, diffMap\n          .get(node), null));\n      if (node.isDirectory()) {\n        List\u003cDiffReportEntry\u003e subList \u003d generateReport(dirDiffMap.get(node),\n            diffMap.get(node), isFromEarlier(), renameMap);\n        diffReportList.addAll(subList);\n      }\n    }\n    return new SnapshotDiffReport(snapshotRoot.getFullPathName(),\n        Snapshot.getSnapshotName(from), Snapshot.getSnapshotName(to),\n        diffReportList);\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/SnapshotDiffInfo.java",
          "extendedDetails": {
            "oldPath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/INodeDirectorySnapshottable.java",
            "newPath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/SnapshotDiffInfo.java",
            "oldMethodName": "generateReport",
            "newMethodName": "generateReport"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-6593. Move SnapshotDiffInfo out of INodeDirectorySnapshottable. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1605169 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "24/06/14 12:59 PM",
          "commitName": "bdf3de9f6b377b6bfeaa95faadd12e7b29ece5dc",
          "commitAuthor": "Haohui Mai",
          "commitDateOld": "24/06/14 12:34 PM",
          "commitNameOld": "1f9a0fd927ab7bef13db42dd80368fd781b3d2d1",
          "commitAuthorOld": "Thomas Graves",
          "daysBetweenCommits": 0.02,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,16 +1,15 @@\n-    public SnapshotDiffReport generateReport() {\n-      List\u003cDiffReportEntry\u003e diffReportList \u003d new ArrayList\u003cDiffReportEntry\u003e();\n-      for (INode node : diffMap.keySet()) {\n-        diffReportList.add(new DiffReportEntry(DiffType.MODIFY, diffMap\n-            .get(node), null));\n-        if (node.isDirectory()) {\n-          ChildrenDiff dirDiff \u003d dirDiffMap.get(node);\n-          List\u003cDiffReportEntry\u003e subList \u003d dirDiff.generateReport(\n-              diffMap.get(node), isFromEarlier(), renameMap);\n-          diffReportList.addAll(subList);\n-        }\n+  public SnapshotDiffReport generateReport() {\n+    List\u003cDiffReportEntry\u003e diffReportList \u003d new ArrayList\u003cDiffReportEntry\u003e();\n+    for (INode node : diffMap.keySet()) {\n+      diffReportList.add(new DiffReportEntry(DiffType.MODIFY, diffMap\n+          .get(node), null));\n+      if (node.isDirectory()) {\n+        List\u003cDiffReportEntry\u003e subList \u003d generateReport(dirDiffMap.get(node),\n+            diffMap.get(node), isFromEarlier(), renameMap);\n+        diffReportList.addAll(subList);\n       }\n-      return new SnapshotDiffReport(snapshotRoot.getFullPathName(),\n-          Snapshot.getSnapshotName(from), Snapshot.getSnapshotName(to),\n-          diffReportList);\n-    }\n\\ No newline at end of file\n+    }\n+    return new SnapshotDiffReport(snapshotRoot.getFullPathName(),\n+        Snapshot.getSnapshotName(from), Snapshot.getSnapshotName(to),\n+        diffReportList);\n+  }\n\\ No newline at end of file\n",
          "actualSource": "  public SnapshotDiffReport generateReport() {\n    List\u003cDiffReportEntry\u003e diffReportList \u003d new ArrayList\u003cDiffReportEntry\u003e();\n    for (INode node : diffMap.keySet()) {\n      diffReportList.add(new DiffReportEntry(DiffType.MODIFY, diffMap\n          .get(node), null));\n      if (node.isDirectory()) {\n        List\u003cDiffReportEntry\u003e subList \u003d generateReport(dirDiffMap.get(node),\n            diffMap.get(node), isFromEarlier(), renameMap);\n        diffReportList.addAll(subList);\n      }\n    }\n    return new SnapshotDiffReport(snapshotRoot.getFullPathName(),\n        Snapshot.getSnapshotName(from), Snapshot.getSnapshotName(to),\n        diffReportList);\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/SnapshotDiffInfo.java",
          "extendedDetails": {}
        }
      ]
    },
    "8a83bb7ad6177f473c20c4cc9c0f46746224332c": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-4667. Capture renamed files/directories in snapshot diff report. Contributed by Jing Zhao and Binglin Chang.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1604488 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "21/06/14 3:59 PM",
      "commitName": "8a83bb7ad6177f473c20c4cc9c0f46746224332c",
      "commitAuthor": "Jing Zhao",
      "commitDateOld": "08/06/14 12:06 AM",
      "commitNameOld": "cc9bc8eef78e6bc0ab038102f45712456c62a5eb",
      "commitAuthorOld": "Junping Du",
      "daysBetweenCommits": 13.66,
      "commitsBetweenForRepo": 100,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,16 @@\n     public SnapshotDiffReport generateReport() {\n       List\u003cDiffReportEntry\u003e diffReportList \u003d new ArrayList\u003cDiffReportEntry\u003e();\n       for (INode node : diffMap.keySet()) {\n         diffReportList.add(new DiffReportEntry(DiffType.MODIFY, diffMap\n-            .get(node)));\n+            .get(node), null));\n         if (node.isDirectory()) {\n           ChildrenDiff dirDiff \u003d dirDiffMap.get(node);\n           List\u003cDiffReportEntry\u003e subList \u003d dirDiff.generateReport(\n-              diffMap.get(node), isFromEarlier());\n+              diffMap.get(node), isFromEarlier(), renameMap);\n           diffReportList.addAll(subList);\n         }\n       }\n       return new SnapshotDiffReport(snapshotRoot.getFullPathName(),\n           Snapshot.getSnapshotName(from), Snapshot.getSnapshotName(to),\n           diffReportList);\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public SnapshotDiffReport generateReport() {\n      List\u003cDiffReportEntry\u003e diffReportList \u003d new ArrayList\u003cDiffReportEntry\u003e();\n      for (INode node : diffMap.keySet()) {\n        diffReportList.add(new DiffReportEntry(DiffType.MODIFY, diffMap\n            .get(node), null));\n        if (node.isDirectory()) {\n          ChildrenDiff dirDiff \u003d dirDiffMap.get(node);\n          List\u003cDiffReportEntry\u003e subList \u003d dirDiff.generateReport(\n              diffMap.get(node), isFromEarlier(), renameMap);\n          diffReportList.addAll(subList);\n        }\n      }\n      return new SnapshotDiffReport(snapshotRoot.getFullPathName(),\n          Snapshot.getSnapshotName(from), Snapshot.getSnapshotName(to),\n          diffReportList);\n    }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/INodeDirectorySnapshottable.java",
      "extendedDetails": {}
    },
    "44a6560b5da3f79d2299579a36e7a2a60a91f823": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-5632. Flatten INodeDirectory hierarchy: Replace INodeDirectoryWithSnapshot with DirectoryWithSnapshotFeature.  Contributed by jing9 \n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1550917 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "14/12/13 2:13 AM",
      "commitName": "44a6560b5da3f79d2299579a36e7a2a60a91f823",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "06/12/13 10:17 PM",
      "commitNameOld": "4c87a27ad851ffaa3cc3e2074a9ef7073b5a164a",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 7.16,
      "commitsBetweenForRepo": 38,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,16 @@\n     public SnapshotDiffReport generateReport() {\n       List\u003cDiffReportEntry\u003e diffReportList \u003d new ArrayList\u003cDiffReportEntry\u003e();\n       for (INode node : diffMap.keySet()) {\n         diffReportList.add(new DiffReportEntry(DiffType.MODIFY, diffMap\n             .get(node)));\n         if (node.isDirectory()) {\n           ChildrenDiff dirDiff \u003d dirDiffMap.get(node);\n           List\u003cDiffReportEntry\u003e subList \u003d dirDiff.generateReport(\n-              diffMap.get(node), (INodeDirectoryWithSnapshot) node,\n-              isFromEarlier());\n+              diffMap.get(node), isFromEarlier());\n           diffReportList.addAll(subList);\n         }\n       }\n       return new SnapshotDiffReport(snapshotRoot.getFullPathName(),\n           Snapshot.getSnapshotName(from), Snapshot.getSnapshotName(to),\n           diffReportList);\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public SnapshotDiffReport generateReport() {\n      List\u003cDiffReportEntry\u003e diffReportList \u003d new ArrayList\u003cDiffReportEntry\u003e();\n      for (INode node : diffMap.keySet()) {\n        diffReportList.add(new DiffReportEntry(DiffType.MODIFY, diffMap\n            .get(node)));\n        if (node.isDirectory()) {\n          ChildrenDiff dirDiff \u003d dirDiffMap.get(node);\n          List\u003cDiffReportEntry\u003e subList \u003d dirDiff.generateReport(\n              diffMap.get(node), isFromEarlier());\n          diffReportList.addAll(subList);\n        }\n      }\n      return new SnapshotDiffReport(snapshotRoot.getFullPathName(),\n          Snapshot.getSnapshotName(from), Snapshot.getSnapshotName(to),\n          diffReportList);\n    }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/INodeDirectorySnapshottable.java",
      "extendedDetails": {}
    },
    "cc2f96f655d0fd4121125fc801056571f4a20a2a": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-4612. Not to use INode.getParent() when generating snapshot diff report.  Contributed by Jing Zhao\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1460590 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "25/03/13 3:21 AM",
      "commitName": "cc2f96f655d0fd4121125fc801056571f4a20a2a",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "18/03/13 11:27 PM",
      "commitNameOld": "9701555899315c94584b24d8717c1d7540a4a491",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 6.16,
      "commitsBetweenForRepo": 33,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,17 @@\n     public SnapshotDiffReport generateReport() {\n       List\u003cDiffReportEntry\u003e diffReportList \u003d new ArrayList\u003cDiffReportEntry\u003e();\n-      for (INode node : diffList) {\n-        diffReportList.add(new DiffReportEntry(DiffType.MODIFY, node\n-            .getRelativePathNameBytes(snapshotRoot)));\n+      for (INode node : diffMap.keySet()) {\n+        diffReportList.add(new DiffReportEntry(DiffType.MODIFY, diffMap\n+            .get(node)));\n         if (node.isDirectory()) {\n-          ChildrenDiff dirDiff \u003d diffMap.get(node);\n-          List\u003cDiffReportEntry\u003e subList \u003d dirDiff.generateReport(snapshotRoot,\n-              (INodeDirectoryWithSnapshot) node, isFromEarlier());\n+          ChildrenDiff dirDiff \u003d dirDiffMap.get(node);\n+          List\u003cDiffReportEntry\u003e subList \u003d dirDiff.generateReport(\n+              diffMap.get(node), (INodeDirectoryWithSnapshot) node,\n+              isFromEarlier());\n           diffReportList.addAll(subList);\n         }\n       }\n       return new SnapshotDiffReport(snapshotRoot.getFullPathName(),\n           Snapshot.getSnapshotName(from), Snapshot.getSnapshotName(to),\n           diffReportList);\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public SnapshotDiffReport generateReport() {\n      List\u003cDiffReportEntry\u003e diffReportList \u003d new ArrayList\u003cDiffReportEntry\u003e();\n      for (INode node : diffMap.keySet()) {\n        diffReportList.add(new DiffReportEntry(DiffType.MODIFY, diffMap\n            .get(node)));\n        if (node.isDirectory()) {\n          ChildrenDiff dirDiff \u003d dirDiffMap.get(node);\n          List\u003cDiffReportEntry\u003e subList \u003d dirDiff.generateReport(\n              diffMap.get(node), (INodeDirectoryWithSnapshot) node,\n              isFromEarlier());\n          diffReportList.addAll(subList);\n        }\n      }\n      return new SnapshotDiffReport(snapshotRoot.getFullPathName(),\n          Snapshot.getSnapshotName(from), Snapshot.getSnapshotName(to),\n          diffReportList);\n    }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/INodeDirectorySnapshottable.java",
      "extendedDetails": {}
    },
    "d9e2514d21c2ae356ee7fe8d4a857748b5defa4c": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-4487. Fix snapshot diff report for HDFS-4446.  Contributed by Jing Zhao\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1446385 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "14/02/13 3:07 PM",
      "commitName": "d9e2514d21c2ae356ee7fe8d4a857748b5defa4c",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "14/02/13 2:00 PM",
      "commitNameOld": "d42d0860cb670c8284bb298029cd6f8f59db9510",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 0.05,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,13 +1,16 @@\n     public SnapshotDiffReport generateReport() {\n-      List\u003cDiffReportEntry\u003e diffList \u003d new ArrayList\u003cDiffReportEntry\u003e();\n-      for (Map.Entry\u003cINodeDirectoryWithSnapshot, ChildrenDiff\u003e entry : diffMap\n-          .entrySet()) {\n-        diffList.add(new DiffReportEntry(DiffType.MODIFY, entry.getKey()\n-            .getFullPathName()));\n-        List\u003cDiffReportEntry\u003e subList \u003d entry.getValue().generateReport(\n-            entry.getKey(), isFromEarlier());\n-        diffList.addAll(subList);\n+      List\u003cDiffReportEntry\u003e diffReportList \u003d new ArrayList\u003cDiffReportEntry\u003e();\n+      for (INode node : diffList) {\n+        diffReportList.add(new DiffReportEntry(DiffType.MODIFY, node\n+            .getRelativePathNameBytes(snapshotRoot)));\n+        if (node.isDirectory()) {\n+          ChildrenDiff dirDiff \u003d diffMap.get(node);\n+          List\u003cDiffReportEntry\u003e subList \u003d dirDiff.generateReport(snapshotRoot,\n+              (INodeDirectoryWithSnapshot) node, isFromEarlier());\n+          diffReportList.addAll(subList);\n+        }\n       }\n       return new SnapshotDiffReport(snapshotRoot.getFullPathName(),\n-          getSnapshotName(from), getSnapshotName(to), diffList);\n+          Snapshot.getSnapshotName(from), Snapshot.getSnapshotName(to),\n+          diffReportList);\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public SnapshotDiffReport generateReport() {\n      List\u003cDiffReportEntry\u003e diffReportList \u003d new ArrayList\u003cDiffReportEntry\u003e();\n      for (INode node : diffList) {\n        diffReportList.add(new DiffReportEntry(DiffType.MODIFY, node\n            .getRelativePathNameBytes(snapshotRoot)));\n        if (node.isDirectory()) {\n          ChildrenDiff dirDiff \u003d diffMap.get(node);\n          List\u003cDiffReportEntry\u003e subList \u003d dirDiff.generateReport(snapshotRoot,\n              (INodeDirectoryWithSnapshot) node, isFromEarlier());\n          diffReportList.addAll(subList);\n        }\n      }\n      return new SnapshotDiffReport(snapshotRoot.getFullPathName(),\n          Snapshot.getSnapshotName(from), Snapshot.getSnapshotName(to),\n          diffReportList);\n    }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/INodeDirectorySnapshottable.java",
      "extendedDetails": {}
    },
    "24d96cbcdb80a2de4ada7aa70056a481da24fcc5": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-4414. Add support for getting snapshot diff from DistributedFileSystem. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1441808 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "02/02/13 12:39 PM",
      "commitName": "24d96cbcdb80a2de4ada7aa70056a481da24fcc5",
      "commitAuthor": "Suresh Srinivas",
      "diff": "@@ -0,0 +1,13 @@\n+    public SnapshotDiffReport generateReport() {\n+      List\u003cDiffReportEntry\u003e diffList \u003d new ArrayList\u003cDiffReportEntry\u003e();\n+      for (Map.Entry\u003cINodeDirectoryWithSnapshot, ChildrenDiff\u003e entry : diffMap\n+          .entrySet()) {\n+        diffList.add(new DiffReportEntry(DiffType.MODIFY, entry.getKey()\n+            .getFullPathName()));\n+        List\u003cDiffReportEntry\u003e subList \u003d entry.getValue().generateReport(\n+            entry.getKey(), isFromEarlier());\n+        diffList.addAll(subList);\n+      }\n+      return new SnapshotDiffReport(snapshotRoot.getFullPathName(),\n+          getSnapshotName(from), getSnapshotName(to), diffList);\n+    }\n\\ No newline at end of file\n",
      "actualSource": "    public SnapshotDiffReport generateReport() {\n      List\u003cDiffReportEntry\u003e diffList \u003d new ArrayList\u003cDiffReportEntry\u003e();\n      for (Map.Entry\u003cINodeDirectoryWithSnapshot, ChildrenDiff\u003e entry : diffMap\n          .entrySet()) {\n        diffList.add(new DiffReportEntry(DiffType.MODIFY, entry.getKey()\n            .getFullPathName()));\n        List\u003cDiffReportEntry\u003e subList \u003d entry.getValue().generateReport(\n            entry.getKey(), isFromEarlier());\n        diffList.addAll(subList);\n      }\n      return new SnapshotDiffReport(snapshotRoot.getFullPathName(),\n          getSnapshotName(from), getSnapshotName(to), diffList);\n    }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/INodeDirectorySnapshottable.java"
    }
  }
}