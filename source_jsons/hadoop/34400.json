{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "ResourceLocalizationService.java",
  "functionName": "createServer",
  "functionId": "createServer",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ResourceLocalizationService.java",
  "functionStartLine": 401,
  "functionEndLine": 421,
  "numCommitsSeen": 107,
  "timeTaken": 8543,
  "changeHistory": [
    "84612788339392fcda1aef0e27c43f5c6b2a19e5",
    "3f809667bc397ea372efe4b8f1aae7e2729b8ca0",
    "e1fdf62123625e4ba399af02f8aad500637d29d1",
    "d19cfe01642f9582e1fe5d567beb480399c37a01",
    "66137cf17cb4abccd6065819d97edc63c6510477",
    "fafe8cd28e726566509c679e19d7da622f29f90d",
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1",
    "dbecbe5dfe50f834fc3b8401709079e9470cc517"
  ],
  "changeHistoryShort": {
    "84612788339392fcda1aef0e27c43f5c6b2a19e5": "Ybodychange",
    "3f809667bc397ea372efe4b8f1aae7e2729b8ca0": "Ybodychange",
    "e1fdf62123625e4ba399af02f8aad500637d29d1": "Yfilerename",
    "d19cfe01642f9582e1fe5d567beb480399c37a01": "Ybodychange",
    "66137cf17cb4abccd6065819d97edc63c6510477": "Ybodychange",
    "fafe8cd28e726566509c679e19d7da622f29f90d": "Ybodychange",
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1": "Yfilerename",
    "dbecbe5dfe50f834fc3b8401709079e9470cc517": "Yintroduced"
  },
  "changeHistoryDetails": {
    "84612788339392fcda1aef0e27c43f5c6b2a19e5": {
      "type": "Ybodychange",
      "commitMessage": "YARN-8544. [DS] AM registration fails when hadoop authorization is enabled. Contributed by Bibin A Chundatt.\n",
      "commitDate": "24/07/18 12:39 AM",
      "commitName": "84612788339392fcda1aef0e27c43f5c6b2a19e5",
      "commitAuthor": "bibinchundatt",
      "commitDateOld": "22/06/18 2:03 PM",
      "commitNameOld": "1cdce86d33d4b73ba6dd4136c966eb7e822b6f36",
      "commitAuthorOld": "Yufei Gu",
      "daysBetweenCommits": 31.44,
      "commitsBetweenForRepo": 181,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,21 +1,21 @@\n   Server createServer() {\n     Configuration conf \u003d getConfig();\n     YarnRPC rpc \u003d YarnRPC.create(conf);\n     if (UserGroupInformation.isSecurityEnabled()) {\n       secretManager \u003d new LocalizerTokenSecretManager();      \n     }\n     \n     Server server \u003d rpc.getServer(LocalizationProtocol.class, this,\n         localizationServerAddress, conf, secretManager, \n         conf.getInt(YarnConfiguration.NM_LOCALIZER_CLIENT_THREAD_COUNT, \n             YarnConfiguration.DEFAULT_NM_LOCALIZER_CLIENT_THREAD_COUNT));\n     \n     // Enable service authorization?\n     if (conf.getBoolean(\n         CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHORIZATION, \n         false)) {\n-      server.refreshServiceAcl(conf, new NMPolicyProvider());\n+      server.refreshServiceAcl(conf, NMPolicyProvider.getInstance());\n     }\n     \n     return server;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  Server createServer() {\n    Configuration conf \u003d getConfig();\n    YarnRPC rpc \u003d YarnRPC.create(conf);\n    if (UserGroupInformation.isSecurityEnabled()) {\n      secretManager \u003d new LocalizerTokenSecretManager();      \n    }\n    \n    Server server \u003d rpc.getServer(LocalizationProtocol.class, this,\n        localizationServerAddress, conf, secretManager, \n        conf.getInt(YarnConfiguration.NM_LOCALIZER_CLIENT_THREAD_COUNT, \n            YarnConfiguration.DEFAULT_NM_LOCALIZER_CLIENT_THREAD_COUNT));\n    \n    // Enable service authorization?\n    if (conf.getBoolean(\n        CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHORIZATION, \n        false)) {\n      server.refreshServiceAcl(conf, NMPolicyProvider.getInstance());\n    }\n    \n    return server;\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ResourceLocalizationService.java",
      "extendedDetails": {}
    },
    "3f809667bc397ea372efe4b8f1aae7e2729b8ca0": {
      "type": "Ybodychange",
      "commitMessage": "YARN-854. Fixing YARN bugs that are failing applications in secure environment. Contributed by Omkar Vinit Joshi.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1494845 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "19/06/13 8:41 PM",
      "commitName": "3f809667bc397ea372efe4b8f1aae7e2729b8ca0",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "16/06/13 11:39 PM",
      "commitNameOld": "b9efe6bd4a1277b4067ecde715a7713a85968886",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 2.88,
      "commitsBetweenForRepo": 41,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,22 +1,21 @@\n   Server createServer() {\n     Configuration conf \u003d getConfig();\n     YarnRPC rpc \u003d YarnRPC.create(conf);\n-    LocalizerTokenSecretManager secretManager \u003d null;\n     if (UserGroupInformation.isSecurityEnabled()) {\n-      secretManager \u003d new LocalizerTokenSecretManager();\n+      secretManager \u003d new LocalizerTokenSecretManager();      \n     }\n     \n     Server server \u003d rpc.getServer(LocalizationProtocol.class, this,\n         localizationServerAddress, conf, secretManager, \n         conf.getInt(YarnConfiguration.NM_LOCALIZER_CLIENT_THREAD_COUNT, \n             YarnConfiguration.DEFAULT_NM_LOCALIZER_CLIENT_THREAD_COUNT));\n     \n     // Enable service authorization?\n     if (conf.getBoolean(\n         CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHORIZATION, \n         false)) {\n       server.refreshServiceAcl(conf, new NMPolicyProvider());\n     }\n     \n     return server;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  Server createServer() {\n    Configuration conf \u003d getConfig();\n    YarnRPC rpc \u003d YarnRPC.create(conf);\n    if (UserGroupInformation.isSecurityEnabled()) {\n      secretManager \u003d new LocalizerTokenSecretManager();      \n    }\n    \n    Server server \u003d rpc.getServer(LocalizationProtocol.class, this,\n        localizationServerAddress, conf, secretManager, \n        conf.getInt(YarnConfiguration.NM_LOCALIZER_CLIENT_THREAD_COUNT, \n            YarnConfiguration.DEFAULT_NM_LOCALIZER_CLIENT_THREAD_COUNT));\n    \n    // Enable service authorization?\n    if (conf.getBoolean(\n        CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHORIZATION, \n        false)) {\n      server.refreshServiceAcl(conf, new NMPolicyProvider());\n    }\n    \n    return server;\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ResourceLocalizationService.java",
      "extendedDetails": {}
    },
    "e1fdf62123625e4ba399af02f8aad500637d29d1": {
      "type": "Yfilerename",
      "commitMessage": "YARN-1. Promote YARN to be a sub-project of Apache Hadoop.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1370666 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "07/08/12 10:22 PM",
      "commitName": "e1fdf62123625e4ba399af02f8aad500637d29d1",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "07/08/12 7:53 PM",
      "commitNameOld": "34554d1e11ee1d5b564d7d9ed3e6d55931d72749",
      "commitAuthorOld": "Aaron Myers",
      "daysBetweenCommits": 0.1,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  Server createServer() {\n    Configuration conf \u003d getConfig();\n    YarnRPC rpc \u003d YarnRPC.create(conf);\n    LocalizerTokenSecretManager secretManager \u003d null;\n    if (UserGroupInformation.isSecurityEnabled()) {\n      secretManager \u003d new LocalizerTokenSecretManager();\n    }\n    \n    Server server \u003d rpc.getServer(LocalizationProtocol.class, this,\n        localizationServerAddress, conf, secretManager, \n        conf.getInt(YarnConfiguration.NM_LOCALIZER_CLIENT_THREAD_COUNT, \n            YarnConfiguration.DEFAULT_NM_LOCALIZER_CLIENT_THREAD_COUNT));\n    \n    // Enable service authorization?\n    if (conf.getBoolean(\n        CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHORIZATION, \n        false)) {\n      server.refreshServiceAcl(conf, new NMPolicyProvider());\n    }\n    \n    return server;\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ResourceLocalizationService.java",
      "extendedDetails": {
        "oldPath": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ResourceLocalizationService.java",
        "newPath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ResourceLocalizationService.java"
      }
    },
    "d19cfe01642f9582e1fe5d567beb480399c37a01": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-2746. Yarn servers can\u0027t communicate with each other with hadoop.security.authorization set to true (acmurthy via mahadev)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1188522 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/10/11 11:07 PM",
      "commitName": "d19cfe01642f9582e1fe5d567beb480399c37a01",
      "commitAuthor": "Mahadev Konar",
      "commitDateOld": "24/10/11 5:36 PM",
      "commitNameOld": "6217e54718fc0ba8845ef8cc5a558fe67d98c18e",
      "commitAuthorOld": "Arun Murthy",
      "daysBetweenCommits": 0.23,
      "commitsBetweenForRepo": 4,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,14 +1,22 @@\n   Server createServer() {\n     Configuration conf \u003d getConfig();\n     YarnRPC rpc \u003d YarnRPC.create(conf);\n     LocalizerTokenSecretManager secretManager \u003d null;\n     if (UserGroupInformation.isSecurityEnabled()) {\n       secretManager \u003d new LocalizerTokenSecretManager();\n     }\n     \n-    return rpc.getServer(LocalizationProtocol.class, this,\n+    Server server \u003d rpc.getServer(LocalizationProtocol.class, this,\n         localizationServerAddress, conf, secretManager, \n         conf.getInt(YarnConfiguration.NM_LOCALIZER_CLIENT_THREAD_COUNT, \n             YarnConfiguration.DEFAULT_NM_LOCALIZER_CLIENT_THREAD_COUNT));\n-\n+    \n+    // Enable service authorization?\n+    if (conf.getBoolean(\n+        CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHORIZATION, \n+        false)) {\n+      server.refreshServiceAcl(conf, new NMPolicyProvider());\n+    }\n+    \n+    return server;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  Server createServer() {\n    Configuration conf \u003d getConfig();\n    YarnRPC rpc \u003d YarnRPC.create(conf);\n    LocalizerTokenSecretManager secretManager \u003d null;\n    if (UserGroupInformation.isSecurityEnabled()) {\n      secretManager \u003d new LocalizerTokenSecretManager();\n    }\n    \n    Server server \u003d rpc.getServer(LocalizationProtocol.class, this,\n        localizationServerAddress, conf, secretManager, \n        conf.getInt(YarnConfiguration.NM_LOCALIZER_CLIENT_THREAD_COUNT, \n            YarnConfiguration.DEFAULT_NM_LOCALIZER_CLIENT_THREAD_COUNT));\n    \n    // Enable service authorization?\n    if (conf.getBoolean(\n        CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHORIZATION, \n        false)) {\n      server.refreshServiceAcl(conf, new NMPolicyProvider());\n    }\n    \n    return server;\n  }",
      "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ResourceLocalizationService.java",
      "extendedDetails": {}
    },
    "66137cf17cb4abccd6065819d97edc63c6510477": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-3013. Removed YarnConfiguration.YARN_SECURITY_INFO and its usage as it doesn\u0027t affect security any more. (vinodkv)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1179174 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "05/10/11 4:43 AM",
      "commitName": "66137cf17cb4abccd6065819d97edc63c6510477",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "14/09/11 8:35 AM",
      "commitNameOld": "47e04d3124dd03fb918aabc68542c71eccd0a8e9",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 20.84,
      "commitsBetweenForRepo": 146,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,14 @@\n   Server createServer() {\n-    YarnRPC rpc \u003d YarnRPC.create(getConfig());\n-    Configuration conf \u003d new Configuration(getConfig()); // Clone to separate\n-                                                         // sec-info classes\n+    Configuration conf \u003d getConfig();\n+    YarnRPC rpc \u003d YarnRPC.create(conf);\n     LocalizerTokenSecretManager secretManager \u003d null;\n     if (UserGroupInformation.isSecurityEnabled()) {\n-      conf.setClass(YarnConfiguration.YARN_SECURITY_INFO,\n-          LocalizerSecurityInfo.class, SecurityInfo.class);\n       secretManager \u003d new LocalizerTokenSecretManager();\n     }\n     \n     return rpc.getServer(LocalizationProtocol.class, this,\n         localizationServerAddress, conf, secretManager, \n         conf.getInt(YarnConfiguration.NM_LOCALIZER_CLIENT_THREAD_COUNT, \n             YarnConfiguration.DEFAULT_NM_LOCALIZER_CLIENT_THREAD_COUNT));\n \n   }\n\\ No newline at end of file\n",
      "actualSource": "  Server createServer() {\n    Configuration conf \u003d getConfig();\n    YarnRPC rpc \u003d YarnRPC.create(conf);\n    LocalizerTokenSecretManager secretManager \u003d null;\n    if (UserGroupInformation.isSecurityEnabled()) {\n      secretManager \u003d new LocalizerTokenSecretManager();\n    }\n    \n    return rpc.getServer(LocalizationProtocol.class, this,\n        localizationServerAddress, conf, secretManager, \n        conf.getInt(YarnConfiguration.NM_LOCALIZER_CLIENT_THREAD_COUNT, \n            YarnConfiguration.DEFAULT_NM_LOCALIZER_CLIENT_THREAD_COUNT));\n\n  }",
      "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ResourceLocalizationService.java",
      "extendedDetails": {}
    },
    "fafe8cd28e726566509c679e19d7da622f29f90d": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-2864. Normalize configuration variable names for YARN. Contributed by Robert Evans.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1166955 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "08/09/11 6:44 PM",
      "commitName": "fafe8cd28e726566509c679e19d7da622f29f90d",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "24/08/11 5:14 PM",
      "commitNameOld": "cd7157784e5e5ddc4e77144d042e54dd0d04bac1",
      "commitAuthorOld": "Arun Murthy",
      "daysBetweenCommits": 15.06,
      "commitsBetweenForRepo": 86,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,17 @@\n   Server createServer() {\n     YarnRPC rpc \u003d YarnRPC.create(getConfig());\n     Configuration conf \u003d new Configuration(getConfig()); // Clone to separate\n                                                          // sec-info classes\n     LocalizerTokenSecretManager secretManager \u003d null;\n     if (UserGroupInformation.isSecurityEnabled()) {\n       conf.setClass(YarnConfiguration.YARN_SECURITY_INFO,\n           LocalizerSecurityInfo.class, SecurityInfo.class);\n       secretManager \u003d new LocalizerTokenSecretManager();\n     }\n     \n     return rpc.getServer(LocalizationProtocol.class, this,\n         localizationServerAddress, conf, secretManager, \n-        conf.getInt(NMConfig.NM_LOCALIZATION_THREADS, \n-            NMConfig.DEFAULT_NM_LOCALIZATION_THREADS));\n+        conf.getInt(YarnConfiguration.NM_LOCALIZER_CLIENT_THREAD_COUNT, \n+            YarnConfiguration.DEFAULT_NM_LOCALIZER_CLIENT_THREAD_COUNT));\n \n   }\n\\ No newline at end of file\n",
      "actualSource": "  Server createServer() {\n    YarnRPC rpc \u003d YarnRPC.create(getConfig());\n    Configuration conf \u003d new Configuration(getConfig()); // Clone to separate\n                                                         // sec-info classes\n    LocalizerTokenSecretManager secretManager \u003d null;\n    if (UserGroupInformation.isSecurityEnabled()) {\n      conf.setClass(YarnConfiguration.YARN_SECURITY_INFO,\n          LocalizerSecurityInfo.class, SecurityInfo.class);\n      secretManager \u003d new LocalizerTokenSecretManager();\n    }\n    \n    return rpc.getServer(LocalizationProtocol.class, this,\n        localizationServerAddress, conf, secretManager, \n        conf.getInt(YarnConfiguration.NM_LOCALIZER_CLIENT_THREAD_COUNT, \n            YarnConfiguration.DEFAULT_NM_LOCALIZER_CLIENT_THREAD_COUNT));\n\n  }",
      "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ResourceLocalizationService.java",
      "extendedDetails": {}
    },
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1": {
      "type": "Yfilerename",
      "commitMessage": "HADOOP-7560. Change src layout to be heirarchical. Contributed by Alejandro Abdelnur.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1161332 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/08/11 5:14 PM",
      "commitName": "cd7157784e5e5ddc4e77144d042e54dd0d04bac1",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "24/08/11 5:06 PM",
      "commitNameOld": "bb0005cfec5fd2861600ff5babd259b48ba18b63",
      "commitAuthorOld": "Arun Murthy",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  Server createServer() {\n    YarnRPC rpc \u003d YarnRPC.create(getConfig());\n    Configuration conf \u003d new Configuration(getConfig()); // Clone to separate\n                                                         // sec-info classes\n    LocalizerTokenSecretManager secretManager \u003d null;\n    if (UserGroupInformation.isSecurityEnabled()) {\n      conf.setClass(YarnConfiguration.YARN_SECURITY_INFO,\n          LocalizerSecurityInfo.class, SecurityInfo.class);\n      secretManager \u003d new LocalizerTokenSecretManager();\n    }\n    \n    return rpc.getServer(LocalizationProtocol.class, this,\n        localizationServerAddress, conf, secretManager, \n        conf.getInt(NMConfig.NM_LOCALIZATION_THREADS, \n            NMConfig.DEFAULT_NM_LOCALIZATION_THREADS));\n\n  }",
      "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ResourceLocalizationService.java",
      "extendedDetails": {
        "oldPath": "hadoop-mapreduce/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ResourceLocalizationService.java",
        "newPath": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ResourceLocalizationService.java"
      }
    },
    "dbecbe5dfe50f834fc3b8401709079e9470cc517": {
      "type": "Yintroduced",
      "commitMessage": "MAPREDUCE-279. MapReduce 2.0. Merging MR-279 branch into trunk. Contributed by Arun C Murthy, Christopher Douglas, Devaraj Das, Greg Roelofs, Jeffrey Naisbitt, Josh Wills, Jonathan Eagles, Krishna Ramachandran, Luke Lu, Mahadev Konar, Robert Evans, Sharad Agarwal, Siddharth Seth, Thomas Graves, and Vinod Kumar Vavilapalli.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1159166 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "18/08/11 4:07 AM",
      "commitName": "dbecbe5dfe50f834fc3b8401709079e9470cc517",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "diff": "@@ -0,0 +1,17 @@\n+  Server createServer() {\n+    YarnRPC rpc \u003d YarnRPC.create(getConfig());\n+    Configuration conf \u003d new Configuration(getConfig()); // Clone to separate\n+                                                         // sec-info classes\n+    LocalizerTokenSecretManager secretManager \u003d null;\n+    if (UserGroupInformation.isSecurityEnabled()) {\n+      conf.setClass(YarnConfiguration.YARN_SECURITY_INFO,\n+          LocalizerSecurityInfo.class, SecurityInfo.class);\n+      secretManager \u003d new LocalizerTokenSecretManager();\n+    }\n+    \n+    return rpc.getServer(LocalizationProtocol.class, this,\n+        localizationServerAddress, conf, secretManager, \n+        conf.getInt(NMConfig.NM_LOCALIZATION_THREADS, \n+            NMConfig.DEFAULT_NM_LOCALIZATION_THREADS));\n+\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  Server createServer() {\n    YarnRPC rpc \u003d YarnRPC.create(getConfig());\n    Configuration conf \u003d new Configuration(getConfig()); // Clone to separate\n                                                         // sec-info classes\n    LocalizerTokenSecretManager secretManager \u003d null;\n    if (UserGroupInformation.isSecurityEnabled()) {\n      conf.setClass(YarnConfiguration.YARN_SECURITY_INFO,\n          LocalizerSecurityInfo.class, SecurityInfo.class);\n      secretManager \u003d new LocalizerTokenSecretManager();\n    }\n    \n    return rpc.getServer(LocalizationProtocol.class, this,\n        localizationServerAddress, conf, secretManager, \n        conf.getInt(NMConfig.NM_LOCALIZATION_THREADS, \n            NMConfig.DEFAULT_NM_LOCALIZATION_THREADS));\n\n  }",
      "path": "hadoop-mapreduce/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/localizer/ResourceLocalizationService.java"
    }
  }
}