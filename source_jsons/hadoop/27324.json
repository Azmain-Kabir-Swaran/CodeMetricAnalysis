{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "TimelineReaderWebServices.java",
  "functionName": "checkAccess",
  "functionId": "checkAccess___readerManager-TimelineReaderManager__callerUGI-UserGroupInformation__entities-Set__TimelineEntity____entityUserKey-String__verifyForAllEntity-boolean",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-timelineservice/src/main/java/org/apache/hadoop/yarn/server/timelineservice/reader/TimelineReaderWebServices.java",
  "functionStartLine": 3652,
  "functionEndLine": 3672,
  "numCommitsSeen": 36,
  "timeTaken": 1025,
  "changeHistory": [
    "469b29c0817b7bf1902c9195c4f8d031a909e1c9"
  ],
  "changeHistoryShort": {
    "469b29c0817b7bf1902c9195c4f8d031a909e1c9": "Yintroduced"
  },
  "changeHistoryDetails": {
    "469b29c0817b7bf1902c9195c4f8d031a909e1c9": {
      "type": "Yintroduced",
      "commitMessage": "YARN-8455. Add basic ACL check for all ATS v2 REST APIs. Contributed by Rohith Sharma K S.\n",
      "commitDate": "29/06/18 10:02 AM",
      "commitName": "469b29c0817b7bf1902c9195c4f8d031a909e1c9",
      "commitAuthor": "Sunil G",
      "diff": "@@ -0,0 +1,21 @@\n+  static void checkAccess(TimelineReaderManager readerManager,\n+      UserGroupInformation callerUGI, Set\u003cTimelineEntity\u003e entities,\n+      String entityUserKey, boolean verifyForAllEntity) {\n+    if (entities.size() \u003e 0 \u0026\u0026 isDisplayEntityPerUserFilterEnabled(\n+        readerManager.getConfig())) {\n+      Set\u003cTimelineEntity\u003e userEntities \u003d new LinkedHashSet\u003c\u003e();\n+      userEntities.addAll(entities);\n+      for (TimelineEntity entity : userEntities) {\n+        if (entity.getInfo() !\u003d null) {\n+          String userId \u003d (String) entity.getInfo().get(entityUserKey);\n+          if (!validateAuthUserWithEntityUser(readerManager, callerUGI,\n+              userId)) {\n+            entities.remove(entity);\n+            if (!verifyForAllEntity) {\n+              break;\n+            }\n+          }\n+        }\n+      }\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  static void checkAccess(TimelineReaderManager readerManager,\n      UserGroupInformation callerUGI, Set\u003cTimelineEntity\u003e entities,\n      String entityUserKey, boolean verifyForAllEntity) {\n    if (entities.size() \u003e 0 \u0026\u0026 isDisplayEntityPerUserFilterEnabled(\n        readerManager.getConfig())) {\n      Set\u003cTimelineEntity\u003e userEntities \u003d new LinkedHashSet\u003c\u003e();\n      userEntities.addAll(entities);\n      for (TimelineEntity entity : userEntities) {\n        if (entity.getInfo() !\u003d null) {\n          String userId \u003d (String) entity.getInfo().get(entityUserKey);\n          if (!validateAuthUserWithEntityUser(readerManager, callerUGI,\n              userId)) {\n            entities.remove(entity);\n            if (!verifyForAllEntity) {\n              break;\n            }\n          }\n        }\n      }\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-timelineservice/src/main/java/org/apache/hadoop/yarn/server/timelineservice/reader/TimelineReaderWebServices.java"
    }
  }
}