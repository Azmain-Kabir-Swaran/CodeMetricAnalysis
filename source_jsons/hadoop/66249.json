{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "SLSRunner.java",
  "functionName": "increaseQueueAppNum",
  "functionId": "increaseQueueAppNum___queue-String",
  "sourceFilePath": "hadoop-tools/hadoop-sls/src/main/java/org/apache/hadoop/yarn/sls/SLSRunner.java",
  "functionStartLine": 809,
  "functionEndLine": 824,
  "numCommitsSeen": 40,
  "timeTaken": 1888,
  "changeHistory": [
    "10ec31d20ee1b6a0b1da915acb6b6ec33f2cd415",
    "46eb1033a86ca53e7b94202567aef8af2417bdf8",
    "475f933b41276b1bdeeec09e30369120f7eccdb8"
  ],
  "changeHistoryShort": {
    "10ec31d20ee1b6a0b1da915acb6b6ec33f2cd415": "Ybodychange",
    "46eb1033a86ca53e7b94202567aef8af2417bdf8": "Ybodychange",
    "475f933b41276b1bdeeec09e30369120f7eccdb8": "Yintroduced"
  },
  "changeHistoryDetails": {
    "10ec31d20ee1b6a0b1da915acb6b6ec33f2cd415": {
      "type": "Ybodychange",
      "commitMessage": "YARN-9765. SLS runner crashes when run with metrics turned off. Contributed by Abhishek Modi.\n",
      "commitDate": "21/08/19 1:18 AM",
      "commitName": "10ec31d20ee1b6a0b1da915acb6b6ec33f2cd415",
      "commitAuthor": "bibinchundatt",
      "commitDateOld": "08/08/19 11:11 PM",
      "commitNameOld": "a92b7a5491ea5f0f98297f216fe7d27d2378a85e",
      "commitAuthorOld": "Abhishek Modi",
      "daysBetweenCommits": 12.09,
      "commitsBetweenForRepo": 127,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,13 +1,16 @@\n   private void increaseQueueAppNum(String queue) throws YarnException {\n     SchedulerWrapper wrapper \u003d (SchedulerWrapper)rm.getResourceScheduler();\n     String queueName \u003d wrapper.getRealQueueName(queue);\n     Integer appNum \u003d queueAppNumMap.get(queueName);\n     if (appNum \u003d\u003d null) {\n       appNum \u003d 1;\n     } else {\n       appNum++;\n     }\n \n     queueAppNumMap.put(queueName, appNum);\n-    wrapper.getSchedulerMetrics().trackQueue(queueName);\n+    SchedulerMetrics metrics \u003d wrapper.getSchedulerMetrics();\n+    if (metrics !\u003d null) {\n+      metrics.trackQueue(queueName);\n+    }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void increaseQueueAppNum(String queue) throws YarnException {\n    SchedulerWrapper wrapper \u003d (SchedulerWrapper)rm.getResourceScheduler();\n    String queueName \u003d wrapper.getRealQueueName(queue);\n    Integer appNum \u003d queueAppNumMap.get(queueName);\n    if (appNum \u003d\u003d null) {\n      appNum \u003d 1;\n    } else {\n      appNum++;\n    }\n\n    queueAppNumMap.put(queueName, appNum);\n    SchedulerMetrics metrics \u003d wrapper.getSchedulerMetrics();\n    if (metrics !\u003d null) {\n      metrics.trackQueue(queueName);\n    }\n  }",
      "path": "hadoop-tools/hadoop-sls/src/main/java/org/apache/hadoop/yarn/sls/SLSRunner.java",
      "extendedDetails": {}
    },
    "46eb1033a86ca53e7b94202567aef8af2417bdf8": {
      "type": "Ybodychange",
      "commitMessage": "YARN-6546. SLS is slow while loading 10k queues. (Yufei Gu via Haibo Chen)\n",
      "commitDate": "17/10/17 4:04 PM",
      "commitName": "46eb1033a86ca53e7b94202567aef8af2417bdf8",
      "commitAuthor": "Haibo Chen",
      "commitDateOld": "29/08/17 4:33 PM",
      "commitNameOld": "26fafc359787eae0ef82196000f4a04956b2abaa",
      "commitAuthorOld": "Yufei Gu",
      "daysBetweenCommits": 48.98,
      "commitsBetweenForRepo": 485,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,12 +1,13 @@\n   private void increaseQueueAppNum(String queue) throws YarnException {\n     SchedulerWrapper wrapper \u003d (SchedulerWrapper)rm.getResourceScheduler();\n     String queueName \u003d wrapper.getRealQueueName(queue);\n     Integer appNum \u003d queueAppNumMap.get(queueName);\n     if (appNum \u003d\u003d null) {\n       appNum \u003d 1;\n     } else {\n       appNum++;\n     }\n \n     queueAppNumMap.put(queueName, appNum);\n+    wrapper.getSchedulerMetrics().trackQueue(queueName);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void increaseQueueAppNum(String queue) throws YarnException {\n    SchedulerWrapper wrapper \u003d (SchedulerWrapper)rm.getResourceScheduler();\n    String queueName \u003d wrapper.getRealQueueName(queue);\n    Integer appNum \u003d queueAppNumMap.get(queueName);\n    if (appNum \u003d\u003d null) {\n      appNum \u003d 1;\n    } else {\n      appNum++;\n    }\n\n    queueAppNumMap.put(queueName, appNum);\n    wrapper.getSchedulerMetrics().trackQueue(queueName);\n  }",
      "path": "hadoop-tools/hadoop-sls/src/main/java/org/apache/hadoop/yarn/sls/SLSRunner.java",
      "extendedDetails": {}
    },
    "475f933b41276b1bdeeec09e30369120f7eccdb8": {
      "type": "Yintroduced",
      "commitMessage": "YARN-6423. Queue metrics doesn\u0027t work for Fair Scheduler in SLS (yufeigu via rkanter)\n",
      "commitDate": "25/04/17 4:26 PM",
      "commitName": "475f933b41276b1bdeeec09e30369120f7eccdb8",
      "commitAuthor": "Robert Kanter",
      "diff": "@@ -0,0 +1,12 @@\n+  private void increaseQueueAppNum(String queue) throws YarnException {\n+    SchedulerWrapper wrapper \u003d (SchedulerWrapper)rm.getResourceScheduler();\n+    String queueName \u003d wrapper.getRealQueueName(queue);\n+    Integer appNum \u003d queueAppNumMap.get(queueName);\n+    if (appNum \u003d\u003d null) {\n+      appNum \u003d 1;\n+    } else {\n+      appNum++;\n+    }\n+\n+    queueAppNumMap.put(queueName, appNum);\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private void increaseQueueAppNum(String queue) throws YarnException {\n    SchedulerWrapper wrapper \u003d (SchedulerWrapper)rm.getResourceScheduler();\n    String queueName \u003d wrapper.getRealQueueName(queue);\n    Integer appNum \u003d queueAppNumMap.get(queueName);\n    if (appNum \u003d\u003d null) {\n      appNum \u003d 1;\n    } else {\n      appNum++;\n    }\n\n    queueAppNumMap.put(queueName, appNum);\n  }",
      "path": "hadoop-tools/hadoop-sls/src/main/java/org/apache/hadoop/yarn/sls/SLSRunner.java"
    }
  }
}