{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "ViewFileSystem.java",
  "functionName": "verifyRenameStrategy",
  "functionId": "verifyRenameStrategy___srcUri-URI__dstUri-URI__isSrcDestSame-boolean__renameStrategy-ViewFileSystem.RenameStrategy",
  "sourceFilePath": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/viewfs/ViewFileSystem.java",
  "functionStartLine": 625,
  "functionEndLine": 661,
  "numCommitsSeen": 55,
  "timeTaken": 1157,
  "changeHistory": [
    "6d983cca52f113118bf49fec527ffb3eb869290a"
  ],
  "changeHistoryShort": {
    "6d983cca52f113118bf49fec527ffb3eb869290a": "Yintroduced"
  },
  "changeHistoryDetails": {
    "6d983cca52f113118bf49fec527ffb3eb869290a": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-14455. ViewFileSystem#rename should support be supported within same nameservice with different mountpoints. Contributed by Brahma Reddy Battula.\n",
      "commitDate": "25/07/17 8:51 AM",
      "commitName": "6d983cca52f113118bf49fec527ffb3eb869290a",
      "commitAuthor": "Brahma Reddy Battula",
      "diff": "@@ -0,0 +1,37 @@\n+  static void verifyRenameStrategy(URI srcUri, URI dstUri,\n+      boolean isSrcDestSame, ViewFileSystem.RenameStrategy renameStrategy)\n+      throws IOException {\n+    switch (renameStrategy) {\n+    case SAME_FILESYSTEM_ACROSS_MOUNTPOINT:\n+      if (srcUri.getAuthority() !\u003d null) {\n+        if (!(srcUri.getScheme().equals(dstUri.getScheme()) \u0026\u0026 srcUri\n+            .getAuthority().equals(dstUri.getAuthority()))) {\n+          throw new IOException(\"Renames across Mount points not supported\");\n+        }\n+      }\n+\n+      break;\n+    case SAME_TARGET_URI_ACROSS_MOUNTPOINT:\n+      // Alternate 2: Rename across mountpoints with same target.\n+      // i.e. Rename across alias mountpoints.\n+      //\n+      // Note we compare the URIs. the URIs include the link targets.\n+      // hence we allow renames across mount links as long as the mount links\n+      // point to the same target.\n+      if (!srcUri.equals(dstUri)) {\n+        throw new IOException(\"Renames across Mount points not supported\");\n+      }\n+\n+      break;\n+    case SAME_MOUNTPOINT:\n+      //\n+      // Alternate 3 : renames ONLY within the the same mount links.\n+      //\n+      if (!isSrcDestSame) {\n+        throw new IOException(\"Renames across Mount points not supported\");\n+      }\n+      break;\n+    default:\n+      throw new IllegalArgumentException (\"Unexpected rename strategy\");\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  static void verifyRenameStrategy(URI srcUri, URI dstUri,\n      boolean isSrcDestSame, ViewFileSystem.RenameStrategy renameStrategy)\n      throws IOException {\n    switch (renameStrategy) {\n    case SAME_FILESYSTEM_ACROSS_MOUNTPOINT:\n      if (srcUri.getAuthority() !\u003d null) {\n        if (!(srcUri.getScheme().equals(dstUri.getScheme()) \u0026\u0026 srcUri\n            .getAuthority().equals(dstUri.getAuthority()))) {\n          throw new IOException(\"Renames across Mount points not supported\");\n        }\n      }\n\n      break;\n    case SAME_TARGET_URI_ACROSS_MOUNTPOINT:\n      // Alternate 2: Rename across mountpoints with same target.\n      // i.e. Rename across alias mountpoints.\n      //\n      // Note we compare the URIs. the URIs include the link targets.\n      // hence we allow renames across mount links as long as the mount links\n      // point to the same target.\n      if (!srcUri.equals(dstUri)) {\n        throw new IOException(\"Renames across Mount points not supported\");\n      }\n\n      break;\n    case SAME_MOUNTPOINT:\n      //\n      // Alternate 3 : renames ONLY within the the same mount links.\n      //\n      if (!isSrcDestSame) {\n        throw new IOException(\"Renames across Mount points not supported\");\n      }\n      break;\n    default:\n      throw new IllegalArgumentException (\"Unexpected rename strategy\");\n    }\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/viewfs/ViewFileSystem.java"
    }
  }
}