{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "DFSUtil.java",
  "functionName": "getNamenodeServiceAddr",
  "functionId": "getNamenodeServiceAddr___conf-Configuration(modifiers-final)__nsId-String__nnId-String",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSUtil.java",
  "functionStartLine": 1311,
  "functionEndLine": 1329,
  "numCommitsSeen": 154,
  "timeTaken": 3951,
  "changeHistory": [
    "65a941008d4bbf906772399d3f035f2a0da5abfa",
    "aa4b6fbe754ab7e3cf8ee106598d550f6e14783e",
    "6f8003dc7bc9e8be7b0512c514d370c303faf003",
    "a7d6bdc63b50a1e6cc67b66afba30446b3434030"
  ],
  "changeHistoryShort": {
    "65a941008d4bbf906772399d3f035f2a0da5abfa": "Ybodychange",
    "aa4b6fbe754ab7e3cf8ee106598d550f6e14783e": "Ybodychange",
    "6f8003dc7bc9e8be7b0512c514d370c303faf003": "Ybodychange",
    "a7d6bdc63b50a1e6cc67b66afba30446b3434030": "Ybodychange"
  },
  "changeHistoryDetails": {
    "65a941008d4bbf906772399d3f035f2a0da5abfa": {
      "type": "Ybodychange",
      "commitMessage": "Revert \"HDFS-10391. Always enable NameNode service RPC port. Contributed by Gergely Novak.\"\n\nThis reverts commit aa4b6fbe754ab7e3cf8ee106598d550f6e14783e.\n",
      "commitDate": "14/09/17 11:17 AM",
      "commitName": "65a941008d4bbf906772399d3f035f2a0da5abfa",
      "commitAuthor": "Arpit Agarwal",
      "commitDateOld": "09/09/17 8:40 AM",
      "commitNameOld": "aa4b6fbe754ab7e3cf8ee106598d550f6e14783e",
      "commitAuthorOld": "Arpit Agarwal",
      "daysBetweenCommits": 5.11,
      "commitsBetweenForRepo": 81,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,24 +1,19 @@\n   public static String getNamenodeServiceAddr(final Configuration conf,\n       String nsId, String nnId) {\n \n     if (nsId \u003d\u003d null) {\n       nsId \u003d getOnlyNameServiceIdOrNull(conf);\n     }\n \n     String serviceAddrKey \u003d DFSUtilClient.concatSuffixes(\n         DFSConfigKeys.DFS_NAMENODE_SERVICE_RPC_ADDRESS_KEY, nsId, nnId);\n \n+    String addrKey \u003d DFSUtilClient.concatSuffixes(\n+        DFSConfigKeys.DFS_NAMENODE_RPC_ADDRESS_KEY, nsId, nnId);\n+\n     String serviceRpcAddr \u003d conf.get(serviceAddrKey);\n     if (serviceRpcAddr \u003d\u003d null) {\n-      String addrKey \u003d DFSUtilClient.concatSuffixes(\n-          DFSConfigKeys.DFS_NAMENODE_RPC_ADDRESS_KEY, nsId, nnId);\n-      String rpcAddress \u003d conf.get(addrKey);\n-      if (rpcAddress !\u003d null) {\n-        InetSocketAddress rpcAddr \u003d NetUtils.createSocketAddr(rpcAddress);\n-        InetSocketAddress serviceAddr \u003d InetSocketAddress.createUnresolved(\n-            rpcAddr.getHostName(), DFS_NAMENODE_SERVICE_RPC_PORT_DEFAULT);\n-        serviceRpcAddr \u003d NetUtils.getHostPortString(serviceAddr);\n-      }\n+      serviceRpcAddr \u003d conf.get(addrKey);\n     }\n     return serviceRpcAddr;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static String getNamenodeServiceAddr(final Configuration conf,\n      String nsId, String nnId) {\n\n    if (nsId \u003d\u003d null) {\n      nsId \u003d getOnlyNameServiceIdOrNull(conf);\n    }\n\n    String serviceAddrKey \u003d DFSUtilClient.concatSuffixes(\n        DFSConfigKeys.DFS_NAMENODE_SERVICE_RPC_ADDRESS_KEY, nsId, nnId);\n\n    String addrKey \u003d DFSUtilClient.concatSuffixes(\n        DFSConfigKeys.DFS_NAMENODE_RPC_ADDRESS_KEY, nsId, nnId);\n\n    String serviceRpcAddr \u003d conf.get(serviceAddrKey);\n    if (serviceRpcAddr \u003d\u003d null) {\n      serviceRpcAddr \u003d conf.get(addrKey);\n    }\n    return serviceRpcAddr;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSUtil.java",
      "extendedDetails": {}
    },
    "aa4b6fbe754ab7e3cf8ee106598d550f6e14783e": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-10391. Always enable NameNode service RPC port. Contributed by Gergely Novak.\n",
      "commitDate": "09/09/17 8:40 AM",
      "commitName": "aa4b6fbe754ab7e3cf8ee106598d550f6e14783e",
      "commitAuthor": "Arpit Agarwal",
      "commitDateOld": "31/08/17 11:20 PM",
      "commitNameOld": "1b3b9938cf663c71d2e5d9032fdfb1460bae0d3f",
      "commitAuthorOld": "Xiao Chen",
      "daysBetweenCommits": 8.39,
      "commitsBetweenForRepo": 60,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,24 @@\n   public static String getNamenodeServiceAddr(final Configuration conf,\n       String nsId, String nnId) {\n \n     if (nsId \u003d\u003d null) {\n       nsId \u003d getOnlyNameServiceIdOrNull(conf);\n     }\n \n     String serviceAddrKey \u003d DFSUtilClient.concatSuffixes(\n         DFSConfigKeys.DFS_NAMENODE_SERVICE_RPC_ADDRESS_KEY, nsId, nnId);\n \n-    String addrKey \u003d DFSUtilClient.concatSuffixes(\n-        DFSConfigKeys.DFS_NAMENODE_RPC_ADDRESS_KEY, nsId, nnId);\n-\n     String serviceRpcAddr \u003d conf.get(serviceAddrKey);\n     if (serviceRpcAddr \u003d\u003d null) {\n-      serviceRpcAddr \u003d conf.get(addrKey);\n+      String addrKey \u003d DFSUtilClient.concatSuffixes(\n+          DFSConfigKeys.DFS_NAMENODE_RPC_ADDRESS_KEY, nsId, nnId);\n+      String rpcAddress \u003d conf.get(addrKey);\n+      if (rpcAddress !\u003d null) {\n+        InetSocketAddress rpcAddr \u003d NetUtils.createSocketAddr(rpcAddress);\n+        InetSocketAddress serviceAddr \u003d InetSocketAddress.createUnresolved(\n+            rpcAddr.getHostName(), DFS_NAMENODE_SERVICE_RPC_PORT_DEFAULT);\n+        serviceRpcAddr \u003d NetUtils.getHostPortString(serviceAddr);\n+      }\n     }\n     return serviceRpcAddr;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static String getNamenodeServiceAddr(final Configuration conf,\n      String nsId, String nnId) {\n\n    if (nsId \u003d\u003d null) {\n      nsId \u003d getOnlyNameServiceIdOrNull(conf);\n    }\n\n    String serviceAddrKey \u003d DFSUtilClient.concatSuffixes(\n        DFSConfigKeys.DFS_NAMENODE_SERVICE_RPC_ADDRESS_KEY, nsId, nnId);\n\n    String serviceRpcAddr \u003d conf.get(serviceAddrKey);\n    if (serviceRpcAddr \u003d\u003d null) {\n      String addrKey \u003d DFSUtilClient.concatSuffixes(\n          DFSConfigKeys.DFS_NAMENODE_RPC_ADDRESS_KEY, nsId, nnId);\n      String rpcAddress \u003d conf.get(addrKey);\n      if (rpcAddress !\u003d null) {\n        InetSocketAddress rpcAddr \u003d NetUtils.createSocketAddr(rpcAddress);\n        InetSocketAddress serviceAddr \u003d InetSocketAddress.createUnresolved(\n            rpcAddr.getHostName(), DFS_NAMENODE_SERVICE_RPC_PORT_DEFAULT);\n        serviceRpcAddr \u003d NetUtils.getHostPortString(serviceAddr);\n      }\n    }\n    return serviceRpcAddr;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSUtil.java",
      "extendedDetails": {}
    },
    "6f8003dc7bc9e8be7b0512c514d370c303faf003": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-8185. Separate client related routines in HAUtil into a new class. Contributed by Haohui Mai.\n",
      "commitDate": "21/04/15 9:59 PM",
      "commitName": "6f8003dc7bc9e8be7b0512c514d370c303faf003",
      "commitAuthor": "Haohui Mai",
      "commitDateOld": "20/04/15 12:36 AM",
      "commitNameOld": "5c97db07fb306842f49d73a67a90cecec19a7833",
      "commitAuthorOld": "Haohui Mai",
      "daysBetweenCommits": 1.89,
      "commitsBetweenForRepo": 22,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,19 @@\n   public static String getNamenodeServiceAddr(final Configuration conf,\n       String nsId, String nnId) {\n \n     if (nsId \u003d\u003d null) {\n       nsId \u003d getOnlyNameServiceIdOrNull(conf);\n     }\n \n-    String serviceAddrKey \u003d concatSuffixes(\n+    String serviceAddrKey \u003d DFSUtilClient.concatSuffixes(\n         DFSConfigKeys.DFS_NAMENODE_SERVICE_RPC_ADDRESS_KEY, nsId, nnId);\n \n-    String addrKey \u003d concatSuffixes(\n+    String addrKey \u003d DFSUtilClient.concatSuffixes(\n         DFSConfigKeys.DFS_NAMENODE_RPC_ADDRESS_KEY, nsId, nnId);\n \n     String serviceRpcAddr \u003d conf.get(serviceAddrKey);\n     if (serviceRpcAddr \u003d\u003d null) {\n       serviceRpcAddr \u003d conf.get(addrKey);\n     }\n     return serviceRpcAddr;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static String getNamenodeServiceAddr(final Configuration conf,\n      String nsId, String nnId) {\n\n    if (nsId \u003d\u003d null) {\n      nsId \u003d getOnlyNameServiceIdOrNull(conf);\n    }\n\n    String serviceAddrKey \u003d DFSUtilClient.concatSuffixes(\n        DFSConfigKeys.DFS_NAMENODE_SERVICE_RPC_ADDRESS_KEY, nsId, nnId);\n\n    String addrKey \u003d DFSUtilClient.concatSuffixes(\n        DFSConfigKeys.DFS_NAMENODE_RPC_ADDRESS_KEY, nsId, nnId);\n\n    String serviceRpcAddr \u003d conf.get(serviceAddrKey);\n    if (serviceRpcAddr \u003d\u003d null) {\n      serviceRpcAddr \u003d conf.get(addrKey);\n    }\n    return serviceRpcAddr;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSUtil.java",
      "extendedDetails": {}
    },
    "a7d6bdc63b50a1e6cc67b66afba30446b3434030": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-3084. FenceMethod.tryFence() and ShellCommandFencer should pass namenodeId as well as host:port. Contributed by Todd Lipcon.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1309526 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "04/04/12 11:40 AM",
      "commitName": "a7d6bdc63b50a1e6cc67b66afba30446b3434030",
      "commitAuthor": "Todd Lipcon",
      "commitDateOld": "01/04/12 3:12 PM",
      "commitNameOld": "be7dd8333a7e56e732171db0781786987de03195",
      "commitAuthorOld": "Eli Collins",
      "daysBetweenCommits": 2.85,
      "commitsBetweenForRepo": 39,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,25 +1,19 @@\n   public static String getNamenodeServiceAddr(final Configuration conf,\n       String nsId, String nnId) {\n \n     if (nsId \u003d\u003d null) {\n-      Collection\u003cString\u003e nsIds \u003d getNameServiceIds(conf);\n-      if (1 \u003d\u003d nsIds.size()) {\n-        nsId \u003d nsIds.toArray(new String[1])[0];\n-      } else {\n-        // No nameservice ID was given and more than one is configured\n-        return null;\n-      }\n+      nsId \u003d getOnlyNameServiceIdOrNull(conf);\n     }\n \n     String serviceAddrKey \u003d concatSuffixes(\n         DFSConfigKeys.DFS_NAMENODE_SERVICE_RPC_ADDRESS_KEY, nsId, nnId);\n \n     String addrKey \u003d concatSuffixes(\n         DFSConfigKeys.DFS_NAMENODE_RPC_ADDRESS_KEY, nsId, nnId);\n \n     String serviceRpcAddr \u003d conf.get(serviceAddrKey);\n     if (serviceRpcAddr \u003d\u003d null) {\n       serviceRpcAddr \u003d conf.get(addrKey);\n     }\n     return serviceRpcAddr;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static String getNamenodeServiceAddr(final Configuration conf,\n      String nsId, String nnId) {\n\n    if (nsId \u003d\u003d null) {\n      nsId \u003d getOnlyNameServiceIdOrNull(conf);\n    }\n\n    String serviceAddrKey \u003d concatSuffixes(\n        DFSConfigKeys.DFS_NAMENODE_SERVICE_RPC_ADDRESS_KEY, nsId, nnId);\n\n    String addrKey \u003d concatSuffixes(\n        DFSConfigKeys.DFS_NAMENODE_RPC_ADDRESS_KEY, nsId, nnId);\n\n    String serviceRpcAddr \u003d conf.get(serviceAddrKey);\n    if (serviceRpcAddr \u003d\u003d null) {\n      serviceRpcAddr \u003d conf.get(addrKey);\n    }\n    return serviceRpcAddr;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSUtil.java",
      "extendedDetails": {}
    }
  }
}