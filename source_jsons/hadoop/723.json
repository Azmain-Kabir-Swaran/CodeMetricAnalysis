{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "DataStreamer.java",
  "functionName": "closeStream",
  "functionId": "closeStream",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DataStreamer.java",
  "functionStartLine": 997,
  "functionEndLine": 1032,
  "numCommitsSeen": 156,
  "timeTaken": 8142,
  "changeHistory": [
    "bf37d3d80e5179dea27e5bd5aea804a38aa9934c",
    "7947e5b53b9ac9524b535b0384c1c355b74723ff",
    "a16bfff71bd7f00e06e1f59bfe5445a154bb8c66",
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1",
    "d86f3183d93714ba078416af4f609d26376eadb0",
    "504b801ca0e7fd3944872d3214539feb2d614f06",
    "a196766ea07775f18ded69bd9e8d239f8cfd3ccc"
  ],
  "changeHistoryShort": {
    "bf37d3d80e5179dea27e5bd5aea804a38aa9934c": "Yfilerename",
    "7947e5b53b9ac9524b535b0384c1c355b74723ff": "Ybodychange",
    "a16bfff71bd7f00e06e1f59bfe5445a154bb8c66": "Ymovefromfile",
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1": "Yfilerename",
    "d86f3183d93714ba078416af4f609d26376eadb0": "Yfilerename",
    "504b801ca0e7fd3944872d3214539feb2d614f06": "Ybodychange",
    "a196766ea07775f18ded69bd9e8d239f8cfd3ccc": "Yintroduced"
  },
  "changeHistoryDetails": {
    "bf37d3d80e5179dea27e5bd5aea804a38aa9934c": {
      "type": "Yfilerename",
      "commitMessage": "HDFS-8053. Move DFSIn/OutputStream and related classes to hadoop-hdfs-client. Contributed by Mingliang Liu.\n",
      "commitDate": "26/09/15 11:08 AM",
      "commitName": "bf37d3d80e5179dea27e5bd5aea804a38aa9934c",
      "commitAuthor": "Haohui Mai",
      "commitDateOld": "26/09/15 9:06 AM",
      "commitNameOld": "861b52db242f238d7e36ad75c158025be959a696",
      "commitAuthorOld": "Vinayakumar B",
      "daysBetweenCommits": 0.08,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  private void closeStream() {\n    final MultipleIOException.Builder b \u003d new MultipleIOException.Builder();\n\n    if (blockStream !\u003d null) {\n      try {\n        blockStream.close();\n      } catch (IOException e) {\n        b.add(e);\n      } finally {\n        blockStream \u003d null;\n      }\n    }\n    if (blockReplyStream !\u003d null) {\n      try {\n        blockReplyStream.close();\n      } catch (IOException e) {\n        b.add(e);\n      } finally {\n        blockReplyStream \u003d null;\n      }\n    }\n    if (null !\u003d s) {\n      try {\n        s.close();\n      } catch (IOException e) {\n        b.add(e);\n      } finally {\n        s \u003d null;\n      }\n    }\n\n    final IOException ioe \u003d b.build();\n    if (ioe !\u003d null) {\n      lastException.set(ioe);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DataStreamer.java",
      "extendedDetails": {
        "oldPath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DataStreamer.java",
        "newPath": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DataStreamer.java"
      }
    },
    "7947e5b53b9ac9524b535b0384c1c355b74723ff": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-8283. DataStreamer cleanup and some minor improvement. Contributed by Tsz Wo Nicholas Sze.\n",
      "commitDate": "29/04/15 10:41 AM",
      "commitName": "7947e5b53b9ac9524b535b0384c1c355b74723ff",
      "commitAuthor": "Jing Zhao",
      "commitDateOld": "24/04/15 12:21 AM",
      "commitNameOld": "c8d72907ff5a4cb9ce1effca8ad9b69689d11d1d",
      "commitAuthorOld": "Vinayakumar B",
      "daysBetweenCommits": 5.43,
      "commitsBetweenForRepo": 43,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,29 +1,36 @@\n   private void closeStream() {\n+    final MultipleIOException.Builder b \u003d new MultipleIOException.Builder();\n+\n     if (blockStream !\u003d null) {\n       try {\n         blockStream.close();\n       } catch (IOException e) {\n-        setLastException(e);\n+        b.add(e);\n       } finally {\n         blockStream \u003d null;\n       }\n     }\n     if (blockReplyStream !\u003d null) {\n       try {\n         blockReplyStream.close();\n       } catch (IOException e) {\n-        setLastException(e);\n+        b.add(e);\n       } finally {\n         blockReplyStream \u003d null;\n       }\n     }\n     if (null !\u003d s) {\n       try {\n         s.close();\n       } catch (IOException e) {\n-        setLastException(e);\n+        b.add(e);\n       } finally {\n         s \u003d null;\n       }\n     }\n+\n+    final IOException ioe \u003d b.build();\n+    if (ioe !\u003d null) {\n+      lastException.set(ioe);\n+    }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void closeStream() {\n    final MultipleIOException.Builder b \u003d new MultipleIOException.Builder();\n\n    if (blockStream !\u003d null) {\n      try {\n        blockStream.close();\n      } catch (IOException e) {\n        b.add(e);\n      } finally {\n        blockStream \u003d null;\n      }\n    }\n    if (blockReplyStream !\u003d null) {\n      try {\n        blockReplyStream.close();\n      } catch (IOException e) {\n        b.add(e);\n      } finally {\n        blockReplyStream \u003d null;\n      }\n    }\n    if (null !\u003d s) {\n      try {\n        s.close();\n      } catch (IOException e) {\n        b.add(e);\n      } finally {\n        s \u003d null;\n      }\n    }\n\n    final IOException ioe \u003d b.build();\n    if (ioe !\u003d null) {\n      lastException.set(ioe);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DataStreamer.java",
      "extendedDetails": {}
    },
    "a16bfff71bd7f00e06e1f59bfe5445a154bb8c66": {
      "type": "Ymovefromfile",
      "commitMessage": "HDFS-7854. Separate class DataStreamer out of DFSOutputStream. Contributed by Li Bo.\n",
      "commitDate": "24/03/15 11:06 AM",
      "commitName": "a16bfff71bd7f00e06e1f59bfe5445a154bb8c66",
      "commitAuthor": "Jing Zhao",
      "commitDateOld": "24/03/15 10:49 AM",
      "commitNameOld": "570a83ae80faf2076966acf30588733803327844",
      "commitAuthorOld": "Brandon Li",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,29 +1,29 @@\n-    private void closeStream() {\n-      if (blockStream !\u003d null) {\n-        try {\n-          blockStream.close();\n-        } catch (IOException e) {\n-          setLastException(e);\n-        } finally {\n-          blockStream \u003d null;\n-        }\n+  private void closeStream() {\n+    if (blockStream !\u003d null) {\n+      try {\n+        blockStream.close();\n+      } catch (IOException e) {\n+        setLastException(e);\n+      } finally {\n+        blockStream \u003d null;\n       }\n-      if (blockReplyStream !\u003d null) {\n-        try {\n-          blockReplyStream.close();\n-        } catch (IOException e) {\n-          setLastException(e);\n-        } finally {\n-          blockReplyStream \u003d null;\n-        }\n+    }\n+    if (blockReplyStream !\u003d null) {\n+      try {\n+        blockReplyStream.close();\n+      } catch (IOException e) {\n+        setLastException(e);\n+      } finally {\n+        blockReplyStream \u003d null;\n       }\n-      if (null !\u003d s) {\n-        try {\n-          s.close();\n-        } catch (IOException e) {\n-          setLastException(e);\n-        } finally {\n-          s \u003d null;\n-        }\n+    }\n+    if (null !\u003d s) {\n+      try {\n+        s.close();\n+      } catch (IOException e) {\n+        setLastException(e);\n+      } finally {\n+        s \u003d null;\n       }\n-    }\n\\ No newline at end of file\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private void closeStream() {\n    if (blockStream !\u003d null) {\n      try {\n        blockStream.close();\n      } catch (IOException e) {\n        setLastException(e);\n      } finally {\n        blockStream \u003d null;\n      }\n    }\n    if (blockReplyStream !\u003d null) {\n      try {\n        blockReplyStream.close();\n      } catch (IOException e) {\n        setLastException(e);\n      } finally {\n        blockReplyStream \u003d null;\n      }\n    }\n    if (null !\u003d s) {\n      try {\n        s.close();\n      } catch (IOException e) {\n        setLastException(e);\n      } finally {\n        s \u003d null;\n      }\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DataStreamer.java",
      "extendedDetails": {
        "oldPath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSOutputStream.java",
        "newPath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DataStreamer.java",
        "oldMethodName": "closeStream",
        "newMethodName": "closeStream"
      }
    },
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1": {
      "type": "Yfilerename",
      "commitMessage": "HADOOP-7560. Change src layout to be heirarchical. Contributed by Alejandro Abdelnur.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1161332 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/08/11 5:14 PM",
      "commitName": "cd7157784e5e5ddc4e77144d042e54dd0d04bac1",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "24/08/11 5:06 PM",
      "commitNameOld": "bb0005cfec5fd2861600ff5babd259b48ba18b63",
      "commitAuthorOld": "Arun Murthy",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "    private void closeStream() {\n      if (blockStream !\u003d null) {\n        try {\n          blockStream.close();\n        } catch (IOException e) {\n          setLastException(e);\n        } finally {\n          blockStream \u003d null;\n        }\n      }\n      if (blockReplyStream !\u003d null) {\n        try {\n          blockReplyStream.close();\n        } catch (IOException e) {\n          setLastException(e);\n        } finally {\n          blockReplyStream \u003d null;\n        }\n      }\n      if (null !\u003d s) {\n        try {\n          s.close();\n        } catch (IOException e) {\n          setLastException(e);\n        } finally {\n          s \u003d null;\n        }\n      }\n    }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSOutputStream.java",
      "extendedDetails": {
        "oldPath": "hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSOutputStream.java",
        "newPath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSOutputStream.java"
      }
    },
    "d86f3183d93714ba078416af4f609d26376eadb0": {
      "type": "Yfilerename",
      "commitMessage": "HDFS-2096. Mavenization of hadoop-hdfs. Contributed by Alejandro Abdelnur.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1159702 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "19/08/11 10:36 AM",
      "commitName": "d86f3183d93714ba078416af4f609d26376eadb0",
      "commitAuthor": "Thomas White",
      "commitDateOld": "19/08/11 10:26 AM",
      "commitNameOld": "6ee5a73e0e91a2ef27753a32c576835e951d8119",
      "commitAuthorOld": "Thomas White",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "    private void closeStream() {\n      if (blockStream !\u003d null) {\n        try {\n          blockStream.close();\n        } catch (IOException e) {\n          setLastException(e);\n        } finally {\n          blockStream \u003d null;\n        }\n      }\n      if (blockReplyStream !\u003d null) {\n        try {\n          blockReplyStream.close();\n        } catch (IOException e) {\n          setLastException(e);\n        } finally {\n          blockReplyStream \u003d null;\n        }\n      }\n      if (null !\u003d s) {\n        try {\n          s.close();\n        } catch (IOException e) {\n          setLastException(e);\n        } finally {\n          s \u003d null;\n        }\n      }\n    }",
      "path": "hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSOutputStream.java",
      "extendedDetails": {
        "oldPath": "hdfs/src/java/org/apache/hadoop/hdfs/DFSOutputStream.java",
        "newPath": "hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/DFSOutputStream.java"
      }
    },
    "504b801ca0e7fd3944872d3214539feb2d614f06": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-73. DFSOutputStream does not close all the sockets. Contributed by Uma Maheswara Rao G\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1157232 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "12/08/11 12:57 PM",
      "commitName": "504b801ca0e7fd3944872d3214539feb2d614f06",
      "commitAuthor": "Eli Collins",
      "commitDateOld": "10/08/11 5:46 PM",
      "commitNameOld": "ef223e8e8e1e18733fc18cd84e34dd0bb0f9a710",
      "commitAuthorOld": "Suresh Srinivas",
      "daysBetweenCommits": 1.8,
      "commitsBetweenForRepo": 21,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,29 @@\n     private void closeStream() {\n       if (blockStream !\u003d null) {\n         try {\n           blockStream.close();\n         } catch (IOException e) {\n+          setLastException(e);\n         } finally {\n           blockStream \u003d null;\n         }\n       }\n       if (blockReplyStream !\u003d null) {\n         try {\n           blockReplyStream.close();\n         } catch (IOException e) {\n+          setLastException(e);\n         } finally {\n           blockReplyStream \u003d null;\n         }\n       }\n+      if (null !\u003d s) {\n+        try {\n+          s.close();\n+        } catch (IOException e) {\n+          setLastException(e);\n+        } finally {\n+          s \u003d null;\n+        }\n+      }\n     }\n\\ No newline at end of file\n",
      "actualSource": "    private void closeStream() {\n      if (blockStream !\u003d null) {\n        try {\n          blockStream.close();\n        } catch (IOException e) {\n          setLastException(e);\n        } finally {\n          blockStream \u003d null;\n        }\n      }\n      if (blockReplyStream !\u003d null) {\n        try {\n          blockReplyStream.close();\n        } catch (IOException e) {\n          setLastException(e);\n        } finally {\n          blockReplyStream \u003d null;\n        }\n      }\n      if (null !\u003d s) {\n        try {\n          s.close();\n        } catch (IOException e) {\n          setLastException(e);\n        } finally {\n          s \u003d null;\n        }\n      }\n    }",
      "path": "hdfs/src/java/org/apache/hadoop/hdfs/DFSOutputStream.java",
      "extendedDetails": {}
    },
    "a196766ea07775f18ded69bd9e8d239f8cfd3ccc": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-7106. Reorganize SVN layout to combine HDFS, Common, and MR in a single tree (project unsplit)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1134994 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "12/06/11 3:00 PM",
      "commitName": "a196766ea07775f18ded69bd9e8d239f8cfd3ccc",
      "commitAuthor": "Todd Lipcon",
      "diff": "@@ -0,0 +1,18 @@\n+    private void closeStream() {\n+      if (blockStream !\u003d null) {\n+        try {\n+          blockStream.close();\n+        } catch (IOException e) {\n+        } finally {\n+          blockStream \u003d null;\n+        }\n+      }\n+      if (blockReplyStream !\u003d null) {\n+        try {\n+          blockReplyStream.close();\n+        } catch (IOException e) {\n+        } finally {\n+          blockReplyStream \u003d null;\n+        }\n+      }\n+    }\n\\ No newline at end of file\n",
      "actualSource": "    private void closeStream() {\n      if (blockStream !\u003d null) {\n        try {\n          blockStream.close();\n        } catch (IOException e) {\n        } finally {\n          blockStream \u003d null;\n        }\n      }\n      if (blockReplyStream !\u003d null) {\n        try {\n          blockReplyStream.close();\n        } catch (IOException e) {\n        } finally {\n          blockReplyStream \u003d null;\n        }\n      }\n    }",
      "path": "hdfs/src/java/org/apache/hadoop/hdfs/DFSOutputStream.java"
    }
  }
}