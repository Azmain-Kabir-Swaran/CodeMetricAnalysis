{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "RouterAdminServer.java",
  "functionName": "removeMountTableEntry",
  "functionId": "removeMountTableEntry___request-RemoveMountTableEntryRequest",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs-rbf/src/main/java/org/apache/hadoop/hdfs/server/federation/router/RouterAdminServer.java",
  "functionStartLine": 449,
  "functionEndLine": 462,
  "numCommitsSeen": 27,
  "timeTaken": 2775,
  "changeHistory": [
    "8730a7bf6025a3b2b7d6e6686533283b854af192",
    "6cdf8db55ca42ab11cfb21081934e20976f91f12",
    "4244653e430374d77ce52e4791f5b4817092003a",
    "6e2b5fa493ff8e8c2bb28e6f6f4c19347bc9b99d",
    "b3e6bd22e3c02b3e4f50396538f56a1bcb007638"
  ],
  "changeHistoryShort": {
    "8730a7bf6025a3b2b7d6e6686533283b854af192": "Ybodychange",
    "6cdf8db55ca42ab11cfb21081934e20976f91f12": "Ybodychange",
    "4244653e430374d77ce52e4791f5b4817092003a": "Ybodychange",
    "6e2b5fa493ff8e8c2bb28e6f6f4c19347bc9b99d": "Yfilerename",
    "b3e6bd22e3c02b3e4f50396538f56a1bcb007638": "Yintroduced"
  },
  "changeHistoryDetails": {
    "8730a7bf6025a3b2b7d6e6686533283b854af192": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-15003. RBF: Make Router support storage type quota. Contributed by Jinglun.\n",
      "commitDate": "26/12/19 7:52 PM",
      "commitName": "8730a7bf6025a3b2b7d6e6686533283b854af192",
      "commitAuthor": "Ayush Saxena",
      "commitDateOld": "14/12/19 4:27 AM",
      "commitNameOld": "72aee114f8b1feae4a187cce0aa5a8d2ff55f416",
      "commitAuthorOld": "Ayush Saxena",
      "daysBetweenCommits": 12.64,
      "commitsBetweenForRepo": 31,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,14 +1,14 @@\n   public RemoveMountTableEntryResponse removeMountTableEntry(\n       RemoveMountTableEntryRequest request) throws IOException {\n     // clear sub-cluster\u0027s quota definition\n     try {\n       synchronizeQuota(request.getSrcPath(), HdfsConstants.QUOTA_RESET,\n-          HdfsConstants.QUOTA_RESET);\n+          HdfsConstants.QUOTA_RESET, null);\n     } catch (Exception e) {\n       // Ignore exception, if any while reseting quota. Specifically to handle\n       // if the actual destination doesn\u0027t exist.\n       LOG.warn(\"Unable to clear quota at the destinations for {}: {}\",\n           request.getSrcPath(), e.getMessage());\n     }\n     return getMountTableStore().removeMountTableEntry(request);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public RemoveMountTableEntryResponse removeMountTableEntry(\n      RemoveMountTableEntryRequest request) throws IOException {\n    // clear sub-cluster\u0027s quota definition\n    try {\n      synchronizeQuota(request.getSrcPath(), HdfsConstants.QUOTA_RESET,\n          HdfsConstants.QUOTA_RESET, null);\n    } catch (Exception e) {\n      // Ignore exception, if any while reseting quota. Specifically to handle\n      // if the actual destination doesn\u0027t exist.\n      LOG.warn(\"Unable to clear quota at the destinations for {}: {}\",\n          request.getSrcPath(), e.getMessage());\n    }\n    return getMountTableStore().removeMountTableEntry(request);\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-rbf/src/main/java/org/apache/hadoop/hdfs/server/federation/router/RouterAdminServer.java",
      "extendedDetails": {}
    },
    "6cdf8db55ca42ab11cfb21081934e20976f91f12": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-14331. RBF: IOE While Removing Mount Entry. Contributed by Ayush Saxena.\n",
      "commitDate": "24/06/19 9:33 AM",
      "commitName": "6cdf8db55ca42ab11cfb21081934e20976f91f12",
      "commitAuthor": "Inigo Goiri",
      "commitDateOld": "24/06/19 9:33 AM",
      "commitNameOld": "8b8ff5ccbc677d98a91092b2fa64999a99d1595d",
      "commitAuthorOld": "Giovanni Matteo Fumarola",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 6,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,7 +1,14 @@\n   public RemoveMountTableEntryResponse removeMountTableEntry(\n       RemoveMountTableEntryRequest request) throws IOException {\n     // clear sub-cluster\u0027s quota definition\n-    synchronizeQuota(request.getSrcPath(), HdfsConstants.QUOTA_RESET,\n-        HdfsConstants.QUOTA_RESET);\n+    try {\n+      synchronizeQuota(request.getSrcPath(), HdfsConstants.QUOTA_RESET,\n+          HdfsConstants.QUOTA_RESET);\n+    } catch (Exception e) {\n+      // Ignore exception, if any while reseting quota. Specifically to handle\n+      // if the actual destination doesn\u0027t exist.\n+      LOG.warn(\"Unable to clear quota at the destinations for {}: {}\",\n+          request.getSrcPath(), e.getMessage());\n+    }\n     return getMountTableStore().removeMountTableEntry(request);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public RemoveMountTableEntryResponse removeMountTableEntry(\n      RemoveMountTableEntryRequest request) throws IOException {\n    // clear sub-cluster\u0027s quota definition\n    try {\n      synchronizeQuota(request.getSrcPath(), HdfsConstants.QUOTA_RESET,\n          HdfsConstants.QUOTA_RESET);\n    } catch (Exception e) {\n      // Ignore exception, if any while reseting quota. Specifically to handle\n      // if the actual destination doesn\u0027t exist.\n      LOG.warn(\"Unable to clear quota at the destinations for {}: {}\",\n          request.getSrcPath(), e.getMessage());\n    }\n    return getMountTableStore().removeMountTableEntry(request);\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-rbf/src/main/java/org/apache/hadoop/hdfs/server/federation/router/RouterAdminServer.java",
      "extendedDetails": {}
    },
    "4244653e430374d77ce52e4791f5b4817092003a": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-14150. RBF: Quotas of the sub-cluster should be removed when removing the mount point. Contributed by Takanobu Asanuma.\n",
      "commitDate": "24/06/19 9:33 AM",
      "commitName": "4244653e430374d77ce52e4791f5b4817092003a",
      "commitAuthor": "Yiqun Lin",
      "commitDateOld": "24/06/19 9:33 AM",
      "commitNameOld": "8f6f9d9c8398567064c9369f48213db63f45538c",
      "commitAuthorOld": "Yiqun Lin",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 3,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,4 +1,7 @@\n   public RemoveMountTableEntryResponse removeMountTableEntry(\n       RemoveMountTableEntryRequest request) throws IOException {\n+    // clear sub-cluster\u0027s quota definition\n+    synchronizeQuota(request.getSrcPath(), HdfsConstants.QUOTA_RESET,\n+        HdfsConstants.QUOTA_RESET);\n     return getMountTableStore().removeMountTableEntry(request);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public RemoveMountTableEntryResponse removeMountTableEntry(\n      RemoveMountTableEntryRequest request) throws IOException {\n    // clear sub-cluster\u0027s quota definition\n    synchronizeQuota(request.getSrcPath(), HdfsConstants.QUOTA_RESET,\n        HdfsConstants.QUOTA_RESET);\n    return getMountTableStore().removeMountTableEntry(request);\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-rbf/src/main/java/org/apache/hadoop/hdfs/server/federation/router/RouterAdminServer.java",
      "extendedDetails": {}
    },
    "6e2b5fa493ff8e8c2bb28e6f6f4c19347bc9b99d": {
      "type": "Yfilerename",
      "commitMessage": "HDFS-13215. RBF: Move Router to its own module. Contributed by Wei Yan\n",
      "commitDate": "19/03/18 10:13 PM",
      "commitName": "6e2b5fa493ff8e8c2bb28e6f6f4c19347bc9b99d",
      "commitAuthor": "weiy",
      "commitDateOld": "19/03/18 5:19 PM",
      "commitNameOld": "e65ff1c8be48ef4f04ed96f96ac4caef4974944d",
      "commitAuthorOld": "Inigo Goiri",
      "daysBetweenCommits": 0.2,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  public RemoveMountTableEntryResponse removeMountTableEntry(\n      RemoveMountTableEntryRequest request) throws IOException {\n    return getMountTableStore().removeMountTableEntry(request);\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-rbf/src/main/java/org/apache/hadoop/hdfs/server/federation/router/RouterAdminServer.java",
      "extendedDetails": {
        "oldPath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/federation/router/RouterAdminServer.java",
        "newPath": "hadoop-hdfs-project/hadoop-hdfs-rbf/src/main/java/org/apache/hadoop/hdfs/server/federation/router/RouterAdminServer.java"
      }
    },
    "b3e6bd22e3c02b3e4f50396538f56a1bcb007638": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-10646. Federation admin tool. Contributed by Inigo Goiri.\n\n(cherry picked from commit ae27e31fbcf546481db0b0345772db2e9132372e)\n",
      "commitDate": "06/10/17 6:50 PM",
      "commitName": "b3e6bd22e3c02b3e4f50396538f56a1bcb007638",
      "commitAuthor": "Inigo Goiri",
      "diff": "@@ -0,0 +1,4 @@\n+  public RemoveMountTableEntryResponse removeMountTableEntry(\n+      RemoveMountTableEntryRequest request) throws IOException {\n+    return getMountTableStore().removeMountTableEntry(request);\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public RemoveMountTableEntryResponse removeMountTableEntry(\n      RemoveMountTableEntryRequest request) throws IOException {\n    return getMountTableStore().removeMountTableEntry(request);\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/federation/router/RouterAdminServer.java"
    }
  }
}