{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "ZKRMStateStore.java",
  "functionName": "removeReservationState",
  "functionId": "removeReservationState___planName-String__reservationIdName-String",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/recovery/ZKRMStateStore.java",
  "functionStartLine": 1179,
  "functionEndLine": 1194,
  "numCommitsSeen": 77,
  "timeTaken": 2563,
  "changeHistory": [
    "2064ca015d1584263aac0cc20c60b925a3aff612",
    "4249172e1419acdb2b69ae3db43dc59da2aa2e03",
    "f271d377357ad680924d19f07e6c8315e7c89bae"
  ],
  "changeHistoryShort": {
    "2064ca015d1584263aac0cc20c60b925a3aff612": "Ybodychange",
    "4249172e1419acdb2b69ae3db43dc59da2aa2e03": "Ybodychange",
    "f271d377357ad680924d19f07e6c8315e7c89bae": "Yintroduced"
  },
  "changeHistoryDetails": {
    "2064ca015d1584263aac0cc20c60b925a3aff612": {
      "type": "Ybodychange",
      "commitMessage": "YARN-9349.  Changed logging to use slf4j api.\n            Contributed by Prabhu Joseph\n",
      "commitDate": "15/03/19 4:20 PM",
      "commitName": "2064ca015d1584263aac0cc20c60b925a3aff612",
      "commitAuthor": "Eric Yang",
      "commitDateOld": "04/03/19 9:10 PM",
      "commitNameOld": "e40e2d6ad5cbe782c3a067229270738b501ed27e",
      "commitAuthorOld": "Prabhu Joseph",
      "daysBetweenCommits": 10.76,
      "commitsBetweenForRepo": 108,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,16 @@\n   protected synchronized void removeReservationState(String planName,\n       String reservationIdName) throws Exception {\n     String planNodePath \u003d getNodePath(reservationRoot, planName);\n     String reservationPath \u003d getNodePath(planNodePath, reservationIdName);\n \n-    if (LOG.isDebugEnabled()) {\n-      LOG.debug(\"Removing reservationallocation \" + reservationIdName\n-          + \" for\" + \" plan \" + planName);\n-    }\n+    LOG.debug(\"Removing reservationallocation {} for plan {}\",\n+        reservationIdName, planName);\n \n     zkManager.safeDelete(reservationPath, zkAcl, fencingNodePath);\n \n     List\u003cString\u003e reservationNodes \u003d getChildren(planNodePath);\n \n     if (reservationNodes.isEmpty()) {\n       zkManager.safeDelete(planNodePath, zkAcl, fencingNodePath);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected synchronized void removeReservationState(String planName,\n      String reservationIdName) throws Exception {\n    String planNodePath \u003d getNodePath(reservationRoot, planName);\n    String reservationPath \u003d getNodePath(planNodePath, reservationIdName);\n\n    LOG.debug(\"Removing reservationallocation {} for plan {}\",\n        reservationIdName, planName);\n\n    zkManager.safeDelete(reservationPath, zkAcl, fencingNodePath);\n\n    List\u003cString\u003e reservationNodes \u003d getChildren(planNodePath);\n\n    if (reservationNodes.isEmpty()) {\n      zkManager.safeDelete(planNodePath, zkAcl, fencingNodePath);\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/recovery/ZKRMStateStore.java",
      "extendedDetails": {}
    },
    "4249172e1419acdb2b69ae3db43dc59da2aa2e03": {
      "type": "Ybodychange",
      "commitMessage": "YARN-7053. Move curator transaction support to ZKCuratorManager. (Jonathan Hung via Subru).\n",
      "commitDate": "22/08/17 7:20 PM",
      "commitName": "4249172e1419acdb2b69ae3db43dc59da2aa2e03",
      "commitAuthor": "Subru Krishnan",
      "commitDateOld": "15/08/17 4:53 PM",
      "commitNameOld": "75dd866bfb8b63cb9f13179d4365b05c48e0907d",
      "commitAuthorOld": "Subru Krishnan",
      "daysBetweenCommits": 7.1,
      "commitsBetweenForRepo": 34,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,18 @@\n   protected synchronized void removeReservationState(String planName,\n       String reservationIdName) throws Exception {\n     String planNodePath \u003d getNodePath(reservationRoot, planName);\n     String reservationPath \u003d getNodePath(planNodePath, reservationIdName);\n \n     if (LOG.isDebugEnabled()) {\n       LOG.debug(\"Removing reservationallocation \" + reservationIdName\n           + \" for\" + \" plan \" + planName);\n     }\n \n-    safeDelete(reservationPath);\n+    zkManager.safeDelete(reservationPath, zkAcl, fencingNodePath);\n \n     List\u003cString\u003e reservationNodes \u003d getChildren(planNodePath);\n \n     if (reservationNodes.isEmpty()) {\n-      safeDelete(planNodePath);\n+      zkManager.safeDelete(planNodePath, zkAcl, fencingNodePath);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected synchronized void removeReservationState(String planName,\n      String reservationIdName) throws Exception {\n    String planNodePath \u003d getNodePath(reservationRoot, planName);\n    String reservationPath \u003d getNodePath(planNodePath, reservationIdName);\n\n    if (LOG.isDebugEnabled()) {\n      LOG.debug(\"Removing reservationallocation \" + reservationIdName\n          + \" for\" + \" plan \" + planName);\n    }\n\n    zkManager.safeDelete(reservationPath, zkAcl, fencingNodePath);\n\n    List\u003cString\u003e reservationNodes \u003d getChildren(planNodePath);\n\n    if (reservationNodes.isEmpty()) {\n      zkManager.safeDelete(planNodePath, zkAcl, fencingNodePath);\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/recovery/ZKRMStateStore.java",
      "extendedDetails": {}
    },
    "f271d377357ad680924d19f07e6c8315e7c89bae": {
      "type": "Yintroduced",
      "commitMessage": "YARN-3736. Add RMStateStore apis to store and load accepted reservations for failover (adhoot via asuresh)\n",
      "commitDate": "05/08/15 12:57 PM",
      "commitName": "f271d377357ad680924d19f07e6c8315e7c89bae",
      "commitAuthor": "Arun Suresh",
      "diff": "@@ -0,0 +1,18 @@\n+  protected synchronized void removeReservationState(String planName,\n+      String reservationIdName)\n+      throws Exception {\n+    String planNodePath \u003d\n+        getNodePath(reservationRoot, planName);\n+    String reservationPath \u003d getNodePath(planNodePath,\n+        reservationIdName);\n+    if (LOG.isDebugEnabled()) {\n+      LOG.debug(\"Removing reservationallocation \" + reservationIdName + \" for\" +\n+          \" plan \" + planName);\n+    }\n+    safeDelete(reservationPath);\n+\n+    List\u003cString\u003e reservationNodes \u003d getChildren(planNodePath);\n+    if (reservationNodes.isEmpty()) {\n+      safeDelete(planNodePath);\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  protected synchronized void removeReservationState(String planName,\n      String reservationIdName)\n      throws Exception {\n    String planNodePath \u003d\n        getNodePath(reservationRoot, planName);\n    String reservationPath \u003d getNodePath(planNodePath,\n        reservationIdName);\n    if (LOG.isDebugEnabled()) {\n      LOG.debug(\"Removing reservationallocation \" + reservationIdName + \" for\" +\n          \" plan \" + planName);\n    }\n    safeDelete(reservationPath);\n\n    List\u003cString\u003e reservationNodes \u003d getChildren(planNodePath);\n    if (reservationNodes.isEmpty()) {\n      safeDelete(planNodePath);\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/recovery/ZKRMStateStore.java"
    }
  }
}