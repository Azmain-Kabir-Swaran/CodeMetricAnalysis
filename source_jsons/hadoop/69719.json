{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "AbfsInputStream.java",
  "functionName": "read",
  "functionId": "read___b-byte[](modifiers-final)__off-int(modifiers-final)__len-int(modifiers-final)",
  "sourceFilePath": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsInputStream.java",
  "functionStartLine": 107,
  "functionEndLine": 125,
  "numCommitsSeen": 13,
  "timeTaken": 2106,
  "changeHistory": [
    "c734d247b1ea16b7028de3a37ff556cb1ef8b7d6",
    "28afdce00955a51bbea9bf46aa0f784764ec1329",
    "e2c7ac71b5ee47bb40294acd10c0c21dd6ee430f",
    "f044deedbbfee0812316d587139cb828f27172e9"
  ],
  "changeHistoryShort": {
    "c734d247b1ea16b7028de3a37ff556cb1ef8b7d6": "Ybodychange",
    "28afdce00955a51bbea9bf46aa0f784764ec1329": "Ybodychange",
    "e2c7ac71b5ee47bb40294acd10c0c21dd6ee430f": "Ybodychange",
    "f044deedbbfee0812316d587139cb828f27172e9": "Yintroduced"
  },
  "changeHistoryDetails": {
    "c734d247b1ea16b7028de3a37ff556cb1ef8b7d6": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-16910 : ABFS Streams to update FileSystem.Statistics counters on IO. (#1918). Contributed by Mehakmeet Singh.\n\n",
      "commitDate": "31/03/20 5:49 AM",
      "commitName": "c734d247b1ea16b7028de3a37ff556cb1ef8b7d6",
      "commitAuthor": "Mehakmeet Singh",
      "commitDateOld": "24/03/20 5:11 AM",
      "commitNameOld": "28afdce00955a51bbea9bf46aa0f784764ec1329",
      "commitAuthorOld": "Steve Loughran",
      "daysBetweenCommits": 7.03,
      "commitsBetweenForRepo": 28,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,19 @@\n   public synchronized int read(final byte[] b, final int off, final int len) throws IOException {\n     int currentOff \u003d off;\n     int currentLen \u003d len;\n     int lastReadBytes;\n     int totalReadBytes \u003d 0;\n+    incrementReadOps();\n     do {\n       lastReadBytes \u003d readOneBlock(b, currentOff, currentLen);\n       if (lastReadBytes \u003e 0) {\n         currentOff +\u003d lastReadBytes;\n         currentLen -\u003d lastReadBytes;\n         totalReadBytes +\u003d lastReadBytes;\n       }\n       if (currentLen \u003c\u003d 0 || currentLen \u003e b.length - currentOff) {\n         break;\n       }\n     } while (lastReadBytes \u003e 0);\n     return totalReadBytes \u003e 0 ? totalReadBytes : lastReadBytes;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public synchronized int read(final byte[] b, final int off, final int len) throws IOException {\n    int currentOff \u003d off;\n    int currentLen \u003d len;\n    int lastReadBytes;\n    int totalReadBytes \u003d 0;\n    incrementReadOps();\n    do {\n      lastReadBytes \u003d readOneBlock(b, currentOff, currentLen);\n      if (lastReadBytes \u003e 0) {\n        currentOff +\u003d lastReadBytes;\n        currentLen -\u003d lastReadBytes;\n        totalReadBytes +\u003d lastReadBytes;\n      }\n      if (currentLen \u003c\u003d 0 || currentLen \u003e b.length - currentOff) {\n        break;\n      }\n    } while (lastReadBytes \u003e 0);\n    return totalReadBytes \u003e 0 ? totalReadBytes : lastReadBytes;\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsInputStream.java",
      "extendedDetails": {}
    },
    "28afdce00955a51bbea9bf46aa0f784764ec1329": {
      "type": "Ybodychange",
      "commitMessage": "Revert \"\"HADOOP-16910. ABFS Streams to update FileSystem.Statistics counters on IO.\"\n\nThis reverts commit e2c7ac71b5ee47bb40294acd10c0c21dd6ee430f.\n\nChange-Id: I5b5a93f5a36cdb0c3d56d1b3f747c318f089de20\n",
      "commitDate": "24/03/20 5:11 AM",
      "commitName": "28afdce00955a51bbea9bf46aa0f784764ec1329",
      "commitAuthor": "Steve Loughran",
      "commitDateOld": "23/03/20 6:50 AM",
      "commitNameOld": "e2c7ac71b5ee47bb40294acd10c0c21dd6ee430f",
      "commitAuthorOld": "Mehakmeet Singh",
      "daysBetweenCommits": 0.93,
      "commitsBetweenForRepo": 5,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,18 @@\n   public synchronized int read(final byte[] b, final int off, final int len) throws IOException {\n     int currentOff \u003d off;\n     int currentLen \u003d len;\n     int lastReadBytes;\n     int totalReadBytes \u003d 0;\n-    incrementReadOps();\n     do {\n       lastReadBytes \u003d readOneBlock(b, currentOff, currentLen);\n       if (lastReadBytes \u003e 0) {\n         currentOff +\u003d lastReadBytes;\n         currentLen -\u003d lastReadBytes;\n         totalReadBytes +\u003d lastReadBytes;\n       }\n       if (currentLen \u003c\u003d 0 || currentLen \u003e b.length - currentOff) {\n         break;\n       }\n     } while (lastReadBytes \u003e 0);\n     return totalReadBytes \u003e 0 ? totalReadBytes : lastReadBytes;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public synchronized int read(final byte[] b, final int off, final int len) throws IOException {\n    int currentOff \u003d off;\n    int currentLen \u003d len;\n    int lastReadBytes;\n    int totalReadBytes \u003d 0;\n    do {\n      lastReadBytes \u003d readOneBlock(b, currentOff, currentLen);\n      if (lastReadBytes \u003e 0) {\n        currentOff +\u003d lastReadBytes;\n        currentLen -\u003d lastReadBytes;\n        totalReadBytes +\u003d lastReadBytes;\n      }\n      if (currentLen \u003c\u003d 0 || currentLen \u003e b.length - currentOff) {\n        break;\n      }\n    } while (lastReadBytes \u003e 0);\n    return totalReadBytes \u003e 0 ? totalReadBytes : lastReadBytes;\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsInputStream.java",
      "extendedDetails": {}
    },
    "e2c7ac71b5ee47bb40294acd10c0c21dd6ee430f": {
      "type": "Ybodychange",
      "commitMessage": "ABFS Streams to update FileSystem.Statistics counters on IO.\n\n\r\nContributed by Mehakmeet Singh",
      "commitDate": "23/03/20 6:50 AM",
      "commitName": "e2c7ac71b5ee47bb40294acd10c0c21dd6ee430f",
      "commitAuthor": "Mehakmeet Singh",
      "commitDateOld": "24/02/20 8:28 AM",
      "commitNameOld": "42dfd270a11419adcb189e8f3a6ddb8f19358088",
      "commitAuthorOld": "Sahil Takiar",
      "daysBetweenCommits": 27.89,
      "commitsBetweenForRepo": 95,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,19 @@\n   public synchronized int read(final byte[] b, final int off, final int len) throws IOException {\n     int currentOff \u003d off;\n     int currentLen \u003d len;\n     int lastReadBytes;\n     int totalReadBytes \u003d 0;\n+    incrementReadOps();\n     do {\n       lastReadBytes \u003d readOneBlock(b, currentOff, currentLen);\n       if (lastReadBytes \u003e 0) {\n         currentOff +\u003d lastReadBytes;\n         currentLen -\u003d lastReadBytes;\n         totalReadBytes +\u003d lastReadBytes;\n       }\n       if (currentLen \u003c\u003d 0 || currentLen \u003e b.length - currentOff) {\n         break;\n       }\n     } while (lastReadBytes \u003e 0);\n     return totalReadBytes \u003e 0 ? totalReadBytes : lastReadBytes;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public synchronized int read(final byte[] b, final int off, final int len) throws IOException {\n    int currentOff \u003d off;\n    int currentLen \u003d len;\n    int lastReadBytes;\n    int totalReadBytes \u003d 0;\n    incrementReadOps();\n    do {\n      lastReadBytes \u003d readOneBlock(b, currentOff, currentLen);\n      if (lastReadBytes \u003e 0) {\n        currentOff +\u003d lastReadBytes;\n        currentLen -\u003d lastReadBytes;\n        totalReadBytes +\u003d lastReadBytes;\n      }\n      if (currentLen \u003c\u003d 0 || currentLen \u003e b.length - currentOff) {\n        break;\n      }\n    } while (lastReadBytes \u003e 0);\n    return totalReadBytes \u003e 0 ? totalReadBytes : lastReadBytes;\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsInputStream.java",
      "extendedDetails": {}
    },
    "f044deedbbfee0812316d587139cb828f27172e9": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-15407. HADOOP-15540. Support Windows Azure Storage - Blob file system \"ABFS\" in Hadoop: Core Commit.\n\nContributed by Shane Mainali, Thomas Marquardt, Zichen Sun, Georgi Chalakov, Esfandiar Manii, Amit Singh, Dana Kaban, Da Zhou, Junhua Gu, Saher Ahwal, Saurabh Pant, James Baker, Shaoyu Zhang, Lawrence Chen, Kevin Chen and Steve Loughran\n",
      "commitDate": "17/09/18 12:54 PM",
      "commitName": "f044deedbbfee0812316d587139cb828f27172e9",
      "commitAuthor": "Steve Loughran",
      "diff": "@@ -0,0 +1,18 @@\n+  public synchronized int read(final byte[] b, final int off, final int len) throws IOException {\n+    int currentOff \u003d off;\n+    int currentLen \u003d len;\n+    int lastReadBytes;\n+    int totalReadBytes \u003d 0;\n+    do {\n+      lastReadBytes \u003d readOneBlock(b, currentOff, currentLen);\n+      if (lastReadBytes \u003e 0) {\n+        currentOff +\u003d lastReadBytes;\n+        currentLen -\u003d lastReadBytes;\n+        totalReadBytes +\u003d lastReadBytes;\n+      }\n+      if (currentLen \u003c\u003d 0 || currentLen \u003e b.length - currentOff) {\n+        break;\n+      }\n+    } while (lastReadBytes \u003e 0);\n+    return totalReadBytes \u003e 0 ? totalReadBytes : lastReadBytes;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public synchronized int read(final byte[] b, final int off, final int len) throws IOException {\n    int currentOff \u003d off;\n    int currentLen \u003d len;\n    int lastReadBytes;\n    int totalReadBytes \u003d 0;\n    do {\n      lastReadBytes \u003d readOneBlock(b, currentOff, currentLen);\n      if (lastReadBytes \u003e 0) {\n        currentOff +\u003d lastReadBytes;\n        currentLen -\u003d lastReadBytes;\n        totalReadBytes +\u003d lastReadBytes;\n      }\n      if (currentLen \u003c\u003d 0 || currentLen \u003e b.length - currentOff) {\n        break;\n      }\n    } while (lastReadBytes \u003e 0);\n    return totalReadBytes \u003e 0 ? totalReadBytes : lastReadBytes;\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsInputStream.java"
    }
  }
}