{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "AzureBlobFileSystemStore.java",
  "functionName": "getURIBuilder",
  "functionId": "getURIBuilder___hostName-String(modifiers-final)__isSecure-boolean",
  "sourceFilePath": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/AzureBlobFileSystemStore.java",
  "functionStartLine": 268,
  "functionEndLine": 296,
  "numCommitsSeen": 48,
  "timeTaken": 2326,
  "changeHistory": [
    "e5593cbd8323399359b3e8da46bd58e8364cbf22",
    "81dc4a995c3837b721a0c1f897698b5ed47b8fb0",
    "a271fd0eca75cef8b8ba940cdac8ad4fd21b4462"
  ],
  "changeHistoryShort": {
    "e5593cbd8323399359b3e8da46bd58e8364cbf22": "Ybodychange",
    "81dc4a995c3837b721a0c1f897698b5ed47b8fb0": "Ybodychange",
    "a271fd0eca75cef8b8ba940cdac8ad4fd21b4462": "Yintroduced"
  },
  "changeHistoryDetails": {
    "e5593cbd8323399359b3e8da46bd58e8364cbf22": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-15694. ABFS: Allow OAuth credentials to not be tied to accounts.\nContributed by Sean Mackrory.\n",
      "commitDate": "17/09/18 12:54 PM",
      "commitName": "e5593cbd8323399359b3e8da46bd58e8364cbf22",
      "commitAuthor": "Thomas Marquardt",
      "commitDateOld": "17/09/18 12:54 PM",
      "commitNameOld": "81dc4a995c3837b721a0c1f897698b5ed47b8fb0",
      "commitAuthorOld": "Thomas Marquardt",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 7,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,29 +1,29 @@\n   URIBuilder getURIBuilder(final String hostName, boolean isSecure) {\n     String scheme \u003d isSecure ? FileSystemUriSchemes.HTTPS_SCHEME : FileSystemUriSchemes.HTTP_SCHEME;\n \n     final URIBuilder uriBuilder \u003d new URIBuilder();\n     uriBuilder.setScheme(scheme);\n \n     // For testing purposes, an IP address and port may be provided to override\n     // the host specified in the FileSystem URI.  Also note that the format of\n     // the Azure Storage Service URI changes from\n     // http[s]://[account][domain-suffix]/[filesystem] to\n     // http[s]://[ip]:[port]/[account]/[filesystem].\n-    String endPoint \u003d abfsConfiguration.getConfiguration().get(AZURE_ABFS_ENDPOINT);\n+    String endPoint \u003d abfsConfiguration.get(AZURE_ABFS_ENDPOINT);\n     if (endPoint \u003d\u003d null || !endPoint.contains(AbfsHttpConstants.COLON)) {\n       uriBuilder.setHost(hostName);\n       return uriBuilder;\n     }\n \n     // Split ip and port\n     String[] data \u003d endPoint.split(AbfsHttpConstants.COLON);\n     if (data.length !\u003d 2) {\n       throw new RuntimeException(String.format(\"ABFS endpoint is not set correctly : %s, \"\n               + \"Do not specify scheme when using {IP}:{PORT}\", endPoint));\n     }\n     uriBuilder.setHost(data[0].trim());\n     uriBuilder.setPort(Integer.parseInt(data[1].trim()));\n     uriBuilder.setPath(\"/\" + UriUtils.extractAccountNameFromHostName(hostName));\n \n     return uriBuilder;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  URIBuilder getURIBuilder(final String hostName, boolean isSecure) {\n    String scheme \u003d isSecure ? FileSystemUriSchemes.HTTPS_SCHEME : FileSystemUriSchemes.HTTP_SCHEME;\n\n    final URIBuilder uriBuilder \u003d new URIBuilder();\n    uriBuilder.setScheme(scheme);\n\n    // For testing purposes, an IP address and port may be provided to override\n    // the host specified in the FileSystem URI.  Also note that the format of\n    // the Azure Storage Service URI changes from\n    // http[s]://[account][domain-suffix]/[filesystem] to\n    // http[s]://[ip]:[port]/[account]/[filesystem].\n    String endPoint \u003d abfsConfiguration.get(AZURE_ABFS_ENDPOINT);\n    if (endPoint \u003d\u003d null || !endPoint.contains(AbfsHttpConstants.COLON)) {\n      uriBuilder.setHost(hostName);\n      return uriBuilder;\n    }\n\n    // Split ip and port\n    String[] data \u003d endPoint.split(AbfsHttpConstants.COLON);\n    if (data.length !\u003d 2) {\n      throw new RuntimeException(String.format(\"ABFS endpoint is not set correctly : %s, \"\n              + \"Do not specify scheme when using {IP}:{PORT}\", endPoint));\n    }\n    uriBuilder.setHost(data[0].trim());\n    uriBuilder.setPort(Integer.parseInt(data[1].trim()));\n    uriBuilder.setPath(\"/\" + UriUtils.extractAccountNameFromHostName(hostName));\n\n    return uriBuilder;\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/AzureBlobFileSystemStore.java",
      "extendedDetails": {}
    },
    "81dc4a995c3837b721a0c1f897698b5ed47b8fb0": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-15663. ABFS: Simplify configuration.\nContributed by Da Zhou.\n",
      "commitDate": "17/09/18 12:54 PM",
      "commitName": "81dc4a995c3837b721a0c1f897698b5ed47b8fb0",
      "commitAuthor": "Thomas Marquardt",
      "commitDateOld": "17/09/18 12:54 PM",
      "commitNameOld": "6b6f8cc2bedefc98028d875398ce022edaf77933",
      "commitAuthorOld": "Thomas Marquardt",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 3,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,9 +1,29 @@\n   URIBuilder getURIBuilder(final String hostName, boolean isSecure) {\n     String scheme \u003d isSecure ? FileSystemUriSchemes.HTTPS_SCHEME : FileSystemUriSchemes.HTTP_SCHEME;\n \n     final URIBuilder uriBuilder \u003d new URIBuilder();\n     uriBuilder.setScheme(scheme);\n-    uriBuilder.setHost(hostName);\n+\n+    // For testing purposes, an IP address and port may be provided to override\n+    // the host specified in the FileSystem URI.  Also note that the format of\n+    // the Azure Storage Service URI changes from\n+    // http[s]://[account][domain-suffix]/[filesystem] to\n+    // http[s]://[ip]:[port]/[account]/[filesystem].\n+    String endPoint \u003d abfsConfiguration.getConfiguration().get(AZURE_ABFS_ENDPOINT);\n+    if (endPoint \u003d\u003d null || !endPoint.contains(AbfsHttpConstants.COLON)) {\n+      uriBuilder.setHost(hostName);\n+      return uriBuilder;\n+    }\n+\n+    // Split ip and port\n+    String[] data \u003d endPoint.split(AbfsHttpConstants.COLON);\n+    if (data.length !\u003d 2) {\n+      throw new RuntimeException(String.format(\"ABFS endpoint is not set correctly : %s, \"\n+              + \"Do not specify scheme when using {IP}:{PORT}\", endPoint));\n+    }\n+    uriBuilder.setHost(data[0].trim());\n+    uriBuilder.setPort(Integer.parseInt(data[1].trim()));\n+    uriBuilder.setPath(\"/\" + UriUtils.extractAccountNameFromHostName(hostName));\n \n     return uriBuilder;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  URIBuilder getURIBuilder(final String hostName, boolean isSecure) {\n    String scheme \u003d isSecure ? FileSystemUriSchemes.HTTPS_SCHEME : FileSystemUriSchemes.HTTP_SCHEME;\n\n    final URIBuilder uriBuilder \u003d new URIBuilder();\n    uriBuilder.setScheme(scheme);\n\n    // For testing purposes, an IP address and port may be provided to override\n    // the host specified in the FileSystem URI.  Also note that the format of\n    // the Azure Storage Service URI changes from\n    // http[s]://[account][domain-suffix]/[filesystem] to\n    // http[s]://[ip]:[port]/[account]/[filesystem].\n    String endPoint \u003d abfsConfiguration.getConfiguration().get(AZURE_ABFS_ENDPOINT);\n    if (endPoint \u003d\u003d null || !endPoint.contains(AbfsHttpConstants.COLON)) {\n      uriBuilder.setHost(hostName);\n      return uriBuilder;\n    }\n\n    // Split ip and port\n    String[] data \u003d endPoint.split(AbfsHttpConstants.COLON);\n    if (data.length !\u003d 2) {\n      throw new RuntimeException(String.format(\"ABFS endpoint is not set correctly : %s, \"\n              + \"Do not specify scheme when using {IP}:{PORT}\", endPoint));\n    }\n    uriBuilder.setHost(data[0].trim());\n    uriBuilder.setPort(Integer.parseInt(data[1].trim()));\n    uriBuilder.setPath(\"/\" + UriUtils.extractAccountNameFromHostName(hostName));\n\n    return uriBuilder;\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/AzureBlobFileSystemStore.java",
      "extendedDetails": {}
    },
    "a271fd0eca75cef8b8ba940cdac8ad4fd21b4462": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-15560. ABFS: removed dependency injection and unnecessary dependencies.\nContributed by Da Zhou.\n",
      "commitDate": "17/09/18 12:54 PM",
      "commitName": "a271fd0eca75cef8b8ba940cdac8ad4fd21b4462",
      "commitAuthor": "Steve Loughran",
      "diff": "@@ -0,0 +1,9 @@\n+  URIBuilder getURIBuilder(final String hostName, boolean isSecure) {\n+    String scheme \u003d isSecure ? FileSystemUriSchemes.HTTPS_SCHEME : FileSystemUriSchemes.HTTP_SCHEME;\n+\n+    final URIBuilder uriBuilder \u003d new URIBuilder();\n+    uriBuilder.setScheme(scheme);\n+    uriBuilder.setHost(hostName);\n+\n+    return uriBuilder;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  URIBuilder getURIBuilder(final String hostName, boolean isSecure) {\n    String scheme \u003d isSecure ? FileSystemUriSchemes.HTTPS_SCHEME : FileSystemUriSchemes.HTTP_SCHEME;\n\n    final URIBuilder uriBuilder \u003d new URIBuilder();\n    uriBuilder.setScheme(scheme);\n    uriBuilder.setHost(hostName);\n\n    return uriBuilder;\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/AzureBlobFileSystemStore.java"
    }
  }
}