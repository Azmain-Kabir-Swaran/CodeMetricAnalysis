{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "DataNodeUGIProvider.java",
  "functionName": "tokenUGI",
  "functionId": "tokenUGI___token-Token__DelegationTokenIdentifier__",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java",
  "functionStartLine": 118,
  "functionEndLine": 128,
  "numCommitsSeen": 12,
  "timeTaken": 4268,
  "changeHistory": [
    "fe5624b85d71720ae9da90a01cad9a3d1ea41160",
    "88beb46cf6e6fd3e51f73a411a2750de7595e326",
    "84cbd72afda6344e220526fac5c560f00f84e374",
    "bf8e4332cb4c33d0287ae6ecca61b335402ac1c4"
  ],
  "changeHistoryShort": {
    "fe5624b85d71720ae9da90a01cad9a3d1ea41160": "Ymultichange(Yparameterchange,Ybodychange)",
    "88beb46cf6e6fd3e51f73a411a2750de7595e326": "Ymultichange(Yparameterchange,Ybodychange)",
    "84cbd72afda6344e220526fac5c560f00f84e374": "Ymultichange(Yparameterchange,Ybodychange)",
    "bf8e4332cb4c33d0287ae6ecca61b335402ac1c4": "Yintroduced"
  },
  "changeHistoryDetails": {
    "fe5624b85d71720ae9da90a01cad9a3d1ea41160": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "HDFS-8855. Webhdfs client leaks active NameNode connections. Contributed by Xiaobing Zhou.\n",
      "commitDate": "24/11/15 12:47 PM",
      "commitName": "fe5624b85d71720ae9da90a01cad9a3d1ea41160",
      "commitAuthor": "Xiaoyu Yao",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-8855. Webhdfs client leaks active NameNode connections. Contributed by Xiaobing Zhou.\n",
          "commitDate": "24/11/15 12:47 PM",
          "commitName": "fe5624b85d71720ae9da90a01cad9a3d1ea41160",
          "commitAuthor": "Xiaoyu Yao",
          "commitDateOld": "04/11/15 10:21 AM",
          "commitNameOld": "88beb46cf6e6fd3e51f73a411a2750de7595e326",
          "commitAuthorOld": "Haohui Mai",
          "daysBetweenCommits": 20.1,
          "commitsBetweenForRepo": 139,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,11 +1,11 @@\n-  private UserGroupInformation tokenUGI() throws IOException {\n-    Token\u003cDelegationTokenIdentifier\u003e token \u003d params.delegationToken();\n+  private UserGroupInformation tokenUGI(Token\u003cDelegationTokenIdentifier\u003e token)\n+      throws IOException {\n     ByteArrayInputStream buf \u003d\n       new ByteArrayInputStream(token.getIdentifier());\n     DataInputStream in \u003d new DataInputStream(buf);\n     DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier();\n     id.readFields(in);\n     UserGroupInformation ugi \u003d id.getUser();\n     ugi.addToken(token);\n     return ugi;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private UserGroupInformation tokenUGI(Token\u003cDelegationTokenIdentifier\u003e token)\n      throws IOException {\n    ByteArrayInputStream buf \u003d\n      new ByteArrayInputStream(token.getIdentifier());\n    DataInputStream in \u003d new DataInputStream(buf);\n    DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier();\n    id.readFields(in);\n    UserGroupInformation ugi \u003d id.getUser();\n    ugi.addToken(token);\n    return ugi;\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java",
          "extendedDetails": {
            "oldValue": "[]",
            "newValue": "[token-Token\u003cDelegationTokenIdentifier\u003e]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-8855. Webhdfs client leaks active NameNode connections. Contributed by Xiaobing Zhou.\n",
          "commitDate": "24/11/15 12:47 PM",
          "commitName": "fe5624b85d71720ae9da90a01cad9a3d1ea41160",
          "commitAuthor": "Xiaoyu Yao",
          "commitDateOld": "04/11/15 10:21 AM",
          "commitNameOld": "88beb46cf6e6fd3e51f73a411a2750de7595e326",
          "commitAuthorOld": "Haohui Mai",
          "daysBetweenCommits": 20.1,
          "commitsBetweenForRepo": 139,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,11 +1,11 @@\n-  private UserGroupInformation tokenUGI() throws IOException {\n-    Token\u003cDelegationTokenIdentifier\u003e token \u003d params.delegationToken();\n+  private UserGroupInformation tokenUGI(Token\u003cDelegationTokenIdentifier\u003e token)\n+      throws IOException {\n     ByteArrayInputStream buf \u003d\n       new ByteArrayInputStream(token.getIdentifier());\n     DataInputStream in \u003d new DataInputStream(buf);\n     DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier();\n     id.readFields(in);\n     UserGroupInformation ugi \u003d id.getUser();\n     ugi.addToken(token);\n     return ugi;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private UserGroupInformation tokenUGI(Token\u003cDelegationTokenIdentifier\u003e token)\n      throws IOException {\n    ByteArrayInputStream buf \u003d\n      new ByteArrayInputStream(token.getIdentifier());\n    DataInputStream in \u003d new DataInputStream(buf);\n    DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier();\n    id.readFields(in);\n    UserGroupInformation ugi \u003d id.getUser();\n    ugi.addToken(token);\n    return ugi;\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java",
          "extendedDetails": {}
        }
      ]
    },
    "88beb46cf6e6fd3e51f73a411a2750de7595e326": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "Revert \"HDFS-8855. Webhdfs client leaks active NameNode connections. Contributed by Xiaobing Zhou.\"\n\nThis reverts commit 84cbd72afda6344e220526fac5c560f00f84e374.\n",
      "commitDate": "04/11/15 10:21 AM",
      "commitName": "88beb46cf6e6fd3e51f73a411a2750de7595e326",
      "commitAuthor": "Haohui Mai",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "Revert \"HDFS-8855. Webhdfs client leaks active NameNode connections. Contributed by Xiaobing Zhou.\"\n\nThis reverts commit 84cbd72afda6344e220526fac5c560f00f84e374.\n",
          "commitDate": "04/11/15 10:21 AM",
          "commitName": "88beb46cf6e6fd3e51f73a411a2750de7595e326",
          "commitAuthor": "Haohui Mai",
          "commitDateOld": "13/10/15 9:12 AM",
          "commitNameOld": "84cbd72afda6344e220526fac5c560f00f84e374",
          "commitAuthorOld": "Jitendra Pandey",
          "daysBetweenCommits": 22.09,
          "commitsBetweenForRepo": 217,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,11 +1,11 @@\n-  private UserGroupInformation tokenUGI(Token\u003cDelegationTokenIdentifier\u003e token)\n-      throws IOException {\n+  private UserGroupInformation tokenUGI() throws IOException {\n+    Token\u003cDelegationTokenIdentifier\u003e token \u003d params.delegationToken();\n     ByteArrayInputStream buf \u003d\n       new ByteArrayInputStream(token.getIdentifier());\n     DataInputStream in \u003d new DataInputStream(buf);\n     DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier();\n     id.readFields(in);\n     UserGroupInformation ugi \u003d id.getUser();\n     ugi.addToken(token);\n     return ugi;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private UserGroupInformation tokenUGI() throws IOException {\n    Token\u003cDelegationTokenIdentifier\u003e token \u003d params.delegationToken();\n    ByteArrayInputStream buf \u003d\n      new ByteArrayInputStream(token.getIdentifier());\n    DataInputStream in \u003d new DataInputStream(buf);\n    DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier();\n    id.readFields(in);\n    UserGroupInformation ugi \u003d id.getUser();\n    ugi.addToken(token);\n    return ugi;\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java",
          "extendedDetails": {
            "oldValue": "[token-Token\u003cDelegationTokenIdentifier\u003e]",
            "newValue": "[]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "Revert \"HDFS-8855. Webhdfs client leaks active NameNode connections. Contributed by Xiaobing Zhou.\"\n\nThis reverts commit 84cbd72afda6344e220526fac5c560f00f84e374.\n",
          "commitDate": "04/11/15 10:21 AM",
          "commitName": "88beb46cf6e6fd3e51f73a411a2750de7595e326",
          "commitAuthor": "Haohui Mai",
          "commitDateOld": "13/10/15 9:12 AM",
          "commitNameOld": "84cbd72afda6344e220526fac5c560f00f84e374",
          "commitAuthorOld": "Jitendra Pandey",
          "daysBetweenCommits": 22.09,
          "commitsBetweenForRepo": 217,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,11 +1,11 @@\n-  private UserGroupInformation tokenUGI(Token\u003cDelegationTokenIdentifier\u003e token)\n-      throws IOException {\n+  private UserGroupInformation tokenUGI() throws IOException {\n+    Token\u003cDelegationTokenIdentifier\u003e token \u003d params.delegationToken();\n     ByteArrayInputStream buf \u003d\n       new ByteArrayInputStream(token.getIdentifier());\n     DataInputStream in \u003d new DataInputStream(buf);\n     DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier();\n     id.readFields(in);\n     UserGroupInformation ugi \u003d id.getUser();\n     ugi.addToken(token);\n     return ugi;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private UserGroupInformation tokenUGI() throws IOException {\n    Token\u003cDelegationTokenIdentifier\u003e token \u003d params.delegationToken();\n    ByteArrayInputStream buf \u003d\n      new ByteArrayInputStream(token.getIdentifier());\n    DataInputStream in \u003d new DataInputStream(buf);\n    DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier();\n    id.readFields(in);\n    UserGroupInformation ugi \u003d id.getUser();\n    ugi.addToken(token);\n    return ugi;\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java",
          "extendedDetails": {}
        }
      ]
    },
    "84cbd72afda6344e220526fac5c560f00f84e374": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "HDFS-8855. Webhdfs client leaks active NameNode connections. Contributed by Xiaobing Zhou.\n",
      "commitDate": "13/10/15 9:12 AM",
      "commitName": "84cbd72afda6344e220526fac5c560f00f84e374",
      "commitAuthor": "Jitendra Pandey",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-8855. Webhdfs client leaks active NameNode connections. Contributed by Xiaobing Zhou.\n",
          "commitDate": "13/10/15 9:12 AM",
          "commitName": "84cbd72afda6344e220526fac5c560f00f84e374",
          "commitAuthor": "Jitendra Pandey",
          "commitDateOld": "17/11/14 11:42 AM",
          "commitNameOld": "bf8e4332cb4c33d0287ae6ecca61b335402ac1c4",
          "commitAuthorOld": "Haohui Mai",
          "daysBetweenCommits": 329.85,
          "commitsBetweenForRepo": 2672,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,11 +1,11 @@\n-  private UserGroupInformation tokenUGI() throws IOException {\n-    Token\u003cDelegationTokenIdentifier\u003e token \u003d params.delegationToken();\n+  private UserGroupInformation tokenUGI(Token\u003cDelegationTokenIdentifier\u003e token)\n+      throws IOException {\n     ByteArrayInputStream buf \u003d\n       new ByteArrayInputStream(token.getIdentifier());\n     DataInputStream in \u003d new DataInputStream(buf);\n     DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier();\n     id.readFields(in);\n     UserGroupInformation ugi \u003d id.getUser();\n     ugi.addToken(token);\n     return ugi;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private UserGroupInformation tokenUGI(Token\u003cDelegationTokenIdentifier\u003e token)\n      throws IOException {\n    ByteArrayInputStream buf \u003d\n      new ByteArrayInputStream(token.getIdentifier());\n    DataInputStream in \u003d new DataInputStream(buf);\n    DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier();\n    id.readFields(in);\n    UserGroupInformation ugi \u003d id.getUser();\n    ugi.addToken(token);\n    return ugi;\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java",
          "extendedDetails": {
            "oldValue": "[]",
            "newValue": "[token-Token\u003cDelegationTokenIdentifier\u003e]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-8855. Webhdfs client leaks active NameNode connections. Contributed by Xiaobing Zhou.\n",
          "commitDate": "13/10/15 9:12 AM",
          "commitName": "84cbd72afda6344e220526fac5c560f00f84e374",
          "commitAuthor": "Jitendra Pandey",
          "commitDateOld": "17/11/14 11:42 AM",
          "commitNameOld": "bf8e4332cb4c33d0287ae6ecca61b335402ac1c4",
          "commitAuthorOld": "Haohui Mai",
          "daysBetweenCommits": 329.85,
          "commitsBetweenForRepo": 2672,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,11 +1,11 @@\n-  private UserGroupInformation tokenUGI() throws IOException {\n-    Token\u003cDelegationTokenIdentifier\u003e token \u003d params.delegationToken();\n+  private UserGroupInformation tokenUGI(Token\u003cDelegationTokenIdentifier\u003e token)\n+      throws IOException {\n     ByteArrayInputStream buf \u003d\n       new ByteArrayInputStream(token.getIdentifier());\n     DataInputStream in \u003d new DataInputStream(buf);\n     DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier();\n     id.readFields(in);\n     UserGroupInformation ugi \u003d id.getUser();\n     ugi.addToken(token);\n     return ugi;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private UserGroupInformation tokenUGI(Token\u003cDelegationTokenIdentifier\u003e token)\n      throws IOException {\n    ByteArrayInputStream buf \u003d\n      new ByteArrayInputStream(token.getIdentifier());\n    DataInputStream in \u003d new DataInputStream(buf);\n    DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier();\n    id.readFields(in);\n    UserGroupInformation ugi \u003d id.getUser();\n    ugi.addToken(token);\n    return ugi;\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java",
          "extendedDetails": {}
        }
      ]
    },
    "bf8e4332cb4c33d0287ae6ecca61b335402ac1c4": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-7279. Use netty to implement DatanodeWebHdfsMethods. Contributed by Haohui Mai.\n",
      "commitDate": "17/11/14 11:42 AM",
      "commitName": "bf8e4332cb4c33d0287ae6ecca61b335402ac1c4",
      "commitAuthor": "Haohui Mai",
      "diff": "@@ -0,0 +1,11 @@\n+  private UserGroupInformation tokenUGI() throws IOException {\n+    Token\u003cDelegationTokenIdentifier\u003e token \u003d params.delegationToken();\n+    ByteArrayInputStream buf \u003d\n+      new ByteArrayInputStream(token.getIdentifier());\n+    DataInputStream in \u003d new DataInputStream(buf);\n+    DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier();\n+    id.readFields(in);\n+    UserGroupInformation ugi \u003d id.getUser();\n+    ugi.addToken(token);\n+    return ugi;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private UserGroupInformation tokenUGI() throws IOException {\n    Token\u003cDelegationTokenIdentifier\u003e token \u003d params.delegationToken();\n    ByteArrayInputStream buf \u003d\n      new ByteArrayInputStream(token.getIdentifier());\n    DataInputStream in \u003d new DataInputStream(buf);\n    DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier();\n    id.readFields(in);\n    UserGroupInformation ugi \u003d id.getUser();\n    ugi.addToken(token);\n    return ugi;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/web/webhdfs/DataNodeUGIProvider.java"
    }
  }
}