{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "LocalityAppPlacementAllocator.java",
  "functionName": "decrementOutstanding",
  "functionId": "decrementOutstanding___schedulerRequestKey-SchedulerRequestKey__offSwitchRequest-ResourceRequest",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/placement/LocalityAppPlacementAllocator.java",
  "functionStartLine": 264,
  "functionEndLine": 283,
  "numCommitsSeen": 124,
  "timeTaken": 8078,
  "changeHistory": [
    "ac4d2b1081d8836a21bc70e77f4e6cd2071a9949",
    "87e2ef8c985bb72a916477e8783359f2859f7890",
    "0a55bd841ec0f2eb89a0383f4c589526e8b138d4",
    "9ca54f4810de182195263bd594afb56dab564105",
    "1831be8e737fd423a9f3d590767b944147e85641",
    "7558dbbb481eab055e794beb3603bbe5671a4b4c",
    "0fefda645bca935b87b6bb8ca63e6f18340d59f5",
    "586348e4cbf197188057d6b843a6701cfffdaff3",
    "e1fdf62123625e4ba399af02f8aad500637d29d1",
    "ef1a619a4df3a612eb293a6e8e1e952eaef18eba",
    "5262b7ba4d018562d4e7d60772af4ddc3d770a23"
  ],
  "changeHistoryShort": {
    "ac4d2b1081d8836a21bc70e77f4e6cd2071a9949": "Ymultichange(Yfilerename,Ybodychange)",
    "87e2ef8c985bb72a916477e8783359f2859f7890": "Ybodychange",
    "0a55bd841ec0f2eb89a0383f4c589526e8b138d4": "Ymultichange(Yparameterchange,Ybodychange)",
    "9ca54f4810de182195263bd594afb56dab564105": "Ymultichange(Ymovefromfile,Ybodychange,Yparameterchange)",
    "1831be8e737fd423a9f3d590767b944147e85641": "Ymodifierchange",
    "7558dbbb481eab055e794beb3603bbe5671a4b4c": "Ymultichange(Yparameterchange,Ybodychange)",
    "0fefda645bca935b87b6bb8ca63e6f18340d59f5": "Ybodychange",
    "586348e4cbf197188057d6b843a6701cfffdaff3": "Ybodychange",
    "e1fdf62123625e4ba399af02f8aad500637d29d1": "Yfilerename",
    "ef1a619a4df3a612eb293a6e8e1e952eaef18eba": "Ybodychange",
    "5262b7ba4d018562d4e7d60772af4ddc3d770a23": "Yintroduced"
  },
  "changeHistoryDetails": {
    "ac4d2b1081d8836a21bc70e77f4e6cd2071a9949": {
      "type": "Ymultichange(Yfilerename,Ybodychange)",
      "commitMessage": "YARN-7437. Rename PlacementSet and SchedulingPlacementSet. (Wangda Tan via kkaranasos)\n",
      "commitDate": "09/11/17 1:01 PM",
      "commitName": "ac4d2b1081d8836a21bc70e77f4e6cd2071a9949",
      "commitAuthor": "Konstantinos Karanasos",
      "subchanges": [
        {
          "type": "Yfilerename",
          "commitMessage": "YARN-7437. Rename PlacementSet and SchedulingPlacementSet. (Wangda Tan via kkaranasos)\n",
          "commitDate": "09/11/17 1:01 PM",
          "commitName": "ac4d2b1081d8836a21bc70e77f4e6cd2071a9949",
          "commitAuthor": "Konstantinos Karanasos",
          "commitDateOld": "09/11/17 12:12 PM",
          "commitNameOld": "a2c150a7369cc629bbfaa2dfa3a8495b6f9c42e2",
          "commitAuthorOld": "Robert Kanter",
          "daysBetweenCommits": 0.03,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,20 +1,20 @@\n   private void decrementOutstanding(SchedulerRequestKey schedulerRequestKey,\n       ResourceRequest offSwitchRequest) {\n     int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n     offSwitchRequest.setNumContainers(numOffSwitchContainers);\n \n     // Do we have any outstanding requests?\n     // If there is nothing, we need to deactivate this application\n     if (numOffSwitchContainers \u003d\u003d 0) {\n       appSchedulingInfo.getSchedulerKeys().remove(schedulerRequestKey);\n       appSchedulingInfo.checkForDeactivation();\n       resourceRequestMap.remove(ResourceRequest.ANY);\n       if (resourceRequestMap.isEmpty()) {\n-        appSchedulingInfo.removePlacementSets(schedulerRequestKey);\n+        appSchedulingInfo.removeAppPlacement(schedulerRequestKey);\n       }\n     }\n \n     appSchedulingInfo.decPendingResource(\n         offSwitchRequest.getNodeLabelExpression(),\n         offSwitchRequest.getCapability());\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private void decrementOutstanding(SchedulerRequestKey schedulerRequestKey,\n      ResourceRequest offSwitchRequest) {\n    int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n    offSwitchRequest.setNumContainers(numOffSwitchContainers);\n\n    // Do we have any outstanding requests?\n    // If there is nothing, we need to deactivate this application\n    if (numOffSwitchContainers \u003d\u003d 0) {\n      appSchedulingInfo.getSchedulerKeys().remove(schedulerRequestKey);\n      appSchedulingInfo.checkForDeactivation();\n      resourceRequestMap.remove(ResourceRequest.ANY);\n      if (resourceRequestMap.isEmpty()) {\n        appSchedulingInfo.removeAppPlacement(schedulerRequestKey);\n      }\n    }\n\n    appSchedulingInfo.decPendingResource(\n        offSwitchRequest.getNodeLabelExpression(),\n        offSwitchRequest.getCapability());\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/placement/LocalityAppPlacementAllocator.java",
          "extendedDetails": {
            "oldPath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/placement/LocalitySchedulingPlacementSet.java",
            "newPath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/placement/LocalityAppPlacementAllocator.java"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "YARN-7437. Rename PlacementSet and SchedulingPlacementSet. (Wangda Tan via kkaranasos)\n",
          "commitDate": "09/11/17 1:01 PM",
          "commitName": "ac4d2b1081d8836a21bc70e77f4e6cd2071a9949",
          "commitAuthor": "Konstantinos Karanasos",
          "commitDateOld": "09/11/17 12:12 PM",
          "commitNameOld": "a2c150a7369cc629bbfaa2dfa3a8495b6f9c42e2",
          "commitAuthorOld": "Robert Kanter",
          "daysBetweenCommits": 0.03,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,20 +1,20 @@\n   private void decrementOutstanding(SchedulerRequestKey schedulerRequestKey,\n       ResourceRequest offSwitchRequest) {\n     int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n     offSwitchRequest.setNumContainers(numOffSwitchContainers);\n \n     // Do we have any outstanding requests?\n     // If there is nothing, we need to deactivate this application\n     if (numOffSwitchContainers \u003d\u003d 0) {\n       appSchedulingInfo.getSchedulerKeys().remove(schedulerRequestKey);\n       appSchedulingInfo.checkForDeactivation();\n       resourceRequestMap.remove(ResourceRequest.ANY);\n       if (resourceRequestMap.isEmpty()) {\n-        appSchedulingInfo.removePlacementSets(schedulerRequestKey);\n+        appSchedulingInfo.removeAppPlacement(schedulerRequestKey);\n       }\n     }\n \n     appSchedulingInfo.decPendingResource(\n         offSwitchRequest.getNodeLabelExpression(),\n         offSwitchRequest.getCapability());\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private void decrementOutstanding(SchedulerRequestKey schedulerRequestKey,\n      ResourceRequest offSwitchRequest) {\n    int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n    offSwitchRequest.setNumContainers(numOffSwitchContainers);\n\n    // Do we have any outstanding requests?\n    // If there is nothing, we need to deactivate this application\n    if (numOffSwitchContainers \u003d\u003d 0) {\n      appSchedulingInfo.getSchedulerKeys().remove(schedulerRequestKey);\n      appSchedulingInfo.checkForDeactivation();\n      resourceRequestMap.remove(ResourceRequest.ANY);\n      if (resourceRequestMap.isEmpty()) {\n        appSchedulingInfo.removeAppPlacement(schedulerRequestKey);\n      }\n    }\n\n    appSchedulingInfo.decPendingResource(\n        offSwitchRequest.getNodeLabelExpression(),\n        offSwitchRequest.getCapability());\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/placement/LocalityAppPlacementAllocator.java",
          "extendedDetails": {}
        }
      ]
    },
    "87e2ef8c985bb72a916477e8783359f2859f7890": {
      "type": "Ybodychange",
      "commitMessage": "YARN-6406. Remove SchedulerRequestKeys when no more pending ResourceRequest. (Arun Suresh via wangda)\n",
      "commitDate": "05/04/17 11:28 AM",
      "commitName": "87e2ef8c985bb72a916477e8783359f2859f7890",
      "commitAuthor": "Wangda Tan",
      "commitDateOld": "06/01/17 9:59 AM",
      "commitNameOld": "2977bc6a141041ef7579efc416e93fc55e0c2a1a",
      "commitAuthorOld": "Arun Suresh",
      "daysBetweenCommits": 89.02,
      "commitsBetweenForRepo": 490,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,20 @@\n   private void decrementOutstanding(SchedulerRequestKey schedulerRequestKey,\n       ResourceRequest offSwitchRequest) {\n     int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n-\n-    // Do not remove ANY\n     offSwitchRequest.setNumContainers(numOffSwitchContainers);\n \n     // Do we have any outstanding requests?\n     // If there is nothing, we need to deactivate this application\n     if (numOffSwitchContainers \u003d\u003d 0) {\n-      appSchedulingInfo.decrementSchedulerKeyReference(schedulerRequestKey);\n+      appSchedulingInfo.getSchedulerKeys().remove(schedulerRequestKey);\n       appSchedulingInfo.checkForDeactivation();\n+      resourceRequestMap.remove(ResourceRequest.ANY);\n+      if (resourceRequestMap.isEmpty()) {\n+        appSchedulingInfo.removePlacementSets(schedulerRequestKey);\n+      }\n     }\n \n     appSchedulingInfo.decPendingResource(\n         offSwitchRequest.getNodeLabelExpression(),\n         offSwitchRequest.getCapability());\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void decrementOutstanding(SchedulerRequestKey schedulerRequestKey,\n      ResourceRequest offSwitchRequest) {\n    int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n    offSwitchRequest.setNumContainers(numOffSwitchContainers);\n\n    // Do we have any outstanding requests?\n    // If there is nothing, we need to deactivate this application\n    if (numOffSwitchContainers \u003d\u003d 0) {\n      appSchedulingInfo.getSchedulerKeys().remove(schedulerRequestKey);\n      appSchedulingInfo.checkForDeactivation();\n      resourceRequestMap.remove(ResourceRequest.ANY);\n      if (resourceRequestMap.isEmpty()) {\n        appSchedulingInfo.removePlacementSets(schedulerRequestKey);\n      }\n    }\n\n    appSchedulingInfo.decPendingResource(\n        offSwitchRequest.getNodeLabelExpression(),\n        offSwitchRequest.getCapability());\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/placement/LocalitySchedulingPlacementSet.java",
      "extendedDetails": {}
    },
    "0a55bd841ec0f2eb89a0383f4c589526e8b138d4": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "YARN-5959. RM changes to support change of container ExecutionType. (Arun Suresh via wangda)\n",
      "commitDate": "05/01/17 10:31 AM",
      "commitName": "0a55bd841ec0f2eb89a0383f4c589526e8b138d4",
      "commitAuthor": "Wangda Tan",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "YARN-5959. RM changes to support change of container ExecutionType. (Arun Suresh via wangda)\n",
          "commitDate": "05/01/17 10:31 AM",
          "commitName": "0a55bd841ec0f2eb89a0383f4c589526e8b138d4",
          "commitAuthor": "Wangda Tan",
          "commitDateOld": "28/12/16 9:18 AM",
          "commitNameOld": "9ca54f4810de182195263bd594afb56dab564105",
          "commitAuthorOld": "Sunil G",
          "daysBetweenCommits": 8.05,
          "commitsBetweenForRepo": 28,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,19 +1,18 @@\n-  private void decrementOutstanding(ResourceRequest offSwitchRequest) {\n+  private void decrementOutstanding(SchedulerRequestKey schedulerRequestKey,\n+      ResourceRequest offSwitchRequest) {\n     int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n \n     // Do not remove ANY\n     offSwitchRequest.setNumContainers(numOffSwitchContainers);\n \n     // Do we have any outstanding requests?\n     // If there is nothing, we need to deactivate this application\n     if (numOffSwitchContainers \u003d\u003d 0) {\n-      SchedulerRequestKey schedulerRequestKey \u003d SchedulerRequestKey.create(\n-          offSwitchRequest);\n       appSchedulingInfo.decrementSchedulerKeyReference(schedulerRequestKey);\n       appSchedulingInfo.checkForDeactivation();\n     }\n \n     appSchedulingInfo.decPendingResource(\n         offSwitchRequest.getNodeLabelExpression(),\n         offSwitchRequest.getCapability());\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private void decrementOutstanding(SchedulerRequestKey schedulerRequestKey,\n      ResourceRequest offSwitchRequest) {\n    int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n\n    // Do not remove ANY\n    offSwitchRequest.setNumContainers(numOffSwitchContainers);\n\n    // Do we have any outstanding requests?\n    // If there is nothing, we need to deactivate this application\n    if (numOffSwitchContainers \u003d\u003d 0) {\n      appSchedulingInfo.decrementSchedulerKeyReference(schedulerRequestKey);\n      appSchedulingInfo.checkForDeactivation();\n    }\n\n    appSchedulingInfo.decPendingResource(\n        offSwitchRequest.getNodeLabelExpression(),\n        offSwitchRequest.getCapability());\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/placement/LocalitySchedulingPlacementSet.java",
          "extendedDetails": {
            "oldValue": "[offSwitchRequest-ResourceRequest]",
            "newValue": "[schedulerRequestKey-SchedulerRequestKey, offSwitchRequest-ResourceRequest]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "YARN-5959. RM changes to support change of container ExecutionType. (Arun Suresh via wangda)\n",
          "commitDate": "05/01/17 10:31 AM",
          "commitName": "0a55bd841ec0f2eb89a0383f4c589526e8b138d4",
          "commitAuthor": "Wangda Tan",
          "commitDateOld": "28/12/16 9:18 AM",
          "commitNameOld": "9ca54f4810de182195263bd594afb56dab564105",
          "commitAuthorOld": "Sunil G",
          "daysBetweenCommits": 8.05,
          "commitsBetweenForRepo": 28,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,19 +1,18 @@\n-  private void decrementOutstanding(ResourceRequest offSwitchRequest) {\n+  private void decrementOutstanding(SchedulerRequestKey schedulerRequestKey,\n+      ResourceRequest offSwitchRequest) {\n     int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n \n     // Do not remove ANY\n     offSwitchRequest.setNumContainers(numOffSwitchContainers);\n \n     // Do we have any outstanding requests?\n     // If there is nothing, we need to deactivate this application\n     if (numOffSwitchContainers \u003d\u003d 0) {\n-      SchedulerRequestKey schedulerRequestKey \u003d SchedulerRequestKey.create(\n-          offSwitchRequest);\n       appSchedulingInfo.decrementSchedulerKeyReference(schedulerRequestKey);\n       appSchedulingInfo.checkForDeactivation();\n     }\n \n     appSchedulingInfo.decPendingResource(\n         offSwitchRequest.getNodeLabelExpression(),\n         offSwitchRequest.getCapability());\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private void decrementOutstanding(SchedulerRequestKey schedulerRequestKey,\n      ResourceRequest offSwitchRequest) {\n    int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n\n    // Do not remove ANY\n    offSwitchRequest.setNumContainers(numOffSwitchContainers);\n\n    // Do we have any outstanding requests?\n    // If there is nothing, we need to deactivate this application\n    if (numOffSwitchContainers \u003d\u003d 0) {\n      appSchedulingInfo.decrementSchedulerKeyReference(schedulerRequestKey);\n      appSchedulingInfo.checkForDeactivation();\n    }\n\n    appSchedulingInfo.decPendingResource(\n        offSwitchRequest.getNodeLabelExpression(),\n        offSwitchRequest.getCapability());\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/placement/LocalitySchedulingPlacementSet.java",
          "extendedDetails": {}
        }
      ]
    },
    "9ca54f4810de182195263bd594afb56dab564105": {
      "type": "Ymultichange(Ymovefromfile,Ybodychange,Yparameterchange)",
      "commitMessage": "YARN-5906. Update AppSchedulingInfo to use SchedulingPlacementSet. Contributed by Wangda Tan.\n",
      "commitDate": "28/12/16 9:18 AM",
      "commitName": "9ca54f4810de182195263bd594afb56dab564105",
      "commitAuthor": "Sunil G",
      "subchanges": [
        {
          "type": "Ymovefromfile",
          "commitMessage": "YARN-5906. Update AppSchedulingInfo to use SchedulingPlacementSet. Contributed by Wangda Tan.\n",
          "commitDate": "28/12/16 9:18 AM",
          "commitName": "9ca54f4810de182195263bd594afb56dab564105",
          "commitAuthor": "Sunil G",
          "commitDateOld": "28/12/16 1:29 AM",
          "commitNameOld": "972da46cb48725ad49d3e0a033742bd1a8228f51",
          "commitAuthorOld": "Varun Vasudev",
          "daysBetweenCommits": 0.33,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,19 +1,19 @@\n-  private void decrementOutstanding(ResourceRequest offSwitchRequest,\n-      SchedulerRequestKey schedulerKey) {\n+  private void decrementOutstanding(ResourceRequest offSwitchRequest) {\n     int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n \n     // Do not remove ANY\n     offSwitchRequest.setNumContainers(numOffSwitchContainers);\n-    \n+\n     // Do we have any outstanding requests?\n     // If there is nothing, we need to deactivate this application\n     if (numOffSwitchContainers \u003d\u003d 0) {\n-      decrementSchedulerKeyReference(schedulerKey);\n-      checkForDeactivation();\n+      SchedulerRequestKey schedulerRequestKey \u003d SchedulerRequestKey.create(\n+          offSwitchRequest);\n+      appSchedulingInfo.decrementSchedulerKeyReference(schedulerRequestKey);\n+      appSchedulingInfo.checkForDeactivation();\n     }\n-    \n-    appResourceUsage.decPending(offSwitchRequest.getNodeLabelExpression(),\n-        offSwitchRequest.getCapability());\n-    queue.decPendingResource(offSwitchRequest.getNodeLabelExpression(),\n+\n+    appSchedulingInfo.decPendingResource(\n+        offSwitchRequest.getNodeLabelExpression(),\n         offSwitchRequest.getCapability());\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private void decrementOutstanding(ResourceRequest offSwitchRequest) {\n    int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n\n    // Do not remove ANY\n    offSwitchRequest.setNumContainers(numOffSwitchContainers);\n\n    // Do we have any outstanding requests?\n    // If there is nothing, we need to deactivate this application\n    if (numOffSwitchContainers \u003d\u003d 0) {\n      SchedulerRequestKey schedulerRequestKey \u003d SchedulerRequestKey.create(\n          offSwitchRequest);\n      appSchedulingInfo.decrementSchedulerKeyReference(schedulerRequestKey);\n      appSchedulingInfo.checkForDeactivation();\n    }\n\n    appSchedulingInfo.decPendingResource(\n        offSwitchRequest.getNodeLabelExpression(),\n        offSwitchRequest.getCapability());\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/placement/LocalitySchedulingPlacementSet.java",
          "extendedDetails": {
            "oldPath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/AppSchedulingInfo.java",
            "newPath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/placement/LocalitySchedulingPlacementSet.java",
            "oldMethodName": "decrementOutstanding",
            "newMethodName": "decrementOutstanding"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "YARN-5906. Update AppSchedulingInfo to use SchedulingPlacementSet. Contributed by Wangda Tan.\n",
          "commitDate": "28/12/16 9:18 AM",
          "commitName": "9ca54f4810de182195263bd594afb56dab564105",
          "commitAuthor": "Sunil G",
          "commitDateOld": "28/12/16 1:29 AM",
          "commitNameOld": "972da46cb48725ad49d3e0a033742bd1a8228f51",
          "commitAuthorOld": "Varun Vasudev",
          "daysBetweenCommits": 0.33,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,19 +1,19 @@\n-  private void decrementOutstanding(ResourceRequest offSwitchRequest,\n-      SchedulerRequestKey schedulerKey) {\n+  private void decrementOutstanding(ResourceRequest offSwitchRequest) {\n     int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n \n     // Do not remove ANY\n     offSwitchRequest.setNumContainers(numOffSwitchContainers);\n-    \n+\n     // Do we have any outstanding requests?\n     // If there is nothing, we need to deactivate this application\n     if (numOffSwitchContainers \u003d\u003d 0) {\n-      decrementSchedulerKeyReference(schedulerKey);\n-      checkForDeactivation();\n+      SchedulerRequestKey schedulerRequestKey \u003d SchedulerRequestKey.create(\n+          offSwitchRequest);\n+      appSchedulingInfo.decrementSchedulerKeyReference(schedulerRequestKey);\n+      appSchedulingInfo.checkForDeactivation();\n     }\n-    \n-    appResourceUsage.decPending(offSwitchRequest.getNodeLabelExpression(),\n-        offSwitchRequest.getCapability());\n-    queue.decPendingResource(offSwitchRequest.getNodeLabelExpression(),\n+\n+    appSchedulingInfo.decPendingResource(\n+        offSwitchRequest.getNodeLabelExpression(),\n         offSwitchRequest.getCapability());\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private void decrementOutstanding(ResourceRequest offSwitchRequest) {\n    int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n\n    // Do not remove ANY\n    offSwitchRequest.setNumContainers(numOffSwitchContainers);\n\n    // Do we have any outstanding requests?\n    // If there is nothing, we need to deactivate this application\n    if (numOffSwitchContainers \u003d\u003d 0) {\n      SchedulerRequestKey schedulerRequestKey \u003d SchedulerRequestKey.create(\n          offSwitchRequest);\n      appSchedulingInfo.decrementSchedulerKeyReference(schedulerRequestKey);\n      appSchedulingInfo.checkForDeactivation();\n    }\n\n    appSchedulingInfo.decPendingResource(\n        offSwitchRequest.getNodeLabelExpression(),\n        offSwitchRequest.getCapability());\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/placement/LocalitySchedulingPlacementSet.java",
          "extendedDetails": {}
        },
        {
          "type": "Yparameterchange",
          "commitMessage": "YARN-5906. Update AppSchedulingInfo to use SchedulingPlacementSet. Contributed by Wangda Tan.\n",
          "commitDate": "28/12/16 9:18 AM",
          "commitName": "9ca54f4810de182195263bd594afb56dab564105",
          "commitAuthor": "Sunil G",
          "commitDateOld": "28/12/16 1:29 AM",
          "commitNameOld": "972da46cb48725ad49d3e0a033742bd1a8228f51",
          "commitAuthorOld": "Varun Vasudev",
          "daysBetweenCommits": 0.33,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,19 +1,19 @@\n-  private void decrementOutstanding(ResourceRequest offSwitchRequest,\n-      SchedulerRequestKey schedulerKey) {\n+  private void decrementOutstanding(ResourceRequest offSwitchRequest) {\n     int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n \n     // Do not remove ANY\n     offSwitchRequest.setNumContainers(numOffSwitchContainers);\n-    \n+\n     // Do we have any outstanding requests?\n     // If there is nothing, we need to deactivate this application\n     if (numOffSwitchContainers \u003d\u003d 0) {\n-      decrementSchedulerKeyReference(schedulerKey);\n-      checkForDeactivation();\n+      SchedulerRequestKey schedulerRequestKey \u003d SchedulerRequestKey.create(\n+          offSwitchRequest);\n+      appSchedulingInfo.decrementSchedulerKeyReference(schedulerRequestKey);\n+      appSchedulingInfo.checkForDeactivation();\n     }\n-    \n-    appResourceUsage.decPending(offSwitchRequest.getNodeLabelExpression(),\n-        offSwitchRequest.getCapability());\n-    queue.decPendingResource(offSwitchRequest.getNodeLabelExpression(),\n+\n+    appSchedulingInfo.decPendingResource(\n+        offSwitchRequest.getNodeLabelExpression(),\n         offSwitchRequest.getCapability());\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private void decrementOutstanding(ResourceRequest offSwitchRequest) {\n    int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n\n    // Do not remove ANY\n    offSwitchRequest.setNumContainers(numOffSwitchContainers);\n\n    // Do we have any outstanding requests?\n    // If there is nothing, we need to deactivate this application\n    if (numOffSwitchContainers \u003d\u003d 0) {\n      SchedulerRequestKey schedulerRequestKey \u003d SchedulerRequestKey.create(\n          offSwitchRequest);\n      appSchedulingInfo.decrementSchedulerKeyReference(schedulerRequestKey);\n      appSchedulingInfo.checkForDeactivation();\n    }\n\n    appSchedulingInfo.decPendingResource(\n        offSwitchRequest.getNodeLabelExpression(),\n        offSwitchRequest.getCapability());\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/placement/LocalitySchedulingPlacementSet.java",
          "extendedDetails": {
            "oldValue": "[offSwitchRequest-ResourceRequest, schedulerKey-SchedulerRequestKey]",
            "newValue": "[offSwitchRequest-ResourceRequest]"
          }
        }
      ]
    },
    "1831be8e737fd423a9f3d590767b944147e85641": {
      "type": "Ymodifierchange",
      "commitMessage": "YARN-3142. Improve locks in AppSchedulingInfo. (Varun Saxena via wangda)\n",
      "commitDate": "27/09/16 11:54 AM",
      "commitName": "1831be8e737fd423a9f3d590767b944147e85641",
      "commitAuthor": "Wangda Tan",
      "commitDateOld": "19/09/16 1:31 PM",
      "commitNameOld": "7558dbbb481eab055e794beb3603bbe5671a4b4c",
      "commitAuthorOld": "Jason Lowe",
      "daysBetweenCommits": 7.93,
      "commitsBetweenForRepo": 48,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,19 @@\n-  private synchronized void decrementOutstanding(\n-      ResourceRequest offSwitchRequest, SchedulerRequestKey schedulerKey) {\n+  private void decrementOutstanding(ResourceRequest offSwitchRequest,\n+      SchedulerRequestKey schedulerKey) {\n     int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n \n     // Do not remove ANY\n     offSwitchRequest.setNumContainers(numOffSwitchContainers);\n     \n     // Do we have any outstanding requests?\n     // If there is nothing, we need to deactivate this application\n     if (numOffSwitchContainers \u003d\u003d 0) {\n       decrementSchedulerKeyReference(schedulerKey);\n       checkForDeactivation();\n     }\n     \n     appResourceUsage.decPending(offSwitchRequest.getNodeLabelExpression(),\n         offSwitchRequest.getCapability());\n     queue.decPendingResource(offSwitchRequest.getNodeLabelExpression(),\n         offSwitchRequest.getCapability());\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void decrementOutstanding(ResourceRequest offSwitchRequest,\n      SchedulerRequestKey schedulerKey) {\n    int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n\n    // Do not remove ANY\n    offSwitchRequest.setNumContainers(numOffSwitchContainers);\n    \n    // Do we have any outstanding requests?\n    // If there is nothing, we need to deactivate this application\n    if (numOffSwitchContainers \u003d\u003d 0) {\n      decrementSchedulerKeyReference(schedulerKey);\n      checkForDeactivation();\n    }\n    \n    appResourceUsage.decPending(offSwitchRequest.getNodeLabelExpression(),\n        offSwitchRequest.getCapability());\n    queue.decPendingResource(offSwitchRequest.getNodeLabelExpression(),\n        offSwitchRequest.getCapability());\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/AppSchedulingInfo.java",
      "extendedDetails": {
        "oldValue": "[private, synchronized]",
        "newValue": "[private]"
      }
    },
    "7558dbbb481eab055e794beb3603bbe5671a4b4c": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "YARN-5540. Scheduler spends too much time looking at empty priorities. Contributed by Jason Lowe\n",
      "commitDate": "19/09/16 1:31 PM",
      "commitName": "7558dbbb481eab055e794beb3603bbe5671a4b4c",
      "commitAuthor": "Jason Lowe",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "YARN-5540. Scheduler spends too much time looking at empty priorities. Contributed by Jason Lowe\n",
          "commitDate": "19/09/16 1:31 PM",
          "commitName": "7558dbbb481eab055e794beb3603bbe5671a4b4c",
          "commitAuthor": "Jason Lowe",
          "commitDateOld": "31/07/16 11:48 AM",
          "commitNameOld": "e5766b1dbee02ae0ef89618e172f3fb227af19e8",
          "commitAuthorOld": "Arun Suresh",
          "daysBetweenCommits": 50.07,
          "commitsBetweenForRepo": 315,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,18 +1,19 @@\n   private synchronized void decrementOutstanding(\n-      ResourceRequest offSwitchRequest) {\n+      ResourceRequest offSwitchRequest, SchedulerRequestKey schedulerKey) {\n     int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n \n     // Do not remove ANY\n     offSwitchRequest.setNumContainers(numOffSwitchContainers);\n     \n     // Do we have any outstanding requests?\n     // If there is nothing, we need to deactivate this application\n     if (numOffSwitchContainers \u003d\u003d 0) {\n+      decrementSchedulerKeyReference(schedulerKey);\n       checkForDeactivation();\n     }\n     \n     appResourceUsage.decPending(offSwitchRequest.getNodeLabelExpression(),\n         offSwitchRequest.getCapability());\n     queue.decPendingResource(offSwitchRequest.getNodeLabelExpression(),\n         offSwitchRequest.getCapability());\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private synchronized void decrementOutstanding(\n      ResourceRequest offSwitchRequest, SchedulerRequestKey schedulerKey) {\n    int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n\n    // Do not remove ANY\n    offSwitchRequest.setNumContainers(numOffSwitchContainers);\n    \n    // Do we have any outstanding requests?\n    // If there is nothing, we need to deactivate this application\n    if (numOffSwitchContainers \u003d\u003d 0) {\n      decrementSchedulerKeyReference(schedulerKey);\n      checkForDeactivation();\n    }\n    \n    appResourceUsage.decPending(offSwitchRequest.getNodeLabelExpression(),\n        offSwitchRequest.getCapability());\n    queue.decPendingResource(offSwitchRequest.getNodeLabelExpression(),\n        offSwitchRequest.getCapability());\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/AppSchedulingInfo.java",
          "extendedDetails": {
            "oldValue": "[offSwitchRequest-ResourceRequest]",
            "newValue": "[offSwitchRequest-ResourceRequest, schedulerKey-SchedulerRequestKey]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "YARN-5540. Scheduler spends too much time looking at empty priorities. Contributed by Jason Lowe\n",
          "commitDate": "19/09/16 1:31 PM",
          "commitName": "7558dbbb481eab055e794beb3603bbe5671a4b4c",
          "commitAuthor": "Jason Lowe",
          "commitDateOld": "31/07/16 11:48 AM",
          "commitNameOld": "e5766b1dbee02ae0ef89618e172f3fb227af19e8",
          "commitAuthorOld": "Arun Suresh",
          "daysBetweenCommits": 50.07,
          "commitsBetweenForRepo": 315,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,18 +1,19 @@\n   private synchronized void decrementOutstanding(\n-      ResourceRequest offSwitchRequest) {\n+      ResourceRequest offSwitchRequest, SchedulerRequestKey schedulerKey) {\n     int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n \n     // Do not remove ANY\n     offSwitchRequest.setNumContainers(numOffSwitchContainers);\n     \n     // Do we have any outstanding requests?\n     // If there is nothing, we need to deactivate this application\n     if (numOffSwitchContainers \u003d\u003d 0) {\n+      decrementSchedulerKeyReference(schedulerKey);\n       checkForDeactivation();\n     }\n     \n     appResourceUsage.decPending(offSwitchRequest.getNodeLabelExpression(),\n         offSwitchRequest.getCapability());\n     queue.decPendingResource(offSwitchRequest.getNodeLabelExpression(),\n         offSwitchRequest.getCapability());\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private synchronized void decrementOutstanding(\n      ResourceRequest offSwitchRequest, SchedulerRequestKey schedulerKey) {\n    int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n\n    // Do not remove ANY\n    offSwitchRequest.setNumContainers(numOffSwitchContainers);\n    \n    // Do we have any outstanding requests?\n    // If there is nothing, we need to deactivate this application\n    if (numOffSwitchContainers \u003d\u003d 0) {\n      decrementSchedulerKeyReference(schedulerKey);\n      checkForDeactivation();\n    }\n    \n    appResourceUsage.decPending(offSwitchRequest.getNodeLabelExpression(),\n        offSwitchRequest.getCapability());\n    queue.decPendingResource(offSwitchRequest.getNodeLabelExpression(),\n        offSwitchRequest.getCapability());\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/AppSchedulingInfo.java",
          "extendedDetails": {}
        }
      ]
    },
    "0fefda645bca935b87b6bb8ca63e6f18340d59f5": {
      "type": "Ybodychange",
      "commitMessage": "YARN-3361. CapacityScheduler side changes to support non-exclusive node labels. Contributed by Wangda Tan\n",
      "commitDate": "14/04/15 11:45 AM",
      "commitName": "0fefda645bca935b87b6bb8ca63e6f18340d59f5",
      "commitAuthor": "Jian He",
      "commitDateOld": "01/04/15 4:19 AM",
      "commitNameOld": "4728bdfa15809db4b8b235faa286c65de4a48cf6",
      "commitAuthorOld": "Xuan",
      "daysBetweenCommits": 13.31,
      "commitsBetweenForRepo": 116,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,18 @@\n   synchronized private void decrementOutstanding(\n       ResourceRequest offSwitchRequest) {\n     int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n \n     // Do not remove ANY\n     offSwitchRequest.setNumContainers(numOffSwitchContainers);\n     \n     // Do we have any outstanding requests?\n     // If there is nothing, we need to deactivate this application\n     if (numOffSwitchContainers \u003d\u003d 0) {\n       checkForDeactivation();\n     }\n     \n+    appResourceUsage.decPending(offSwitchRequest.getNodeLabelExpression(),\n+        offSwitchRequest.getCapability());\n     queue.decPendingResource(offSwitchRequest.getNodeLabelExpression(),\n         offSwitchRequest.getCapability());\n   }\n\\ No newline at end of file\n",
      "actualSource": "  synchronized private void decrementOutstanding(\n      ResourceRequest offSwitchRequest) {\n    int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n\n    // Do not remove ANY\n    offSwitchRequest.setNumContainers(numOffSwitchContainers);\n    \n    // Do we have any outstanding requests?\n    // If there is nothing, we need to deactivate this application\n    if (numOffSwitchContainers \u003d\u003d 0) {\n      checkForDeactivation();\n    }\n    \n    appResourceUsage.decPending(offSwitchRequest.getNodeLabelExpression(),\n        offSwitchRequest.getCapability());\n    queue.decPendingResource(offSwitchRequest.getNodeLabelExpression(),\n        offSwitchRequest.getCapability());\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/AppSchedulingInfo.java",
      "extendedDetails": {}
    },
    "586348e4cbf197188057d6b843a6701cfffdaff3": {
      "type": "Ybodychange",
      "commitMessage": "YARN-3356. Capacity Scheduler FiCaSchedulerApp should use ResourceUsage to track used-resources-by-label. Contributed by Wangda Tan\n",
      "commitDate": "20/03/15 1:54 PM",
      "commitName": "586348e4cbf197188057d6b843a6701cfffdaff3",
      "commitAuthor": "Jian He",
      "commitDateOld": "20/03/15 10:42 AM",
      "commitNameOld": "6bc7710ec7f2592c4c87dd940fbe5827ef81fe72",
      "commitAuthorOld": "Wangda Tan",
      "daysBetweenCommits": 0.13,
      "commitsBetweenForRepo": 6,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,13 +1,16 @@\n   synchronized private void decrementOutstanding(\n       ResourceRequest offSwitchRequest) {\n     int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n \n     // Do not remove ANY\n     offSwitchRequest.setNumContainers(numOffSwitchContainers);\n     \n     // Do we have any outstanding requests?\n     // If there is nothing, we need to deactivate this application\n     if (numOffSwitchContainers \u003d\u003d 0) {\n       checkForDeactivation();\n     }\n+    \n+    queue.decPendingResource(offSwitchRequest.getNodeLabelExpression(),\n+        offSwitchRequest.getCapability());\n   }\n\\ No newline at end of file\n",
      "actualSource": "  synchronized private void decrementOutstanding(\n      ResourceRequest offSwitchRequest) {\n    int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n\n    // Do not remove ANY\n    offSwitchRequest.setNumContainers(numOffSwitchContainers);\n    \n    // Do we have any outstanding requests?\n    // If there is nothing, we need to deactivate this application\n    if (numOffSwitchContainers \u003d\u003d 0) {\n      checkForDeactivation();\n    }\n    \n    queue.decPendingResource(offSwitchRequest.getNodeLabelExpression(),\n        offSwitchRequest.getCapability());\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/AppSchedulingInfo.java",
      "extendedDetails": {}
    },
    "e1fdf62123625e4ba399af02f8aad500637d29d1": {
      "type": "Yfilerename",
      "commitMessage": "YARN-1. Promote YARN to be a sub-project of Apache Hadoop.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1370666 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "07/08/12 10:22 PM",
      "commitName": "e1fdf62123625e4ba399af02f8aad500637d29d1",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "07/08/12 7:53 PM",
      "commitNameOld": "34554d1e11ee1d5b564d7d9ed3e6d55931d72749",
      "commitAuthorOld": "Aaron Myers",
      "daysBetweenCommits": 0.1,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  synchronized private void decrementOutstanding(\n      ResourceRequest offSwitchRequest) {\n    int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n\n    // Do not remove ANY\n    offSwitchRequest.setNumContainers(numOffSwitchContainers);\n    \n    // Do we have any outstanding requests?\n    // If there is nothing, we need to deactivate this application\n    if (numOffSwitchContainers \u003d\u003d 0) {\n      checkForDeactivation();\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/AppSchedulingInfo.java",
      "extendedDetails": {
        "oldPath": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/AppSchedulingInfo.java",
        "newPath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/AppSchedulingInfo.java"
      }
    },
    "ef1a619a4df3a612eb293a6e8e1e952eaef18eba": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-3752. Modified application limits to include queue max-capacities besides the usual user limits. Contributed by Arun C Murthy.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1239422 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "01/02/12 4:41 PM",
      "commitName": "ef1a619a4df3a612eb293a6e8e1e952eaef18eba",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "27/01/12 5:32 PM",
      "commitNameOld": "5262b7ba4d018562d4e7d60772af4ddc3d770a23",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 4.96,
      "commitsBetweenForRepo": 30,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,23 +1,13 @@\n   synchronized private void decrementOutstanding(\n       ResourceRequest offSwitchRequest) {\n     int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n \n     // Do not remove ANY\n     offSwitchRequest.setNumContainers(numOffSwitchContainers);\n     \n     // Do we have any outstanding requests?\n     // If there is nothing, we need to deactivate this application\n     if (numOffSwitchContainers \u003d\u003d 0) {\n-      boolean deactivate \u003d true;\n-      for (Priority priority : getPriorities()) {\n-        ResourceRequest request \u003d getResourceRequest(priority, RMNodeImpl.ANY);\n-        if (request.getNumContainers() \u003e 0) {\n-          deactivate \u003d false;\n-          break;\n-        }\n-      }\n-      if (deactivate) {\n-        activeUsersManager.deactivateApplication(user, applicationId);\n-      }\n+      checkForDeactivation();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  synchronized private void decrementOutstanding(\n      ResourceRequest offSwitchRequest) {\n    int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n\n    // Do not remove ANY\n    offSwitchRequest.setNumContainers(numOffSwitchContainers);\n    \n    // Do we have any outstanding requests?\n    // If there is nothing, we need to deactivate this application\n    if (numOffSwitchContainers \u003d\u003d 0) {\n      checkForDeactivation();\n    }\n  }",
      "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/AppSchedulingInfo.java",
      "extendedDetails": {}
    },
    "5262b7ba4d018562d4e7d60772af4ddc3d770a23": {
      "type": "Yintroduced",
      "commitMessage": "MAPREDUCE-3732. Modified CapacityScheduler to use only users with pending requests for computing user-limits. Contributed by Arun C Murthy.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1236953 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "27/01/12 5:32 PM",
      "commitName": "5262b7ba4d018562d4e7d60772af4ddc3d770a23",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "diff": "@@ -0,0 +1,23 @@\n+  synchronized private void decrementOutstanding(\n+      ResourceRequest offSwitchRequest) {\n+    int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n+\n+    // Do not remove ANY\n+    offSwitchRequest.setNumContainers(numOffSwitchContainers);\n+    \n+    // Do we have any outstanding requests?\n+    // If there is nothing, we need to deactivate this application\n+    if (numOffSwitchContainers \u003d\u003d 0) {\n+      boolean deactivate \u003d true;\n+      for (Priority priority : getPriorities()) {\n+        ResourceRequest request \u003d getResourceRequest(priority, RMNodeImpl.ANY);\n+        if (request.getNumContainers() \u003e 0) {\n+          deactivate \u003d false;\n+          break;\n+        }\n+      }\n+      if (deactivate) {\n+        activeUsersManager.deactivateApplication(user, applicationId);\n+      }\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  synchronized private void decrementOutstanding(\n      ResourceRequest offSwitchRequest) {\n    int numOffSwitchContainers \u003d offSwitchRequest.getNumContainers() - 1;\n\n    // Do not remove ANY\n    offSwitchRequest.setNumContainers(numOffSwitchContainers);\n    \n    // Do we have any outstanding requests?\n    // If there is nothing, we need to deactivate this application\n    if (numOffSwitchContainers \u003d\u003d 0) {\n      boolean deactivate \u003d true;\n      for (Priority priority : getPriorities()) {\n        ResourceRequest request \u003d getResourceRequest(priority, RMNodeImpl.ANY);\n        if (request.getNumContainers() \u003e 0) {\n          deactivate \u003d false;\n          break;\n        }\n      }\n      if (deactivate) {\n        activeUsersManager.deactivateApplication(user, applicationId);\n      }\n    }\n  }",
      "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/AppSchedulingInfo.java"
    }
  }
}