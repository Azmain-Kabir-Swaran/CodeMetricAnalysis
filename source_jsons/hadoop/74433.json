{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "ReloadingX509TrustManager.java",
  "functionName": "loadTrustManager",
  "functionId": "loadTrustManager",
  "sourceFilePath": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/ssl/ReloadingX509TrustManager.java",
  "functionStartLine": 166,
  "functionEndLine": 190,
  "numCommitsSeen": 7,
  "timeTaken": 2002,
  "changeHistory": [
    "7a3188d054481b9bd563e337901e93476303ce7f",
    "a2b5d602201a4f619f6a68ec2168a884190d8de6",
    "0f51eae0c085ded38216824377acf8122638c3a5",
    "af7b7667f52869d88fd99738ea7e1affeccb60ce",
    "9d16c9354b0c05edb30d23003dcdec4cc44ed925"
  ],
  "changeHistoryShort": {
    "7a3188d054481b9bd563e337901e93476303ce7f": "Ybodychange",
    "a2b5d602201a4f619f6a68ec2168a884190d8de6": "Ybodychange",
    "0f51eae0c085ded38216824377acf8122638c3a5": "Ybodychange",
    "af7b7667f52869d88fd99738ea7e1affeccb60ce": "Ybodychange",
    "9d16c9354b0c05edb30d23003dcdec4cc44ed925": "Yintroduced"
  },
  "changeHistoryDetails": {
    "7a3188d054481b9bd563e337901e93476303ce7f": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-16282. Avoid FileStream to improve performance. Contributed by Ayush Saxena.\n",
      "commitDate": "02/05/19 12:58 PM",
      "commitName": "7a3188d054481b9bd563e337901e93476303ce7f",
      "commitAuthor": "Giovanni Matteo Fumarola",
      "commitDateOld": "17/07/17 9:32 PM",
      "commitNameOld": "ccaf036662e22da14583942054898c99fa51dae5",
      "commitAuthorOld": "Akira Ajisaka",
      "daysBetweenCommits": 653.64,
      "commitsBetweenForRepo": 5524,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,25 +1,25 @@\n   X509TrustManager loadTrustManager()\n   throws IOException, GeneralSecurityException {\n     X509TrustManager trustManager \u003d null;\n     KeyStore ks \u003d KeyStore.getInstance(type);\n-    FileInputStream in \u003d new FileInputStream(file);\n+    InputStream in \u003d Files.newInputStream(file.toPath());\n     try {\n       ks.load(in, (password \u003d\u003d null) ? null : password.toCharArray());\n       lastLoaded \u003d file.lastModified();\n       LOG.debug(\"Loaded truststore \u0027\" + file + \"\u0027\");\n     } finally {\n       in.close();\n     }\n \n     TrustManagerFactory trustManagerFactory \u003d \n       TrustManagerFactory.getInstance(SSLFactory.SSLCERTIFICATE);\n     trustManagerFactory.init(ks);\n     TrustManager[] trustManagers \u003d trustManagerFactory.getTrustManagers();\n     for (TrustManager trustManager1 : trustManagers) {\n       if (trustManager1 instanceof X509TrustManager) {\n         trustManager \u003d (X509TrustManager) trustManager1;\n         break;\n       }\n     }\n     return trustManager;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  X509TrustManager loadTrustManager()\n  throws IOException, GeneralSecurityException {\n    X509TrustManager trustManager \u003d null;\n    KeyStore ks \u003d KeyStore.getInstance(type);\n    InputStream in \u003d Files.newInputStream(file.toPath());\n    try {\n      ks.load(in, (password \u003d\u003d null) ? null : password.toCharArray());\n      lastLoaded \u003d file.lastModified();\n      LOG.debug(\"Loaded truststore \u0027\" + file + \"\u0027\");\n    } finally {\n      in.close();\n    }\n\n    TrustManagerFactory trustManagerFactory \u003d \n      TrustManagerFactory.getInstance(SSLFactory.SSLCERTIFICATE);\n    trustManagerFactory.init(ks);\n    TrustManager[] trustManagers \u003d trustManagerFactory.getTrustManagers();\n    for (TrustManager trustManager1 : trustManagers) {\n      if (trustManager1 instanceof X509TrustManager) {\n        trustManager \u003d (X509TrustManager) trustManager1;\n        break;\n      }\n    }\n    return trustManager;\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/ssl/ReloadingX509TrustManager.java",
      "extendedDetails": {}
    },
    "a2b5d602201a4f619f6a68ec2168a884190d8de6": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-13864. KMS should not require truststore password. Contributed by Mike Yoder.\n",
      "commitDate": "05/12/16 5:36 PM",
      "commitName": "a2b5d602201a4f619f6a68ec2168a884190d8de6",
      "commitAuthor": "Xiao Chen",
      "commitDateOld": "18/08/16 2:10 PM",
      "commitNameOld": "0f51eae0c085ded38216824377acf8122638c3a5",
      "commitAuthorOld": "Mingliang Liu",
      "daysBetweenCommits": 109.18,
      "commitsBetweenForRepo": 784,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,25 +1,25 @@\n   X509TrustManager loadTrustManager()\n   throws IOException, GeneralSecurityException {\n     X509TrustManager trustManager \u003d null;\n     KeyStore ks \u003d KeyStore.getInstance(type);\n     FileInputStream in \u003d new FileInputStream(file);\n     try {\n-      ks.load(in, password.toCharArray());\n+      ks.load(in, (password \u003d\u003d null) ? null : password.toCharArray());\n       lastLoaded \u003d file.lastModified();\n       LOG.debug(\"Loaded truststore \u0027\" + file + \"\u0027\");\n     } finally {\n       in.close();\n     }\n \n     TrustManagerFactory trustManagerFactory \u003d \n       TrustManagerFactory.getInstance(SSLFactory.SSLCERTIFICATE);\n     trustManagerFactory.init(ks);\n     TrustManager[] trustManagers \u003d trustManagerFactory.getTrustManagers();\n     for (TrustManager trustManager1 : trustManagers) {\n       if (trustManager1 instanceof X509TrustManager) {\n         trustManager \u003d (X509TrustManager) trustManager1;\n         break;\n       }\n     }\n     return trustManager;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  X509TrustManager loadTrustManager()\n  throws IOException, GeneralSecurityException {\n    X509TrustManager trustManager \u003d null;\n    KeyStore ks \u003d KeyStore.getInstance(type);\n    FileInputStream in \u003d new FileInputStream(file);\n    try {\n      ks.load(in, (password \u003d\u003d null) ? null : password.toCharArray());\n      lastLoaded \u003d file.lastModified();\n      LOG.debug(\"Loaded truststore \u0027\" + file + \"\u0027\");\n    } finally {\n      in.close();\n    }\n\n    TrustManagerFactory trustManagerFactory \u003d \n      TrustManagerFactory.getInstance(SSLFactory.SSLCERTIFICATE);\n    trustManagerFactory.init(ks);\n    TrustManager[] trustManagers \u003d trustManagerFactory.getTrustManagers();\n    for (TrustManager trustManager1 : trustManagers) {\n      if (trustManager1 instanceof X509TrustManager) {\n        trustManager \u003d (X509TrustManager) trustManager1;\n        break;\n      }\n    }\n    return trustManager;\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/ssl/ReloadingX509TrustManager.java",
      "extendedDetails": {}
    },
    "0f51eae0c085ded38216824377acf8122638c3a5": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-13512. ReloadingX509TrustManager should keep reloading in case of exception. (Contributed by Mingliang Liu)\n",
      "commitDate": "18/08/16 2:10 PM",
      "commitName": "0f51eae0c085ded38216824377acf8122638c3a5",
      "commitAuthor": "Mingliang Liu",
      "commitDateOld": "08/08/16 11:00 AM",
      "commitNameOld": "625585950a15461eb032e5e7ed8fdf4e1113b2bb",
      "commitAuthorOld": "Jitendra Pandey",
      "daysBetweenCommits": 10.13,
      "commitsBetweenForRepo": 83,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,25 +1,25 @@\n   X509TrustManager loadTrustManager()\n   throws IOException, GeneralSecurityException {\n     X509TrustManager trustManager \u003d null;\n     KeyStore ks \u003d KeyStore.getInstance(type);\n-    lastLoaded \u003d file.lastModified();\n     FileInputStream in \u003d new FileInputStream(file);\n     try {\n       ks.load(in, password.toCharArray());\n+      lastLoaded \u003d file.lastModified();\n       LOG.debug(\"Loaded truststore \u0027\" + file + \"\u0027\");\n     } finally {\n       in.close();\n     }\n \n     TrustManagerFactory trustManagerFactory \u003d \n       TrustManagerFactory.getInstance(SSLFactory.SSLCERTIFICATE);\n     trustManagerFactory.init(ks);\n     TrustManager[] trustManagers \u003d trustManagerFactory.getTrustManagers();\n     for (TrustManager trustManager1 : trustManagers) {\n       if (trustManager1 instanceof X509TrustManager) {\n         trustManager \u003d (X509TrustManager) trustManager1;\n         break;\n       }\n     }\n     return trustManager;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  X509TrustManager loadTrustManager()\n  throws IOException, GeneralSecurityException {\n    X509TrustManager trustManager \u003d null;\n    KeyStore ks \u003d KeyStore.getInstance(type);\n    FileInputStream in \u003d new FileInputStream(file);\n    try {\n      ks.load(in, password.toCharArray());\n      lastLoaded \u003d file.lastModified();\n      LOG.debug(\"Loaded truststore \u0027\" + file + \"\u0027\");\n    } finally {\n      in.close();\n    }\n\n    TrustManagerFactory trustManagerFactory \u003d \n      TrustManagerFactory.getInstance(SSLFactory.SSLCERTIFICATE);\n    trustManagerFactory.init(ks);\n    TrustManager[] trustManagers \u003d trustManagerFactory.getTrustManagers();\n    for (TrustManager trustManager1 : trustManagers) {\n      if (trustManager1 instanceof X509TrustManager) {\n        trustManager \u003d (X509TrustManager) trustManager1;\n        break;\n      }\n    }\n    return trustManager;\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/ssl/ReloadingX509TrustManager.java",
      "extendedDetails": {}
    },
    "af7b7667f52869d88fd99738ea7e1affeccb60ce": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-9430. TestSSLFactory fails on IBM JVM. Contributed by Amir Sanjar.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1461268 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "26/03/13 11:57 AM",
      "commitName": "af7b7667f52869d88fd99738ea7e1affeccb60ce",
      "commitAuthor": "Suresh Srinivas",
      "commitDateOld": "26/07/12 6:23 AM",
      "commitNameOld": "9d16c9354b0c05edb30d23003dcdec4cc44ed925",
      "commitAuthorOld": "Alejandro Abdelnur",
      "daysBetweenCommits": 243.23,
      "commitsBetweenForRepo": 1240,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,25 +1,25 @@\n   X509TrustManager loadTrustManager()\n   throws IOException, GeneralSecurityException {\n     X509TrustManager trustManager \u003d null;\n     KeyStore ks \u003d KeyStore.getInstance(type);\n     lastLoaded \u003d file.lastModified();\n     FileInputStream in \u003d new FileInputStream(file);\n     try {\n       ks.load(in, password.toCharArray());\n       LOG.debug(\"Loaded truststore \u0027\" + file + \"\u0027\");\n     } finally {\n       in.close();\n     }\n \n-    TrustManagerFactory trustManagerFactory \u003d\n-      TrustManagerFactory.getInstance(\"SunX509\");\n+    TrustManagerFactory trustManagerFactory \u003d \n+      TrustManagerFactory.getInstance(SSLFactory.SSLCERTIFICATE);\n     trustManagerFactory.init(ks);\n     TrustManager[] trustManagers \u003d trustManagerFactory.getTrustManagers();\n     for (TrustManager trustManager1 : trustManagers) {\n       if (trustManager1 instanceof X509TrustManager) {\n         trustManager \u003d (X509TrustManager) trustManager1;\n         break;\n       }\n     }\n     return trustManager;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  X509TrustManager loadTrustManager()\n  throws IOException, GeneralSecurityException {\n    X509TrustManager trustManager \u003d null;\n    KeyStore ks \u003d KeyStore.getInstance(type);\n    lastLoaded \u003d file.lastModified();\n    FileInputStream in \u003d new FileInputStream(file);\n    try {\n      ks.load(in, password.toCharArray());\n      LOG.debug(\"Loaded truststore \u0027\" + file + \"\u0027\");\n    } finally {\n      in.close();\n    }\n\n    TrustManagerFactory trustManagerFactory \u003d \n      TrustManagerFactory.getInstance(SSLFactory.SSLCERTIFICATE);\n    trustManagerFactory.init(ks);\n    TrustManager[] trustManagers \u003d trustManagerFactory.getTrustManagers();\n    for (TrustManager trustManager1 : trustManagers) {\n      if (trustManager1 instanceof X509TrustManager) {\n        trustManager \u003d (X509TrustManager) trustManager1;\n        break;\n      }\n    }\n    return trustManager;\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/ssl/ReloadingX509TrustManager.java",
      "extendedDetails": {}
    },
    "9d16c9354b0c05edb30d23003dcdec4cc44ed925": {
      "type": "Yintroduced",
      "commitMessage": "MAPREDUCE-4417. add support for encrypted shuffle (tucu)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1365979 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "26/07/12 6:23 AM",
      "commitName": "9d16c9354b0c05edb30d23003dcdec4cc44ed925",
      "commitAuthor": "Alejandro Abdelnur",
      "diff": "@@ -0,0 +1,25 @@\n+  X509TrustManager loadTrustManager()\n+  throws IOException, GeneralSecurityException {\n+    X509TrustManager trustManager \u003d null;\n+    KeyStore ks \u003d KeyStore.getInstance(type);\n+    lastLoaded \u003d file.lastModified();\n+    FileInputStream in \u003d new FileInputStream(file);\n+    try {\n+      ks.load(in, password.toCharArray());\n+      LOG.debug(\"Loaded truststore \u0027\" + file + \"\u0027\");\n+    } finally {\n+      in.close();\n+    }\n+\n+    TrustManagerFactory trustManagerFactory \u003d\n+      TrustManagerFactory.getInstance(\"SunX509\");\n+    trustManagerFactory.init(ks);\n+    TrustManager[] trustManagers \u003d trustManagerFactory.getTrustManagers();\n+    for (TrustManager trustManager1 : trustManagers) {\n+      if (trustManager1 instanceof X509TrustManager) {\n+        trustManager \u003d (X509TrustManager) trustManager1;\n+        break;\n+      }\n+    }\n+    return trustManager;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  X509TrustManager loadTrustManager()\n  throws IOException, GeneralSecurityException {\n    X509TrustManager trustManager \u003d null;\n    KeyStore ks \u003d KeyStore.getInstance(type);\n    lastLoaded \u003d file.lastModified();\n    FileInputStream in \u003d new FileInputStream(file);\n    try {\n      ks.load(in, password.toCharArray());\n      LOG.debug(\"Loaded truststore \u0027\" + file + \"\u0027\");\n    } finally {\n      in.close();\n    }\n\n    TrustManagerFactory trustManagerFactory \u003d\n      TrustManagerFactory.getInstance(\"SunX509\");\n    trustManagerFactory.init(ks);\n    TrustManager[] trustManagers \u003d trustManagerFactory.getTrustManagers();\n    for (TrustManager trustManager1 : trustManagers) {\n      if (trustManager1 instanceof X509TrustManager) {\n        trustManager \u003d (X509TrustManager) trustManager1;\n        break;\n      }\n    }\n    return trustManager;\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/ssl/ReloadingX509TrustManager.java"
    }
  }
}