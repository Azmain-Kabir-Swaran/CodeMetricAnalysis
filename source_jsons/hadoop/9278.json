{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "FSNamesystem.java",
  "functionName": "getCorruptFiles",
  "functionId": "getCorruptFiles",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSNamesystem.java",
  "functionStartLine": 6706,
  "functionEndLine": 6708,
  "numCommitsSeen": 873,
  "timeTaken": 41543,
  "changeHistory": [
    "945b504c256d196c50634f61f3efe65a3b9a13a5",
    "f20dc0d5770d3876954faf0a6e8dcce6539ffc23",
    "f313516731d787f6be64c9406ca83d941d47ee99",
    "dc17bda4b677e30c02c2a9a053895a43e41f7a12"
  ],
  "changeHistoryShort": {
    "945b504c256d196c50634f61f3efe65a3b9a13a5": "Ybodychange",
    "f20dc0d5770d3876954faf0a6e8dcce6539ffc23": "Ybodychange",
    "f313516731d787f6be64c9406ca83d941d47ee99": "Ybodychange",
    "dc17bda4b677e30c02c2a9a053895a43e41f7a12": "Yintroduced"
  },
  "changeHistoryDetails": {
    "945b504c256d196c50634f61f3efe65a3b9a13a5": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-14326. Add CorruptFilesCount to JMX. Contributed by Danny Becker.\n",
      "commitDate": "05/03/19 5:39 PM",
      "commitName": "945b504c256d196c50634f61f3efe65a3b9a13a5",
      "commitAuthor": "Inigo Goiri",
      "commitDateOld": "20/02/19 2:28 PM",
      "commitNameOld": "1bea785020a538115b3e08f41ff88167033d2775",
      "commitAuthorOld": "Shweta Yakkali",
      "daysBetweenCommits": 13.13,
      "commitsBetweenForRepo": 136,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,20 +1,3 @@\n   public String getCorruptFiles() {\n-    List\u003cString\u003e list \u003d new ArrayList\u003cString\u003e();\n-    Collection\u003cFSNamesystem.CorruptFileBlockInfo\u003e corruptFileBlocks;\n-    try {\n-      corruptFileBlocks \u003d listCorruptFileBlocks(\"/\", null);\n-      int corruptFileCount \u003d corruptFileBlocks.size();\n-      if (corruptFileCount !\u003d 0) {\n-        for (FSNamesystem.CorruptFileBlockInfo c : corruptFileBlocks) {\n-          list.add(c.toString());\n-        }\n-      }\n-    } catch (StandbyException e) {\n-      if (LOG.isDebugEnabled()) {\n-        LOG.debug(\"Get corrupt file blocks returned error: \" + e.getMessage());\n-      }\n-    } catch (IOException e) {\n-      LOG.warn(\"Get corrupt file blocks returned error\", e);\n-    }\n-    return JSON.toString(list);\n+    return JSON.toString(getCorruptFilesList());\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public String getCorruptFiles() {\n    return JSON.toString(getCorruptFilesList());\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSNamesystem.java",
      "extendedDetails": {}
    },
    "f20dc0d5770d3876954faf0a6e8dcce6539ffc23": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-10571. Use Log.*(Object, Throwable) overload to log exceptions.\nContributed by Andras Bokor.\n",
      "commitDate": "14/02/18 8:20 AM",
      "commitName": "f20dc0d5770d3876954faf0a6e8dcce6539ffc23",
      "commitAuthor": "Steve Loughran",
      "commitDateOld": "07/02/18 9:40 AM",
      "commitNameOld": "01bd6ab18fa48f4c7cac1497905b52e547962599",
      "commitAuthorOld": "Brahma Reddy Battula",
      "daysBetweenCommits": 6.94,
      "commitsBetweenForRepo": 31,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,20 +1,20 @@\n   public String getCorruptFiles() {\n     List\u003cString\u003e list \u003d new ArrayList\u003cString\u003e();\n     Collection\u003cFSNamesystem.CorruptFileBlockInfo\u003e corruptFileBlocks;\n     try {\n       corruptFileBlocks \u003d listCorruptFileBlocks(\"/\", null);\n       int corruptFileCount \u003d corruptFileBlocks.size();\n       if (corruptFileCount !\u003d 0) {\n         for (FSNamesystem.CorruptFileBlockInfo c : corruptFileBlocks) {\n           list.add(c.toString());\n         }\n       }\n     } catch (StandbyException e) {\n       if (LOG.isDebugEnabled()) {\n         LOG.debug(\"Get corrupt file blocks returned error: \" + e.getMessage());\n       }\n     } catch (IOException e) {\n-      LOG.warn(\"Get corrupt file blocks returned error: \" + e.getMessage());\n+      LOG.warn(\"Get corrupt file blocks returned error\", e);\n     }\n     return JSON.toString(list);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public String getCorruptFiles() {\n    List\u003cString\u003e list \u003d new ArrayList\u003cString\u003e();\n    Collection\u003cFSNamesystem.CorruptFileBlockInfo\u003e corruptFileBlocks;\n    try {\n      corruptFileBlocks \u003d listCorruptFileBlocks(\"/\", null);\n      int corruptFileCount \u003d corruptFileBlocks.size();\n      if (corruptFileCount !\u003d 0) {\n        for (FSNamesystem.CorruptFileBlockInfo c : corruptFileBlocks) {\n          list.add(c.toString());\n        }\n      }\n    } catch (StandbyException e) {\n      if (LOG.isDebugEnabled()) {\n        LOG.debug(\"Get corrupt file blocks returned error: \" + e.getMessage());\n      }\n    } catch (IOException e) {\n      LOG.warn(\"Get corrupt file blocks returned error\", e);\n    }\n    return JSON.toString(list);\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSNamesystem.java",
      "extendedDetails": {}
    },
    "f313516731d787f6be64c9406ca83d941d47ee99": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-7452. skip StandbyException log for getCorruptFiles() (Contributed by Bramha Reddy Battula)\n",
      "commitDate": "21/02/16 7:51 PM",
      "commitName": "f313516731d787f6be64c9406ca83d941d47ee99",
      "commitAuthor": "Vinayakumar B",
      "commitDateOld": "12/02/16 11:07 AM",
      "commitNameOld": "972782d9568e0849484c027f27c1638ba50ec56e",
      "commitAuthorOld": "Jing Zhao",
      "daysBetweenCommits": 9.36,
      "commitsBetweenForRepo": 47,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,20 @@\n   public String getCorruptFiles() {\n     List\u003cString\u003e list \u003d new ArrayList\u003cString\u003e();\n     Collection\u003cFSNamesystem.CorruptFileBlockInfo\u003e corruptFileBlocks;\n     try {\n       corruptFileBlocks \u003d listCorruptFileBlocks(\"/\", null);\n       int corruptFileCount \u003d corruptFileBlocks.size();\n       if (corruptFileCount !\u003d 0) {\n         for (FSNamesystem.CorruptFileBlockInfo c : corruptFileBlocks) {\n           list.add(c.toString());\n         }\n       }\n+    } catch (StandbyException e) {\n+      if (LOG.isDebugEnabled()) {\n+        LOG.debug(\"Get corrupt file blocks returned error: \" + e.getMessage());\n+      }\n     } catch (IOException e) {\n       LOG.warn(\"Get corrupt file blocks returned error: \" + e.getMessage());\n     }\n     return JSON.toString(list);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public String getCorruptFiles() {\n    List\u003cString\u003e list \u003d new ArrayList\u003cString\u003e();\n    Collection\u003cFSNamesystem.CorruptFileBlockInfo\u003e corruptFileBlocks;\n    try {\n      corruptFileBlocks \u003d listCorruptFileBlocks(\"/\", null);\n      int corruptFileCount \u003d corruptFileBlocks.size();\n      if (corruptFileCount !\u003d 0) {\n        for (FSNamesystem.CorruptFileBlockInfo c : corruptFileBlocks) {\n          list.add(c.toString());\n        }\n      }\n    } catch (StandbyException e) {\n      if (LOG.isDebugEnabled()) {\n        LOG.debug(\"Get corrupt file blocks returned error: \" + e.getMessage());\n      }\n    } catch (IOException e) {\n      LOG.warn(\"Get corrupt file blocks returned error: \" + e.getMessage());\n    }\n    return JSON.toString(list);\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSNamesystem.java",
      "extendedDetails": {}
    },
    "dc17bda4b677e30c02c2a9a053895a43e41f7a12": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-5004. Add additional JMX bean for NameNode status data. Contributed by Trevor Lorimer.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1507530 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "26/07/13 4:59 PM",
      "commitName": "dc17bda4b677e30c02c2a9a053895a43e41f7a12",
      "commitAuthor": "Konstantin Boudnik",
      "diff": "@@ -0,0 +1,16 @@\n+  public String getCorruptFiles() {\n+    List\u003cString\u003e list \u003d new ArrayList\u003cString\u003e();\n+    Collection\u003cFSNamesystem.CorruptFileBlockInfo\u003e corruptFileBlocks;\n+    try {\n+      corruptFileBlocks \u003d listCorruptFileBlocks(\"/\", null);\n+      int corruptFileCount \u003d corruptFileBlocks.size();\n+      if (corruptFileCount !\u003d 0) {\n+        for (FSNamesystem.CorruptFileBlockInfo c : corruptFileBlocks) {\n+          list.add(c.toString());\n+        }\n+      }\n+    } catch (IOException e) {\n+      LOG.warn(\"Get corrupt file blocks returned error: \" + e.getMessage());\n+    }\n+    return JSON.toString(list);\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public String getCorruptFiles() {\n    List\u003cString\u003e list \u003d new ArrayList\u003cString\u003e();\n    Collection\u003cFSNamesystem.CorruptFileBlockInfo\u003e corruptFileBlocks;\n    try {\n      corruptFileBlocks \u003d listCorruptFileBlocks(\"/\", null);\n      int corruptFileCount \u003d corruptFileBlocks.size();\n      if (corruptFileCount !\u003d 0) {\n        for (FSNamesystem.CorruptFileBlockInfo c : corruptFileBlocks) {\n          list.add(c.toString());\n        }\n      }\n    } catch (IOException e) {\n      LOG.warn(\"Get corrupt file blocks returned error: \" + e.getMessage());\n    }\n    return JSON.toString(list);\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSNamesystem.java"
    }
  }
}