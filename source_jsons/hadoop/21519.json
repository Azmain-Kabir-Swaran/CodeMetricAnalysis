{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "TokenCache.java",
  "functionName": "mergeBinaryTokens",
  "functionId": "mergeBinaryTokens___creds-Credentials__conf-Configuration",
  "sourceFilePath": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/security/TokenCache.java",
  "functionStartLine": 152,
  "functionEndLine": 168,
  "numCommitsSeen": 19,
  "timeTaken": 1044,
  "changeHistory": [
    "52945a33cc3fcb3b961cce0e7e3ca01291f2a223",
    "cfc4ad76a325381119351092ac9e40544141b74a"
  ],
  "changeHistoryShort": {
    "52945a33cc3fcb3b961cce0e7e3ca01291f2a223": "Ybodychange",
    "cfc4ad76a325381119351092ac9e40544141b74a": "Yintroduced"
  },
  "changeHistoryDetails": {
    "52945a33cc3fcb3b961cce0e7e3ca01291f2a223": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-6086. mapreduce.job.credentials.binary should allow all URIs. (Zhihai Xu via kasha)\n",
      "commitDate": "18/09/14 3:46 PM",
      "commitName": "52945a33cc3fcb3b961cce0e7e3ca01291f2a223",
      "commitAuthor": "Karthik Kambatla",
      "commitDateOld": "24/07/13 3:31 PM",
      "commitNameOld": "c43c763151369f3c7d98c706c405e7c55fea61cf",
      "commitAuthorOld": "Alejandro Abdelnur",
      "daysBetweenCommits": 421.01,
      "commitsBetweenForRepo": 2980,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,17 @@\n   private static void mergeBinaryTokens(Credentials creds, Configuration conf) {\n     String binaryTokenFilename \u003d\n         conf.get(MRJobConfig.MAPREDUCE_JOB_CREDENTIALS_BINARY);\n     if (binaryTokenFilename !\u003d null) {\n       Credentials binary;\n       try {\n         binary \u003d Credentials.readTokenStorageFile(\n-            new Path(\"file:///\" +  binaryTokenFilename), conf);\n+            FileSystem.getLocal(conf).makeQualified(\n+                new Path(binaryTokenFilename)),\n+            conf);\n       } catch (IOException e) {\n         throw new RuntimeException(e);\n       }\n       // supplement existing tokens with the tokens in the binary file\n       creds.mergeAll(binary);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private static void mergeBinaryTokens(Credentials creds, Configuration conf) {\n    String binaryTokenFilename \u003d\n        conf.get(MRJobConfig.MAPREDUCE_JOB_CREDENTIALS_BINARY);\n    if (binaryTokenFilename !\u003d null) {\n      Credentials binary;\n      try {\n        binary \u003d Credentials.readTokenStorageFile(\n            FileSystem.getLocal(conf).makeQualified(\n                new Path(binaryTokenFilename)),\n            conf);\n      } catch (IOException e) {\n        throw new RuntimeException(e);\n      }\n      // supplement existing tokens with the tokens in the binary file\n      creds.mergeAll(binary);\n    }\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/security/TokenCache.java",
      "extendedDetails": {}
    },
    "cfc4ad76a325381119351092ac9e40544141b74a": {
      "type": "Yintroduced",
      "commitMessage": "MAPREDUCE-3849. Change TokenCache\u0027s reading of the binary token file  (Daryn Sharp via bobby)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1245099 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "16/02/12 9:49 AM",
      "commitName": "cfc4ad76a325381119351092ac9e40544141b74a",
      "commitAuthor": "Robert Joseph Evans",
      "diff": "@@ -0,0 +1,15 @@\n+  private static void mergeBinaryTokens(Credentials creds, Configuration conf) {\n+    String binaryTokenFilename \u003d\n+        conf.get(MRJobConfig.MAPREDUCE_JOB_CREDENTIALS_BINARY);\n+    if (binaryTokenFilename !\u003d null) {\n+      Credentials binary;\n+      try {\n+        binary \u003d Credentials.readTokenStorageFile(\n+            new Path(\"file:///\" +  binaryTokenFilename), conf);\n+      } catch (IOException e) {\n+        throw new RuntimeException(e);\n+      }\n+      // supplement existing tokens with the tokens in the binary file\n+      creds.mergeAll(binary);\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private static void mergeBinaryTokens(Credentials creds, Configuration conf) {\n    String binaryTokenFilename \u003d\n        conf.get(MRJobConfig.MAPREDUCE_JOB_CREDENTIALS_BINARY);\n    if (binaryTokenFilename !\u003d null) {\n      Credentials binary;\n      try {\n        binary \u003d Credentials.readTokenStorageFile(\n            new Path(\"file:///\" +  binaryTokenFilename), conf);\n      } catch (IOException e) {\n        throw new RuntimeException(e);\n      }\n      // supplement existing tokens with the tokens in the binary file\n      creds.mergeAll(binary);\n    }\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/security/TokenCache.java"
    }
  }
}