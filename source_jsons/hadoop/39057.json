{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "ContainerUpdateContext.java",
  "functionName": "getResourceToIncrease",
  "functionId": "getResourceToIncrease___updateReq-UpdateContainerRequest__rmContainer-RMContainer",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/ContainerUpdateContext.java",
  "functionStartLine": 198,
  "functionEndLine": 215,
  "numCommitsSeen": 7,
  "timeTaken": 2552,
  "changeHistory": [
    "eac6b4c35c50e555c2f1b5f913bb2c4d839f1ff4",
    "0a55bd841ec0f2eb89a0383f4c589526e8b138d4"
  ],
  "changeHistoryShort": {
    "eac6b4c35c50e555c2f1b5f913bb2c4d839f1ff4": "Ybodychange",
    "0a55bd841ec0f2eb89a0383f4c589526e8b138d4": "Yintroduced"
  },
  "changeHistoryDetails": {
    "eac6b4c35c50e555c2f1b5f913bb2c4d839f1ff4": {
      "type": "Ybodychange",
      "commitMessage": "YARN-6216. Unify Container Resizing code paths with Container Updates making it scheduler agnostic. (Arun Suresh via wangda)\n",
      "commitDate": "28/02/17 10:35 AM",
      "commitName": "eac6b4c35c50e555c2f1b5f913bb2c4d839f1ff4",
      "commitAuthor": "Wangda Tan",
      "commitDateOld": "05/01/17 10:31 AM",
      "commitNameOld": "0a55bd841ec0f2eb89a0383f4c589526e8b138d4",
      "commitAuthorOld": "Wangda Tan",
      "daysBetweenCommits": 54.0,
      "commitsBetweenForRepo": 277,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,12 +1,18 @@\n   private Resource getResourceToIncrease(UpdateContainerRequest updateReq,\n       RMContainer rmContainer) {\n     if (updateReq.getContainerUpdateType() \u003d\u003d\n         ContainerUpdateType.PROMOTE_EXECUTION_TYPE) {\n       return rmContainer.getContainer().getResource();\n     }\n-    // TODO: Fix this for container increase..\n-    //       This has to equal the Resources in excess of fitsIn()\n-    //       for container increase and is equal to the container total\n-    //       resource for Promotion.\n+    if (updateReq.getContainerUpdateType() \u003d\u003d\n+        ContainerUpdateType.INCREASE_RESOURCE) {\n+      //       This has to equal the Resources in excess of fitsIn()\n+      //       for container increase and is equal to the container total\n+      //       resource for Promotion.\n+      Resource maxCap \u003d Resources.componentwiseMax(updateReq.getCapability(),\n+          rmContainer.getContainer().getResource());\n+      return Resources.add(maxCap,\n+          Resources.negate(rmContainer.getContainer().getResource()));\n+    }\n     return null;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private Resource getResourceToIncrease(UpdateContainerRequest updateReq,\n      RMContainer rmContainer) {\n    if (updateReq.getContainerUpdateType() \u003d\u003d\n        ContainerUpdateType.PROMOTE_EXECUTION_TYPE) {\n      return rmContainer.getContainer().getResource();\n    }\n    if (updateReq.getContainerUpdateType() \u003d\u003d\n        ContainerUpdateType.INCREASE_RESOURCE) {\n      //       This has to equal the Resources in excess of fitsIn()\n      //       for container increase and is equal to the container total\n      //       resource for Promotion.\n      Resource maxCap \u003d Resources.componentwiseMax(updateReq.getCapability(),\n          rmContainer.getContainer().getResource());\n      return Resources.add(maxCap,\n          Resources.negate(rmContainer.getContainer().getResource()));\n    }\n    return null;\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/ContainerUpdateContext.java",
      "extendedDetails": {}
    },
    "0a55bd841ec0f2eb89a0383f4c589526e8b138d4": {
      "type": "Yintroduced",
      "commitMessage": "YARN-5959. RM changes to support change of container ExecutionType. (Arun Suresh via wangda)\n",
      "commitDate": "05/01/17 10:31 AM",
      "commitName": "0a55bd841ec0f2eb89a0383f4c589526e8b138d4",
      "commitAuthor": "Wangda Tan",
      "diff": "@@ -0,0 +1,12 @@\n+  private Resource getResourceToIncrease(UpdateContainerRequest updateReq,\n+      RMContainer rmContainer) {\n+    if (updateReq.getContainerUpdateType() \u003d\u003d\n+        ContainerUpdateType.PROMOTE_EXECUTION_TYPE) {\n+      return rmContainer.getContainer().getResource();\n+    }\n+    // TODO: Fix this for container increase..\n+    //       This has to equal the Resources in excess of fitsIn()\n+    //       for container increase and is equal to the container total\n+    //       resource for Promotion.\n+    return null;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private Resource getResourceToIncrease(UpdateContainerRequest updateReq,\n      RMContainer rmContainer) {\n    if (updateReq.getContainerUpdateType() \u003d\u003d\n        ContainerUpdateType.PROMOTE_EXECUTION_TYPE) {\n      return rmContainer.getContainer().getResource();\n    }\n    // TODO: Fix this for container increase..\n    //       This has to equal the Resources in excess of fitsIn()\n    //       for container increase and is equal to the container total\n    //       resource for Promotion.\n    return null;\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/ContainerUpdateContext.java"
    }
  }
}