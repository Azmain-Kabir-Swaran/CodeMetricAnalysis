{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "RouterWebHdfsMethods.java",
  "functionName": "post",
  "functionId": "post___ugi-UserGroupInformation(modifiers-final)__delegation-DelegationParam(modifiers-final)__username-UserParam(modifiers-final)__doAsUser-DoAsParam(modifiers-final)__fullpath-String(modifiers-final)__op-PostOpParam(modifiers-final)__concatSrcs-ConcatSourcesParam(modifiers-final)__bufferSize-BufferSizeParam(modifiers-final)__excludeDatanodes-ExcludeDatanodesParam(modifiers-final)__newLength-NewLengthParam(modifiers-final)__noRedirectParam-NoRedirectParam(modifiers-final)",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs-rbf/src/main/java/org/apache/hadoop/hdfs/server/federation/router/RouterWebHdfsMethods.java",
  "functionStartLine": 278,
  "functionEndLine": 317,
  "numCommitsSeen": 6,
  "timeTaken": 792,
  "changeHistory": [
    "6e31a090842f8aeedb331b653b075499f8df6c60"
  ],
  "changeHistoryShort": {
    "6e31a090842f8aeedb331b653b075499f8df6c60": "Yintroduced"
  },
  "changeHistoryDetails": {
    "6e31a090842f8aeedb331b653b075499f8df6c60": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-12512. RBF: Add WebHDFS.\n",
      "commitDate": "23/03/18 8:32 AM",
      "commitName": "6e31a090842f8aeedb331b653b075499f8df6c60",
      "commitAuthor": "weiy",
      "diff": "@@ -0,0 +1,40 @@\n+  protected Response post(\n+      final UserGroupInformation ugi,\n+      final DelegationParam delegation,\n+      final UserParam username,\n+      final DoAsParam doAsUser,\n+      final String fullpath,\n+      final PostOpParam op,\n+      final ConcatSourcesParam concatSrcs,\n+      final BufferSizeParam bufferSize,\n+      final ExcludeDatanodesParam excludeDatanodes,\n+      final NewLengthParam newLength,\n+      final NoRedirectParam noRedirectParam\n+  ) throws IOException, URISyntaxException {\n+    switch(op.getValue()) {\n+    case APPEND:\n+    {\n+      final Router router \u003d getRouter();\n+      final URI uri \u003d redirectURI(router, ugi, delegation, username,\n+          doAsUser, fullpath, op.getValue(), -1L,\n+          excludeDatanodes.getValue(), bufferSize);\n+      if (!noRedirectParam.getValue()) {\n+        return Response.temporaryRedirect(uri)\n+            .type(MediaType.APPLICATION_OCTET_STREAM).build();\n+      } else {\n+        final String js \u003d JsonUtil.toJsonString(\"Location\", uri);\n+        return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n+      }\n+    }\n+    case CONCAT:\n+    case TRUNCATE:\n+    case UNSETSTORAGEPOLICY:\n+    {\n+      return super.post(ugi, delegation, username, doAsUser, fullpath, op,\n+          concatSrcs, bufferSize, excludeDatanodes, newLength,\n+          noRedirectParam);\n+    }\n+    default:\n+      throw new UnsupportedOperationException(op + \" is not supported\");\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  protected Response post(\n      final UserGroupInformation ugi,\n      final DelegationParam delegation,\n      final UserParam username,\n      final DoAsParam doAsUser,\n      final String fullpath,\n      final PostOpParam op,\n      final ConcatSourcesParam concatSrcs,\n      final BufferSizeParam bufferSize,\n      final ExcludeDatanodesParam excludeDatanodes,\n      final NewLengthParam newLength,\n      final NoRedirectParam noRedirectParam\n  ) throws IOException, URISyntaxException {\n    switch(op.getValue()) {\n    case APPEND:\n    {\n      final Router router \u003d getRouter();\n      final URI uri \u003d redirectURI(router, ugi, delegation, username,\n          doAsUser, fullpath, op.getValue(), -1L,\n          excludeDatanodes.getValue(), bufferSize);\n      if (!noRedirectParam.getValue()) {\n        return Response.temporaryRedirect(uri)\n            .type(MediaType.APPLICATION_OCTET_STREAM).build();\n      } else {\n        final String js \u003d JsonUtil.toJsonString(\"Location\", uri);\n        return Response.ok(js).type(MediaType.APPLICATION_JSON).build();\n      }\n    }\n    case CONCAT:\n    case TRUNCATE:\n    case UNSETSTORAGEPOLICY:\n    {\n      return super.post(ugi, delegation, username, doAsUser, fullpath, op,\n          concatSrcs, bufferSize, excludeDatanodes, newLength,\n          noRedirectParam);\n    }\n    default:\n      throw new UnsupportedOperationException(op + \" is not supported\");\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-rbf/src/main/java/org/apache/hadoop/hdfs/server/federation/router/RouterWebHdfsMethods.java"
    }
  }
}