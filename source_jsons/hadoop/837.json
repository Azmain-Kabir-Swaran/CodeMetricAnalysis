{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "DeadNodeDetector.java",
  "functionName": "run",
  "functionId": "run",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DeadNodeDetector.java",
  "functionStartLine": 350,
  "functionEndLine": 382,
  "numCommitsSeen": 5,
  "timeTaken": 2147,
  "changeHistory": [
    "97b797c314fcc6fe389a7e5635a19b4fc0895d6b",
    "c8bef4d6a6d7d5affd00cff6ea4a2e2ef778050e",
    "9b6906fe914829f50076c2291dba59d425475d7b",
    "b3119b9ab60a19d624db476c4e1c53410870c7a6"
  ],
  "changeHistoryShort": {
    "97b797c314fcc6fe389a7e5635a19b4fc0895d6b": "Ybodychange",
    "c8bef4d6a6d7d5affd00cff6ea4a2e2ef778050e": "Ybodychange",
    "9b6906fe914829f50076c2291dba59d425475d7b": "Ybodychange",
    "b3119b9ab60a19d624db476c4e1c53410870c7a6": "Yintroduced"
  },
  "changeHistoryDetails": {
    "97b797c314fcc6fe389a7e5635a19b4fc0895d6b": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-15149. TestDeadNodeDetection test cases time-out. Contributed by Lisheng Sun.\n",
      "commitDate": "28/02/20 6:47 PM",
      "commitName": "97b797c314fcc6fe389a7e5635a19b4fc0895d6b",
      "commitAuthor": "Inigo Goiri",
      "commitDateOld": "21/02/20 4:36 PM",
      "commitNameOld": "ed70c115a8f5303766122ede97b4bb57f22754c8",
      "commitAuthorOld": "Inigo Goiri",
      "daysBetweenCommits": 7.09,
      "commitsBetweenForRepo": 35,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,10 +1,10 @@\n     public void run() {\n-      while (true) {\n+      while (!Thread.currentThread().isInterrupted()) {\n         deadNodeDetector.scheduleProbe(type);\n         if (type \u003d\u003d ProbeType.CHECK_SUSPECT) {\n           probeSleep(deadNodeDetector.suspectNodeDetectInterval);\n         } else {\n           probeSleep(deadNodeDetector.deadNodeDetectInterval);\n         }\n       }\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public void run() {\n      while (!Thread.currentThread().isInterrupted()) {\n        deadNodeDetector.scheduleProbe(type);\n        if (type \u003d\u003d ProbeType.CHECK_SUSPECT) {\n          probeSleep(deadNodeDetector.suspectNodeDetectInterval);\n        } else {\n          probeSleep(deadNodeDetector.deadNodeDetectInterval);\n        }\n      }\n    }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DeadNodeDetector.java",
      "extendedDetails": {}
    },
    "c8bef4d6a6d7d5affd00cff6ea4a2e2ef778050e": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-14649. Add suspect probe for DeadNodeDetector. Contributed by Lisheng Sun.\n",
      "commitDate": "26/11/19 6:57 PM",
      "commitName": "c8bef4d6a6d7d5affd00cff6ea4a2e2ef778050e",
      "commitAuthor": "Yiqun Lin",
      "commitDateOld": "21/11/19 6:53 PM",
      "commitNameOld": "9b6906fe914829f50076c2291dba59d425475d7b",
      "commitAuthorOld": "Yiqun Lin",
      "daysBetweenCommits": 5.0,
      "commitsBetweenForRepo": 17,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,6 +1,10 @@\n     public void run() {\n       while (true) {\n         deadNodeDetector.scheduleProbe(type);\n-        probeSleep(deadNodeDetector.deadNodeDetectInterval);\n+        if (type \u003d\u003d ProbeType.CHECK_SUSPECT) {\n+          probeSleep(deadNodeDetector.suspectNodeDetectInterval);\n+        } else {\n+          probeSleep(deadNodeDetector.deadNodeDetectInterval);\n+        }\n       }\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public void run() {\n      while (true) {\n        deadNodeDetector.scheduleProbe(type);\n        if (type \u003d\u003d ProbeType.CHECK_SUSPECT) {\n          probeSleep(deadNodeDetector.suspectNodeDetectInterval);\n        } else {\n          probeSleep(deadNodeDetector.deadNodeDetectInterval);\n        }\n      }\n    }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DeadNodeDetector.java",
      "extendedDetails": {}
    },
    "9b6906fe914829f50076c2291dba59d425475d7b": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-14651. DeadNodeDetector checks dead node periodically. Contributed by Lisheng Sun.\n",
      "commitDate": "21/11/19 6:53 PM",
      "commitName": "9b6906fe914829f50076c2291dba59d425475d7b",
      "commitAuthor": "Yiqun Lin",
      "commitDateOld": "15/11/19 7:32 PM",
      "commitNameOld": "b3119b9ab60a19d624db476c4e1c53410870c7a6",
      "commitAuthorOld": "Yiqun Lin",
      "daysBetweenCommits": 5.97,
      "commitsBetweenForRepo": 35,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,23 +1,6 @@\n-  public void run() {\n-    while (true) {\n-      clearAndGetDetectedDeadNodes();\n-      LOG.debug(\"Current detector state {}, the detected nodes: {}.\", state,\n-          deadNodes.values());\n-      switch (state) {\n-      case INIT:\n-        init();\n-        break;\n-      case IDLE:\n-        idle();\n-        break;\n-      case ERROR:\n-        try {\n-          Thread.sleep(ERROR_SLEEP_MS);\n-        } catch (InterruptedException e) {\n-        }\n-        return;\n-      default:\n-        break;\n+    public void run() {\n+      while (true) {\n+        deadNodeDetector.scheduleProbe(type);\n+        probeSleep(deadNodeDetector.deadNodeDetectInterval);\n       }\n-    }\n-  }\n\\ No newline at end of file\n+    }\n\\ No newline at end of file\n",
      "actualSource": "    public void run() {\n      while (true) {\n        deadNodeDetector.scheduleProbe(type);\n        probeSleep(deadNodeDetector.deadNodeDetectInterval);\n      }\n    }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DeadNodeDetector.java",
      "extendedDetails": {}
    },
    "b3119b9ab60a19d624db476c4e1c53410870c7a6": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-14648. Implement DeadNodeDetector basic model. Contributed by Lisheng Sun.\n",
      "commitDate": "15/11/19 7:32 PM",
      "commitName": "b3119b9ab60a19d624db476c4e1c53410870c7a6",
      "commitAuthor": "Yiqun Lin",
      "diff": "@@ -0,0 +1,23 @@\n+  public void run() {\n+    while (true) {\n+      clearAndGetDetectedDeadNodes();\n+      LOG.debug(\"Current detector state {}, the detected nodes: {}.\", state,\n+          deadNodes.values());\n+      switch (state) {\n+      case INIT:\n+        init();\n+        break;\n+      case IDLE:\n+        idle();\n+        break;\n+      case ERROR:\n+        try {\n+          Thread.sleep(ERROR_SLEEP_MS);\n+        } catch (InterruptedException e) {\n+        }\n+        return;\n+      default:\n+        break;\n+      }\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public void run() {\n    while (true) {\n      clearAndGetDetectedDeadNodes();\n      LOG.debug(\"Current detector state {}, the detected nodes: {}.\", state,\n          deadNodes.values());\n      switch (state) {\n      case INIT:\n        init();\n        break;\n      case IDLE:\n        idle();\n        break;\n      case ERROR:\n        try {\n          Thread.sleep(ERROR_SLEEP_MS);\n        } catch (InterruptedException e) {\n        }\n        return;\n      default:\n        break;\n      }\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/DeadNodeDetector.java"
    }
  }
}