{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "FileDiffList.java",
  "functionName": "saveSelf2Snapshot",
  "functionId": "saveSelf2Snapshot___latestSnapshotId-int__iNodeFile-INodeFile__snapshotCopy-INodeFileAttributes__withBlocks-boolean",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/FileDiffList.java",
  "functionStartLine": 49,
  "functionEndLine": 58,
  "numCommitsSeen": 23,
  "timeTaken": 3728,
  "changeHistory": [
    "7e091de1366f4b57b5433bc19d738199dc05313d",
    "9f2f583f401189c3f4a2687795a9e3e0b288322b",
    "b2c85db86c9a62b0a03ee87547265077f664970a",
    "8cb473124c1cf1c6f68ead7bde06558ebf7ce47e",
    "08ac06283a3e9bf0d49d873823aabd419b08e41f"
  ],
  "changeHistoryShort": {
    "7e091de1366f4b57b5433bc19d738199dc05313d": "Ybodychange",
    "9f2f583f401189c3f4a2687795a9e3e0b288322b": "Ybodychange",
    "b2c85db86c9a62b0a03ee87547265077f664970a": "Ybodychange",
    "8cb473124c1cf1c6f68ead7bde06558ebf7ce47e": "Yexceptionschange",
    "08ac06283a3e9bf0d49d873823aabd419b08e41f": "Yintroduced"
  },
  "changeHistoryDetails": {
    "7e091de1366f4b57b5433bc19d738199dc05313d": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-8058. Erasure coding: use BlockInfo[] for both striped and contiguous blocks in INodeFile. Contributed by Zhe Zhang and Yi Liu.\n",
      "commitDate": "15/07/15 9:49 AM",
      "commitName": "7e091de1366f4b57b5433bc19d738199dc05313d",
      "commitAuthor": "Zhe Zhang",
      "commitDateOld": "26/05/15 11:32 AM",
      "commitNameOld": "11585883a9eb30ba080b9aa49dba42cb0a797d75",
      "commitAuthorOld": "Jing Zhao",
      "daysBetweenCommits": 49.93,
      "commitsBetweenForRepo": 160,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,10 +1,10 @@\n   public void saveSelf2Snapshot(int latestSnapshotId, INodeFile iNodeFile,\n       INodeFileAttributes snapshotCopy, boolean withBlocks) {\n     final FileDiff diff \u003d\n         super.saveSelf2Snapshot(latestSnapshotId, iNodeFile, snapshotCopy);\n     if (withBlocks) {  // Store blocks if this is the first update\n-      BlockInfoContiguous[] blks \u003d iNodeFile.getContiguousBlocks();\n+      BlockInfo[] blks \u003d iNodeFile.getBlocks();\n       assert blks !\u003d null;\n       diff.setBlocks(blks);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void saveSelf2Snapshot(int latestSnapshotId, INodeFile iNodeFile,\n      INodeFileAttributes snapshotCopy, boolean withBlocks) {\n    final FileDiff diff \u003d\n        super.saveSelf2Snapshot(latestSnapshotId, iNodeFile, snapshotCopy);\n    if (withBlocks) {  // Store blocks if this is the first update\n      BlockInfo[] blks \u003d iNodeFile.getBlocks();\n      assert blks !\u003d null;\n      diff.setBlocks(blks);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/FileDiffList.java",
      "extendedDetails": {}
    },
    "9f2f583f401189c3f4a2687795a9e3e0b288322b": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-7749. Erasure Coding: Add striped block support in INodeFile. Contributed by Jing Zhao.\n",
      "commitDate": "26/05/15 11:07 AM",
      "commitName": "9f2f583f401189c3f4a2687795a9e3e0b288322b",
      "commitAuthor": "Jing Zhao",
      "commitDateOld": "13/05/15 9:50 PM",
      "commitNameOld": "b2c85db86c9a62b0a03ee87547265077f664970a",
      "commitAuthorOld": "Haohui Mai",
      "daysBetweenCommits": 12.55,
      "commitsBetweenForRepo": 94,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,8 +1,10 @@\n   public void saveSelf2Snapshot(int latestSnapshotId, INodeFile iNodeFile,\n       INodeFileAttributes snapshotCopy, boolean withBlocks) {\n     final FileDiff diff \u003d\n         super.saveSelf2Snapshot(latestSnapshotId, iNodeFile, snapshotCopy);\n     if (withBlocks) {  // Store blocks if this is the first update\n-      diff.setBlocks(iNodeFile.getBlocks());\n+      BlockInfoContiguous[] blks \u003d iNodeFile.getContiguousBlocks();\n+      assert blks !\u003d null;\n+      diff.setBlocks(blks);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void saveSelf2Snapshot(int latestSnapshotId, INodeFile iNodeFile,\n      INodeFileAttributes snapshotCopy, boolean withBlocks) {\n    final FileDiff diff \u003d\n        super.saveSelf2Snapshot(latestSnapshotId, iNodeFile, snapshotCopy);\n    if (withBlocks) {  // Store blocks if this is the first update\n      BlockInfoContiguous[] blks \u003d iNodeFile.getContiguousBlocks();\n      assert blks !\u003d null;\n      diff.setBlocks(blks);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/FileDiffList.java",
      "extendedDetails": {}
    },
    "b2c85db86c9a62b0a03ee87547265077f664970a": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-7728. Avoid updating quota usage while loading edits. Contributed by Jing Zhao.\n",
      "commitDate": "13/05/15 9:50 PM",
      "commitName": "b2c85db86c9a62b0a03ee87547265077f664970a",
      "commitAuthor": "Haohui Mai",
      "commitDateOld": "09/05/15 10:51 PM",
      "commitNameOld": "4536399d47f6c061e149e2504600804a0f1e093d",
      "commitAuthorOld": "Haohui Mai",
      "daysBetweenCommits": 3.96,
      "commitsBetweenForRepo": 43,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,7 +1,8 @@\n   public void saveSelf2Snapshot(int latestSnapshotId, INodeFile iNodeFile,\n       INodeFileAttributes snapshotCopy, boolean withBlocks) {\n     final FileDiff diff \u003d\n         super.saveSelf2Snapshot(latestSnapshotId, iNodeFile, snapshotCopy);\n-    if(withBlocks)  // Store blocks if this is the first update\n+    if (withBlocks) {  // Store blocks if this is the first update\n       diff.setBlocks(iNodeFile.getBlocks());\n+    }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void saveSelf2Snapshot(int latestSnapshotId, INodeFile iNodeFile,\n      INodeFileAttributes snapshotCopy, boolean withBlocks) {\n    final FileDiff diff \u003d\n        super.saveSelf2Snapshot(latestSnapshotId, iNodeFile, snapshotCopy);\n    if (withBlocks) {  // Store blocks if this is the first update\n      diff.setBlocks(iNodeFile.getBlocks());\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/FileDiffList.java",
      "extendedDetails": {}
    },
    "8cb473124c1cf1c6f68ead7bde06558ebf7ce47e": {
      "type": "Yexceptionschange",
      "commitMessage": "HDFS-6651. Deletion failure can leak inodes permanently. Contributed by Jing Zhao.\n",
      "commitDate": "02/02/15 4:32 PM",
      "commitName": "8cb473124c1cf1c6f68ead7bde06558ebf7ce47e",
      "commitAuthor": "Haohui Mai",
      "commitDateOld": "13/01/15 12:24 AM",
      "commitNameOld": "08ac06283a3e9bf0d49d873823aabd419b08e41f",
      "commitAuthorOld": "Konstantin V Shvachko",
      "daysBetweenCommits": 20.67,
      "commitsBetweenForRepo": 149,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,8 +1,7 @@\n   public void saveSelf2Snapshot(int latestSnapshotId, INodeFile iNodeFile,\n-      INodeFileAttributes snapshotCopy, boolean withBlocks)\n-          throws QuotaExceededException {\n+      INodeFileAttributes snapshotCopy, boolean withBlocks) {\n     final FileDiff diff \u003d\n         super.saveSelf2Snapshot(latestSnapshotId, iNodeFile, snapshotCopy);\n     if(withBlocks)  // Store blocks if this is the first update\n       diff.setBlocks(iNodeFile.getBlocks());\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void saveSelf2Snapshot(int latestSnapshotId, INodeFile iNodeFile,\n      INodeFileAttributes snapshotCopy, boolean withBlocks) {\n    final FileDiff diff \u003d\n        super.saveSelf2Snapshot(latestSnapshotId, iNodeFile, snapshotCopy);\n    if(withBlocks)  // Store blocks if this is the first update\n      diff.setBlocks(iNodeFile.getBlocks());\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/FileDiffList.java",
      "extendedDetails": {
        "oldValue": "[QuotaExceededException]",
        "newValue": "[]"
      }
    },
    "08ac06283a3e9bf0d49d873823aabd419b08e41f": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-7056. Snapshot support for truncate. Contributed by Konstantin Shvachko and Plamen Jeliazkov.",
      "commitDate": "13/01/15 12:24 AM",
      "commitName": "08ac06283a3e9bf0d49d873823aabd419b08e41f",
      "commitAuthor": "Konstantin V Shvachko",
      "diff": "@@ -0,0 +1,8 @@\n+  public void saveSelf2Snapshot(int latestSnapshotId, INodeFile iNodeFile,\n+      INodeFileAttributes snapshotCopy, boolean withBlocks)\n+          throws QuotaExceededException {\n+    final FileDiff diff \u003d\n+        super.saveSelf2Snapshot(latestSnapshotId, iNodeFile, snapshotCopy);\n+    if(withBlocks)  // Store blocks if this is the first update\n+      diff.setBlocks(iNodeFile.getBlocks());\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public void saveSelf2Snapshot(int latestSnapshotId, INodeFile iNodeFile,\n      INodeFileAttributes snapshotCopy, boolean withBlocks)\n          throws QuotaExceededException {\n    final FileDiff diff \u003d\n        super.saveSelf2Snapshot(latestSnapshotId, iNodeFile, snapshotCopy);\n    if(withBlocks)  // Store blocks if this is the first update\n      diff.setBlocks(iNodeFile.getBlocks());\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/FileDiffList.java"
    }
  }
}