{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "FSImageLoader.java",
  "functionName": "getAclStatus",
  "functionId": "getAclStatus___path-String",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/tools/offlineImageViewer/FSImageLoader.java",
  "functionStartLine": 486,
  "functionEndLine": 496,
  "numCommitsSeen": 22,
  "timeTaken": 1290,
  "changeHistory": [
    "ffe942b82c1208bc7b22899da3a233944cb5ab52",
    "bce5a92c54cf2fc6162383eac5af27a8b12b7b51"
  ],
  "changeHistoryShort": {
    "ffe942b82c1208bc7b22899da3a233944cb5ab52": "Ybodychange",
    "bce5a92c54cf2fc6162383eac5af27a8b12b7b51": "Yintroduced"
  },
  "changeHistoryDetails": {
    "ffe942b82c1208bc7b22899da3a233944cb5ab52": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-7384. getfacl command and getAclStatus output should be in sync. Contributed by Vinayakumar B.\n",
      "commitDate": "08/12/14 10:23 AM",
      "commitName": "ffe942b82c1208bc7b22899da3a233944cb5ab52",
      "commitAuthor": "cnauroth",
      "commitDateOld": "08/11/14 3:39 PM",
      "commitNameOld": "6caa8100d5d2547e34356dc279fd5e65b81a925a",
      "commitAuthorOld": "Arun C. Murthy",
      "daysBetweenCommits": 29.78,
      "commitsBetweenForRepo": 192,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,23 +1,11 @@\n   String getAclStatus(String path) throws IOException {\n-    StringBuilder sb \u003d new StringBuilder();\n-    List\u003cAclEntry\u003e aclEntryList \u003d getAclEntryList(path);\n     PermissionStatus p \u003d getPermissionStatus(path);\n-    sb.append(\"{\\\"AclStatus\\\":{\\\"entries\\\":[\");\n-    int i \u003d 0;\n-    for (AclEntry aclEntry : aclEntryList) {\n-      if (i++ !\u003d 0) {\n-        sb.append(\u0027,\u0027);\n-      }\n-      sb.append(\u0027\"\u0027);\n-      sb.append(aclEntry.toString());\n-      sb.append(\u0027\"\u0027);\n-    }\n-    sb.append(\"],\\\"group\\\": \\\"\");\n-    sb.append(p.getGroupName());\n-    sb.append(\"\\\",\\\"owner\\\": \\\"\");\n-    sb.append(p.getUserName());\n-    sb.append(\"\\\",\\\"stickyBit\\\": \");\n-    sb.append(p.getPermission().getStickyBit());\n-    sb.append(\"}}\\n\");\n-    return sb.toString();\n+    List\u003cAclEntry\u003e aclEntryList \u003d getAclEntryList(path);\n+    FsPermission permission \u003d p.getPermission();\n+    AclStatus.Builder builder \u003d new AclStatus.Builder();\n+    builder.owner(p.getUserName()).group(p.getGroupName())\n+        .addEntries(aclEntryList).setPermission(permission)\n+        .stickyBit(permission.getStickyBit());\n+    AclStatus aclStatus \u003d builder.build();\n+    return JsonUtil.toJsonString(aclStatus);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  String getAclStatus(String path) throws IOException {\n    PermissionStatus p \u003d getPermissionStatus(path);\n    List\u003cAclEntry\u003e aclEntryList \u003d getAclEntryList(path);\n    FsPermission permission \u003d p.getPermission();\n    AclStatus.Builder builder \u003d new AclStatus.Builder();\n    builder.owner(p.getUserName()).group(p.getGroupName())\n        .addEntries(aclEntryList).setPermission(permission)\n        .stickyBit(permission.getStickyBit());\n    AclStatus aclStatus \u003d builder.build();\n    return JsonUtil.toJsonString(aclStatus);\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/tools/offlineImageViewer/FSImageLoader.java",
      "extendedDetails": {}
    },
    "bce5a92c54cf2fc6162383eac5af27a8b12b7b51": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-6210. Support GETACLSTATUS operation in WebImageViewer. Contributed by Akira Ajisaka.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1589933 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/04/14 10:55 PM",
      "commitName": "bce5a92c54cf2fc6162383eac5af27a8b12b7b51",
      "commitAuthor": "Haohui Mai",
      "diff": "@@ -0,0 +1,23 @@\n+  String getAclStatus(String path) throws IOException {\n+    StringBuilder sb \u003d new StringBuilder();\n+    List\u003cAclEntry\u003e aclEntryList \u003d getAclEntryList(path);\n+    PermissionStatus p \u003d getPermissionStatus(path);\n+    sb.append(\"{\\\"AclStatus\\\":{\\\"entries\\\":[\");\n+    int i \u003d 0;\n+    for (AclEntry aclEntry : aclEntryList) {\n+      if (i++ !\u003d 0) {\n+        sb.append(\u0027,\u0027);\n+      }\n+      sb.append(\u0027\"\u0027);\n+      sb.append(aclEntry.toString());\n+      sb.append(\u0027\"\u0027);\n+    }\n+    sb.append(\"],\\\"group\\\": \\\"\");\n+    sb.append(p.getGroupName());\n+    sb.append(\"\\\",\\\"owner\\\": \\\"\");\n+    sb.append(p.getUserName());\n+    sb.append(\"\\\",\\\"stickyBit\\\": \");\n+    sb.append(p.getPermission().getStickyBit());\n+    sb.append(\"}}\\n\");\n+    return sb.toString();\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  String getAclStatus(String path) throws IOException {\n    StringBuilder sb \u003d new StringBuilder();\n    List\u003cAclEntry\u003e aclEntryList \u003d getAclEntryList(path);\n    PermissionStatus p \u003d getPermissionStatus(path);\n    sb.append(\"{\\\"AclStatus\\\":{\\\"entries\\\":[\");\n    int i \u003d 0;\n    for (AclEntry aclEntry : aclEntryList) {\n      if (i++ !\u003d 0) {\n        sb.append(\u0027,\u0027);\n      }\n      sb.append(\u0027\"\u0027);\n      sb.append(aclEntry.toString());\n      sb.append(\u0027\"\u0027);\n    }\n    sb.append(\"],\\\"group\\\": \\\"\");\n    sb.append(p.getGroupName());\n    sb.append(\"\\\",\\\"owner\\\": \\\"\");\n    sb.append(p.getUserName());\n    sb.append(\"\\\",\\\"stickyBit\\\": \");\n    sb.append(p.getPermission().getStickyBit());\n    sb.append(\"}}\\n\");\n    return sb.toString();\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/tools/offlineImageViewer/FSImageLoader.java"
    }
  }
}