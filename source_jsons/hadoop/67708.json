{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "RetriableFileCopyCommand.java",
  "functionName": "readBytes",
  "functionId": "readBytes___inStream-ThrottledInputStream__buf-byte[]__numBytes-int",
  "sourceFilePath": "hadoop-tools/hadoop-distcp/src/main/java/org/apache/hadoop/tools/mapred/RetriableFileCopyCommand.java",
  "functionStartLine": 338,
  "functionEndLine": 346,
  "numCommitsSeen": 85,
  "timeTaken": 5079,
  "changeHistory": [
    "51c64b357d4bd1a0038e61df3d4b8ea0a3ad7449",
    "3bd6b1fd85c44354c777ef4fda6415231505b2a4",
    "3671a5e16fbddbe5a0516289ce98e1305e02291c",
    "d06948002fb0cabf72cc0d46bf2fa67d45370f67"
  ],
  "changeHistoryShort": {
    "51c64b357d4bd1a0038e61df3d4b8ea0a3ad7449": "Ymultichange(Yparameterchange,Ybodychange)",
    "3bd6b1fd85c44354c777ef4fda6415231505b2a4": "Ymultichange(Yparameterchange,Ybodychange)",
    "3671a5e16fbddbe5a0516289ce98e1305e02291c": "Ymultichange(Yparameterchange,Ybodychange)",
    "d06948002fb0cabf72cc0d46bf2fa67d45370f67": "Yintroduced"
  },
  "changeHistoryDetails": {
    "51c64b357d4bd1a0038e61df3d4b8ea0a3ad7449": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "HDFS-13660. DistCp job fails when new data is appended in the file while the DistCp copy job is running\n\nThis uses the length of the file known at the start of the copy to determine the amount of data to copy.\n\n* If a file is appended to during the copy, the original bytes are copied.\n* If a file is truncated during a copy, or the attempt to read the data fails with a truncated stream,\n  distcp will now fail. Until now these failures were not detected.\n\nContributed by Mukund Thakur.\n\nChange-Id: I576a49d951fa48d37a45a7e4c82c47488aa8e884\n",
      "commitDate": "24/09/19 3:23 AM",
      "commitName": "51c64b357d4bd1a0038e61df3d4b8ea0a3ad7449",
      "commitAuthor": "Mukund Thakur",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-13660. DistCp job fails when new data is appended in the file while the DistCp copy job is running\n\nThis uses the length of the file known at the start of the copy to determine the amount of data to copy.\n\n* If a file is appended to during the copy, the original bytes are copied.\n* If a file is truncated during a copy, or the attempt to read the data fails with a truncated stream,\n  distcp will now fail. Until now these failures were not detected.\n\nContributed by Mukund Thakur.\n\nChange-Id: I576a49d951fa48d37a45a7e4c82c47488aa8e884\n",
          "commitDate": "24/09/19 3:23 AM",
          "commitName": "51c64b357d4bd1a0038e61df3d4b8ea0a3ad7449",
          "commitAuthor": "Mukund Thakur",
          "commitDateOld": "18/08/19 6:46 PM",
          "commitNameOld": "c765584eb231f8482f5b90b7e8f61f9f7a931d09",
          "commitAuthorOld": "KAI XIE",
          "daysBetweenCommits": 36.36,
          "commitsBetweenForRepo": 313,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,8 +1,9 @@\n-  private static int readBytes(ThrottledInputStream inStream, byte buf[])\n+  private static int readBytes(ThrottledInputStream inStream, byte[] buf,\n+                               int numBytes)\n       throws IOException {\n     try {\n-      return inStream.read(buf);\n+      return inStream.read(buf, 0, numBytes);\n     } catch (IOException e) {\n       throw new CopyReadException(e);\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private static int readBytes(ThrottledInputStream inStream, byte[] buf,\n                               int numBytes)\n      throws IOException {\n    try {\n      return inStream.read(buf, 0, numBytes);\n    } catch (IOException e) {\n      throw new CopyReadException(e);\n    }\n  }",
          "path": "hadoop-tools/hadoop-distcp/src/main/java/org/apache/hadoop/tools/mapred/RetriableFileCopyCommand.java",
          "extendedDetails": {
            "oldValue": "[inStream-ThrottledInputStream, buf-byte[]]",
            "newValue": "[inStream-ThrottledInputStream, buf-byte[], numBytes-int]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-13660. DistCp job fails when new data is appended in the file while the DistCp copy job is running\n\nThis uses the length of the file known at the start of the copy to determine the amount of data to copy.\n\n* If a file is appended to during the copy, the original bytes are copied.\n* If a file is truncated during a copy, or the attempt to read the data fails with a truncated stream,\n  distcp will now fail. Until now these failures were not detected.\n\nContributed by Mukund Thakur.\n\nChange-Id: I576a49d951fa48d37a45a7e4c82c47488aa8e884\n",
          "commitDate": "24/09/19 3:23 AM",
          "commitName": "51c64b357d4bd1a0038e61df3d4b8ea0a3ad7449",
          "commitAuthor": "Mukund Thakur",
          "commitDateOld": "18/08/19 6:46 PM",
          "commitNameOld": "c765584eb231f8482f5b90b7e8f61f9f7a931d09",
          "commitAuthorOld": "KAI XIE",
          "daysBetweenCommits": 36.36,
          "commitsBetweenForRepo": 313,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,8 +1,9 @@\n-  private static int readBytes(ThrottledInputStream inStream, byte buf[])\n+  private static int readBytes(ThrottledInputStream inStream, byte[] buf,\n+                               int numBytes)\n       throws IOException {\n     try {\n-      return inStream.read(buf);\n+      return inStream.read(buf, 0, numBytes);\n     } catch (IOException e) {\n       throw new CopyReadException(e);\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private static int readBytes(ThrottledInputStream inStream, byte[] buf,\n                               int numBytes)\n      throws IOException {\n    try {\n      return inStream.read(buf, 0, numBytes);\n    } catch (IOException e) {\n      throw new CopyReadException(e);\n    }\n  }",
          "path": "hadoop-tools/hadoop-distcp/src/main/java/org/apache/hadoop/tools/mapred/RetriableFileCopyCommand.java",
          "extendedDetails": {}
        }
      ]
    },
    "3bd6b1fd85c44354c777ef4fda6415231505b2a4": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "HADOOP-15292. Distcp\u0027s use of pread is slowing it down.\nContributed by Virajith Jalaparti.\n",
      "commitDate": "08/03/18 3:15 AM",
      "commitName": "3bd6b1fd85c44354c777ef4fda6415231505b2a4",
      "commitAuthor": "Steve Loughran",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HADOOP-15292. Distcp\u0027s use of pread is slowing it down.\nContributed by Virajith Jalaparti.\n",
          "commitDate": "08/03/18 3:15 AM",
          "commitName": "3bd6b1fd85c44354c777ef4fda6415231505b2a4",
          "commitAuthor": "Steve Loughran",
          "commitDateOld": "18/05/17 3:35 PM",
          "commitNameOld": "b4adc8392c1314d6d6fbdd00f2afb306ef20a650",
          "commitAuthorOld": "Yongjun Zhang",
          "daysBetweenCommits": 293.53,
          "commitsBetweenForRepo": 2009,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,12 +1,8 @@\n-  private static int readBytes(ThrottledInputStream inStream, byte buf[],\n-      long position) throws IOException {\n+  private static int readBytes(ThrottledInputStream inStream, byte buf[])\n+      throws IOException {\n     try {\n-      if (position \u003d\u003d 0) {\n-        return inStream.read(buf);\n-      } else {\n-        return inStream.read(position, buf, 0, buf.length);\n-      }\n+      return inStream.read(buf);\n     } catch (IOException e) {\n       throw new CopyReadException(e);\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private static int readBytes(ThrottledInputStream inStream, byte buf[])\n      throws IOException {\n    try {\n      return inStream.read(buf);\n    } catch (IOException e) {\n      throw new CopyReadException(e);\n    }\n  }",
          "path": "hadoop-tools/hadoop-distcp/src/main/java/org/apache/hadoop/tools/mapred/RetriableFileCopyCommand.java",
          "extendedDetails": {
            "oldValue": "[inStream-ThrottledInputStream, buf-byte[], position-long]",
            "newValue": "[inStream-ThrottledInputStream, buf-byte[]]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HADOOP-15292. Distcp\u0027s use of pread is slowing it down.\nContributed by Virajith Jalaparti.\n",
          "commitDate": "08/03/18 3:15 AM",
          "commitName": "3bd6b1fd85c44354c777ef4fda6415231505b2a4",
          "commitAuthor": "Steve Loughran",
          "commitDateOld": "18/05/17 3:35 PM",
          "commitNameOld": "b4adc8392c1314d6d6fbdd00f2afb306ef20a650",
          "commitAuthorOld": "Yongjun Zhang",
          "daysBetweenCommits": 293.53,
          "commitsBetweenForRepo": 2009,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,12 +1,8 @@\n-  private static int readBytes(ThrottledInputStream inStream, byte buf[],\n-      long position) throws IOException {\n+  private static int readBytes(ThrottledInputStream inStream, byte buf[])\n+      throws IOException {\n     try {\n-      if (position \u003d\u003d 0) {\n-        return inStream.read(buf);\n-      } else {\n-        return inStream.read(position, buf, 0, buf.length);\n-      }\n+      return inStream.read(buf);\n     } catch (IOException e) {\n       throw new CopyReadException(e);\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private static int readBytes(ThrottledInputStream inStream, byte buf[])\n      throws IOException {\n    try {\n      return inStream.read(buf);\n    } catch (IOException e) {\n      throw new CopyReadException(e);\n    }\n  }",
          "path": "hadoop-tools/hadoop-distcp/src/main/java/org/apache/hadoop/tools/mapred/RetriableFileCopyCommand.java",
          "extendedDetails": {}
        }
      ]
    },
    "3671a5e16fbddbe5a0516289ce98e1305e02291c": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "MAPREDUCE-5899. Support incremental data copy in DistCp. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1596931 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "22/05/14 11:17 AM",
      "commitName": "3671a5e16fbddbe5a0516289ce98e1305e02291c",
      "commitAuthor": "Jing Zhao",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "MAPREDUCE-5899. Support incremental data copy in DistCp. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1596931 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "22/05/14 11:17 AM",
          "commitName": "3671a5e16fbddbe5a0516289ce98e1305e02291c",
          "commitAuthor": "Jing Zhao",
          "commitDateOld": "30/01/14 3:53 PM",
          "commitNameOld": "067d52b98c1d17a73b142bb53acc8aaa9c041f38",
          "commitAuthorOld": "Jing Zhao",
          "daysBetweenCommits": 111.77,
          "commitsBetweenForRepo": 836,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,9 +1,12 @@\n-  private static int readBytes(InputStream inStream, byte buf[])\n-          throws IOException {\n+  private static int readBytes(ThrottledInputStream inStream, byte buf[],\n+      long position) throws IOException {\n     try {\n-      return inStream.read(buf);\n-    }\n-    catch (IOException e) {\n+      if (position \u003d\u003d 0) {\n+        return inStream.read(buf);\n+      } else {\n+        return inStream.read(position, buf, 0, buf.length);\n+      }\n+    } catch (IOException e) {\n       throw new CopyReadException(e);\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private static int readBytes(ThrottledInputStream inStream, byte buf[],\n      long position) throws IOException {\n    try {\n      if (position \u003d\u003d 0) {\n        return inStream.read(buf);\n      } else {\n        return inStream.read(position, buf, 0, buf.length);\n      }\n    } catch (IOException e) {\n      throw new CopyReadException(e);\n    }\n  }",
          "path": "hadoop-tools/hadoop-distcp/src/main/java/org/apache/hadoop/tools/mapred/RetriableFileCopyCommand.java",
          "extendedDetails": {
            "oldValue": "[inStream-InputStream, buf-byte[]]",
            "newValue": "[inStream-ThrottledInputStream, buf-byte[], position-long]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "MAPREDUCE-5899. Support incremental data copy in DistCp. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1596931 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "22/05/14 11:17 AM",
          "commitName": "3671a5e16fbddbe5a0516289ce98e1305e02291c",
          "commitAuthor": "Jing Zhao",
          "commitDateOld": "30/01/14 3:53 PM",
          "commitNameOld": "067d52b98c1d17a73b142bb53acc8aaa9c041f38",
          "commitAuthorOld": "Jing Zhao",
          "daysBetweenCommits": 111.77,
          "commitsBetweenForRepo": 836,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,9 +1,12 @@\n-  private static int readBytes(InputStream inStream, byte buf[])\n-          throws IOException {\n+  private static int readBytes(ThrottledInputStream inStream, byte buf[],\n+      long position) throws IOException {\n     try {\n-      return inStream.read(buf);\n-    }\n-    catch (IOException e) {\n+      if (position \u003d\u003d 0) {\n+        return inStream.read(buf);\n+      } else {\n+        return inStream.read(position, buf, 0, buf.length);\n+      }\n+    } catch (IOException e) {\n       throw new CopyReadException(e);\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private static int readBytes(ThrottledInputStream inStream, byte buf[],\n      long position) throws IOException {\n    try {\n      if (position \u003d\u003d 0) {\n        return inStream.read(buf);\n      } else {\n        return inStream.read(position, buf, 0, buf.length);\n      }\n    } catch (IOException e) {\n      throw new CopyReadException(e);\n    }\n  }",
          "path": "hadoop-tools/hadoop-distcp/src/main/java/org/apache/hadoop/tools/mapred/RetriableFileCopyCommand.java",
          "extendedDetails": {}
        }
      ]
    },
    "d06948002fb0cabf72cc0d46bf2fa67d45370f67": {
      "type": "Yintroduced",
      "commitMessage": "MAPREDUCE-2765. DistCp Rewrite. (Mithun Radhakrishnan via mahadev)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1236045 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "25/01/12 10:36 PM",
      "commitName": "d06948002fb0cabf72cc0d46bf2fa67d45370f67",
      "commitAuthor": "Mahadev Konar",
      "diff": "@@ -0,0 +1,9 @@\n+  private static int readBytes(InputStream inStream, byte buf[])\n+          throws IOException {\n+    try {\n+      return inStream.read(buf);\n+    }\n+    catch (IOException e) {\n+      throw new CopyReadException(e);\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private static int readBytes(InputStream inStream, byte buf[])\n          throws IOException {\n    try {\n      return inStream.read(buf);\n    }\n    catch (IOException e) {\n      throw new CopyReadException(e);\n    }\n  }",
      "path": "hadoop-tools/hadoop-distcp/src/main/java/org/apache/hadoop/tools/mapred/RetriableFileCopyCommand.java"
    }
  }
}