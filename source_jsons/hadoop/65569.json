{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "S3GuardFsckViolationHandler.java",
  "functionName": "doFix",
  "functionId": "doFix___comparePair-S3GuardFsck.ComparePair",
  "sourceFilePath": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/s3guard/S3GuardFsckViolationHandler.java",
  "functionStartLine": 74,
  "functionEndLine": 87,
  "numCommitsSeen": 5,
  "timeTaken": 3710,
  "changeHistory": [
    "c91ff8c18ffc070eeef22afeb2e519b184398e89",
    "4e273a31f66013b7c20e8114451f5bc6c741f2cc"
  ],
  "changeHistoryShort": {
    "c91ff8c18ffc070eeef22afeb2e519b184398e89": "Ymultichange(Ymovefromfile,Yexceptionschange,Ybodychange,Yrename)",
    "4e273a31f66013b7c20e8114451f5bc6c741f2cc": "Yintroduced"
  },
  "changeHistoryDetails": {
    "c91ff8c18ffc070eeef22afeb2e519b184398e89": {
      "type": "Ymultichange(Ymovefromfile,Yexceptionschange,Ybodychange,Yrename)",
      "commitMessage": "HADOOP-16858. S3Guard fsck: Add option to remove orphaned entries (#1851). Contributed by Gabor Bota.\n\nAdding a new feature to S3GuardTool\u0027s fsck: -fix. \r\n\r\nChange-Id: I2cdb6601fea1d859b54370046b827ef06eb1107d",
      "commitDate": "18/03/20 4:48 AM",
      "commitName": "c91ff8c18ffc070eeef22afeb2e519b184398e89",
      "commitAuthor": "Gabor Bota",
      "subchanges": [
        {
          "type": "Ymovefromfile",
          "commitMessage": "HADOOP-16858. S3Guard fsck: Add option to remove orphaned entries (#1851). Contributed by Gabor Bota.\n\nAdding a new feature to S3GuardTool\u0027s fsck: -fix. \r\n\r\nChange-Id: I2cdb6601fea1d859b54370046b827ef06eb1107d",
          "commitDate": "18/03/20 4:48 AM",
          "commitName": "c91ff8c18ffc070eeef22afeb2e519b184398e89",
          "commitAuthor": "Gabor Bota",
          "commitDateOld": "17/03/20 6:31 AM",
          "commitNameOld": "8d6373483ed73dc399c48c08411e4b3f488157f6",
          "commitAuthorOld": "Steve Loughran",
          "daysBetweenCommits": 0.93,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,14 +1,14 @@\n-  public void handle(S3GuardFsck.ComparePair comparePair) {\n+  public void doFix(S3GuardFsck.ComparePair comparePair) throws IOException {\n     if (!comparePair.containsViolation()) {\n       LOG.debug(\"There is no violation in the compare pair: {}\", comparePair);\n       return;\n     }\n \n     StringBuilder sB \u003d new StringBuilder();\n     sB.append(newLine)\n         .append(\"On path: \").append(comparePair.getPath()).append(newLine);\n \n-    handleComparePair(comparePair, sB);\n+    handleComparePair(comparePair, sB, HandleMode.FIX);\n \n-    LOG.error(sB.toString());\n+    LOG.info(sB.toString());\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public void doFix(S3GuardFsck.ComparePair comparePair) throws IOException {\n    if (!comparePair.containsViolation()) {\n      LOG.debug(\"There is no violation in the compare pair: {}\", comparePair);\n      return;\n    }\n\n    StringBuilder sB \u003d new StringBuilder();\n    sB.append(newLine)\n        .append(\"On path: \").append(comparePair.getPath()).append(newLine);\n\n    handleComparePair(comparePair, sB, HandleMode.FIX);\n\n    LOG.info(sB.toString());\n  }",
          "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/s3guard/S3GuardFsckViolationHandler.java",
          "extendedDetails": {
            "oldPath": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/s3guard/S3GuardFsckViolationHandler.java",
            "newPath": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/s3guard/S3GuardFsckViolationHandler.java",
            "oldMethodName": "handle",
            "newMethodName": "doFix"
          }
        },
        {
          "type": "Yexceptionschange",
          "commitMessage": "HADOOP-16858. S3Guard fsck: Add option to remove orphaned entries (#1851). Contributed by Gabor Bota.\n\nAdding a new feature to S3GuardTool\u0027s fsck: -fix. \r\n\r\nChange-Id: I2cdb6601fea1d859b54370046b827ef06eb1107d",
          "commitDate": "18/03/20 4:48 AM",
          "commitName": "c91ff8c18ffc070eeef22afeb2e519b184398e89",
          "commitAuthor": "Gabor Bota",
          "commitDateOld": "17/03/20 6:31 AM",
          "commitNameOld": "8d6373483ed73dc399c48c08411e4b3f488157f6",
          "commitAuthorOld": "Steve Loughran",
          "daysBetweenCommits": 0.93,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,14 +1,14 @@\n-  public void handle(S3GuardFsck.ComparePair comparePair) {\n+  public void doFix(S3GuardFsck.ComparePair comparePair) throws IOException {\n     if (!comparePair.containsViolation()) {\n       LOG.debug(\"There is no violation in the compare pair: {}\", comparePair);\n       return;\n     }\n \n     StringBuilder sB \u003d new StringBuilder();\n     sB.append(newLine)\n         .append(\"On path: \").append(comparePair.getPath()).append(newLine);\n \n-    handleComparePair(comparePair, sB);\n+    handleComparePair(comparePair, sB, HandleMode.FIX);\n \n-    LOG.error(sB.toString());\n+    LOG.info(sB.toString());\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public void doFix(S3GuardFsck.ComparePair comparePair) throws IOException {\n    if (!comparePair.containsViolation()) {\n      LOG.debug(\"There is no violation in the compare pair: {}\", comparePair);\n      return;\n    }\n\n    StringBuilder sB \u003d new StringBuilder();\n    sB.append(newLine)\n        .append(\"On path: \").append(comparePair.getPath()).append(newLine);\n\n    handleComparePair(comparePair, sB, HandleMode.FIX);\n\n    LOG.info(sB.toString());\n  }",
          "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/s3guard/S3GuardFsckViolationHandler.java",
          "extendedDetails": {
            "oldValue": "[]",
            "newValue": "[IOException]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HADOOP-16858. S3Guard fsck: Add option to remove orphaned entries (#1851). Contributed by Gabor Bota.\n\nAdding a new feature to S3GuardTool\u0027s fsck: -fix. \r\n\r\nChange-Id: I2cdb6601fea1d859b54370046b827ef06eb1107d",
          "commitDate": "18/03/20 4:48 AM",
          "commitName": "c91ff8c18ffc070eeef22afeb2e519b184398e89",
          "commitAuthor": "Gabor Bota",
          "commitDateOld": "17/03/20 6:31 AM",
          "commitNameOld": "8d6373483ed73dc399c48c08411e4b3f488157f6",
          "commitAuthorOld": "Steve Loughran",
          "daysBetweenCommits": 0.93,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,14 +1,14 @@\n-  public void handle(S3GuardFsck.ComparePair comparePair) {\n+  public void doFix(S3GuardFsck.ComparePair comparePair) throws IOException {\n     if (!comparePair.containsViolation()) {\n       LOG.debug(\"There is no violation in the compare pair: {}\", comparePair);\n       return;\n     }\n \n     StringBuilder sB \u003d new StringBuilder();\n     sB.append(newLine)\n         .append(\"On path: \").append(comparePair.getPath()).append(newLine);\n \n-    handleComparePair(comparePair, sB);\n+    handleComparePair(comparePair, sB, HandleMode.FIX);\n \n-    LOG.error(sB.toString());\n+    LOG.info(sB.toString());\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public void doFix(S3GuardFsck.ComparePair comparePair) throws IOException {\n    if (!comparePair.containsViolation()) {\n      LOG.debug(\"There is no violation in the compare pair: {}\", comparePair);\n      return;\n    }\n\n    StringBuilder sB \u003d new StringBuilder();\n    sB.append(newLine)\n        .append(\"On path: \").append(comparePair.getPath()).append(newLine);\n\n    handleComparePair(comparePair, sB, HandleMode.FIX);\n\n    LOG.info(sB.toString());\n  }",
          "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/s3guard/S3GuardFsckViolationHandler.java",
          "extendedDetails": {}
        },
        {
          "type": "Yrename",
          "commitMessage": "HADOOP-16858. S3Guard fsck: Add option to remove orphaned entries (#1851). Contributed by Gabor Bota.\n\nAdding a new feature to S3GuardTool\u0027s fsck: -fix. \r\n\r\nChange-Id: I2cdb6601fea1d859b54370046b827ef06eb1107d",
          "commitDate": "18/03/20 4:48 AM",
          "commitName": "c91ff8c18ffc070eeef22afeb2e519b184398e89",
          "commitAuthor": "Gabor Bota",
          "commitDateOld": "17/03/20 6:31 AM",
          "commitNameOld": "8d6373483ed73dc399c48c08411e4b3f488157f6",
          "commitAuthorOld": "Steve Loughran",
          "daysBetweenCommits": 0.93,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,14 +1,14 @@\n-  public void handle(S3GuardFsck.ComparePair comparePair) {\n+  public void doFix(S3GuardFsck.ComparePair comparePair) throws IOException {\n     if (!comparePair.containsViolation()) {\n       LOG.debug(\"There is no violation in the compare pair: {}\", comparePair);\n       return;\n     }\n \n     StringBuilder sB \u003d new StringBuilder();\n     sB.append(newLine)\n         .append(\"On path: \").append(comparePair.getPath()).append(newLine);\n \n-    handleComparePair(comparePair, sB);\n+    handleComparePair(comparePair, sB, HandleMode.FIX);\n \n-    LOG.error(sB.toString());\n+    LOG.info(sB.toString());\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public void doFix(S3GuardFsck.ComparePair comparePair) throws IOException {\n    if (!comparePair.containsViolation()) {\n      LOG.debug(\"There is no violation in the compare pair: {}\", comparePair);\n      return;\n    }\n\n    StringBuilder sB \u003d new StringBuilder();\n    sB.append(newLine)\n        .append(\"On path: \").append(comparePair.getPath()).append(newLine);\n\n    handleComparePair(comparePair, sB, HandleMode.FIX);\n\n    LOG.info(sB.toString());\n  }",
          "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/s3guard/S3GuardFsckViolationHandler.java",
          "extendedDetails": {
            "oldValue": "handle",
            "newValue": "doFix"
          }
        }
      ]
    },
    "4e273a31f66013b7c20e8114451f5bc6c741f2cc": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-16423. S3Guard fsck: Check metadata consistency between S3 and metadatastore (log) (#1208). Contributed by Gabor Bota.\n\nChange-Id: I6bbb331b6c0a41c61043e482b95504fda8a50596",
      "commitDate": "12/09/19 4:12 AM",
      "commitName": "4e273a31f66013b7c20e8114451f5bc6c741f2cc",
      "commitAuthor": "Gabor Bota",
      "diff": "@@ -0,0 +1,14 @@\n+  public void handle(S3GuardFsck.ComparePair comparePair) {\n+    if (!comparePair.containsViolation()) {\n+      LOG.debug(\"There is no violation in the compare pair: {}\", comparePair);\n+      return;\n+    }\n+\n+    StringBuilder sB \u003d new StringBuilder();\n+    sB.append(newLine)\n+        .append(\"On path: \").append(comparePair.getPath()).append(newLine);\n+\n+    handleComparePair(comparePair, sB);\n+\n+    LOG.error(sB.toString());\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public void handle(S3GuardFsck.ComparePair comparePair) {\n    if (!comparePair.containsViolation()) {\n      LOG.debug(\"There is no violation in the compare pair: {}\", comparePair);\n      return;\n    }\n\n    StringBuilder sB \u003d new StringBuilder();\n    sB.append(newLine)\n        .append(\"On path: \").append(comparePair.getPath()).append(newLine);\n\n    handleComparePair(comparePair, sB);\n\n    LOG.error(sB.toString());\n  }",
      "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/s3guard/S3GuardFsckViolationHandler.java"
    }
  }
}