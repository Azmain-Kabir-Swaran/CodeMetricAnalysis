{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "S3AUtils.java",
  "functionName": "initUserAgent",
  "functionId": "initUserAgent___conf-Configuration__awsConf-ClientConfiguration",
  "sourceFilePath": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AUtils.java",
  "functionStartLine": 1408,
  "functionEndLine": 1417,
  "numCommitsSeen": 97,
  "timeTaken": 4578,
  "changeHistory": [
    "da9a39eed138210de29b59b90c449b28da1c04f9",
    "621b43e254afaff708cd6fc4698b29628f6abc33",
    "af791b774bdc3af26ab99487ffea7246c6788a9c",
    "d152557cf7f4d2288524c222fcbaf152bdc038b0",
    "def2a6d3856452d5c804f04e5bf485541a3bc53a"
  ],
  "changeHistoryShort": {
    "da9a39eed138210de29b59b90c449b28da1c04f9": "Ymovefromfile",
    "621b43e254afaff708cd6fc4698b29628f6abc33": "Ymovefromfile",
    "af791b774bdc3af26ab99487ffea7246c6788a9c": "Ybodychange",
    "d152557cf7f4d2288524c222fcbaf152bdc038b0": "Ymultichange(Ymovefromfile,Ymodifierchange)",
    "def2a6d3856452d5c804f04e5bf485541a3bc53a": "Yintroduced"
  },
  "changeHistoryDetails": {
    "da9a39eed138210de29b59b90c449b28da1c04f9": {
      "type": "Ymovefromfile",
      "commitMessage": "HADOOP-15583. Stabilize S3A Assumed Role support.\nContributed by Steve Loughran.\n",
      "commitDate": "08/08/18 10:57 PM",
      "commitName": "da9a39eed138210de29b59b90c449b28da1c04f9",
      "commitAuthor": "Steve Loughran",
      "commitDateOld": "08/08/18 4:47 PM",
      "commitNameOld": "d81cd3611a449bcd7970ff2f1392a5e868e28f7e",
      "commitAuthorOld": "Hanisha Koneru",
      "daysBetweenCommits": 0.26,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  private static void initUserAgent(Configuration conf,\n      ClientConfiguration awsConf) {\n    String userAgent \u003d \"Hadoop \" + VersionInfo.getVersion();\n    String userAgentPrefix \u003d conf.getTrimmed(USER_AGENT_PREFIX, \"\");\n    if (!userAgentPrefix.isEmpty()) {\n      userAgent \u003d userAgentPrefix + \", \" + userAgent;\n    }\n    LOG.debug(\"Using User-Agent: {}\", userAgent);\n    awsConf.setUserAgentPrefix(userAgent);\n  }",
      "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AUtils.java",
      "extendedDetails": {
        "oldPath": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/DefaultS3ClientFactory.java",
        "newPath": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AUtils.java",
        "oldMethodName": "initUserAgent",
        "newMethodName": "initUserAgent"
      }
    },
    "621b43e254afaff708cd6fc4698b29628f6abc33": {
      "type": "Ymovefromfile",
      "commitMessage": "HADOOP-13345 HS3Guard: Improved Consistency for S3A.\nContributed by: Chris Nauroth, Aaron Fabbri, Mingliang Liu, Lei (Eddy) Xu,\nSean Mackrory, Steve Loughran and others.\n",
      "commitDate": "01/09/17 6:13 AM",
      "commitName": "621b43e254afaff708cd6fc4698b29628f6abc33",
      "commitAuthor": "Steve Loughran",
      "commitDateOld": "01/09/17 2:48 AM",
      "commitNameOld": "7a96033b15580a01a2867fa3cab9c1e409dbaafd",
      "commitAuthorOld": "Kai Zheng",
      "daysBetweenCommits": 0.14,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,10 +1,10 @@\n-    private static void initUserAgent(Configuration conf,\n-        ClientConfiguration awsConf) {\n-      String userAgent \u003d \"Hadoop \" + VersionInfo.getVersion();\n-      String userAgentPrefix \u003d conf.getTrimmed(USER_AGENT_PREFIX, \"\");\n-      if (!userAgentPrefix.isEmpty()) {\n-        userAgent \u003d userAgentPrefix + \", \" + userAgent;\n-      }\n-      LOG.debug(\"Using User-Agent: {}\", userAgent);\n-      awsConf.setUserAgentPrefix(userAgent);\n-    }\n\\ No newline at end of file\n+  private static void initUserAgent(Configuration conf,\n+      ClientConfiguration awsConf) {\n+    String userAgent \u003d \"Hadoop \" + VersionInfo.getVersion();\n+    String userAgentPrefix \u003d conf.getTrimmed(USER_AGENT_PREFIX, \"\");\n+    if (!userAgentPrefix.isEmpty()) {\n+      userAgent \u003d userAgentPrefix + \", \" + userAgent;\n+    }\n+    LOG.debug(\"Using User-Agent: {}\", userAgent);\n+    awsConf.setUserAgentPrefix(userAgent);\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private static void initUserAgent(Configuration conf,\n      ClientConfiguration awsConf) {\n    String userAgent \u003d \"Hadoop \" + VersionInfo.getVersion();\n    String userAgentPrefix \u003d conf.getTrimmed(USER_AGENT_PREFIX, \"\");\n    if (!userAgentPrefix.isEmpty()) {\n      userAgent \u003d userAgentPrefix + \", \" + userAgent;\n    }\n    LOG.debug(\"Using User-Agent: {}\", userAgent);\n    awsConf.setUserAgentPrefix(userAgent);\n  }",
      "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/DefaultS3ClientFactory.java",
      "extendedDetails": {
        "oldPath": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3ClientFactory.java",
        "newPath": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/DefaultS3ClientFactory.java",
        "oldMethodName": "initUserAgent",
        "newMethodName": "initUserAgent"
      }
    },
    "af791b774bdc3af26ab99487ffea7246c6788a9c": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-13050. Upgrade to AWS SDK 10.11+. Contributed by Chris Nauroth and Steve Loughran\n",
      "commitDate": "22/11/16 2:00 PM",
      "commitName": "af791b774bdc3af26ab99487ffea7246c6788a9c",
      "commitAuthor": "Mingliang Liu",
      "commitDateOld": "06/09/16 9:36 AM",
      "commitNameOld": "d152557cf7f4d2288524c222fcbaf152bdc038b0",
      "commitAuthorOld": "Chris Nauroth",
      "daysBetweenCommits": 77.23,
      "commitsBetweenForRepo": 602,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,10 +1,10 @@\n     private static void initUserAgent(Configuration conf,\n         ClientConfiguration awsConf) {\n       String userAgent \u003d \"Hadoop \" + VersionInfo.getVersion();\n       String userAgentPrefix \u003d conf.getTrimmed(USER_AGENT_PREFIX, \"\");\n       if (!userAgentPrefix.isEmpty()) {\n         userAgent \u003d userAgentPrefix + \", \" + userAgent;\n       }\n       LOG.debug(\"Using User-Agent: {}\", userAgent);\n-      awsConf.setUserAgent(userAgent);\n+      awsConf.setUserAgentPrefix(userAgent);\n     }\n\\ No newline at end of file\n",
      "actualSource": "    private static void initUserAgent(Configuration conf,\n        ClientConfiguration awsConf) {\n      String userAgent \u003d \"Hadoop \" + VersionInfo.getVersion();\n      String userAgentPrefix \u003d conf.getTrimmed(USER_AGENT_PREFIX, \"\");\n      if (!userAgentPrefix.isEmpty()) {\n        userAgent \u003d userAgentPrefix + \", \" + userAgent;\n      }\n      LOG.debug(\"Using User-Agent: {}\", userAgent);\n      awsConf.setUserAgentPrefix(userAgent);\n    }",
      "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3ClientFactory.java",
      "extendedDetails": {}
    },
    "d152557cf7f4d2288524c222fcbaf152bdc038b0": {
      "type": "Ymultichange(Ymovefromfile,Ymodifierchange)",
      "commitMessage": "HADOOP-13447. Refactor S3AFileSystem to support introduction of separate metadata repository and tests. Contributed by Chris Nauroth.\n",
      "commitDate": "06/09/16 9:36 AM",
      "commitName": "d152557cf7f4d2288524c222fcbaf152bdc038b0",
      "commitAuthor": "Chris Nauroth",
      "subchanges": [
        {
          "type": "Ymovefromfile",
          "commitMessage": "HADOOP-13447. Refactor S3AFileSystem to support introduction of separate metadata repository and tests. Contributed by Chris Nauroth.\n",
          "commitDate": "06/09/16 9:36 AM",
          "commitName": "d152557cf7f4d2288524c222fcbaf152bdc038b0",
          "commitAuthor": "Chris Nauroth",
          "commitDateOld": "06/09/16 8:02 AM",
          "commitNameOld": "39d1b1d747b1e325792b897b3264272f32b756a9",
          "commitAuthorOld": "Kihwal Lee",
          "daysBetweenCommits": 0.07,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,9 +1,10 @@\n-  private void initUserAgent(Configuration conf, ClientConfiguration awsConf) {\n-    String userAgent \u003d \"Hadoop \" + VersionInfo.getVersion();\n-    String userAgentPrefix \u003d conf.getTrimmed(USER_AGENT_PREFIX, \"\");\n-    if (!userAgentPrefix.isEmpty()) {\n-      userAgent \u003d userAgentPrefix + \", \" + userAgent;\n-    }\n-    LOG.debug(\"Using User-Agent: {}\", userAgent);\n-    awsConf.setUserAgent(userAgent);\n-  }\n\\ No newline at end of file\n+    private static void initUserAgent(Configuration conf,\n+        ClientConfiguration awsConf) {\n+      String userAgent \u003d \"Hadoop \" + VersionInfo.getVersion();\n+      String userAgentPrefix \u003d conf.getTrimmed(USER_AGENT_PREFIX, \"\");\n+      if (!userAgentPrefix.isEmpty()) {\n+        userAgent \u003d userAgentPrefix + \", \" + userAgent;\n+      }\n+      LOG.debug(\"Using User-Agent: {}\", userAgent);\n+      awsConf.setUserAgent(userAgent);\n+    }\n\\ No newline at end of file\n",
          "actualSource": "    private static void initUserAgent(Configuration conf,\n        ClientConfiguration awsConf) {\n      String userAgent \u003d \"Hadoop \" + VersionInfo.getVersion();\n      String userAgentPrefix \u003d conf.getTrimmed(USER_AGENT_PREFIX, \"\");\n      if (!userAgentPrefix.isEmpty()) {\n        userAgent \u003d userAgentPrefix + \", \" + userAgent;\n      }\n      LOG.debug(\"Using User-Agent: {}\", userAgent);\n      awsConf.setUserAgent(userAgent);\n    }",
          "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3ClientFactory.java",
          "extendedDetails": {
            "oldPath": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AFileSystem.java",
            "newPath": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3ClientFactory.java",
            "oldMethodName": "initUserAgent",
            "newMethodName": "initUserAgent"
          }
        },
        {
          "type": "Ymodifierchange",
          "commitMessage": "HADOOP-13447. Refactor S3AFileSystem to support introduction of separate metadata repository and tests. Contributed by Chris Nauroth.\n",
          "commitDate": "06/09/16 9:36 AM",
          "commitName": "d152557cf7f4d2288524c222fcbaf152bdc038b0",
          "commitAuthor": "Chris Nauroth",
          "commitDateOld": "06/09/16 8:02 AM",
          "commitNameOld": "39d1b1d747b1e325792b897b3264272f32b756a9",
          "commitAuthorOld": "Kihwal Lee",
          "daysBetweenCommits": 0.07,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,9 +1,10 @@\n-  private void initUserAgent(Configuration conf, ClientConfiguration awsConf) {\n-    String userAgent \u003d \"Hadoop \" + VersionInfo.getVersion();\n-    String userAgentPrefix \u003d conf.getTrimmed(USER_AGENT_PREFIX, \"\");\n-    if (!userAgentPrefix.isEmpty()) {\n-      userAgent \u003d userAgentPrefix + \", \" + userAgent;\n-    }\n-    LOG.debug(\"Using User-Agent: {}\", userAgent);\n-    awsConf.setUserAgent(userAgent);\n-  }\n\\ No newline at end of file\n+    private static void initUserAgent(Configuration conf,\n+        ClientConfiguration awsConf) {\n+      String userAgent \u003d \"Hadoop \" + VersionInfo.getVersion();\n+      String userAgentPrefix \u003d conf.getTrimmed(USER_AGENT_PREFIX, \"\");\n+      if (!userAgentPrefix.isEmpty()) {\n+        userAgent \u003d userAgentPrefix + \", \" + userAgent;\n+      }\n+      LOG.debug(\"Using User-Agent: {}\", userAgent);\n+      awsConf.setUserAgent(userAgent);\n+    }\n\\ No newline at end of file\n",
          "actualSource": "    private static void initUserAgent(Configuration conf,\n        ClientConfiguration awsConf) {\n      String userAgent \u003d \"Hadoop \" + VersionInfo.getVersion();\n      String userAgentPrefix \u003d conf.getTrimmed(USER_AGENT_PREFIX, \"\");\n      if (!userAgentPrefix.isEmpty()) {\n        userAgent \u003d userAgentPrefix + \", \" + userAgent;\n      }\n      LOG.debug(\"Using User-Agent: {}\", userAgent);\n      awsConf.setUserAgent(userAgent);\n    }",
          "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3ClientFactory.java",
          "extendedDetails": {
            "oldValue": "[private]",
            "newValue": "[private, static]"
          }
        }
      ]
    },
    "def2a6d3856452d5c804f04e5bf485541a3bc53a": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-13122 Customize User-Agent header sent in HTTP requests by S3A. Chris Nauroth via stevel.\n",
      "commitDate": "12/05/16 5:57 AM",
      "commitName": "def2a6d3856452d5c804f04e5bf485541a3bc53a",
      "commitAuthor": "Steve Loughran",
      "diff": "@@ -0,0 +1,9 @@\n+  private void initUserAgent(Configuration conf, ClientConfiguration awsConf) {\n+    String userAgent \u003d \"Hadoop \" + VersionInfo.getVersion();\n+    String userAgentPrefix \u003d conf.getTrimmed(USER_AGENT_PREFIX, \"\");\n+    if (!userAgentPrefix.isEmpty()) {\n+      userAgent \u003d userAgentPrefix + \", \" + userAgent;\n+    }\n+    LOG.debug(\"Using User-Agent: {}\", userAgent);\n+    awsConf.setUserAgent(userAgent);\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private void initUserAgent(Configuration conf, ClientConfiguration awsConf) {\n    String userAgent \u003d \"Hadoop \" + VersionInfo.getVersion();\n    String userAgentPrefix \u003d conf.getTrimmed(USER_AGENT_PREFIX, \"\");\n    if (!userAgentPrefix.isEmpty()) {\n      userAgent \u003d userAgentPrefix + \", \" + userAgent;\n    }\n    LOG.debug(\"Using User-Agent: {}\", userAgent);\n    awsConf.setUserAgent(userAgent);\n  }",
      "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AFileSystem.java"
    }
  }
}