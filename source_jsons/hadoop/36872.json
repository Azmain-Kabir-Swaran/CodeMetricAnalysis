{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "RMWebServices.java",
  "functionName": "getSchedulerConfiguration",
  "functionId": "getSchedulerConfiguration___hsr-HttpServletRequest(annotations-@Context)",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/RMWebServices.java",
  "functionStartLine": 2735,
  "functionEndLine": 2762,
  "numCommitsSeen": 106,
  "timeTaken": 1627,
  "changeHistory": [
    "d352f167ebb865a6486afbbdac8e2a5e97a7bbad"
  ],
  "changeHistoryShort": {
    "d352f167ebb865a6486afbbdac8e2a5e97a7bbad": "Yintroduced"
  },
  "changeHistoryDetails": {
    "d352f167ebb865a6486afbbdac8e2a5e97a7bbad": {
      "type": "Yintroduced",
      "commitMessage": "YARN-8559. Expose mutable-conf scheduler\u0027s configuration in RM /scheduler-conf endpoint. Contributed by Weiwei Yang.\n",
      "commitDate": "09/08/18 8:46 AM",
      "commitName": "d352f167ebb865a6486afbbdac8e2a5e97a7bbad",
      "commitAuthor": "Weiwei Yang",
      "diff": "@@ -0,0 +1,28 @@\n+  public Response getSchedulerConfiguration(@Context HttpServletRequest hsr)\n+      throws AuthorizationException {\n+    // Only admin user is allowed to read scheduler conf,\n+    // in order to avoid leaking sensitive info, such as ACLs\n+    UserGroupInformation callerUGI \u003d getCallerUserGroupInformation(hsr, true);\n+    initForWritableEndpoints(callerUGI, true);\n+\n+    ResourceScheduler scheduler \u003d rm.getResourceScheduler();\n+    if (scheduler instanceof MutableConfScheduler\n+        \u0026\u0026 ((MutableConfScheduler) scheduler).isConfigurationMutable()) {\n+      MutableConfigurationProvider mutableConfigurationProvider \u003d\n+          ((MutableConfScheduler) scheduler).getMutableConfProvider();\n+      // We load the cached configuration from configuration store,\n+      // this should be the conf properties used by the scheduler.\n+      Configuration schedulerConf \u003d mutableConfigurationProvider\n+          .getConfiguration();\n+      return Response.status(Status.OK)\n+          .entity(new ConfInfo(schedulerConf))\n+          .build();\n+    } else {\n+      return Response.status(Status.BAD_REQUEST).entity(\n+          \"This API only supports to retrieve scheduler configuration\"\n+              + \" from a mutable-conf scheduler, underneath scheduler \"\n+              + scheduler.getClass().getSimpleName()\n+              + \" is not an instance of MutableConfScheduler\")\n+          .build();\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public Response getSchedulerConfiguration(@Context HttpServletRequest hsr)\n      throws AuthorizationException {\n    // Only admin user is allowed to read scheduler conf,\n    // in order to avoid leaking sensitive info, such as ACLs\n    UserGroupInformation callerUGI \u003d getCallerUserGroupInformation(hsr, true);\n    initForWritableEndpoints(callerUGI, true);\n\n    ResourceScheduler scheduler \u003d rm.getResourceScheduler();\n    if (scheduler instanceof MutableConfScheduler\n        \u0026\u0026 ((MutableConfScheduler) scheduler).isConfigurationMutable()) {\n      MutableConfigurationProvider mutableConfigurationProvider \u003d\n          ((MutableConfScheduler) scheduler).getMutableConfProvider();\n      // We load the cached configuration from configuration store,\n      // this should be the conf properties used by the scheduler.\n      Configuration schedulerConf \u003d mutableConfigurationProvider\n          .getConfiguration();\n      return Response.status(Status.OK)\n          .entity(new ConfInfo(schedulerConf))\n          .build();\n    } else {\n      return Response.status(Status.BAD_REQUEST).entity(\n          \"This API only supports to retrieve scheduler configuration\"\n              + \" from a mutable-conf scheduler, underneath scheduler \"\n              + scheduler.getClass().getSimpleName()\n              + \" is not an instance of MutableConfScheduler\")\n          .build();\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/RMWebServices.java"
    }
  }
}