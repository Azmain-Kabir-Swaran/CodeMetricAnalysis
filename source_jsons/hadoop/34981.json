{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "NMTimelinePublisher.java",
  "functionName": "publishApplicationEvent",
  "functionId": "publishApplicationEvent___event-ApplicationEvent",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/timelineservice/NMTimelinePublisher.java",
  "functionStartLine": 437,
  "functionEndLine": 459,
  "numCommitsSeen": 28,
  "timeTaken": 2282,
  "changeHistory": [
    "2064ca015d1584263aac0cc20c60b925a3aff612",
    "092fead5d9875fb3760206bcdd76cdafec5e9481",
    "84c35ac6c4a76c31d9bf9c87b87ed29394564611",
    "960af7d4717b8a8949d0b2e43949e7daab45aa88",
    "89e5c44f9e891a3579384c3fa3766937cd4970f1",
    "477a30f536277bf95d7181bf1b2fdda52d83bf51"
  ],
  "changeHistoryShort": {
    "2064ca015d1584263aac0cc20c60b925a3aff612": "Ybodychange",
    "092fead5d9875fb3760206bcdd76cdafec5e9481": "Ybodychange",
    "84c35ac6c4a76c31d9bf9c87b87ed29394564611": "Ybodychange",
    "960af7d4717b8a8949d0b2e43949e7daab45aa88": "Ybodychange",
    "89e5c44f9e891a3579384c3fa3766937cd4970f1": "Ybodychange",
    "477a30f536277bf95d7181bf1b2fdda52d83bf51": "Yintroduced"
  },
  "changeHistoryDetails": {
    "2064ca015d1584263aac0cc20c60b925a3aff612": {
      "type": "Ybodychange",
      "commitMessage": "YARN-9349.  Changed logging to use slf4j api.\n            Contributed by Prabhu Joseph\n",
      "commitDate": "15/03/19 4:20 PM",
      "commitName": "2064ca015d1584263aac0cc20c60b925a3aff612",
      "commitAuthor": "Eric Yang",
      "commitDateOld": "05/02/19 12:18 AM",
      "commitNameOld": "e3ec18b0c4fb93bd00c12d90057c2b982ca8a676",
      "commitAuthorOld": "Rohith Sharma K S",
      "daysBetweenCommits": 38.63,
      "commitsBetweenForRepo": 349,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,25 +1,23 @@\n   public void publishApplicationEvent(ApplicationEvent event) {\n     // publish only when the desired event is received\n     switch (event.getType()) {\n     case INIT_APPLICATION:\n     case FINISH_APPLICATION:\n     case APPLICATION_LOG_HANDLING_FAILED:\n       // TODO need to be handled in future,\n       // not sure to publish under which entity\n       break;\n     case APPLICATION_CONTAINER_FINISHED:\n       // this is actually used to publish the container Event\n       ApplicationContainerFinishedEvent evnt \u003d\n           (ApplicationContainerFinishedEvent) event;\n       publishContainerFinishedEvent(evnt.getContainerStatus(),\n           event.getTimestamp(), evnt.getContainerStartTime());\n       break;\n \n     default:\n-      if (LOG.isDebugEnabled()) {\n-        LOG.debug(event.getType() + \" is not a desired ApplicationEvent which\"\n-            + \" needs to be published by NMTimelinePublisher\");\n-      }\n+      LOG.debug(\"{} is not a desired ApplicationEvent which\"\n+          + \" needs to be published by NMTimelinePublisher\", event.getType());\n       break;\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void publishApplicationEvent(ApplicationEvent event) {\n    // publish only when the desired event is received\n    switch (event.getType()) {\n    case INIT_APPLICATION:\n    case FINISH_APPLICATION:\n    case APPLICATION_LOG_HANDLING_FAILED:\n      // TODO need to be handled in future,\n      // not sure to publish under which entity\n      break;\n    case APPLICATION_CONTAINER_FINISHED:\n      // this is actually used to publish the container Event\n      ApplicationContainerFinishedEvent evnt \u003d\n          (ApplicationContainerFinishedEvent) event;\n      publishContainerFinishedEvent(evnt.getContainerStatus(),\n          event.getTimestamp(), evnt.getContainerStartTime());\n      break;\n\n    default:\n      LOG.debug(\"{} is not a desired ApplicationEvent which\"\n          + \" needs to be published by NMTimelinePublisher\", event.getType());\n      break;\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/timelineservice/NMTimelinePublisher.java",
      "extendedDetails": {}
    },
    "092fead5d9875fb3760206bcdd76cdafec5e9481": {
      "type": "Ybodychange",
      "commitMessage": "YARN-5792. Adopt the id prefix for YARN, MR, and DS entities. Contributed by Varun Saxena.\n",
      "commitDate": "29/08/17 10:59 PM",
      "commitName": "092fead5d9875fb3760206bcdd76cdafec5e9481",
      "commitAuthor": "Sangjin Lee",
      "commitDateOld": "29/08/17 10:59 PM",
      "commitNameOld": "278bd6fcff8d084acfd85b91a6f4ca7e189e742d",
      "commitAuthorOld": "Sangjin Lee",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 8,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,25 +1,25 @@\n   public void publishApplicationEvent(ApplicationEvent event) {\n     // publish only when the desired event is received\n     switch (event.getType()) {\n     case INIT_APPLICATION:\n     case FINISH_APPLICATION:\n     case APPLICATION_LOG_HANDLING_FAILED:\n       // TODO need to be handled in future,\n       // not sure to publish under which entity\n       break;\n     case APPLICATION_CONTAINER_FINISHED:\n       // this is actually used to publish the container Event\n       ApplicationContainerFinishedEvent evnt \u003d\n           (ApplicationContainerFinishedEvent) event;\n       publishContainerFinishedEvent(evnt.getContainerStatus(),\n-          event.getTimestamp());\n+          event.getTimestamp(), evnt.getContainerStartTime());\n       break;\n \n     default:\n       if (LOG.isDebugEnabled()) {\n         LOG.debug(event.getType() + \" is not a desired ApplicationEvent which\"\n             + \" needs to be published by NMTimelinePublisher\");\n       }\n       break;\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void publishApplicationEvent(ApplicationEvent event) {\n    // publish only when the desired event is received\n    switch (event.getType()) {\n    case INIT_APPLICATION:\n    case FINISH_APPLICATION:\n    case APPLICATION_LOG_HANDLING_FAILED:\n      // TODO need to be handled in future,\n      // not sure to publish under which entity\n      break;\n    case APPLICATION_CONTAINER_FINISHED:\n      // this is actually used to publish the container Event\n      ApplicationContainerFinishedEvent evnt \u003d\n          (ApplicationContainerFinishedEvent) event;\n      publishContainerFinishedEvent(evnt.getContainerStatus(),\n          event.getTimestamp(), evnt.getContainerStartTime());\n      break;\n\n    default:\n      if (LOG.isDebugEnabled()) {\n        LOG.debug(event.getType() + \" is not a desired ApplicationEvent which\"\n            + \" needs to be published by NMTimelinePublisher\");\n      }\n      break;\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/timelineservice/NMTimelinePublisher.java",
      "extendedDetails": {}
    },
    "84c35ac6c4a76c31d9bf9c87b87ed29394564611": {
      "type": "Ybodychange",
      "commitMessage": "YARN-4711. NM is going down with NPE\u0027s due to single thread processing of events by Timeline client (Naganarasimha G R via sjlee)\n",
      "commitDate": "10/07/16 8:45 AM",
      "commitName": "84c35ac6c4a76c31d9bf9c87b87ed29394564611",
      "commitAuthor": "Sangjin Lee",
      "commitDateOld": "10/07/16 8:45 AM",
      "commitNameOld": "6f6cc647d6e77f6cc4c66e0534f8c73bc1612a1b",
      "commitAuthorOld": "Varun Saxena",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,25 @@\n   public void publishApplicationEvent(ApplicationEvent event) {\n     // publish only when the desired event is received\n     switch (event.getType()) {\n     case INIT_APPLICATION:\n     case FINISH_APPLICATION:\n-    case APPLICATION_CONTAINER_FINISHED:\n     case APPLICATION_LOG_HANDLING_FAILED:\n-      dispatcher.getEventHandler().handle(event);\n+      // TODO need to be handled in future,\n+      // not sure to publish under which entity\n+      break;\n+    case APPLICATION_CONTAINER_FINISHED:\n+      // this is actually used to publish the container Event\n+      ApplicationContainerFinishedEvent evnt \u003d\n+          (ApplicationContainerFinishedEvent) event;\n+      publishContainerFinishedEvent(evnt.getContainerStatus(),\n+          event.getTimestamp());\n       break;\n \n     default:\n       if (LOG.isDebugEnabled()) {\n         LOG.debug(event.getType() + \" is not a desired ApplicationEvent which\"\n             + \" needs to be published by NMTimelinePublisher\");\n       }\n       break;\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void publishApplicationEvent(ApplicationEvent event) {\n    // publish only when the desired event is received\n    switch (event.getType()) {\n    case INIT_APPLICATION:\n    case FINISH_APPLICATION:\n    case APPLICATION_LOG_HANDLING_FAILED:\n      // TODO need to be handled in future,\n      // not sure to publish under which entity\n      break;\n    case APPLICATION_CONTAINER_FINISHED:\n      // this is actually used to publish the container Event\n      ApplicationContainerFinishedEvent evnt \u003d\n          (ApplicationContainerFinishedEvent) event;\n      publishContainerFinishedEvent(evnt.getContainerStatus(),\n          event.getTimestamp());\n      break;\n\n    default:\n      if (LOG.isDebugEnabled()) {\n        LOG.debug(event.getType() + \" is not a desired ApplicationEvent which\"\n            + \" needs to be published by NMTimelinePublisher\");\n      }\n      break;\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/timelineservice/NMTimelinePublisher.java",
      "extendedDetails": {}
    },
    "960af7d4717b8a8949d0b2e43949e7daab45aa88": {
      "type": "Ybodychange",
      "commitMessage": "YARN-4409. Fix javadoc and checkstyle issues in timelineservice code (Varun Saxena via sjlee)\n",
      "commitDate": "10/07/16 8:45 AM",
      "commitName": "960af7d4717b8a8949d0b2e43949e7daab45aa88",
      "commitAuthor": "Sangjin Lee",
      "commitDateOld": "10/07/16 8:45 AM",
      "commitNameOld": "6934b05c7117a12286fb2ba7a47f75e227cacb22",
      "commitAuthorOld": "Naganarasimha",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 4,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,18 @@\n   public void publishApplicationEvent(ApplicationEvent event) {\n     // publish only when the desired event is received\n     switch (event.getType()) {\n     case INIT_APPLICATION:\n     case FINISH_APPLICATION:\n     case APPLICATION_CONTAINER_FINISHED:\n     case APPLICATION_LOG_HANDLING_FAILED:\n       dispatcher.getEventHandler().handle(event);\n       break;\n \n     default:\n       if (LOG.isDebugEnabled()) {\n-        LOG.debug(event.getType()\n-            + \" is not a desired ApplicationEvent which needs to be published by\"\n-            + \" NMTimelinePublisher\");\n+        LOG.debug(event.getType() + \" is not a desired ApplicationEvent which\"\n+            + \" needs to be published by NMTimelinePublisher\");\n       }\n       break;\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void publishApplicationEvent(ApplicationEvent event) {\n    // publish only when the desired event is received\n    switch (event.getType()) {\n    case INIT_APPLICATION:\n    case FINISH_APPLICATION:\n    case APPLICATION_CONTAINER_FINISHED:\n    case APPLICATION_LOG_HANDLING_FAILED:\n      dispatcher.getEventHandler().handle(event);\n      break;\n\n    default:\n      if (LOG.isDebugEnabled()) {\n        LOG.debug(event.getType() + \" is not a desired ApplicationEvent which\"\n            + \" needs to be published by NMTimelinePublisher\");\n      }\n      break;\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/timelineservice/NMTimelinePublisher.java",
      "extendedDetails": {}
    },
    "89e5c44f9e891a3579384c3fa3766937cd4970f1": {
      "type": "Ybodychange",
      "commitMessage": "YARN-4356. Ensure the timeline service v.2 is disabled cleanly and has no\nimpact when it\u0027s turned off. Contributed by Sangjin Lee.\n",
      "commitDate": "10/07/16 8:45 AM",
      "commitName": "89e5c44f9e891a3579384c3fa3766937cd4970f1",
      "commitAuthor": "Li Lu",
      "commitDateOld": "10/07/16 8:45 AM",
      "commitNameOld": "477a30f536277bf95d7181bf1b2fdda52d83bf51",
      "commitAuthorOld": "Junping Du",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 21,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,22 +1,19 @@\n   public void publishApplicationEvent(ApplicationEvent event) {\n-    if (!publishSystemMetrics) {\n-      return;\n-    }\n     // publish only when the desired event is received\n     switch (event.getType()) {\n     case INIT_APPLICATION:\n     case FINISH_APPLICATION:\n     case APPLICATION_CONTAINER_FINISHED:\n     case APPLICATION_LOG_HANDLING_FAILED:\n       dispatcher.getEventHandler().handle(event);\n       break;\n \n     default:\n       if (LOG.isDebugEnabled()) {\n         LOG.debug(event.getType()\n             + \" is not a desired ApplicationEvent which needs to be published by\"\n             + \" NMTimelinePublisher\");\n       }\n       break;\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void publishApplicationEvent(ApplicationEvent event) {\n    // publish only when the desired event is received\n    switch (event.getType()) {\n    case INIT_APPLICATION:\n    case FINISH_APPLICATION:\n    case APPLICATION_CONTAINER_FINISHED:\n    case APPLICATION_LOG_HANDLING_FAILED:\n      dispatcher.getEventHandler().handle(event);\n      break;\n\n    default:\n      if (LOG.isDebugEnabled()) {\n        LOG.debug(event.getType()\n            + \" is not a desired ApplicationEvent which needs to be published by\"\n            + \" NMTimelinePublisher\");\n      }\n      break;\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/timelineservice/NMTimelinePublisher.java",
      "extendedDetails": {}
    },
    "477a30f536277bf95d7181bf1b2fdda52d83bf51": {
      "type": "Yintroduced",
      "commitMessage": "YARN-3045. Implement NM writing container lifecycle events to Timeline Service v2. Contributed by Naganarasimha G R.\n",
      "commitDate": "10/07/16 8:45 AM",
      "commitName": "477a30f536277bf95d7181bf1b2fdda52d83bf51",
      "commitAuthor": "Junping Du",
      "diff": "@@ -0,0 +1,22 @@\n+  public void publishApplicationEvent(ApplicationEvent event) {\n+    if (!publishSystemMetrics) {\n+      return;\n+    }\n+    // publish only when the desired event is received\n+    switch (event.getType()) {\n+    case INIT_APPLICATION:\n+    case FINISH_APPLICATION:\n+    case APPLICATION_CONTAINER_FINISHED:\n+    case APPLICATION_LOG_HANDLING_FAILED:\n+      dispatcher.getEventHandler().handle(event);\n+      break;\n+\n+    default:\n+      if (LOG.isDebugEnabled()) {\n+        LOG.debug(event.getType()\n+            + \" is not a desired ApplicationEvent which needs to be published by\"\n+            + \" NMTimelinePublisher\");\n+      }\n+      break;\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public void publishApplicationEvent(ApplicationEvent event) {\n    if (!publishSystemMetrics) {\n      return;\n    }\n    // publish only when the desired event is received\n    switch (event.getType()) {\n    case INIT_APPLICATION:\n    case FINISH_APPLICATION:\n    case APPLICATION_CONTAINER_FINISHED:\n    case APPLICATION_LOG_HANDLING_FAILED:\n      dispatcher.getEventHandler().handle(event);\n      break;\n\n    default:\n      if (LOG.isDebugEnabled()) {\n        LOG.debug(event.getType()\n            + \" is not a desired ApplicationEvent which needs to be published by\"\n            + \" NMTimelinePublisher\");\n      }\n      break;\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/timelineservice/NMTimelinePublisher.java"
    }
  }
}