{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "DatanodeDescriptor.java",
  "functionName": "addBlockToBeErasureCoded",
  "functionId": "addBlockToBeErasureCoded___block-ExtendedBlock__sources-DatanodeDescriptor[]__targets-DatanodeStorageInfo[]__liveBlockIndices-byte[]__ecPolicy-ErasureCodingPolicy",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.java",
  "functionStartLine": 660,
  "functionEndLine": 669,
  "numCommitsSeen": 195,
  "timeTaken": 2645,
  "changeHistory": [
    "a0fb2eff9b71e2e2c0e53262773b34bed82585d4",
    "4ae543fdcd6dcfbe32257b1e72a405df9aa73e17",
    "70d6f201260086a3f12beaa317fede2a99639fef"
  ],
  "changeHistoryShort": {
    "a0fb2eff9b71e2e2c0e53262773b34bed82585d4": "Ybodychange",
    "4ae543fdcd6dcfbe32257b1e72a405df9aa73e17": "Ybodychange",
    "70d6f201260086a3f12beaa317fede2a99639fef": "Yparameterchange"
  },
  "changeHistoryDetails": {
    "a0fb2eff9b71e2e2c0e53262773b34bed82585d4": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-9775. Erasure Coding : Rename BlockRecoveryWork to BlockReconstructionWork. Contributed by Rakesh R.\n\nChange-Id: I6dfc8efd94fa2bbb4eec0e4730a5a4f92c8a5519\n",
      "commitDate": "09/02/16 2:43 PM",
      "commitName": "a0fb2eff9b71e2e2c0e53262773b34bed82585d4",
      "commitAuthor": "Zhe Zhang",
      "commitDateOld": "02/02/16 12:32 PM",
      "commitNameOld": "4ae543fdcd6dcfbe32257b1e72a405df9aa73e17",
      "commitAuthorOld": "zhezhang",
      "daysBetweenCommits": 7.09,
      "commitsBetweenForRepo": 47,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,10 +1,10 @@\n   void addBlockToBeErasureCoded(ExtendedBlock block,\n       DatanodeDescriptor[] sources, DatanodeStorageInfo[] targets,\n       byte[] liveBlockIndices, ErasureCodingPolicy ecPolicy) {\n     assert (block !\u003d null \u0026\u0026 sources !\u003d null \u0026\u0026 sources.length \u003e 0);\n     BlockECReconstructionInfo task \u003d new BlockECReconstructionInfo(block,\n         sources, targets, liveBlockIndices, ecPolicy);\n     erasurecodeBlocks.offer(task);\n-    BlockManager.LOG.debug(\"Adding block recovery task \" + task + \"to \"\n+    BlockManager.LOG.debug(\"Adding block reconstruction task \" + task + \"to \"\n         + getName() + \", current queue size is \" + erasurecodeBlocks.size());\n   }\n\\ No newline at end of file\n",
      "actualSource": "  void addBlockToBeErasureCoded(ExtendedBlock block,\n      DatanodeDescriptor[] sources, DatanodeStorageInfo[] targets,\n      byte[] liveBlockIndices, ErasureCodingPolicy ecPolicy) {\n    assert (block !\u003d null \u0026\u0026 sources !\u003d null \u0026\u0026 sources.length \u003e 0);\n    BlockECReconstructionInfo task \u003d new BlockECReconstructionInfo(block,\n        sources, targets, liveBlockIndices, ecPolicy);\n    erasurecodeBlocks.offer(task);\n    BlockManager.LOG.debug(\"Adding block reconstruction task \" + task + \"to \"\n        + getName() + \", current queue size is \" + erasurecodeBlocks.size());\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.java",
      "extendedDetails": {}
    },
    "4ae543fdcd6dcfbe32257b1e72a405df9aa73e17": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-9731. Erasure Coding: Rename BlockECRecoveryCommand to BlockECReconstructionCommand. Contributed by Rakesh R.\n\nChange-Id: I405365a8395770e494b92bfe9651f4f0366d8f28\n",
      "commitDate": "02/02/16 12:32 PM",
      "commitName": "4ae543fdcd6dcfbe32257b1e72a405df9aa73e17",
      "commitAuthor": "zhezhang",
      "commitDateOld": "21/12/15 10:47 PM",
      "commitNameOld": "70d6f201260086a3f12beaa317fede2a99639fef",
      "commitAuthorOld": "Tsz-Wo Nicholas Sze",
      "daysBetweenCommits": 42.57,
      "commitsBetweenForRepo": 251,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,10 +1,10 @@\n   void addBlockToBeErasureCoded(ExtendedBlock block,\n       DatanodeDescriptor[] sources, DatanodeStorageInfo[] targets,\n       byte[] liveBlockIndices, ErasureCodingPolicy ecPolicy) {\n     assert (block !\u003d null \u0026\u0026 sources !\u003d null \u0026\u0026 sources.length \u003e 0);\n-    BlockECRecoveryInfo task \u003d new BlockECRecoveryInfo(block, sources, targets,\n-        liveBlockIndices, ecPolicy);\n+    BlockECReconstructionInfo task \u003d new BlockECReconstructionInfo(block,\n+        sources, targets, liveBlockIndices, ecPolicy);\n     erasurecodeBlocks.offer(task);\n     BlockManager.LOG.debug(\"Adding block recovery task \" + task + \"to \"\n         + getName() + \", current queue size is \" + erasurecodeBlocks.size());\n   }\n\\ No newline at end of file\n",
      "actualSource": "  void addBlockToBeErasureCoded(ExtendedBlock block,\n      DatanodeDescriptor[] sources, DatanodeStorageInfo[] targets,\n      byte[] liveBlockIndices, ErasureCodingPolicy ecPolicy) {\n    assert (block !\u003d null \u0026\u0026 sources !\u003d null \u0026\u0026 sources.length \u003e 0);\n    BlockECReconstructionInfo task \u003d new BlockECReconstructionInfo(block,\n        sources, targets, liveBlockIndices, ecPolicy);\n    erasurecodeBlocks.offer(task);\n    BlockManager.LOG.debug(\"Adding block recovery task \" + task + \"to \"\n        + getName() + \", current queue size is \" + erasurecodeBlocks.size());\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.java",
      "extendedDetails": {}
    },
    "70d6f201260086a3f12beaa317fede2a99639fef": {
      "type": "Yparameterchange",
      "commitMessage": "HDFS-9575. Use byte array for internal block indices in a striped block.  Contributed by jing9\n",
      "commitDate": "21/12/15 10:47 PM",
      "commitName": "70d6f201260086a3f12beaa317fede2a99639fef",
      "commitAuthor": "Tsz-Wo Nicholas Sze",
      "commitDateOld": "16/12/15 6:16 PM",
      "commitNameOld": "f741476146574550a1a208d58ef8be76639e5ddc",
      "commitAuthorOld": "Uma Mahesh",
      "daysBetweenCommits": 5.19,
      "commitsBetweenForRepo": 38,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,10 +1,10 @@\n   void addBlockToBeErasureCoded(ExtendedBlock block,\n       DatanodeDescriptor[] sources, DatanodeStorageInfo[] targets,\n-      short[] liveBlockIndices, ErasureCodingPolicy ecPolicy) {\n+      byte[] liveBlockIndices, ErasureCodingPolicy ecPolicy) {\n     assert (block !\u003d null \u0026\u0026 sources !\u003d null \u0026\u0026 sources.length \u003e 0);\n     BlockECRecoveryInfo task \u003d new BlockECRecoveryInfo(block, sources, targets,\n         liveBlockIndices, ecPolicy);\n     erasurecodeBlocks.offer(task);\n     BlockManager.LOG.debug(\"Adding block recovery task \" + task + \"to \"\n         + getName() + \", current queue size is \" + erasurecodeBlocks.size());\n   }\n\\ No newline at end of file\n",
      "actualSource": "  void addBlockToBeErasureCoded(ExtendedBlock block,\n      DatanodeDescriptor[] sources, DatanodeStorageInfo[] targets,\n      byte[] liveBlockIndices, ErasureCodingPolicy ecPolicy) {\n    assert (block !\u003d null \u0026\u0026 sources !\u003d null \u0026\u0026 sources.length \u003e 0);\n    BlockECRecoveryInfo task \u003d new BlockECRecoveryInfo(block, sources, targets,\n        liveBlockIndices, ecPolicy);\n    erasurecodeBlocks.offer(task);\n    BlockManager.LOG.debug(\"Adding block recovery task \" + task + \"to \"\n        + getName() + \", current queue size is \" + erasurecodeBlocks.size());\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/DatanodeDescriptor.java",
      "extendedDetails": {
        "oldValue": "[block-ExtendedBlock, sources-DatanodeDescriptor[], targets-DatanodeStorageInfo[], liveBlockIndices-short[], ecPolicy-ErasureCodingPolicy]",
        "newValue": "[block-ExtendedBlock, sources-DatanodeDescriptor[], targets-DatanodeStorageInfo[], liveBlockIndices-byte[], ecPolicy-ErasureCodingPolicy]"
      }
    }
  }
}