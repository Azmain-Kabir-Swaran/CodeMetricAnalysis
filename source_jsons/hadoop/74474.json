{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "KDiag.java",
  "functionName": "loginFromKeytab",
  "functionId": "loginFromKeytab",
  "sourceFilePath": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/KDiag.java",
  "functionStartLine": 626,
  "functionEndLine": 655,
  "numCommitsSeen": 11,
  "timeTaken": 865,
  "changeHistory": [
    "cfa8513890ec1cd7f71258ff3c3083f6d89a4fc4"
  ],
  "changeHistoryShort": {
    "cfa8513890ec1cd7f71258ff3c3083f6d89a4fc4": "Yintroduced"
  },
  "changeHistoryDetails": {
    "cfa8513890ec1cd7f71258ff3c3083f6d89a4fc4": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-12426. Add Entry point for Kerberos health check. Contributed by Steve Loughran.\n",
      "commitDate": "05/02/16 3:47 PM",
      "commitName": "cfa8513890ec1cd7f71258ff3c3083f6d89a4fc4",
      "commitAuthor": "cnauroth",
      "diff": "@@ -0,0 +1,30 @@\n+  private void loginFromKeytab() throws IOException {\n+    UserGroupInformation ugi;\n+    String identity;\n+    if (keytab !\u003d null) {\n+      File kt \u003d keytab.getCanonicalFile();\n+      println(\"Using keytab %s principal %s\", kt, principal);\n+      identity \u003d principal;\n+\n+      failif(principal \u003d\u003d null, CAT_KERBEROS, \"No principal defined\");\n+      ugi \u003d loginUserFromKeytabAndReturnUGI(principal, kt.getPath());\n+      dumpUGI(identity, ugi);\n+      validateUGI(principal, ugi);\n+\n+      title(\"Attempting to relogin\");\n+      try {\n+        // package scoped -hence the reason why this class must be in the\n+        // hadoop.security package\n+        setShouldRenewImmediatelyForTests(true);\n+        // attempt a new login\n+        ugi.reloginFromKeytab();\n+      } catch (IllegalAccessError e) {\n+        // if you\u0027ve built this class into an independent JAR, package-access\n+        // may fail. Downgrade\n+        warn(CAT_UGI, \"Failed to reset UGI -and so could not try to relogin\");\n+        LOG.debug(\"Failed to reset UGI: {}\", e, e);\n+      }\n+    } else {\n+      println(\"No keytab: attempting to log in is as current user\");\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private void loginFromKeytab() throws IOException {\n    UserGroupInformation ugi;\n    String identity;\n    if (keytab !\u003d null) {\n      File kt \u003d keytab.getCanonicalFile();\n      println(\"Using keytab %s principal %s\", kt, principal);\n      identity \u003d principal;\n\n      failif(principal \u003d\u003d null, CAT_KERBEROS, \"No principal defined\");\n      ugi \u003d loginUserFromKeytabAndReturnUGI(principal, kt.getPath());\n      dumpUGI(identity, ugi);\n      validateUGI(principal, ugi);\n\n      title(\"Attempting to relogin\");\n      try {\n        // package scoped -hence the reason why this class must be in the\n        // hadoop.security package\n        setShouldRenewImmediatelyForTests(true);\n        // attempt a new login\n        ugi.reloginFromKeytab();\n      } catch (IllegalAccessError e) {\n        // if you\u0027ve built this class into an independent JAR, package-access\n        // may fail. Downgrade\n        warn(CAT_UGI, \"Failed to reset UGI -and so could not try to relogin\");\n        LOG.debug(\"Failed to reset UGI: {}\", e, e);\n      }\n    } else {\n      println(\"No keytab: attempting to log in is as current user\");\n    }\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/KDiag.java"
    }
  }
}