{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "MountResponse.java",
  "functionName": "writeExportList",
  "functionId": "writeExportList___xdr-XDR__xid-int__exports-List__String____hostMatcher-List__NfsExports__",
  "sourceFilePath": "hadoop-common-project/hadoop-nfs/src/main/java/org/apache/hadoop/mount/MountResponse.java",
  "functionStartLine": 86,
  "functionEndLine": 109,
  "numCommitsSeen": 12,
  "timeTaken": 1445,
  "changeHistory": [
    "770b5eb2db686275df445be9280e76cc3710ffdc",
    "42d8858c5d237c4d9ab439c570a17b7fcaf781c2",
    "5e18410e06dd63113c49029894007e0878312903",
    "cbca1668317f3f2d295eea53d7bd020bda4a810f",
    "4d63b7a016232d3d816e9a0229a029a07a06757a"
  ],
  "changeHistoryShort": {
    "770b5eb2db686275df445be9280e76cc3710ffdc": "Ybodychange",
    "42d8858c5d237c4d9ab439c570a17b7fcaf781c2": "Ybodychange",
    "5e18410e06dd63113c49029894007e0878312903": "Ybodychange",
    "cbca1668317f3f2d295eea53d7bd020bda4a810f": "Ymultichange(Yparameterchange,Ybodychange)",
    "4d63b7a016232d3d816e9a0229a029a07a06757a": "Yintroduced"
  },
  "changeHistoryDetails": {
    "770b5eb2db686275df445be9280e76cc3710ffdc": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-13444. Replace org.apache.commons.io.Charsets with java.nio.charset.StandardCharsets. Contributed by Vincent Poon.\n",
      "commitDate": "01/08/16 1:35 AM",
      "commitName": "770b5eb2db686275df445be9280e76cc3710ffdc",
      "commitAuthor": "Akira Ajisaka",
      "commitDateOld": "15/12/14 11:28 AM",
      "commitNameOld": "42d8858c5d237c4d9ab439c570a17b7fcaf781c2",
      "commitAuthorOld": "Brandon Li",
      "daysBetweenCommits": 594.55,
      "commitsBetweenForRepo": 4545,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,23 +1,24 @@\n   public static XDR writeExportList(XDR xdr, int xid, List\u003cString\u003e exports,\n       List\u003cNfsExports\u003e hostMatcher) {\n     assert (exports.size() \u003d\u003d hostMatcher.size());\n \n     RpcAcceptedReply.getAcceptInstance(xid, new VerifierNone()).write(xdr);\n     for (int i \u003d 0; i \u003c exports.size(); i++) {\n       xdr.writeBoolean(true); // Value follows - yes\n       xdr.writeString(exports.get(i));\n \n       // List host groups\n       String[] hostGroups \u003d hostMatcher.get(i).getHostGroupList();\n       if (hostGroups.length \u003e 0) {\n         for (int j \u003d 0; j \u003c hostGroups.length; j++) {\n           xdr.writeBoolean(true); // Value follows - yes\n-          xdr.writeVariableOpaque(hostGroups[j].getBytes(Charsets.UTF_8));\n+          xdr.writeVariableOpaque(\n+              hostGroups[j].getBytes(StandardCharsets.UTF_8));\n         }\n       }\n       xdr.writeBoolean(false); // Value follows - no more group\n     }\n     \n     xdr.writeBoolean(false); // Value follows - no\n     return xdr;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static XDR writeExportList(XDR xdr, int xid, List\u003cString\u003e exports,\n      List\u003cNfsExports\u003e hostMatcher) {\n    assert (exports.size() \u003d\u003d hostMatcher.size());\n\n    RpcAcceptedReply.getAcceptInstance(xid, new VerifierNone()).write(xdr);\n    for (int i \u003d 0; i \u003c exports.size(); i++) {\n      xdr.writeBoolean(true); // Value follows - yes\n      xdr.writeString(exports.get(i));\n\n      // List host groups\n      String[] hostGroups \u003d hostMatcher.get(i).getHostGroupList();\n      if (hostGroups.length \u003e 0) {\n        for (int j \u003d 0; j \u003c hostGroups.length; j++) {\n          xdr.writeBoolean(true); // Value follows - yes\n          xdr.writeVariableOpaque(\n              hostGroups[j].getBytes(StandardCharsets.UTF_8));\n        }\n      }\n      xdr.writeBoolean(false); // Value follows - no more group\n    }\n    \n    xdr.writeBoolean(false); // Value follows - no\n    return xdr;\n  }",
      "path": "hadoop-common-project/hadoop-nfs/src/main/java/org/apache/hadoop/mount/MountResponse.java",
      "extendedDetails": {}
    },
    "42d8858c5d237c4d9ab439c570a17b7fcaf781c2": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-7516. Fix findbugs warnings in hdfs-nfs project. Contributed by Brandon Li\n",
      "commitDate": "15/12/14 11:28 AM",
      "commitName": "42d8858c5d237c4d9ab439c570a17b7fcaf781c2",
      "commitAuthor": "Brandon Li",
      "commitDateOld": "09/11/13 8:07 PM",
      "commitNameOld": "ec9ec0084eccdd45a8c3e37ef8121fb8bd44ecd0",
      "commitAuthorOld": "Brandon Li",
      "daysBetweenCommits": 400.64,
      "commitsBetweenForRepo": 3104,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,23 +1,23 @@\n   public static XDR writeExportList(XDR xdr, int xid, List\u003cString\u003e exports,\n       List\u003cNfsExports\u003e hostMatcher) {\n     assert (exports.size() \u003d\u003d hostMatcher.size());\n \n     RpcAcceptedReply.getAcceptInstance(xid, new VerifierNone()).write(xdr);\n     for (int i \u003d 0; i \u003c exports.size(); i++) {\n       xdr.writeBoolean(true); // Value follows - yes\n       xdr.writeString(exports.get(i));\n \n       // List host groups\n       String[] hostGroups \u003d hostMatcher.get(i).getHostGroupList();\n       if (hostGroups.length \u003e 0) {\n         for (int j \u003d 0; j \u003c hostGroups.length; j++) {\n           xdr.writeBoolean(true); // Value follows - yes\n-          xdr.writeVariableOpaque(hostGroups[j].getBytes());\n+          xdr.writeVariableOpaque(hostGroups[j].getBytes(Charsets.UTF_8));\n         }\n       }\n       xdr.writeBoolean(false); // Value follows - no more group\n     }\n     \n     xdr.writeBoolean(false); // Value follows - no\n     return xdr;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static XDR writeExportList(XDR xdr, int xid, List\u003cString\u003e exports,\n      List\u003cNfsExports\u003e hostMatcher) {\n    assert (exports.size() \u003d\u003d hostMatcher.size());\n\n    RpcAcceptedReply.getAcceptInstance(xid, new VerifierNone()).write(xdr);\n    for (int i \u003d 0; i \u003c exports.size(); i++) {\n      xdr.writeBoolean(true); // Value follows - yes\n      xdr.writeString(exports.get(i));\n\n      // List host groups\n      String[] hostGroups \u003d hostMatcher.get(i).getHostGroupList();\n      if (hostGroups.length \u003e 0) {\n        for (int j \u003d 0; j \u003c hostGroups.length; j++) {\n          xdr.writeBoolean(true); // Value follows - yes\n          xdr.writeVariableOpaque(hostGroups[j].getBytes(Charsets.UTF_8));\n        }\n      }\n      xdr.writeBoolean(false); // Value follows - no more group\n    }\n    \n    xdr.writeBoolean(false); // Value follows - no\n    return xdr;\n  }",
      "path": "hadoop-common-project/hadoop-nfs/src/main/java/org/apache/hadoop/mount/MountResponse.java",
      "extendedDetails": {}
    },
    "5e18410e06dd63113c49029894007e0878312903": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-5212. Refactor RpcMessage and NFS3Response to support different types of authentication information. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1524298 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "17/09/13 11:08 PM",
      "commitName": "5e18410e06dd63113c49029894007e0878312903",
      "commitAuthor": "Jing Zhao",
      "commitDateOld": "12/09/13 9:21 PM",
      "commitNameOld": "ede10b8a1f9a4d099c16469f827345cb359cef3d",
      "commitAuthorOld": "Brandon Li",
      "daysBetweenCommits": 5.07,
      "commitsBetweenForRepo": 31,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,23 +1,23 @@\n   public static XDR writeExportList(XDR xdr, int xid, List\u003cString\u003e exports,\n       List\u003cNfsExports\u003e hostMatcher) {\n     assert (exports.size() \u003d\u003d hostMatcher.size());\n \n-    RpcAcceptedReply.voidReply(xdr, xid);\n+    RpcAcceptedReply.getAcceptInstance(xid, new VerifierNone()).write(xdr);\n     for (int i \u003d 0; i \u003c exports.size(); i++) {\n       xdr.writeBoolean(true); // Value follows - yes\n       xdr.writeString(exports.get(i));\n \n       // List host groups\n       String[] hostGroups \u003d hostMatcher.get(i).getHostGroupList();\n       if (hostGroups.length \u003e 0) {\n         for (int j \u003d 0; j \u003c hostGroups.length; j++) {\n           xdr.writeBoolean(true); // Value follows - yes\n           xdr.writeVariableOpaque(hostGroups[j].getBytes());\n         }\n       }\n       xdr.writeBoolean(false); // Value follows - no more group\n     }\n     \n     xdr.writeBoolean(false); // Value follows - no\n     return xdr;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static XDR writeExportList(XDR xdr, int xid, List\u003cString\u003e exports,\n      List\u003cNfsExports\u003e hostMatcher) {\n    assert (exports.size() \u003d\u003d hostMatcher.size());\n\n    RpcAcceptedReply.getAcceptInstance(xid, new VerifierNone()).write(xdr);\n    for (int i \u003d 0; i \u003c exports.size(); i++) {\n      xdr.writeBoolean(true); // Value follows - yes\n      xdr.writeString(exports.get(i));\n\n      // List host groups\n      String[] hostGroups \u003d hostMatcher.get(i).getHostGroupList();\n      if (hostGroups.length \u003e 0) {\n        for (int j \u003d 0; j \u003c hostGroups.length; j++) {\n          xdr.writeBoolean(true); // Value follows - yes\n          xdr.writeVariableOpaque(hostGroups[j].getBytes());\n        }\n      }\n      xdr.writeBoolean(false); // Value follows - no more group\n    }\n    \n    xdr.writeBoolean(false); // Value follows - no\n    return xdr;\n  }",
      "path": "hadoop-common-project/hadoop-nfs/src/main/java/org/apache/hadoop/mount/MountResponse.java",
      "extendedDetails": {}
    },
    "cbca1668317f3f2d295eea53d7bd020bda4a810f": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "HDFS-5136 MNT EXPORT should give the full group list which can mount the exports. Contributed by Brandon Li\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1519222 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "31/08/13 2:12 PM",
      "commitName": "cbca1668317f3f2d295eea53d7bd020bda4a810f",
      "commitAuthor": "Brandon Li",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-5136 MNT EXPORT should give the full group list which can mount the exports. Contributed by Brandon Li\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1519222 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "31/08/13 2:12 PM",
          "commitName": "cbca1668317f3f2d295eea53d7bd020bda4a810f",
          "commitAuthor": "Brandon Li",
          "commitDateOld": "10/07/13 10:01 AM",
          "commitNameOld": "58d75576c4d2a03d4954174bc223ed0334b34fee",
          "commitAuthorOld": "Jing Zhao",
          "daysBetweenCommits": 52.17,
          "commitsBetweenForRepo": 332,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,10 +1,23 @@\n-  public static XDR writeExportList(XDR xdr, int xid, List\u003cString\u003e exports) {\n+  public static XDR writeExportList(XDR xdr, int xid, List\u003cString\u003e exports,\n+      List\u003cNfsExports\u003e hostMatcher) {\n+    assert (exports.size() \u003d\u003d hostMatcher.size());\n+\n     RpcAcceptedReply.voidReply(xdr, xid);\n-    for (String export : exports) {\n+    for (int i \u003d 0; i \u003c exports.size(); i++) {\n       xdr.writeBoolean(true); // Value follows - yes\n-      xdr.writeString(export);\n-      xdr.writeInt(0);\n+      xdr.writeString(exports.get(i));\n+\n+      // List host groups\n+      String[] hostGroups \u003d hostMatcher.get(i).getHostGroupList();\n+      if (hostGroups.length \u003e 0) {\n+        for (int j \u003d 0; j \u003c hostGroups.length; j++) {\n+          xdr.writeBoolean(true); // Value follows - yes\n+          xdr.writeVariableOpaque(hostGroups[j].getBytes());\n+        }\n+      }\n+      xdr.writeBoolean(false); // Value follows - no more group\n     }\n+    \n     xdr.writeBoolean(false); // Value follows - no\n     return xdr;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public static XDR writeExportList(XDR xdr, int xid, List\u003cString\u003e exports,\n      List\u003cNfsExports\u003e hostMatcher) {\n    assert (exports.size() \u003d\u003d hostMatcher.size());\n\n    RpcAcceptedReply.voidReply(xdr, xid);\n    for (int i \u003d 0; i \u003c exports.size(); i++) {\n      xdr.writeBoolean(true); // Value follows - yes\n      xdr.writeString(exports.get(i));\n\n      // List host groups\n      String[] hostGroups \u003d hostMatcher.get(i).getHostGroupList();\n      if (hostGroups.length \u003e 0) {\n        for (int j \u003d 0; j \u003c hostGroups.length; j++) {\n          xdr.writeBoolean(true); // Value follows - yes\n          xdr.writeVariableOpaque(hostGroups[j].getBytes());\n        }\n      }\n      xdr.writeBoolean(false); // Value follows - no more group\n    }\n    \n    xdr.writeBoolean(false); // Value follows - no\n    return xdr;\n  }",
          "path": "hadoop-common-project/hadoop-nfs/src/main/java/org/apache/hadoop/mount/MountResponse.java",
          "extendedDetails": {
            "oldValue": "[xdr-XDR, xid-int, exports-List\u003cString\u003e]",
            "newValue": "[xdr-XDR, xid-int, exports-List\u003cString\u003e, hostMatcher-List\u003cNfsExports\u003e]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-5136 MNT EXPORT should give the full group list which can mount the exports. Contributed by Brandon Li\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1519222 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "31/08/13 2:12 PM",
          "commitName": "cbca1668317f3f2d295eea53d7bd020bda4a810f",
          "commitAuthor": "Brandon Li",
          "commitDateOld": "10/07/13 10:01 AM",
          "commitNameOld": "58d75576c4d2a03d4954174bc223ed0334b34fee",
          "commitAuthorOld": "Jing Zhao",
          "daysBetweenCommits": 52.17,
          "commitsBetweenForRepo": 332,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,10 +1,23 @@\n-  public static XDR writeExportList(XDR xdr, int xid, List\u003cString\u003e exports) {\n+  public static XDR writeExportList(XDR xdr, int xid, List\u003cString\u003e exports,\n+      List\u003cNfsExports\u003e hostMatcher) {\n+    assert (exports.size() \u003d\u003d hostMatcher.size());\n+\n     RpcAcceptedReply.voidReply(xdr, xid);\n-    for (String export : exports) {\n+    for (int i \u003d 0; i \u003c exports.size(); i++) {\n       xdr.writeBoolean(true); // Value follows - yes\n-      xdr.writeString(export);\n-      xdr.writeInt(0);\n+      xdr.writeString(exports.get(i));\n+\n+      // List host groups\n+      String[] hostGroups \u003d hostMatcher.get(i).getHostGroupList();\n+      if (hostGroups.length \u003e 0) {\n+        for (int j \u003d 0; j \u003c hostGroups.length; j++) {\n+          xdr.writeBoolean(true); // Value follows - yes\n+          xdr.writeVariableOpaque(hostGroups[j].getBytes());\n+        }\n+      }\n+      xdr.writeBoolean(false); // Value follows - no more group\n     }\n+    \n     xdr.writeBoolean(false); // Value follows - no\n     return xdr;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public static XDR writeExportList(XDR xdr, int xid, List\u003cString\u003e exports,\n      List\u003cNfsExports\u003e hostMatcher) {\n    assert (exports.size() \u003d\u003d hostMatcher.size());\n\n    RpcAcceptedReply.voidReply(xdr, xid);\n    for (int i \u003d 0; i \u003c exports.size(); i++) {\n      xdr.writeBoolean(true); // Value follows - yes\n      xdr.writeString(exports.get(i));\n\n      // List host groups\n      String[] hostGroups \u003d hostMatcher.get(i).getHostGroupList();\n      if (hostGroups.length \u003e 0) {\n        for (int j \u003d 0; j \u003c hostGroups.length; j++) {\n          xdr.writeBoolean(true); // Value follows - yes\n          xdr.writeVariableOpaque(hostGroups[j].getBytes());\n        }\n      }\n      xdr.writeBoolean(false); // Value follows - no more group\n    }\n    \n    xdr.writeBoolean(false); // Value follows - no\n    return xdr;\n  }",
          "path": "hadoop-common-project/hadoop-nfs/src/main/java/org/apache/hadoop/mount/MountResponse.java",
          "extendedDetails": {}
        }
      ]
    },
    "4d63b7a016232d3d816e9a0229a029a07a06757a": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-9515. Add general interface for NFS and Mount. Contributed by Brandon Li\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1493924 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "17/06/13 1:32 PM",
      "commitName": "4d63b7a016232d3d816e9a0229a029a07a06757a",
      "commitAuthor": "Brandon Li",
      "diff": "@@ -0,0 +1,10 @@\n+  public static XDR writeExportList(XDR xdr, int xid, List\u003cString\u003e exports) {\n+    RpcAcceptedReply.voidReply(xdr, xid);\n+    for (String export : exports) {\n+      xdr.writeBoolean(true); // Value follows - yes\n+      xdr.writeString(export);\n+      xdr.writeInt(0);\n+    }\n+    xdr.writeBoolean(false); // Value follows - no\n+    return xdr;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public static XDR writeExportList(XDR xdr, int xid, List\u003cString\u003e exports) {\n    RpcAcceptedReply.voidReply(xdr, xid);\n    for (String export : exports) {\n      xdr.writeBoolean(true); // Value follows - yes\n      xdr.writeString(export);\n      xdr.writeInt(0);\n    }\n    xdr.writeBoolean(false); // Value follows - no\n    return xdr;\n  }",
      "path": "hadoop-common-project/hadoop-nfs/src/main/java/org/apache/hadoop/mount/MountResponse.java"
    }
  }
}