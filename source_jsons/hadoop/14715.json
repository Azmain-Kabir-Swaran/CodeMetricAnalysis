{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "SnapshotDiff.java",
  "functionName": "getSnapshotName",
  "functionId": "getSnapshotName___name-String",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/tools/snapshot/SnapshotDiff.java",
  "functionStartLine": 59,
  "functionEndLine": 75,
  "numCommitsSeen": 7,
  "timeTaken": 1111,
  "changeHistory": [
    "d13f6ebe20aaf5ec31c4298db3e2e761f72e906e",
    "59e968a114dfe1b513f31424211116f23525def8"
  ],
  "changeHistoryShort": {
    "d13f6ebe20aaf5ec31c4298db3e2e761f72e906e": "Ybodychange",
    "59e968a114dfe1b513f31424211116f23525def8": "Yintroduced"
  },
  "changeHistoryDetails": {
    "d13f6ebe20aaf5ec31c4298db3e2e761f72e906e": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-4666. Define \".snapshot\" as a reserved inode name so that users cannot create a file/directory with \".snapshot\" as the name.  If \".snapshot\" is used in a previous version of HDFS, it must be renamed before upgrade; otherwise, upgrade will fail.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1468238 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "15/04/13 2:42 PM",
      "commitName": "d13f6ebe20aaf5ec31c4298db3e2e761f72e906e",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "25/02/13 3:14 PM",
      "commitNameOld": "59e968a114dfe1b513f31424211116f23525def8",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 48.94,
      "commitsBetweenForRepo": 295,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,13 +1,17 @@\n   private static String getSnapshotName(String name) {\n     if (Path.CUR_DIR.equals(name)) { // current directory\n       return \"\";\n     }\n-    if (name.startsWith(HdfsConstants.DOT_SNAPSHOT_DIR + Path.SEPARATOR)\n-        || name.startsWith(Path.SEPARATOR + HdfsConstants.DOT_SNAPSHOT_DIR\n-            + Path.SEPARATOR)) {\n-      // get the snapshot name\n-      int i \u003d name.indexOf(HdfsConstants.DOT_SNAPSHOT_DIR);\n-      return name.substring(i + HdfsConstants.DOT_SNAPSHOT_DIR.length() + 1);\n+    final int i;\n+    if (name.startsWith(HdfsConstants.DOT_SNAPSHOT_DIR + Path.SEPARATOR)) {\n+      i \u003d 0;\n+    } else if (name.startsWith(\n+        HdfsConstants.SEPARATOR_DOT_SNAPSHOT_DIR + Path.SEPARATOR)) {\n+      i \u003d 1;\n+    } else {\n+      return name;\n     }\n-    return name;\n+\n+    // get the snapshot name\n+    return name.substring(i + HdfsConstants.DOT_SNAPSHOT_DIR.length() + 1);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private static String getSnapshotName(String name) {\n    if (Path.CUR_DIR.equals(name)) { // current directory\n      return \"\";\n    }\n    final int i;\n    if (name.startsWith(HdfsConstants.DOT_SNAPSHOT_DIR + Path.SEPARATOR)) {\n      i \u003d 0;\n    } else if (name.startsWith(\n        HdfsConstants.SEPARATOR_DOT_SNAPSHOT_DIR + Path.SEPARATOR)) {\n      i \u003d 1;\n    } else {\n      return name;\n    }\n\n    // get the snapshot name\n    return name.substring(i + HdfsConstants.DOT_SNAPSHOT_DIR.length() + 1);\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/tools/snapshot/SnapshotDiff.java",
      "extendedDetails": {}
    },
    "59e968a114dfe1b513f31424211116f23525def8": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-4514. Add CLI for supporting snapshot rename, diff report, and snapshottable directory listing.  Contributed by Jing Zhao\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1449956 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "25/02/13 3:14 PM",
      "commitName": "59e968a114dfe1b513f31424211116f23525def8",
      "commitAuthor": "Tsz-wo Sze",
      "diff": "@@ -0,0 +1,13 @@\n+  private static String getSnapshotName(String name) {\n+    if (Path.CUR_DIR.equals(name)) { // current directory\n+      return \"\";\n+    }\n+    if (name.startsWith(HdfsConstants.DOT_SNAPSHOT_DIR + Path.SEPARATOR)\n+        || name.startsWith(Path.SEPARATOR + HdfsConstants.DOT_SNAPSHOT_DIR\n+            + Path.SEPARATOR)) {\n+      // get the snapshot name\n+      int i \u003d name.indexOf(HdfsConstants.DOT_SNAPSHOT_DIR);\n+      return name.substring(i + HdfsConstants.DOT_SNAPSHOT_DIR.length() + 1);\n+    }\n+    return name;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private static String getSnapshotName(String name) {\n    if (Path.CUR_DIR.equals(name)) { // current directory\n      return \"\";\n    }\n    if (name.startsWith(HdfsConstants.DOT_SNAPSHOT_DIR + Path.SEPARATOR)\n        || name.startsWith(Path.SEPARATOR + HdfsConstants.DOT_SNAPSHOT_DIR\n            + Path.SEPARATOR)) {\n      // get the snapshot name\n      int i \u003d name.indexOf(HdfsConstants.DOT_SNAPSHOT_DIR);\n      return name.substring(i + HdfsConstants.DOT_SNAPSHOT_DIR.length() + 1);\n    }\n    return name;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/tools/snapshot/SnapshotDiff.java"
    }
  }
}