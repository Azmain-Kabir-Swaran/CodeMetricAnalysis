{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "ContainerLaunch.java",
  "functionName": "link",
  "functionId": "link___src-Path__dst-Path",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/launcher/ContainerLaunch.java",
  "functionStartLine": 1313,
  "functionEndLine": 1315,
  "numCommitsSeen": 95,
  "timeTaken": 4132,
  "changeHistory": [
    "dfa78484633b3ce21471d527b9c24671e3ca5df9",
    "c59af2fdf8f7f53117c626a895dab7fd78cf08ec",
    "4810e2b849e8a27a30d2906e1389adf79952006e",
    "edcfd4527ca93acdf54403aafaa070b17aff5dd0",
    "638801cce16fc1dc3259c541dc30a599faaddda1"
  ],
  "changeHistoryShort": {
    "dfa78484633b3ce21471d527b9c24671e3ca5df9": "Ybodychange",
    "c59af2fdf8f7f53117c626a895dab7fd78cf08ec": "Ybodychange",
    "4810e2b849e8a27a30d2906e1389adf79952006e": "Ybodychange",
    "edcfd4527ca93acdf54403aafaa070b17aff5dd0": "Ybodychange",
    "638801cce16fc1dc3259c541dc30a599faaddda1": "Yintroduced"
  },
  "changeHistoryDetails": {
    "dfa78484633b3ce21471d527b9c24671e3ca5df9": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-12478. Shell.getWinUtilsPath() has been renamed Shell.getWinutilsPath(). (stevel)\n",
      "commitDate": "14/10/15 12:25 PM",
      "commitName": "dfa78484633b3ce21471d527b9c24671e3ca5df9",
      "commitAuthor": "Steve Loughran",
      "commitDateOld": "13/10/15 1:49 PM",
      "commitNameOld": "c59af2fdf8f7f53117c626a895dab7fd78cf08ec",
      "commitAuthorOld": "Steve Loughran",
      "daysBetweenCommits": 0.94,
      "commitsBetweenForRepo": 13,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,8 +1,8 @@\n     protected void link(Path src, Path dst) throws IOException {\n       File srcFile \u003d new File(src.toUri().getPath());\n       String srcFileStr \u003d srcFile.getPath();\n       String dstFileStr \u003d new File(dst.toString()).getPath();\n       lineWithLenCheck(String.format(\"@%s symlink \\\"%s\\\" \\\"%s\\\"\",\n-          Shell.getWinutilsPath(), dstFileStr, srcFileStr));\n+          Shell.getWinUtilsPath(), dstFileStr, srcFileStr));\n       errorCheck();\n     }\n\\ No newline at end of file\n",
      "actualSource": "    protected void link(Path src, Path dst) throws IOException {\n      File srcFile \u003d new File(src.toUri().getPath());\n      String srcFileStr \u003d srcFile.getPath();\n      String dstFileStr \u003d new File(dst.toString()).getPath();\n      lineWithLenCheck(String.format(\"@%s symlink \\\"%s\\\" \\\"%s\\\"\",\n          Shell.getWinUtilsPath(), dstFileStr, srcFileStr));\n      errorCheck();\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/launcher/ContainerLaunch.java",
      "extendedDetails": {}
    },
    "c59af2fdf8f7f53117c626a895dab7fd78cf08ec": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-10775. Shell operations to fail with meaningful errors on windows if winutils.exe not found. (stevel)\n",
      "commitDate": "13/10/15 1:49 PM",
      "commitName": "c59af2fdf8f7f53117c626a895dab7fd78cf08ec",
      "commitAuthor": "Steve Loughran",
      "commitDateOld": "02/10/15 6:50 PM",
      "commitNameOld": "8f08532bde153811368e1b8336446fba4743f9d2",
      "commitAuthorOld": "Xuan",
      "daysBetweenCommits": 10.79,
      "commitsBetweenForRepo": 73,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,8 @@\n     protected void link(Path src, Path dst) throws IOException {\n       File srcFile \u003d new File(src.toUri().getPath());\n       String srcFileStr \u003d srcFile.getPath();\n       String dstFileStr \u003d new File(dst.toString()).getPath();\n-      // If not on Java7+ on Windows, then copy file instead of symlinking.\n-      // See also FileUtil#symLink for full explanation.\n-      if (!Shell.isJava7OrAbove() \u0026\u0026 srcFile.isFile()) {\n-        lineWithLenCheck(String.format(\"@copy \\\"%s\\\" \\\"%s\\\"\", srcFileStr, dstFileStr));\n-        errorCheck();\n-      } else {\n-        lineWithLenCheck(String.format(\"@%s symlink \\\"%s\\\" \\\"%s\\\"\", Shell.WINUTILS,\n-          dstFileStr, srcFileStr));\n-        errorCheck();\n-      }\n+      lineWithLenCheck(String.format(\"@%s symlink \\\"%s\\\" \\\"%s\\\"\",\n+          Shell.getWinutilsPath(), dstFileStr, srcFileStr));\n+      errorCheck();\n     }\n\\ No newline at end of file\n",
      "actualSource": "    protected void link(Path src, Path dst) throws IOException {\n      File srcFile \u003d new File(src.toUri().getPath());\n      String srcFileStr \u003d srcFile.getPath();\n      String dstFileStr \u003d new File(dst.toString()).getPath();\n      lineWithLenCheck(String.format(\"@%s symlink \\\"%s\\\" \\\"%s\\\"\",\n          Shell.getWinutilsPath(), dstFileStr, srcFileStr));\n      errorCheck();\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/launcher/ContainerLaunch.java",
      "extendedDetails": {}
    },
    "4810e2b849e8a27a30d2906e1389adf79952006e": {
      "type": "Ybodychange",
      "commitMessage": "YARN-1865. ShellScriptBuilder does not check for some error conditions. Contributed by Remus Rusanu.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1588693 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "19/04/14 11:55 AM",
      "commitName": "4810e2b849e8a27a30d2906e1389adf79952006e",
      "commitAuthor": "Ivan Mitic",
      "commitDateOld": "16/03/14 11:32 AM",
      "commitNameOld": "96e0ca2d272dc7ecd7f7f0e65a0c596fcc063bcb",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 34.02,
      "commitsBetweenForRepo": 240,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,13 +1,15 @@\n     protected void link(Path src, Path dst) throws IOException {\n       File srcFile \u003d new File(src.toUri().getPath());\n       String srcFileStr \u003d srcFile.getPath();\n       String dstFileStr \u003d new File(dst.toString()).getPath();\n       // If not on Java7+ on Windows, then copy file instead of symlinking.\n       // See also FileUtil#symLink for full explanation.\n       if (!Shell.isJava7OrAbove() \u0026\u0026 srcFile.isFile()) {\n-        line(String.format(\"@copy \\\"%s\\\" \\\"%s\\\"\", srcFileStr, dstFileStr));\n+        lineWithLenCheck(String.format(\"@copy \\\"%s\\\" \\\"%s\\\"\", srcFileStr, dstFileStr));\n+        errorCheck();\n       } else {\n-        line(String.format(\"@%s symlink \\\"%s\\\" \\\"%s\\\"\", Shell.WINUTILS,\n+        lineWithLenCheck(String.format(\"@%s symlink \\\"%s\\\" \\\"%s\\\"\", Shell.WINUTILS,\n           dstFileStr, srcFileStr));\n+        errorCheck();\n       }\n     }\n\\ No newline at end of file\n",
      "actualSource": "    protected void link(Path src, Path dst) throws IOException {\n      File srcFile \u003d new File(src.toUri().getPath());\n      String srcFileStr \u003d srcFile.getPath();\n      String dstFileStr \u003d new File(dst.toString()).getPath();\n      // If not on Java7+ on Windows, then copy file instead of symlinking.\n      // See also FileUtil#symLink for full explanation.\n      if (!Shell.isJava7OrAbove() \u0026\u0026 srcFile.isFile()) {\n        lineWithLenCheck(String.format(\"@copy \\\"%s\\\" \\\"%s\\\"\", srcFileStr, dstFileStr));\n        errorCheck();\n      } else {\n        lineWithLenCheck(String.format(\"@%s symlink \\\"%s\\\" \\\"%s\\\"\", Shell.WINUTILS,\n          dstFileStr, srcFileStr));\n        errorCheck();\n      }\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/launcher/ContainerLaunch.java",
      "extendedDetails": {}
    },
    "edcfd4527ca93acdf54403aafaa070b17aff5dd0": {
      "type": "Ybodychange",
      "commitMessage": "YARN-593. container launch on Windows does not correctly populate classpath with new process\u0027s environment variables and localized resources (Chris Nauroth via bikas)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1469998 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "19/04/13 12:29 PM",
      "commitName": "edcfd4527ca93acdf54403aafaa070b17aff5dd0",
      "commitAuthor": "Bikas Saha",
      "commitDateOld": "18/04/13 7:14 PM",
      "commitNameOld": "44bf8525a591b56b5c09cd4201bd193516ea9530",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 0.72,
      "commitsBetweenForRepo": 3,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,5 +1,13 @@\n     protected void link(Path src, Path dst) throws IOException {\n-      line(String.format(\"@%s symlink \\\"%s\\\" \\\"%s\\\"\", Shell.WINUTILS,\n-        new File(dst.toString()).getPath(),\n-        new File(src.toUri().getPath()).getPath()));\n+      File srcFile \u003d new File(src.toUri().getPath());\n+      String srcFileStr \u003d srcFile.getPath();\n+      String dstFileStr \u003d new File(dst.toString()).getPath();\n+      // If not on Java7+ on Windows, then copy file instead of symlinking.\n+      // See also FileUtil#symLink for full explanation.\n+      if (!Shell.isJava7OrAbove() \u0026\u0026 srcFile.isFile()) {\n+        line(String.format(\"@copy \\\"%s\\\" \\\"%s\\\"\", srcFileStr, dstFileStr));\n+      } else {\n+        line(String.format(\"@%s symlink \\\"%s\\\" \\\"%s\\\"\", Shell.WINUTILS,\n+          dstFileStr, srcFileStr));\n+      }\n     }\n\\ No newline at end of file\n",
      "actualSource": "    protected void link(Path src, Path dst) throws IOException {\n      File srcFile \u003d new File(src.toUri().getPath());\n      String srcFileStr \u003d srcFile.getPath();\n      String dstFileStr \u003d new File(dst.toString()).getPath();\n      // If not on Java7+ on Windows, then copy file instead of symlinking.\n      // See also FileUtil#symLink for full explanation.\n      if (!Shell.isJava7OrAbove() \u0026\u0026 srcFile.isFile()) {\n        line(String.format(\"@copy \\\"%s\\\" \\\"%s\\\"\", srcFileStr, dstFileStr));\n      } else {\n        line(String.format(\"@%s symlink \\\"%s\\\" \\\"%s\\\"\", Shell.WINUTILS,\n          dstFileStr, srcFileStr));\n      }\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/launcher/ContainerLaunch.java",
      "extendedDetails": {}
    },
    "638801cce16fc1dc3259c541dc30a599faaddda1": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-8952. Enhancements to support Hadoop on Windows Server and Windows Azure environments. Contributed by Ivan Mitic, Chuan Liu, Ramya Sunil, Bikas Saha, Kanna Karanam, John Gordon, Brandon Li, Chris Nauroth, David Lao, Sumadhur Reddy Bolli, Arpit Agarwal, Ahmed El Baz, Mike Liddell, Jing Zhao, Thejas Nair, Steve Maine, Ganeshan Iyer, Raja Aluri, Giridharan Kesavan, Ramya Bharathi Nimmagadda.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1453486 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "06/03/13 11:15 AM",
      "commitName": "638801cce16fc1dc3259c541dc30a599faaddda1",
      "commitAuthor": "Suresh Srinivas",
      "diff": "@@ -0,0 +1,5 @@\n+    protected void link(Path src, Path dst) throws IOException {\n+      line(String.format(\"@%s symlink \\\"%s\\\" \\\"%s\\\"\", Shell.WINUTILS,\n+        new File(dst.toString()).getPath(),\n+        new File(src.toUri().getPath()).getPath()));\n+    }\n\\ No newline at end of file\n",
      "actualSource": "    protected void link(Path src, Path dst) throws IOException {\n      line(String.format(\"@%s symlink \\\"%s\\\" \\\"%s\\\"\", Shell.WINUTILS,\n        new File(dst.toString()).getPath(),\n        new File(src.toUri().getPath()).getPath()));\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/launcher/ContainerLaunch.java"
    }
  }
}