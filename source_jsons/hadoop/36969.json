{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "RMWebAppUtil.java",
  "functionName": "createAppSubmissionContextResource",
  "functionId": "createAppSubmissionContextResource___newApp-ApplicationSubmissionContextInfo__conf-Configuration",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/RMWebAppUtil.java",
  "functionStartLine": 241,
  "functionEndLine": 259,
  "numCommitsSeen": 70,
  "timeTaken": 4815,
  "changeHistory": [
    "bcde66bed1e41b5644811fe90bfbf3d56827db36",
    "42f90ab885d9693fcc1e52f9637f7de4111110ae",
    "075ff276ca9e8c192717a50b0e18485afc8571a6"
  ],
  "changeHistoryShort": {
    "bcde66bed1e41b5644811fe90bfbf3d56827db36": "Ymultichange(Ymovefromfile,Ymodifierchange,Ybodychange,Yparameterchange)",
    "42f90ab885d9693fcc1e52f9637f7de4111110ae": "Ybodychange",
    "075ff276ca9e8c192717a50b0e18485afc8571a6": "Yintroduced"
  },
  "changeHistoryDetails": {
    "bcde66bed1e41b5644811fe90bfbf3d56827db36": {
      "type": "Ymultichange(Ymovefromfile,Ymodifierchange,Ybodychange,Yparameterchange)",
      "commitMessage": "YARN-6897. Refactoring RMWebServices by moving some util methods to RMWebAppUtil. (Giovanni Matteo Fumarola via Subru).\n",
      "commitDate": "28/07/17 3:44 PM",
      "commitName": "bcde66bed1e41b5644811fe90bfbf3d56827db36",
      "commitAuthor": "Subru Krishnan",
      "subchanges": [
        {
          "type": "Ymovefromfile",
          "commitMessage": "YARN-6897. Refactoring RMWebServices by moving some util methods to RMWebAppUtil. (Giovanni Matteo Fumarola via Subru).\n",
          "commitDate": "28/07/17 3:44 PM",
          "commitName": "bcde66bed1e41b5644811fe90bfbf3d56827db36",
          "commitAuthor": "Subru Krishnan",
          "commitDateOld": "28/07/17 2:21 PM",
          "commitNameOld": "713349a9af4654dad4d4c372454552bfd063ca5f",
          "commitAuthorOld": "Junping Du",
          "daysBetweenCommits": 0.06,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,18 +1,19 @@\n-  protected Resource createAppSubmissionContextResource(\n-      ApplicationSubmissionContextInfo newApp) throws BadRequestException {\n-    if (newApp.getResource().getvCores() \u003e rm.getConfig().getInt(\n+  private static Resource createAppSubmissionContextResource(\n+      ApplicationSubmissionContextInfo newApp, Configuration conf)\n+      throws BadRequestException {\n+    if (newApp.getResource().getvCores() \u003e conf.getInt(\n         YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES,\n         YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES)) {\n       String msg \u003d \"Requested more cores than configured max\";\n       throw new BadRequestException(msg);\n     }\n-    if (newApp.getResource().getMemorySize() \u003e rm.getConfig().getInt(\n+    if (newApp.getResource().getMemorySize() \u003e conf.getInt(\n         YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_MB,\n         YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_MB)) {\n       String msg \u003d \"Requested more memory than configured max\";\n       throw new BadRequestException(msg);\n     }\n     Resource r \u003d Resource.newInstance(newApp.getResource().getMemorySize(),\n         newApp.getResource().getvCores());\n     return r;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private static Resource createAppSubmissionContextResource(\n      ApplicationSubmissionContextInfo newApp, Configuration conf)\n      throws BadRequestException {\n    if (newApp.getResource().getvCores() \u003e conf.getInt(\n        YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES,\n        YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES)) {\n      String msg \u003d \"Requested more cores than configured max\";\n      throw new BadRequestException(msg);\n    }\n    if (newApp.getResource().getMemorySize() \u003e conf.getInt(\n        YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_MB,\n        YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_MB)) {\n      String msg \u003d \"Requested more memory than configured max\";\n      throw new BadRequestException(msg);\n    }\n    Resource r \u003d Resource.newInstance(newApp.getResource().getMemorySize(),\n        newApp.getResource().getvCores());\n    return r;\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/RMWebAppUtil.java",
          "extendedDetails": {
            "oldPath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/RMWebServices.java",
            "newPath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/RMWebAppUtil.java",
            "oldMethodName": "createAppSubmissionContextResource",
            "newMethodName": "createAppSubmissionContextResource"
          }
        },
        {
          "type": "Ymodifierchange",
          "commitMessage": "YARN-6897. Refactoring RMWebServices by moving some util methods to RMWebAppUtil. (Giovanni Matteo Fumarola via Subru).\n",
          "commitDate": "28/07/17 3:44 PM",
          "commitName": "bcde66bed1e41b5644811fe90bfbf3d56827db36",
          "commitAuthor": "Subru Krishnan",
          "commitDateOld": "28/07/17 2:21 PM",
          "commitNameOld": "713349a9af4654dad4d4c372454552bfd063ca5f",
          "commitAuthorOld": "Junping Du",
          "daysBetweenCommits": 0.06,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,18 +1,19 @@\n-  protected Resource createAppSubmissionContextResource(\n-      ApplicationSubmissionContextInfo newApp) throws BadRequestException {\n-    if (newApp.getResource().getvCores() \u003e rm.getConfig().getInt(\n+  private static Resource createAppSubmissionContextResource(\n+      ApplicationSubmissionContextInfo newApp, Configuration conf)\n+      throws BadRequestException {\n+    if (newApp.getResource().getvCores() \u003e conf.getInt(\n         YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES,\n         YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES)) {\n       String msg \u003d \"Requested more cores than configured max\";\n       throw new BadRequestException(msg);\n     }\n-    if (newApp.getResource().getMemorySize() \u003e rm.getConfig().getInt(\n+    if (newApp.getResource().getMemorySize() \u003e conf.getInt(\n         YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_MB,\n         YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_MB)) {\n       String msg \u003d \"Requested more memory than configured max\";\n       throw new BadRequestException(msg);\n     }\n     Resource r \u003d Resource.newInstance(newApp.getResource().getMemorySize(),\n         newApp.getResource().getvCores());\n     return r;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private static Resource createAppSubmissionContextResource(\n      ApplicationSubmissionContextInfo newApp, Configuration conf)\n      throws BadRequestException {\n    if (newApp.getResource().getvCores() \u003e conf.getInt(\n        YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES,\n        YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES)) {\n      String msg \u003d \"Requested more cores than configured max\";\n      throw new BadRequestException(msg);\n    }\n    if (newApp.getResource().getMemorySize() \u003e conf.getInt(\n        YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_MB,\n        YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_MB)) {\n      String msg \u003d \"Requested more memory than configured max\";\n      throw new BadRequestException(msg);\n    }\n    Resource r \u003d Resource.newInstance(newApp.getResource().getMemorySize(),\n        newApp.getResource().getvCores());\n    return r;\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/RMWebAppUtil.java",
          "extendedDetails": {
            "oldValue": "[protected]",
            "newValue": "[private, static]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "YARN-6897. Refactoring RMWebServices by moving some util methods to RMWebAppUtil. (Giovanni Matteo Fumarola via Subru).\n",
          "commitDate": "28/07/17 3:44 PM",
          "commitName": "bcde66bed1e41b5644811fe90bfbf3d56827db36",
          "commitAuthor": "Subru Krishnan",
          "commitDateOld": "28/07/17 2:21 PM",
          "commitNameOld": "713349a9af4654dad4d4c372454552bfd063ca5f",
          "commitAuthorOld": "Junping Du",
          "daysBetweenCommits": 0.06,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,18 +1,19 @@\n-  protected Resource createAppSubmissionContextResource(\n-      ApplicationSubmissionContextInfo newApp) throws BadRequestException {\n-    if (newApp.getResource().getvCores() \u003e rm.getConfig().getInt(\n+  private static Resource createAppSubmissionContextResource(\n+      ApplicationSubmissionContextInfo newApp, Configuration conf)\n+      throws BadRequestException {\n+    if (newApp.getResource().getvCores() \u003e conf.getInt(\n         YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES,\n         YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES)) {\n       String msg \u003d \"Requested more cores than configured max\";\n       throw new BadRequestException(msg);\n     }\n-    if (newApp.getResource().getMemorySize() \u003e rm.getConfig().getInt(\n+    if (newApp.getResource().getMemorySize() \u003e conf.getInt(\n         YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_MB,\n         YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_MB)) {\n       String msg \u003d \"Requested more memory than configured max\";\n       throw new BadRequestException(msg);\n     }\n     Resource r \u003d Resource.newInstance(newApp.getResource().getMemorySize(),\n         newApp.getResource().getvCores());\n     return r;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private static Resource createAppSubmissionContextResource(\n      ApplicationSubmissionContextInfo newApp, Configuration conf)\n      throws BadRequestException {\n    if (newApp.getResource().getvCores() \u003e conf.getInt(\n        YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES,\n        YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES)) {\n      String msg \u003d \"Requested more cores than configured max\";\n      throw new BadRequestException(msg);\n    }\n    if (newApp.getResource().getMemorySize() \u003e conf.getInt(\n        YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_MB,\n        YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_MB)) {\n      String msg \u003d \"Requested more memory than configured max\";\n      throw new BadRequestException(msg);\n    }\n    Resource r \u003d Resource.newInstance(newApp.getResource().getMemorySize(),\n        newApp.getResource().getvCores());\n    return r;\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/RMWebAppUtil.java",
          "extendedDetails": {}
        },
        {
          "type": "Yparameterchange",
          "commitMessage": "YARN-6897. Refactoring RMWebServices by moving some util methods to RMWebAppUtil. (Giovanni Matteo Fumarola via Subru).\n",
          "commitDate": "28/07/17 3:44 PM",
          "commitName": "bcde66bed1e41b5644811fe90bfbf3d56827db36",
          "commitAuthor": "Subru Krishnan",
          "commitDateOld": "28/07/17 2:21 PM",
          "commitNameOld": "713349a9af4654dad4d4c372454552bfd063ca5f",
          "commitAuthorOld": "Junping Du",
          "daysBetweenCommits": 0.06,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,18 +1,19 @@\n-  protected Resource createAppSubmissionContextResource(\n-      ApplicationSubmissionContextInfo newApp) throws BadRequestException {\n-    if (newApp.getResource().getvCores() \u003e rm.getConfig().getInt(\n+  private static Resource createAppSubmissionContextResource(\n+      ApplicationSubmissionContextInfo newApp, Configuration conf)\n+      throws BadRequestException {\n+    if (newApp.getResource().getvCores() \u003e conf.getInt(\n         YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES,\n         YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES)) {\n       String msg \u003d \"Requested more cores than configured max\";\n       throw new BadRequestException(msg);\n     }\n-    if (newApp.getResource().getMemorySize() \u003e rm.getConfig().getInt(\n+    if (newApp.getResource().getMemorySize() \u003e conf.getInt(\n         YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_MB,\n         YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_MB)) {\n       String msg \u003d \"Requested more memory than configured max\";\n       throw new BadRequestException(msg);\n     }\n     Resource r \u003d Resource.newInstance(newApp.getResource().getMemorySize(),\n         newApp.getResource().getvCores());\n     return r;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private static Resource createAppSubmissionContextResource(\n      ApplicationSubmissionContextInfo newApp, Configuration conf)\n      throws BadRequestException {\n    if (newApp.getResource().getvCores() \u003e conf.getInt(\n        YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES,\n        YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES)) {\n      String msg \u003d \"Requested more cores than configured max\";\n      throw new BadRequestException(msg);\n    }\n    if (newApp.getResource().getMemorySize() \u003e conf.getInt(\n        YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_MB,\n        YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_MB)) {\n      String msg \u003d \"Requested more memory than configured max\";\n      throw new BadRequestException(msg);\n    }\n    Resource r \u003d Resource.newInstance(newApp.getResource().getMemorySize(),\n        newApp.getResource().getvCores());\n    return r;\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/RMWebAppUtil.java",
          "extendedDetails": {
            "oldValue": "[newApp-ApplicationSubmissionContextInfo]",
            "newValue": "[newApp-ApplicationSubmissionContextInfo, conf-Configuration]"
          }
        }
      ]
    },
    "42f90ab885d9693fcc1e52f9637f7de4111110ae": {
      "type": "Ybodychange",
      "commitMessage": "YARN-4844. Add getMemorySize/getVirtualCoresSize to o.a.h.y.api.records.Resource. Contributed by Wangda Tan.\n",
      "commitDate": "29/05/16 8:54 AM",
      "commitName": "42f90ab885d9693fcc1e52f9637f7de4111110ae",
      "commitAuthor": "Varun Vasudev",
      "commitDateOld": "25/05/16 4:55 PM",
      "commitNameOld": "013532a95e63d7c53e601be530021d6d5a15ab7f",
      "commitAuthorOld": "Carlo Curino",
      "daysBetweenCommits": 3.67,
      "commitsBetweenForRepo": 24,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,19 @@\n   protected Resource createAppSubmissionContextResource(\n       ApplicationSubmissionContextInfo newApp) throws BadRequestException {\n     if (newApp.getResource().getvCores() \u003e rm.getConfig().getInt(\n       YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES,\n       YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES)) {\n       String msg \u003d \"Requested more cores than configured max\";\n       throw new BadRequestException(msg);\n     }\n-    if (newApp.getResource().getMemory() \u003e rm.getConfig().getInt(\n+    if (newApp.getResource().getMemorySize() \u003e rm.getConfig().getInt(\n       YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_MB,\n       YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_MB)) {\n       String msg \u003d \"Requested more memory than configured max\";\n       throw new BadRequestException(msg);\n     }\n     Resource r \u003d\n-        Resource.newInstance(newApp.getResource().getMemory(), newApp\n+        Resource.newInstance(newApp.getResource().getMemorySize(), newApp\n           .getResource().getvCores());\n     return r;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected Resource createAppSubmissionContextResource(\n      ApplicationSubmissionContextInfo newApp) throws BadRequestException {\n    if (newApp.getResource().getvCores() \u003e rm.getConfig().getInt(\n      YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES,\n      YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES)) {\n      String msg \u003d \"Requested more cores than configured max\";\n      throw new BadRequestException(msg);\n    }\n    if (newApp.getResource().getMemorySize() \u003e rm.getConfig().getInt(\n      YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_MB,\n      YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_MB)) {\n      String msg \u003d \"Requested more memory than configured max\";\n      throw new BadRequestException(msg);\n    }\n    Resource r \u003d\n        Resource.newInstance(newApp.getResource().getMemorySize(), newApp\n          .getResource().getvCores());\n    return r;\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/RMWebServices.java",
      "extendedDetails": {}
    },
    "075ff276ca9e8c192717a50b0e18485afc8571a6": {
      "type": "Yintroduced",
      "commitMessage": "YARN-1713. Added get-new-app and submit-app functionality to RM web services. Contributed by Varun Vasudev.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1607216 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "01/07/14 5:23 PM",
      "commitName": "075ff276ca9e8c192717a50b0e18485afc8571a6",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "diff": "@@ -0,0 +1,19 @@\n+  protected Resource createAppSubmissionContextResource(\n+      ApplicationSubmissionContextInfo newApp) throws BadRequestException {\n+    if (newApp.getResource().getvCores() \u003e rm.getConfig().getInt(\n+      YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES,\n+      YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES)) {\n+      String msg \u003d \"Requested more cores than configured max\";\n+      throw new BadRequestException(msg);\n+    }\n+    if (newApp.getResource().getMemory() \u003e rm.getConfig().getInt(\n+      YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_MB,\n+      YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_MB)) {\n+      String msg \u003d \"Requested more memory than configured max\";\n+      throw new BadRequestException(msg);\n+    }\n+    Resource r \u003d\n+        Resource.newInstance(newApp.getResource().getMemory(), newApp\n+          .getResource().getvCores());\n+    return r;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  protected Resource createAppSubmissionContextResource(\n      ApplicationSubmissionContextInfo newApp) throws BadRequestException {\n    if (newApp.getResource().getvCores() \u003e rm.getConfig().getInt(\n      YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES,\n      YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_VCORES)) {\n      String msg \u003d \"Requested more cores than configured max\";\n      throw new BadRequestException(msg);\n    }\n    if (newApp.getResource().getMemory() \u003e rm.getConfig().getInt(\n      YarnConfiguration.RM_SCHEDULER_MAXIMUM_ALLOCATION_MB,\n      YarnConfiguration.DEFAULT_RM_SCHEDULER_MAXIMUM_ALLOCATION_MB)) {\n      String msg \u003d \"Requested more memory than configured max\";\n      throw new BadRequestException(msg);\n    }\n    Resource r \u003d\n        Resource.newInstance(newApp.getResource().getMemory(), newApp\n          .getResource().getvCores());\n    return r;\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/RMWebServices.java"
    }
  }
}