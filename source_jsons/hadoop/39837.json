{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "MutableCSConfigurationProvider.java",
  "functionName": "updateQueue",
  "functionId": "updateQueue___updateInfo-QueueConfigInfo__proposedConf-CapacitySchedulerConfiguration__confUpdate-Map__String,String__",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/capacity/conf/MutableCSConfigurationProvider.java",
  "functionStartLine": 350,
  "functionEndLine": 370,
  "numCommitsSeen": 93,
  "timeTaken": 3114,
  "changeHistory": [
    "751b5a1ac871734c46cb934d100a5367f1dbf791",
    "a4e62530469e4c3d5b339a06adeac2146fc15fa5",
    "d8a5136b1f3761166a08969eda7a7f66d1578d7e"
  ],
  "changeHistoryShort": {
    "751b5a1ac871734c46cb934d100a5367f1dbf791": "Ybodychange",
    "a4e62530469e4c3d5b339a06adeac2146fc15fa5": "Ymovefromfile",
    "d8a5136b1f3761166a08969eda7a7f66d1578d7e": "Yintroduced"
  },
  "changeHistoryDetails": {
    "751b5a1ac871734c46cb934d100a5367f1dbf791": {
      "type": "Ybodychange",
      "commitMessage": "YARN-9791. Queue Mutation API does not allow to remove a config. Contributed by Prabhu Joseph.\n",
      "commitDate": "01/09/19 10:10 AM",
      "commitName": "751b5a1ac871734c46cb934d100a5367f1dbf791",
      "commitAuthor": "Abhishek Modi",
      "commitDateOld": "04/03/19 9:10 PM",
      "commitNameOld": "e40e2d6ad5cbe782c3a067229270738b501ed27e",
      "commitAuthorOld": "Prabhu Joseph",
      "daysBetweenCommits": 180.5,
      "commitsBetweenForRepo": 1393,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,21 @@\n   private void updateQueue(QueueConfigInfo updateInfo,\n       CapacitySchedulerConfiguration proposedConf,\n       Map\u003cString, String\u003e confUpdate) {\n     if (updateInfo \u003d\u003d null) {\n       return;\n     } else {\n       String queuePath \u003d updateInfo.getQueue();\n       String keyPrefix \u003d CapacitySchedulerConfiguration.PREFIX\n           + queuePath + CapacitySchedulerConfiguration.DOT;\n       for (Map.Entry\u003cString, String\u003e kv : updateInfo.getParams().entrySet()) {\n-        if (kv.getValue() \u003d\u003d null) {\n+        String keyValue \u003d kv.getValue();\n+        if (keyValue \u003d\u003d null || keyValue.isEmpty()) {\n+          keyValue \u003d null;\n           proposedConf.unset(keyPrefix + kv.getKey());\n         } else {\n-          proposedConf.set(keyPrefix + kv.getKey(), kv.getValue());\n+          proposedConf.set(keyPrefix + kv.getKey(), keyValue);\n         }\n-        confUpdate.put(keyPrefix + kv.getKey(), kv.getValue());\n+        confUpdate.put(keyPrefix + kv.getKey(), keyValue);\n       }\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void updateQueue(QueueConfigInfo updateInfo,\n      CapacitySchedulerConfiguration proposedConf,\n      Map\u003cString, String\u003e confUpdate) {\n    if (updateInfo \u003d\u003d null) {\n      return;\n    } else {\n      String queuePath \u003d updateInfo.getQueue();\n      String keyPrefix \u003d CapacitySchedulerConfiguration.PREFIX\n          + queuePath + CapacitySchedulerConfiguration.DOT;\n      for (Map.Entry\u003cString, String\u003e kv : updateInfo.getParams().entrySet()) {\n        String keyValue \u003d kv.getValue();\n        if (keyValue \u003d\u003d null || keyValue.isEmpty()) {\n          keyValue \u003d null;\n          proposedConf.unset(keyPrefix + kv.getKey());\n        } else {\n          proposedConf.set(keyPrefix + kv.getKey(), keyValue);\n        }\n        confUpdate.put(keyPrefix + kv.getKey(), keyValue);\n      }\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/capacity/conf/MutableCSConfigurationProvider.java",
      "extendedDetails": {}
    },
    "a4e62530469e4c3d5b339a06adeac2146fc15fa5": {
      "type": "Ymovefromfile",
      "commitMessage": "YARN-5949. Add pluggable configuration ACL policy interface and implementation. (Jonathan Hung via wangda)\n\nChange-Id: Ib98e82ff753bede21fcab2e6ca9ec1e7a5a2008f\n",
      "commitDate": "09/10/17 11:11 AM",
      "commitName": "a4e62530469e4c3d5b339a06adeac2146fc15fa5",
      "commitAuthor": "Wangda Tan",
      "commitDateOld": "09/10/17 11:11 AM",
      "commitNameOld": "d8a5136b1f3761166a08969eda7a7f66d1578d7e",
      "commitAuthorOld": "Wangda Tan",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,19 @@\n   private void updateQueue(QueueConfigInfo updateInfo,\n       CapacitySchedulerConfiguration proposedConf,\n       Map\u003cString, String\u003e confUpdate) {\n     if (updateInfo \u003d\u003d null) {\n       return;\n     } else {\n       String queuePath \u003d updateInfo.getQueue();\n-      String keyPrefix \u003d CapacitySchedulerConfiguration.PREFIX +\n-          queuePath + CapacitySchedulerConfiguration.DOT;\n+      String keyPrefix \u003d CapacitySchedulerConfiguration.PREFIX\n+          + queuePath + CapacitySchedulerConfiguration.DOT;\n       for (Map.Entry\u003cString, String\u003e kv : updateInfo.getParams().entrySet()) {\n         if (kv.getValue() \u003d\u003d null) {\n           proposedConf.unset(keyPrefix + kv.getKey());\n         } else {\n           proposedConf.set(keyPrefix + kv.getKey(), kv.getValue());\n         }\n         confUpdate.put(keyPrefix + kv.getKey(), kv.getValue());\n       }\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void updateQueue(QueueConfigInfo updateInfo,\n      CapacitySchedulerConfiguration proposedConf,\n      Map\u003cString, String\u003e confUpdate) {\n    if (updateInfo \u003d\u003d null) {\n      return;\n    } else {\n      String queuePath \u003d updateInfo.getQueue();\n      String keyPrefix \u003d CapacitySchedulerConfiguration.PREFIX\n          + queuePath + CapacitySchedulerConfiguration.DOT;\n      for (Map.Entry\u003cString, String\u003e kv : updateInfo.getParams().entrySet()) {\n        if (kv.getValue() \u003d\u003d null) {\n          proposedConf.unset(keyPrefix + kv.getKey());\n        } else {\n          proposedConf.set(keyPrefix + kv.getKey(), kv.getValue());\n        }\n        confUpdate.put(keyPrefix + kv.getKey(), kv.getValue());\n      }\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/capacity/conf/MutableCSConfigurationProvider.java",
      "extendedDetails": {
        "oldPath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/RMWebServices.java",
        "newPath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/capacity/conf/MutableCSConfigurationProvider.java",
        "oldMethodName": "updateQueue",
        "newMethodName": "updateQueue"
      }
    },
    "d8a5136b1f3761166a08969eda7a7f66d1578d7e": {
      "type": "Yintroduced",
      "commitMessage": "YARN-5952. Create REST API for changing YARN scheduler configurations. (Jonathan Hung via wangda)\n",
      "commitDate": "09/10/17 11:11 AM",
      "commitName": "d8a5136b1f3761166a08969eda7a7f66d1578d7e",
      "commitAuthor": "Wangda Tan",
      "diff": "@@ -0,0 +1,19 @@\n+  private void updateQueue(QueueConfigInfo updateInfo,\n+      CapacitySchedulerConfiguration proposedConf,\n+      Map\u003cString, String\u003e confUpdate) {\n+    if (updateInfo \u003d\u003d null) {\n+      return;\n+    } else {\n+      String queuePath \u003d updateInfo.getQueue();\n+      String keyPrefix \u003d CapacitySchedulerConfiguration.PREFIX +\n+          queuePath + CapacitySchedulerConfiguration.DOT;\n+      for (Map.Entry\u003cString, String\u003e kv : updateInfo.getParams().entrySet()) {\n+        if (kv.getValue() \u003d\u003d null) {\n+          proposedConf.unset(keyPrefix + kv.getKey());\n+        } else {\n+          proposedConf.set(keyPrefix + kv.getKey(), kv.getValue());\n+        }\n+        confUpdate.put(keyPrefix + kv.getKey(), kv.getValue());\n+      }\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private void updateQueue(QueueConfigInfo updateInfo,\n      CapacitySchedulerConfiguration proposedConf,\n      Map\u003cString, String\u003e confUpdate) {\n    if (updateInfo \u003d\u003d null) {\n      return;\n    } else {\n      String queuePath \u003d updateInfo.getQueue();\n      String keyPrefix \u003d CapacitySchedulerConfiguration.PREFIX +\n          queuePath + CapacitySchedulerConfiguration.DOT;\n      for (Map.Entry\u003cString, String\u003e kv : updateInfo.getParams().entrySet()) {\n        if (kv.getValue() \u003d\u003d null) {\n          proposedConf.unset(keyPrefix + kv.getKey());\n        } else {\n          proposedConf.set(keyPrefix + kv.getKey(), kv.getValue());\n        }\n        confUpdate.put(keyPrefix + kv.getKey(), kv.getValue());\n      }\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/RMWebServices.java"
    }
  }
}