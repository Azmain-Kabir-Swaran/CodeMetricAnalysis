{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "TimelineServerUtils.java",
  "functionName": "setTimelineFilters",
  "functionId": "setTimelineFilters___conf-Configuration__configuredInitializers-String__defaultInitializers-Set__String__",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-common/src/main/java/org/apache/hadoop/yarn/server/util/timeline/TimelineServerUtils.java",
  "functionStartLine": 52,
  "functionEndLine": 76,
  "numCommitsSeen": 4,
  "timeTaken": 967,
  "changeHistory": [
    "294695dd57cb75f2756a31a54264bdd37b32bb01",
    "652bcbb3e4950758e61ce123ecc1798ae2b60a7f",
    "879de51206ddef132c092ee21e8b6c6e5976a56e"
  ],
  "changeHistoryShort": {
    "294695dd57cb75f2756a31a54264bdd37b32bb01": "Ybodychange",
    "652bcbb3e4950758e61ce123ecc1798ae2b60a7f": "Ybodychange",
    "879de51206ddef132c092ee21e8b6c6e5976a56e": "Yintroduced"
  },
  "changeHistoryDetails": {
    "294695dd57cb75f2756a31a54264bdd37b32bb01": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-16314.  Make sure all web end points are covered by the same authentication filter.\n               Contributed by Prabhu Joseph\n",
      "commitDate": "05/06/19 3:55 PM",
      "commitName": "294695dd57cb75f2756a31a54264bdd37b32bb01",
      "commitAuthor": "Eric Yang",
      "commitDateOld": "18/03/19 10:57 AM",
      "commitNameOld": "5f6e22516668ff94a76737ad5e2cdcb2ff9f6dfd",
      "commitAuthorOld": "Eric Yang",
      "daysBetweenCommits": 79.21,
      "commitsBetweenForRepo": 493,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,20 +1,25 @@\n   public static void setTimelineFilters(Configuration conf,\n       String configuredInitializers, Set\u003cString\u003e defaultInitializers) {\n+\n+    Set\u003cString\u003e ignoreInitializers \u003d new LinkedHashSet\u003c\u003e();\n+    ignoreInitializers.add(AuthenticationFilterInitializer.class.getName());\n+    ignoreInitializers.add(\n+        ProxyUserAuthenticationFilterInitializer.class.getName());\n+\n     String[] parts \u003d configuredInitializers.split(\",\");\n     Set\u003cString\u003e target \u003d new LinkedHashSet\u003cString\u003e();\n     for (String filterInitializer : parts) {\n       filterInitializer \u003d filterInitializer.trim();\n-      if (filterInitializer.equals(\n-          AuthenticationFilterInitializer.class.getName()) ||\n+      if (ignoreInitializers.contains(filterInitializer) ||\n           filterInitializer.isEmpty()) {\n         continue;\n       }\n       target.add(filterInitializer);\n     }\n     target.addAll(defaultInitializers);\n     String actualInitializers \u003d\n         org.apache.commons.lang3.StringUtils.join(target, \",\");\n     LOG.info(\"Filter initializers set for timeline service: \" +\n         actualInitializers);\n     conf.set(\"hadoop.http.filter.initializers\", actualInitializers);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void setTimelineFilters(Configuration conf,\n      String configuredInitializers, Set\u003cString\u003e defaultInitializers) {\n\n    Set\u003cString\u003e ignoreInitializers \u003d new LinkedHashSet\u003c\u003e();\n    ignoreInitializers.add(AuthenticationFilterInitializer.class.getName());\n    ignoreInitializers.add(\n        ProxyUserAuthenticationFilterInitializer.class.getName());\n\n    String[] parts \u003d configuredInitializers.split(\",\");\n    Set\u003cString\u003e target \u003d new LinkedHashSet\u003cString\u003e();\n    for (String filterInitializer : parts) {\n      filterInitializer \u003d filterInitializer.trim();\n      if (ignoreInitializers.contains(filterInitializer) ||\n          filterInitializer.isEmpty()) {\n        continue;\n      }\n      target.add(filterInitializer);\n    }\n    target.addAll(defaultInitializers);\n    String actualInitializers \u003d\n        org.apache.commons.lang3.StringUtils.join(target, \",\");\n    LOG.info(\"Filter initializers set for timeline service: \" +\n        actualInitializers);\n    conf.set(\"hadoop.http.filter.initializers\", actualInitializers);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-common/src/main/java/org/apache/hadoop/yarn/server/util/timeline/TimelineServerUtils.java",
      "extendedDetails": {}
    },
    "652bcbb3e4950758e61ce123ecc1798ae2b60a7f": {
      "type": "Ybodychange",
      "commitMessage": "YARN-8363. Upgrade commons-lang version to 3.7 in hadoop-yarn-project. Contributed by Takanobu Asanuma.\n",
      "commitDate": "12/06/18 8:35 AM",
      "commitName": "652bcbb3e4950758e61ce123ecc1798ae2b60a7f",
      "commitAuthor": "Akira Ajisaka",
      "commitDateOld": "29/08/17 10:59 PM",
      "commitNameOld": "879de51206ddef132c092ee21e8b6c6e5976a56e",
      "commitAuthorOld": "Jian He",
      "daysBetweenCommits": 286.4,
      "commitsBetweenForRepo": 2716,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,20 +1,20 @@\n   public static void setTimelineFilters(Configuration conf,\n       String configuredInitializers, Set\u003cString\u003e defaultInitializers) {\n     String[] parts \u003d configuredInitializers.split(\",\");\n     Set\u003cString\u003e target \u003d new LinkedHashSet\u003cString\u003e();\n     for (String filterInitializer : parts) {\n       filterInitializer \u003d filterInitializer.trim();\n       if (filterInitializer.equals(\n           AuthenticationFilterInitializer.class.getName()) ||\n           filterInitializer.isEmpty()) {\n         continue;\n       }\n       target.add(filterInitializer);\n     }\n     target.addAll(defaultInitializers);\n     String actualInitializers \u003d\n-        org.apache.commons.lang.StringUtils.join(target, \",\");\n+        org.apache.commons.lang3.StringUtils.join(target, \",\");\n     LOG.info(\"Filter initializers set for timeline service: \" +\n         actualInitializers);\n     conf.set(\"hadoop.http.filter.initializers\", actualInitializers);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void setTimelineFilters(Configuration conf,\n      String configuredInitializers, Set\u003cString\u003e defaultInitializers) {\n    String[] parts \u003d configuredInitializers.split(\",\");\n    Set\u003cString\u003e target \u003d new LinkedHashSet\u003cString\u003e();\n    for (String filterInitializer : parts) {\n      filterInitializer \u003d filterInitializer.trim();\n      if (filterInitializer.equals(\n          AuthenticationFilterInitializer.class.getName()) ||\n          filterInitializer.isEmpty()) {\n        continue;\n      }\n      target.add(filterInitializer);\n    }\n    target.addAll(defaultInitializers);\n    String actualInitializers \u003d\n        org.apache.commons.lang3.StringUtils.join(target, \",\");\n    LOG.info(\"Filter initializers set for timeline service: \" +\n        actualInitializers);\n    conf.set(\"hadoop.http.filter.initializers\", actualInitializers);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-common/src/main/java/org/apache/hadoop/yarn/server/util/timeline/TimelineServerUtils.java",
      "extendedDetails": {}
    },
    "879de51206ddef132c092ee21e8b6c6e5976a56e": {
      "type": "Yintroduced",
      "commitMessage": "YARN-5647. [ATSv2 Security] Collector side changes for loading auth filters and principals. Contributed by Varun Saxena\n",
      "commitDate": "29/08/17 10:59 PM",
      "commitName": "879de51206ddef132c092ee21e8b6c6e5976a56e",
      "commitAuthor": "Jian He",
      "diff": "@@ -0,0 +1,20 @@\n+  public static void setTimelineFilters(Configuration conf,\n+      String configuredInitializers, Set\u003cString\u003e defaultInitializers) {\n+    String[] parts \u003d configuredInitializers.split(\",\");\n+    Set\u003cString\u003e target \u003d new LinkedHashSet\u003cString\u003e();\n+    for (String filterInitializer : parts) {\n+      filterInitializer \u003d filterInitializer.trim();\n+      if (filterInitializer.equals(\n+          AuthenticationFilterInitializer.class.getName()) ||\n+          filterInitializer.isEmpty()) {\n+        continue;\n+      }\n+      target.add(filterInitializer);\n+    }\n+    target.addAll(defaultInitializers);\n+    String actualInitializers \u003d\n+        org.apache.commons.lang.StringUtils.join(target, \",\");\n+    LOG.info(\"Filter initializers set for timeline service: \" +\n+        actualInitializers);\n+    conf.set(\"hadoop.http.filter.initializers\", actualInitializers);\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public static void setTimelineFilters(Configuration conf,\n      String configuredInitializers, Set\u003cString\u003e defaultInitializers) {\n    String[] parts \u003d configuredInitializers.split(\",\");\n    Set\u003cString\u003e target \u003d new LinkedHashSet\u003cString\u003e();\n    for (String filterInitializer : parts) {\n      filterInitializer \u003d filterInitializer.trim();\n      if (filterInitializer.equals(\n          AuthenticationFilterInitializer.class.getName()) ||\n          filterInitializer.isEmpty()) {\n        continue;\n      }\n      target.add(filterInitializer);\n    }\n    target.addAll(defaultInitializers);\n    String actualInitializers \u003d\n        org.apache.commons.lang.StringUtils.join(target, \",\");\n    LOG.info(\"Filter initializers set for timeline service: \" +\n        actualInitializers);\n    conf.set(\"hadoop.http.filter.initializers\", actualInitializers);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-common/src/main/java/org/apache/hadoop/yarn/server/util/timeline/TimelineServerUtils.java"
    }
  }
}