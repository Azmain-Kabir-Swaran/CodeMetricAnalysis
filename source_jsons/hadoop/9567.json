{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "Command.java",
  "functionName": "getNodes",
  "functionId": "getNodes___listArg-String",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/diskbalancer/command/Command.java",
  "functionStartLine": 308,
  "functionEndLine": 343,
  "numCommitsSeen": 24,
  "timeTaken": 850,
  "changeHistory": [
    "8a93f45a80932a1ef62a6c20551e8cab95888fee",
    "20ae1fa259b36a7bc11b0f8de1ebf753c858f93c"
  ],
  "changeHistoryShort": {
    "8a93f45a80932a1ef62a6c20551e8cab95888fee": "Ybodychange",
    "20ae1fa259b36a7bc11b0f8de1ebf753c858f93c": "Yintroduced"
  },
  "changeHistoryDetails": {
    "8a93f45a80932a1ef62a6c20551e8cab95888fee": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-10821. DiskBalancer: Report command support with multiple nodes. Contributed by Yiqun Lin.\n",
      "commitDate": "12/09/16 3:45 PM",
      "commitName": "8a93f45a80932a1ef62a6c20551e8cab95888fee",
      "commitAuthor": "Anu Engineer",
      "commitDateOld": "08/09/16 7:26 PM",
      "commitNameOld": "35c5943b8ba394191405555cdfc5e6127053ee97",
      "commitAuthorOld": "Anu Engineer",
      "daysBetweenCommits": 3.85,
      "commitsBetweenForRepo": 12,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,23 +1,36 @@\n   protected List\u003cDiskBalancerDataNode\u003e getNodes(String listArg)\n       throws IOException {\n     Set\u003cString\u003e nodeNames \u003d null;\n     List\u003cDiskBalancerDataNode\u003e nodeList \u003d Lists.newArrayList();\n+    List\u003cString\u003e invalidNodeList \u003d Lists.newArrayList();\n \n     if ((listArg \u003d\u003d null) || listArg.isEmpty()) {\n       return nodeList;\n     }\n     nodeNames \u003d getNodeList(listArg);\n \n     DiskBalancerDataNode node \u003d null;\n     if (!nodeNames.isEmpty()) {\n       for (String name : nodeNames) {\n         node \u003d getNode(name);\n \n         if (node !\u003d null) {\n           nodeList.add(node);\n+        } else {\n+          invalidNodeList.add(name);\n         }\n       }\n     }\n \n+    if (!invalidNodeList.isEmpty()) {\n+      String invalidNodes \u003d StringUtils.join(invalidNodeList.toArray(), \",\");\n+      String warnMsg \u003d String.format(\n+          \"The node(s) \u0027%s\u0027 not found. \"\n+          + \"Please make sure that \u0027%s\u0027 exists in the cluster.\",\n+          invalidNodes, invalidNodes);\n+      throw new DiskBalancerException(warnMsg,\n+          DiskBalancerException.Result.INVALID_NODE);\n+    }\n+\n     return nodeList;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected List\u003cDiskBalancerDataNode\u003e getNodes(String listArg)\n      throws IOException {\n    Set\u003cString\u003e nodeNames \u003d null;\n    List\u003cDiskBalancerDataNode\u003e nodeList \u003d Lists.newArrayList();\n    List\u003cString\u003e invalidNodeList \u003d Lists.newArrayList();\n\n    if ((listArg \u003d\u003d null) || listArg.isEmpty()) {\n      return nodeList;\n    }\n    nodeNames \u003d getNodeList(listArg);\n\n    DiskBalancerDataNode node \u003d null;\n    if (!nodeNames.isEmpty()) {\n      for (String name : nodeNames) {\n        node \u003d getNode(name);\n\n        if (node !\u003d null) {\n          nodeList.add(node);\n        } else {\n          invalidNodeList.add(name);\n        }\n      }\n    }\n\n    if (!invalidNodeList.isEmpty()) {\n      String invalidNodes \u003d StringUtils.join(invalidNodeList.toArray(), \",\");\n      String warnMsg \u003d String.format(\n          \"The node(s) \u0027%s\u0027 not found. \"\n          + \"Please make sure that \u0027%s\u0027 exists in the cluster.\",\n          invalidNodes, invalidNodes);\n      throw new DiskBalancerException(warnMsg,\n          DiskBalancerException.Result.INVALID_NODE);\n    }\n\n    return nodeList;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/diskbalancer/command/Command.java",
      "extendedDetails": {}
    },
    "20ae1fa259b36a7bc11b0f8de1ebf753c858f93c": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-10813. DiskBalancer: Add the getNodeList method in Command. Contributed by Yiqun Lin.\n",
      "commitDate": "30/08/16 6:42 PM",
      "commitName": "20ae1fa259b36a7bc11b0f8de1ebf753c858f93c",
      "commitAuthor": "Anu Engineer",
      "diff": "@@ -0,0 +1,23 @@\n+  protected List\u003cDiskBalancerDataNode\u003e getNodes(String listArg)\n+      throws IOException {\n+    Set\u003cString\u003e nodeNames \u003d null;\n+    List\u003cDiskBalancerDataNode\u003e nodeList \u003d Lists.newArrayList();\n+\n+    if ((listArg \u003d\u003d null) || listArg.isEmpty()) {\n+      return nodeList;\n+    }\n+    nodeNames \u003d getNodeList(listArg);\n+\n+    DiskBalancerDataNode node \u003d null;\n+    if (!nodeNames.isEmpty()) {\n+      for (String name : nodeNames) {\n+        node \u003d getNode(name);\n+\n+        if (node !\u003d null) {\n+          nodeList.add(node);\n+        }\n+      }\n+    }\n+\n+    return nodeList;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  protected List\u003cDiskBalancerDataNode\u003e getNodes(String listArg)\n      throws IOException {\n    Set\u003cString\u003e nodeNames \u003d null;\n    List\u003cDiskBalancerDataNode\u003e nodeList \u003d Lists.newArrayList();\n\n    if ((listArg \u003d\u003d null) || listArg.isEmpty()) {\n      return nodeList;\n    }\n    nodeNames \u003d getNodeList(listArg);\n\n    DiskBalancerDataNode node \u003d null;\n    if (!nodeNames.isEmpty()) {\n      for (String name : nodeNames) {\n        node \u003d getNode(name);\n\n        if (node !\u003d null) {\n          nodeList.add(node);\n        }\n      }\n    }\n\n    return nodeList;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/diskbalancer/command/Command.java"
    }
  }
}