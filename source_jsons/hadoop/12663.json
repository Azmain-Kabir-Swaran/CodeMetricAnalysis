{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "Mover.java",
  "functionName": "isSnapshotPathInCurrent",
  "functionId": "isSnapshotPathInCurrent___path-String",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/mover/Mover.java",
  "functionStartLine": 269,
  "functionEndLine": 283,
  "numCommitsSeen": 54,
  "timeTaken": 1498,
  "changeHistory": [
    "603cbe5eead655a56cbb6bdbfa1414c9b05e2bbc"
  ],
  "changeHistoryShort": {
    "603cbe5eead655a56cbb6bdbfa1414c9b05e2bbc": "Yintroduced"
  },
  "changeHistoryDetails": {
    "603cbe5eead655a56cbb6bdbfa1414c9b05e2bbc": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-6863. Archival Storage: Support migration for snapshot paths. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-6584@1619627 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "21/08/14 4:41 PM",
      "commitName": "603cbe5eead655a56cbb6bdbfa1414c9b05e2bbc",
      "commitAuthor": "Jing Zhao",
      "diff": "@@ -0,0 +1,15 @@\n+    private boolean isSnapshotPathInCurrent(String path) throws IOException {\n+      // if the parent path contains \"/.snapshot/\", this is a snapshot path\n+      if (path.contains(HdfsConstants.SEPARATOR_DOT_SNAPSHOT_DIR_SEPARATOR)) {\n+        String[] pathComponents \u003d INode.getPathNames(path);\n+        if (HdfsConstants.DOT_SNAPSHOT_DIR\n+            .equals(pathComponents[pathComponents.length - 2])) {\n+          // this is a path for a specific snapshot (e.g., /foo/.snapshot/s1)\n+          return false;\n+        }\n+        String nonSnapshotPath \u003d convertSnapshotPath(pathComponents);\n+        return dfs.getFileInfo(nonSnapshotPath) !\u003d null;\n+      } else {\n+        return false;\n+      }\n+    }\n\\ No newline at end of file\n",
      "actualSource": "    private boolean isSnapshotPathInCurrent(String path) throws IOException {\n      // if the parent path contains \"/.snapshot/\", this is a snapshot path\n      if (path.contains(HdfsConstants.SEPARATOR_DOT_SNAPSHOT_DIR_SEPARATOR)) {\n        String[] pathComponents \u003d INode.getPathNames(path);\n        if (HdfsConstants.DOT_SNAPSHOT_DIR\n            .equals(pathComponents[pathComponents.length - 2])) {\n          // this is a path for a specific snapshot (e.g., /foo/.snapshot/s1)\n          return false;\n        }\n        String nonSnapshotPath \u003d convertSnapshotPath(pathComponents);\n        return dfs.getFileInfo(nonSnapshotPath) !\u003d null;\n      } else {\n        return false;\n      }\n    }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/mover/Mover.java"
    }
  }
}