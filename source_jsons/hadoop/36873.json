{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "RMWebServices.java",
  "functionName": "getSchedulerConfigurationVersion",
  "functionId": "getSchedulerConfigurationVersion___hsr-HttpServletRequest(annotations-@Context)",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/RMWebServices.java",
  "functionStartLine": 2768,
  "functionEndLine": 2795,
  "numCommitsSeen": 106,
  "timeTaken": 1481,
  "changeHistory": [
    "be901f49628a553cfe6a3942478cb528cce2b266"
  ],
  "changeHistoryShort": {
    "be901f49628a553cfe6a3942478cb528cce2b266": "Yintroduced"
  },
  "changeHistoryDetails": {
    "be901f49628a553cfe6a3942478cb528cce2b266": {
      "type": "Yintroduced",
      "commitMessage": "YARN-9873. Mutation API Config Change need to update Version Number. Contributed by Prabhu Joseph\n",
      "commitDate": "09/10/19 3:23 AM",
      "commitName": "be901f49628a553cfe6a3942478cb528cce2b266",
      "commitAuthor": "Sunil G",
      "diff": "@@ -0,0 +1,28 @@\n+  public Response getSchedulerConfigurationVersion(@Context\n+      HttpServletRequest hsr) throws AuthorizationException {\n+    // Only admin user is allowed to get scheduler conf version\n+    UserGroupInformation callerUGI \u003d getCallerUserGroupInformation(hsr, true);\n+    initForWritableEndpoints(callerUGI, true);\n+\n+    ResourceScheduler scheduler \u003d rm.getResourceScheduler();\n+    if (scheduler instanceof MutableConfScheduler\n+        \u0026\u0026 ((MutableConfScheduler) scheduler).isConfigurationMutable()) {\n+      MutableConfigurationProvider mutableConfigurationProvider \u003d\n+          ((MutableConfScheduler) scheduler).getMutableConfProvider();\n+\n+      try {\n+        long configVersion \u003d mutableConfigurationProvider\n+            .getConfigVersion();\n+        return Response.status(Status.OK)\n+            .entity(new ConfigVersionInfo(configVersion)).build();\n+      } catch (Exception e) {\n+        LOG.error(\"Exception thrown when fetching configuration version.\", e);\n+        return Response.status(Status.BAD_REQUEST).entity(e.getMessage())\n+            .build();\n+      }\n+    } else {\n+      return Response.status(Status.BAD_REQUEST)\n+          .entity(\"Configuration Version only supported by \"\n+          + \"MutableConfScheduler.\").build();\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public Response getSchedulerConfigurationVersion(@Context\n      HttpServletRequest hsr) throws AuthorizationException {\n    // Only admin user is allowed to get scheduler conf version\n    UserGroupInformation callerUGI \u003d getCallerUserGroupInformation(hsr, true);\n    initForWritableEndpoints(callerUGI, true);\n\n    ResourceScheduler scheduler \u003d rm.getResourceScheduler();\n    if (scheduler instanceof MutableConfScheduler\n        \u0026\u0026 ((MutableConfScheduler) scheduler).isConfigurationMutable()) {\n      MutableConfigurationProvider mutableConfigurationProvider \u003d\n          ((MutableConfScheduler) scheduler).getMutableConfProvider();\n\n      try {\n        long configVersion \u003d mutableConfigurationProvider\n            .getConfigVersion();\n        return Response.status(Status.OK)\n            .entity(new ConfigVersionInfo(configVersion)).build();\n      } catch (Exception e) {\n        LOG.error(\"Exception thrown when fetching configuration version.\", e);\n        return Response.status(Status.BAD_REQUEST).entity(e.getMessage())\n            .build();\n      }\n    } else {\n      return Response.status(Status.BAD_REQUEST)\n          .entity(\"Configuration Version only supported by \"\n          + \"MutableConfScheduler.\").build();\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/RMWebServices.java"
    }
  }
}