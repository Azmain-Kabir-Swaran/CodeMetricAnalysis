{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "FSNamesystem.java",
  "functionName": "addCommittedBlocksToPending",
  "functionId": "addCommittedBlocksToPending___pendingFile-INodeFile(modifiers-final)",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSNamesystem.java",
  "functionStartLine": 3777,
  "functionEndLine": 3790,
  "numCommitsSeen": 873,
  "timeTaken": 14352,
  "changeHistory": [
    "972782d9568e0849484c027f27c1638ba50ec56e",
    "bd909ed9f2d853f614f04a50e2230a7932732776"
  ],
  "changeHistoryShort": {
    "972782d9568e0849484c027f27c1638ba50ec56e": "Ybodychange",
    "bd909ed9f2d853f614f04a50e2230a7932732776": "Yintroduced"
  },
  "changeHistoryDetails": {
    "972782d9568e0849484c027f27c1638ba50ec56e": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-9754. Avoid unnecessary getBlockCollection calls in BlockManager. Contributed by Jing Zhao.\n",
      "commitDate": "12/02/16 11:07 AM",
      "commitName": "972782d9568e0849484c027f27c1638ba50ec56e",
      "commitAuthor": "Jing Zhao",
      "commitDateOld": "12/02/16 8:57 AM",
      "commitNameOld": "e6a7044b8530afded8f8e86ff309dd0e4d39238a",
      "commitAuthorOld": "Akira Ajisaka",
      "daysBetweenCommits": 0.09,
      "commitsBetweenForRepo": 4,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,14 +1,14 @@\n   void addCommittedBlocksToPending(final INodeFile pendingFile) {\n     final BlockInfo[] blocks \u003d pendingFile.getBlocks();\n     int i \u003d blocks.length - numCommittedAllowed;\n     if (i \u003c 0) {\n       i \u003d 0;\n     }\n     for(; i \u003c blocks.length; i++) {\n       final BlockInfo b \u003d blocks[i];\n       if (b !\u003d null \u0026\u0026 b.getBlockUCState() \u003d\u003d BlockUCState.COMMITTED) {\n         // b is COMMITTED but not yet COMPLETE, add it to pending replication.\n-        blockManager.addExpectedReplicasToPending(b, pendingFile);\n+        blockManager.addExpectedReplicasToPending(b);\n       }\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  void addCommittedBlocksToPending(final INodeFile pendingFile) {\n    final BlockInfo[] blocks \u003d pendingFile.getBlocks();\n    int i \u003d blocks.length - numCommittedAllowed;\n    if (i \u003c 0) {\n      i \u003d 0;\n    }\n    for(; i \u003c blocks.length; i++) {\n      final BlockInfo b \u003d blocks[i];\n      if (b !\u003d null \u0026\u0026 b.getBlockUCState() \u003d\u003d BlockUCState.COMMITTED) {\n        // b is COMMITTED but not yet COMPLETE, add it to pending replication.\n        blockManager.addExpectedReplicasToPending(b);\n      }\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSNamesystem.java",
      "extendedDetails": {}
    },
    "bd909ed9f2d853f614f04a50e2230a7932732776": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-8999. Allow a file to be closed with COMMITTED but not yet COMPLETE blocks.\n",
      "commitDate": "25/01/16 6:32 PM",
      "commitName": "bd909ed9f2d853f614f04a50e2230a7932732776",
      "commitAuthor": "Tsz-Wo Nicholas Sze",
      "diff": "@@ -0,0 +1,14 @@\n+  void addCommittedBlocksToPending(final INodeFile pendingFile) {\n+    final BlockInfo[] blocks \u003d pendingFile.getBlocks();\n+    int i \u003d blocks.length - numCommittedAllowed;\n+    if (i \u003c 0) {\n+      i \u003d 0;\n+    }\n+    for(; i \u003c blocks.length; i++) {\n+      final BlockInfo b \u003d blocks[i];\n+      if (b !\u003d null \u0026\u0026 b.getBlockUCState() \u003d\u003d BlockUCState.COMMITTED) {\n+        // b is COMMITTED but not yet COMPLETE, add it to pending replication.\n+        blockManager.addExpectedReplicasToPending(b, pendingFile);\n+      }\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  void addCommittedBlocksToPending(final INodeFile pendingFile) {\n    final BlockInfo[] blocks \u003d pendingFile.getBlocks();\n    int i \u003d blocks.length - numCommittedAllowed;\n    if (i \u003c 0) {\n      i \u003d 0;\n    }\n    for(; i \u003c blocks.length; i++) {\n      final BlockInfo b \u003d blocks[i];\n      if (b !\u003d null \u0026\u0026 b.getBlockUCState() \u003d\u003d BlockUCState.COMMITTED) {\n        // b is COMMITTED but not yet COMPLETE, add it to pending replication.\n        blockManager.addExpectedReplicasToPending(b, pendingFile);\n      }\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSNamesystem.java"
    }
  }
}