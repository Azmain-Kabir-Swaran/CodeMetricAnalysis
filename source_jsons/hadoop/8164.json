{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "FileJournalManager.java",
  "functionName": "getLogFiles",
  "functionId": "getLogFiles___fromTxId-long",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FileJournalManager.java",
  "functionStartLine": 468,
  "functionEndLine": 483,
  "numCommitsSeen": 52,
  "timeTaken": 1894,
  "changeHistory": [
    "74d4573a23db5586c6e47ff2277aa7c35237da34",
    "07a436744588d131d8ef31abab3093aa59b4d531",
    "b9e74da41b750ff93f2524da09f06ded1a7bd6e2",
    "9a07ba8945407cd8f63169faf9e0faa4311d38c7",
    "cdb9f01ad4e6084ddf83e40eb3ec18a89fbbae42",
    "bdc3720d5b67a1c8fc2dfb29be16e4155c0e7f15"
  ],
  "changeHistoryShort": {
    "74d4573a23db5586c6e47ff2277aa7c35237da34": "Ymodifierchange",
    "07a436744588d131d8ef31abab3093aa59b4d531": "Ymodifierchange",
    "b9e74da41b750ff93f2524da09f06ded1a7bd6e2": "Ybodychange",
    "9a07ba8945407cd8f63169faf9e0faa4311d38c7": "Ybodychange",
    "cdb9f01ad4e6084ddf83e40eb3ec18a89fbbae42": "Ybodychange",
    "bdc3720d5b67a1c8fc2dfb29be16e4155c0e7f15": "Yintroduced"
  },
  "changeHistoryDetails": {
    "74d4573a23db5586c6e47ff2277aa7c35237da34": {
      "type": "Ymodifierchange",
      "commitMessage": "HDFS-3077. Quorum-based protocol for reading and writing edit logs. Contributed by Todd Lipcon based on initial work from Brandon Li and Hari Mankude.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-3077@1363596 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "19/07/12 5:25 PM",
      "commitName": "74d4573a23db5586c6e47ff2277aa7c35237da34",
      "commitAuthor": "Todd Lipcon",
      "commitDateOld": "15/07/12 7:58 PM",
      "commitNameOld": "0e8e499ff482c165d21c8e4f5ff9c33f306ca0d9",
      "commitAuthorOld": "Harsh J",
      "daysBetweenCommits": 3.89,
      "commitsBetweenForRepo": 38,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,16 @@\n-  List\u003cEditLogFile\u003e getLogFiles(long fromTxId) throws IOException {\n+  public List\u003cEditLogFile\u003e getLogFiles(long fromTxId) throws IOException {\n     File currentDir \u003d sd.getCurrentDir();\n     List\u003cEditLogFile\u003e allLogFiles \u003d matchEditLogs(currentDir);\n     List\u003cEditLogFile\u003e logFiles \u003d Lists.newArrayList();\n     \n     for (EditLogFile elf : allLogFiles) {\n       if (fromTxId \u003c\u003d elf.getFirstTxId() ||\n           elf.containsTxId(fromTxId)) {\n         logFiles.add(elf);\n       }\n     }\n     \n     Collections.sort(logFiles, EditLogFile.COMPARE_BY_START_TXID);\n \n     return logFiles;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public List\u003cEditLogFile\u003e getLogFiles(long fromTxId) throws IOException {\n    File currentDir \u003d sd.getCurrentDir();\n    List\u003cEditLogFile\u003e allLogFiles \u003d matchEditLogs(currentDir);\n    List\u003cEditLogFile\u003e logFiles \u003d Lists.newArrayList();\n    \n    for (EditLogFile elf : allLogFiles) {\n      if (fromTxId \u003c\u003d elf.getFirstTxId() ||\n          elf.containsTxId(fromTxId)) {\n        logFiles.add(elf);\n      }\n    }\n    \n    Collections.sort(logFiles, EditLogFile.COMPARE_BY_START_TXID);\n\n    return logFiles;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FileJournalManager.java",
      "extendedDetails": {
        "oldValue": "[]",
        "newValue": "[public]"
      }
    },
    "07a436744588d131d8ef31abab3093aa59b4d531": {
      "type": "Ymodifierchange",
      "commitMessage": "HDFS-3259. NameNode#initializeSharedEdits should populate shared edits dir with edit log segments. Contributed by Aaron T. Myers.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1325518 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "12/04/12 2:11 PM",
      "commitName": "07a436744588d131d8ef31abab3093aa59b4d531",
      "commitAuthor": "Aaron Myers",
      "commitDateOld": "09/04/12 12:39 PM",
      "commitNameOld": "706394d03992b394e9f907aff2155df493e4ea4e",
      "commitAuthorOld": "Eli Collins",
      "daysBetweenCommits": 3.06,
      "commitsBetweenForRepo": 40,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,16 @@\n-  private List\u003cEditLogFile\u003e getLogFiles(long fromTxId) throws IOException {\n+  List\u003cEditLogFile\u003e getLogFiles(long fromTxId) throws IOException {\n     File currentDir \u003d sd.getCurrentDir();\n     List\u003cEditLogFile\u003e allLogFiles \u003d matchEditLogs(currentDir);\n     List\u003cEditLogFile\u003e logFiles \u003d Lists.newArrayList();\n     \n     for (EditLogFile elf : allLogFiles) {\n       if (fromTxId \u003c\u003d elf.getFirstTxId() ||\n           elf.containsTxId(fromTxId)) {\n         logFiles.add(elf);\n       }\n     }\n     \n     Collections.sort(logFiles, EditLogFile.COMPARE_BY_START_TXID);\n \n     return logFiles;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  List\u003cEditLogFile\u003e getLogFiles(long fromTxId) throws IOException {\n    File currentDir \u003d sd.getCurrentDir();\n    List\u003cEditLogFile\u003e allLogFiles \u003d matchEditLogs(currentDir);\n    List\u003cEditLogFile\u003e logFiles \u003d Lists.newArrayList();\n    \n    for (EditLogFile elf : allLogFiles) {\n      if (fromTxId \u003c\u003d elf.getFirstTxId() ||\n          elf.containsTxId(fromTxId)) {\n        logFiles.add(elf);\n      }\n    }\n    \n    Collections.sort(logFiles, EditLogFile.COMPARE_BY_START_TXID);\n\n    return logFiles;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FileJournalManager.java",
      "extendedDetails": {
        "oldValue": "[private]",
        "newValue": "[]"
      }
    },
    "b9e74da41b750ff93f2524da09f06ded1a7bd6e2": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-2905. HA: Standby NN NPE when shared edits dir is deleted. Contributed by Bikas Saha.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1241757 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "07/02/12 7:17 PM",
      "commitName": "b9e74da41b750ff93f2524da09f06ded1a7bd6e2",
      "commitAuthor": "Jitendra Nath Pandey",
      "commitDateOld": "30/01/12 3:05 PM",
      "commitNameOld": "641f79a325bad571b11b5700a42efb844eabc5af",
      "commitAuthorOld": "Todd Lipcon",
      "daysBetweenCommits": 8.17,
      "commitsBetweenForRepo": 22,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,16 @@\n   private List\u003cEditLogFile\u003e getLogFiles(long fromTxId) throws IOException {\n     File currentDir \u003d sd.getCurrentDir();\n-    List\u003cEditLogFile\u003e allLogFiles \u003d matchEditLogs(currentDir.listFiles());\n+    List\u003cEditLogFile\u003e allLogFiles \u003d matchEditLogs(currentDir);\n     List\u003cEditLogFile\u003e logFiles \u003d Lists.newArrayList();\n     \n     for (EditLogFile elf : allLogFiles) {\n       if (fromTxId \u003c\u003d elf.getFirstTxId() ||\n           elf.containsTxId(fromTxId)) {\n         logFiles.add(elf);\n       }\n     }\n     \n     Collections.sort(logFiles, EditLogFile.COMPARE_BY_START_TXID);\n \n     return logFiles;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private List\u003cEditLogFile\u003e getLogFiles(long fromTxId) throws IOException {\n    File currentDir \u003d sd.getCurrentDir();\n    List\u003cEditLogFile\u003e allLogFiles \u003d matchEditLogs(currentDir);\n    List\u003cEditLogFile\u003e logFiles \u003d Lists.newArrayList();\n    \n    for (EditLogFile elf : allLogFiles) {\n      if (fromTxId \u003c\u003d elf.getFirstTxId() ||\n          elf.containsTxId(fromTxId)) {\n        logFiles.add(elf);\n      }\n    }\n    \n    Collections.sort(logFiles, EditLogFile.COMPARE_BY_START_TXID);\n\n    return logFiles;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FileJournalManager.java",
      "extendedDetails": {}
    },
    "9a07ba8945407cd8f63169faf9e0faa4311d38c7": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-2709. Appropriately handle error conditions in EditLogTailer. Contributed by Aaron T. Myers.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1228390 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "06/01/12 12:44 PM",
      "commitName": "9a07ba8945407cd8f63169faf9e0faa4311d38c7",
      "commitAuthor": "Todd Lipcon",
      "commitDateOld": "15/12/11 8:25 PM",
      "commitNameOld": "cdb9f01ad4e6084ddf83e40eb3ec18a89fbbae42",
      "commitAuthorOld": "Todd Lipcon",
      "daysBetweenCommits": 21.68,
      "commitsBetweenForRepo": 94,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,20 +1,16 @@\n   private List\u003cEditLogFile\u003e getLogFiles(long fromTxId) throws IOException {\n     File currentDir \u003d sd.getCurrentDir();\n     List\u003cEditLogFile\u003e allLogFiles \u003d matchEditLogs(currentDir.listFiles());\n     List\u003cEditLogFile\u003e logFiles \u003d Lists.newArrayList();\n     \n     for (EditLogFile elf : allLogFiles) {\n-      if (fromTxId \u003e elf.getFirstTxId()\n-          \u0026\u0026 fromTxId \u003c\u003d elf.getLastTxId()) {\n-        throw new IllegalStateException(\"Asked for fromTxId \" + fromTxId\n-            + \" which is in middle of file \" + elf.file);\n-      }\n-      if (fromTxId \u003c\u003d elf.getFirstTxId()) {\n+      if (fromTxId \u003c\u003d elf.getFirstTxId() ||\n+          elf.containsTxId(fromTxId)) {\n         logFiles.add(elf);\n       }\n     }\n     \n     Collections.sort(logFiles, EditLogFile.COMPARE_BY_START_TXID);\n \n     return logFiles;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private List\u003cEditLogFile\u003e getLogFiles(long fromTxId) throws IOException {\n    File currentDir \u003d sd.getCurrentDir();\n    List\u003cEditLogFile\u003e allLogFiles \u003d matchEditLogs(currentDir.listFiles());\n    List\u003cEditLogFile\u003e logFiles \u003d Lists.newArrayList();\n    \n    for (EditLogFile elf : allLogFiles) {\n      if (fromTxId \u003c\u003d elf.getFirstTxId() ||\n          elf.containsTxId(fromTxId)) {\n        logFiles.add(elf);\n      }\n    }\n    \n    Collections.sort(logFiles, EditLogFile.COMPARE_BY_START_TXID);\n\n    return logFiles;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FileJournalManager.java",
      "extendedDetails": {}
    },
    "cdb9f01ad4e6084ddf83e40eb3ec18a89fbbae42": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-2667. Fix transition from active to standby. Contributed by Todd Lipcon.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1215037 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "15/12/11 8:25 PM",
      "commitName": "cdb9f01ad4e6084ddf83e40eb3ec18a89fbbae42",
      "commitAuthor": "Todd Lipcon",
      "commitDateOld": "08/12/11 3:55 PM",
      "commitNameOld": "2481474bd9c50a23e4fd2eea67ac2dea11ca1f58",
      "commitAuthorOld": "Todd Lipcon",
      "daysBetweenCommits": 7.19,
      "commitsBetweenForRepo": 78,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,20 +1,20 @@\n   private List\u003cEditLogFile\u003e getLogFiles(long fromTxId) throws IOException {\n     File currentDir \u003d sd.getCurrentDir();\n     List\u003cEditLogFile\u003e allLogFiles \u003d matchEditLogs(currentDir.listFiles());\n     List\u003cEditLogFile\u003e logFiles \u003d Lists.newArrayList();\n     \n     for (EditLogFile elf : allLogFiles) {\n       if (fromTxId \u003e elf.getFirstTxId()\n           \u0026\u0026 fromTxId \u003c\u003d elf.getLastTxId()) {\n-        throw new IOException(\"Asked for fromTxId \" + fromTxId\n+        throw new IllegalStateException(\"Asked for fromTxId \" + fromTxId\n             + \" which is in middle of file \" + elf.file);\n       }\n       if (fromTxId \u003c\u003d elf.getFirstTxId()) {\n         logFiles.add(elf);\n       }\n     }\n     \n     Collections.sort(logFiles, EditLogFile.COMPARE_BY_START_TXID);\n \n     return logFiles;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private List\u003cEditLogFile\u003e getLogFiles(long fromTxId) throws IOException {\n    File currentDir \u003d sd.getCurrentDir();\n    List\u003cEditLogFile\u003e allLogFiles \u003d matchEditLogs(currentDir.listFiles());\n    List\u003cEditLogFile\u003e logFiles \u003d Lists.newArrayList();\n    \n    for (EditLogFile elf : allLogFiles) {\n      if (fromTxId \u003e elf.getFirstTxId()\n          \u0026\u0026 fromTxId \u003c\u003d elf.getLastTxId()) {\n        throw new IllegalStateException(\"Asked for fromTxId \" + fromTxId\n            + \" which is in middle of file \" + elf.file);\n      }\n      if (fromTxId \u003c\u003d elf.getFirstTxId()) {\n        logFiles.add(elf);\n      }\n    }\n    \n    Collections.sort(logFiles, EditLogFile.COMPARE_BY_START_TXID);\n\n    return logFiles;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FileJournalManager.java",
      "extendedDetails": {}
    },
    "bdc3720d5b67a1c8fc2dfb29be16e4155c0e7f15": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-2018. Move all journal stream management code into one place. Contributed by Ivan Kelly.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1165826 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "06/09/11 1:27 PM",
      "commitName": "bdc3720d5b67a1c8fc2dfb29be16e4155c0e7f15",
      "commitAuthor": "Jitendra Nath Pandey",
      "diff": "@@ -0,0 +1,20 @@\n+  private List\u003cEditLogFile\u003e getLogFiles(long fromTxId) throws IOException {\n+    File currentDir \u003d sd.getCurrentDir();\n+    List\u003cEditLogFile\u003e allLogFiles \u003d matchEditLogs(currentDir.listFiles());\n+    List\u003cEditLogFile\u003e logFiles \u003d Lists.newArrayList();\n+    \n+    for (EditLogFile elf : allLogFiles) {\n+      if (fromTxId \u003e elf.getFirstTxId()\n+          \u0026\u0026 fromTxId \u003c\u003d elf.getLastTxId()) {\n+        throw new IOException(\"Asked for fromTxId \" + fromTxId\n+            + \" which is in middle of file \" + elf.file);\n+      }\n+      if (fromTxId \u003c\u003d elf.getFirstTxId()) {\n+        logFiles.add(elf);\n+      }\n+    }\n+    \n+    Collections.sort(logFiles, EditLogFile.COMPARE_BY_START_TXID);\n+\n+    return logFiles;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private List\u003cEditLogFile\u003e getLogFiles(long fromTxId) throws IOException {\n    File currentDir \u003d sd.getCurrentDir();\n    List\u003cEditLogFile\u003e allLogFiles \u003d matchEditLogs(currentDir.listFiles());\n    List\u003cEditLogFile\u003e logFiles \u003d Lists.newArrayList();\n    \n    for (EditLogFile elf : allLogFiles) {\n      if (fromTxId \u003e elf.getFirstTxId()\n          \u0026\u0026 fromTxId \u003c\u003d elf.getLastTxId()) {\n        throw new IOException(\"Asked for fromTxId \" + fromTxId\n            + \" which is in middle of file \" + elf.file);\n      }\n      if (fromTxId \u003c\u003d elf.getFirstTxId()) {\n        logFiles.add(elf);\n      }\n    }\n    \n    Collections.sort(logFiles, EditLogFile.COMPARE_BY_START_TXID);\n\n    return logFiles;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FileJournalManager.java"
    }
  }
}