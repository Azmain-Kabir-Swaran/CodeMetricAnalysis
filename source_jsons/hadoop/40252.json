{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "CSQueueMetrics.java",
  "functionName": "setGuaranteedResources",
  "functionId": "setGuaranteedResources___partition-String__res-Resource",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/capacity/CSQueueMetrics.java",
  "functionStartLine": 183,
  "functionEndLine": 196,
  "numCommitsSeen": 11,
  "timeTaken": 4565,
  "changeHistory": [
    "6d970d8100000b27747ef8c2322f780179792fe5",
    "cd4779f3170231bfbef1ff7575b015940f671854",
    "92bce918dc5d03560169642b71636800680a3292",
    "cc51607ccdf60f4ebecf7afa3e2056297ca0ac5f"
  ],
  "changeHistoryShort": {
    "6d970d8100000b27747ef8c2322f780179792fe5": "Ybodychange",
    "cd4779f3170231bfbef1ff7575b015940f671854": "Ybodychange",
    "92bce918dc5d03560169642b71636800680a3292": "Ybodychange",
    "cc51607ccdf60f4ebecf7afa3e2056297ca0ac5f": "Yintroduced"
  },
  "changeHistoryDetails": {
    "6d970d8100000b27747ef8c2322f780179792fe5": {
      "type": "Ybodychange",
      "commitMessage": "YARN-10012. Guaranteed and max capacity queue metrics for custom resources. Contributed by Manikandan R\n",
      "commitDate": "08/12/19 4:35 PM",
      "commitName": "6d970d8100000b27747ef8c2322f780179792fe5",
      "commitAuthor": "Jonathan Hung",
      "commitDateOld": "08/12/19 4:34 PM",
      "commitNameOld": "cd4779f3170231bfbef1ff7575b015940f671854",
      "commitAuthorOld": "Jonathan Hung",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,6 +1,14 @@\n   public void setGuaranteedResources(String partition, Resource res) {\n     if (partition \u003d\u003d null || partition.equals(RMNodeLabelsManager.NO_LABEL)) {\n       guaranteedMB.set(res.getMemorySize());\n       guaranteedVCores.set(res.getVirtualCores());\n+      if (getQueueMetricsForCustomResources() !\u003d null) {\n+        ((CSQueueMetricsForCustomResources) getQueueMetricsForCustomResources())\n+            .setGuaranteedCapacity(res);\n+        registerCustomResources(\n+            ((CSQueueMetricsForCustomResources)\n+                getQueueMetricsForCustomResources()).getGuaranteedCapacity(),\n+            GUARANTEED_CAPACITY_METRIC_PREFIX, GUARANTEED_CAPACITY_METRIC_DESC);\n+      }\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void setGuaranteedResources(String partition, Resource res) {\n    if (partition \u003d\u003d null || partition.equals(RMNodeLabelsManager.NO_LABEL)) {\n      guaranteedMB.set(res.getMemorySize());\n      guaranteedVCores.set(res.getVirtualCores());\n      if (getQueueMetricsForCustomResources() !\u003d null) {\n        ((CSQueueMetricsForCustomResources) getQueueMetricsForCustomResources())\n            .setGuaranteedCapacity(res);\n        registerCustomResources(\n            ((CSQueueMetricsForCustomResources)\n                getQueueMetricsForCustomResources()).getGuaranteedCapacity(),\n            GUARANTEED_CAPACITY_METRIC_PREFIX, GUARANTEED_CAPACITY_METRIC_DESC);\n      }\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/capacity/CSQueueMetrics.java",
      "extendedDetails": {}
    },
    "cd4779f3170231bfbef1ff7575b015940f671854": {
      "type": "Ybodychange",
      "commitMessage": "Revert \"YARN-10012. Guaranteed and max capacity queue metrics for custom resources\"\n\nThis reverts commit 92bce918dc5d03560169642b71636800680a3292.\n",
      "commitDate": "08/12/19 4:34 PM",
      "commitName": "cd4779f3170231bfbef1ff7575b015940f671854",
      "commitAuthor": "Jonathan Hung",
      "commitDateOld": "08/12/19 3:52 PM",
      "commitNameOld": "92bce918dc5d03560169642b71636800680a3292",
      "commitAuthorOld": "Jonathan Hung",
      "daysBetweenCommits": 0.03,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,14 +1,6 @@\n   public void setGuaranteedResources(String partition, Resource res) {\n     if (partition \u003d\u003d null || partition.equals(RMNodeLabelsManager.NO_LABEL)) {\n       guaranteedMB.set(res.getMemorySize());\n       guaranteedVCores.set(res.getVirtualCores());\n-      if (getQueueMetricsForCustomResources() !\u003d null) {\n-        ((CSQueueMetricsForCustomResources) getQueueMetricsForCustomResources())\n-            .setGuaranteedCapacity(res);\n-        registerCustomResources(\n-            ((CSQueueMetricsForCustomResources)\n-                getQueueMetricsForCustomResources()).getGuaranteedCapacity(),\n-            GUARANTEED_CAPACITY_METRIC_PREFIX, GUARANTEED_CAPACITY_METRIC_DESC);\n-      }\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void setGuaranteedResources(String partition, Resource res) {\n    if (partition \u003d\u003d null || partition.equals(RMNodeLabelsManager.NO_LABEL)) {\n      guaranteedMB.set(res.getMemorySize());\n      guaranteedVCores.set(res.getVirtualCores());\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/capacity/CSQueueMetrics.java",
      "extendedDetails": {}
    },
    "92bce918dc5d03560169642b71636800680a3292": {
      "type": "Ybodychange",
      "commitMessage": "YARN-10012. Guaranteed and max capacity queue metrics for custom resources\n",
      "commitDate": "08/12/19 3:52 PM",
      "commitName": "92bce918dc5d03560169642b71636800680a3292",
      "commitAuthor": "Jonathan Hung",
      "commitDateOld": "05/09/19 2:01 PM",
      "commitNameOld": "0ccf4b0fe16a8c879a560f2a612a3185eb2df72b",
      "commitAuthorOld": "Jonathan Hung",
      "daysBetweenCommits": 94.12,
      "commitsBetweenForRepo": 520,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,6 +1,14 @@\n   public void setGuaranteedResources(String partition, Resource res) {\n     if (partition \u003d\u003d null || partition.equals(RMNodeLabelsManager.NO_LABEL)) {\n       guaranteedMB.set(res.getMemorySize());\n       guaranteedVCores.set(res.getVirtualCores());\n+      if (getQueueMetricsForCustomResources() !\u003d null) {\n+        ((CSQueueMetricsForCustomResources) getQueueMetricsForCustomResources())\n+            .setGuaranteedCapacity(res);\n+        registerCustomResources(\n+            ((CSQueueMetricsForCustomResources)\n+                getQueueMetricsForCustomResources()).getGuaranteedCapacity(),\n+            GUARANTEED_CAPACITY_METRIC_PREFIX, GUARANTEED_CAPACITY_METRIC_DESC);\n+      }\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void setGuaranteedResources(String partition, Resource res) {\n    if (partition \u003d\u003d null || partition.equals(RMNodeLabelsManager.NO_LABEL)) {\n      guaranteedMB.set(res.getMemorySize());\n      guaranteedVCores.set(res.getVirtualCores());\n      if (getQueueMetricsForCustomResources() !\u003d null) {\n        ((CSQueueMetricsForCustomResources) getQueueMetricsForCustomResources())\n            .setGuaranteedCapacity(res);\n        registerCustomResources(\n            ((CSQueueMetricsForCustomResources)\n                getQueueMetricsForCustomResources()).getGuaranteedCapacity(),\n            GUARANTEED_CAPACITY_METRIC_PREFIX, GUARANTEED_CAPACITY_METRIC_DESC);\n      }\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/capacity/CSQueueMetrics.java",
      "extendedDetails": {}
    },
    "cc51607ccdf60f4ebecf7afa3e2056297ca0ac5f": {
      "type": "Yintroduced",
      "commitMessage": "YARN-9085. Add Guaranteed and MaxCapacity to CSQueueMetrics\n",
      "commitDate": "07/12/18 10:45 AM",
      "commitName": "cc51607ccdf60f4ebecf7afa3e2056297ca0ac5f",
      "commitAuthor": "Jonathan Hung",
      "diff": "@@ -0,0 +1,6 @@\n+  public void setGuaranteedResources(String partition, Resource res) {\n+    if (partition \u003d\u003d null || partition.equals(RMNodeLabelsManager.NO_LABEL)) {\n+      guaranteedMB.set(res.getMemorySize());\n+      guaranteedVCores.set(res.getVirtualCores());\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public void setGuaranteedResources(String partition, Resource res) {\n    if (partition \u003d\u003d null || partition.equals(RMNodeLabelsManager.NO_LABEL)) {\n      guaranteedMB.set(res.getMemorySize());\n      guaranteedVCores.set(res.getVirtualCores());\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/capacity/CSQueueMetrics.java"
    }
  }
}