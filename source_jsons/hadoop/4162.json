{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "ECPolicyLoader.java",
  "functionName": "loadPolicies",
  "functionId": "loadPolicies___root-Element__schemas-Map__String,ECSchema__",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/util/ECPolicyLoader.java",
  "functionStartLine": 190,
  "functionEndLine": 215,
  "numCommitsSeen": 3,
  "timeTaken": 446,
  "changeHistory": [
    "b0803388fc5ec03b774aa003f52232deb8db6f69"
  ],
  "changeHistoryShort": {
    "b0803388fc5ec03b774aa003f52232deb8db6f69": "Yintroduced"
  },
  "changeHistoryDetails": {
    "b0803388fc5ec03b774aa003f52232deb8db6f69": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-11604. Define and parse erasure code policies. Contributed by Lin Zeng\n",
      "commitDate": "20/04/17 10:33 PM",
      "commitName": "b0803388fc5ec03b774aa003f52232deb8db6f69",
      "commitAuthor": "Kai Zheng",
      "diff": "@@ -0,0 +1,26 @@\n+  private List\u003cErasureCodingPolicy\u003e loadPolicies(\n+      Element root, Map\u003cString, ECSchema\u003e schemas) {\n+    NodeList elements \u003d root.getElementsByTagName(\"policies\")\n+        .item(0).getChildNodes();\n+    List\u003cErasureCodingPolicy\u003e policies \u003d new ArrayList\u003cErasureCodingPolicy\u003e();\n+    for (int i \u003d 0; i \u003c elements.getLength(); i++) {\n+      Node node \u003d elements.item(i);\n+      if (node instanceof Element) {\n+        Element element \u003d (Element) node;\n+        if (\"policy\".equals(element.getTagName())) {\n+          ErasureCodingPolicy policy \u003d loadPolicy(element, schemas);\n+          if (!policies.contains(policy)) {\n+            policies.add(policy);\n+          } else {\n+            LOG.warn(\"Repetitive policies in EC policy configuration file: \"\n+                + policy.toString());\n+          }\n+        } else {\n+          throw new RuntimeException(\"Bad element in EC policy configuration\"\n+              + \" file: \" + element.getTagName());\n+        }\n+      }\n+    }\n+\n+    return policies;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private List\u003cErasureCodingPolicy\u003e loadPolicies(\n      Element root, Map\u003cString, ECSchema\u003e schemas) {\n    NodeList elements \u003d root.getElementsByTagName(\"policies\")\n        .item(0).getChildNodes();\n    List\u003cErasureCodingPolicy\u003e policies \u003d new ArrayList\u003cErasureCodingPolicy\u003e();\n    for (int i \u003d 0; i \u003c elements.getLength(); i++) {\n      Node node \u003d elements.item(i);\n      if (node instanceof Element) {\n        Element element \u003d (Element) node;\n        if (\"policy\".equals(element.getTagName())) {\n          ErasureCodingPolicy policy \u003d loadPolicy(element, schemas);\n          if (!policies.contains(policy)) {\n            policies.add(policy);\n          } else {\n            LOG.warn(\"Repetitive policies in EC policy configuration file: \"\n                + policy.toString());\n          }\n        } else {\n          throw new RuntimeException(\"Bad element in EC policy configuration\"\n              + \" file: \" + element.getTagName());\n        }\n      }\n    }\n\n    return policies;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/util/ECPolicyLoader.java"
    }
  }
}