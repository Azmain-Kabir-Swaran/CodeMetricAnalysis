{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "NodeStatusUpdaterImpl.java",
  "functionName": "verifyRMHeartbeatResponseForNodeLabels",
  "functionId": "verifyRMHeartbeatResponseForNodeLabels___response-NodeHeartbeatResponse",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeStatusUpdaterImpl.java",
  "functionStartLine": 1273,
  "functionEndLine": 1288,
  "numCommitsSeen": 117,
  "timeTaken": 3770,
  "changeHistory": [
    "2064ca015d1584263aac0cc20c60b925a3aff612",
    "f659485ee83f3f34e3717631983adfc8fa1e53dc",
    "7efc4f76885348730728c0201dd0d1a89b213e9c",
    "30ac69c6bd3db363248d6c742561371576006dab",
    "77666105b4557d5706e5844a4ca286917d966c5f",
    "fc07464d1a48b0413da5e921614430e41263fdb7"
  ],
  "changeHistoryShort": {
    "2064ca015d1584263aac0cc20c60b925a3aff612": "Ybodychange",
    "f659485ee83f3f34e3717631983adfc8fa1e53dc": "Ybodychange",
    "7efc4f76885348730728c0201dd0d1a89b213e9c": "Ybodychange",
    "30ac69c6bd3db363248d6c742561371576006dab": "Ybodychange",
    "77666105b4557d5706e5844a4ca286917d966c5f": "Ybodychange",
    "fc07464d1a48b0413da5e921614430e41263fdb7": "Yintroduced"
  },
  "changeHistoryDetails": {
    "2064ca015d1584263aac0cc20c60b925a3aff612": {
      "type": "Ybodychange",
      "commitMessage": "YARN-9349.  Changed logging to use slf4j api.\n            Contributed by Prabhu Joseph\n",
      "commitDate": "15/03/19 4:20 PM",
      "commitName": "2064ca015d1584263aac0cc20c60b925a3aff612",
      "commitAuthor": "Eric Yang",
      "commitDateOld": "22/02/19 7:31 AM",
      "commitNameOld": "ed13cf84068ad50a78e66211132c1f08238fb65b",
      "commitAuthorOld": "bibinchundatt",
      "daysBetweenCommits": 21.33,
      "commitsBetweenForRepo": 206,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,16 @@\n     public void verifyRMHeartbeatResponseForNodeLabels(\n         NodeHeartbeatResponse response) {\n       if (isValueSented()) {\n         if (response.getAreNodeLabelsAcceptedByRM()) {\n-          if(LOG.isDebugEnabled()){\n-            LOG.debug(\n-                \"Node Labels {\" + StringUtils.join(\",\", getPreviousValue())\n-                    + \"} were Accepted by RM \");\n-          }\n+          LOG.debug(\"Node Labels {{}} were Accepted by RM\",\n+              StringUtils.join(\",\", getPreviousValue()));\n         } else {\n           // case where updated labels from NodeLabelsProvider is sent to RM and\n           // RM rejected the labels\n           LOG.error(\n               \"NM node labels {\" + StringUtils.join(\",\", getPreviousValue())\n                   + \"} were not accepted by RM and message from RM : \"\n                   + response.getDiagnosticsMessage());\n         }\n       }\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public void verifyRMHeartbeatResponseForNodeLabels(\n        NodeHeartbeatResponse response) {\n      if (isValueSented()) {\n        if (response.getAreNodeLabelsAcceptedByRM()) {\n          LOG.debug(\"Node Labels {{}} were Accepted by RM\",\n              StringUtils.join(\",\", getPreviousValue()));\n        } else {\n          // case where updated labels from NodeLabelsProvider is sent to RM and\n          // RM rejected the labels\n          LOG.error(\n              \"NM node labels {\" + StringUtils.join(\",\", getPreviousValue())\n                  + \"} were not accepted by RM and message from RM : \"\n                  + response.getDiagnosticsMessage());\n        }\n      }\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeStatusUpdaterImpl.java",
      "extendedDetails": {}
    },
    "f659485ee83f3f34e3717631983adfc8fa1e53dc": {
      "type": "Ybodychange",
      "commitMessage": "YARN-8925. Updating distributed node attributes only when necessary. Contributed by Tao Yang.\n",
      "commitDate": "20/12/18 6:56 PM",
      "commitName": "f659485ee83f3f34e3717631983adfc8fa1e53dc",
      "commitAuthor": "Weiwei Yang",
      "commitDateOld": "13/09/18 7:21 AM",
      "commitNameOld": "39c1ea1ed454b6c61f0985fc951f20913ed964fb",
      "commitAuthorOld": "Weiwei Yang",
      "daysBetweenCommits": 98.52,
      "commitsBetweenForRepo": 824,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,19 @@\n     public void verifyRMHeartbeatResponseForNodeLabels(\n         NodeHeartbeatResponse response) {\n-      if (areLabelsSentToRM) {\n+      if (isValueSented()) {\n         if (response.getAreNodeLabelsAcceptedByRM()) {\n           if(LOG.isDebugEnabled()){\n             LOG.debug(\n-                \"Node Labels {\" + StringUtils.join(\",\", previousNodeLabels)\n+                \"Node Labels {\" + StringUtils.join(\",\", getPreviousValue())\n                     + \"} were Accepted by RM \");\n           }\n         } else {\n           // case where updated labels from NodeLabelsProvider is sent to RM and\n           // RM rejected the labels\n           LOG.error(\n-              \"NM node labels {\" + StringUtils.join(\",\", previousNodeLabels)\n+              \"NM node labels {\" + StringUtils.join(\",\", getPreviousValue())\n                   + \"} were not accepted by RM and message from RM : \"\n                   + response.getDiagnosticsMessage());\n         }\n       }\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public void verifyRMHeartbeatResponseForNodeLabels(\n        NodeHeartbeatResponse response) {\n      if (isValueSented()) {\n        if (response.getAreNodeLabelsAcceptedByRM()) {\n          if(LOG.isDebugEnabled()){\n            LOG.debug(\n                \"Node Labels {\" + StringUtils.join(\",\", getPreviousValue())\n                    + \"} were Accepted by RM \");\n          }\n        } else {\n          // case where updated labels from NodeLabelsProvider is sent to RM and\n          // RM rejected the labels\n          LOG.error(\n              \"NM node labels {\" + StringUtils.join(\",\", getPreviousValue())\n                  + \"} were not accepted by RM and message from RM : \"\n                  + response.getDiagnosticsMessage());\n        }\n      }\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeStatusUpdaterImpl.java",
      "extendedDetails": {}
    },
    "7efc4f76885348730728c0201dd0d1a89b213e9c": {
      "type": "Ybodychange",
      "commitMessage": "YARN-7647. NM print inappropriate error log when node-labels is enabled. Contributed by Yang Wang.\n",
      "commitDate": "12/12/17 9:11 PM",
      "commitName": "7efc4f76885348730728c0201dd0d1a89b213e9c",
      "commitAuthor": "Weiwei Yang",
      "commitDateOld": "11/10/17 11:14 AM",
      "commitNameOld": "fa5cfc68f37c78b6cf26ce13247b9ff34da806cd",
      "commitAuthorOld": "Sunil G",
      "daysBetweenCommits": 62.46,
      "commitsBetweenForRepo": 452,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,19 @@\n     public void verifyRMHeartbeatResponseForNodeLabels(\n         NodeHeartbeatResponse response) {\n       if (areLabelsSentToRM) {\n-        if (response.getAreNodeLabelsAcceptedByRM() \u0026\u0026 LOG.isDebugEnabled()) {\n-          LOG.debug(\"Node Labels {\" + StringUtils.join(\",\", previousNodeLabels)\n-              + \"} were Accepted by RM \");\n+        if (response.getAreNodeLabelsAcceptedByRM()) {\n+          if(LOG.isDebugEnabled()){\n+            LOG.debug(\n+                \"Node Labels {\" + StringUtils.join(\",\", previousNodeLabels)\n+                    + \"} were Accepted by RM \");\n+          }\n         } else {\n           // case where updated labels from NodeLabelsProvider is sent to RM and\n           // RM rejected the labels\n           LOG.error(\n               \"NM node labels {\" + StringUtils.join(\",\", previousNodeLabels)\n                   + \"} were not accepted by RM and message from RM : \"\n                   + response.getDiagnosticsMessage());\n         }\n       }\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public void verifyRMHeartbeatResponseForNodeLabels(\n        NodeHeartbeatResponse response) {\n      if (areLabelsSentToRM) {\n        if (response.getAreNodeLabelsAcceptedByRM()) {\n          if(LOG.isDebugEnabled()){\n            LOG.debug(\n                \"Node Labels {\" + StringUtils.join(\",\", previousNodeLabels)\n                    + \"} were Accepted by RM \");\n          }\n        } else {\n          // case where updated labels from NodeLabelsProvider is sent to RM and\n          // RM rejected the labels\n          LOG.error(\n              \"NM node labels {\" + StringUtils.join(\",\", previousNodeLabels)\n                  + \"} were not accepted by RM and message from RM : \"\n                  + response.getDiagnosticsMessage());\n        }\n      }\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeStatusUpdaterImpl.java",
      "extendedDetails": {}
    },
    "30ac69c6bd3db363248d6c742561371576006dab": {
      "type": "Ybodychange",
      "commitMessage": "YARN-4176. Resync NM nodelabels with RM periodically for distributed nodelabels. (Bibin A Chundatt via wangda)\n",
      "commitDate": "05/10/15 3:47 PM",
      "commitName": "30ac69c6bd3db363248d6c742561371576006dab",
      "commitAuthor": "Wangda Tan",
      "commitDateOld": "02/10/15 6:50 PM",
      "commitNameOld": "8f08532bde153811368e1b8336446fba4743f9d2",
      "commitAuthorOld": "Xuan",
      "daysBetweenCommits": 2.87,
      "commitsBetweenForRepo": 12,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,16 @@\n     public void verifyRMHeartbeatResponseForNodeLabels(\n         NodeHeartbeatResponse response) {\n-      if (updatedLabelsSentToRM) {\n-        if (response.getAreNodeLabelsAcceptedByRM()) {\n-          lastNodeLabelSendFailMills \u003d 0L;\n-          LOG.info(\"Node Labels {\" + StringUtils.join(\",\", previousNodeLabels)\n+      if (areLabelsSentToRM) {\n+        if (response.getAreNodeLabelsAcceptedByRM() \u0026\u0026 LOG.isDebugEnabled()) {\n+          LOG.debug(\"Node Labels {\" + StringUtils.join(\",\", previousNodeLabels)\n               + \"} were Accepted by RM \");\n         } else {\n           // case where updated labels from NodeLabelsProvider is sent to RM and\n           // RM rejected the labels\n-          lastNodeLabelSendFailMills \u003d System.currentTimeMillis();\n           LOG.error(\n               \"NM node labels {\" + StringUtils.join(\",\", previousNodeLabels)\n                   + \"} were not accepted by RM and message from RM : \"\n                   + response.getDiagnosticsMessage());\n         }\n       }\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public void verifyRMHeartbeatResponseForNodeLabels(\n        NodeHeartbeatResponse response) {\n      if (areLabelsSentToRM) {\n        if (response.getAreNodeLabelsAcceptedByRM() \u0026\u0026 LOG.isDebugEnabled()) {\n          LOG.debug(\"Node Labels {\" + StringUtils.join(\",\", previousNodeLabels)\n              + \"} were Accepted by RM \");\n        } else {\n          // case where updated labels from NodeLabelsProvider is sent to RM and\n          // RM rejected the labels\n          LOG.error(\n              \"NM node labels {\" + StringUtils.join(\",\", previousNodeLabels)\n                  + \"} were not accepted by RM and message from RM : \"\n                  + response.getDiagnosticsMessage());\n        }\n      }\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeStatusUpdaterImpl.java",
      "extendedDetails": {}
    },
    "77666105b4557d5706e5844a4ca286917d966c5f": {
      "type": "Ybodychange",
      "commitMessage": "YARN-4106. NodeLabels for NM in distributed mode is not updated even after clusterNodelabel addition in RM. (Bibin A Chundatt via wangda)\n",
      "commitDate": "10/09/15 9:30 AM",
      "commitName": "77666105b4557d5706e5844a4ca286917d966c5f",
      "commitAuthor": "Wangda Tan",
      "commitDateOld": "20/08/15 11:51 AM",
      "commitNameOld": "fc07464d1a48b0413da5e921614430e41263fdb7",
      "commitAuthorOld": "Wangda Tan",
      "daysBetweenCommits": 20.9,
      "commitsBetweenForRepo": 113,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,18 @@\n     public void verifyRMHeartbeatResponseForNodeLabels(\n         NodeHeartbeatResponse response) {\n       if (updatedLabelsSentToRM) {\n         if (response.getAreNodeLabelsAcceptedByRM()) {\n+          lastNodeLabelSendFailMills \u003d 0L;\n           LOG.info(\"Node Labels {\" + StringUtils.join(\",\", previousNodeLabels)\n               + \"} were Accepted by RM \");\n         } else {\n           // case where updated labels from NodeLabelsProvider is sent to RM and\n           // RM rejected the labels\n+          lastNodeLabelSendFailMills \u003d System.currentTimeMillis();\n           LOG.error(\n               \"NM node labels {\" + StringUtils.join(\",\", previousNodeLabels)\n                   + \"} were not accepted by RM and message from RM : \"\n                   + response.getDiagnosticsMessage());\n         }\n       }\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public void verifyRMHeartbeatResponseForNodeLabels(\n        NodeHeartbeatResponse response) {\n      if (updatedLabelsSentToRM) {\n        if (response.getAreNodeLabelsAcceptedByRM()) {\n          lastNodeLabelSendFailMills \u003d 0L;\n          LOG.info(\"Node Labels {\" + StringUtils.join(\",\", previousNodeLabels)\n              + \"} were Accepted by RM \");\n        } else {\n          // case where updated labels from NodeLabelsProvider is sent to RM and\n          // RM rejected the labels\n          lastNodeLabelSendFailMills \u003d System.currentTimeMillis();\n          LOG.error(\n              \"NM node labels {\" + StringUtils.join(\",\", previousNodeLabels)\n                  + \"} were not accepted by RM and message from RM : \"\n                  + response.getDiagnosticsMessage());\n        }\n      }\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeStatusUpdaterImpl.java",
      "extendedDetails": {}
    },
    "fc07464d1a48b0413da5e921614430e41263fdb7": {
      "type": "Yintroduced",
      "commitMessage": "YARN-2923. Support configuration based NodeLabelsProvider Service in Distributed Node Label Configuration Setup. (Naganarasimha G R)\n",
      "commitDate": "20/08/15 11:51 AM",
      "commitName": "fc07464d1a48b0413da5e921614430e41263fdb7",
      "commitAuthor": "Wangda Tan",
      "diff": "@@ -0,0 +1,16 @@\n+    public void verifyRMHeartbeatResponseForNodeLabels(\n+        NodeHeartbeatResponse response) {\n+      if (updatedLabelsSentToRM) {\n+        if (response.getAreNodeLabelsAcceptedByRM()) {\n+          LOG.info(\"Node Labels {\" + StringUtils.join(\",\", previousNodeLabels)\n+              + \"} were Accepted by RM \");\n+        } else {\n+          // case where updated labels from NodeLabelsProvider is sent to RM and\n+          // RM rejected the labels\n+          LOG.error(\n+              \"NM node labels {\" + StringUtils.join(\",\", previousNodeLabels)\n+                  + \"} were not accepted by RM and message from RM : \"\n+                  + response.getDiagnosticsMessage());\n+        }\n+      }\n+    }\n\\ No newline at end of file\n",
      "actualSource": "    public void verifyRMHeartbeatResponseForNodeLabels(\n        NodeHeartbeatResponse response) {\n      if (updatedLabelsSentToRM) {\n        if (response.getAreNodeLabelsAcceptedByRM()) {\n          LOG.info(\"Node Labels {\" + StringUtils.join(\",\", previousNodeLabels)\n              + \"} were Accepted by RM \");\n        } else {\n          // case where updated labels from NodeLabelsProvider is sent to RM and\n          // RM rejected the labels\n          LOG.error(\n              \"NM node labels {\" + StringUtils.join(\",\", previousNodeLabels)\n                  + \"} were not accepted by RM and message from RM : \"\n                  + response.getDiagnosticsMessage());\n        }\n      }\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeStatusUpdaterImpl.java"
    }
  }
}