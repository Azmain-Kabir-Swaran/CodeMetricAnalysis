{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "LocalDirsHandlerService.java",
  "functionName": "getPathToRead",
  "functionId": "getPathToRead___pathStr-String__dirs-List__String__",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/LocalDirsHandlerService.java",
  "functionStartLine": 604,
  "functionEndLine": 631,
  "numCommitsSeen": 26,
  "timeTaken": 918,
  "changeHistory": [
    "ff9c13e0a739bb13115167dc661b6a16b2ed2c04"
  ],
  "changeHistoryShort": {
    "ff9c13e0a739bb13115167dc661b6a16b2ed2c04": "Yintroduced"
  },
  "changeHistoryDetails": {
    "ff9c13e0a739bb13115167dc661b6a16b2ed2c04": {
      "type": "Yintroduced",
      "commitMessage": "YARN-3925. ContainerLogsUtils#getContainerLogFile fails to read container log files from full disks. Contributed by zhihai xu\n",
      "commitDate": "24/07/15 3:14 PM",
      "commitName": "ff9c13e0a739bb13115167dc661b6a16b2ed2c04",
      "commitAuthor": "Jason Lowe",
      "diff": "@@ -0,0 +1,28 @@\n+  private Path getPathToRead(String pathStr, List\u003cString\u003e dirs)\n+      throws IOException {\n+    // remove the leading slash from the path (to make sure that the uri\n+    // resolution results in a valid path on the dir being checked)\n+    if (pathStr.startsWith(\"/\")) {\n+      pathStr \u003d pathStr.substring(1);\n+    }\n+\n+    FileSystem localFS \u003d FileSystem.getLocal(getConfig());\n+    for (String dir : dirs) {\n+      try {\n+        Path tmpDir \u003d new Path(dir);\n+        File tmpFile \u003d tmpDir.isAbsolute()\n+            ? new File(localFS.makeQualified(tmpDir).toUri())\n+            : new File(dir);\n+        Path file \u003d new Path(tmpFile.getPath(), pathStr);\n+        if (localFS.exists(file)) {\n+          return file;\n+        }\n+      } catch (IOException ie) {\n+        // ignore\n+        LOG.warn(\"Failed to find \" + pathStr + \" at \" + dir, ie);\n+      }\n+    }\n+\n+    throw new IOException(\"Could not find \" + pathStr + \" in any of\" +\n+        \" the directories\");\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private Path getPathToRead(String pathStr, List\u003cString\u003e dirs)\n      throws IOException {\n    // remove the leading slash from the path (to make sure that the uri\n    // resolution results in a valid path on the dir being checked)\n    if (pathStr.startsWith(\"/\")) {\n      pathStr \u003d pathStr.substring(1);\n    }\n\n    FileSystem localFS \u003d FileSystem.getLocal(getConfig());\n    for (String dir : dirs) {\n      try {\n        Path tmpDir \u003d new Path(dir);\n        File tmpFile \u003d tmpDir.isAbsolute()\n            ? new File(localFS.makeQualified(tmpDir).toUri())\n            : new File(dir);\n        Path file \u003d new Path(tmpFile.getPath(), pathStr);\n        if (localFS.exists(file)) {\n          return file;\n        }\n      } catch (IOException ie) {\n        // ignore\n        LOG.warn(\"Failed to find \" + pathStr + \" at \" + dir, ie);\n      }\n    }\n\n    throw new IOException(\"Could not find \" + pathStr + \" in any of\" +\n        \" the directories\");\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/LocalDirsHandlerService.java"
    }
  }
}