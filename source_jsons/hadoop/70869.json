{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "AliyunOSSCopyFileTask.java",
  "functionName": "run",
  "functionId": "run",
  "sourceFilePath": "hadoop-tools/hadoop-aliyun/src/main/java/org/apache/hadoop/fs/aliyun/oss/AliyunOSSCopyFileTask.java",
  "functionStartLine": 50,
  "functionEndLine": 67,
  "numCommitsSeen": 3,
  "timeTaken": 1296,
  "changeHistory": [
    "568d3ab8b65d1348dec9c971feffe200e6cba2ef",
    "040a202b202a37f3b922cd321eb0a8ded457d88b",
    "d67a5e2dec5c60d96b0c216182891cdfd7832ac5"
  ],
  "changeHistoryShort": {
    "568d3ab8b65d1348dec9c971feffe200e6cba2ef": "Ybodychange",
    "040a202b202a37f3b922cd321eb0a8ded457d88b": "Ybodychange",
    "d67a5e2dec5c60d96b0c216182891cdfd7832ac5": "Yintroduced"
  },
  "changeHistoryDetails": {
    "568d3ab8b65d1348dec9c971feffe200e6cba2ef": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-16191. AliyunOSS: improvements for copyFile/copyDirectory and logging. Contributed by wujinhu.\n",
      "commitDate": "18/03/19 6:55 PM",
      "commitName": "568d3ab8b65d1348dec9c971feffe200e6cba2ef",
      "commitAuthor": "Weiwei Yang",
      "commitDateOld": "03/01/19 5:37 AM",
      "commitNameOld": "040a202b202a37f3b922cd321eb0a8ded457d88b",
      "commitAuthorOld": "Weiwei Yang",
      "daysBetweenCommits": 74.51,
      "commitsBetweenForRepo": 596,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,18 @@\n   public void run() {\n     boolean fail \u003d false;\n     try {\n-      store.copyFile(srcKey, srcLen, dstKey);\n+      fail \u003d !store.copyFile(srcKey, srcLen, dstKey);\n     } catch (Exception e) {\n       LOG.warn(\"Exception thrown when copy from \"\n           + srcKey + \" to \" + dstKey +  \", exception: \" + e);\n       fail \u003d true;\n     } finally {\n       copyFileContext.lock();\n       if (fail) {\n         copyFileContext.setCopyFailure(fail);\n       }\n       copyFileContext.incCopiesFinish();\n       copyFileContext.signalAll();\n       copyFileContext.unlock();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void run() {\n    boolean fail \u003d false;\n    try {\n      fail \u003d !store.copyFile(srcKey, srcLen, dstKey);\n    } catch (Exception e) {\n      LOG.warn(\"Exception thrown when copy from \"\n          + srcKey + \" to \" + dstKey +  \", exception: \" + e);\n      fail \u003d true;\n    } finally {\n      copyFileContext.lock();\n      if (fail) {\n        copyFileContext.setCopyFailure(fail);\n      }\n      copyFileContext.incCopiesFinish();\n      copyFileContext.signalAll();\n      copyFileContext.unlock();\n    }\n  }",
      "path": "hadoop-tools/hadoop-aliyun/src/main/java/org/apache/hadoop/fs/aliyun/oss/AliyunOSSCopyFileTask.java",
      "extendedDetails": {}
    },
    "040a202b202a37f3b922cd321eb0a8ded457d88b": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-15323. AliyunOSS: Improve copy file performance for AliyunOSSFileSystemStore. Contributed wujinhu.\n",
      "commitDate": "03/01/19 5:37 AM",
      "commitName": "040a202b202a37f3b922cd321eb0a8ded457d88b",
      "commitAuthor": "Weiwei Yang",
      "commitDateOld": "19/03/18 12:02 AM",
      "commitNameOld": "d67a5e2dec5c60d96b0c216182891cdfd7832ac5",
      "commitAuthorOld": "Sammi Chen",
      "daysBetweenCommits": 290.27,
      "commitsBetweenForRepo": 2837,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,18 @@\n   public void run() {\n     boolean fail \u003d false;\n     try {\n-      store.copyFile(srcKey, dstKey);\n+      store.copyFile(srcKey, srcLen, dstKey);\n     } catch (Exception e) {\n       LOG.warn(\"Exception thrown when copy from \"\n           + srcKey + \" to \" + dstKey +  \", exception: \" + e);\n       fail \u003d true;\n     } finally {\n       copyFileContext.lock();\n       if (fail) {\n         copyFileContext.setCopyFailure(fail);\n       }\n       copyFileContext.incCopiesFinish();\n       copyFileContext.signalAll();\n       copyFileContext.unlock();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void run() {\n    boolean fail \u003d false;\n    try {\n      store.copyFile(srcKey, srcLen, dstKey);\n    } catch (Exception e) {\n      LOG.warn(\"Exception thrown when copy from \"\n          + srcKey + \" to \" + dstKey +  \", exception: \" + e);\n      fail \u003d true;\n    } finally {\n      copyFileContext.lock();\n      if (fail) {\n        copyFileContext.setCopyFailure(fail);\n      }\n      copyFileContext.incCopiesFinish();\n      copyFileContext.signalAll();\n      copyFileContext.unlock();\n    }\n  }",
      "path": "hadoop-tools/hadoop-aliyun/src/main/java/org/apache/hadoop/fs/aliyun/oss/AliyunOSSCopyFileTask.java",
      "extendedDetails": {}
    },
    "d67a5e2dec5c60d96b0c216182891cdfd7832ac5": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-15262. AliyunOSS: move files under a directory in parallel when rename a directory. Contributed by Jinhu Wu.\n",
      "commitDate": "19/03/18 12:02 AM",
      "commitName": "d67a5e2dec5c60d96b0c216182891cdfd7832ac5",
      "commitAuthor": "Sammi Chen",
      "diff": "@@ -0,0 +1,18 @@\n+  public void run() {\n+    boolean fail \u003d false;\n+    try {\n+      store.copyFile(srcKey, dstKey);\n+    } catch (Exception e) {\n+      LOG.warn(\"Exception thrown when copy from \"\n+          + srcKey + \" to \" + dstKey +  \", exception: \" + e);\n+      fail \u003d true;\n+    } finally {\n+      copyFileContext.lock();\n+      if (fail) {\n+        copyFileContext.setCopyFailure(fail);\n+      }\n+      copyFileContext.incCopiesFinish();\n+      copyFileContext.signalAll();\n+      copyFileContext.unlock();\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public void run() {\n    boolean fail \u003d false;\n    try {\n      store.copyFile(srcKey, dstKey);\n    } catch (Exception e) {\n      LOG.warn(\"Exception thrown when copy from \"\n          + srcKey + \" to \" + dstKey +  \", exception: \" + e);\n      fail \u003d true;\n    } finally {\n      copyFileContext.lock();\n      if (fail) {\n        copyFileContext.setCopyFailure(fail);\n      }\n      copyFileContext.incCopiesFinish();\n      copyFileContext.signalAll();\n      copyFileContext.unlock();\n    }\n  }",
      "path": "hadoop-tools/hadoop-aliyun/src/main/java/org/apache/hadoop/fs/aliyun/oss/AliyunOSSCopyFileTask.java"
    }
  }
}