{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "TimelineReaderServer.java",
  "functionName": "serviceInit",
  "functionId": "serviceInit___conf-Configuration",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-timelineservice/src/main/java/org/apache/hadoop/yarn/server/timelineservice/reader/TimelineReaderServer.java",
  "functionStartLine": 77,
  "functionEndLine": 99,
  "numCommitsSeen": 20,
  "timeTaken": 1362,
  "changeHistory": [
    "c0aeb666a4d43aac196569d9ec6768d62139d2b9",
    "d3f11e3f13ed5efc7f0b7f19567d142e554c35ed",
    "a5a55a54ab1568e941062ea3dabdd237f71f15c4",
    "89e5c44f9e891a3579384c3fa3766937cd4970f1",
    "e27642abf4deb12c6e8c47ffc891b41300494307"
  ],
  "changeHistoryShort": {
    "c0aeb666a4d43aac196569d9ec6768d62139d2b9": "Ybodychange",
    "d3f11e3f13ed5efc7f0b7f19567d142e554c35ed": "Ybodychange",
    "a5a55a54ab1568e941062ea3dabdd237f71f15c4": "Ybodychange",
    "89e5c44f9e891a3579384c3fa3766937cd4970f1": "Ybodychange",
    "e27642abf4deb12c6e8c47ffc891b41300494307": "Yintroduced"
  },
  "changeHistoryDetails": {
    "c0aeb666a4d43aac196569d9ec6768d62139d2b9": {
      "type": "Ybodychange",
      "commitMessage": "YARN-7662. [ATSv2] Define new set of configurations for reader and collectors to bind (Rohith Sharma K S via Varun Saxena)\n",
      "commitDate": "19/12/17 8:59 AM",
      "commitName": "c0aeb666a4d43aac196569d9ec6768d62139d2b9",
      "commitAuthor": "Varun Saxena",
      "commitDateOld": "29/08/17 10:59 PM",
      "commitNameOld": "d5ff965fee41fed28d3b94e11e546c1eb4c78a35",
      "commitAuthorOld": "Jason Lowe",
      "daysBetweenCommits": 111.46,
      "commitsBetweenForRepo": 937,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,23 +1,23 @@\n   protected void serviceInit(Configuration conf) throws Exception {\n     if (!YarnConfiguration.timelineServiceV2Enabled(conf)) {\n       throw new YarnException(\"timeline service v.2 is not enabled\");\n     }\n-    InetSocketAddress bindAddr \u003d conf.getSocketAddr(\n-        YarnConfiguration.TIMELINE_SERVICE_ADDRESS,\n-            YarnConfiguration.DEFAULT_TIMELINE_SERVICE_ADDRESS,\n-                YarnConfiguration.DEFAULT_TIMELINE_SERVICE_PORT);\n+    webAppURLWithoutScheme \u003d\n+        WebAppUtils.getTimelineReaderWebAppURLWithoutScheme(conf);\n+    InetSocketAddress bindAddr \u003d\n+        NetUtils.createSocketAddr(webAppURLWithoutScheme);\n     // Login from keytab if security is enabled.\n     try {\n       SecurityUtil.login(conf, YarnConfiguration.TIMELINE_SERVICE_KEYTAB,\n           YarnConfiguration.TIMELINE_SERVICE_PRINCIPAL, bindAddr.getHostName());\n     } catch(IOException e) {\n       throw new YarnRuntimeException(\"Failed to login from keytab\", e);\n     }\n \n     TimelineReader timelineReaderStore \u003d createTimelineReaderStore(conf);\n     timelineReaderStore.init(conf);\n     addService(timelineReaderStore);\n     timelineReaderManager \u003d createTimelineReaderManager(timelineReaderStore);\n     addService(timelineReaderManager);\n     super.serviceInit(conf);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected void serviceInit(Configuration conf) throws Exception {\n    if (!YarnConfiguration.timelineServiceV2Enabled(conf)) {\n      throw new YarnException(\"timeline service v.2 is not enabled\");\n    }\n    webAppURLWithoutScheme \u003d\n        WebAppUtils.getTimelineReaderWebAppURLWithoutScheme(conf);\n    InetSocketAddress bindAddr \u003d\n        NetUtils.createSocketAddr(webAppURLWithoutScheme);\n    // Login from keytab if security is enabled.\n    try {\n      SecurityUtil.login(conf, YarnConfiguration.TIMELINE_SERVICE_KEYTAB,\n          YarnConfiguration.TIMELINE_SERVICE_PRINCIPAL, bindAddr.getHostName());\n    } catch(IOException e) {\n      throw new YarnRuntimeException(\"Failed to login from keytab\", e);\n    }\n\n    TimelineReader timelineReaderStore \u003d createTimelineReaderStore(conf);\n    timelineReaderStore.init(conf);\n    addService(timelineReaderStore);\n    timelineReaderManager \u003d createTimelineReaderManager(timelineReaderStore);\n    addService(timelineReaderManager);\n    super.serviceInit(conf);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-timelineservice/src/main/java/org/apache/hadoop/yarn/server/timelineservice/reader/TimelineReaderServer.java",
      "extendedDetails": {}
    },
    "d3f11e3f13ed5efc7f0b7f19567d142e554c35ed": {
      "type": "Ybodychange",
      "commitMessage": "YARN-6638. [ATSv2 Security] Timeline reader side changes for loading auth filters and principals. Contributed by Varun Saxena\n",
      "commitDate": "29/08/17 10:59 PM",
      "commitName": "d3f11e3f13ed5efc7f0b7f19567d142e554c35ed",
      "commitAuthor": "Jian He",
      "commitDateOld": "29/08/17 10:59 PM",
      "commitNameOld": "8bb26465956a37d7398818bc0919772e12953725",
      "commitAuthorOld": "Varun Saxena",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 9,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,12 +1,23 @@\n   protected void serviceInit(Configuration conf) throws Exception {\n     if (!YarnConfiguration.timelineServiceV2Enabled(conf)) {\n       throw new YarnException(\"timeline service v.2 is not enabled\");\n     }\n+    InetSocketAddress bindAddr \u003d conf.getSocketAddr(\n+        YarnConfiguration.TIMELINE_SERVICE_ADDRESS,\n+            YarnConfiguration.DEFAULT_TIMELINE_SERVICE_ADDRESS,\n+                YarnConfiguration.DEFAULT_TIMELINE_SERVICE_PORT);\n+    // Login from keytab if security is enabled.\n+    try {\n+      SecurityUtil.login(conf, YarnConfiguration.TIMELINE_SERVICE_KEYTAB,\n+          YarnConfiguration.TIMELINE_SERVICE_PRINCIPAL, bindAddr.getHostName());\n+    } catch(IOException e) {\n+      throw new YarnRuntimeException(\"Failed to login from keytab\", e);\n+    }\n \n     TimelineReader timelineReaderStore \u003d createTimelineReaderStore(conf);\n     timelineReaderStore.init(conf);\n     addService(timelineReaderStore);\n     timelineReaderManager \u003d createTimelineReaderManager(timelineReaderStore);\n     addService(timelineReaderManager);\n     super.serviceInit(conf);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected void serviceInit(Configuration conf) throws Exception {\n    if (!YarnConfiguration.timelineServiceV2Enabled(conf)) {\n      throw new YarnException(\"timeline service v.2 is not enabled\");\n    }\n    InetSocketAddress bindAddr \u003d conf.getSocketAddr(\n        YarnConfiguration.TIMELINE_SERVICE_ADDRESS,\n            YarnConfiguration.DEFAULT_TIMELINE_SERVICE_ADDRESS,\n                YarnConfiguration.DEFAULT_TIMELINE_SERVICE_PORT);\n    // Login from keytab if security is enabled.\n    try {\n      SecurityUtil.login(conf, YarnConfiguration.TIMELINE_SERVICE_KEYTAB,\n          YarnConfiguration.TIMELINE_SERVICE_PRINCIPAL, bindAddr.getHostName());\n    } catch(IOException e) {\n      throw new YarnRuntimeException(\"Failed to login from keytab\", e);\n    }\n\n    TimelineReader timelineReaderStore \u003d createTimelineReaderStore(conf);\n    timelineReaderStore.init(conf);\n    addService(timelineReaderStore);\n    timelineReaderManager \u003d createTimelineReaderManager(timelineReaderStore);\n    addService(timelineReaderManager);\n    super.serviceInit(conf);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-timelineservice/src/main/java/org/apache/hadoop/yarn/server/timelineservice/reader/TimelineReaderServer.java",
      "extendedDetails": {}
    },
    "a5a55a54ab1568e941062ea3dabdd237f71f15c4": {
      "type": "Ybodychange",
      "commitMessage": "YARN-5922. Remove direct references of HBaseTimelineWriter/Reader in core ATS classes. Contributed by Haibo Chen.\n",
      "commitDate": "08/12/16 12:31 PM",
      "commitName": "a5a55a54ab1568e941062ea3dabdd237f71f15c4",
      "commitAuthor": "Sangjin Lee",
      "commitDateOld": "27/10/16 4:09 PM",
      "commitNameOld": "5877f20f9c3f6f0afa505715e9a2ee312475af17",
      "commitAuthorOld": "Robert Kanter",
      "daysBetweenCommits": 41.89,
      "commitsBetweenForRepo": 317,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,11 +1,12 @@\n   protected void serviceInit(Configuration conf) throws Exception {\n     if (!YarnConfiguration.timelineServiceV2Enabled(conf)) {\n       throw new YarnException(\"timeline service v.2 is not enabled\");\n     }\n \n     TimelineReader timelineReaderStore \u003d createTimelineReaderStore(conf);\n+    timelineReaderStore.init(conf);\n     addService(timelineReaderStore);\n     timelineReaderManager \u003d createTimelineReaderManager(timelineReaderStore);\n     addService(timelineReaderManager);\n     super.serviceInit(conf);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected void serviceInit(Configuration conf) throws Exception {\n    if (!YarnConfiguration.timelineServiceV2Enabled(conf)) {\n      throw new YarnException(\"timeline service v.2 is not enabled\");\n    }\n\n    TimelineReader timelineReaderStore \u003d createTimelineReaderStore(conf);\n    timelineReaderStore.init(conf);\n    addService(timelineReaderStore);\n    timelineReaderManager \u003d createTimelineReaderManager(timelineReaderStore);\n    addService(timelineReaderManager);\n    super.serviceInit(conf);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-timelineservice/src/main/java/org/apache/hadoop/yarn/server/timelineservice/reader/TimelineReaderServer.java",
      "extendedDetails": {}
    },
    "89e5c44f9e891a3579384c3fa3766937cd4970f1": {
      "type": "Ybodychange",
      "commitMessage": "YARN-4356. Ensure the timeline service v.2 is disabled cleanly and has no\nimpact when it\u0027s turned off. Contributed by Sangjin Lee.\n",
      "commitDate": "10/07/16 8:45 AM",
      "commitName": "89e5c44f9e891a3579384c3fa3766937cd4970f1",
      "commitAuthor": "Li Lu",
      "commitDateOld": "10/07/16 8:45 AM",
      "commitNameOld": "d95dc89a02d5915363153e0d9254f2cc0cf73ca0",
      "commitAuthorOld": "Vrushali Channapattan",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 13,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,7 +1,11 @@\n   protected void serviceInit(Configuration conf) throws Exception {\n+    if (!YarnConfiguration.timelineServiceV2Enabled(conf)) {\n+      throw new YarnException(\"timeline service v.2 is not enabled\");\n+    }\n+\n     TimelineReader timelineReaderStore \u003d createTimelineReaderStore(conf);\n     addService(timelineReaderStore);\n     timelineReaderManager \u003d createTimelineReaderManager(timelineReaderStore);\n     addService(timelineReaderManager);\n     super.serviceInit(conf);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected void serviceInit(Configuration conf) throws Exception {\n    if (!YarnConfiguration.timelineServiceV2Enabled(conf)) {\n      throw new YarnException(\"timeline service v.2 is not enabled\");\n    }\n\n    TimelineReader timelineReaderStore \u003d createTimelineReaderStore(conf);\n    addService(timelineReaderStore);\n    timelineReaderManager \u003d createTimelineReaderManager(timelineReaderStore);\n    addService(timelineReaderManager);\n    super.serviceInit(conf);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-timelineservice/src/main/java/org/apache/hadoop/yarn/server/timelineservice/reader/TimelineReaderServer.java",
      "extendedDetails": {}
    },
    "e27642abf4deb12c6e8c47ffc891b41300494307": {
      "type": "Yintroduced",
      "commitMessage": "YARN-3047. [Data Serving] Set up ATS reader with basic request serving structure and lifecycle (Varun Saxena via sjlee)\n\n(cherry picked from commit 4c5f88fb0f04b7919738d07598b0f006a9ff91f2)\n",
      "commitDate": "10/07/16 8:45 AM",
      "commitName": "e27642abf4deb12c6e8c47ffc891b41300494307",
      "commitAuthor": "Sangjin Lee",
      "diff": "@@ -0,0 +1,7 @@\n+  protected void serviceInit(Configuration conf) throws Exception {\n+    TimelineReader timelineReaderStore \u003d createTimelineReaderStore(conf);\n+    addService(timelineReaderStore);\n+    timelineReaderManager \u003d createTimelineReaderManager(timelineReaderStore);\n+    addService(timelineReaderManager);\n+    super.serviceInit(conf);\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  protected void serviceInit(Configuration conf) throws Exception {\n    TimelineReader timelineReaderStore \u003d createTimelineReaderStore(conf);\n    addService(timelineReaderStore);\n    timelineReaderManager \u003d createTimelineReaderManager(timelineReaderStore);\n    addService(timelineReaderManager);\n    super.serviceInit(conf);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-timelineservice/src/main/java/org/apache/hadoop/yarn/server/timelineservice/reader/TimelineReaderServer.java"
    }
  }
}