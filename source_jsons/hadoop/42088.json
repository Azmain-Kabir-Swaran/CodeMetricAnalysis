{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "RMStateStore.java",
  "functionName": "serviceInit",
  "functionId": "serviceInit___conf-Configuration",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/recovery/RMStateStore.java",
  "functionStartLine": 806,
  "functionEndLine": 820,
  "numCommitsSeen": 91,
  "timeTaken": 4363,
  "changeHistory": [
    "e6a80e476d4348a4373e6dd5792d70edff16516f",
    "2797507d51566ab3b8328e5fb1d0beb9fbce5bae",
    "a59df15757fac7f917cb96fc8fcfeb7017475e4f",
    "d65603517e52843f11cd9d3b6f6e28fca9336ee3",
    "e28015ed1b40278028cfb70c4c87d9bc95a2b6a6",
    "ad0011a3405fee6c6e45996d39557e0f8d420633",
    "6cd0736cc57849e4f7c5d38a3986432a9717fe39"
  ],
  "changeHistoryShort": {
    "e6a80e476d4348a4373e6dd5792d70edff16516f": "Ybodychange",
    "2797507d51566ab3b8328e5fb1d0beb9fbce5bae": "Ybodychange",
    "a59df15757fac7f917cb96fc8fcfeb7017475e4f": "Ybodychange",
    "d65603517e52843f11cd9d3b6f6e28fca9336ee3": "Ybodychange",
    "e28015ed1b40278028cfb70c4c87d9bc95a2b6a6": "Ymultichange(Ymodifierchange,Ybodychange)",
    "ad0011a3405fee6c6e45996d39557e0f8d420633": "Ymultichange(Yrename,Ybodychange)",
    "6cd0736cc57849e4f7c5d38a3986432a9717fe39": "Yintroduced"
  },
  "changeHistoryDetails": {
    "e6a80e476d4348a4373e6dd5792d70edff16516f": {
      "type": "Ybodychange",
      "commitMessage": "YARN-8151. Yarn RM Epoch should wrap around. Contributed by Young Chen.\n",
      "commitDate": "02/05/18 5:23 PM",
      "commitName": "e6a80e476d4348a4373e6dd5792d70edff16516f",
      "commitAuthor": "Inigo Goiri",
      "commitDateOld": "01/03/18 8:38 AM",
      "commitNameOld": "6ca4e3017b994a7444b4b8bf936c1d5d19603ccd",
      "commitAuthorOld": "Yufei Gu",
      "daysBetweenCommits": 62.32,
      "commitsBetweenForRepo": 1056,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,13 +1,15 @@\n   protected void serviceInit(Configuration conf) throws Exception{\n     // create async handler\n     dispatcher \u003d new AsyncDispatcher(\"RM StateStore dispatcher\");\n     dispatcher.init(conf);\n     rmStateStoreEventHandler \u003d new ForwardingEventHandler();\n     dispatcher.register(RMStateStoreEventType.class, \n                         rmStateStoreEventHandler);\n     dispatcher.setDrainEventsOnStop();\n     // read the base epoch value from conf\n     baseEpoch \u003d conf.getLong(YarnConfiguration.RM_EPOCH,\n         YarnConfiguration.DEFAULT_RM_EPOCH);\n+    epochRange \u003d conf.getLong(YarnConfiguration.RM_EPOCH_RANGE,\n+        YarnConfiguration.DEFAULT_RM_EPOCH_RANGE);\n     initInternal(conf);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected void serviceInit(Configuration conf) throws Exception{\n    // create async handler\n    dispatcher \u003d new AsyncDispatcher(\"RM StateStore dispatcher\");\n    dispatcher.init(conf);\n    rmStateStoreEventHandler \u003d new ForwardingEventHandler();\n    dispatcher.register(RMStateStoreEventType.class, \n                        rmStateStoreEventHandler);\n    dispatcher.setDrainEventsOnStop();\n    // read the base epoch value from conf\n    baseEpoch \u003d conf.getLong(YarnConfiguration.RM_EPOCH,\n        YarnConfiguration.DEFAULT_RM_EPOCH);\n    epochRange \u003d conf.getLong(YarnConfiguration.RM_EPOCH_RANGE,\n        YarnConfiguration.DEFAULT_RM_EPOCH_RANGE);\n    initInternal(conf);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/recovery/RMStateStore.java",
      "extendedDetails": {}
    },
    "2797507d51566ab3b8328e5fb1d0beb9fbce5bae": {
      "type": "Ybodychange",
      "commitMessage": "YARN-5601. Make the RM epoch base value configurable. Contributed by Subru Krishnan\n\n(cherry picked from commit 9ca2aba9cc65090162b3517b194b5e655ee4a157)\n",
      "commitDate": "01/08/17 5:28 PM",
      "commitName": "2797507d51566ab3b8328e5fb1d0beb9fbce5bae",
      "commitAuthor": "Jian He",
      "commitDateOld": "18/07/17 10:40 PM",
      "commitNameOld": "845c4e52bdd579a24df5dbba7477b0ebf2fa16f1",
      "commitAuthorOld": "Rohith Sharma K S",
      "daysBetweenCommits": 13.78,
      "commitsBetweenForRepo": 92,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,10 +1,13 @@\n   protected void serviceInit(Configuration conf) throws Exception{\n     // create async handler\n     dispatcher \u003d new AsyncDispatcher(\"RM StateStore dispatcher\");\n     dispatcher.init(conf);\n     rmStateStoreEventHandler \u003d new ForwardingEventHandler();\n     dispatcher.register(RMStateStoreEventType.class, \n                         rmStateStoreEventHandler);\n     dispatcher.setDrainEventsOnStop();\n+    // read the base epoch value from conf\n+    baseEpoch \u003d conf.getLong(YarnConfiguration.RM_EPOCH,\n+        YarnConfiguration.DEFAULT_RM_EPOCH);\n     initInternal(conf);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected void serviceInit(Configuration conf) throws Exception{\n    // create async handler\n    dispatcher \u003d new AsyncDispatcher(\"RM StateStore dispatcher\");\n    dispatcher.init(conf);\n    rmStateStoreEventHandler \u003d new ForwardingEventHandler();\n    dispatcher.register(RMStateStoreEventType.class, \n                        rmStateStoreEventHandler);\n    dispatcher.setDrainEventsOnStop();\n    // read the base epoch value from conf\n    baseEpoch \u003d conf.getLong(YarnConfiguration.RM_EPOCH,\n        YarnConfiguration.DEFAULT_RM_EPOCH);\n    initInternal(conf);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/recovery/RMStateStore.java",
      "extendedDetails": {}
    },
    "a59df15757fac7f917cb96fc8fcfeb7017475e4f": {
      "type": "Ybodychange",
      "commitMessage": "YARN-6015. AsyncDispatcher thread name can be set to improved debugging. Contributed by Ajith S.\n",
      "commitDate": "06/01/17 6:41 PM",
      "commitName": "a59df15757fac7f917cb96fc8fcfeb7017475e4f",
      "commitAuthor": "Naganarasimha",
      "commitDateOld": "16/11/16 1:44 AM",
      "commitNameOld": "d65603517e52843f11cd9d3b6f6e28fca9336ee3",
      "commitAuthorOld": "Rohith Sharma K S",
      "daysBetweenCommits": 51.71,
      "commitsBetweenForRepo": 268,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,10 +1,10 @@\n   protected void serviceInit(Configuration conf) throws Exception{\n     // create async handler\n-    dispatcher \u003d new AsyncDispatcher();\n+    dispatcher \u003d new AsyncDispatcher(\"RM StateStore dispatcher\");\n     dispatcher.init(conf);\n     rmStateStoreEventHandler \u003d new ForwardingEventHandler();\n     dispatcher.register(RMStateStoreEventType.class, \n                         rmStateStoreEventHandler);\n     dispatcher.setDrainEventsOnStop();\n     initInternal(conf);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected void serviceInit(Configuration conf) throws Exception{\n    // create async handler\n    dispatcher \u003d new AsyncDispatcher(\"RM StateStore dispatcher\");\n    dispatcher.init(conf);\n    rmStateStoreEventHandler \u003d new ForwardingEventHandler();\n    dispatcher.register(RMStateStoreEventType.class, \n                        rmStateStoreEventHandler);\n    dispatcher.setDrainEventsOnStop();\n    initInternal(conf);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/recovery/RMStateStore.java",
      "extendedDetails": {}
    },
    "d65603517e52843f11cd9d3b6f6e28fca9336ee3": {
      "type": "Ybodychange",
      "commitMessage": "YARN-5375. invoke MockRM#drainEvents implicitly in MockRM methods to reduce test failures. Contributed by sandflee.\n",
      "commitDate": "16/11/16 1:44 AM",
      "commitName": "d65603517e52843f11cd9d3b6f6e28fca9336ee3",
      "commitAuthor": "Rohith Sharma K S",
      "commitDateOld": "14/11/16 9:28 PM",
      "commitNameOld": "b7070f3308fc4c6a8a9a25021562169cae87d223",
      "commitAuthorOld": "Rohith Sharma K S",
      "daysBetweenCommits": 1.18,
      "commitsBetweenForRepo": 9,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,9 +1,10 @@\n   protected void serviceInit(Configuration conf) throws Exception{\n     // create async handler\n     dispatcher \u003d new AsyncDispatcher();\n     dispatcher.init(conf);\n+    rmStateStoreEventHandler \u003d new ForwardingEventHandler();\n     dispatcher.register(RMStateStoreEventType.class, \n-                        new ForwardingEventHandler());\n+                        rmStateStoreEventHandler);\n     dispatcher.setDrainEventsOnStop();\n     initInternal(conf);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected void serviceInit(Configuration conf) throws Exception{\n    // create async handler\n    dispatcher \u003d new AsyncDispatcher();\n    dispatcher.init(conf);\n    rmStateStoreEventHandler \u003d new ForwardingEventHandler();\n    dispatcher.register(RMStateStoreEventType.class, \n                        rmStateStoreEventHandler);\n    dispatcher.setDrainEventsOnStop();\n    initInternal(conf);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/recovery/RMStateStore.java",
      "extendedDetails": {}
    },
    "e28015ed1b40278028cfb70c4c87d9bc95a2b6a6": {
      "type": "Ymultichange(Ymodifierchange,Ybodychange)",
      "commitMessage": "YARN-1121. Changed ResourceManager\u0027s state-store to drain all events on shut-down. Contributed by Jian He.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1540232 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "08/11/13 4:55 PM",
      "commitName": "e28015ed1b40278028cfb70c4c87d9bc95a2b6a6",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "subchanges": [
        {
          "type": "Ymodifierchange",
          "commitMessage": "YARN-1121. Changed ResourceManager\u0027s state-store to drain all events on shut-down. Contributed by Jian He.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1540232 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "08/11/13 4:55 PM",
          "commitName": "e28015ed1b40278028cfb70c4c87d9bc95a2b6a6",
          "commitAuthor": "Vinod Kumar Vavilapalli",
          "commitDateOld": "31/10/13 10:25 AM",
          "commitNameOld": "9f4d4e27fb1760b352cc5b301cd65a50d2d43ff6",
          "commitAuthorOld": "Vinod Kumar Vavilapalli",
          "daysBetweenCommits": 8.31,
          "commitsBetweenForRepo": 31,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,8 +1,9 @@\n-  public synchronized void serviceInit(Configuration conf) throws Exception{    \n+  protected void serviceInit(Configuration conf) throws Exception{\n     // create async handler\n     dispatcher \u003d new AsyncDispatcher();\n     dispatcher.init(conf);\n     dispatcher.register(RMStateStoreEventType.class, \n                         new ForwardingEventHandler());\n+    dispatcher.setDrainEventsOnStop();\n     initInternal(conf);\n   }\n\\ No newline at end of file\n",
          "actualSource": "  protected void serviceInit(Configuration conf) throws Exception{\n    // create async handler\n    dispatcher \u003d new AsyncDispatcher();\n    dispatcher.init(conf);\n    dispatcher.register(RMStateStoreEventType.class, \n                        new ForwardingEventHandler());\n    dispatcher.setDrainEventsOnStop();\n    initInternal(conf);\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/recovery/RMStateStore.java",
          "extendedDetails": {
            "oldValue": "[public, synchronized]",
            "newValue": "[protected]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "YARN-1121. Changed ResourceManager\u0027s state-store to drain all events on shut-down. Contributed by Jian He.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1540232 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "08/11/13 4:55 PM",
          "commitName": "e28015ed1b40278028cfb70c4c87d9bc95a2b6a6",
          "commitAuthor": "Vinod Kumar Vavilapalli",
          "commitDateOld": "31/10/13 10:25 AM",
          "commitNameOld": "9f4d4e27fb1760b352cc5b301cd65a50d2d43ff6",
          "commitAuthorOld": "Vinod Kumar Vavilapalli",
          "daysBetweenCommits": 8.31,
          "commitsBetweenForRepo": 31,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,8 +1,9 @@\n-  public synchronized void serviceInit(Configuration conf) throws Exception{    \n+  protected void serviceInit(Configuration conf) throws Exception{\n     // create async handler\n     dispatcher \u003d new AsyncDispatcher();\n     dispatcher.init(conf);\n     dispatcher.register(RMStateStoreEventType.class, \n                         new ForwardingEventHandler());\n+    dispatcher.setDrainEventsOnStop();\n     initInternal(conf);\n   }\n\\ No newline at end of file\n",
          "actualSource": "  protected void serviceInit(Configuration conf) throws Exception{\n    // create async handler\n    dispatcher \u003d new AsyncDispatcher();\n    dispatcher.init(conf);\n    dispatcher.register(RMStateStoreEventType.class, \n                        new ForwardingEventHandler());\n    dispatcher.setDrainEventsOnStop();\n    initInternal(conf);\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/recovery/RMStateStore.java",
          "extendedDetails": {}
        }
      ]
    },
    "ad0011a3405fee6c6e45996d39557e0f8d420633": {
      "type": "Ymultichange(Yrename,Ybodychange)",
      "commitMessage": "YARN-1082. Create base directories on HDFS after RM login to ensure RM recovery doesn\u0027t fail in secure mode. Contributed by Vinod K V.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1516337 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "21/08/13 4:55 PM",
      "commitName": "ad0011a3405fee6c6e45996d39557e0f8d420633",
      "commitAuthor": "Arun Murthy",
      "subchanges": [
        {
          "type": "Yrename",
          "commitMessage": "YARN-1082. Create base directories on HDFS after RM login to ensure RM recovery doesn\u0027t fail in secure mode. Contributed by Vinod K V.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1516337 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "21/08/13 4:55 PM",
          "commitName": "ad0011a3405fee6c6e45996d39557e0f8d420633",
          "commitAuthor": "Arun Murthy",
          "commitDateOld": "29/07/13 4:17 PM",
          "commitNameOld": "817a6543465a3228cdb28a2eeb8e4f96a2d0f9e6",
          "commitAuthorOld": "Vinod Kumar Vavilapalli",
          "daysBetweenCommits": 23.03,
          "commitsBetweenForRepo": 147,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,10 +1,8 @@\n-  public synchronized void init(Configuration conf) throws Exception{    \n+  public synchronized void serviceInit(Configuration conf) throws Exception{    \n     // create async handler\n     dispatcher \u003d new AsyncDispatcher();\n     dispatcher.init(conf);\n     dispatcher.register(RMStateStoreEventType.class, \n                         new ForwardingEventHandler());\n-    dispatcher.start();\n-    \n     initInternal(conf);\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public synchronized void serviceInit(Configuration conf) throws Exception{    \n    // create async handler\n    dispatcher \u003d new AsyncDispatcher();\n    dispatcher.init(conf);\n    dispatcher.register(RMStateStoreEventType.class, \n                        new ForwardingEventHandler());\n    initInternal(conf);\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/recovery/RMStateStore.java",
          "extendedDetails": {
            "oldValue": "init",
            "newValue": "serviceInit"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "YARN-1082. Create base directories on HDFS after RM login to ensure RM recovery doesn\u0027t fail in secure mode. Contributed by Vinod K V.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1516337 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "21/08/13 4:55 PM",
          "commitName": "ad0011a3405fee6c6e45996d39557e0f8d420633",
          "commitAuthor": "Arun Murthy",
          "commitDateOld": "29/07/13 4:17 PM",
          "commitNameOld": "817a6543465a3228cdb28a2eeb8e4f96a2d0f9e6",
          "commitAuthorOld": "Vinod Kumar Vavilapalli",
          "daysBetweenCommits": 23.03,
          "commitsBetweenForRepo": 147,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,10 +1,8 @@\n-  public synchronized void init(Configuration conf) throws Exception{    \n+  public synchronized void serviceInit(Configuration conf) throws Exception{    \n     // create async handler\n     dispatcher \u003d new AsyncDispatcher();\n     dispatcher.init(conf);\n     dispatcher.register(RMStateStoreEventType.class, \n                         new ForwardingEventHandler());\n-    dispatcher.start();\n-    \n     initInternal(conf);\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public synchronized void serviceInit(Configuration conf) throws Exception{    \n    // create async handler\n    dispatcher \u003d new AsyncDispatcher();\n    dispatcher.init(conf);\n    dispatcher.register(RMStateStoreEventType.class, \n                        new ForwardingEventHandler());\n    initInternal(conf);\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/recovery/RMStateStore.java",
          "extendedDetails": {}
        }
      ]
    },
    "6cd0736cc57849e4f7c5d38a3986432a9717fe39": {
      "type": "Yintroduced",
      "commitMessage": "YARN-230. RM Restart phase 1 - includes support for saving/restarting all applications on an RM bounce. Contributed by Bikas Saha.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1423758 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "18/12/12 8:21 PM",
      "commitName": "6cd0736cc57849e4f7c5d38a3986432a9717fe39",
      "commitAuthor": "Arun Murthy",
      "diff": "@@ -0,0 +1,10 @@\n+  public synchronized void init(Configuration conf) throws Exception{    \n+    // create async handler\n+    dispatcher \u003d new AsyncDispatcher();\n+    dispatcher.init(conf);\n+    dispatcher.register(RMStateStoreEventType.class, \n+                        new ForwardingEventHandler());\n+    dispatcher.start();\n+    \n+    initInternal(conf);\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public synchronized void init(Configuration conf) throws Exception{    \n    // create async handler\n    dispatcher \u003d new AsyncDispatcher();\n    dispatcher.init(conf);\n    dispatcher.register(RMStateStoreEventType.class, \n                        new ForwardingEventHandler());\n    dispatcher.start();\n    \n    initInternal(conf);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/recovery/RMStateStore.java"
    }
  }
}