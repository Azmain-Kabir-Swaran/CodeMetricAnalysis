{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "DefaultContainerExecutor.java",
  "functionName": "buildCommandExecutor",
  "functionId": "buildCommandExecutor___wrapperScriptPath-String__containerIdStr-String__user-String__pidFile-Path__resource-Resource__workDir-File__environment-Map__String,String__",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/DefaultContainerExecutor.java",
  "functionStartLine": 381,
  "functionEndLine": 395,
  "numCommitsSeen": 101,
  "timeTaken": 4787,
  "changeHistory": [
    "f7df55f4a89ed2d75d874b32209647ef4f448875",
    "f5d92359145dfb820a9521e00e2d44c4ee96e67e",
    "9d4d30243b0fc9630da51a2c17b543ef671d035c",
    "21101c01f242439ec8ec40fb3a9ab1991ae0adc7",
    "3b12fd6cfbf4cc91ef8e8616c7aafa9de006cde5"
  ],
  "changeHistoryShort": {
    "f7df55f4a89ed2d75d874b32209647ef4f448875": "Ybodychange",
    "f5d92359145dfb820a9521e00e2d44c4ee96e67e": "Ymultichange(Yparameterchange,Yexceptionschange,Ybodychange)",
    "9d4d30243b0fc9630da51a2c17b543ef671d035c": "Ybodychange",
    "21101c01f242439ec8ec40fb3a9ab1991ae0adc7": "Ymultichange(Yparameterchange,Ybodychange)",
    "3b12fd6cfbf4cc91ef8e8616c7aafa9de006cde5": "Yintroduced"
  },
  "changeHistoryDetails": {
    "f7df55f4a89ed2d75d874b32209647ef4f448875": {
      "type": "Ybodychange",
      "commitMessage": "YARN-9602. Use logger format in Container Executor. Contributed by Abhishek Modi.\n",
      "commitDate": "11/06/19 9:59 AM",
      "commitName": "f7df55f4a89ed2d75d874b32209647ef4f448875",
      "commitAuthor": "bibinchundatt",
      "commitDateOld": "15/03/19 4:20 PM",
      "commitNameOld": "2064ca015d1584263aac0cc20c60b925a3aff612",
      "commitAuthorOld": "Eric Yang",
      "daysBetweenCommits": 87.73,
      "commitsBetweenForRepo": 542,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,15 @@\n   protected CommandExecutor buildCommandExecutor(String wrapperScriptPath, \n       String containerIdStr, String user, Path pidFile, Resource resource,\n       File workDir, Map\u003cString, String\u003e environment) {\n     \n     String[] command \u003d getRunCommand(wrapperScriptPath,\n         containerIdStr, user, pidFile, this.getConf(), resource);\n \n-      LOG.info(\"launchContainer: \" + Arrays.toString(command));\n-      return new ShellCommandExecutor(\n-          command,\n-          workDir,\n-          environment,\n-          0L,\n-          false);\n+    LOG.info(\"launchContainer: {}\", Arrays.toString(command));\n+    return new ShellCommandExecutor(\n+        command,\n+        workDir,\n+        environment,\n+        0L,\n+        false);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected CommandExecutor buildCommandExecutor(String wrapperScriptPath, \n      String containerIdStr, String user, Path pidFile, Resource resource,\n      File workDir, Map\u003cString, String\u003e environment) {\n    \n    String[] command \u003d getRunCommand(wrapperScriptPath,\n        containerIdStr, user, pidFile, this.getConf(), resource);\n\n    LOG.info(\"launchContainer: {}\", Arrays.toString(command));\n    return new ShellCommandExecutor(\n        command,\n        workDir,\n        environment,\n        0L,\n        false);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/DefaultContainerExecutor.java",
      "extendedDetails": {}
    },
    "f5d92359145dfb820a9521e00e2d44c4ee96e67e": {
      "type": "Ymultichange(Yparameterchange,Yexceptionschange,Ybodychange)",
      "commitMessage": "YARN-5466. DefaultContainerExecutor needs JavaDocs (templedf via rkanter)\n",
      "commitDate": "17/10/16 2:29 PM",
      "commitName": "f5d92359145dfb820a9521e00e2d44c4ee96e67e",
      "commitAuthor": "Robert Kanter",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "YARN-5466. DefaultContainerExecutor needs JavaDocs (templedf via rkanter)\n",
          "commitDate": "17/10/16 2:29 PM",
          "commitName": "f5d92359145dfb820a9521e00e2d44c4ee96e67e",
          "commitAuthor": "Robert Kanter",
          "commitDateOld": "15/09/16 7:15 AM",
          "commitNameOld": "40b5a59b726733df456330a26f03d5174cc0bc1c",
          "commitAuthorOld": "Arun Suresh",
          "daysBetweenCommits": 32.3,
          "commitsBetweenForRepo": 223,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,16 +1,15 @@\n   protected CommandExecutor buildCommandExecutor(String wrapperScriptPath, \n       String containerIdStr, String user, Path pidFile, Resource resource,\n-      File wordDir, Map\u003cString, String\u003e environment)\n-          throws IOException {\n+      File workDir, Map\u003cString, String\u003e environment) {\n     \n     String[] command \u003d getRunCommand(wrapperScriptPath,\n         containerIdStr, user, pidFile, this.getConf(), resource);\n \n       LOG.info(\"launchContainer: \" + Arrays.toString(command));\n       return new ShellCommandExecutor(\n           command,\n-          wordDir,\n+          workDir,\n           environment,\n           0L,\n           false);\n   }\n\\ No newline at end of file\n",
          "actualSource": "  protected CommandExecutor buildCommandExecutor(String wrapperScriptPath, \n      String containerIdStr, String user, Path pidFile, Resource resource,\n      File workDir, Map\u003cString, String\u003e environment) {\n    \n    String[] command \u003d getRunCommand(wrapperScriptPath,\n        containerIdStr, user, pidFile, this.getConf(), resource);\n\n      LOG.info(\"launchContainer: \" + Arrays.toString(command));\n      return new ShellCommandExecutor(\n          command,\n          workDir,\n          environment,\n          0L,\n          false);\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/DefaultContainerExecutor.java",
          "extendedDetails": {
            "oldValue": "[wrapperScriptPath-String, containerIdStr-String, user-String, pidFile-Path, resource-Resource, wordDir-File, environment-Map\u003cString,String\u003e]",
            "newValue": "[wrapperScriptPath-String, containerIdStr-String, user-String, pidFile-Path, resource-Resource, workDir-File, environment-Map\u003cString,String\u003e]"
          }
        },
        {
          "type": "Yexceptionschange",
          "commitMessage": "YARN-5466. DefaultContainerExecutor needs JavaDocs (templedf via rkanter)\n",
          "commitDate": "17/10/16 2:29 PM",
          "commitName": "f5d92359145dfb820a9521e00e2d44c4ee96e67e",
          "commitAuthor": "Robert Kanter",
          "commitDateOld": "15/09/16 7:15 AM",
          "commitNameOld": "40b5a59b726733df456330a26f03d5174cc0bc1c",
          "commitAuthorOld": "Arun Suresh",
          "daysBetweenCommits": 32.3,
          "commitsBetweenForRepo": 223,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,16 +1,15 @@\n   protected CommandExecutor buildCommandExecutor(String wrapperScriptPath, \n       String containerIdStr, String user, Path pidFile, Resource resource,\n-      File wordDir, Map\u003cString, String\u003e environment)\n-          throws IOException {\n+      File workDir, Map\u003cString, String\u003e environment) {\n     \n     String[] command \u003d getRunCommand(wrapperScriptPath,\n         containerIdStr, user, pidFile, this.getConf(), resource);\n \n       LOG.info(\"launchContainer: \" + Arrays.toString(command));\n       return new ShellCommandExecutor(\n           command,\n-          wordDir,\n+          workDir,\n           environment,\n           0L,\n           false);\n   }\n\\ No newline at end of file\n",
          "actualSource": "  protected CommandExecutor buildCommandExecutor(String wrapperScriptPath, \n      String containerIdStr, String user, Path pidFile, Resource resource,\n      File workDir, Map\u003cString, String\u003e environment) {\n    \n    String[] command \u003d getRunCommand(wrapperScriptPath,\n        containerIdStr, user, pidFile, this.getConf(), resource);\n\n      LOG.info(\"launchContainer: \" + Arrays.toString(command));\n      return new ShellCommandExecutor(\n          command,\n          workDir,\n          environment,\n          0L,\n          false);\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/DefaultContainerExecutor.java",
          "extendedDetails": {
            "oldValue": "[IOException]",
            "newValue": "[]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "YARN-5466. DefaultContainerExecutor needs JavaDocs (templedf via rkanter)\n",
          "commitDate": "17/10/16 2:29 PM",
          "commitName": "f5d92359145dfb820a9521e00e2d44c4ee96e67e",
          "commitAuthor": "Robert Kanter",
          "commitDateOld": "15/09/16 7:15 AM",
          "commitNameOld": "40b5a59b726733df456330a26f03d5174cc0bc1c",
          "commitAuthorOld": "Arun Suresh",
          "daysBetweenCommits": 32.3,
          "commitsBetweenForRepo": 223,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,16 +1,15 @@\n   protected CommandExecutor buildCommandExecutor(String wrapperScriptPath, \n       String containerIdStr, String user, Path pidFile, Resource resource,\n-      File wordDir, Map\u003cString, String\u003e environment)\n-          throws IOException {\n+      File workDir, Map\u003cString, String\u003e environment) {\n     \n     String[] command \u003d getRunCommand(wrapperScriptPath,\n         containerIdStr, user, pidFile, this.getConf(), resource);\n \n       LOG.info(\"launchContainer: \" + Arrays.toString(command));\n       return new ShellCommandExecutor(\n           command,\n-          wordDir,\n+          workDir,\n           environment,\n           0L,\n           false);\n   }\n\\ No newline at end of file\n",
          "actualSource": "  protected CommandExecutor buildCommandExecutor(String wrapperScriptPath, \n      String containerIdStr, String user, Path pidFile, Resource resource,\n      File workDir, Map\u003cString, String\u003e environment) {\n    \n    String[] command \u003d getRunCommand(wrapperScriptPath,\n        containerIdStr, user, pidFile, this.getConf(), resource);\n\n      LOG.info(\"launchContainer: \" + Arrays.toString(command));\n      return new ShellCommandExecutor(\n          command,\n          workDir,\n          environment,\n          0L,\n          false);\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/DefaultContainerExecutor.java",
          "extendedDetails": {}
        }
      ]
    },
    "9d4d30243b0fc9630da51a2c17b543ef671d035c": {
      "type": "Ybodychange",
      "commitMessage": "Remove parent\u0027s env vars from child processes\n",
      "commitDate": "29/04/16 9:25 AM",
      "commitName": "9d4d30243b0fc9630da51a2c17b543ef671d035c",
      "commitAuthor": "Robert Kanter",
      "commitDateOld": "25/02/16 4:36 PM",
      "commitNameOld": "d7fdec1e6b465395d2faca6e404e329d20f6c3d8",
      "commitAuthorOld": "Robert Kanter",
      "daysBetweenCommits": 63.66,
      "commitsBetweenForRepo": 382,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,14 +1,16 @@\n   protected CommandExecutor buildCommandExecutor(String wrapperScriptPath, \n       String containerIdStr, String user, Path pidFile, Resource resource,\n       File wordDir, Map\u003cString, String\u003e environment)\n           throws IOException {\n     \n     String[] command \u003d getRunCommand(wrapperScriptPath,\n         containerIdStr, user, pidFile, this.getConf(), resource);\n \n       LOG.info(\"launchContainer: \" + Arrays.toString(command));\n       return new ShellCommandExecutor(\n           command,\n           wordDir,\n-          environment); \n+          environment,\n+          0L,\n+          false);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected CommandExecutor buildCommandExecutor(String wrapperScriptPath, \n      String containerIdStr, String user, Path pidFile, Resource resource,\n      File wordDir, Map\u003cString, String\u003e environment)\n          throws IOException {\n    \n    String[] command \u003d getRunCommand(wrapperScriptPath,\n        containerIdStr, user, pidFile, this.getConf(), resource);\n\n      LOG.info(\"launchContainer: \" + Arrays.toString(command));\n      return new ShellCommandExecutor(\n          command,\n          wordDir,\n          environment,\n          0L,\n          false);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/DefaultContainerExecutor.java",
      "extendedDetails": {}
    },
    "21101c01f242439ec8ec40fb3a9ab1991ae0adc7": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "YARN-2190. Added CPU and memory limit options to the default container executor for Windows containers. Contributed by Chuan Liu\n",
      "commitDate": "06/03/15 2:18 PM",
      "commitName": "21101c01f242439ec8ec40fb3a9ab1991ae0adc7",
      "commitAuthor": "Jian He",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "YARN-2190. Added CPU and memory limit options to the default container executor for Windows containers. Contributed by Chuan Liu\n",
          "commitDate": "06/03/15 2:18 PM",
          "commitName": "21101c01f242439ec8ec40fb3a9ab1991ae0adc7",
          "commitAuthor": "Jian He",
          "commitDateOld": "23/12/14 8:32 PM",
          "commitNameOld": "41a548a916d4248164cb9495320f123ec215d70e",
          "commitAuthorOld": "Zhijie Shen",
          "daysBetweenCommits": 72.74,
          "commitsBetweenForRepo": 556,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,14 +1,14 @@\n   protected CommandExecutor buildCommandExecutor(String wrapperScriptPath, \n-      String containerIdStr, String user, Path pidFile, File wordDir, \n-      Map\u003cString, String\u003e environment) \n+      String containerIdStr, String user, Path pidFile, Resource resource,\n+      File wordDir, Map\u003cString, String\u003e environment)\n           throws IOException {\n     \n     String[] command \u003d getRunCommand(wrapperScriptPath,\n-        containerIdStr, user, pidFile, this.getConf());\n+        containerIdStr, user, pidFile, this.getConf(), resource);\n \n       LOG.info(\"launchContainer: \" + Arrays.toString(command));\n       return new ShellCommandExecutor(\n           command,\n           wordDir,\n           environment); \n   }\n\\ No newline at end of file\n",
          "actualSource": "  protected CommandExecutor buildCommandExecutor(String wrapperScriptPath, \n      String containerIdStr, String user, Path pidFile, Resource resource,\n      File wordDir, Map\u003cString, String\u003e environment)\n          throws IOException {\n    \n    String[] command \u003d getRunCommand(wrapperScriptPath,\n        containerIdStr, user, pidFile, this.getConf(), resource);\n\n      LOG.info(\"launchContainer: \" + Arrays.toString(command));\n      return new ShellCommandExecutor(\n          command,\n          wordDir,\n          environment); \n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/DefaultContainerExecutor.java",
          "extendedDetails": {
            "oldValue": "[wrapperScriptPath-String, containerIdStr-String, user-String, pidFile-Path, wordDir-File, environment-Map\u003cString,String\u003e]",
            "newValue": "[wrapperScriptPath-String, containerIdStr-String, user-String, pidFile-Path, resource-Resource, wordDir-File, environment-Map\u003cString,String\u003e]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "YARN-2190. Added CPU and memory limit options to the default container executor for Windows containers. Contributed by Chuan Liu\n",
          "commitDate": "06/03/15 2:18 PM",
          "commitName": "21101c01f242439ec8ec40fb3a9ab1991ae0adc7",
          "commitAuthor": "Jian He",
          "commitDateOld": "23/12/14 8:32 PM",
          "commitNameOld": "41a548a916d4248164cb9495320f123ec215d70e",
          "commitAuthorOld": "Zhijie Shen",
          "daysBetweenCommits": 72.74,
          "commitsBetweenForRepo": 556,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,14 +1,14 @@\n   protected CommandExecutor buildCommandExecutor(String wrapperScriptPath, \n-      String containerIdStr, String user, Path pidFile, File wordDir, \n-      Map\u003cString, String\u003e environment) \n+      String containerIdStr, String user, Path pidFile, Resource resource,\n+      File wordDir, Map\u003cString, String\u003e environment)\n           throws IOException {\n     \n     String[] command \u003d getRunCommand(wrapperScriptPath,\n-        containerIdStr, user, pidFile, this.getConf());\n+        containerIdStr, user, pidFile, this.getConf(), resource);\n \n       LOG.info(\"launchContainer: \" + Arrays.toString(command));\n       return new ShellCommandExecutor(\n           command,\n           wordDir,\n           environment); \n   }\n\\ No newline at end of file\n",
          "actualSource": "  protected CommandExecutor buildCommandExecutor(String wrapperScriptPath, \n      String containerIdStr, String user, Path pidFile, Resource resource,\n      File wordDir, Map\u003cString, String\u003e environment)\n          throws IOException {\n    \n    String[] command \u003d getRunCommand(wrapperScriptPath,\n        containerIdStr, user, pidFile, this.getConf(), resource);\n\n      LOG.info(\"launchContainer: \" + Arrays.toString(command));\n      return new ShellCommandExecutor(\n          command,\n          wordDir,\n          environment); \n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/DefaultContainerExecutor.java",
          "extendedDetails": {}
        }
      ]
    },
    "3b12fd6cfbf4cc91ef8e8616c7aafa9de006cde5": {
      "type": "Yintroduced",
      "commitMessage": "YARN-2198. Remove the need to run NodeManager as privileged account for Windows Secure Container Executor. Contributed by Remus Rusanu\n",
      "commitDate": "22/10/14 3:57 PM",
      "commitName": "3b12fd6cfbf4cc91ef8e8616c7aafa9de006cde5",
      "commitAuthor": "Jian He",
      "diff": "@@ -0,0 +1,14 @@\n+  protected CommandExecutor buildCommandExecutor(String wrapperScriptPath, \n+      String containerIdStr, String user, Path pidFile, File wordDir, \n+      Map\u003cString, String\u003e environment) \n+          throws IOException {\n+    \n+    String[] command \u003d getRunCommand(wrapperScriptPath,\n+        containerIdStr, user, pidFile, this.getConf());\n+\n+      LOG.info(\"launchContainer: \" + Arrays.toString(command));\n+      return new ShellCommandExecutor(\n+          command,\n+          wordDir,\n+          environment); \n+  }\n\\ No newline at end of file\n",
      "actualSource": "  protected CommandExecutor buildCommandExecutor(String wrapperScriptPath, \n      String containerIdStr, String user, Path pidFile, File wordDir, \n      Map\u003cString, String\u003e environment) \n          throws IOException {\n    \n    String[] command \u003d getRunCommand(wrapperScriptPath,\n        containerIdStr, user, pidFile, this.getConf());\n\n      LOG.info(\"launchContainer: \" + Arrays.toString(command));\n      return new ShellCommandExecutor(\n          command,\n          wordDir,\n          environment); \n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/DefaultContainerExecutor.java"
    }
  }
}