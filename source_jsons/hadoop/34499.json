{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "ContainerImpl.java",
  "functionName": "sendFinishedEvents",
  "functionId": "sendFinishedEvents",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/container/ContainerImpl.java",
  "functionStartLine": 984,
  "functionEndLine": 1001,
  "numCommitsSeen": 103,
  "timeTaken": 4122,
  "changeHistory": [
    "092fead5d9875fb3760206bcdd76cdafec5e9481",
    "e864f81471407a384395fefe1ceb3b66fc7f87f2",
    "3219b7b4ac7d12aee343f6ab2980b3357fc618b6",
    "477a30f536277bf95d7181bf1b2fdda52d83bf51",
    "c2febdcbaa12078db42403fe8fd74180fb58a84b"
  ],
  "changeHistoryShort": {
    "092fead5d9875fb3760206bcdd76cdafec5e9481": "Ybodychange",
    "e864f81471407a384395fefe1ceb3b66fc7f87f2": "Ybodychange",
    "3219b7b4ac7d12aee343f6ab2980b3357fc618b6": "Ybodychange",
    "477a30f536277bf95d7181bf1b2fdda52d83bf51": "Ybodychange",
    "c2febdcbaa12078db42403fe8fd74180fb58a84b": "Yintroduced"
  },
  "changeHistoryDetails": {
    "092fead5d9875fb3760206bcdd76cdafec5e9481": {
      "type": "Ybodychange",
      "commitMessage": "YARN-5792. Adopt the id prefix for YARN, MR, and DS entities. Contributed by Varun Saxena.\n",
      "commitDate": "29/08/17 10:59 PM",
      "commitName": "092fead5d9875fb3760206bcdd76cdafec5e9481",
      "commitAuthor": "Sangjin Lee",
      "commitDateOld": "25/08/17 1:37 PM",
      "commitNameOld": "e864f81471407a384395fefe1ceb3b66fc7f87f2",
      "commitAuthorOld": "Eric Payne",
      "daysBetweenCommits": 4.39,
      "commitsBetweenForRepo": 35,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,18 @@\n   private void sendFinishedEvents() {\n     // Inform the application\n     @SuppressWarnings(\"rawtypes\")\n     EventHandler eventHandler \u003d dispatcher.getEventHandler();\n \n     ContainerStatus containerStatus \u003d cloneAndGetContainerStatus();\n-    eventHandler.handle(new ApplicationContainerFinishedEvent(containerStatus));\n+    eventHandler.handle(\n+        new ApplicationContainerFinishedEvent(containerStatus, startTime));\n \n     // Tell the scheduler the container is Done\n     eventHandler.handle(new ContainerSchedulerEvent(this,\n         ContainerSchedulerEventType.CONTAINER_COMPLETED));\n     // Remove the container from the resource-monitor\n     eventHandler.handle(new ContainerStopMonitoringEvent(containerId));\n     // Tell the logService too\n     eventHandler.handle(new LogHandlerContainerFinishedEvent(\n         containerId, containerTokenIdentifier.getContainerType(), exitCode));\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void sendFinishedEvents() {\n    // Inform the application\n    @SuppressWarnings(\"rawtypes\")\n    EventHandler eventHandler \u003d dispatcher.getEventHandler();\n\n    ContainerStatus containerStatus \u003d cloneAndGetContainerStatus();\n    eventHandler.handle(\n        new ApplicationContainerFinishedEvent(containerStatus, startTime));\n\n    // Tell the scheduler the container is Done\n    eventHandler.handle(new ContainerSchedulerEvent(this,\n        ContainerSchedulerEventType.CONTAINER_COMPLETED));\n    // Remove the container from the resource-monitor\n    eventHandler.handle(new ContainerStopMonitoringEvent(containerId));\n    // Tell the logService too\n    eventHandler.handle(new LogHandlerContainerFinishedEvent(\n        containerId, containerTokenIdentifier.getContainerType(), exitCode));\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/container/ContainerImpl.java",
      "extendedDetails": {}
    },
    "e864f81471407a384395fefe1ceb3b66fc7f87f2": {
      "type": "Ybodychange",
      "commitMessage": "YARN-7087. NM failed to perform log aggregation due to absent container. Contributed by Jason Lowe.\n",
      "commitDate": "25/08/17 1:37 PM",
      "commitName": "e864f81471407a384395fefe1ceb3b66fc7f87f2",
      "commitAuthor": "Eric Payne",
      "commitDateOld": "22/08/17 1:14 AM",
      "commitNameOld": "d5ff57a08fac983f8b5d201064ce07945f0f216e",
      "commitAuthorOld": "Akira Ajisaka",
      "daysBetweenCommits": 3.52,
      "commitsBetweenForRepo": 22,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,17 @@\n   private void sendFinishedEvents() {\n     // Inform the application\n     @SuppressWarnings(\"rawtypes\")\n     EventHandler eventHandler \u003d dispatcher.getEventHandler();\n \n     ContainerStatus containerStatus \u003d cloneAndGetContainerStatus();\n     eventHandler.handle(new ApplicationContainerFinishedEvent(containerStatus));\n \n     // Tell the scheduler the container is Done\n     eventHandler.handle(new ContainerSchedulerEvent(this,\n         ContainerSchedulerEventType.CONTAINER_COMPLETED));\n     // Remove the container from the resource-monitor\n     eventHandler.handle(new ContainerStopMonitoringEvent(containerId));\n     // Tell the logService too\n     eventHandler.handle(new LogHandlerContainerFinishedEvent(\n-      containerId, exitCode));\n+        containerId, containerTokenIdentifier.getContainerType(), exitCode));\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void sendFinishedEvents() {\n    // Inform the application\n    @SuppressWarnings(\"rawtypes\")\n    EventHandler eventHandler \u003d dispatcher.getEventHandler();\n\n    ContainerStatus containerStatus \u003d cloneAndGetContainerStatus();\n    eventHandler.handle(new ApplicationContainerFinishedEvent(containerStatus));\n\n    // Tell the scheduler the container is Done\n    eventHandler.handle(new ContainerSchedulerEvent(this,\n        ContainerSchedulerEventType.CONTAINER_COMPLETED));\n    // Remove the container from the resource-monitor\n    eventHandler.handle(new ContainerStopMonitoringEvent(containerId));\n    // Tell the logService too\n    eventHandler.handle(new LogHandlerContainerFinishedEvent(\n        containerId, containerTokenIdentifier.getContainerType(), exitCode));\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/container/ContainerImpl.java",
      "extendedDetails": {}
    },
    "3219b7b4ac7d12aee343f6ab2980b3357fc618b6": {
      "type": "Ybodychange",
      "commitMessage": "YARN-4597. Introduce ContainerScheduler and a SCHEDULED state to NodeManager container lifecycle. (asuresh)\n",
      "commitDate": "15/11/16 7:56 AM",
      "commitName": "3219b7b4ac7d12aee343f6ab2980b3357fc618b6",
      "commitAuthor": "Arun Suresh",
      "commitDateOld": "01/11/16 2:21 AM",
      "commitNameOld": "310aa4686eb697f0700a71d33106514c404dab1b",
      "commitAuthorOld": "Varun Saxena",
      "daysBetweenCommits": 14.27,
      "commitsBetweenForRepo": 134,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,14 +1,17 @@\n   private void sendFinishedEvents() {\n     // Inform the application\n     @SuppressWarnings(\"rawtypes\")\n     EventHandler eventHandler \u003d dispatcher.getEventHandler();\n \n     ContainerStatus containerStatus \u003d cloneAndGetContainerStatus();\n     eventHandler.handle(new ApplicationContainerFinishedEvent(containerStatus));\n \n+    // Tell the scheduler the container is Done\n+    eventHandler.handle(new ContainerSchedulerEvent(this,\n+        ContainerSchedulerEventType.CONTAINER_COMPLETED));\n     // Remove the container from the resource-monitor\n     eventHandler.handle(new ContainerStopMonitoringEvent(containerId));\n     // Tell the logService too\n     eventHandler.handle(new LogHandlerContainerFinishedEvent(\n       containerId, exitCode));\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void sendFinishedEvents() {\n    // Inform the application\n    @SuppressWarnings(\"rawtypes\")\n    EventHandler eventHandler \u003d dispatcher.getEventHandler();\n\n    ContainerStatus containerStatus \u003d cloneAndGetContainerStatus();\n    eventHandler.handle(new ApplicationContainerFinishedEvent(containerStatus));\n\n    // Tell the scheduler the container is Done\n    eventHandler.handle(new ContainerSchedulerEvent(this,\n        ContainerSchedulerEventType.CONTAINER_COMPLETED));\n    // Remove the container from the resource-monitor\n    eventHandler.handle(new ContainerStopMonitoringEvent(containerId));\n    // Tell the logService too\n    eventHandler.handle(new LogHandlerContainerFinishedEvent(\n      containerId, exitCode));\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/container/ContainerImpl.java",
      "extendedDetails": {}
    },
    "477a30f536277bf95d7181bf1b2fdda52d83bf51": {
      "type": "Ybodychange",
      "commitMessage": "YARN-3045. Implement NM writing container lifecycle events to Timeline Service v2. Contributed by Naganarasimha G R.\n",
      "commitDate": "10/07/16 8:45 AM",
      "commitName": "477a30f536277bf95d7181bf1b2fdda52d83bf51",
      "commitAuthor": "Junping Du",
      "commitDateOld": "14/06/16 3:06 PM",
      "commitNameOld": "c77a1095dc556e8bea87df6d8ddf36e898f27e86",
      "commitAuthorOld": "Wangda Tan",
      "daysBetweenCommits": 25.74,
      "commitsBetweenForRepo": 221,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,11 +1,14 @@\n   private void sendFinishedEvents() {\n     // Inform the application\n     @SuppressWarnings(\"rawtypes\")\n     EventHandler eventHandler \u003d dispatcher.getEventHandler();\n-    eventHandler.handle(new ApplicationContainerFinishedEvent(containerId));\n+\n+    ContainerStatus containerStatus \u003d cloneAndGetContainerStatus();\n+    eventHandler.handle(new ApplicationContainerFinishedEvent(containerStatus));\n+\n     // Remove the container from the resource-monitor\n     eventHandler.handle(new ContainerStopMonitoringEvent(containerId));\n     // Tell the logService too\n     eventHandler.handle(new LogHandlerContainerFinishedEvent(\n       containerId, exitCode));\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void sendFinishedEvents() {\n    // Inform the application\n    @SuppressWarnings(\"rawtypes\")\n    EventHandler eventHandler \u003d dispatcher.getEventHandler();\n\n    ContainerStatus containerStatus \u003d cloneAndGetContainerStatus();\n    eventHandler.handle(new ApplicationContainerFinishedEvent(containerStatus));\n\n    // Remove the container from the resource-monitor\n    eventHandler.handle(new ContainerStopMonitoringEvent(containerId));\n    // Tell the logService too\n    eventHandler.handle(new LogHandlerContainerFinishedEvent(\n      containerId, exitCode));\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/container/ContainerImpl.java",
      "extendedDetails": {}
    },
    "c2febdcbaa12078db42403fe8fd74180fb58a84b": {
      "type": "Yintroduced",
      "commitMessage": "YARN-1337. Recover containers upon nodemanager restart. (Contributed by Jason Lowe)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1617448 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "12/08/14 3:56 AM",
      "commitName": "c2febdcbaa12078db42403fe8fd74180fb58a84b",
      "commitAuthor": "Junping Du",
      "diff": "@@ -0,0 +1,11 @@\n+  private void sendFinishedEvents() {\n+    // Inform the application\n+    @SuppressWarnings(\"rawtypes\")\n+    EventHandler eventHandler \u003d dispatcher.getEventHandler();\n+    eventHandler.handle(new ApplicationContainerFinishedEvent(containerId));\n+    // Remove the container from the resource-monitor\n+    eventHandler.handle(new ContainerStopMonitoringEvent(containerId));\n+    // Tell the logService too\n+    eventHandler.handle(new LogHandlerContainerFinishedEvent(\n+      containerId, exitCode));\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private void sendFinishedEvents() {\n    // Inform the application\n    @SuppressWarnings(\"rawtypes\")\n    EventHandler eventHandler \u003d dispatcher.getEventHandler();\n    eventHandler.handle(new ApplicationContainerFinishedEvent(containerId));\n    // Remove the container from the resource-monitor\n    eventHandler.handle(new ContainerStopMonitoringEvent(containerId));\n    // Tell the logService too\n    eventHandler.handle(new LogHandlerContainerFinishedEvent(\n      containerId, exitCode));\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/container/ContainerImpl.java"
    }
  }
}