{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "ContainerManagerImpl.java",
  "functionName": "createLogHandler",
  "functionId": "createLogHandler___conf-Configuration__context-Context__deletionService-DeletionService",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/ContainerManagerImpl.java",
  "functionStartLine": 535,
  "functionEndLine": 546,
  "numCommitsSeen": 166,
  "timeTaken": 3377,
  "changeHistory": [
    "04f5ef18f7877ce30b12b1a3c1e851c420531b72",
    "e1fdf62123625e4ba399af02f8aad500637d29d1",
    "50fa9b89f42bd3fe6aad5086b0df14a00dadb24b",
    "ea17da82f7fc4b7fcc05bba82d141e27289fd7cb",
    "a75c4cf4e4400a2dcb3edc88df7f35a763f93c4e"
  ],
  "changeHistoryShort": {
    "04f5ef18f7877ce30b12b1a3c1e851c420531b72": "Ybodychange",
    "e1fdf62123625e4ba399af02f8aad500637d29d1": "Yfilerename",
    "50fa9b89f42bd3fe6aad5086b0df14a00dadb24b": "Ybodychange",
    "ea17da82f7fc4b7fcc05bba82d141e27289fd7cb": "Ybodychange",
    "a75c4cf4e4400a2dcb3edc88df7f35a763f93c4e": "Yintroduced"
  },
  "changeHistoryDetails": {
    "04f5ef18f7877ce30b12b1a3c1e851c420531b72": {
      "type": "Ybodychange",
      "commitMessage": "YARN-2079. Recover NonAggregatingLogHandler state upon nodemanager restart. (Contributed by Jason Lowe)\n",
      "commitDate": "12/02/15 11:46 AM",
      "commitName": "04f5ef18f7877ce30b12b1a3c1e851c420531b72",
      "commitAuthor": "Junping Du",
      "commitDateOld": "12/11/14 9:31 AM",
      "commitNameOld": "a04143039e7fe310d807f40584633096181cfada",
      "commitAuthorOld": "Karthik Kambatla",
      "daysBetweenCommits": 92.09,
      "commitsBetweenForRepo": 654,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,11 +1,12 @@\n   protected LogHandler createLogHandler(Configuration conf, Context context,\n       DeletionService deletionService) {\n     if (conf.getBoolean(YarnConfiguration.LOG_AGGREGATION_ENABLED,\n         YarnConfiguration.DEFAULT_LOG_AGGREGATION_ENABLED)) {\n       return new LogAggregationService(this.dispatcher, context,\n           deletionService, dirsHandler);\n     } else {\n       return new NonAggregatingLogHandler(this.dispatcher, deletionService,\n-                                          dirsHandler);\n+                                          dirsHandler,\n+                                          context.getNMStateStore());\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected LogHandler createLogHandler(Configuration conf, Context context,\n      DeletionService deletionService) {\n    if (conf.getBoolean(YarnConfiguration.LOG_AGGREGATION_ENABLED,\n        YarnConfiguration.DEFAULT_LOG_AGGREGATION_ENABLED)) {\n      return new LogAggregationService(this.dispatcher, context,\n          deletionService, dirsHandler);\n    } else {\n      return new NonAggregatingLogHandler(this.dispatcher, deletionService,\n                                          dirsHandler,\n                                          context.getNMStateStore());\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/ContainerManagerImpl.java",
      "extendedDetails": {}
    },
    "e1fdf62123625e4ba399af02f8aad500637d29d1": {
      "type": "Yfilerename",
      "commitMessage": "YARN-1. Promote YARN to be a sub-project of Apache Hadoop.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1370666 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "07/08/12 10:22 PM",
      "commitName": "e1fdf62123625e4ba399af02f8aad500637d29d1",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "07/08/12 7:53 PM",
      "commitNameOld": "34554d1e11ee1d5b564d7d9ed3e6d55931d72749",
      "commitAuthorOld": "Aaron Myers",
      "daysBetweenCommits": 0.1,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  protected LogHandler createLogHandler(Configuration conf, Context context,\n      DeletionService deletionService) {\n    if (conf.getBoolean(YarnConfiguration.LOG_AGGREGATION_ENABLED,\n        YarnConfiguration.DEFAULT_LOG_AGGREGATION_ENABLED)) {\n      return new LogAggregationService(this.dispatcher, context,\n          deletionService, dirsHandler);\n    } else {\n      return new NonAggregatingLogHandler(this.dispatcher, deletionService,\n                                          dirsHandler);\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/ContainerManagerImpl.java",
      "extendedDetails": {
        "oldPath": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/ContainerManagerImpl.java",
        "newPath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/ContainerManagerImpl.java"
      }
    },
    "50fa9b89f42bd3fe6aad5086b0df14a00dadb24b": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-3398. Fixed log aggregation to work correctly in secure mode. Contributed by Siddharth Seth.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1214429 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "14/12/11 11:55 AM",
      "commitName": "50fa9b89f42bd3fe6aad5086b0df14a00dadb24b",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "29/11/11 3:17 PM",
      "commitNameOld": "ea17da82f7fc4b7fcc05bba82d141e27289fd7cb",
      "commitAuthorOld": "Mahadev Konar",
      "daysBetweenCommits": 14.86,
      "commitsBetweenForRepo": 108,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,11 +1,11 @@\n   protected LogHandler createLogHandler(Configuration conf, Context context,\n       DeletionService deletionService) {\n-    if (conf.getBoolean(YarnConfiguration.NM_LOG_AGGREGATION_ENABLED,\n-        YarnConfiguration.DEFAULT_NM_LOG_AGGREGATION_ENABLED)) {\n+    if (conf.getBoolean(YarnConfiguration.LOG_AGGREGATION_ENABLED,\n+        YarnConfiguration.DEFAULT_LOG_AGGREGATION_ENABLED)) {\n       return new LogAggregationService(this.dispatcher, context,\n           deletionService, dirsHandler);\n     } else {\n       return new NonAggregatingLogHandler(this.dispatcher, deletionService,\n                                           dirsHandler);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected LogHandler createLogHandler(Configuration conf, Context context,\n      DeletionService deletionService) {\n    if (conf.getBoolean(YarnConfiguration.LOG_AGGREGATION_ENABLED,\n        YarnConfiguration.DEFAULT_LOG_AGGREGATION_ENABLED)) {\n      return new LogAggregationService(this.dispatcher, context,\n          deletionService, dirsHandler);\n    } else {\n      return new NonAggregatingLogHandler(this.dispatcher, deletionService,\n                                          dirsHandler);\n    }\n  }",
      "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/ContainerManagerImpl.java",
      "extendedDetails": {}
    },
    "ea17da82f7fc4b7fcc05bba82d141e27289fd7cb": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-3121. NodeManager should handle disk-failures (Ravi Gummadi via mahadev)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1208131 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "29/11/11 3:17 PM",
      "commitName": "ea17da82f7fc4b7fcc05bba82d141e27289fd7cb",
      "commitAuthor": "Mahadev Konar",
      "commitDateOld": "31/10/11 2:55 AM",
      "commitNameOld": "a75c4cf4e4400a2dcb3edc88df7f35a763f93c4e",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 29.56,
      "commitsBetweenForRepo": 161,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,10 +1,11 @@\n   protected LogHandler createLogHandler(Configuration conf, Context context,\n       DeletionService deletionService) {\n     if (conf.getBoolean(YarnConfiguration.NM_LOG_AGGREGATION_ENABLED,\n         YarnConfiguration.DEFAULT_NM_LOG_AGGREGATION_ENABLED)) {\n       return new LogAggregationService(this.dispatcher, context,\n-          deletionService);\n+          deletionService, dirsHandler);\n     } else {\n-      return new NonAggregatingLogHandler(this.dispatcher, deletionService);\n+      return new NonAggregatingLogHandler(this.dispatcher, deletionService,\n+                                          dirsHandler);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected LogHandler createLogHandler(Configuration conf, Context context,\n      DeletionService deletionService) {\n    if (conf.getBoolean(YarnConfiguration.NM_LOG_AGGREGATION_ENABLED,\n        YarnConfiguration.DEFAULT_NM_LOG_AGGREGATION_ENABLED)) {\n      return new LogAggregationService(this.dispatcher, context,\n          deletionService, dirsHandler);\n    } else {\n      return new NonAggregatingLogHandler(this.dispatcher, deletionService,\n                                          dirsHandler);\n    }\n  }",
      "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/ContainerManagerImpl.java",
      "extendedDetails": {}
    },
    "a75c4cf4e4400a2dcb3edc88df7f35a763f93c4e": {
      "type": "Yintroduced",
      "commitMessage": "MAPREDUCE-2696. Fixed NodeManager to cleanup logs in a thread when logs\u0027 aggregation is not enabled. Contributed by Siddharth Seth.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1195383 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "31/10/11 2:55 AM",
      "commitName": "a75c4cf4e4400a2dcb3edc88df7f35a763f93c4e",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "diff": "@@ -0,0 +1,10 @@\n+  protected LogHandler createLogHandler(Configuration conf, Context context,\n+      DeletionService deletionService) {\n+    if (conf.getBoolean(YarnConfiguration.NM_LOG_AGGREGATION_ENABLED,\n+        YarnConfiguration.DEFAULT_NM_LOG_AGGREGATION_ENABLED)) {\n+      return new LogAggregationService(this.dispatcher, context,\n+          deletionService);\n+    } else {\n+      return new NonAggregatingLogHandler(this.dispatcher, deletionService);\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  protected LogHandler createLogHandler(Configuration conf, Context context,\n      DeletionService deletionService) {\n    if (conf.getBoolean(YarnConfiguration.NM_LOG_AGGREGATION_ENABLED,\n        YarnConfiguration.DEFAULT_NM_LOG_AGGREGATION_ENABLED)) {\n      return new LogAggregationService(this.dispatcher, context,\n          deletionService);\n    } else {\n      return new NonAggregatingLogHandler(this.dispatcher, deletionService);\n    }\n  }",
      "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/ContainerManagerImpl.java"
    }
  }
}