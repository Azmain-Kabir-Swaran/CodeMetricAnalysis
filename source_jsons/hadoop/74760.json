{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "ZKDelegationTokenSecretManager.java",
  "functionName": "syncLocalCacheWithZk",
  "functionId": "syncLocalCacheWithZk___ident-TokenIdent",
  "sourceFilePath": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/delegation/ZKDelegationTokenSecretManager.java",
  "functionStartLine": 681,
  "functionEndLine": 693,
  "numCommitsSeen": 16,
  "timeTaken": 847,
  "changeHistory": [
    "ba75bc759334c8987e5f7dd4b21d025f0cccbde7"
  ],
  "changeHistoryShort": {
    "ba75bc759334c8987e5f7dd4b21d025f0cccbde7": "Yintroduced"
  },
  "changeHistoryDetails": {
    "ba75bc759334c8987e5f7dd4b21d025f0cccbde7": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-14044. Synchronization issue in delegation token cancel functionality. Contributed by Hrishikesh Gadre.\n",
      "commitDate": "03/02/17 5:13 PM",
      "commitName": "ba75bc759334c8987e5f7dd4b21d025f0cccbde7",
      "commitAuthor": "Xiao Chen",
      "diff": "@@ -0,0 +1,13 @@\n+  private synchronized void syncLocalCacheWithZk(TokenIdent ident) {\n+    try {\n+      DelegationTokenInformation tokenInfo \u003d getTokenInfoFromZK(ident);\n+      if (tokenInfo !\u003d null \u0026\u0026 !currentTokens.containsKey(ident)) {\n+        currentTokens.put(ident, tokenInfo);\n+      } else if (tokenInfo \u003d\u003d null \u0026\u0026 currentTokens.containsKey(ident)) {\n+        currentTokens.remove(ident);\n+      }\n+    } catch (IOException e) {\n+      LOG.error(\"Error retrieving tokenInfo [\" + ident.getSequenceNumber()\n+          + \"] from ZK\", e);\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private synchronized void syncLocalCacheWithZk(TokenIdent ident) {\n    try {\n      DelegationTokenInformation tokenInfo \u003d getTokenInfoFromZK(ident);\n      if (tokenInfo !\u003d null \u0026\u0026 !currentTokens.containsKey(ident)) {\n        currentTokens.put(ident, tokenInfo);\n      } else if (tokenInfo \u003d\u003d null \u0026\u0026 currentTokens.containsKey(ident)) {\n        currentTokens.remove(ident);\n      }\n    } catch (IOException e) {\n      LOG.error(\"Error retrieving tokenInfo [\" + ident.getSequenceNumber()\n          + \"] from ZK\", e);\n    }\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/delegation/ZKDelegationTokenSecretManager.java"
    }
  }
}