{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "DirListingMetadata.java",
  "functionName": "markDeleted",
  "functionId": "markDeleted___childPath-Path__lastUpdated-long",
  "sourceFilePath": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/s3guard/DirListingMetadata.java",
  "functionStartLine": 207,
  "functionEndLine": 210,
  "numCommitsSeen": 15,
  "timeTaken": 2624,
  "changeHistory": [
    "7b219778e05a50e33cca75d727e62783322b7f80",
    "621b43e254afaff708cd6fc4698b29628f6abc33"
  ],
  "changeHistoryShort": {
    "7b219778e05a50e33cca75d727e62783322b7f80": "Ymultichange(Yparameterchange,Ybodychange)",
    "621b43e254afaff708cd6fc4698b29628f6abc33": "Yintroduced"
  },
  "changeHistoryDetails": {
    "7b219778e05a50e33cca75d727e62783322b7f80": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "HADOOP-16433. S3Guard: Filter expired entries and tombstones when listing with MetadataStore.listChildren().\n\nContributed by Gabor Bota.\n\nThis pulls the tracking of the lastUpdated timestamp of metadata entries up from the DDB metastore into all s3guard stores, and then uses this to filter out expired tombstones from listings.\n\nChange-Id: I80f121236b49c75a024116f65a3ef29d3580b462\n",
      "commitDate": "24/07/19 10:11 AM",
      "commitName": "7b219778e05a50e33cca75d727e62783322b7f80",
      "commitAuthor": "Gabor Bota",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HADOOP-16433. S3Guard: Filter expired entries and tombstones when listing with MetadataStore.listChildren().\n\nContributed by Gabor Bota.\n\nThis pulls the tracking of the lastUpdated timestamp of metadata entries up from the DDB metastore into all s3guard stores, and then uses this to filter out expired tombstones from listings.\n\nChange-Id: I80f121236b49c75a024116f65a3ef29d3580b462\n",
          "commitDate": "24/07/19 10:11 AM",
          "commitName": "7b219778e05a50e33cca75d727e62783322b7f80",
          "commitAuthor": "Gabor Bota",
          "commitDateOld": "19/05/19 2:29 PM",
          "commitNameOld": "a36274d69947648dbe82721220cc5240ec5d396d",
          "commitAuthorOld": "Ben Roling",
          "daysBetweenCommits": 65.82,
          "commitsBetweenForRepo": 524,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,4 +1,4 @@\n-  public void markDeleted(Path childPath) {\n+  public void markDeleted(Path childPath, long lastUpdated) {\n     checkChildPath(childPath);\n-    listMap.put(childPath, PathMetadata.tombstone(childPath));\n+    listMap.put(childPath, PathMetadata.tombstone(childPath, lastUpdated));\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public void markDeleted(Path childPath, long lastUpdated) {\n    checkChildPath(childPath);\n    listMap.put(childPath, PathMetadata.tombstone(childPath, lastUpdated));\n  }",
          "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/s3guard/DirListingMetadata.java",
          "extendedDetails": {
            "oldValue": "[childPath-Path]",
            "newValue": "[childPath-Path, lastUpdated-long]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HADOOP-16433. S3Guard: Filter expired entries and tombstones when listing with MetadataStore.listChildren().\n\nContributed by Gabor Bota.\n\nThis pulls the tracking of the lastUpdated timestamp of metadata entries up from the DDB metastore into all s3guard stores, and then uses this to filter out expired tombstones from listings.\n\nChange-Id: I80f121236b49c75a024116f65a3ef29d3580b462\n",
          "commitDate": "24/07/19 10:11 AM",
          "commitName": "7b219778e05a50e33cca75d727e62783322b7f80",
          "commitAuthor": "Gabor Bota",
          "commitDateOld": "19/05/19 2:29 PM",
          "commitNameOld": "a36274d69947648dbe82721220cc5240ec5d396d",
          "commitAuthorOld": "Ben Roling",
          "daysBetweenCommits": 65.82,
          "commitsBetweenForRepo": 524,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,4 +1,4 @@\n-  public void markDeleted(Path childPath) {\n+  public void markDeleted(Path childPath, long lastUpdated) {\n     checkChildPath(childPath);\n-    listMap.put(childPath, PathMetadata.tombstone(childPath));\n+    listMap.put(childPath, PathMetadata.tombstone(childPath, lastUpdated));\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public void markDeleted(Path childPath, long lastUpdated) {\n    checkChildPath(childPath);\n    listMap.put(childPath, PathMetadata.tombstone(childPath, lastUpdated));\n  }",
          "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/s3guard/DirListingMetadata.java",
          "extendedDetails": {}
        }
      ]
    },
    "621b43e254afaff708cd6fc4698b29628f6abc33": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-13345 HS3Guard: Improved Consistency for S3A.\nContributed by: Chris Nauroth, Aaron Fabbri, Mingliang Liu, Lei (Eddy) Xu,\nSean Mackrory, Steve Loughran and others.\n",
      "commitDate": "01/09/17 6:13 AM",
      "commitName": "621b43e254afaff708cd6fc4698b29628f6abc33",
      "commitAuthor": "Steve Loughran",
      "diff": "@@ -0,0 +1,4 @@\n+  public void markDeleted(Path childPath) {\n+    checkChildPath(childPath);\n+    listMap.put(childPath, PathMetadata.tombstone(childPath));\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public void markDeleted(Path childPath) {\n    checkChildPath(childPath);\n    listMap.put(childPath, PathMetadata.tombstone(childPath));\n  }",
      "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/s3guard/DirListingMetadata.java"
    }
  }
}