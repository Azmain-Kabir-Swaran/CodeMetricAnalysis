{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "AppsBlock.java",
  "functionName": "render",
  "functionId": "render___html-Block",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-router/src/main/java/org/apache/hadoop/yarn/server/router/webapp/AppsBlock.java",
  "functionStartLine": 53,
  "functionEndLine": 125,
  "numCommitsSeen": 4,
  "timeTaken": 1043,
  "changeHistory": [
    "25361b077bd34606259dac5a00c41faddd2dfc7d",
    "ceca9694f9a0c78d07cab2c382036f175183e67b"
  ],
  "changeHistoryShort": {
    "25361b077bd34606259dac5a00c41faddd2dfc7d": "Ybodychange",
    "ceca9694f9a0c78d07cab2c382036f175183e67b": "Yintroduced"
  },
  "changeHistoryDetails": {
    "25361b077bd34606259dac5a00c41faddd2dfc7d": {
      "type": "Ybodychange",
      "commitMessage": "YARN-10120. Https Support in Router WebServiceClient.\n\nContributed by Bilwa S T.\n",
      "commitDate": "02/04/20 5:41 AM",
      "commitName": "25361b077bd34606259dac5a00c41faddd2dfc7d",
      "commitAuthor": "Prabhu Joseph",
      "commitDateOld": "13/07/18 8:42 AM",
      "commitNameOld": "88625f5cd90766136a9ebd76a8d84b45a37e6c99",
      "commitAuthorOld": "Akira Ajisaka",
      "daysBetweenCommits": 628.87,
      "commitsBetweenForRepo": 4182,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,73 +1,73 @@\n   protected void render(Block html) {\n     // Get the applications from the Resource Managers\n     Configuration conf \u003d this.router.getConfig();\n     String webAppAddress \u003d WebAppUtils.getRouterWebAppURLWithScheme(conf);\n     AppsInfo apps \u003d RouterWebServiceUtil.genericForward(webAppAddress, null,\n         AppsInfo.class, HTTPMethods.GET,\n-        RMWSConsts.RM_WEB_SERVICE_PATH + RMWSConsts.APPS, null, null);\n+        RMWSConsts.RM_WEB_SERVICE_PATH + RMWSConsts.APPS, null, null, conf);\n \n     setTitle(\"Applications\");\n \n     TBODY\u003cTABLE\u003cHamlet\u003e\u003e tbody \u003d html.table(\"#apps\").thead()\n         .tr()\n         .th(\".id\", \"ID\")\n         .th(\".user\", \"User\")\n         .th(\".name\", \"Name\")\n         .th(\".type\", \"Application Type\")\n         .th(\".queue\", \"Queue\")\n         .th(\".priority\", \"Application Priority\")\n         .th(\".starttime\", \"StartTime\")\n         .th(\".finishtime\", \"FinishTime\")\n         .th(\".state\", \"State\")\n         .th(\".finalstatus\", \"FinalStatus\")\n         .th(\".progress\", \"Progress\")\n         .th(\".ui\", \"Tracking UI\")\n         .__().__().tbody();\n \n     // Render the applications\n     StringBuilder appsTableData \u003d new StringBuilder(\"[\\n\");\n     for (AppInfo app : apps.getApps()) {\n       try {\n \n         String percent \u003d String.format(\"%.1f\", app.getProgress() * 100.0F);\n         String trackingURL \u003d\n             app.getTrackingUrl() \u003d\u003d null ? \"#\" : app.getTrackingUrl();\n         // AppID numerical value parsed by parseHadoopID in yarn.dt.plugins.js\n         appsTableData.append(\"[\\\"\")\n             .append(\"\u003ca href\u003d\u0027\").append(trackingURL).append(\"\u0027\u003e\")\n             .append(app.getAppId()).append(\"\u003c/a\u003e\\\",\\\"\")\n             .append(escape(app.getUser())).append(\"\\\",\\\"\")\n             .append(escape(app.getName())).append(\"\\\",\\\"\")\n             .append(escape(app.getApplicationType())).append(\"\\\",\\\"\")\n             .append(escape(app.getQueue())).append(\"\\\",\\\"\")\n             .append(String.valueOf(app.getPriority())).append(\"\\\",\\\"\")\n             .append(app.getStartTime()).append(\"\\\",\\\"\")\n             .append(app.getFinishTime()).append(\"\\\",\\\"\")\n             .append(app.getState()).append(\"\\\",\\\"\")\n             .append(app.getFinalStatus()).append(\"\\\",\\\"\")\n             // Progress bar\n             .append(\"\u003cbr title\u003d\u0027\").append(percent).append(\"\u0027\u003e \u003cdiv class\u003d\u0027\")\n             .append(C_PROGRESSBAR).append(\"\u0027 title\u003d\u0027\")\n             .append(join(percent, \u0027%\u0027)).append(\"\u0027\u003e \").append(\"\u003cdiv class\u003d\u0027\")\n             .append(C_PROGRESSBAR_VALUE).append(\"\u0027 style\u003d\u0027\")\n             .append(join(\"width:\", percent, \u0027%\u0027)).append(\"\u0027\u003e \u003c/div\u003e \u003c/div\u003e\")\n             // History link\n             .append(\"\\\",\\\"\u003ca href\u003d\u0027\").append(trackingURL).append(\"\u0027\u003e\")\n             .append(\"History\").append(\"\u003c/a\u003e\");\n         appsTableData.append(\"\\\"],\\n\");\n \n       } catch (Exception e) {\n         LOG.info(\n             \"Cannot add application {}: {}\", app.getAppId(), e.getMessage());\n       }\n     }\n     if (appsTableData.charAt(appsTableData.length() - 2) \u003d\u003d \u0027,\u0027) {\n       appsTableData.delete(appsTableData.length() - 2,\n           appsTableData.length() - 1);\n     }\n     appsTableData.append(\"]\");\n     html.script().$type(\"text/javascript\")\n         .__(\"var appsTableData\u003d\" + appsTableData).__();\n \n     tbody.__().__();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected void render(Block html) {\n    // Get the applications from the Resource Managers\n    Configuration conf \u003d this.router.getConfig();\n    String webAppAddress \u003d WebAppUtils.getRouterWebAppURLWithScheme(conf);\n    AppsInfo apps \u003d RouterWebServiceUtil.genericForward(webAppAddress, null,\n        AppsInfo.class, HTTPMethods.GET,\n        RMWSConsts.RM_WEB_SERVICE_PATH + RMWSConsts.APPS, null, null, conf);\n\n    setTitle(\"Applications\");\n\n    TBODY\u003cTABLE\u003cHamlet\u003e\u003e tbody \u003d html.table(\"#apps\").thead()\n        .tr()\n        .th(\".id\", \"ID\")\n        .th(\".user\", \"User\")\n        .th(\".name\", \"Name\")\n        .th(\".type\", \"Application Type\")\n        .th(\".queue\", \"Queue\")\n        .th(\".priority\", \"Application Priority\")\n        .th(\".starttime\", \"StartTime\")\n        .th(\".finishtime\", \"FinishTime\")\n        .th(\".state\", \"State\")\n        .th(\".finalstatus\", \"FinalStatus\")\n        .th(\".progress\", \"Progress\")\n        .th(\".ui\", \"Tracking UI\")\n        .__().__().tbody();\n\n    // Render the applications\n    StringBuilder appsTableData \u003d new StringBuilder(\"[\\n\");\n    for (AppInfo app : apps.getApps()) {\n      try {\n\n        String percent \u003d String.format(\"%.1f\", app.getProgress() * 100.0F);\n        String trackingURL \u003d\n            app.getTrackingUrl() \u003d\u003d null ? \"#\" : app.getTrackingUrl();\n        // AppID numerical value parsed by parseHadoopID in yarn.dt.plugins.js\n        appsTableData.append(\"[\\\"\")\n            .append(\"\u003ca href\u003d\u0027\").append(trackingURL).append(\"\u0027\u003e\")\n            .append(app.getAppId()).append(\"\u003c/a\u003e\\\",\\\"\")\n            .append(escape(app.getUser())).append(\"\\\",\\\"\")\n            .append(escape(app.getName())).append(\"\\\",\\\"\")\n            .append(escape(app.getApplicationType())).append(\"\\\",\\\"\")\n            .append(escape(app.getQueue())).append(\"\\\",\\\"\")\n            .append(String.valueOf(app.getPriority())).append(\"\\\",\\\"\")\n            .append(app.getStartTime()).append(\"\\\",\\\"\")\n            .append(app.getFinishTime()).append(\"\\\",\\\"\")\n            .append(app.getState()).append(\"\\\",\\\"\")\n            .append(app.getFinalStatus()).append(\"\\\",\\\"\")\n            // Progress bar\n            .append(\"\u003cbr title\u003d\u0027\").append(percent).append(\"\u0027\u003e \u003cdiv class\u003d\u0027\")\n            .append(C_PROGRESSBAR).append(\"\u0027 title\u003d\u0027\")\n            .append(join(percent, \u0027%\u0027)).append(\"\u0027\u003e \").append(\"\u003cdiv class\u003d\u0027\")\n            .append(C_PROGRESSBAR_VALUE).append(\"\u0027 style\u003d\u0027\")\n            .append(join(\"width:\", percent, \u0027%\u0027)).append(\"\u0027\u003e \u003c/div\u003e \u003c/div\u003e\")\n            // History link\n            .append(\"\\\",\\\"\u003ca href\u003d\u0027\").append(trackingURL).append(\"\u0027\u003e\")\n            .append(\"History\").append(\"\u003c/a\u003e\");\n        appsTableData.append(\"\\\"],\\n\");\n\n      } catch (Exception e) {\n        LOG.info(\n            \"Cannot add application {}: {}\", app.getAppId(), e.getMessage());\n      }\n    }\n    if (appsTableData.charAt(appsTableData.length() - 2) \u003d\u003d \u0027,\u0027) {\n      appsTableData.delete(appsTableData.length() - 2,\n          appsTableData.length() - 1);\n    }\n    appsTableData.append(\"]\");\n    html.script().$type(\"text/javascript\")\n        .__(\"var appsTableData\u003d\" + appsTableData).__();\n\n    tbody.__().__();\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-router/src/main/java/org/apache/hadoop/yarn/server/router/webapp/AppsBlock.java",
      "extendedDetails": {}
    },
    "ceca9694f9a0c78d07cab2c382036f175183e67b": {
      "type": "Yintroduced",
      "commitMessage": "YARN-3661. Basic Federation UI. (Contributed by Inigo Goiri via curino)\n",
      "commitDate": "02/10/17 1:03 PM",
      "commitName": "ceca9694f9a0c78d07cab2c382036f175183e67b",
      "commitAuthor": "Carlo Curino",
      "diff": "@@ -0,0 +1,73 @@\n+  protected void render(Block html) {\n+    // Get the applications from the Resource Managers\n+    Configuration conf \u003d this.router.getConfig();\n+    String webAppAddress \u003d WebAppUtils.getRouterWebAppURLWithScheme(conf);\n+    AppsInfo apps \u003d RouterWebServiceUtil.genericForward(webAppAddress, null,\n+        AppsInfo.class, HTTPMethods.GET,\n+        RMWSConsts.RM_WEB_SERVICE_PATH + RMWSConsts.APPS, null, null);\n+\n+    setTitle(\"Applications\");\n+\n+    TBODY\u003cTABLE\u003cHamlet\u003e\u003e tbody \u003d html.table(\"#apps\").thead()\n+        .tr()\n+        .th(\".id\", \"ID\")\n+        .th(\".user\", \"User\")\n+        .th(\".name\", \"Name\")\n+        .th(\".type\", \"Application Type\")\n+        .th(\".queue\", \"Queue\")\n+        .th(\".priority\", \"Application Priority\")\n+        .th(\".starttime\", \"StartTime\")\n+        .th(\".finishtime\", \"FinishTime\")\n+        .th(\".state\", \"State\")\n+        .th(\".finalstatus\", \"FinalStatus\")\n+        .th(\".progress\", \"Progress\")\n+        .th(\".ui\", \"Tracking UI\")\n+        .__().__().tbody();\n+\n+    // Render the applications\n+    StringBuilder appsTableData \u003d new StringBuilder(\"[\\n\");\n+    for (AppInfo app : apps.getApps()) {\n+      try {\n+\n+        String percent \u003d String.format(\"%.1f\", app.getProgress() * 100.0F);\n+        String trackingURL \u003d\n+            app.getTrackingUrl() \u003d\u003d null ? \"#\" : app.getTrackingUrl();\n+        // AppID numerical value parsed by parseHadoopID in yarn.dt.plugins.js\n+        appsTableData.append(\"[\\\"\")\n+            .append(\"\u003ca href\u003d\u0027\").append(trackingURL).append(\"\u0027\u003e\")\n+            .append(app.getAppId()).append(\"\u003c/a\u003e\\\",\\\"\")\n+            .append(escape(app.getUser())).append(\"\\\",\\\"\")\n+            .append(escape(app.getName())).append(\"\\\",\\\"\")\n+            .append(escape(app.getApplicationType())).append(\"\\\",\\\"\")\n+            .append(escape(app.getQueue())).append(\"\\\",\\\"\")\n+            .append(String.valueOf(app.getPriority())).append(\"\\\",\\\"\")\n+            .append(app.getStartTime()).append(\"\\\",\\\"\")\n+            .append(app.getFinishTime()).append(\"\\\",\\\"\")\n+            .append(app.getState()).append(\"\\\",\\\"\")\n+            .append(app.getFinalStatus()).append(\"\\\",\\\"\")\n+            // Progress bar\n+            .append(\"\u003cbr title\u003d\u0027\").append(percent).append(\"\u0027\u003e \u003cdiv class\u003d\u0027\")\n+            .append(C_PROGRESSBAR).append(\"\u0027 title\u003d\u0027\")\n+            .append(join(percent, \u0027%\u0027)).append(\"\u0027\u003e \").append(\"\u003cdiv class\u003d\u0027\")\n+            .append(C_PROGRESSBAR_VALUE).append(\"\u0027 style\u003d\u0027\")\n+            .append(join(\"width:\", percent, \u0027%\u0027)).append(\"\u0027\u003e \u003c/div\u003e \u003c/div\u003e\")\n+            // History link\n+            .append(\"\\\",\\\"\u003ca href\u003d\u0027\").append(trackingURL).append(\"\u0027\u003e\")\n+            .append(\"History\").append(\"\u003c/a\u003e\");\n+        appsTableData.append(\"\\\"],\\n\");\n+\n+      } catch (Exception e) {\n+        LOG.info(\n+            \"Cannot add application {}: {}\", app.getAppId(), e.getMessage());\n+      }\n+    }\n+    if (appsTableData.charAt(appsTableData.length() - 2) \u003d\u003d \u0027,\u0027) {\n+      appsTableData.delete(appsTableData.length() - 2,\n+          appsTableData.length() - 1);\n+    }\n+    appsTableData.append(\"]\");\n+    html.script().$type(\"text/javascript\")\n+        .__(\"var appsTableData\u003d\" + appsTableData).__();\n+\n+    tbody.__().__();\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  protected void render(Block html) {\n    // Get the applications from the Resource Managers\n    Configuration conf \u003d this.router.getConfig();\n    String webAppAddress \u003d WebAppUtils.getRouterWebAppURLWithScheme(conf);\n    AppsInfo apps \u003d RouterWebServiceUtil.genericForward(webAppAddress, null,\n        AppsInfo.class, HTTPMethods.GET,\n        RMWSConsts.RM_WEB_SERVICE_PATH + RMWSConsts.APPS, null, null);\n\n    setTitle(\"Applications\");\n\n    TBODY\u003cTABLE\u003cHamlet\u003e\u003e tbody \u003d html.table(\"#apps\").thead()\n        .tr()\n        .th(\".id\", \"ID\")\n        .th(\".user\", \"User\")\n        .th(\".name\", \"Name\")\n        .th(\".type\", \"Application Type\")\n        .th(\".queue\", \"Queue\")\n        .th(\".priority\", \"Application Priority\")\n        .th(\".starttime\", \"StartTime\")\n        .th(\".finishtime\", \"FinishTime\")\n        .th(\".state\", \"State\")\n        .th(\".finalstatus\", \"FinalStatus\")\n        .th(\".progress\", \"Progress\")\n        .th(\".ui\", \"Tracking UI\")\n        .__().__().tbody();\n\n    // Render the applications\n    StringBuilder appsTableData \u003d new StringBuilder(\"[\\n\");\n    for (AppInfo app : apps.getApps()) {\n      try {\n\n        String percent \u003d String.format(\"%.1f\", app.getProgress() * 100.0F);\n        String trackingURL \u003d\n            app.getTrackingUrl() \u003d\u003d null ? \"#\" : app.getTrackingUrl();\n        // AppID numerical value parsed by parseHadoopID in yarn.dt.plugins.js\n        appsTableData.append(\"[\\\"\")\n            .append(\"\u003ca href\u003d\u0027\").append(trackingURL).append(\"\u0027\u003e\")\n            .append(app.getAppId()).append(\"\u003c/a\u003e\\\",\\\"\")\n            .append(escape(app.getUser())).append(\"\\\",\\\"\")\n            .append(escape(app.getName())).append(\"\\\",\\\"\")\n            .append(escape(app.getApplicationType())).append(\"\\\",\\\"\")\n            .append(escape(app.getQueue())).append(\"\\\",\\\"\")\n            .append(String.valueOf(app.getPriority())).append(\"\\\",\\\"\")\n            .append(app.getStartTime()).append(\"\\\",\\\"\")\n            .append(app.getFinishTime()).append(\"\\\",\\\"\")\n            .append(app.getState()).append(\"\\\",\\\"\")\n            .append(app.getFinalStatus()).append(\"\\\",\\\"\")\n            // Progress bar\n            .append(\"\u003cbr title\u003d\u0027\").append(percent).append(\"\u0027\u003e \u003cdiv class\u003d\u0027\")\n            .append(C_PROGRESSBAR).append(\"\u0027 title\u003d\u0027\")\n            .append(join(percent, \u0027%\u0027)).append(\"\u0027\u003e \").append(\"\u003cdiv class\u003d\u0027\")\n            .append(C_PROGRESSBAR_VALUE).append(\"\u0027 style\u003d\u0027\")\n            .append(join(\"width:\", percent, \u0027%\u0027)).append(\"\u0027\u003e \u003c/div\u003e \u003c/div\u003e\")\n            // History link\n            .append(\"\\\",\\\"\u003ca href\u003d\u0027\").append(trackingURL).append(\"\u0027\u003e\")\n            .append(\"History\").append(\"\u003c/a\u003e\");\n        appsTableData.append(\"\\\"],\\n\");\n\n      } catch (Exception e) {\n        LOG.info(\n            \"Cannot add application {}: {}\", app.getAppId(), e.getMessage());\n      }\n    }\n    if (appsTableData.charAt(appsTableData.length() - 2) \u003d\u003d \u0027,\u0027) {\n      appsTableData.delete(appsTableData.length() - 2,\n          appsTableData.length() - 1);\n    }\n    appsTableData.append(\"]\");\n    html.script().$type(\"text/javascript\")\n        .__(\"var appsTableData\u003d\" + appsTableData).__();\n\n    tbody.__().__();\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-router/src/main/java/org/apache/hadoop/yarn/server/router/webapp/AppsBlock.java"
    }
  }
}