{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "ShuffleHandler.java",
  "functionName": "checkVersion",
  "functionId": "checkVersion",
  "sourceFilePath": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-shuffle/src/main/java/org/apache/hadoop/mapred/ShuffleHandler.java",
  "functionStartLine": 712,
  "functionEndLine": 726,
  "numCommitsSeen": 59,
  "timeTaken": 1917,
  "changeHistory": [
    "7d21c280a82b2f02675bf0048f0e965d99a05ae7",
    "1d6e178144e9e3915ceea92d8c5de8b14cd02714",
    "60b1e835e0fc5c4c90eaf588c6722f69061f7f36"
  ],
  "changeHistoryShort": {
    "7d21c280a82b2f02675bf0048f0e965d99a05ae7": "Ybodychange",
    "1d6e178144e9e3915ceea92d8c5de8b14cd02714": "Ybodychange",
    "60b1e835e0fc5c4c90eaf588c6722f69061f7f36": "Yintroduced"
  },
  "changeHistoryDetails": {
    "7d21c280a82b2f02675bf0048f0e965d99a05ae7": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-6777. Typos in 4 log messages. Contributed by Mehran Hassani\n",
      "commitDate": "16/09/16 9:49 PM",
      "commitName": "7d21c280a82b2f02675bf0048f0e965d99a05ae7",
      "commitAuthor": "Naganarasimha",
      "commitDateOld": "19/08/16 3:28 PM",
      "commitNameOld": "723facfa408f469891e67084bdafa18841a0cf64",
      "commitAuthorOld": "Varun Saxena",
      "daysBetweenCommits": 28.27,
      "commitsBetweenForRepo": 155,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,15 @@\n   private void checkVersion() throws IOException {\n     Version loadedVersion \u003d loadVersion();\n     LOG.info(\"Loaded state DB schema version info \" + loadedVersion);\n     if (loadedVersion.equals(getCurrentVersion())) {\n       return;\n     }\n     if (loadedVersion.isCompatibleTo(getCurrentVersion())) {\n-      LOG.info(\"Storing state DB schedma version info \" + getCurrentVersion());\n+      LOG.info(\"Storing state DB schema version info \" + getCurrentVersion());\n       storeVersion();\n     } else {\n       throw new IOException(\n         \"Incompatible version for state DB schema: expecting DB schema version \" \n             + getCurrentVersion() + \", but loading version \" + loadedVersion);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void checkVersion() throws IOException {\n    Version loadedVersion \u003d loadVersion();\n    LOG.info(\"Loaded state DB schema version info \" + loadedVersion);\n    if (loadedVersion.equals(getCurrentVersion())) {\n      return;\n    }\n    if (loadedVersion.isCompatibleTo(getCurrentVersion())) {\n      LOG.info(\"Storing state DB schema version info \" + getCurrentVersion());\n      storeVersion();\n    } else {\n      throw new IOException(\n        \"Incompatible version for state DB schema: expecting DB schema version \" \n            + getCurrentVersion() + \", but loading version \" + loadedVersion);\n    }\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-shuffle/src/main/java/org/apache/hadoop/mapred/ShuffleHandler.java",
      "extendedDetails": {}
    },
    "1d6e178144e9e3915ceea92d8c5de8b14cd02714": {
      "type": "Ybodychange",
      "commitMessage": "YARN-2347. Consolidated RMStateVersion and NMDBSchemaVersion into Version in yarn-server-common. Contributed by Junping Du.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1614838 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "31/07/14 2:27 AM",
      "commitName": "1d6e178144e9e3915ceea92d8c5de8b14cd02714",
      "commitAuthor": "Zhijie Shen",
      "commitDateOld": "22/07/14 12:22 PM",
      "commitNameOld": "60b1e835e0fc5c4c90eaf588c6722f69061f7f36",
      "commitAuthorOld": "Jason Darrell Lowe",
      "daysBetweenCommits": 8.59,
      "commitsBetweenForRepo": 57,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,15 @@\n   private void checkVersion() throws IOException {\n-    NMDBSchemaVersion loadedVersion \u003d loadVersion();\n+    Version loadedVersion \u003d loadVersion();\n     LOG.info(\"Loaded state DB schema version info \" + loadedVersion);\n     if (loadedVersion.equals(getCurrentVersion())) {\n       return;\n     }\n     if (loadedVersion.isCompatibleTo(getCurrentVersion())) {\n       LOG.info(\"Storing state DB schedma version info \" + getCurrentVersion());\n       storeVersion();\n     } else {\n       throw new IOException(\n         \"Incompatible version for state DB schema: expecting DB schema version \" \n             + getCurrentVersion() + \", but loading version \" + loadedVersion);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void checkVersion() throws IOException {\n    Version loadedVersion \u003d loadVersion();\n    LOG.info(\"Loaded state DB schema version info \" + loadedVersion);\n    if (loadedVersion.equals(getCurrentVersion())) {\n      return;\n    }\n    if (loadedVersion.isCompatibleTo(getCurrentVersion())) {\n      LOG.info(\"Storing state DB schedma version info \" + getCurrentVersion());\n      storeVersion();\n    } else {\n      throw new IOException(\n        \"Incompatible version for state DB schema: expecting DB schema version \" \n            + getCurrentVersion() + \", but loading version \" + loadedVersion);\n    }\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-shuffle/src/main/java/org/apache/hadoop/mapred/ShuffleHandler.java",
      "extendedDetails": {}
    },
    "60b1e835e0fc5c4c90eaf588c6722f69061f7f36": {
      "type": "Yintroduced",
      "commitMessage": "MAPREDUCE-5963. ShuffleHandler DB schema should be versioned with compatible/incompatible changes. Contributed by Junping Du\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1612652 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "22/07/14 12:22 PM",
      "commitName": "60b1e835e0fc5c4c90eaf588c6722f69061f7f36",
      "commitAuthor": "Jason Darrell Lowe",
      "diff": "@@ -0,0 +1,15 @@\n+  private void checkVersion() throws IOException {\n+    NMDBSchemaVersion loadedVersion \u003d loadVersion();\n+    LOG.info(\"Loaded state DB schema version info \" + loadedVersion);\n+    if (loadedVersion.equals(getCurrentVersion())) {\n+      return;\n+    }\n+    if (loadedVersion.isCompatibleTo(getCurrentVersion())) {\n+      LOG.info(\"Storing state DB schedma version info \" + getCurrentVersion());\n+      storeVersion();\n+    } else {\n+      throw new IOException(\n+        \"Incompatible version for state DB schema: expecting DB schema version \" \n+            + getCurrentVersion() + \", but loading version \" + loadedVersion);\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private void checkVersion() throws IOException {\n    NMDBSchemaVersion loadedVersion \u003d loadVersion();\n    LOG.info(\"Loaded state DB schema version info \" + loadedVersion);\n    if (loadedVersion.equals(getCurrentVersion())) {\n      return;\n    }\n    if (loadedVersion.isCompatibleTo(getCurrentVersion())) {\n      LOG.info(\"Storing state DB schedma version info \" + getCurrentVersion());\n      storeVersion();\n    } else {\n      throw new IOException(\n        \"Incompatible version for state DB schema: expecting DB schema version \" \n            + getCurrentVersion() + \", but loading version \" + loadedVersion);\n    }\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-shuffle/src/main/java/org/apache/hadoop/mapred/ShuffleHandler.java"
    }
  }
}