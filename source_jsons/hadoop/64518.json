{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "S3AUtils.java",
  "functionName": "closeAll",
  "functionId": "closeAll___log-Logger__closeables-Closeable",
  "sourceFilePath": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AUtils.java",
  "functionStartLine": 1646,
  "functionEndLine": 1649,
  "numCommitsSeen": 82,
  "timeTaken": 3072,
  "changeHistory": [
    "990063d2af0a37e9474949f33128805e34c3f016",
    "da9a39eed138210de29b59b90c449b28da1c04f9",
    "dab00da19f25619ccc71c7f803a235b21766bf1e"
  ],
  "changeHistoryShort": {
    "990063d2af0a37e9474949f33128805e34c3f016": "Ybodychange",
    "da9a39eed138210de29b59b90c449b28da1c04f9": "Ymultichange(Yparameterchange,Ybodychange)",
    "dab00da19f25619ccc71c7f803a235b21766bf1e": "Yintroduced"
  },
  "changeHistoryDetails": {
    "990063d2af0a37e9474949f33128805e34c3f016": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-16665. Filesystems to be closed if they failed during initialize().\n\nContributed by Steve Loughran.\n\nThis FileSystem instantiation so if an IOException or RuntimeException is\nraised in the invocation of FileSystem.initialize() then a best-effort\nattempt is made to close the FS instance; exceptions raised that there\nare swallowed.\n\nThe S3AFileSystem is also modified to do its own cleanup if an\nIOException is raised during its initialize() process, it being the\nFS we know has the \"potential\" to leak threads, especially in\nextension points (e.g AWS Authenticators) which spawn threads.\n\nChange-Id: Ib84073a606c9d53bf53cbfca4629876a03894f04\n",
      "commitDate": "12/11/19 10:17 AM",
      "commitName": "990063d2af0a37e9474949f33128805e34c3f016",
      "commitAuthor": "Steve Loughran",
      "commitDateOld": "20/09/19 11:20 PM",
      "commitNameOld": "e02b1023c2f42b6792d2941c1f987ae06259b021",
      "commitAuthorOld": "Siddharth Seth",
      "daysBetweenCommits": 52.5,
      "commitsBetweenForRepo": 278,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,4 @@\n   public static void closeAll(Logger log,\n       Closeable... closeables) {\n-    if (log \u003d\u003d null) {\n-      log \u003d LOG;\n-    }\n-    for (Closeable c : closeables) {\n-      if (c !\u003d null) {\n-        try {\n-          log.debug(\"Closing {}\", c);\n-          c.close();\n-        } catch (Exception e) {\n-          log.debug(\"Exception in closing {}\", c, e);\n-        }\n-      }\n-    }\n+    cleanupWithLogger(log, closeables);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void closeAll(Logger log,\n      Closeable... closeables) {\n    cleanupWithLogger(log, closeables);\n  }",
      "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AUtils.java",
      "extendedDetails": {}
    },
    "da9a39eed138210de29b59b90c449b28da1c04f9": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "HADOOP-15583. Stabilize S3A Assumed Role support.\nContributed by Steve Loughran.\n",
      "commitDate": "08/08/18 10:57 PM",
      "commitName": "da9a39eed138210de29b59b90c449b28da1c04f9",
      "commitAuthor": "Steve Loughran",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HADOOP-15583. Stabilize S3A Assumed Role support.\nContributed by Steve Loughran.\n",
          "commitDate": "08/08/18 10:57 PM",
          "commitName": "da9a39eed138210de29b59b90c449b28da1c04f9",
          "commitAuthor": "Steve Loughran",
          "commitDateOld": "27/06/18 10:37 PM",
          "commitNameOld": "2b2399d623539ab68e71a38fa9fbfc9a405bddb8",
          "commitAuthorOld": "Akira Ajisaka",
          "daysBetweenCommits": 42.01,
          "commitsBetweenForRepo": 267,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,17 +1,16 @@\n   public static void closeAll(Logger log,\n-      java.io.Closeable... closeables) {\n-    for (java.io.Closeable c : closeables) {\n+      Closeable... closeables) {\n+    if (log \u003d\u003d null) {\n+      log \u003d LOG;\n+    }\n+    for (Closeable c : closeables) {\n       if (c !\u003d null) {\n         try {\n-          if (log !\u003d null) {\n-            log.debug(\"Closing {}\", c);\n-          }\n+          log.debug(\"Closing {}\", c);\n           c.close();\n         } catch (Exception e) {\n-          if (log !\u003d null \u0026\u0026 log.isDebugEnabled()) {\n-            log.debug(\"Exception in closing {}\", c, e);\n-          }\n+          log.debug(\"Exception in closing {}\", c, e);\n         }\n       }\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public static void closeAll(Logger log,\n      Closeable... closeables) {\n    if (log \u003d\u003d null) {\n      log \u003d LOG;\n    }\n    for (Closeable c : closeables) {\n      if (c !\u003d null) {\n        try {\n          log.debug(\"Closing {}\", c);\n          c.close();\n        } catch (Exception e) {\n          log.debug(\"Exception in closing {}\", c, e);\n        }\n      }\n    }\n  }",
          "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AUtils.java",
          "extendedDetails": {
            "oldValue": "[log-Logger, closeables-java.io.Closeable]",
            "newValue": "[log-Logger, closeables-Closeable]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HADOOP-15583. Stabilize S3A Assumed Role support.\nContributed by Steve Loughran.\n",
          "commitDate": "08/08/18 10:57 PM",
          "commitName": "da9a39eed138210de29b59b90c449b28da1c04f9",
          "commitAuthor": "Steve Loughran",
          "commitDateOld": "27/06/18 10:37 PM",
          "commitNameOld": "2b2399d623539ab68e71a38fa9fbfc9a405bddb8",
          "commitAuthorOld": "Akira Ajisaka",
          "daysBetweenCommits": 42.01,
          "commitsBetweenForRepo": 267,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,17 +1,16 @@\n   public static void closeAll(Logger log,\n-      java.io.Closeable... closeables) {\n-    for (java.io.Closeable c : closeables) {\n+      Closeable... closeables) {\n+    if (log \u003d\u003d null) {\n+      log \u003d LOG;\n+    }\n+    for (Closeable c : closeables) {\n       if (c !\u003d null) {\n         try {\n-          if (log !\u003d null) {\n-            log.debug(\"Closing {}\", c);\n-          }\n+          log.debug(\"Closing {}\", c);\n           c.close();\n         } catch (Exception e) {\n-          if (log !\u003d null \u0026\u0026 log.isDebugEnabled()) {\n-            log.debug(\"Exception in closing {}\", c, e);\n-          }\n+          log.debug(\"Exception in closing {}\", c, e);\n         }\n       }\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public static void closeAll(Logger log,\n      Closeable... closeables) {\n    if (log \u003d\u003d null) {\n      log \u003d LOG;\n    }\n    for (Closeable c : closeables) {\n      if (c !\u003d null) {\n        try {\n          log.debug(\"Closing {}\", c);\n          c.close();\n        } catch (Exception e) {\n          log.debug(\"Exception in closing {}\", c, e);\n        }\n      }\n    }\n  }",
          "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AUtils.java",
          "extendedDetails": {}
        }
      ]
    },
    "dab00da19f25619ccc71c7f803a235b21766bf1e": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-14028. S3A BlockOutputStreams doesn\u0027t delete temporary files in multipart uploads or handle part upload failures.\nContributed by Steve Loughran.\n\n(cherry picked from commit 29fe5af017b945d8750c074ca39031b5b777eddd)\n",
      "commitDate": "25/02/17 7:35 AM",
      "commitName": "dab00da19f25619ccc71c7f803a235b21766bf1e",
      "commitAuthor": "Steve Loughran",
      "diff": "@@ -0,0 +1,17 @@\n+  public static void closeAll(Logger log,\n+      java.io.Closeable... closeables) {\n+    for (java.io.Closeable c : closeables) {\n+      if (c !\u003d null) {\n+        try {\n+          if (log !\u003d null) {\n+            log.debug(\"Closing {}\", c);\n+          }\n+          c.close();\n+        } catch (Exception e) {\n+          if (log !\u003d null \u0026\u0026 log.isDebugEnabled()) {\n+            log.debug(\"Exception in closing {}\", c, e);\n+          }\n+        }\n+      }\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public static void closeAll(Logger log,\n      java.io.Closeable... closeables) {\n    for (java.io.Closeable c : closeables) {\n      if (c !\u003d null) {\n        try {\n          if (log !\u003d null) {\n            log.debug(\"Closing {}\", c);\n          }\n          c.close();\n        } catch (Exception e) {\n          if (log !\u003d null \u0026\u0026 log.isDebugEnabled()) {\n            log.debug(\"Exception in closing {}\", c, e);\n          }\n        }\n      }\n    }\n  }",
      "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AUtils.java"
    }
  }
}