{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "StagingCommitter.java",
  "functionName": "failDestinationExists",
  "functionId": "failDestinationExists___path-Path(modifiers-final)__description-String(modifiers-final)",
  "sourceFilePath": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/commit/staging/StagingCommitter.java",
  "functionStartLine": 866,
  "functionEndLine": 895,
  "numCommitsSeen": 9,
  "timeTaken": 1620,
  "changeHistory": [
    "5a0babf76550f63dad4c17173c4da2bf335c6532"
  ],
  "changeHistoryShort": {
    "5a0babf76550f63dad4c17173c4da2bf335c6532": "Yintroduced"
  },
  "changeHistoryDetails": {
    "5a0babf76550f63dad4c17173c4da2bf335c6532": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-15107. Stabilize/tune S3A committers; review correctness \u0026 docs.\nContributed by Steve Loughran.\n",
      "commitDate": "30/08/18 6:49 AM",
      "commitName": "5a0babf76550f63dad4c17173c4da2bf335c6532",
      "commitAuthor": "Steve Loughran",
      "diff": "@@ -0,0 +1,30 @@\n+  protected PathExistsException failDestinationExists(final Path path,\n+      final String description) {\n+\n+    LOG.error(\"{}: Failing commit by job {} to write\"\n+            + \" to existing output path {}.\",\n+        description,\n+        getJobContext().getJobID(), path);\n+    // List the first 10 descendants, to give some details\n+    // on what is wrong but not overload things if there are many files.\n+    try {\n+      int limit \u003d 10;\n+      RemoteIterator\u003cLocatedFileStatus\u003e lf\n+          \u003d getDestFS().listFiles(path, true);\n+      LOG.info(\"Partial Directory listing\");\n+      while (limit \u003e 0 \u0026\u0026 lf.hasNext()) {\n+        limit--;\n+        LocatedFileStatus status \u003d lf.next();\n+        LOG.info(\"{}: {}\",\n+            status.getPath(),\n+            status.isDirectory()\n+                ? \" dir\"\n+                : (\"file size \" + status.getLen() + \" bytes\"));\n+      }\n+    } catch (IOException e) {\n+      LOG.info(\"Discarding exception raised when listing {}: \" + e, path);\n+      LOG.debug(\"stack trace \", e);\n+    }\n+    return new PathExistsException(path.toString(),\n+        description + \": \" + InternalCommitterConstants.E_DEST_EXISTS);\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  protected PathExistsException failDestinationExists(final Path path,\n      final String description) {\n\n    LOG.error(\"{}: Failing commit by job {} to write\"\n            + \" to existing output path {}.\",\n        description,\n        getJobContext().getJobID(), path);\n    // List the first 10 descendants, to give some details\n    // on what is wrong but not overload things if there are many files.\n    try {\n      int limit \u003d 10;\n      RemoteIterator\u003cLocatedFileStatus\u003e lf\n          \u003d getDestFS().listFiles(path, true);\n      LOG.info(\"Partial Directory listing\");\n      while (limit \u003e 0 \u0026\u0026 lf.hasNext()) {\n        limit--;\n        LocatedFileStatus status \u003d lf.next();\n        LOG.info(\"{}: {}\",\n            status.getPath(),\n            status.isDirectory()\n                ? \" dir\"\n                : (\"file size \" + status.getLen() + \" bytes\"));\n      }\n    } catch (IOException e) {\n      LOG.info(\"Discarding exception raised when listing {}: \" + e, path);\n      LOG.debug(\"stack trace \", e);\n    }\n    return new PathExistsException(path.toString(),\n        description + \": \" + InternalCommitterConstants.E_DEST_EXISTS);\n  }",
      "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/commit/staging/StagingCommitter.java"
    }
  }
}