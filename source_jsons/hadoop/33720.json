{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "RuncContainerRuntime.java",
  "functionName": "start",
  "functionId": "start",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/linux/runtime/RuncContainerRuntime.java",
  "functionStartLine": 255,
  "functionEndLine": 285,
  "numCommitsSeen": 1,
  "timeTaken": 1406,
  "changeHistory": [
    "0e22e9ab83438af37d821cb2f96e31f9a19ace2c"
  ],
  "changeHistoryShort": {
    "0e22e9ab83438af37d821cb2f96e31f9a19ace2c": "Yintroduced"
  },
  "changeHistoryDetails": {
    "0e22e9ab83438af37d821cb2f96e31f9a19ace2c": {
      "type": "Yintroduced",
      "commitMessage": "YARN-9562. Add Java changes for the new RuncContainerRuntime. Contributed by Eric Badger\n",
      "commitDate": "18/11/19 1:56 PM",
      "commitName": "0e22e9ab83438af37d821cb2f96e31f9a19ace2c",
      "commitAuthor": "Eric Badger",
      "diff": "@@ -0,0 +1,31 @@\n+  public void start() {\n+    int reapRuncLayerMountsInterval \u003d\n+        conf.getInt(NM_REAP_RUNC_LAYER_MOUNTS_INTERVAL,\n+        DEFAULT_NM_REAP_RUNC_LAYER_MOUNTS_INTERVAL);\n+    exec \u003d HadoopExecutors.newScheduledThreadPool(1);\n+    exec.scheduleAtFixedRate(\n+        new Runnable() {\n+          @Override\n+          public void run() {\n+            try {\n+              PrivilegedOperation launchOp \u003d new PrivilegedOperation(\n+                  PrivilegedOperation.OperationType.REAP_RUNC_LAYER_MOUNTS);\n+              launchOp.appendArgs(Integer.toString(layersToKeep));\n+              try {\n+                String stdout \u003d privilegedOperationExecutor\n+                    .executePrivilegedOperation(null,\n+                    launchOp, null, null, false, false);\n+                if(stdout !\u003d null) {\n+                  LOG.info(\"Reap layer mounts thread: \" + stdout);\n+                }\n+              } catch (PrivilegedOperationException e) {\n+                LOG.warn(\"Failed to reap old runc layer mounts\", e);\n+              }\n+            } catch (Exception e) {\n+              LOG.warn(\"Reap layer mount thread caught an exception: \", e);\n+            }\n+          }\n+        }, 0, reapRuncLayerMountsInterval, TimeUnit.SECONDS);\n+    imageTagToManifestPlugin.start();\n+    manifestToResourcesPlugin.start();\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public void start() {\n    int reapRuncLayerMountsInterval \u003d\n        conf.getInt(NM_REAP_RUNC_LAYER_MOUNTS_INTERVAL,\n        DEFAULT_NM_REAP_RUNC_LAYER_MOUNTS_INTERVAL);\n    exec \u003d HadoopExecutors.newScheduledThreadPool(1);\n    exec.scheduleAtFixedRate(\n        new Runnable() {\n          @Override\n          public void run() {\n            try {\n              PrivilegedOperation launchOp \u003d new PrivilegedOperation(\n                  PrivilegedOperation.OperationType.REAP_RUNC_LAYER_MOUNTS);\n              launchOp.appendArgs(Integer.toString(layersToKeep));\n              try {\n                String stdout \u003d privilegedOperationExecutor\n                    .executePrivilegedOperation(null,\n                    launchOp, null, null, false, false);\n                if(stdout !\u003d null) {\n                  LOG.info(\"Reap layer mounts thread: \" + stdout);\n                }\n              } catch (PrivilegedOperationException e) {\n                LOG.warn(\"Failed to reap old runc layer mounts\", e);\n              }\n            } catch (Exception e) {\n              LOG.warn(\"Reap layer mount thread caught an exception: \", e);\n            }\n          }\n        }, 0, reapRuncLayerMountsInterval, TimeUnit.SECONDS);\n    imageTagToManifestPlugin.start();\n    manifestToResourcesPlugin.start();\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/containermanager/linux/runtime/RuncContainerRuntime.java"
    }
  }
}