{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "SQLFederationStateStore.java",
  "functionName": "init",
  "functionId": "init___conf-Configuration",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-common/src/main/java/org/apache/hadoop/yarn/server/federation/store/impl/SQLFederationStateStore.java",
  "functionStartLine": 146,
  "functionEndLine": 176,
  "numCommitsSeen": 6,
  "timeTaken": 852,
  "changeHistory": [
    "5272af8c7eab76d779c621eb0208bf29ffa25613"
  ],
  "changeHistoryShort": {
    "5272af8c7eab76d779c621eb0208bf29ffa25613": "Yintroduced"
  },
  "changeHistoryDetails": {
    "5272af8c7eab76d779c621eb0208bf29ffa25613": {
      "type": "Yintroduced",
      "commitMessage": "YARN-3663. Federation State and Policy Store (DBMS implementation). (Giovanni Matteo Fumarola via curino).\n\n(cherry picked from commit be99c1fe2eb150fabd69902118d65941f82971f6)\n",
      "commitDate": "01/08/17 5:28 PM",
      "commitName": "5272af8c7eab76d779c621eb0208bf29ffa25613",
      "commitAuthor": "Carlo Curino",
      "diff": "@@ -0,0 +1,31 @@\n+  public void init(Configuration conf) throws YarnException {\n+    driverClass \u003d\n+        conf.get(YarnConfiguration.FEDERATION_STATESTORE_SQL_JDBC_CLASS,\n+            YarnConfiguration.DEFAULT_FEDERATION_STATESTORE_SQL_JDBC_CLASS);\n+    maximumPoolSize \u003d\n+        conf.getInt(YarnConfiguration.FEDERATION_STATESTORE_SQL_MAXCONNECTIONS,\n+            YarnConfiguration.DEFAULT_FEDERATION_STATESTORE_SQL_MAXCONNECTIONS);\n+\n+    // An helper method avoids to assign a null value to these property\n+    userName \u003d conf.get(YarnConfiguration.FEDERATION_STATESTORE_SQL_USERNAME);\n+    password \u003d conf.get(YarnConfiguration.FEDERATION_STATESTORE_SQL_PASSWORD);\n+    url \u003d conf.get(YarnConfiguration.FEDERATION_STATESTORE_SQL_URL);\n+\n+    try {\n+      Class.forName(driverClass);\n+    } catch (ClassNotFoundException e) {\n+      FederationStateStoreUtils.logAndThrowException(LOG,\n+          \"Driver class not found.\", e);\n+    }\n+\n+    // Create the data source to pool connections in a thread-safe manner\n+    dataSource \u003d new HikariDataSource();\n+    dataSource.setDataSourceClassName(driverClass);\n+    FederationStateStoreUtils.setUsername(dataSource, userName);\n+    FederationStateStoreUtils.setPassword(dataSource, password);\n+    FederationStateStoreUtils.setProperty(dataSource,\n+        FederationStateStoreUtils.FEDERATION_STORE_URL, url);\n+    dataSource.setMaximumPoolSize(maximumPoolSize);\n+    LOG.info(\"Initialized connection pool to the Federation StateStore \"\n+        + \"database at address: \" + url);\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public void init(Configuration conf) throws YarnException {\n    driverClass \u003d\n        conf.get(YarnConfiguration.FEDERATION_STATESTORE_SQL_JDBC_CLASS,\n            YarnConfiguration.DEFAULT_FEDERATION_STATESTORE_SQL_JDBC_CLASS);\n    maximumPoolSize \u003d\n        conf.getInt(YarnConfiguration.FEDERATION_STATESTORE_SQL_MAXCONNECTIONS,\n            YarnConfiguration.DEFAULT_FEDERATION_STATESTORE_SQL_MAXCONNECTIONS);\n\n    // An helper method avoids to assign a null value to these property\n    userName \u003d conf.get(YarnConfiguration.FEDERATION_STATESTORE_SQL_USERNAME);\n    password \u003d conf.get(YarnConfiguration.FEDERATION_STATESTORE_SQL_PASSWORD);\n    url \u003d conf.get(YarnConfiguration.FEDERATION_STATESTORE_SQL_URL);\n\n    try {\n      Class.forName(driverClass);\n    } catch (ClassNotFoundException e) {\n      FederationStateStoreUtils.logAndThrowException(LOG,\n          \"Driver class not found.\", e);\n    }\n\n    // Create the data source to pool connections in a thread-safe manner\n    dataSource \u003d new HikariDataSource();\n    dataSource.setDataSourceClassName(driverClass);\n    FederationStateStoreUtils.setUsername(dataSource, userName);\n    FederationStateStoreUtils.setPassword(dataSource, password);\n    FederationStateStoreUtils.setProperty(dataSource,\n        FederationStateStoreUtils.FEDERATION_STORE_URL, url);\n    dataSource.setMaximumPoolSize(maximumPoolSize);\n    LOG.info(\"Initialized connection pool to the Federation StateStore \"\n        + \"database at address: \" + url);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-common/src/main/java/org/apache/hadoop/yarn/server/federation/store/impl/SQLFederationStateStore.java"
    }
  }
}