{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "Shuffle.java",
  "functionName": "init",
  "functionId": "init___context-ShuffleConsumerPlugin.Context",
  "sourceFilePath": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/task/reduce/Shuffle.java",
  "functionStartLine": 65,
  "functionEndLine": 83,
  "numCommitsSeen": 12,
  "timeTaken": 1826,
  "changeHistory": [
    "84973d104917c0b8cbb187ee4f9868bbce967728",
    "4ee4e5ca2b8488459d2231dd1de8ed44dd656d5c",
    "0cb2fdc3b4fbbaa6153b6421a63082dc006f8eb4",
    "1a389305b27ac1efec4d7923b87de3e703bf70e1",
    "73fd247c7649919350ecfd16806af57ffe554649",
    "b096f61fe25752703785cad5fe0aaae8bf45da2f"
  ],
  "changeHistoryShort": {
    "84973d104917c0b8cbb187ee4f9868bbce967728": "Ybodychange",
    "4ee4e5ca2b8488459d2231dd1de8ed44dd656d5c": "Ybodychange",
    "0cb2fdc3b4fbbaa6153b6421a63082dc006f8eb4": "Ybodychange",
    "1a389305b27ac1efec4d7923b87de3e703bf70e1": "Ybodychange",
    "73fd247c7649919350ecfd16806af57ffe554649": "Ybodychange",
    "b096f61fe25752703785cad5fe0aaae8bf45da2f": "Yintroduced"
  },
  "changeHistoryDetails": {
    "84973d104917c0b8cbb187ee4f9868bbce967728": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-6861. Add metrics tags for ShuffleClientMetrics. (Contributed by Zoltan Siegl)\n",
      "commitDate": "27/08/18 7:53 AM",
      "commitName": "84973d104917c0b8cbb187ee4f9868bbce967728",
      "commitAuthor": "Haibo Chen",
      "commitDateOld": "02/05/16 6:46 PM",
      "commitNameOld": "4ee4e5ca2b8488459d2231dd1de8ed44dd656d5c",
      "commitAuthorOld": "Akira Ajisaka",
      "daysBetweenCommits": 846.55,
      "commitsBetweenForRepo": 6401,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,19 @@\n   public void init(ShuffleConsumerPlugin.Context context) {\n     this.context \u003d context;\n \n     this.reduceId \u003d context.getReduceId();\n     this.jobConf \u003d context.getJobConf();\n     this.umbilical \u003d context.getUmbilical();\n     this.reporter \u003d context.getReporter();\n-    this.metrics \u003d ShuffleClientMetrics.create();\n+    this.metrics \u003d ShuffleClientMetrics.create(context.getReduceId(),\n+        this.jobConf);\n     this.copyPhase \u003d context.getCopyPhase();\n     this.taskStatus \u003d context.getStatus();\n     this.reduceTask \u003d context.getReduceTask();\n     this.localMapFiles \u003d context.getLocalMapFiles();\n     \n     scheduler \u003d new ShuffleSchedulerImpl\u003cK, V\u003e(jobConf, taskStatus, reduceId,\n         this, copyPhase, context.getShuffledMapsCounter(),\n         context.getReduceShuffleBytes(), context.getFailedShuffleCounter());\n     merger \u003d createMergeManager(context);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void init(ShuffleConsumerPlugin.Context context) {\n    this.context \u003d context;\n\n    this.reduceId \u003d context.getReduceId();\n    this.jobConf \u003d context.getJobConf();\n    this.umbilical \u003d context.getUmbilical();\n    this.reporter \u003d context.getReporter();\n    this.metrics \u003d ShuffleClientMetrics.create(context.getReduceId(),\n        this.jobConf);\n    this.copyPhase \u003d context.getCopyPhase();\n    this.taskStatus \u003d context.getStatus();\n    this.reduceTask \u003d context.getReduceTask();\n    this.localMapFiles \u003d context.getLocalMapFiles();\n    \n    scheduler \u003d new ShuffleSchedulerImpl\u003cK, V\u003e(jobConf, taskStatus, reduceId,\n        this, copyPhase, context.getShuffledMapsCounter(),\n        context.getReduceShuffleBytes(), context.getFailedShuffleCounter());\n    merger \u003d createMergeManager(context);\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/task/reduce/Shuffle.java",
      "extendedDetails": {}
    },
    "4ee4e5ca2b8488459d2231dd1de8ed44dd656d5c": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-6526. Remove usage of metrics v1 from hadoop-mapreduce. (aajisaka)\n",
      "commitDate": "02/05/16 6:46 PM",
      "commitName": "4ee4e5ca2b8488459d2231dd1de8ed44dd656d5c",
      "commitAuthor": "Akira Ajisaka",
      "commitDateOld": "05/08/13 11:36 PM",
      "commitNameOld": "0cb2fdc3b4fbbaa6153b6421a63082dc006f8eb4",
      "commitAuthorOld": "Sanford Ryza",
      "daysBetweenCommits": 1000.8,
      "commitsBetweenForRepo": 7551,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,18 @@\n   public void init(ShuffleConsumerPlugin.Context context) {\n     this.context \u003d context;\n \n     this.reduceId \u003d context.getReduceId();\n     this.jobConf \u003d context.getJobConf();\n     this.umbilical \u003d context.getUmbilical();\n     this.reporter \u003d context.getReporter();\n-    this.metrics \u003d new ShuffleClientMetrics(reduceId, jobConf);\n+    this.metrics \u003d ShuffleClientMetrics.create();\n     this.copyPhase \u003d context.getCopyPhase();\n     this.taskStatus \u003d context.getStatus();\n     this.reduceTask \u003d context.getReduceTask();\n     this.localMapFiles \u003d context.getLocalMapFiles();\n     \n     scheduler \u003d new ShuffleSchedulerImpl\u003cK, V\u003e(jobConf, taskStatus, reduceId,\n         this, copyPhase, context.getShuffledMapsCounter(),\n         context.getReduceShuffleBytes(), context.getFailedShuffleCounter());\n     merger \u003d createMergeManager(context);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void init(ShuffleConsumerPlugin.Context context) {\n    this.context \u003d context;\n\n    this.reduceId \u003d context.getReduceId();\n    this.jobConf \u003d context.getJobConf();\n    this.umbilical \u003d context.getUmbilical();\n    this.reporter \u003d context.getReporter();\n    this.metrics \u003d ShuffleClientMetrics.create();\n    this.copyPhase \u003d context.getCopyPhase();\n    this.taskStatus \u003d context.getStatus();\n    this.reduceTask \u003d context.getReduceTask();\n    this.localMapFiles \u003d context.getLocalMapFiles();\n    \n    scheduler \u003d new ShuffleSchedulerImpl\u003cK, V\u003e(jobConf, taskStatus, reduceId,\n        this, copyPhase, context.getShuffledMapsCounter(),\n        context.getReduceShuffleBytes(), context.getFailedShuffleCounter());\n    merger \u003d createMergeManager(context);\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/task/reduce/Shuffle.java",
      "extendedDetails": {}
    },
    "0cb2fdc3b4fbbaa6153b6421a63082dc006f8eb4": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-434. LocalJobRunner limited to single reducer (Sandy Ryza and Aaron Kimball via Sandy Ryza)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1510866 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "05/08/13 11:36 PM",
      "commitName": "0cb2fdc3b4fbbaa6153b6421a63082dc006f8eb4",
      "commitAuthor": "Sanford Ryza",
      "commitDateOld": "15/06/13 8:07 PM",
      "commitNameOld": "1a389305b27ac1efec4d7923b87de3e703bf70e1",
      "commitAuthorOld": "Arun Murthy",
      "daysBetweenCommits": 51.15,
      "commitsBetweenForRepo": 309,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,18 @@\n   public void init(ShuffleConsumerPlugin.Context context) {\n     this.context \u003d context;\n \n     this.reduceId \u003d context.getReduceId();\n     this.jobConf \u003d context.getJobConf();\n     this.umbilical \u003d context.getUmbilical();\n     this.reporter \u003d context.getReporter();\n     this.metrics \u003d new ShuffleClientMetrics(reduceId, jobConf);\n     this.copyPhase \u003d context.getCopyPhase();\n     this.taskStatus \u003d context.getStatus();\n     this.reduceTask \u003d context.getReduceTask();\n+    this.localMapFiles \u003d context.getLocalMapFiles();\n     \n     scheduler \u003d new ShuffleSchedulerImpl\u003cK, V\u003e(jobConf, taskStatus, reduceId,\n         this, copyPhase, context.getShuffledMapsCounter(),\n         context.getReduceShuffleBytes(), context.getFailedShuffleCounter());\n     merger \u003d createMergeManager(context);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void init(ShuffleConsumerPlugin.Context context) {\n    this.context \u003d context;\n\n    this.reduceId \u003d context.getReduceId();\n    this.jobConf \u003d context.getJobConf();\n    this.umbilical \u003d context.getUmbilical();\n    this.reporter \u003d context.getReporter();\n    this.metrics \u003d new ShuffleClientMetrics(reduceId, jobConf);\n    this.copyPhase \u003d context.getCopyPhase();\n    this.taskStatus \u003d context.getStatus();\n    this.reduceTask \u003d context.getReduceTask();\n    this.localMapFiles \u003d context.getLocalMapFiles();\n    \n    scheduler \u003d new ShuffleSchedulerImpl\u003cK, V\u003e(jobConf, taskStatus, reduceId,\n        this, copyPhase, context.getShuffledMapsCounter(),\n        context.getReduceShuffleBytes(), context.getFailedShuffleCounter());\n    merger \u003d createMergeManager(context);\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/task/reduce/Shuffle.java",
      "extendedDetails": {}
    },
    "1a389305b27ac1efec4d7923b87de3e703bf70e1": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-5192. Allow for alternate resolutions of TaskCompletionEvents. Contributed by Chris Douglas.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1493445 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "15/06/13 8:07 PM",
      "commitName": "1a389305b27ac1efec4d7923b87de3e703bf70e1",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "15/03/13 2:09 PM",
      "commitNameOld": "7d7553c4eb7d9a282410a3213d26a89fea9b7865",
      "commitAuthorOld": "Robert Joseph Evans",
      "daysBetweenCommits": 92.25,
      "commitsBetweenForRepo": 576,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,17 @@\n   public void init(ShuffleConsumerPlugin.Context context) {\n     this.context \u003d context;\n \n     this.reduceId \u003d context.getReduceId();\n     this.jobConf \u003d context.getJobConf();\n     this.umbilical \u003d context.getUmbilical();\n     this.reporter \u003d context.getReporter();\n     this.metrics \u003d new ShuffleClientMetrics(reduceId, jobConf);\n     this.copyPhase \u003d context.getCopyPhase();\n     this.taskStatus \u003d context.getStatus();\n     this.reduceTask \u003d context.getReduceTask();\n     \n-    scheduler \u003d new ShuffleScheduler\u003cK,V\u003e(jobConf, taskStatus, this,\n-        copyPhase, context.getShuffledMapsCounter(),\n+    scheduler \u003d new ShuffleSchedulerImpl\u003cK, V\u003e(jobConf, taskStatus, reduceId,\n+        this, copyPhase, context.getShuffledMapsCounter(),\n         context.getReduceShuffleBytes(), context.getFailedShuffleCounter());\n     merger \u003d createMergeManager(context);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void init(ShuffleConsumerPlugin.Context context) {\n    this.context \u003d context;\n\n    this.reduceId \u003d context.getReduceId();\n    this.jobConf \u003d context.getJobConf();\n    this.umbilical \u003d context.getUmbilical();\n    this.reporter \u003d context.getReporter();\n    this.metrics \u003d new ShuffleClientMetrics(reduceId, jobConf);\n    this.copyPhase \u003d context.getCopyPhase();\n    this.taskStatus \u003d context.getStatus();\n    this.reduceTask \u003d context.getReduceTask();\n    \n    scheduler \u003d new ShuffleSchedulerImpl\u003cK, V\u003e(jobConf, taskStatus, reduceId,\n        this, copyPhase, context.getShuffledMapsCounter(),\n        context.getReduceShuffleBytes(), context.getFailedShuffleCounter());\n    merger \u003d createMergeManager(context);\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/task/reduce/Shuffle.java",
      "extendedDetails": {}
    },
    "73fd247c7649919350ecfd16806af57ffe554649": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-4808. Refactor MapOutput and MergeManager to facilitate reuse by Shuffle implementations. (masokan via tucu)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1436936 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "22/01/13 6:10 AM",
      "commitName": "73fd247c7649919350ecfd16806af57ffe554649",
      "commitAuthor": "Alejandro Abdelnur",
      "commitDateOld": "15/12/12 12:18 PM",
      "commitNameOld": "803e5155d1c8c842bed8e2d8624cb17ab11ec53b",
      "commitAuthorOld": "Alejandro Abdelnur",
      "daysBetweenCommits": 37.74,
      "commitsBetweenForRepo": 172,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,24 +1,17 @@\n   public void init(ShuffleConsumerPlugin.Context context) {\n     this.context \u003d context;\n \n     this.reduceId \u003d context.getReduceId();\n     this.jobConf \u003d context.getJobConf();\n     this.umbilical \u003d context.getUmbilical();\n     this.reporter \u003d context.getReporter();\n     this.metrics \u003d new ShuffleClientMetrics(reduceId, jobConf);\n     this.copyPhase \u003d context.getCopyPhase();\n     this.taskStatus \u003d context.getStatus();\n     this.reduceTask \u003d context.getReduceTask();\n     \n-    scheduler \u003d \n-      new ShuffleScheduler\u003cK,V\u003e(jobConf, taskStatus, this, copyPhase, \n-                                context.getShuffledMapsCounter(), \n-                                context.getReduceShuffleBytes(), context.getFailedShuffleCounter());\n-    merger \u003d new MergeManager\u003cK, V\u003e(reduceId, jobConf, context.getLocalFS(),\n-                                    context.getLocalDirAllocator(), reporter, context.getCodec(),\n-                                    context.getCombinerClass(), context.getCombineCollector(), \n-                                    context.getSpilledRecordsCounter(), \n-                                    context.getReduceCombineInputCounter(), \n-                                    context.getMergedMapOutputsCounter(), \n-                                    this, context.getMergePhase(), context.getMapOutputFile());\n+    scheduler \u003d new ShuffleScheduler\u003cK,V\u003e(jobConf, taskStatus, this,\n+        copyPhase, context.getShuffledMapsCounter(),\n+        context.getReduceShuffleBytes(), context.getFailedShuffleCounter());\n+    merger \u003d createMergeManager(context);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void init(ShuffleConsumerPlugin.Context context) {\n    this.context \u003d context;\n\n    this.reduceId \u003d context.getReduceId();\n    this.jobConf \u003d context.getJobConf();\n    this.umbilical \u003d context.getUmbilical();\n    this.reporter \u003d context.getReporter();\n    this.metrics \u003d new ShuffleClientMetrics(reduceId, jobConf);\n    this.copyPhase \u003d context.getCopyPhase();\n    this.taskStatus \u003d context.getStatus();\n    this.reduceTask \u003d context.getReduceTask();\n    \n    scheduler \u003d new ShuffleScheduler\u003cK,V\u003e(jobConf, taskStatus, this,\n        copyPhase, context.getShuffledMapsCounter(),\n        context.getReduceShuffleBytes(), context.getFailedShuffleCounter());\n    merger \u003d createMergeManager(context);\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/task/reduce/Shuffle.java",
      "extendedDetails": {}
    },
    "b096f61fe25752703785cad5fe0aaae8bf45da2f": {
      "type": "Yintroduced",
      "commitMessage": "MAPREDUCE-4049. Experimental api to allow for alternate shuffle plugins. Contributed by Anver BenHanoch.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1418173 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "06/12/12 6:36 PM",
      "commitName": "b096f61fe25752703785cad5fe0aaae8bf45da2f",
      "commitAuthor": "Arun Murthy",
      "diff": "@@ -0,0 +1,24 @@\n+  public void init(ShuffleConsumerPlugin.Context context) {\n+    this.context \u003d context;\n+\n+    this.reduceId \u003d context.getReduceId();\n+    this.jobConf \u003d context.getJobConf();\n+    this.umbilical \u003d context.getUmbilical();\n+    this.reporter \u003d context.getReporter();\n+    this.metrics \u003d new ShuffleClientMetrics(reduceId, jobConf);\n+    this.copyPhase \u003d context.getCopyPhase();\n+    this.taskStatus \u003d context.getStatus();\n+    this.reduceTask \u003d context.getReduceTask();\n+    \n+    scheduler \u003d \n+      new ShuffleScheduler\u003cK,V\u003e(jobConf, taskStatus, this, copyPhase, \n+                                context.getShuffledMapsCounter(), \n+                                context.getReduceShuffleBytes(), context.getFailedShuffleCounter());\n+    merger \u003d new MergeManager\u003cK, V\u003e(reduceId, jobConf, context.getLocalFS(),\n+                                    context.getLocalDirAllocator(), reporter, context.getCodec(),\n+                                    context.getCombinerClass(), context.getCombineCollector(), \n+                                    context.getSpilledRecordsCounter(), \n+                                    context.getReduceCombineInputCounter(), \n+                                    context.getMergedMapOutputsCounter(), \n+                                    this, context.getMergePhase(), context.getMapOutputFile());\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public void init(ShuffleConsumerPlugin.Context context) {\n    this.context \u003d context;\n\n    this.reduceId \u003d context.getReduceId();\n    this.jobConf \u003d context.getJobConf();\n    this.umbilical \u003d context.getUmbilical();\n    this.reporter \u003d context.getReporter();\n    this.metrics \u003d new ShuffleClientMetrics(reduceId, jobConf);\n    this.copyPhase \u003d context.getCopyPhase();\n    this.taskStatus \u003d context.getStatus();\n    this.reduceTask \u003d context.getReduceTask();\n    \n    scheduler \u003d \n      new ShuffleScheduler\u003cK,V\u003e(jobConf, taskStatus, this, copyPhase, \n                                context.getShuffledMapsCounter(), \n                                context.getReduceShuffleBytes(), context.getFailedShuffleCounter());\n    merger \u003d new MergeManager\u003cK, V\u003e(reduceId, jobConf, context.getLocalFS(),\n                                    context.getLocalDirAllocator(), reporter, context.getCodec(),\n                                    context.getCombinerClass(), context.getCombineCollector(), \n                                    context.getSpilledRecordsCounter(), \n                                    context.getReduceCombineInputCounter(), \n                                    context.getMergedMapOutputsCounter(), \n                                    this, context.getMergePhase(), context.getMapOutputFile());\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapreduce/task/reduce/Shuffle.java"
    }
  }
}