{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "BlockPlacementPolicyDefault.java",
  "functionName": "chooseStorage4Block",
  "functionId": "chooseStorage4Block___dnd-DatanodeDescriptor__blockSize-long__results-List__DatanodeStorageInfo____storageType-StorageType",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyDefault.java",
  "functionStartLine": 929,
  "functionEndLine": 942,
  "numCommitsSeen": 99,
  "timeTaken": 2207,
  "changeHistory": [
    "5bf7e594d7d54e5295fe4240c3d60c08d4755ab7",
    "8fa41d9dd4b923bf4141f019414a1a8b079124c6"
  ],
  "changeHistoryShort": {
    "5bf7e594d7d54e5295fe4240c3d60c08d4755ab7": "Ybodychange",
    "8fa41d9dd4b923bf4141f019414a1a8b079124c6": "Yintroduced"
  },
  "changeHistoryDetails": {
    "5bf7e594d7d54e5295fe4240c3d60c08d4755ab7": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-9023. When NN is not able to identify DN for replication, reason behind it can be logged.\n",
      "commitDate": "28/12/17 11:54 AM",
      "commitName": "5bf7e594d7d54e5295fe4240c3d60c08d4755ab7",
      "commitAuthor": "Xiao Chen",
      "commitDateOld": "08/11/17 10:14 PM",
      "commitNameOld": "3a3566e1d1ab5f78cfb734796b41802fe039196d",
      "commitAuthorOld": "Akira Ajisaka",
      "daysBetweenCommits": 49.57,
      "commitsBetweenForRepo": 278,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,13 +1,14 @@\n   DatanodeStorageInfo chooseStorage4Block(DatanodeDescriptor dnd,\n       long blockSize,\n       List\u003cDatanodeStorageInfo\u003e results,\n       StorageType storageType) {\n     DatanodeStorageInfo storage \u003d\n         dnd.chooseStorage4Block(storageType, blockSize);\n     if (storage !\u003d null) {\n       results.add(storage);\n     } else {\n-      logNodeIsNotChosen(dnd, \"no good storage to place the block \");\n+      logNodeIsNotChosen(dnd, NodeNotChosenReason.NOT_ENOUGH_STORAGE_SPACE,\n+          \" for storage type \" + storageType);\n     }\n     return storage;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  DatanodeStorageInfo chooseStorage4Block(DatanodeDescriptor dnd,\n      long blockSize,\n      List\u003cDatanodeStorageInfo\u003e results,\n      StorageType storageType) {\n    DatanodeStorageInfo storage \u003d\n        dnd.chooseStorage4Block(storageType, blockSize);\n    if (storage !\u003d null) {\n      results.add(storage);\n    } else {\n      logNodeIsNotChosen(dnd, NodeNotChosenReason.NOT_ENOUGH_STORAGE_SPACE,\n          \" for storage type \" + storageType);\n    }\n    return storage;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyDefault.java",
      "extendedDetails": {}
    },
    "8fa41d9dd4b923bf4141f019414a1a8b079124c6": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-8946. Improve choosing datanode storage for block placement. (yliu)\n",
      "commitDate": "31/08/15 5:52 PM",
      "commitName": "8fa41d9dd4b923bf4141f019414a1a8b079124c6",
      "commitAuthor": "yliu",
      "diff": "@@ -0,0 +1,13 @@\n+  DatanodeStorageInfo chooseStorage4Block(DatanodeDescriptor dnd,\n+      long blockSize,\n+      List\u003cDatanodeStorageInfo\u003e results,\n+      StorageType storageType) {\n+    DatanodeStorageInfo storage \u003d\n+        dnd.chooseStorage4Block(storageType, blockSize);\n+    if (storage !\u003d null) {\n+      results.add(storage);\n+    } else {\n+      logNodeIsNotChosen(dnd, \"no good storage to place the block \");\n+    }\n+    return storage;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  DatanodeStorageInfo chooseStorage4Block(DatanodeDescriptor dnd,\n      long blockSize,\n      List\u003cDatanodeStorageInfo\u003e results,\n      StorageType storageType) {\n    DatanodeStorageInfo storage \u003d\n        dnd.chooseStorage4Block(storageType, blockSize);\n    if (storage !\u003d null) {\n      results.add(storage);\n    } else {\n      logNodeIsNotChosen(dnd, \"no good storage to place the block \");\n    }\n    return storage;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/BlockPlacementPolicyDefault.java"
    }
  }
}