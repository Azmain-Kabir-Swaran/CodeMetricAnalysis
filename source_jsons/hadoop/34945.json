{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "LinuxContainerExecutor.java",
  "functionName": "removeDockerContainer",
  "functionId": "removeDockerContainer___containerId-String",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/LinuxContainerExecutor.java",
  "functionStartLine": 982,
  "functionEndLine": 998,
  "numCommitsSeen": 84,
  "timeTaken": 3776,
  "changeHistory": [
    "f7df55f4a89ed2d75d874b32209647ef4f448875",
    "2df0a8dcb3dfde15d216481cc1296d97d2cb5d43",
    "7526815e3234ca352854ecfb142a13f1a188d5bd",
    "85585f9eef26baded5b3ef7fcc3283aa37fc362d",
    "3d65dbe032e202361d613344ccc6d9c5f99ba395"
  ],
  "changeHistoryShort": {
    "f7df55f4a89ed2d75d874b32209647ef4f448875": "Ybodychange",
    "2df0a8dcb3dfde15d216481cc1296d97d2cb5d43": "Ybodychange",
    "7526815e3234ca352854ecfb142a13f1a188d5bd": "Ybodychange",
    "85585f9eef26baded5b3ef7fcc3283aa37fc362d": "Ybodychange",
    "3d65dbe032e202361d613344ccc6d9c5f99ba395": "Yintroduced"
  },
  "changeHistoryDetails": {
    "f7df55f4a89ed2d75d874b32209647ef4f448875": {
      "type": "Ybodychange",
      "commitMessage": "YARN-9602. Use logger format in Container Executor. Contributed by Abhishek Modi.\n",
      "commitDate": "11/06/19 9:59 AM",
      "commitName": "f7df55f4a89ed2d75d874b32209647ef4f448875",
      "commitAuthor": "bibinchundatt",
      "commitDateOld": "15/03/19 4:20 PM",
      "commitNameOld": "2064ca015d1584263aac0cc20c60b925a3aff612",
      "commitAuthorOld": "Eric Yang",
      "daysBetweenCommits": 87.73,
      "commitsBetweenForRepo": 542,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,17 @@\n   public void removeDockerContainer(String containerId) {\n     try {\n       PrivilegedOperationExecutor privOpExecutor \u003d\n           PrivilegedOperationExecutor.getInstance(super.getConf());\n       if (DockerCommandExecutor.isRemovable(\n           DockerCommandExecutor.getContainerStatus(containerId, privOpExecutor,\n               nmContext))) {\n-        LOG.info(\"Removing Docker container : \" + containerId);\n+        LOG.info(\"Removing Docker container : {}\", containerId);\n         DockerRmCommand dockerRmCommand \u003d new DockerRmCommand(containerId,\n             ResourceHandlerModule.getCgroupsRelativeRoot());\n         DockerCommandExecutor.executeDockerCommand(dockerRmCommand, containerId,\n             null, privOpExecutor, false, nmContext);\n       }\n     } catch (ContainerExecutionException e) {\n-      LOG.warn(\"Unable to remove docker container: \" + containerId);\n+      LOG.warn(\"Unable to remove docker container: {}\", containerId);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void removeDockerContainer(String containerId) {\n    try {\n      PrivilegedOperationExecutor privOpExecutor \u003d\n          PrivilegedOperationExecutor.getInstance(super.getConf());\n      if (DockerCommandExecutor.isRemovable(\n          DockerCommandExecutor.getContainerStatus(containerId, privOpExecutor,\n              nmContext))) {\n        LOG.info(\"Removing Docker container : {}\", containerId);\n        DockerRmCommand dockerRmCommand \u003d new DockerRmCommand(containerId,\n            ResourceHandlerModule.getCgroupsRelativeRoot());\n        DockerCommandExecutor.executeDockerCommand(dockerRmCommand, containerId,\n            null, privOpExecutor, false, nmContext);\n      }\n    } catch (ContainerExecutionException e) {\n      LOG.warn(\"Unable to remove docker container: {}\", containerId);\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/LinuxContainerExecutor.java",
      "extendedDetails": {}
    },
    "2df0a8dcb3dfde15d216481cc1296d97d2cb5d43": {
      "type": "Ybodychange",
      "commitMessage": "YARN-8648. Container cgroups are leaked when using docker. Contributed by Jim Brennan\n",
      "commitDate": "18/09/18 1:36 PM",
      "commitName": "2df0a8dcb3dfde15d216481cc1296d97d2cb5d43",
      "commitAuthor": "Jason Lowe",
      "commitDateOld": "07/09/18 4:46 PM",
      "commitNameOld": "7d623343879ce9a8f8e64601024d018efc02794c",
      "commitAuthorOld": "Eric Yang",
      "daysBetweenCommits": 10.87,
      "commitsBetweenForRepo": 125,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,17 @@\n   public void removeDockerContainer(String containerId) {\n     try {\n       PrivilegedOperationExecutor privOpExecutor \u003d\n           PrivilegedOperationExecutor.getInstance(super.getConf());\n       if (DockerCommandExecutor.isRemovable(\n           DockerCommandExecutor.getContainerStatus(containerId, privOpExecutor,\n               nmContext))) {\n         LOG.info(\"Removing Docker container : \" + containerId);\n-        DockerRmCommand dockerRmCommand \u003d new DockerRmCommand(containerId);\n+        DockerRmCommand dockerRmCommand \u003d new DockerRmCommand(containerId,\n+            ResourceHandlerModule.getCgroupsRelativeRoot());\n         DockerCommandExecutor.executeDockerCommand(dockerRmCommand, containerId,\n             null, privOpExecutor, false, nmContext);\n       }\n     } catch (ContainerExecutionException e) {\n       LOG.warn(\"Unable to remove docker container: \" + containerId);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void removeDockerContainer(String containerId) {\n    try {\n      PrivilegedOperationExecutor privOpExecutor \u003d\n          PrivilegedOperationExecutor.getInstance(super.getConf());\n      if (DockerCommandExecutor.isRemovable(\n          DockerCommandExecutor.getContainerStatus(containerId, privOpExecutor,\n              nmContext))) {\n        LOG.info(\"Removing Docker container : \" + containerId);\n        DockerRmCommand dockerRmCommand \u003d new DockerRmCommand(containerId,\n            ResourceHandlerModule.getCgroupsRelativeRoot());\n        DockerCommandExecutor.executeDockerCommand(dockerRmCommand, containerId,\n            null, privOpExecutor, false, nmContext);\n      }\n    } catch (ContainerExecutionException e) {\n      LOG.warn(\"Unable to remove docker container: \" + containerId);\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/LinuxContainerExecutor.java",
      "extendedDetails": {}
    },
    "7526815e3234ca352854ecfb142a13f1a188d5bd": {
      "type": "Ybodychange",
      "commitMessage": "YARN-8263. DockerClient still touches hadoop.tmp.dir. Contributed by Craig Condit\n",
      "commitDate": "02/08/18 8:43 AM",
      "commitName": "7526815e3234ca352854ecfb142a13f1a188d5bd",
      "commitAuthor": "Jason Lowe",
      "commitDateOld": "27/07/18 4:33 PM",
      "commitNameOld": "ed9d60e888d0acfd748fda7f66249f5b79a3ed6d",
      "commitAuthorOld": "Eric Yang",
      "daysBetweenCommits": 5.67,
      "commitsBetweenForRepo": 39,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,16 @@\n   public void removeDockerContainer(String containerId) {\n     try {\n       PrivilegedOperationExecutor privOpExecutor \u003d\n           PrivilegedOperationExecutor.getInstance(super.getConf());\n       if (DockerCommandExecutor.isRemovable(\n-          DockerCommandExecutor.getContainerStatus(containerId,\n-              super.getConf(), privOpExecutor, nmContext))) {\n+          DockerCommandExecutor.getContainerStatus(containerId, privOpExecutor,\n+              nmContext))) {\n         LOG.info(\"Removing Docker container : \" + containerId);\n         DockerRmCommand dockerRmCommand \u003d new DockerRmCommand(containerId);\n         DockerCommandExecutor.executeDockerCommand(dockerRmCommand, containerId,\n-            null, super.getConf(), privOpExecutor, false, nmContext);\n+            null, privOpExecutor, false, nmContext);\n       }\n     } catch (ContainerExecutionException e) {\n       LOG.warn(\"Unable to remove docker container: \" + containerId);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void removeDockerContainer(String containerId) {\n    try {\n      PrivilegedOperationExecutor privOpExecutor \u003d\n          PrivilegedOperationExecutor.getInstance(super.getConf());\n      if (DockerCommandExecutor.isRemovable(\n          DockerCommandExecutor.getContainerStatus(containerId, privOpExecutor,\n              nmContext))) {\n        LOG.info(\"Removing Docker container : \" + containerId);\n        DockerRmCommand dockerRmCommand \u003d new DockerRmCommand(containerId);\n        DockerCommandExecutor.executeDockerCommand(dockerRmCommand, containerId,\n            null, privOpExecutor, false, nmContext);\n      }\n    } catch (ContainerExecutionException e) {\n      LOG.warn(\"Unable to remove docker container: \" + containerId);\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/LinuxContainerExecutor.java",
      "extendedDetails": {}
    },
    "85585f9eef26baded5b3ef7fcc3283aa37fc362d": {
      "type": "Ybodychange",
      "commitMessage": "YARN-8064.  Bugfix for clean up container-executor cmd helper file.\n            Contributed by Eric Badger\n",
      "commitDate": "20/04/18 10:49 AM",
      "commitName": "85585f9eef26baded5b3ef7fcc3283aa37fc362d",
      "commitAuthor": "Eric Yang",
      "commitDateOld": "10/04/18 4:25 PM",
      "commitNameOld": "c467f311d0c7155c09052d93fac12045af925583",
      "commitAuthorOld": "Eric Yang",
      "daysBetweenCommits": 9.77,
      "commitsBetweenForRepo": 79,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,16 @@\n   public void removeDockerContainer(String containerId) {\n     try {\n       PrivilegedOperationExecutor privOpExecutor \u003d\n           PrivilegedOperationExecutor.getInstance(super.getConf());\n       if (DockerCommandExecutor.isRemovable(\n           DockerCommandExecutor.getContainerStatus(containerId,\n-              super.getConf(), privOpExecutor))) {\n+              super.getConf(), privOpExecutor, nmContext))) {\n         LOG.info(\"Removing Docker container : \" + containerId);\n         DockerRmCommand dockerRmCommand \u003d new DockerRmCommand(containerId);\n         DockerCommandExecutor.executeDockerCommand(dockerRmCommand, containerId,\n-            null, super.getConf(), privOpExecutor, false);\n+            null, super.getConf(), privOpExecutor, false, nmContext);\n       }\n     } catch (ContainerExecutionException e) {\n       LOG.warn(\"Unable to remove docker container: \" + containerId);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void removeDockerContainer(String containerId) {\n    try {\n      PrivilegedOperationExecutor privOpExecutor \u003d\n          PrivilegedOperationExecutor.getInstance(super.getConf());\n      if (DockerCommandExecutor.isRemovable(\n          DockerCommandExecutor.getContainerStatus(containerId,\n              super.getConf(), privOpExecutor, nmContext))) {\n        LOG.info(\"Removing Docker container : \" + containerId);\n        DockerRmCommand dockerRmCommand \u003d new DockerRmCommand(containerId);\n        DockerCommandExecutor.executeDockerCommand(dockerRmCommand, containerId,\n            null, super.getConf(), privOpExecutor, false, nmContext);\n      }\n    } catch (ContainerExecutionException e) {\n      LOG.warn(\"Unable to remove docker container: \" + containerId);\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/LinuxContainerExecutor.java",
      "extendedDetails": {}
    },
    "3d65dbe032e202361d613344ccc6d9c5f99ba395": {
      "type": "Yintroduced",
      "commitMessage": "YARN-5366. Improve signal handling and delete delay for Docker on Yarn.\n           (Contributed by Shane Kumpf)\n",
      "commitDate": "12/01/18 10:41 AM",
      "commitName": "3d65dbe032e202361d613344ccc6d9c5f99ba395",
      "commitAuthor": "Eric Yang",
      "diff": "@@ -0,0 +1,16 @@\n+  public void removeDockerContainer(String containerId) {\n+    try {\n+      PrivilegedOperationExecutor privOpExecutor \u003d\n+          PrivilegedOperationExecutor.getInstance(super.getConf());\n+      if (DockerCommandExecutor.isRemovable(\n+          DockerCommandExecutor.getContainerStatus(containerId,\n+              super.getConf(), privOpExecutor))) {\n+        LOG.info(\"Removing Docker container : \" + containerId);\n+        DockerRmCommand dockerRmCommand \u003d new DockerRmCommand(containerId);\n+        DockerCommandExecutor.executeDockerCommand(dockerRmCommand, containerId,\n+            null, super.getConf(), privOpExecutor, false);\n+      }\n+    } catch (ContainerExecutionException e) {\n+      LOG.warn(\"Unable to remove docker container: \" + containerId);\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public void removeDockerContainer(String containerId) {\n    try {\n      PrivilegedOperationExecutor privOpExecutor \u003d\n          PrivilegedOperationExecutor.getInstance(super.getConf());\n      if (DockerCommandExecutor.isRemovable(\n          DockerCommandExecutor.getContainerStatus(containerId,\n              super.getConf(), privOpExecutor))) {\n        LOG.info(\"Removing Docker container : \" + containerId);\n        DockerRmCommand dockerRmCommand \u003d new DockerRmCommand(containerId);\n        DockerCommandExecutor.executeDockerCommand(dockerRmCommand, containerId,\n            null, super.getConf(), privOpExecutor, false);\n      }\n    } catch (ContainerExecutionException e) {\n      LOG.warn(\"Unable to remove docker container: \" + containerId);\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/LinuxContainerExecutor.java"
    }
  }
}