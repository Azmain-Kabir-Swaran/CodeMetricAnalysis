{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "MRDelegationTokenRenewer.java",
  "functionName": "renew",
  "functionId": "renew___token-Token__?____conf-Configuration",
  "sourceFilePath": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/v2/security/MRDelegationTokenRenewer.java",
  "functionStartLine": 54,
  "functionEndLine": 73,
  "numCommitsSeen": 6,
  "timeTaken": 1212,
  "changeHistory": [
    "d33534c4fb35cb82ff8d56abeeb63a949e72a031",
    "a2c42330047bf955a6a585dcddf798920d4c8640",
    "7359dc32d3781d5318efee4cf6185616c7c00c18",
    "92b7165a71656468f17ce8b760ce11e648932f0e",
    "e17cecf5505dddb92e2212147505c7c900184431"
  ],
  "changeHistoryShort": {
    "d33534c4fb35cb82ff8d56abeeb63a949e72a031": "Ybodychange",
    "a2c42330047bf955a6a585dcddf798920d4c8640": "Ybodychange",
    "7359dc32d3781d5318efee4cf6185616c7c00c18": "Ybodychange",
    "92b7165a71656468f17ce8b760ce11e648932f0e": "Ybodychange",
    "e17cecf5505dddb92e2212147505c7c900184431": "Yintroduced"
  },
  "changeHistoryDetails": {
    "d33534c4fb35cb82ff8d56abeeb63a949e72a031": {
      "type": "Ybodychange",
      "commitMessage": "YARN-748. Moved BuilderUtils from yarn-common to yarn-server-common for eventual retirement. Contributed by Jian He.\nMAPREDUCE-5297. Updated MR App since BuilderUtils is no longer public after YARN-748. Contributed by Jian He.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1489257 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "03/06/13 5:34 PM",
      "commitName": "d33534c4fb35cb82ff8d56abeeb63a949e72a031",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "01/06/13 2:43 PM",
      "commitNameOld": "a2c42330047bf955a6a585dcddf798920d4c8640",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 2.12,
      "commitsBetweenForRepo": 26,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,20 @@\n   public long renew(Token\u003c?\u003e token, Configuration conf) throws IOException,\n       InterruptedException {\n \n-    org.apache.hadoop.yarn.api.records.Token dToken \u003d BuilderUtils.newDelegationToken(\n-        token.getIdentifier(), token.getKind().toString(), token.getPassword(),\n-        token.getService().toString());\n+    org.apache.hadoop.yarn.api.records.Token dToken \u003d\n+        org.apache.hadoop.yarn.api.records.Token.newInstance(\n+          token.getIdentifier(), token.getKind().toString(),\n+          token.getPassword(), token.getService().toString());\n \n     MRClientProtocol histProxy \u003d instantiateHistoryProxy(conf,\n         SecurityUtil.getTokenServiceAddr(token));\n     try {\n       RenewDelegationTokenRequest request \u003d Records\n           .newRecord(RenewDelegationTokenRequest.class);\n       request.setDelegationToken(dToken);\n       return histProxy.renewDelegationToken(request).getNextExpirationTime();\n     } finally {\n       stopHistoryProxy(histProxy);\n     }\n \n   }\n\\ No newline at end of file\n",
      "actualSource": "  public long renew(Token\u003c?\u003e token, Configuration conf) throws IOException,\n      InterruptedException {\n\n    org.apache.hadoop.yarn.api.records.Token dToken \u003d\n        org.apache.hadoop.yarn.api.records.Token.newInstance(\n          token.getIdentifier(), token.getKind().toString(),\n          token.getPassword(), token.getService().toString());\n\n    MRClientProtocol histProxy \u003d instantiateHistoryProxy(conf,\n        SecurityUtil.getTokenServiceAddr(token));\n    try {\n      RenewDelegationTokenRequest request \u003d Records\n          .newRecord(RenewDelegationTokenRequest.class);\n      request.setDelegationToken(dToken);\n      return histProxy.renewDelegationToken(request).getNextExpirationTime();\n    } finally {\n      stopHistoryProxy(histProxy);\n    }\n\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/v2/security/MRDelegationTokenRenewer.java",
      "extendedDetails": {}
    },
    "a2c42330047bf955a6a585dcddf798920d4c8640": {
      "type": "Ybodychange",
      "commitMessage": "YARN-717. Put object creation factories for Token in the class itself and remove useless derivations for specific tokens. Contributed by Jian He.\nMAPREDUCE-5289. Updated MR App to use Token directly after YARN-717. Contributed by Jian He.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1488616 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "01/06/13 2:43 PM",
      "commitName": "a2c42330047bf955a6a585dcddf798920d4c8640",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "12/05/13 8:34 PM",
      "commitNameOld": "7359dc32d3781d5318efee4cf6185616c7c00c18",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 19.76,
      "commitsBetweenForRepo": 95,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,19 @@\n   public long renew(Token\u003c?\u003e token, Configuration conf) throws IOException,\n       InterruptedException {\n \n-    DelegationToken dToken \u003d BuilderUtils.newDelegationToken(\n+    org.apache.hadoop.yarn.api.records.Token dToken \u003d BuilderUtils.newDelegationToken(\n         token.getIdentifier(), token.getKind().toString(), token.getPassword(),\n         token.getService().toString());\n \n     MRClientProtocol histProxy \u003d instantiateHistoryProxy(conf,\n         SecurityUtil.getTokenServiceAddr(token));\n     try {\n       RenewDelegationTokenRequest request \u003d Records\n           .newRecord(RenewDelegationTokenRequest.class);\n       request.setDelegationToken(dToken);\n       return histProxy.renewDelegationToken(request).getNextExpirationTime();\n     } finally {\n       stopHistoryProxy(histProxy);\n     }\n \n   }\n\\ No newline at end of file\n",
      "actualSource": "  public long renew(Token\u003c?\u003e token, Configuration conf) throws IOException,\n      InterruptedException {\n\n    org.apache.hadoop.yarn.api.records.Token dToken \u003d BuilderUtils.newDelegationToken(\n        token.getIdentifier(), token.getKind().toString(), token.getPassword(),\n        token.getService().toString());\n\n    MRClientProtocol histProxy \u003d instantiateHistoryProxy(conf,\n        SecurityUtil.getTokenServiceAddr(token));\n    try {\n      RenewDelegationTokenRequest request \u003d Records\n          .newRecord(RenewDelegationTokenRequest.class);\n      request.setDelegationToken(dToken);\n      return histProxy.renewDelegationToken(request).getNextExpirationTime();\n    } finally {\n      stopHistoryProxy(histProxy);\n    }\n\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/v2/security/MRDelegationTokenRenewer.java",
      "extendedDetails": {}
    },
    "7359dc32d3781d5318efee4cf6185616c7c00c18": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-4067. Changed MRClientProtocol api to throw IOException only (Xuan Gong via vinodkv)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1481695 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "12/05/13 8:34 PM",
      "commitName": "7359dc32d3781d5318efee4cf6185616c7c00c18",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "06/05/13 12:04 PM",
      "commitNameOld": "92b7165a71656468f17ce8b760ce11e648932f0e",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 6.35,
      "commitsBetweenForRepo": 44,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,21 +1,19 @@\n   public long renew(Token\u003c?\u003e token, Configuration conf) throws IOException,\n       InterruptedException {\n \n     DelegationToken dToken \u003d BuilderUtils.newDelegationToken(\n         token.getIdentifier(), token.getKind().toString(), token.getPassword(),\n         token.getService().toString());\n \n     MRClientProtocol histProxy \u003d instantiateHistoryProxy(conf,\n         SecurityUtil.getTokenServiceAddr(token));\n     try {\n       RenewDelegationTokenRequest request \u003d Records\n           .newRecord(RenewDelegationTokenRequest.class);\n       request.setDelegationToken(dToken);\n       return histProxy.renewDelegationToken(request).getNextExpirationTime();\n-    } catch (YarnRemoteException e) {\n-      throw new IOException(e);\n     } finally {\n       stopHistoryProxy(histProxy);\n     }\n \n   }\n\\ No newline at end of file\n",
      "actualSource": "  public long renew(Token\u003c?\u003e token, Configuration conf) throws IOException,\n      InterruptedException {\n\n    DelegationToken dToken \u003d BuilderUtils.newDelegationToken(\n        token.getIdentifier(), token.getKind().toString(), token.getPassword(),\n        token.getService().toString());\n\n    MRClientProtocol histProxy \u003d instantiateHistoryProxy(conf,\n        SecurityUtil.getTokenServiceAddr(token));\n    try {\n      RenewDelegationTokenRequest request \u003d Records\n          .newRecord(RenewDelegationTokenRequest.class);\n      request.setDelegationToken(dToken);\n      return histProxy.renewDelegationToken(request).getNextExpirationTime();\n    } finally {\n      stopHistoryProxy(histProxy);\n    }\n\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/v2/security/MRDelegationTokenRenewer.java",
      "extendedDetails": {}
    },
    "92b7165a71656468f17ce8b760ce11e648932f0e": {
      "type": "Ybodychange",
      "commitMessage": "YARN-629. Make YarnRemoteException not be rooted at IOException. Contributed by Xuan Gong.\nMAPREDUCE-5204. Handling YarnRemoteException separately from IOException in MR app after YARN-629. Contributed by Xuan Gong.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1479680 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "06/05/13 12:04 PM",
      "commitName": "92b7165a71656468f17ce8b760ce11e648932f0e",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "04/01/13 12:15 PM",
      "commitNameOld": "e17cecf5505dddb92e2212147505c7c900184431",
      "commitAuthorOld": "Thomas Graves",
      "daysBetweenCommits": 121.95,
      "commitsBetweenForRepo": 637,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,21 @@\n   public long renew(Token\u003c?\u003e token, Configuration conf) throws IOException,\n       InterruptedException {\n \n     DelegationToken dToken \u003d BuilderUtils.newDelegationToken(\n         token.getIdentifier(), token.getKind().toString(), token.getPassword(),\n         token.getService().toString());\n \n     MRClientProtocol histProxy \u003d instantiateHistoryProxy(conf,\n         SecurityUtil.getTokenServiceAddr(token));\n     try {\n       RenewDelegationTokenRequest request \u003d Records\n           .newRecord(RenewDelegationTokenRequest.class);\n       request.setDelegationToken(dToken);\n       return histProxy.renewDelegationToken(request).getNextExpirationTime();\n+    } catch (YarnRemoteException e) {\n+      throw new IOException(e);\n     } finally {\n       stopHistoryProxy(histProxy);\n     }\n \n   }\n\\ No newline at end of file\n",
      "actualSource": "  public long renew(Token\u003c?\u003e token, Configuration conf) throws IOException,\n      InterruptedException {\n\n    DelegationToken dToken \u003d BuilderUtils.newDelegationToken(\n        token.getIdentifier(), token.getKind().toString(), token.getPassword(),\n        token.getService().toString());\n\n    MRClientProtocol histProxy \u003d instantiateHistoryProxy(conf,\n        SecurityUtil.getTokenServiceAddr(token));\n    try {\n      RenewDelegationTokenRequest request \u003d Records\n          .newRecord(RenewDelegationTokenRequest.class);\n      request.setDelegationToken(dToken);\n      return histProxy.renewDelegationToken(request).getNextExpirationTime();\n    } catch (YarnRemoteException e) {\n      throw new IOException(e);\n    } finally {\n      stopHistoryProxy(histProxy);\n    }\n\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/v2/security/MRDelegationTokenRenewer.java",
      "extendedDetails": {}
    },
    "e17cecf5505dddb92e2212147505c7c900184431": {
      "type": "Yintroduced",
      "commitMessage": "MAPREDUCE-4894. Renewal / cancellation of JobHistory tokens (Siddharth Seth via tgraves\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1429086 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "04/01/13 12:15 PM",
      "commitName": "e17cecf5505dddb92e2212147505c7c900184431",
      "commitAuthor": "Thomas Graves",
      "diff": "@@ -0,0 +1,19 @@\n+  public long renew(Token\u003c?\u003e token, Configuration conf) throws IOException,\n+      InterruptedException {\n+\n+    DelegationToken dToken \u003d BuilderUtils.newDelegationToken(\n+        token.getIdentifier(), token.getKind().toString(), token.getPassword(),\n+        token.getService().toString());\n+\n+    MRClientProtocol histProxy \u003d instantiateHistoryProxy(conf,\n+        SecurityUtil.getTokenServiceAddr(token));\n+    try {\n+      RenewDelegationTokenRequest request \u003d Records\n+          .newRecord(RenewDelegationTokenRequest.class);\n+      request.setDelegationToken(dToken);\n+      return histProxy.renewDelegationToken(request).getNextExpirationTime();\n+    } finally {\n+      stopHistoryProxy(histProxy);\n+    }\n+\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public long renew(Token\u003c?\u003e token, Configuration conf) throws IOException,\n      InterruptedException {\n\n    DelegationToken dToken \u003d BuilderUtils.newDelegationToken(\n        token.getIdentifier(), token.getKind().toString(), token.getPassword(),\n        token.getService().toString());\n\n    MRClientProtocol histProxy \u003d instantiateHistoryProxy(conf,\n        SecurityUtil.getTokenServiceAddr(token));\n    try {\n      RenewDelegationTokenRequest request \u003d Records\n          .newRecord(RenewDelegationTokenRequest.class);\n      request.setDelegationToken(dToken);\n      return histProxy.renewDelegationToken(request).getNextExpirationTime();\n    } finally {\n      stopHistoryProxy(histProxy);\n    }\n\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-common/src/main/java/org/apache/hadoop/mapreduce/v2/security/MRDelegationTokenRenewer.java"
    }
  }
}