{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "KerberosUtil.java",
  "functionName": "getDefaultRealm",
  "functionId": "getDefaultRealm",
  "sourceFilePath": "hadoop-common-project/hadoop-auth/src/main/java/org/apache/hadoop/security/authentication/util/KerberosUtil.java",
  "functionStartLine": 103,
  "functionEndLine": 109,
  "numCommitsSeen": 13,
  "timeTaken": 1307,
  "changeHistory": [
    "0d47d283a611b10cb7a842712cb01fa0c043bdc4",
    "ada9c2c410c15e95d0a21ea2941986195606aad8",
    "2a0147f8f698f22e61281c06691107e24a2f139c"
  ],
  "changeHistoryShort": {
    "0d47d283a611b10cb7a842712cb01fa0c043bdc4": "Ybodychange",
    "ada9c2c410c15e95d0a21ea2941986195606aad8": "Ybodychange",
    "2a0147f8f698f22e61281c06691107e24a2f139c": "Yintroduced"
  },
  "changeHistoryDetails": {
    "0d47d283a611b10cb7a842712cb01fa0c043bdc4": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-10848. Cleanup calling of sun.security.krb5.Config.\n",
      "commitDate": "07/04/19 6:02 PM",
      "commitName": "0d47d283a611b10cb7a842712cb01fa0c043bdc4",
      "commitAuthor": "Akira Ajisaka",
      "commitDateOld": "15/01/19 9:16 PM",
      "commitNameOld": "ff61931f91ef85388270fd9743f002a8311a9ea0",
      "commitAuthorOld": "Xiaoyu Yao",
      "daysBetweenCommits": 81.82,
      "commitsBetweenForRepo": 668,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,7 @@\n-  public static String getDefaultRealm() \n-      throws ClassNotFoundException, NoSuchMethodException, \n-      IllegalArgumentException, IllegalAccessException, \n+  public static String getDefaultRealm()\n+      throws ClassNotFoundException, NoSuchMethodException,\n+      IllegalArgumentException, IllegalAccessException,\n       InvocationTargetException {\n-    Object kerbConf;\n-    Class\u003c?\u003e classRef;\n-    Method getInstanceMethod;\n-    Method getDefaultRealmMethod;\n-    if (IBM_JAVA) {\n-      classRef \u003d Class.forName(\"com.ibm.security.krb5.internal.Config\");\n-    } else {\n-      classRef \u003d Class.forName(\"sun.security.krb5.Config\");\n-    }\n-    getInstanceMethod \u003d classRef.getMethod(\"getInstance\", new Class[0]);\n-    kerbConf \u003d getInstanceMethod.invoke(classRef, new Object[0]);\n-    getDefaultRealmMethod \u003d classRef.getDeclaredMethod(\"getDefaultRealm\",\n-         new Class[0]);\n-    return (String)getDefaultRealmMethod.invoke(kerbConf, new Object[0]);\n+    // Any name is okay.\n+    return new KerberosPrincipal(\"tmp\", 1).getRealm();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static String getDefaultRealm()\n      throws ClassNotFoundException, NoSuchMethodException,\n      IllegalArgumentException, IllegalAccessException,\n      InvocationTargetException {\n    // Any name is okay.\n    return new KerberosPrincipal(\"tmp\", 1).getRealm();\n  }",
      "path": "hadoop-common-project/hadoop-auth/src/main/java/org/apache/hadoop/security/authentication/util/KerberosUtil.java",
      "extendedDetails": {}
    },
    "ada9c2c410c15e95d0a21ea2941986195606aad8": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-12617. SPNEGO authentication request to non-default realm gets default realm name inserted in target server principal. (mattf)\n",
      "commitDate": "08/12/15 5:27 PM",
      "commitName": "ada9c2c410c15e95d0a21ea2941986195606aad8",
      "commitAuthor": "mattf",
      "commitDateOld": "09/12/14 3:15 AM",
      "commitNameOld": "f71eb51ab8109c14e8e921751dd5de603bdf2bde",
      "commitAuthorOld": "Steve Loughran",
      "daysBetweenCommits": 364.59,
      "commitsBetweenForRepo": 2974,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,19 @@\n   public static String getDefaultRealm() \n       throws ClassNotFoundException, NoSuchMethodException, \n       IllegalArgumentException, IllegalAccessException, \n       InvocationTargetException {\n     Object kerbConf;\n     Class\u003c?\u003e classRef;\n     Method getInstanceMethod;\n     Method getDefaultRealmMethod;\n-    if (System.getProperty(\"java.vendor\").contains(\"IBM\")) {\n+    if (IBM_JAVA) {\n       classRef \u003d Class.forName(\"com.ibm.security.krb5.internal.Config\");\n     } else {\n       classRef \u003d Class.forName(\"sun.security.krb5.Config\");\n     }\n     getInstanceMethod \u003d classRef.getMethod(\"getInstance\", new Class[0]);\n     kerbConf \u003d getInstanceMethod.invoke(classRef, new Object[0]);\n     getDefaultRealmMethod \u003d classRef.getDeclaredMethod(\"getDefaultRealm\",\n          new Class[0]);\n     return (String)getDefaultRealmMethod.invoke(kerbConf, new Object[0]);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static String getDefaultRealm() \n      throws ClassNotFoundException, NoSuchMethodException, \n      IllegalArgumentException, IllegalAccessException, \n      InvocationTargetException {\n    Object kerbConf;\n    Class\u003c?\u003e classRef;\n    Method getInstanceMethod;\n    Method getDefaultRealmMethod;\n    if (IBM_JAVA) {\n      classRef \u003d Class.forName(\"com.ibm.security.krb5.internal.Config\");\n    } else {\n      classRef \u003d Class.forName(\"sun.security.krb5.Config\");\n    }\n    getInstanceMethod \u003d classRef.getMethod(\"getInstance\", new Class[0]);\n    kerbConf \u003d getInstanceMethod.invoke(classRef, new Object[0]);\n    getDefaultRealmMethod \u003d classRef.getDeclaredMethod(\"getDefaultRealm\",\n         new Class[0]);\n    return (String)getDefaultRealmMethod.invoke(kerbConf, new Object[0]);\n  }",
      "path": "hadoop-common-project/hadoop-auth/src/main/java/org/apache/hadoop/security/authentication/util/KerberosUtil.java",
      "extendedDetails": {}
    },
    "2a0147f8f698f22e61281c06691107e24a2f139c": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-6941. Adds support for building Hadoop with IBM\u0027s JDK. Contributed by Stephen Watt, Eli Collins and Devaraj Das.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1301308 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "15/03/12 6:45 PM",
      "commitName": "2a0147f8f698f22e61281c06691107e24a2f139c",
      "commitAuthor": "Devaraj Das",
      "diff": "@@ -0,0 +1,19 @@\n+  public static String getDefaultRealm() \n+      throws ClassNotFoundException, NoSuchMethodException, \n+      IllegalArgumentException, IllegalAccessException, \n+      InvocationTargetException {\n+    Object kerbConf;\n+    Class\u003c?\u003e classRef;\n+    Method getInstanceMethod;\n+    Method getDefaultRealmMethod;\n+    if (System.getProperty(\"java.vendor\").contains(\"IBM\")) {\n+      classRef \u003d Class.forName(\"com.ibm.security.krb5.internal.Config\");\n+    } else {\n+      classRef \u003d Class.forName(\"sun.security.krb5.Config\");\n+    }\n+    getInstanceMethod \u003d classRef.getMethod(\"getInstance\", new Class[0]);\n+    kerbConf \u003d getInstanceMethod.invoke(classRef, new Object[0]);\n+    getDefaultRealmMethod \u003d classRef.getDeclaredMethod(\"getDefaultRealm\",\n+         new Class[0]);\n+    return (String)getDefaultRealmMethod.invoke(kerbConf, new Object[0]);\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public static String getDefaultRealm() \n      throws ClassNotFoundException, NoSuchMethodException, \n      IllegalArgumentException, IllegalAccessException, \n      InvocationTargetException {\n    Object kerbConf;\n    Class\u003c?\u003e classRef;\n    Method getInstanceMethod;\n    Method getDefaultRealmMethod;\n    if (System.getProperty(\"java.vendor\").contains(\"IBM\")) {\n      classRef \u003d Class.forName(\"com.ibm.security.krb5.internal.Config\");\n    } else {\n      classRef \u003d Class.forName(\"sun.security.krb5.Config\");\n    }\n    getInstanceMethod \u003d classRef.getMethod(\"getInstance\", new Class[0]);\n    kerbConf \u003d getInstanceMethod.invoke(classRef, new Object[0]);\n    getDefaultRealmMethod \u003d classRef.getDeclaredMethod(\"getDefaultRealm\",\n         new Class[0]);\n    return (String)getDefaultRealmMethod.invoke(kerbConf, new Object[0]);\n  }",
      "path": "hadoop-common-project/hadoop-auth/src/main/java/org/apache/hadoop/security/authentication/util/KerberosUtil.java"
    }
  }
}