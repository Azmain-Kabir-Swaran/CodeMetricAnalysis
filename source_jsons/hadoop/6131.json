{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "FSEditLog.java",
  "functionName": "getTotalSyncCount",
  "functionId": "getTotalSyncCount",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSEditLog.java",
  "functionStartLine": 1874,
  "functionEndLine": 1887,
  "numCommitsSeen": 141,
  "timeTaken": 3339,
  "changeHistory": [
    "e0fa49234fd37aca88e1caa95bac77bca192bae4",
    "f97a0f8c2cdad0668a3892319f6969fafc2f04cd",
    "3b00eaea256d252be3361a7d9106b88756fcb9ba",
    "9c3571ea607f0953487464844ed0d46fdb3e9f90"
  ],
  "changeHistoryShort": {
    "e0fa49234fd37aca88e1caa95bac77bca192bae4": "Ymultichange(Ymodifierchange,Ybodychange)",
    "f97a0f8c2cdad0668a3892319f6969fafc2f04cd": "Ymodifierchange",
    "3b00eaea256d252be3361a7d9106b88756fcb9ba": "Ybodychange",
    "9c3571ea607f0953487464844ed0d46fdb3e9f90": "Yintroduced"
  },
  "changeHistoryDetails": {
    "e0fa49234fd37aca88e1caa95bac77bca192bae4": {
      "type": "Ymultichange(Ymodifierchange,Ybodychange)",
      "commitMessage": "HDFS-11180. Intermittent deadlock in NameNode when failover happens.\n",
      "commitDate": "01/12/16 6:08 AM",
      "commitName": "e0fa49234fd37aca88e1caa95bac77bca192bae4",
      "commitAuthor": "Akira Ajisaka",
      "subchanges": [
        {
          "type": "Ymodifierchange",
          "commitMessage": "HDFS-11180. Intermittent deadlock in NameNode when failover happens.\n",
          "commitDate": "01/12/16 6:08 AM",
          "commitName": "e0fa49234fd37aca88e1caa95bac77bca192bae4",
          "commitAuthor": "Akira Ajisaka",
          "commitDateOld": "27/07/16 5:55 PM",
          "commitNameOld": "098ec2b11ff3f677eb823f75b147a1ac8dbf959e",
          "commitAuthorOld": "Andrew Wang",
          "daysBetweenCommits": 126.55,
          "commitsBetweenForRepo": 925,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,7 +1,14 @@\n-  public synchronized long getTotalSyncCount() {\n-    if (editLogStream !\u003d null) {\n-      return editLogStream.getNumSync();\n-    } else {\n+  public long getTotalSyncCount() {\n+    // Avoid NPE as possible.\n+    if (editLogStream \u003d\u003d null) {\n       return 0;\n     }\n+    long count \u003d 0;\n+    try {\n+      count \u003d editLogStream.getNumSync();\n+    } catch (NullPointerException ignore) {\n+      // This method is used for metrics, so we don\u0027t synchronize it.\n+      // Therefore NPE can happen even if there is a null check before.\n+    }\n+    return count;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public long getTotalSyncCount() {\n    // Avoid NPE as possible.\n    if (editLogStream \u003d\u003d null) {\n      return 0;\n    }\n    long count \u003d 0;\n    try {\n      count \u003d editLogStream.getNumSync();\n    } catch (NullPointerException ignore) {\n      // This method is used for metrics, so we don\u0027t synchronize it.\n      // Therefore NPE can happen even if there is a null check before.\n    }\n    return count;\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSEditLog.java",
          "extendedDetails": {
            "oldValue": "[public, synchronized]",
            "newValue": "[public]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-11180. Intermittent deadlock in NameNode when failover happens.\n",
          "commitDate": "01/12/16 6:08 AM",
          "commitName": "e0fa49234fd37aca88e1caa95bac77bca192bae4",
          "commitAuthor": "Akira Ajisaka",
          "commitDateOld": "27/07/16 5:55 PM",
          "commitNameOld": "098ec2b11ff3f677eb823f75b147a1ac8dbf959e",
          "commitAuthorOld": "Andrew Wang",
          "daysBetweenCommits": 126.55,
          "commitsBetweenForRepo": 925,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,7 +1,14 @@\n-  public synchronized long getTotalSyncCount() {\n-    if (editLogStream !\u003d null) {\n-      return editLogStream.getNumSync();\n-    } else {\n+  public long getTotalSyncCount() {\n+    // Avoid NPE as possible.\n+    if (editLogStream \u003d\u003d null) {\n       return 0;\n     }\n+    long count \u003d 0;\n+    try {\n+      count \u003d editLogStream.getNumSync();\n+    } catch (NullPointerException ignore) {\n+      // This method is used for metrics, so we don\u0027t synchronize it.\n+      // Therefore NPE can happen even if there is a null check before.\n+    }\n+    return count;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public long getTotalSyncCount() {\n    // Avoid NPE as possible.\n    if (editLogStream \u003d\u003d null) {\n      return 0;\n    }\n    long count \u003d 0;\n    try {\n      count \u003d editLogStream.getNumSync();\n    } catch (NullPointerException ignore) {\n      // This method is used for metrics, so we don\u0027t synchronize it.\n      // Therefore NPE can happen even if there is a null check before.\n    }\n    return count;\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSEditLog.java",
          "extendedDetails": {}
        }
      ]
    },
    "f97a0f8c2cdad0668a3892319f6969fafc2f04cd": {
      "type": "Ymodifierchange",
      "commitMessage": "HDFS-8969. Clean up findbugs warnings for HDFS-8823 and HDFS-8932. Contributed by Anu Engineer.\n",
      "commitDate": "27/08/15 1:03 PM",
      "commitName": "f97a0f8c2cdad0668a3892319f6969fafc2f04cd",
      "commitAuthor": "Haohui Mai",
      "commitDateOld": "24/08/15 4:56 PM",
      "commitNameOld": "3b00eaea256d252be3361a7d9106b88756fcb9ba",
      "commitAuthorOld": "Xiaoyu Yao",
      "daysBetweenCommits": 2.84,
      "commitsBetweenForRepo": 14,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,7 +1,7 @@\n-  public long getTotalSyncCount() {\n+  public synchronized long getTotalSyncCount() {\n     if (editLogStream !\u003d null) {\n       return editLogStream.getNumSync();\n     } else {\n       return 0;\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public synchronized long getTotalSyncCount() {\n    if (editLogStream !\u003d null) {\n      return editLogStream.getNumSync();\n    } else {\n      return 0;\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSEditLog.java",
      "extendedDetails": {
        "oldValue": "[public]",
        "newValue": "[public, synchronized]"
      }
    },
    "3b00eaea256d252be3361a7d9106b88756fcb9ba": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-8932. NPE thrown in NameNode when try to get TotalSyncCount metric before editLogStream initialization. Contributed by Surendra Singh Lilhore\n",
      "commitDate": "24/08/15 4:56 PM",
      "commitName": "3b00eaea256d252be3361a7d9106b88756fcb9ba",
      "commitAuthor": "Xiaoyu Yao",
      "commitDateOld": "19/08/15 9:42 AM",
      "commitNameOld": "9c3571ea607f0953487464844ed0d46fdb3e9f90",
      "commitAuthorOld": "Arpit Agarwal",
      "daysBetweenCommits": 5.3,
      "commitsBetweenForRepo": 29,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,3 +1,7 @@\n   public long getTotalSyncCount() {\n-    return editLogStream.getNumSync();\n+    if (editLogStream !\u003d null) {\n+      return editLogStream.getNumSync();\n+    } else {\n+      return 0;\n+    }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public long getTotalSyncCount() {\n    if (editLogStream !\u003d null) {\n      return editLogStream.getNumSync();\n    } else {\n      return 0;\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSEditLog.java",
      "extendedDetails": {}
    },
    "9c3571ea607f0953487464844ed0d46fdb3e9f90": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-8911. NameNode Metric : Add Editlog counters as a JMX metric. (Contributed by Anu Engineer)\n",
      "commitDate": "19/08/15 9:42 AM",
      "commitName": "9c3571ea607f0953487464844ed0d46fdb3e9f90",
      "commitAuthor": "Arpit Agarwal",
      "diff": "@@ -0,0 +1,3 @@\n+  public long getTotalSyncCount() {\n+    return editLogStream.getNumSync();\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public long getTotalSyncCount() {\n    return editLogStream.getNumSync();\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSEditLog.java"
    }
  }
}