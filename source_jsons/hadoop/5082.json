{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "FSImageFormatPBSnapshot.java",
  "functionName": "buildINodeReference",
  "functionId": "buildINodeReference___ref-INodeReference(modifiers-final)__refIndex-long(modifiers-final)",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/FSImageFormatPBSnapshot.java",
  "functionStartLine": 487,
  "functionEndLine": 509,
  "numCommitsSeen": 67,
  "timeTaken": 5300,
  "changeHistory": [
    "a991e899fb9f98d2089f37ac9ac7c485d3bbb959",
    "3a61d25457606b93f7e99a48fe8f66984f4084b0",
    "2624b20291629b4565ea45590b66f2c38f96df67",
    "a2edb11b68ae01a44092cb14ac2717a6aad93305"
  ],
  "changeHistoryShort": {
    "a991e899fb9f98d2089f37ac9ac7c485d3bbb959": "Ymultichange(Yparameterchange,Ybodychange,Yparametermetachange)",
    "3a61d25457606b93f7e99a48fe8f66984f4084b0": "Ybodychange",
    "2624b20291629b4565ea45590b66f2c38f96df67": "Ymultichange(Ymovefromfile,Yreturntypechange,Ymodifierchange,Ybodychange)",
    "a2edb11b68ae01a44092cb14ac2717a6aad93305": "Yintroduced"
  },
  "changeHistoryDetails": {
    "a991e899fb9f98d2089f37ac9ac7c485d3bbb959": {
      "type": "Ymultichange(Yparameterchange,Ybodychange,Yparametermetachange)",
      "commitMessage": "HDFS-13314. NameNode should optionally exit if it detects FsImage corruption. Contributed by Arpit Agarwal.\n",
      "commitDate": "28/03/18 12:49 PM",
      "commitName": "a991e899fb9f98d2089f37ac9ac7c485d3bbb959",
      "commitAuthor": "Arpit Agarwal",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-13314. NameNode should optionally exit if it detects FsImage corruption. Contributed by Arpit Agarwal.\n",
          "commitDate": "28/03/18 12:49 PM",
          "commitName": "a991e899fb9f98d2089f37ac9ac7c485d3bbb959",
          "commitAuthor": "Arpit Agarwal",
          "commitDateOld": "14/03/18 9:42 AM",
          "commitNameOld": "4c57fb0cd9344290a9f4f6422c1457d69465eec7",
          "commitAuthorOld": "Arpit Agarwal",
          "daysBetweenCommits": 14.13,
          "commitsBetweenForRepo": 223,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,13 +1,23 @@\n     private INodeReferenceSection.INodeReference.Builder buildINodeReference(\n-        INodeReference ref) throws IOException {\n+        final INodeReference ref, final long refIndex) throws IOException {\n       INodeReferenceSection.INodeReference.Builder rb \u003d\n           INodeReferenceSection.INodeReference.newBuilder().\n             setReferredId(ref.getId());\n       if (ref instanceof WithName) {\n         rb.setLastSnapshotId(((WithName) ref).getLastSnapshotId()).setName(\n             ByteString.copyFrom(ref.getLocalNameBytes()));\n       } else if (ref instanceof DstReference) {\n         rb.setDstSnapshotId(ref.getDstSnapshotId());\n       }\n+\n+      if (fsn.getFSDirectory().getInode(ref.getId()) \u003d\u003d null) {\n+        FSImage.LOG.error(\n+            \"FSImageFormatPBSnapshot: Missing referred INodeId \" +\n+            ref.getId() + \" for INodeReference index \" + refIndex +\n+            \"; path\u003d\" + ref.getFullPathName() +\n+            \"; parent\u003d\" + (ref.getParent() \u003d\u003d null ? \"null\" :\n+                ref.getParent().getFullPathName()));\n+        ++numImageErrors;\n+      }\n       return rb;\n     }\n\\ No newline at end of file\n",
          "actualSource": "    private INodeReferenceSection.INodeReference.Builder buildINodeReference(\n        final INodeReference ref, final long refIndex) throws IOException {\n      INodeReferenceSection.INodeReference.Builder rb \u003d\n          INodeReferenceSection.INodeReference.newBuilder().\n            setReferredId(ref.getId());\n      if (ref instanceof WithName) {\n        rb.setLastSnapshotId(((WithName) ref).getLastSnapshotId()).setName(\n            ByteString.copyFrom(ref.getLocalNameBytes()));\n      } else if (ref instanceof DstReference) {\n        rb.setDstSnapshotId(ref.getDstSnapshotId());\n      }\n\n      if (fsn.getFSDirectory().getInode(ref.getId()) \u003d\u003d null) {\n        FSImage.LOG.error(\n            \"FSImageFormatPBSnapshot: Missing referred INodeId \" +\n            ref.getId() + \" for INodeReference index \" + refIndex +\n            \"; path\u003d\" + ref.getFullPathName() +\n            \"; parent\u003d\" + (ref.getParent() \u003d\u003d null ? \"null\" :\n                ref.getParent().getFullPathName()));\n        ++numImageErrors;\n      }\n      return rb;\n    }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/FSImageFormatPBSnapshot.java",
          "extendedDetails": {
            "oldValue": "[ref-INodeReference]",
            "newValue": "[ref-INodeReference(modifiers-final), refIndex-long(modifiers-final)]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-13314. NameNode should optionally exit if it detects FsImage corruption. Contributed by Arpit Agarwal.\n",
          "commitDate": "28/03/18 12:49 PM",
          "commitName": "a991e899fb9f98d2089f37ac9ac7c485d3bbb959",
          "commitAuthor": "Arpit Agarwal",
          "commitDateOld": "14/03/18 9:42 AM",
          "commitNameOld": "4c57fb0cd9344290a9f4f6422c1457d69465eec7",
          "commitAuthorOld": "Arpit Agarwal",
          "daysBetweenCommits": 14.13,
          "commitsBetweenForRepo": 223,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,13 +1,23 @@\n     private INodeReferenceSection.INodeReference.Builder buildINodeReference(\n-        INodeReference ref) throws IOException {\n+        final INodeReference ref, final long refIndex) throws IOException {\n       INodeReferenceSection.INodeReference.Builder rb \u003d\n           INodeReferenceSection.INodeReference.newBuilder().\n             setReferredId(ref.getId());\n       if (ref instanceof WithName) {\n         rb.setLastSnapshotId(((WithName) ref).getLastSnapshotId()).setName(\n             ByteString.copyFrom(ref.getLocalNameBytes()));\n       } else if (ref instanceof DstReference) {\n         rb.setDstSnapshotId(ref.getDstSnapshotId());\n       }\n+\n+      if (fsn.getFSDirectory().getInode(ref.getId()) \u003d\u003d null) {\n+        FSImage.LOG.error(\n+            \"FSImageFormatPBSnapshot: Missing referred INodeId \" +\n+            ref.getId() + \" for INodeReference index \" + refIndex +\n+            \"; path\u003d\" + ref.getFullPathName() +\n+            \"; parent\u003d\" + (ref.getParent() \u003d\u003d null ? \"null\" :\n+                ref.getParent().getFullPathName()));\n+        ++numImageErrors;\n+      }\n       return rb;\n     }\n\\ No newline at end of file\n",
          "actualSource": "    private INodeReferenceSection.INodeReference.Builder buildINodeReference(\n        final INodeReference ref, final long refIndex) throws IOException {\n      INodeReferenceSection.INodeReference.Builder rb \u003d\n          INodeReferenceSection.INodeReference.newBuilder().\n            setReferredId(ref.getId());\n      if (ref instanceof WithName) {\n        rb.setLastSnapshotId(((WithName) ref).getLastSnapshotId()).setName(\n            ByteString.copyFrom(ref.getLocalNameBytes()));\n      } else if (ref instanceof DstReference) {\n        rb.setDstSnapshotId(ref.getDstSnapshotId());\n      }\n\n      if (fsn.getFSDirectory().getInode(ref.getId()) \u003d\u003d null) {\n        FSImage.LOG.error(\n            \"FSImageFormatPBSnapshot: Missing referred INodeId \" +\n            ref.getId() + \" for INodeReference index \" + refIndex +\n            \"; path\u003d\" + ref.getFullPathName() +\n            \"; parent\u003d\" + (ref.getParent() \u003d\u003d null ? \"null\" :\n                ref.getParent().getFullPathName()));\n        ++numImageErrors;\n      }\n      return rb;\n    }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/FSImageFormatPBSnapshot.java",
          "extendedDetails": {}
        },
        {
          "type": "Yparametermetachange",
          "commitMessage": "HDFS-13314. NameNode should optionally exit if it detects FsImage corruption. Contributed by Arpit Agarwal.\n",
          "commitDate": "28/03/18 12:49 PM",
          "commitName": "a991e899fb9f98d2089f37ac9ac7c485d3bbb959",
          "commitAuthor": "Arpit Agarwal",
          "commitDateOld": "14/03/18 9:42 AM",
          "commitNameOld": "4c57fb0cd9344290a9f4f6422c1457d69465eec7",
          "commitAuthorOld": "Arpit Agarwal",
          "daysBetweenCommits": 14.13,
          "commitsBetweenForRepo": 223,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,13 +1,23 @@\n     private INodeReferenceSection.INodeReference.Builder buildINodeReference(\n-        INodeReference ref) throws IOException {\n+        final INodeReference ref, final long refIndex) throws IOException {\n       INodeReferenceSection.INodeReference.Builder rb \u003d\n           INodeReferenceSection.INodeReference.newBuilder().\n             setReferredId(ref.getId());\n       if (ref instanceof WithName) {\n         rb.setLastSnapshotId(((WithName) ref).getLastSnapshotId()).setName(\n             ByteString.copyFrom(ref.getLocalNameBytes()));\n       } else if (ref instanceof DstReference) {\n         rb.setDstSnapshotId(ref.getDstSnapshotId());\n       }\n+\n+      if (fsn.getFSDirectory().getInode(ref.getId()) \u003d\u003d null) {\n+        FSImage.LOG.error(\n+            \"FSImageFormatPBSnapshot: Missing referred INodeId \" +\n+            ref.getId() + \" for INodeReference index \" + refIndex +\n+            \"; path\u003d\" + ref.getFullPathName() +\n+            \"; parent\u003d\" + (ref.getParent() \u003d\u003d null ? \"null\" :\n+                ref.getParent().getFullPathName()));\n+        ++numImageErrors;\n+      }\n       return rb;\n     }\n\\ No newline at end of file\n",
          "actualSource": "    private INodeReferenceSection.INodeReference.Builder buildINodeReference(\n        final INodeReference ref, final long refIndex) throws IOException {\n      INodeReferenceSection.INodeReference.Builder rb \u003d\n          INodeReferenceSection.INodeReference.newBuilder().\n            setReferredId(ref.getId());\n      if (ref instanceof WithName) {\n        rb.setLastSnapshotId(((WithName) ref).getLastSnapshotId()).setName(\n            ByteString.copyFrom(ref.getLocalNameBytes()));\n      } else if (ref instanceof DstReference) {\n        rb.setDstSnapshotId(ref.getDstSnapshotId());\n      }\n\n      if (fsn.getFSDirectory().getInode(ref.getId()) \u003d\u003d null) {\n        FSImage.LOG.error(\n            \"FSImageFormatPBSnapshot: Missing referred INodeId \" +\n            ref.getId() + \" for INodeReference index \" + refIndex +\n            \"; path\u003d\" + ref.getFullPathName() +\n            \"; parent\u003d\" + (ref.getParent() \u003d\u003d null ? \"null\" :\n                ref.getParent().getFullPathName()));\n        ++numImageErrors;\n      }\n      return rb;\n    }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/FSImageFormatPBSnapshot.java",
          "extendedDetails": {
            "oldValue": "[ref-INodeReference]",
            "newValue": "[ref-INodeReference(modifiers-final), refIndex-long(modifiers-final)]"
          }
        }
      ]
    },
    "3a61d25457606b93f7e99a48fe8f66984f4084b0": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-6125. Cleanup unnecessary cast in HDFS code base. Contributed by Suresh Srinivas.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1581242 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/03/14 10:51 PM",
      "commitName": "3a61d25457606b93f7e99a48fe8f66984f4084b0",
      "commitAuthor": "Suresh Srinivas",
      "commitDateOld": "19/02/14 9:24 AM",
      "commitNameOld": "909eb7e4f1bf40d910555ab8c1d4fe1a46ef47bd",
      "commitAuthorOld": "",
      "daysBetweenCommits": 33.52,
      "commitsBetweenForRepo": 316,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,13 +1,13 @@\n     private INodeReferenceSection.INodeReference.Builder buildINodeReference(\n         INodeReference ref) throws IOException {\n       INodeReferenceSection.INodeReference.Builder rb \u003d\n           INodeReferenceSection.INodeReference.newBuilder().\n             setReferredId(ref.getId());\n       if (ref instanceof WithName) {\n         rb.setLastSnapshotId(((WithName) ref).getLastSnapshotId()).setName(\n             ByteString.copyFrom(ref.getLocalNameBytes()));\n       } else if (ref instanceof DstReference) {\n-        rb.setDstSnapshotId(((DstReference) ref).getDstSnapshotId());\n+        rb.setDstSnapshotId(ref.getDstSnapshotId());\n       }\n       return rb;\n     }\n\\ No newline at end of file\n",
      "actualSource": "    private INodeReferenceSection.INodeReference.Builder buildINodeReference(\n        INodeReference ref) throws IOException {\n      INodeReferenceSection.INodeReference.Builder rb \u003d\n          INodeReferenceSection.INodeReference.newBuilder().\n            setReferredId(ref.getId());\n      if (ref instanceof WithName) {\n        rb.setLastSnapshotId(((WithName) ref).getLastSnapshotId()).setName(\n            ByteString.copyFrom(ref.getLocalNameBytes()));\n      } else if (ref instanceof DstReference) {\n        rb.setDstSnapshotId(ref.getDstSnapshotId());\n      }\n      return rb;\n    }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/FSImageFormatPBSnapshot.java",
      "extendedDetails": {}
    },
    "2624b20291629b4565ea45590b66f2c38f96df67": {
      "type": "Ymultichange(Ymovefromfile,Yreturntypechange,Ymodifierchange,Ybodychange)",
      "commitMessage": "HDFS-5847. Consolidate INodeReference into a separate section. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1567812 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "12/02/14 4:00 PM",
      "commitName": "2624b20291629b4565ea45590b66f2c38f96df67",
      "commitAuthor": "Jing Zhao",
      "subchanges": [
        {
          "type": "Ymovefromfile",
          "commitMessage": "HDFS-5847. Consolidate INodeReference into a separate section. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1567812 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "12/02/14 4:00 PM",
          "commitName": "2624b20291629b4565ea45590b66f2c38f96df67",
          "commitAuthor": "Jing Zhao",
          "commitDateOld": "12/02/14 3:57 PM",
          "commitNameOld": "256adb2106cb838f3aff21f5a77f2973807d0df3",
          "commitAuthorOld": "Brandon Li",
          "daysBetweenCommits": 0.0,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,12 +1,13 @@\n-    public static INodeSection.INodeReference.Builder buildINodeReference(\n+    private INodeReferenceSection.INodeReference.Builder buildINodeReference(\n         INodeReference ref) throws IOException {\n-      INodeSection.INodeReference.Builder rb \u003d INodeSection.INodeReference\n-          .newBuilder().setReferredId(ref.getId());\n+      INodeReferenceSection.INodeReference.Builder rb \u003d\n+          INodeReferenceSection.INodeReference.newBuilder().\n+            setReferredId(ref.getId());\n       if (ref instanceof WithName) {\n         rb.setLastSnapshotId(((WithName) ref).getLastSnapshotId()).setName(\n             ByteString.copyFrom(ref.getLocalNameBytes()));\n       } else if (ref instanceof DstReference) {\n         rb.setDstSnapshotId(((DstReference) ref).getDstSnapshotId());\n       }\n       return rb;\n     }\n\\ No newline at end of file\n",
          "actualSource": "    private INodeReferenceSection.INodeReference.Builder buildINodeReference(\n        INodeReference ref) throws IOException {\n      INodeReferenceSection.INodeReference.Builder rb \u003d\n          INodeReferenceSection.INodeReference.newBuilder().\n            setReferredId(ref.getId());\n      if (ref instanceof WithName) {\n        rb.setLastSnapshotId(((WithName) ref).getLastSnapshotId()).setName(\n            ByteString.copyFrom(ref.getLocalNameBytes()));\n      } else if (ref instanceof DstReference) {\n        rb.setDstSnapshotId(((DstReference) ref).getDstSnapshotId());\n      }\n      return rb;\n    }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/FSImageFormatPBSnapshot.java",
          "extendedDetails": {
            "oldPath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSImageFormatPBINode.java",
            "newPath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/FSImageFormatPBSnapshot.java",
            "oldMethodName": "buildINodeReference",
            "newMethodName": "buildINodeReference"
          }
        },
        {
          "type": "Yreturntypechange",
          "commitMessage": "HDFS-5847. Consolidate INodeReference into a separate section. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1567812 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "12/02/14 4:00 PM",
          "commitName": "2624b20291629b4565ea45590b66f2c38f96df67",
          "commitAuthor": "Jing Zhao",
          "commitDateOld": "12/02/14 3:57 PM",
          "commitNameOld": "256adb2106cb838f3aff21f5a77f2973807d0df3",
          "commitAuthorOld": "Brandon Li",
          "daysBetweenCommits": 0.0,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,12 +1,13 @@\n-    public static INodeSection.INodeReference.Builder buildINodeReference(\n+    private INodeReferenceSection.INodeReference.Builder buildINodeReference(\n         INodeReference ref) throws IOException {\n-      INodeSection.INodeReference.Builder rb \u003d INodeSection.INodeReference\n-          .newBuilder().setReferredId(ref.getId());\n+      INodeReferenceSection.INodeReference.Builder rb \u003d\n+          INodeReferenceSection.INodeReference.newBuilder().\n+            setReferredId(ref.getId());\n       if (ref instanceof WithName) {\n         rb.setLastSnapshotId(((WithName) ref).getLastSnapshotId()).setName(\n             ByteString.copyFrom(ref.getLocalNameBytes()));\n       } else if (ref instanceof DstReference) {\n         rb.setDstSnapshotId(((DstReference) ref).getDstSnapshotId());\n       }\n       return rb;\n     }\n\\ No newline at end of file\n",
          "actualSource": "    private INodeReferenceSection.INodeReference.Builder buildINodeReference(\n        INodeReference ref) throws IOException {\n      INodeReferenceSection.INodeReference.Builder rb \u003d\n          INodeReferenceSection.INodeReference.newBuilder().\n            setReferredId(ref.getId());\n      if (ref instanceof WithName) {\n        rb.setLastSnapshotId(((WithName) ref).getLastSnapshotId()).setName(\n            ByteString.copyFrom(ref.getLocalNameBytes()));\n      } else if (ref instanceof DstReference) {\n        rb.setDstSnapshotId(((DstReference) ref).getDstSnapshotId());\n      }\n      return rb;\n    }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/FSImageFormatPBSnapshot.java",
          "extendedDetails": {
            "oldValue": "INodeSection.INodeReference.Builder",
            "newValue": "INodeReferenceSection.INodeReference.Builder"
          }
        },
        {
          "type": "Ymodifierchange",
          "commitMessage": "HDFS-5847. Consolidate INodeReference into a separate section. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1567812 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "12/02/14 4:00 PM",
          "commitName": "2624b20291629b4565ea45590b66f2c38f96df67",
          "commitAuthor": "Jing Zhao",
          "commitDateOld": "12/02/14 3:57 PM",
          "commitNameOld": "256adb2106cb838f3aff21f5a77f2973807d0df3",
          "commitAuthorOld": "Brandon Li",
          "daysBetweenCommits": 0.0,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,12 +1,13 @@\n-    public static INodeSection.INodeReference.Builder buildINodeReference(\n+    private INodeReferenceSection.INodeReference.Builder buildINodeReference(\n         INodeReference ref) throws IOException {\n-      INodeSection.INodeReference.Builder rb \u003d INodeSection.INodeReference\n-          .newBuilder().setReferredId(ref.getId());\n+      INodeReferenceSection.INodeReference.Builder rb \u003d\n+          INodeReferenceSection.INodeReference.newBuilder().\n+            setReferredId(ref.getId());\n       if (ref instanceof WithName) {\n         rb.setLastSnapshotId(((WithName) ref).getLastSnapshotId()).setName(\n             ByteString.copyFrom(ref.getLocalNameBytes()));\n       } else if (ref instanceof DstReference) {\n         rb.setDstSnapshotId(((DstReference) ref).getDstSnapshotId());\n       }\n       return rb;\n     }\n\\ No newline at end of file\n",
          "actualSource": "    private INodeReferenceSection.INodeReference.Builder buildINodeReference(\n        INodeReference ref) throws IOException {\n      INodeReferenceSection.INodeReference.Builder rb \u003d\n          INodeReferenceSection.INodeReference.newBuilder().\n            setReferredId(ref.getId());\n      if (ref instanceof WithName) {\n        rb.setLastSnapshotId(((WithName) ref).getLastSnapshotId()).setName(\n            ByteString.copyFrom(ref.getLocalNameBytes()));\n      } else if (ref instanceof DstReference) {\n        rb.setDstSnapshotId(((DstReference) ref).getDstSnapshotId());\n      }\n      return rb;\n    }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/FSImageFormatPBSnapshot.java",
          "extendedDetails": {
            "oldValue": "[public, static]",
            "newValue": "[private]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-5847. Consolidate INodeReference into a separate section. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1567812 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "12/02/14 4:00 PM",
          "commitName": "2624b20291629b4565ea45590b66f2c38f96df67",
          "commitAuthor": "Jing Zhao",
          "commitDateOld": "12/02/14 3:57 PM",
          "commitNameOld": "256adb2106cb838f3aff21f5a77f2973807d0df3",
          "commitAuthorOld": "Brandon Li",
          "daysBetweenCommits": 0.0,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,12 +1,13 @@\n-    public static INodeSection.INodeReference.Builder buildINodeReference(\n+    private INodeReferenceSection.INodeReference.Builder buildINodeReference(\n         INodeReference ref) throws IOException {\n-      INodeSection.INodeReference.Builder rb \u003d INodeSection.INodeReference\n-          .newBuilder().setReferredId(ref.getId());\n+      INodeReferenceSection.INodeReference.Builder rb \u003d\n+          INodeReferenceSection.INodeReference.newBuilder().\n+            setReferredId(ref.getId());\n       if (ref instanceof WithName) {\n         rb.setLastSnapshotId(((WithName) ref).getLastSnapshotId()).setName(\n             ByteString.copyFrom(ref.getLocalNameBytes()));\n       } else if (ref instanceof DstReference) {\n         rb.setDstSnapshotId(((DstReference) ref).getDstSnapshotId());\n       }\n       return rb;\n     }\n\\ No newline at end of file\n",
          "actualSource": "    private INodeReferenceSection.INodeReference.Builder buildINodeReference(\n        INodeReference ref) throws IOException {\n      INodeReferenceSection.INodeReference.Builder rb \u003d\n          INodeReferenceSection.INodeReference.newBuilder().\n            setReferredId(ref.getId());\n      if (ref instanceof WithName) {\n        rb.setLastSnapshotId(((WithName) ref).getLastSnapshotId()).setName(\n            ByteString.copyFrom(ref.getLocalNameBytes()));\n      } else if (ref instanceof DstReference) {\n        rb.setDstSnapshotId(((DstReference) ref).getDstSnapshotId());\n      }\n      return rb;\n    }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/FSImageFormatPBSnapshot.java",
          "extendedDetails": {}
        }
      ]
    },
    "a2edb11b68ae01a44092cb14ac2717a6aad93305": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-5698. Use protobuf to serialize / deserialize FSImage. Contributed by Haohui Mai.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1566359 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "09/02/14 11:18 AM",
      "commitName": "a2edb11b68ae01a44092cb14ac2717a6aad93305",
      "commitAuthor": "Jing Zhao",
      "diff": "@@ -0,0 +1,12 @@\n+    public static INodeSection.INodeReference.Builder buildINodeReference(\n+        INodeReference ref) throws IOException {\n+      INodeSection.INodeReference.Builder rb \u003d INodeSection.INodeReference\n+          .newBuilder().setReferredId(ref.getId());\n+      if (ref instanceof WithName) {\n+        rb.setLastSnapshotId(((WithName) ref).getLastSnapshotId()).setName(\n+            ByteString.copyFrom(ref.getLocalNameBytes()));\n+      } else if (ref instanceof DstReference) {\n+        rb.setDstSnapshotId(((DstReference) ref).getDstSnapshotId());\n+      }\n+      return rb;\n+    }\n\\ No newline at end of file\n",
      "actualSource": "    public static INodeSection.INodeReference.Builder buildINodeReference(\n        INodeReference ref) throws IOException {\n      INodeSection.INodeReference.Builder rb \u003d INodeSection.INodeReference\n          .newBuilder().setReferredId(ref.getId());\n      if (ref instanceof WithName) {\n        rb.setLastSnapshotId(((WithName) ref).getLastSnapshotId()).setName(\n            ByteString.copyFrom(ref.getLocalNameBytes()));\n      } else if (ref instanceof DstReference) {\n        rb.setDstSnapshotId(((DstReference) ref).getDstSnapshotId());\n      }\n      return rb;\n    }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSImageFormatPBINode.java"
    }
  }
}