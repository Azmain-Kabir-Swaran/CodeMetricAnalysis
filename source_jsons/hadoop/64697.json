{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "S3AFileSystem.java",
  "functionName": "getFileChecksum",
  "functionId": "getFileChecksum___f-Path__length-long(modifiers-final)",
  "sourceFilePath": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AFileSystem.java",
  "functionStartLine": 4040,
  "functionEndLine": 4056,
  "numCommitsSeen": 141,
  "timeTaken": 4415,
  "changeHistory": [
    "6d0bffe17eadedd60d4599427248b0db4a7c5502",
    "7f783970364930cc461d1a73833bc58cdd10553e",
    "d7152332b32a575c3a92e3f4c44b95e58462528d",
    "dd05871b8b57303fe0b0c652e03257b59c191802",
    "c8ff0cc304f07bf793192291e0611b2fb4bcc4e3"
  ],
  "changeHistoryShort": {
    "6d0bffe17eadedd60d4599427248b0db4a7c5502": "Ybodychange",
    "7f783970364930cc461d1a73833bc58cdd10553e": "Ybodychange",
    "d7152332b32a575c3a92e3f4c44b95e58462528d": "Ybodychange",
    "dd05871b8b57303fe0b0c652e03257b59c191802": "Ybodychange",
    "c8ff0cc304f07bf793192291e0611b2fb4bcc4e3": "Yintroduced"
  },
  "changeHistoryDetails": {
    "6d0bffe17eadedd60d4599427248b0db4a7c5502": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-14556. S3A to support Delegation Tokens.\n\nContributed by Steve Loughran and Daryn Sharp.\n",
      "commitDate": "14/01/19 9:59 AM",
      "commitName": "6d0bffe17eadedd60d4599427248b0db4a7c5502",
      "commitAuthor": "Steve Loughran",
      "commitDateOld": "07/01/19 9:51 PM",
      "commitNameOld": "7f783970364930cc461d1a73833bc58cdd10553e",
      "commitAuthorOld": "Akira Ajisaka",
      "daysBetweenCommits": 6.51,
      "commitsBetweenForRepo": 32,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,21 +1,17 @@\n   public EtagChecksum getFileChecksum(Path f, final long length)\n       throws IOException {\n     Preconditions.checkArgument(length \u003e\u003d 0);\n     entryPoint(INVOCATION_GET_FILE_CHECKSUM);\n \n     if (getConf().getBoolean(ETAG_CHECKSUM_ENABLED,\n         ETAG_CHECKSUM_ENABLED_DEFAULT)) {\n       Path path \u003d qualify(f);\n       LOG.debug(\"getFileChecksum({})\", path);\n-      return once(\"getFileChecksum\", path.toString(),\n-          () -\u003e {\n-            // this always does a full HEAD to the object\n-            ObjectMetadata headers \u003d getObjectMetadata(path);\n-            String eTag \u003d headers.getETag();\n-            return eTag !\u003d null ? new EtagChecksum(eTag) : null;\n-          });\n+      ObjectMetadata headers \u003d getObjectMetadata(path);\n+      String eTag \u003d headers.getETag();\n+      return eTag !\u003d null ? new EtagChecksum(eTag) : null;\n     } else {\n       // disabled\n       return null;\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public EtagChecksum getFileChecksum(Path f, final long length)\n      throws IOException {\n    Preconditions.checkArgument(length \u003e\u003d 0);\n    entryPoint(INVOCATION_GET_FILE_CHECKSUM);\n\n    if (getConf().getBoolean(ETAG_CHECKSUM_ENABLED,\n        ETAG_CHECKSUM_ENABLED_DEFAULT)) {\n      Path path \u003d qualify(f);\n      LOG.debug(\"getFileChecksum({})\", path);\n      ObjectMetadata headers \u003d getObjectMetadata(path);\n      String eTag \u003d headers.getETag();\n      return eTag !\u003d null ? new EtagChecksum(eTag) : null;\n    } else {\n      // disabled\n      return null;\n    }\n  }",
      "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AFileSystem.java",
      "extendedDetails": {}
    },
    "7f783970364930cc461d1a73833bc58cdd10553e": {
      "type": "Ybodychange",
      "commitMessage": "Revert \"HADOOP-14556. S3A to support Delegation Tokens.\"\n\nThis reverts commit d7152332b32a575c3a92e3f4c44b95e58462528d.\n",
      "commitDate": "07/01/19 9:51 PM",
      "commitName": "7f783970364930cc461d1a73833bc58cdd10553e",
      "commitAuthor": "Akira Ajisaka",
      "commitDateOld": "07/01/19 5:18 AM",
      "commitNameOld": "d7152332b32a575c3a92e3f4c44b95e58462528d",
      "commitAuthorOld": "Steve Loughran",
      "daysBetweenCommits": 0.69,
      "commitsBetweenForRepo": 7,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,21 @@\n   public EtagChecksum getFileChecksum(Path f, final long length)\n       throws IOException {\n     Preconditions.checkArgument(length \u003e\u003d 0);\n     entryPoint(INVOCATION_GET_FILE_CHECKSUM);\n \n     if (getConf().getBoolean(ETAG_CHECKSUM_ENABLED,\n         ETAG_CHECKSUM_ENABLED_DEFAULT)) {\n       Path path \u003d qualify(f);\n       LOG.debug(\"getFileChecksum({})\", path);\n-      ObjectMetadata headers \u003d getObjectMetadata(path);\n-      String eTag \u003d headers.getETag();\n-      return eTag !\u003d null ? new EtagChecksum(eTag) : null;\n+      return once(\"getFileChecksum\", path.toString(),\n+          () -\u003e {\n+            // this always does a full HEAD to the object\n+            ObjectMetadata headers \u003d getObjectMetadata(path);\n+            String eTag \u003d headers.getETag();\n+            return eTag !\u003d null ? new EtagChecksum(eTag) : null;\n+          });\n     } else {\n       // disabled\n       return null;\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public EtagChecksum getFileChecksum(Path f, final long length)\n      throws IOException {\n    Preconditions.checkArgument(length \u003e\u003d 0);\n    entryPoint(INVOCATION_GET_FILE_CHECKSUM);\n\n    if (getConf().getBoolean(ETAG_CHECKSUM_ENABLED,\n        ETAG_CHECKSUM_ENABLED_DEFAULT)) {\n      Path path \u003d qualify(f);\n      LOG.debug(\"getFileChecksum({})\", path);\n      return once(\"getFileChecksum\", path.toString(),\n          () -\u003e {\n            // this always does a full HEAD to the object\n            ObjectMetadata headers \u003d getObjectMetadata(path);\n            String eTag \u003d headers.getETag();\n            return eTag !\u003d null ? new EtagChecksum(eTag) : null;\n          });\n    } else {\n      // disabled\n      return null;\n    }\n  }",
      "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AFileSystem.java",
      "extendedDetails": {}
    },
    "d7152332b32a575c3a92e3f4c44b95e58462528d": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-14556. S3A to support Delegation Tokens.\n\nContributed by Steve Loughran.\n",
      "commitDate": "07/01/19 5:18 AM",
      "commitName": "d7152332b32a575c3a92e3f4c44b95e58462528d",
      "commitAuthor": "Steve Loughran",
      "commitDateOld": "28/11/18 9:45 AM",
      "commitNameOld": "5d96b74f33ca716c9fe4fadb046f79ed488a3059",
      "commitAuthorOld": "Sean Mackrory",
      "daysBetweenCommits": 39.81,
      "commitsBetweenForRepo": 242,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,21 +1,17 @@\n   public EtagChecksum getFileChecksum(Path f, final long length)\n       throws IOException {\n     Preconditions.checkArgument(length \u003e\u003d 0);\n     entryPoint(INVOCATION_GET_FILE_CHECKSUM);\n \n     if (getConf().getBoolean(ETAG_CHECKSUM_ENABLED,\n         ETAG_CHECKSUM_ENABLED_DEFAULT)) {\n       Path path \u003d qualify(f);\n       LOG.debug(\"getFileChecksum({})\", path);\n-      return once(\"getFileChecksum\", path.toString(),\n-          () -\u003e {\n-            // this always does a full HEAD to the object\n-            ObjectMetadata headers \u003d getObjectMetadata(path);\n-            String eTag \u003d headers.getETag();\n-            return eTag !\u003d null ? new EtagChecksum(eTag) : null;\n-          });\n+      ObjectMetadata headers \u003d getObjectMetadata(path);\n+      String eTag \u003d headers.getETag();\n+      return eTag !\u003d null ? new EtagChecksum(eTag) : null;\n     } else {\n       // disabled\n       return null;\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public EtagChecksum getFileChecksum(Path f, final long length)\n      throws IOException {\n    Preconditions.checkArgument(length \u003e\u003d 0);\n    entryPoint(INVOCATION_GET_FILE_CHECKSUM);\n\n    if (getConf().getBoolean(ETAG_CHECKSUM_ENABLED,\n        ETAG_CHECKSUM_ENABLED_DEFAULT)) {\n      Path path \u003d qualify(f);\n      LOG.debug(\"getFileChecksum({})\", path);\n      ObjectMetadata headers \u003d getObjectMetadata(path);\n      String eTag \u003d headers.getETag();\n      return eTag !\u003d null ? new EtagChecksum(eTag) : null;\n    } else {\n      // disabled\n      return null;\n    }\n  }",
      "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AFileSystem.java",
      "extendedDetails": {}
    },
    "dd05871b8b57303fe0b0c652e03257b59c191802": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-15297. Make S3A etag \u003d\u003e checksum feature optional.\nContributed by Steve Loughran.\n",
      "commitDate": "12/03/18 7:01 AM",
      "commitName": "dd05871b8b57303fe0b0c652e03257b59c191802",
      "commitAuthor": "Steve Loughran",
      "commitDateOld": "07/03/18 10:51 AM",
      "commitNameOld": "e0307e53e2110cb6b418861a7471e97a013c16e2",
      "commitAuthorOld": "Steve Loughran",
      "daysBetweenCommits": 4.8,
      "commitsBetweenForRepo": 31,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,13 +1,21 @@\n   public EtagChecksum getFileChecksum(Path f, final long length)\n       throws IOException {\n     Preconditions.checkArgument(length \u003e\u003d 0);\n-    Path path \u003d qualify(f);\n-    LOG.debug(\"getFileChecksum({})\", path);\n-    return once(\"getFileChecksum\", path.toString(),\n-        () -\u003e {\n-          // this always does a full HEAD to the object\n-          ObjectMetadata headers \u003d getObjectMetadata(path);\n-          String eTag \u003d headers.getETag();\n-          return eTag !\u003d null ? new EtagChecksum(eTag) : null;\n-        });\n+    entryPoint(INVOCATION_GET_FILE_CHECKSUM);\n+\n+    if (getConf().getBoolean(ETAG_CHECKSUM_ENABLED,\n+        ETAG_CHECKSUM_ENABLED_DEFAULT)) {\n+      Path path \u003d qualify(f);\n+      LOG.debug(\"getFileChecksum({})\", path);\n+      return once(\"getFileChecksum\", path.toString(),\n+          () -\u003e {\n+            // this always does a full HEAD to the object\n+            ObjectMetadata headers \u003d getObjectMetadata(path);\n+            String eTag \u003d headers.getETag();\n+            return eTag !\u003d null ? new EtagChecksum(eTag) : null;\n+          });\n+    } else {\n+      // disabled\n+      return null;\n+    }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public EtagChecksum getFileChecksum(Path f, final long length)\n      throws IOException {\n    Preconditions.checkArgument(length \u003e\u003d 0);\n    entryPoint(INVOCATION_GET_FILE_CHECKSUM);\n\n    if (getConf().getBoolean(ETAG_CHECKSUM_ENABLED,\n        ETAG_CHECKSUM_ENABLED_DEFAULT)) {\n      Path path \u003d qualify(f);\n      LOG.debug(\"getFileChecksum({})\", path);\n      return once(\"getFileChecksum\", path.toString(),\n          () -\u003e {\n            // this always does a full HEAD to the object\n            ObjectMetadata headers \u003d getObjectMetadata(path);\n            String eTag \u003d headers.getETag();\n            return eTag !\u003d null ? new EtagChecksum(eTag) : null;\n          });\n    } else {\n      // disabled\n      return null;\n    }\n  }",
      "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AFileSystem.java",
      "extendedDetails": {}
    },
    "c8ff0cc304f07bf793192291e0611b2fb4bcc4e3": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-13282. S3 blob etags to be made visible in S3A status/getFileChecksum() calls.\nContributed by Steve Loughran\n",
      "commitDate": "21/12/17 6:58 AM",
      "commitName": "c8ff0cc304f07bf793192291e0611b2fb4bcc4e3",
      "commitAuthor": "Steve Loughran",
      "diff": "@@ -0,0 +1,13 @@\n+  public EtagChecksum getFileChecksum(Path f, final long length)\n+      throws IOException {\n+    Preconditions.checkArgument(length \u003e\u003d 0);\n+    Path path \u003d qualify(f);\n+    LOG.debug(\"getFileChecksum({})\", path);\n+    return once(\"getFileChecksum\", path.toString(),\n+        () -\u003e {\n+          // this always does a full HEAD to the object\n+          ObjectMetadata headers \u003d getObjectMetadata(path);\n+          String eTag \u003d headers.getETag();\n+          return eTag !\u003d null ? new EtagChecksum(eTag) : null;\n+        });\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public EtagChecksum getFileChecksum(Path f, final long length)\n      throws IOException {\n    Preconditions.checkArgument(length \u003e\u003d 0);\n    Path path \u003d qualify(f);\n    LOG.debug(\"getFileChecksum({})\", path);\n    return once(\"getFileChecksum\", path.toString(),\n        () -\u003e {\n          // this always does a full HEAD to the object\n          ObjectMetadata headers \u003d getObjectMetadata(path);\n          String eTag \u003d headers.getETag();\n          return eTag !\u003d null ? new EtagChecksum(eTag) : null;\n        });\n  }",
      "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AFileSystem.java"
    }
  }
}