{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "SecondaryNameNode.java",
  "functionName": "main",
  "functionId": "main___argv-String[]",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.java",
  "functionStartLine": 676,
  "functionEndLine": 709,
  "numCommitsSeen": 98,
  "timeTaken": 7865,
  "changeHistory": [
    "eca1a4bfe952fc184fe90dde50bac9b0e5293568",
    "2a4c7d4facabb8b99d6dcbf4ccfe2afedf4fd445",
    "6c8b6f3646b31a3e028704bc7fd78bf319f89f0a",
    "93972a332a9fc6390447fc5fc9785c98fb4c3344",
    "a1e6df6bc4e26a29a05d5d292f2a68bf8919c237",
    "6d4a0915676b8185a4727a10fcfeb40aa24cacc5",
    "5a5473b29f8892ac380b6d8c468d54a3a51f316e",
    "28e87740c5797e87a9038d7f151c8b21a5b04592",
    "231a52a7dfa73f7f302cc3bf671d433312373873",
    "f026d8bb1ba6f9b059db5526f1fb1261f818ffd0",
    "cdae6953e80e81693bb4c9eb38b62eaba3ac8cf9",
    "296b6c0063a319f4b80e8f62468be95f39d4f4e3",
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1",
    "d86f3183d93714ba078416af4f609d26376eadb0",
    "28e6a4e44a3e920dcaf858f9a74a6358226b3a63",
    "a196766ea07775f18ded69bd9e8d239f8cfd3ccc"
  ],
  "changeHistoryShort": {
    "eca1a4bfe952fc184fe90dde50bac9b0e5293568": "Ybodychange",
    "2a4c7d4facabb8b99d6dcbf4ccfe2afedf4fd445": "Ybodychange",
    "6c8b6f3646b31a3e028704bc7fd78bf319f89f0a": "Ybodychange",
    "93972a332a9fc6390447fc5fc9785c98fb4c3344": "Ybodychange",
    "a1e6df6bc4e26a29a05d5d292f2a68bf8919c237": "Ybodychange",
    "6d4a0915676b8185a4727a10fcfeb40aa24cacc5": "Ybodychange",
    "5a5473b29f8892ac380b6d8c468d54a3a51f316e": "Ybodychange",
    "28e87740c5797e87a9038d7f151c8b21a5b04592": "Ybodychange",
    "231a52a7dfa73f7f302cc3bf671d433312373873": "Ybodychange",
    "f026d8bb1ba6f9b059db5526f1fb1261f818ffd0": "Ybodychange",
    "cdae6953e80e81693bb4c9eb38b62eaba3ac8cf9": "Ybodychange",
    "296b6c0063a319f4b80e8f62468be95f39d4f4e3": "Ybodychange",
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1": "Yfilerename",
    "d86f3183d93714ba078416af4f609d26376eadb0": "Yfilerename",
    "28e6a4e44a3e920dcaf858f9a74a6358226b3a63": "Ybodychange",
    "a196766ea07775f18ded69bd9e8d239f8cfd3ccc": "Yintroduced"
  },
  "changeHistoryDetails": {
    "eca1a4bfe952fc184fe90dde50bac9b0e5293568": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-13695. Move logging to slf4j in HDFS package. Contributed by Ian Pickering.\n",
      "commitDate": "06/09/18 2:48 PM",
      "commitName": "eca1a4bfe952fc184fe90dde50bac9b0e5293568",
      "commitAuthor": "Giovanni Matteo Fumarola",
      "commitDateOld": "14/08/18 5:19 PM",
      "commitNameOld": "363bd16e314490e31758cc82de584e75cd8357cc",
      "commitAuthorOld": "Wei-Chiu Chuang",
      "daysBetweenCommits": 22.9,
      "commitsBetweenForRepo": 138,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,34 +1,34 @@\n   public static void main(String[] argv) throws Exception {\n     CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n     if (opts \u003d\u003d null) {\n-      LOG.fatal(\"Failed to parse options\");\n+      LOG.error(\"Failed to parse options\");\n       terminate(1);\n     } else if (opts.shouldPrintHelp()) {\n       opts.usage();\n       System.exit(0);\n     }\n \n     try {\n       StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n       Configuration tconf \u003d new HdfsConfiguration();\n       SecondaryNameNode secondary \u003d null;\n       secondary \u003d new SecondaryNameNode(tconf, opts);\n \n       // SecondaryNameNode can be started in 2 modes:\n       // 1. run a command (i.e. checkpoint or geteditsize) then terminate\n       // 2. run as a daemon when {@link #parseArgs} yields no commands\n       if (opts !\u003d null \u0026\u0026 opts.getCommand() !\u003d null) {\n         // mode 1\n         int ret \u003d secondary.processStartupCommand(opts);\n         terminate(ret);\n       } else {\n         // mode 2\n         secondary.startInfoServer();\n         secondary.startCheckpointThread();\n         secondary.join();\n       }\n     } catch (Throwable e) {\n-      LOG.fatal(\"Failed to start secondary namenode\", e);\n+      LOG.error(\"Failed to start secondary namenode\", e);\n       terminate(1);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void main(String[] argv) throws Exception {\n    CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n    if (opts \u003d\u003d null) {\n      LOG.error(\"Failed to parse options\");\n      terminate(1);\n    } else if (opts.shouldPrintHelp()) {\n      opts.usage();\n      System.exit(0);\n    }\n\n    try {\n      StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n      Configuration tconf \u003d new HdfsConfiguration();\n      SecondaryNameNode secondary \u003d null;\n      secondary \u003d new SecondaryNameNode(tconf, opts);\n\n      // SecondaryNameNode can be started in 2 modes:\n      // 1. run a command (i.e. checkpoint or geteditsize) then terminate\n      // 2. run as a daemon when {@link #parseArgs} yields no commands\n      if (opts !\u003d null \u0026\u0026 opts.getCommand() !\u003d null) {\n        // mode 1\n        int ret \u003d secondary.processStartupCommand(opts);\n        terminate(ret);\n      } else {\n        // mode 2\n        secondary.startInfoServer();\n        secondary.startCheckpointThread();\n        secondary.join();\n      }\n    } catch (Throwable e) {\n      LOG.error(\"Failed to start secondary namenode\", e);\n      terminate(1);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.java",
      "extendedDetails": {}
    },
    "2a4c7d4facabb8b99d6dcbf4ccfe2afedf4fd445": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-9519. Some coding improvement in SecondaryNameNode#main. (Xiao Chen via Yongjun Zhang)\n",
      "commitDate": "11/12/15 6:44 PM",
      "commitName": "2a4c7d4facabb8b99d6dcbf4ccfe2afedf4fd445",
      "commitAuthor": "Yongjun Zhang",
      "commitDateOld": "23/10/15 2:01 PM",
      "commitNameOld": "ab3c4cff4af338caaa23be0ec383fc1fe473714f",
      "commitAuthorOld": "Zhe Zhang",
      "daysBetweenCommits": 49.24,
      "commitsBetweenForRepo": 352,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,36 +1,34 @@\n   public static void main(String[] argv) throws Exception {\n     CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n     if (opts \u003d\u003d null) {\n       LOG.fatal(\"Failed to parse options\");\n       terminate(1);\n     } else if (opts.shouldPrintHelp()) {\n       opts.usage();\n       System.exit(0);\n     }\n \n     try {\n       StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n       Configuration tconf \u003d new HdfsConfiguration();\n       SecondaryNameNode secondary \u003d null;\n       secondary \u003d new SecondaryNameNode(tconf, opts);\n \n+      // SecondaryNameNode can be started in 2 modes:\n+      // 1. run a command (i.e. checkpoint or geteditsize) then terminate\n+      // 2. run as a daemon when {@link #parseArgs} yields no commands\n       if (opts !\u003d null \u0026\u0026 opts.getCommand() !\u003d null) {\n+        // mode 1\n         int ret \u003d secondary.processStartupCommand(opts);\n         terminate(ret);\n-      }\n-\n-      if (secondary !\u003d null) {\n-        // The web server is only needed when starting SNN as a daemon,\n-        // and not needed if called from shell command. Starting the web server\n-        // from shell may fail when getting credentials, if the environment\n-        // is not set up for it, which is most of the case.\n+      } else {\n+        // mode 2\n         secondary.startInfoServer();\n-\n         secondary.startCheckpointThread();\n         secondary.join();\n       }\n     } catch (Throwable e) {\n       LOG.fatal(\"Failed to start secondary namenode\", e);\n       terminate(1);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void main(String[] argv) throws Exception {\n    CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n    if (opts \u003d\u003d null) {\n      LOG.fatal(\"Failed to parse options\");\n      terminate(1);\n    } else if (opts.shouldPrintHelp()) {\n      opts.usage();\n      System.exit(0);\n    }\n\n    try {\n      StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n      Configuration tconf \u003d new HdfsConfiguration();\n      SecondaryNameNode secondary \u003d null;\n      secondary \u003d new SecondaryNameNode(tconf, opts);\n\n      // SecondaryNameNode can be started in 2 modes:\n      // 1. run a command (i.e. checkpoint or geteditsize) then terminate\n      // 2. run as a daemon when {@link #parseArgs} yields no commands\n      if (opts !\u003d null \u0026\u0026 opts.getCommand() !\u003d null) {\n        // mode 1\n        int ret \u003d secondary.processStartupCommand(opts);\n        terminate(ret);\n      } else {\n        // mode 2\n        secondary.startInfoServer();\n        secondary.startCheckpointThread();\n        secondary.join();\n      }\n    } catch (Throwable e) {\n      LOG.fatal(\"Failed to start secondary namenode\", e);\n      terminate(1);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.java",
      "extendedDetails": {}
    },
    "6c8b6f3646b31a3e028704bc7fd78bf319f89f0a": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-3059. ssl-server.xml causes NullPointer. Contributed by Xiao Chen.\n",
      "commitDate": "20/10/15 1:44 PM",
      "commitName": "6c8b6f3646b31a3e028704bc7fd78bf319f89f0a",
      "commitAuthor": "Andrew Wang",
      "commitDateOld": "03/09/15 11:22 AM",
      "commitNameOld": "53c38cc89ab979ec47557dcfa7affbad20578c0a",
      "commitAuthorOld": "Colin Patrick Mccabe",
      "daysBetweenCommits": 47.1,
      "commitsBetweenForRepo": 339,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,30 +1,36 @@\n   public static void main(String[] argv) throws Exception {\n     CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n     if (opts \u003d\u003d null) {\n       LOG.fatal(\"Failed to parse options\");\n       terminate(1);\n     } else if (opts.shouldPrintHelp()) {\n       opts.usage();\n       System.exit(0);\n     }\n \n     try {\n       StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n       Configuration tconf \u003d new HdfsConfiguration();\n       SecondaryNameNode secondary \u003d null;\n       secondary \u003d new SecondaryNameNode(tconf, opts);\n \n       if (opts !\u003d null \u0026\u0026 opts.getCommand() !\u003d null) {\n         int ret \u003d secondary.processStartupCommand(opts);\n         terminate(ret);\n       }\n \n       if (secondary !\u003d null) {\n+        // The web server is only needed when starting SNN as a daemon,\n+        // and not needed if called from shell command. Starting the web server\n+        // from shell may fail when getting credentials, if the environment\n+        // is not set up for it, which is most of the case.\n+        secondary.startInfoServer();\n+\n         secondary.startCheckpointThread();\n         secondary.join();\n       }\n     } catch (Throwable e) {\n       LOG.fatal(\"Failed to start secondary namenode\", e);\n       terminate(1);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void main(String[] argv) throws Exception {\n    CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n    if (opts \u003d\u003d null) {\n      LOG.fatal(\"Failed to parse options\");\n      terminate(1);\n    } else if (opts.shouldPrintHelp()) {\n      opts.usage();\n      System.exit(0);\n    }\n\n    try {\n      StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n      Configuration tconf \u003d new HdfsConfiguration();\n      SecondaryNameNode secondary \u003d null;\n      secondary \u003d new SecondaryNameNode(tconf, opts);\n\n      if (opts !\u003d null \u0026\u0026 opts.getCommand() !\u003d null) {\n        int ret \u003d secondary.processStartupCommand(opts);\n        terminate(ret);\n      }\n\n      if (secondary !\u003d null) {\n        // The web server is only needed when starting SNN as a daemon,\n        // and not needed if called from shell command. Starting the web server\n        // from shell may fail when getting credentials, if the environment\n        // is not set up for it, which is most of the case.\n        secondary.startInfoServer();\n\n        secondary.startCheckpointThread();\n        secondary.join();\n      }\n    } catch (Throwable e) {\n      LOG.fatal(\"Failed to start secondary namenode\", e);\n      terminate(1);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.java",
      "extendedDetails": {}
    },
    "93972a332a9fc6390447fc5fc9785c98fb4c3344": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-6348. SecondaryNameNode not terminating properly on runtime exceptions (Contributed by Rakesh R)\n",
      "commitDate": "18/05/15 11:54 PM",
      "commitName": "93972a332a9fc6390447fc5fc9785c98fb4c3344",
      "commitAuthor": "Vinayakumar B",
      "commitDateOld": "29/04/15 5:37 PM",
      "commitNameOld": "aa22450442ebe39916a6fd460fe97e347945526d",
      "commitAuthorOld": "Andrew Wang",
      "daysBetweenCommits": 19.26,
      "commitsBetweenForRepo": 241,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,30 +1,30 @@\n   public static void main(String[] argv) throws Exception {\n     CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n     if (opts \u003d\u003d null) {\n       LOG.fatal(\"Failed to parse options\");\n       terminate(1);\n     } else if (opts.shouldPrintHelp()) {\n       opts.usage();\n       System.exit(0);\n     }\n-    \n-    StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n-    Configuration tconf \u003d new HdfsConfiguration();\n-    SecondaryNameNode secondary \u003d null;\n+\n     try {\n+      StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n+      Configuration tconf \u003d new HdfsConfiguration();\n+      SecondaryNameNode secondary \u003d null;\n       secondary \u003d new SecondaryNameNode(tconf, opts);\n-    } catch (IOException ioe) {\n-      LOG.fatal(\"Failed to start secondary namenode\", ioe);\n+\n+      if (opts !\u003d null \u0026\u0026 opts.getCommand() !\u003d null) {\n+        int ret \u003d secondary.processStartupCommand(opts);\n+        terminate(ret);\n+      }\n+\n+      if (secondary !\u003d null) {\n+        secondary.startCheckpointThread();\n+        secondary.join();\n+      }\n+    } catch (Throwable e) {\n+      LOG.fatal(\"Failed to start secondary namenode\", e);\n       terminate(1);\n     }\n-\n-    if (opts !\u003d null \u0026\u0026 opts.getCommand() !\u003d null) {\n-      int ret \u003d secondary.processStartupCommand(opts);\n-      terminate(ret);\n-    }\n-\n-    if (secondary !\u003d null) {\n-      secondary.startCheckpointThread();\n-      secondary.join();\n-    }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void main(String[] argv) throws Exception {\n    CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n    if (opts \u003d\u003d null) {\n      LOG.fatal(\"Failed to parse options\");\n      terminate(1);\n    } else if (opts.shouldPrintHelp()) {\n      opts.usage();\n      System.exit(0);\n    }\n\n    try {\n      StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n      Configuration tconf \u003d new HdfsConfiguration();\n      SecondaryNameNode secondary \u003d null;\n      secondary \u003d new SecondaryNameNode(tconf, opts);\n\n      if (opts !\u003d null \u0026\u0026 opts.getCommand() !\u003d null) {\n        int ret \u003d secondary.processStartupCommand(opts);\n        terminate(ret);\n      }\n\n      if (secondary !\u003d null) {\n        secondary.startCheckpointThread();\n        secondary.join();\n      }\n    } catch (Throwable e) {\n      LOG.fatal(\"Failed to start secondary namenode\", e);\n      terminate(1);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.java",
      "extendedDetails": {}
    },
    "a1e6df6bc4e26a29a05d5d292f2a68bf8919c237": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-4426. Secondary namenode shuts down immediately after startup. Contributed by Arpit Agarwal.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1437627 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "23/01/13 11:00 AM",
      "commitName": "a1e6df6bc4e26a29a05d5d292f2a68bf8919c237",
      "commitAuthor": "Suresh Srinivas",
      "commitDateOld": "08/01/13 2:38 PM",
      "commitNameOld": "6d4a0915676b8185a4727a10fcfeb40aa24cacc5",
      "commitAuthorOld": "Eli Collins",
      "daysBetweenCommits": 14.85,
      "commitsBetweenForRepo": 93,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,29 +1,30 @@\n   public static void main(String[] argv) throws Exception {\n     CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n     if (opts \u003d\u003d null) {\n       LOG.fatal(\"Failed to parse options\");\n       terminate(1);\n     } else if (opts.shouldPrintHelp()) {\n       opts.usage();\n       System.exit(0);\n     }\n     \n     StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n     Configuration tconf \u003d new HdfsConfiguration();\n     SecondaryNameNode secondary \u003d null;\n     try {\n       secondary \u003d new SecondaryNameNode(tconf, opts);\n     } catch (IOException ioe) {\n       LOG.fatal(\"Failed to start secondary namenode\", ioe);\n       terminate(1);\n     }\n \n     if (opts !\u003d null \u0026\u0026 opts.getCommand() !\u003d null) {\n       int ret \u003d secondary.processStartupCommand(opts);\n       terminate(ret);\n     }\n \n     if (secondary !\u003d null) {\n       secondary.startCheckpointThread();\n+      secondary.join();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void main(String[] argv) throws Exception {\n    CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n    if (opts \u003d\u003d null) {\n      LOG.fatal(\"Failed to parse options\");\n      terminate(1);\n    } else if (opts.shouldPrintHelp()) {\n      opts.usage();\n      System.exit(0);\n    }\n    \n    StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n    Configuration tconf \u003d new HdfsConfiguration();\n    SecondaryNameNode secondary \u003d null;\n    try {\n      secondary \u003d new SecondaryNameNode(tconf, opts);\n    } catch (IOException ioe) {\n      LOG.fatal(\"Failed to start secondary namenode\", ioe);\n      terminate(1);\n    }\n\n    if (opts !\u003d null \u0026\u0026 opts.getCommand() !\u003d null) {\n      int ret \u003d secondary.processStartupCommand(opts);\n      terminate(ret);\n    }\n\n    if (secondary !\u003d null) {\n      secondary.startCheckpointThread();\n      secondary.join();\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.java",
      "extendedDetails": {}
    },
    "6d4a0915676b8185a4727a10fcfeb40aa24cacc5": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-4034. Remove redundant null checks. Contributed by Eli Collins\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1430585 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "08/01/13 2:38 PM",
      "commitName": "6d4a0915676b8185a4727a10fcfeb40aa24cacc5",
      "commitAuthor": "Eli Collins",
      "commitDateOld": "16/11/12 7:30 PM",
      "commitNameOld": "1cbc38a8783c1abe49dc6e076cb865642ca753ee",
      "commitAuthorOld": "Jitendra Nath Pandey",
      "daysBetweenCommits": 52.8,
      "commitsBetweenForRepo": 184,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,27 +1,29 @@\n   public static void main(String[] argv) throws Exception {\n     CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n     if (opts \u003d\u003d null) {\n       LOG.fatal(\"Failed to parse options\");\n       terminate(1);\n     } else if (opts.shouldPrintHelp()) {\n       opts.usage();\n       System.exit(0);\n     }\n     \n     StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n     Configuration tconf \u003d new HdfsConfiguration();\n     SecondaryNameNode secondary \u003d null;\n     try {\n       secondary \u003d new SecondaryNameNode(tconf, opts);\n     } catch (IOException ioe) {\n       LOG.fatal(\"Failed to start secondary namenode\", ioe);\n       terminate(1);\n     }\n \n     if (opts !\u003d null \u0026\u0026 opts.getCommand() !\u003d null) {\n       int ret \u003d secondary.processStartupCommand(opts);\n       terminate(ret);\n     }\n \n-    secondary.startCheckpointThread();\n+    if (secondary !\u003d null) {\n+      secondary.startCheckpointThread();\n+    }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void main(String[] argv) throws Exception {\n    CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n    if (opts \u003d\u003d null) {\n      LOG.fatal(\"Failed to parse options\");\n      terminate(1);\n    } else if (opts.shouldPrintHelp()) {\n      opts.usage();\n      System.exit(0);\n    }\n    \n    StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n    Configuration tconf \u003d new HdfsConfiguration();\n    SecondaryNameNode secondary \u003d null;\n    try {\n      secondary \u003d new SecondaryNameNode(tconf, opts);\n    } catch (IOException ioe) {\n      LOG.fatal(\"Failed to start secondary namenode\", ioe);\n      terminate(1);\n    }\n\n    if (opts !\u003d null \u0026\u0026 opts.getCommand() !\u003d null) {\n      int ret \u003d secondary.processStartupCommand(opts);\n      terminate(ret);\n    }\n\n    if (secondary !\u003d null) {\n      secondary.startCheckpointThread();\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.java",
      "extendedDetails": {}
    },
    "5a5473b29f8892ac380b6d8c468d54a3a51f316e": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-4006. TestCheckpoint#testSecondaryHasVeryOutOfDateImage occasionally fails due to unexpected exit. Contributed by Todd Lipcon\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1395387 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "07/10/12 2:35 PM",
      "commitName": "5a5473b29f8892ac380b6d8c468d54a3a51f316e",
      "commitAuthor": "Eli Collins",
      "commitDateOld": "28/08/12 3:09 PM",
      "commitNameOld": "d4d2bf73a9181a5bfdc0fd99328c7ee4ec998b4e",
      "commitAuthorOld": "Aaron Myers",
      "daysBetweenCommits": 39.98,
      "commitsBetweenForRepo": 206,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,29 +1,27 @@\n   public static void main(String[] argv) throws Exception {\n     CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n     if (opts \u003d\u003d null) {\n       LOG.fatal(\"Failed to parse options\");\n       terminate(1);\n     } else if (opts.shouldPrintHelp()) {\n       opts.usage();\n       System.exit(0);\n     }\n     \n     StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n     Configuration tconf \u003d new HdfsConfiguration();\n     SecondaryNameNode secondary \u003d null;\n     try {\n       secondary \u003d new SecondaryNameNode(tconf, opts);\n     } catch (IOException ioe) {\n       LOG.fatal(\"Failed to start secondary namenode\", ioe);\n       terminate(1);\n     }\n \n     if (opts !\u003d null \u0026\u0026 opts.getCommand() !\u003d null) {\n       int ret \u003d secondary.processStartupCommand(opts);\n       terminate(ret);\n     }\n \n-    // Create a never ending deamon\n-    Daemon checkpointThread \u003d new Daemon(secondary);\n-    checkpointThread.start();\n+    secondary.startCheckpointThread();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void main(String[] argv) throws Exception {\n    CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n    if (opts \u003d\u003d null) {\n      LOG.fatal(\"Failed to parse options\");\n      terminate(1);\n    } else if (opts.shouldPrintHelp()) {\n      opts.usage();\n      System.exit(0);\n    }\n    \n    StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n    Configuration tconf \u003d new HdfsConfiguration();\n    SecondaryNameNode secondary \u003d null;\n    try {\n      secondary \u003d new SecondaryNameNode(tconf, opts);\n    } catch (IOException ioe) {\n      LOG.fatal(\"Failed to start secondary namenode\", ioe);\n      terminate(1);\n    }\n\n    if (opts !\u003d null \u0026\u0026 opts.getCommand() !\u003d null) {\n      int ret \u003d secondary.processStartupCommand(opts);\n      terminate(ret);\n    }\n\n    secondary.startCheckpointThread();\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.java",
      "extendedDetails": {}
    },
    "28e87740c5797e87a9038d7f151c8b21a5b04592": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-3723. Add support -h, -help to all the commands. Contributed by Jing Zhao\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1373173 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "14/08/12 5:28 PM",
      "commitName": "28e87740c5797e87a9038d7f151c8b21a5b04592",
      "commitAuthor": "Suresh Srinivas",
      "commitDateOld": "14/08/12 5:25 PM",
      "commitNameOld": "231a52a7dfa73f7f302cc3bf671d433312373873",
      "commitAuthorOld": "Suresh Srinivas",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,26 +1,29 @@\n   public static void main(String[] argv) throws Exception {\n     CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n     if (opts \u003d\u003d null) {\n       LOG.fatal(\"Failed to parse options\");\n       terminate(1);\n+    } else if (opts.shouldPrintHelp()) {\n+      opts.usage();\n+      System.exit(0);\n     }\n     \n     StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n     Configuration tconf \u003d new HdfsConfiguration();\n     SecondaryNameNode secondary \u003d null;\n     try {\n       secondary \u003d new SecondaryNameNode(tconf, opts);\n     } catch (IOException ioe) {\n       LOG.fatal(\"Failed to start secondary namenode\", ioe);\n       terminate(1);\n     }\n \n     if (opts !\u003d null \u0026\u0026 opts.getCommand() !\u003d null) {\n       int ret \u003d secondary.processStartupCommand(opts);\n       terminate(ret);\n     }\n \n     // Create a never ending deamon\n     Daemon checkpointThread \u003d new Daemon(secondary);\n     checkpointThread.start();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void main(String[] argv) throws Exception {\n    CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n    if (opts \u003d\u003d null) {\n      LOG.fatal(\"Failed to parse options\");\n      terminate(1);\n    } else if (opts.shouldPrintHelp()) {\n      opts.usage();\n      System.exit(0);\n    }\n    \n    StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n    Configuration tconf \u003d new HdfsConfiguration();\n    SecondaryNameNode secondary \u003d null;\n    try {\n      secondary \u003d new SecondaryNameNode(tconf, opts);\n    } catch (IOException ioe) {\n      LOG.fatal(\"Failed to start secondary namenode\", ioe);\n      terminate(1);\n    }\n\n    if (opts !\u003d null \u0026\u0026 opts.getCommand() !\u003d null) {\n      int ret \u003d secondary.processStartupCommand(opts);\n      terminate(ret);\n    }\n\n    // Create a never ending deamon\n    Daemon checkpointThread \u003d new Daemon(secondary);\n    checkpointThread.start();\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.java",
      "extendedDetails": {}
    },
    "231a52a7dfa73f7f302cc3bf671d433312373873": {
      "type": "Ybodychange",
      "commitMessage": "Reverting previous incomplete change r1373170 for HDFS-3723\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1373172 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "14/08/12 5:25 PM",
      "commitName": "231a52a7dfa73f7f302cc3bf671d433312373873",
      "commitAuthor": "Suresh Srinivas",
      "commitDateOld": "14/08/12 5:03 PM",
      "commitNameOld": "f026d8bb1ba6f9b059db5526f1fb1261f818ffd0",
      "commitAuthorOld": "Suresh Srinivas",
      "daysBetweenCommits": 0.02,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,29 +1,26 @@\n   public static void main(String[] argv) throws Exception {\n     CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n     if (opts \u003d\u003d null) {\n       LOG.fatal(\"Failed to parse options\");\n       terminate(1);\n-    } else if (opts.shouldPrintHelp()) {\n-      opts.usage();\n-      System.exit(0);\n     }\n     \n     StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n     Configuration tconf \u003d new HdfsConfiguration();\n     SecondaryNameNode secondary \u003d null;\n     try {\n       secondary \u003d new SecondaryNameNode(tconf, opts);\n     } catch (IOException ioe) {\n       LOG.fatal(\"Failed to start secondary namenode\", ioe);\n       terminate(1);\n     }\n \n     if (opts !\u003d null \u0026\u0026 opts.getCommand() !\u003d null) {\n       int ret \u003d secondary.processStartupCommand(opts);\n       terminate(ret);\n     }\n \n     // Create a never ending deamon\n     Daemon checkpointThread \u003d new Daemon(secondary);\n     checkpointThread.start();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void main(String[] argv) throws Exception {\n    CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n    if (opts \u003d\u003d null) {\n      LOG.fatal(\"Failed to parse options\");\n      terminate(1);\n    }\n    \n    StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n    Configuration tconf \u003d new HdfsConfiguration();\n    SecondaryNameNode secondary \u003d null;\n    try {\n      secondary \u003d new SecondaryNameNode(tconf, opts);\n    } catch (IOException ioe) {\n      LOG.fatal(\"Failed to start secondary namenode\", ioe);\n      terminate(1);\n    }\n\n    if (opts !\u003d null \u0026\u0026 opts.getCommand() !\u003d null) {\n      int ret \u003d secondary.processStartupCommand(opts);\n      terminate(ret);\n    }\n\n    // Create a never ending deamon\n    Daemon checkpointThread \u003d new Daemon(secondary);\n    checkpointThread.start();\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.java",
      "extendedDetails": {}
    },
    "f026d8bb1ba6f9b059db5526f1fb1261f818ffd0": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-3723. Add support -h, -help to all the commands. Contributed by Jing Zhao.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1373170 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "14/08/12 5:03 PM",
      "commitName": "f026d8bb1ba6f9b059db5526f1fb1261f818ffd0",
      "commitAuthor": "Suresh Srinivas",
      "commitDateOld": "20/07/12 11:58 AM",
      "commitNameOld": "9833468302bd2fa235d9d1f40517631f9dfff517",
      "commitAuthorOld": "Todd Lipcon",
      "daysBetweenCommits": 25.21,
      "commitsBetweenForRepo": 103,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,26 +1,29 @@\n   public static void main(String[] argv) throws Exception {\n     CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n     if (opts \u003d\u003d null) {\n       LOG.fatal(\"Failed to parse options\");\n       terminate(1);\n+    } else if (opts.shouldPrintHelp()) {\n+      opts.usage();\n+      System.exit(0);\n     }\n     \n     StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n     Configuration tconf \u003d new HdfsConfiguration();\n     SecondaryNameNode secondary \u003d null;\n     try {\n       secondary \u003d new SecondaryNameNode(tconf, opts);\n     } catch (IOException ioe) {\n       LOG.fatal(\"Failed to start secondary namenode\", ioe);\n       terminate(1);\n     }\n \n     if (opts !\u003d null \u0026\u0026 opts.getCommand() !\u003d null) {\n       int ret \u003d secondary.processStartupCommand(opts);\n       terminate(ret);\n     }\n \n     // Create a never ending deamon\n     Daemon checkpointThread \u003d new Daemon(secondary);\n     checkpointThread.start();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void main(String[] argv) throws Exception {\n    CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n    if (opts \u003d\u003d null) {\n      LOG.fatal(\"Failed to parse options\");\n      terminate(1);\n    } else if (opts.shouldPrintHelp()) {\n      opts.usage();\n      System.exit(0);\n    }\n    \n    StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n    Configuration tconf \u003d new HdfsConfiguration();\n    SecondaryNameNode secondary \u003d null;\n    try {\n      secondary \u003d new SecondaryNameNode(tconf, opts);\n    } catch (IOException ioe) {\n      LOG.fatal(\"Failed to start secondary namenode\", ioe);\n      terminate(1);\n    }\n\n    if (opts !\u003d null \u0026\u0026 opts.getCommand() !\u003d null) {\n      int ret \u003d secondary.processStartupCommand(opts);\n      terminate(ret);\n    }\n\n    // Create a never ending deamon\n    Daemon checkpointThread \u003d new Daemon(secondary);\n    checkpointThread.start();\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.java",
      "extendedDetails": {}
    },
    "cdae6953e80e81693bb4c9eb38b62eaba3ac8cf9": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-3582. Hook daemon process exit for testing. Contributed by Eli Collins\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1360329 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "11/07/12 10:58 AM",
      "commitName": "cdae6953e80e81693bb4c9eb38b62eaba3ac8cf9",
      "commitAuthor": "Eli Collins",
      "commitDateOld": "27/06/12 3:41 PM",
      "commitNameOld": "5770a453f304d83463879db6101da1f1e81e5563",
      "commitAuthorOld": "Todd Lipcon",
      "daysBetweenCommits": 13.8,
      "commitsBetweenForRepo": 86,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,25 +1,26 @@\n   public static void main(String[] argv) throws Exception {\n     CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n     if (opts \u003d\u003d null) {\n-      System.exit(-1);\n+      LOG.fatal(\"Failed to parse options\");\n+      terminate(1);\n     }\n     \n     StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n     Configuration tconf \u003d new HdfsConfiguration();\n     SecondaryNameNode secondary \u003d null;\n     try {\n       secondary \u003d new SecondaryNameNode(tconf, opts);\n     } catch (IOException ioe) {\n       LOG.fatal(\"Failed to start secondary namenode\", ioe);\n-      System.exit(-1);\n+      terminate(1);\n     }\n \n-    if (opts.getCommand() !\u003d null) {\n+    if (opts !\u003d null \u0026\u0026 opts.getCommand() !\u003d null) {\n       int ret \u003d secondary.processStartupCommand(opts);\n-      System.exit(ret);\n+      terminate(ret);\n     }\n \n     // Create a never ending deamon\n     Daemon checkpointThread \u003d new Daemon(secondary);\n     checkpointThread.start();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void main(String[] argv) throws Exception {\n    CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n    if (opts \u003d\u003d null) {\n      LOG.fatal(\"Failed to parse options\");\n      terminate(1);\n    }\n    \n    StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n    Configuration tconf \u003d new HdfsConfiguration();\n    SecondaryNameNode secondary \u003d null;\n    try {\n      secondary \u003d new SecondaryNameNode(tconf, opts);\n    } catch (IOException ioe) {\n      LOG.fatal(\"Failed to start secondary namenode\", ioe);\n      terminate(1);\n    }\n\n    if (opts !\u003d null \u0026\u0026 opts.getCommand() !\u003d null) {\n      int ret \u003d secondary.processStartupCommand(opts);\n      terminate(ret);\n    }\n\n    // Create a never ending deamon\n    Daemon checkpointThread \u003d new Daemon(secondary);\n    checkpointThread.start();\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.java",
      "extendedDetails": {}
    },
    "296b6c0063a319f4b80e8f62468be95f39d4f4e3": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-2894. HA: automatically determine the nameservice Id if only one nameservice is configured. Contributed by Eli Collins\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1240917 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "06/02/12 12:25 AM",
      "commitName": "296b6c0063a319f4b80e8f62468be95f39d4f4e3",
      "commitAuthor": "Eli Collins",
      "commitDateOld": "03/02/12 6:52 PM",
      "commitNameOld": "11df1c256171564b0578477c226723358be812c4",
      "commitAuthorOld": "Todd Lipcon",
      "daysBetweenCommits": 2.23,
      "commitsBetweenForRepo": 7,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,25 @@\n   public static void main(String[] argv) throws Exception {\n     CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n     if (opts \u003d\u003d null) {\n       System.exit(-1);\n     }\n     \n     StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n     Configuration tconf \u003d new HdfsConfiguration();\n-    SecondaryNameNode secondary \u003d new SecondaryNameNode(tconf, opts);\n+    SecondaryNameNode secondary \u003d null;\n+    try {\n+      secondary \u003d new SecondaryNameNode(tconf, opts);\n+    } catch (IOException ioe) {\n+      LOG.fatal(\"Failed to start secondary namenode\", ioe);\n+      System.exit(-1);\n+    }\n \n     if (opts.getCommand() !\u003d null) {\n       int ret \u003d secondary.processStartupCommand(opts);\n       System.exit(ret);\n     }\n \n     // Create a never ending deamon\n     Daemon checkpointThread \u003d new Daemon(secondary);\n     checkpointThread.start();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void main(String[] argv) throws Exception {\n    CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n    if (opts \u003d\u003d null) {\n      System.exit(-1);\n    }\n    \n    StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n    Configuration tconf \u003d new HdfsConfiguration();\n    SecondaryNameNode secondary \u003d null;\n    try {\n      secondary \u003d new SecondaryNameNode(tconf, opts);\n    } catch (IOException ioe) {\n      LOG.fatal(\"Failed to start secondary namenode\", ioe);\n      System.exit(-1);\n    }\n\n    if (opts.getCommand() !\u003d null) {\n      int ret \u003d secondary.processStartupCommand(opts);\n      System.exit(ret);\n    }\n\n    // Create a never ending deamon\n    Daemon checkpointThread \u003d new Daemon(secondary);\n    checkpointThread.start();\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.java",
      "extendedDetails": {}
    },
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1": {
      "type": "Yfilerename",
      "commitMessage": "HADOOP-7560. Change src layout to be heirarchical. Contributed by Alejandro Abdelnur.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1161332 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/08/11 5:14 PM",
      "commitName": "cd7157784e5e5ddc4e77144d042e54dd0d04bac1",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "24/08/11 5:06 PM",
      "commitNameOld": "bb0005cfec5fd2861600ff5babd259b48ba18b63",
      "commitAuthorOld": "Arun Murthy",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  public static void main(String[] argv) throws Exception {\n    CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n    if (opts \u003d\u003d null) {\n      System.exit(-1);\n    }\n    \n    StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n    Configuration tconf \u003d new HdfsConfiguration();\n    SecondaryNameNode secondary \u003d new SecondaryNameNode(tconf, opts);\n\n    if (opts.getCommand() !\u003d null) {\n      int ret \u003d secondary.processStartupCommand(opts);\n      System.exit(ret);\n    }\n\n    // Create a never ending deamon\n    Daemon checkpointThread \u003d new Daemon(secondary);\n    checkpointThread.start();\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.java",
      "extendedDetails": {
        "oldPath": "hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.java",
        "newPath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.java"
      }
    },
    "d86f3183d93714ba078416af4f609d26376eadb0": {
      "type": "Yfilerename",
      "commitMessage": "HDFS-2096. Mavenization of hadoop-hdfs. Contributed by Alejandro Abdelnur.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1159702 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "19/08/11 10:36 AM",
      "commitName": "d86f3183d93714ba078416af4f609d26376eadb0",
      "commitAuthor": "Thomas White",
      "commitDateOld": "19/08/11 10:26 AM",
      "commitNameOld": "6ee5a73e0e91a2ef27753a32c576835e951d8119",
      "commitAuthorOld": "Thomas White",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  public static void main(String[] argv) throws Exception {\n    CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n    if (opts \u003d\u003d null) {\n      System.exit(-1);\n    }\n    \n    StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n    Configuration tconf \u003d new HdfsConfiguration();\n    SecondaryNameNode secondary \u003d new SecondaryNameNode(tconf, opts);\n\n    if (opts.getCommand() !\u003d null) {\n      int ret \u003d secondary.processStartupCommand(opts);\n      System.exit(ret);\n    }\n\n    // Create a never ending deamon\n    Daemon checkpointThread \u003d new Daemon(secondary);\n    checkpointThread.start();\n  }",
      "path": "hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.java",
      "extendedDetails": {
        "oldPath": "hdfs/src/java/org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.java",
        "newPath": "hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.java"
      }
    },
    "28e6a4e44a3e920dcaf858f9a74a6358226b3a63": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-1073. Redesign the NameNode\u0027s storage layout for image checkpoints and edit logs to introduce transaction IDs and be more robust. Contributed by Todd Lipcon and Ivan Kelly.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1152295 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "29/07/11 9:28 AM",
      "commitName": "28e6a4e44a3e920dcaf858f9a74a6358226b3a63",
      "commitAuthor": "Todd Lipcon",
      "commitDateOld": "27/07/11 8:19 PM",
      "commitNameOld": "ffbe9e5972bf3eee9037e2602c1330e0dc744646",
      "commitAuthorOld": "Eli Collins",
      "daysBetweenCommits": 1.55,
      "commitsBetweenForRepo": 6,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,13 +1,19 @@\n   public static void main(String[] argv) throws Exception {\n+    CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n+    if (opts \u003d\u003d null) {\n+      System.exit(-1);\n+    }\n+    \n     StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n     Configuration tconf \u003d new HdfsConfiguration();\n-    if (argv.length \u003e\u003d 1) {\n-      SecondaryNameNode secondary \u003d new SecondaryNameNode(tconf);\n-      int ret \u003d secondary.processArgs(argv);\n+    SecondaryNameNode secondary \u003d new SecondaryNameNode(tconf, opts);\n+\n+    if (opts.getCommand() !\u003d null) {\n+      int ret \u003d secondary.processStartupCommand(opts);\n       System.exit(ret);\n     }\n \n     // Create a never ending deamon\n-    Daemon checkpointThread \u003d new Daemon(new SecondaryNameNode(tconf)); \n+    Daemon checkpointThread \u003d new Daemon(secondary);\n     checkpointThread.start();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void main(String[] argv) throws Exception {\n    CommandLineOpts opts \u003d SecondaryNameNode.parseArgs(argv);\n    if (opts \u003d\u003d null) {\n      System.exit(-1);\n    }\n    \n    StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n    Configuration tconf \u003d new HdfsConfiguration();\n    SecondaryNameNode secondary \u003d new SecondaryNameNode(tconf, opts);\n\n    if (opts.getCommand() !\u003d null) {\n      int ret \u003d secondary.processStartupCommand(opts);\n      System.exit(ret);\n    }\n\n    // Create a never ending deamon\n    Daemon checkpointThread \u003d new Daemon(secondary);\n    checkpointThread.start();\n  }",
      "path": "hdfs/src/java/org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.java",
      "extendedDetails": {}
    },
    "a196766ea07775f18ded69bd9e8d239f8cfd3ccc": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-7106. Reorganize SVN layout to combine HDFS, Common, and MR in a single tree (project unsplit)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1134994 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "12/06/11 3:00 PM",
      "commitName": "a196766ea07775f18ded69bd9e8d239f8cfd3ccc",
      "commitAuthor": "Todd Lipcon",
      "diff": "@@ -0,0 +1,13 @@\n+  public static void main(String[] argv) throws Exception {\n+    StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n+    Configuration tconf \u003d new HdfsConfiguration();\n+    if (argv.length \u003e\u003d 1) {\n+      SecondaryNameNode secondary \u003d new SecondaryNameNode(tconf);\n+      int ret \u003d secondary.processArgs(argv);\n+      System.exit(ret);\n+    }\n+\n+    // Create a never ending deamon\n+    Daemon checkpointThread \u003d new Daemon(new SecondaryNameNode(tconf)); \n+    checkpointThread.start();\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public static void main(String[] argv) throws Exception {\n    StringUtils.startupShutdownMessage(SecondaryNameNode.class, argv, LOG);\n    Configuration tconf \u003d new HdfsConfiguration();\n    if (argv.length \u003e\u003d 1) {\n      SecondaryNameNode secondary \u003d new SecondaryNameNode(tconf);\n      int ret \u003d secondary.processArgs(argv);\n      System.exit(ret);\n    }\n\n    // Create a never ending deamon\n    Daemon checkpointThread \u003d new Daemon(new SecondaryNameNode(tconf)); \n    checkpointThread.start();\n  }",
      "path": "hdfs/src/java/org/apache/hadoop/hdfs/server/namenode/SecondaryNameNode.java"
    }
  }
}