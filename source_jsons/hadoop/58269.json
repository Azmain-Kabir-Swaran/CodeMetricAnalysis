{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "NMTokenIdentifier.java",
  "functionName": "readFields",
  "functionId": "readFields___in-DataInput",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/security/NMTokenIdentifier.java",
  "functionStartLine": 106,
  "functionEndLine": 115,
  "numCommitsSeen": 10,
  "timeTaken": 2066,
  "changeHistory": [
    "3e5f7ea986600e084fcac723b0423e7de1b3bb8a",
    "ea26cc0b4ac02b8af686dfda80f540e5aa70c358",
    "5391919b09ce9549d13c897aa89bb0a0536760fe",
    "243bcd367ff3130d74676280233041f88aca62a5",
    "f0eb4bc342370ec87d1f2665ffaf48ff4b3fbacb"
  ],
  "changeHistoryShort": {
    "3e5f7ea986600e084fcac723b0423e7de1b3bb8a": "Ybodychange",
    "ea26cc0b4ac02b8af686dfda80f540e5aa70c358": "Ybodychange",
    "5391919b09ce9549d13c897aa89bb0a0536760fe": "Ybodychange",
    "243bcd367ff3130d74676280233041f88aca62a5": "Ybodychange",
    "f0eb4bc342370ec87d1f2665ffaf48ff4b3fbacb": "Yintroduced"
  },
  "changeHistoryDetails": {
    "3e5f7ea986600e084fcac723b0423e7de1b3bb8a": {
      "type": "Ybodychange",
      "commitMessage": "YARN-8310. Handle old NMTokenIdentifier, AMRMTokenIdentifier, and ContainerTokenIdentifier formats. Contributed by Robert Kanter.\n",
      "commitDate": "22/05/18 6:10 PM",
      "commitName": "3e5f7ea986600e084fcac723b0423e7de1b3bb8a",
      "commitAuthor": "Miklos Szegedi",
      "commitDateOld": "06/10/14 10:47 AM",
      "commitNameOld": "ea26cc0b4ac02b8af686dfda80f540e5aa70c358",
      "commitAuthorOld": "Jian He",
      "daysBetweenCommits": 1324.31,
      "commitsBetweenForRepo": 10100,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,3 +1,10 @@\n   public void readFields(DataInput in) throws IOException {\n-    proto \u003d NMTokenIdentifierProto.parseFrom((DataInputStream)in);\n+    byte[] data \u003d IOUtils.readFullyToByteArray(in);\n+    try {\n+      proto \u003d NMTokenIdentifierProto.parseFrom(data);\n+    } catch (InvalidProtocolBufferException e) {\n+      LOG.warn(\"Recovering old formatted token\");\n+      readFieldsInOldFormat(\n+          new DataInputStream(new ByteArrayInputStream(data)));\n+    }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void readFields(DataInput in) throws IOException {\n    byte[] data \u003d IOUtils.readFullyToByteArray(in);\n    try {\n      proto \u003d NMTokenIdentifierProto.parseFrom(data);\n    } catch (InvalidProtocolBufferException e) {\n      LOG.warn(\"Recovering old formatted token\");\n      readFieldsInOldFormat(\n          new DataInputStream(new ByteArrayInputStream(data)));\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/security/NMTokenIdentifier.java",
      "extendedDetails": {}
    },
    "ea26cc0b4ac02b8af686dfda80f540e5aa70c358": {
      "type": "Ybodychange",
      "commitMessage": "YARN-2615. Changed ClientToAMTokenIdentifier/RM(Timeline)DelegationTokenIdentifier to use protobuf as payload. Contributed by Junping Du\n",
      "commitDate": "06/10/14 10:47 AM",
      "commitName": "ea26cc0b4ac02b8af686dfda80f540e5aa70c358",
      "commitAuthor": "Jian He",
      "commitDateOld": "26/09/14 5:48 PM",
      "commitNameOld": "5391919b09ce9549d13c897aa89bb0a0536760fe",
      "commitAuthorOld": "Jian He",
      "daysBetweenCommits": 9.71,
      "commitsBetweenForRepo": 88,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,5 +1,3 @@\n   public void readFields(DataInput in) throws IOException {\n-    DataInputStream dis \u003d (DataInputStream)in;\n-    byte[] buffer \u003d IOUtils.toByteArray(dis);\n-    proto \u003d NMTokenIdentifierProto.parseFrom(buffer);\n+    proto \u003d NMTokenIdentifierProto.parseFrom((DataInputStream)in);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void readFields(DataInput in) throws IOException {\n    proto \u003d NMTokenIdentifierProto.parseFrom((DataInputStream)in);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/security/NMTokenIdentifier.java",
      "extendedDetails": {}
    },
    "5391919b09ce9549d13c897aa89bb0a0536760fe": {
      "type": "Ybodychange",
      "commitMessage": "YARN-668. Changed NMTokenIdentifier/AMRMTokenIdentifier/ContainerTokenIdentifier to use protobuf object as the payload. Contributed by Junping Du.\n",
      "commitDate": "26/09/14 5:48 PM",
      "commitName": "5391919b09ce9549d13c897aa89bb0a0536760fe",
      "commitAuthor": "Jian He",
      "commitDateOld": "18/06/13 4:19 PM",
      "commitNameOld": "243bcd367ff3130d74676280233041f88aca62a5",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 465.06,
      "commitsBetweenForRepo": 3298,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,10 +1,5 @@\n   public void readFields(DataInput in) throws IOException {\n-    appAttemptId \u003d\n-        ApplicationAttemptId.newInstance(\n-            ApplicationId.newInstance(in.readLong(), in.readInt()),\n-            in.readInt());\n-    String[] hostAddr \u003d in.readUTF().split(\":\");\n-    nodeId \u003d NodeId.newInstance(hostAddr[0], Integer.parseInt(hostAddr[1]));\n-    appSubmitter \u003d in.readUTF();\n-    keyId \u003d in.readInt();\n+    DataInputStream dis \u003d (DataInputStream)in;\n+    byte[] buffer \u003d IOUtils.toByteArray(dis);\n+    proto \u003d NMTokenIdentifierProto.parseFrom(buffer);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void readFields(DataInput in) throws IOException {\n    DataInputStream dis \u003d (DataInputStream)in;\n    byte[] buffer \u003d IOUtils.toByteArray(dis);\n    proto \u003d NMTokenIdentifierProto.parseFrom(buffer);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/security/NMTokenIdentifier.java",
      "extendedDetails": {}
    },
    "243bcd367ff3130d74676280233041f88aca62a5": {
      "type": "Ybodychange",
      "commitMessage": "YARN-694. Starting to use NMTokens to authenticate all communication with NodeManagers. Contributed by Omkar Vinit Joshi.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1494369 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "18/06/13 4:19 PM",
      "commitName": "243bcd367ff3130d74676280233041f88aca62a5",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "16/06/13 8:32 PM",
      "commitNameOld": "f5f8f3bca4eeaedeff8181812452ec363c4db744",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 1.82,
      "commitsBetweenForRepo": 27,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,10 +1,10 @@\n   public void readFields(DataInput in) throws IOException {\n     appAttemptId \u003d\n         ApplicationAttemptId.newInstance(\n             ApplicationId.newInstance(in.readLong(), in.readInt()),\n             in.readInt());\n     String[] hostAddr \u003d in.readUTF().split(\":\");\n     nodeId \u003d NodeId.newInstance(hostAddr[0], Integer.parseInt(hostAddr[1]));\n     appSubmitter \u003d in.readUTF();\n-    masterKeyId \u003d in.readInt();\n+    keyId \u003d in.readInt();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void readFields(DataInput in) throws IOException {\n    appAttemptId \u003d\n        ApplicationAttemptId.newInstance(\n            ApplicationId.newInstance(in.readLong(), in.readInt()),\n            in.readInt());\n    String[] hostAddr \u003d in.readUTF().split(\":\");\n    nodeId \u003d NodeId.newInstance(hostAddr[0], Integer.parseInt(hostAddr[1]));\n    appSubmitter \u003d in.readUTF();\n    keyId \u003d in.readInt();\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/security/NMTokenIdentifier.java",
      "extendedDetails": {}
    },
    "f0eb4bc342370ec87d1f2665ffaf48ff4b3fbacb": {
      "type": "Yintroduced",
      "commitMessage": "YARN-692. Creating NMToken master key on RM and sharing it with NM as a part of RM-NM heartbeat. Contributed by Omkar Vinit Joshi.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1492907 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "13/06/13 5:06 PM",
      "commitName": "f0eb4bc342370ec87d1f2665ffaf48ff4b3fbacb",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "diff": "@@ -0,0 +1,10 @@\n+  public void readFields(DataInput in) throws IOException {\n+    appAttemptId \u003d\n+        ApplicationAttemptId.newInstance(\n+            ApplicationId.newInstance(in.readLong(), in.readInt()),\n+            in.readInt());\n+    String[] hostAddr \u003d in.readUTF().split(\":\");\n+    nodeId \u003d NodeId.newInstance(hostAddr[0], Integer.parseInt(hostAddr[1]));\n+    appSubmitter \u003d in.readUTF();\n+    masterKeyId \u003d in.readInt();\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public void readFields(DataInput in) throws IOException {\n    appAttemptId \u003d\n        ApplicationAttemptId.newInstance(\n            ApplicationId.newInstance(in.readLong(), in.readInt()),\n            in.readInt());\n    String[] hostAddr \u003d in.readUTF().split(\":\");\n    nodeId \u003d NodeId.newInstance(hostAddr[0], Integer.parseInt(hostAddr[1]));\n    appSubmitter \u003d in.readUTF();\n    masterKeyId \u003d in.readInt();\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/security/NMTokenIdentifier.java"
    }
  }
}