{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "AMRMClientImpl.java",
  "functionName": "checkNodeLabelExpression",
  "functionId": "checkNodeLabelExpression___containerRequest-T",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client/src/main/java/org/apache/hadoop/yarn/client/api/impl/AMRMClientImpl.java",
  "functionStartLine": 846,
  "functionEndLine": 859,
  "numCommitsSeen": 52,
  "timeTaken": 2124,
  "changeHistory": [
    "4c40cd451cbdbce5d2b94ad0e7e3cc991c3439c5",
    "f04c81c9ce93512bc714531a7731debbe6b794ce",
    "c1957fef29b07fea70938e971b30532a1e131fd0"
  ],
  "changeHistoryShort": {
    "4c40cd451cbdbce5d2b94ad0e7e3cc991c3439c5": "Ybodychange",
    "f04c81c9ce93512bc714531a7731debbe6b794ce": "Ybodychange",
    "c1957fef29b07fea70938e971b30532a1e131fd0": "Yintroduced"
  },
  "changeHistoryDetails": {
    "4c40cd451cbdbce5d2b94ad0e7e3cc991c3439c5": {
      "type": "Ybodychange",
      "commitMessage": "YARN-6844. AMRMClientImpl.checkNodeLabelExpression() has wrong error message\n(Contributed by Manikandan R via Daniel Templeton)\n",
      "commitDate": "24/07/17 12:03 PM",
      "commitName": "4c40cd451cbdbce5d2b94ad0e7e3cc991c3439c5",
      "commitAuthor": "Daniel Templeton",
      "commitDateOld": "14/02/17 6:09 AM",
      "commitNameOld": "aaf106fde35ec97e2e2ea4d7a67434038c4273ac",
      "commitAuthorOld": "Arun Suresh",
      "daysBetweenCommits": 160.2,
      "commitsBetweenForRepo": 862,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,14 +1,14 @@\n   private void checkNodeLabelExpression(T containerRequest) {\n     String exp \u003d containerRequest.getNodeLabelExpression();\n     \n     if (null \u003d\u003d exp || exp.isEmpty()) {\n       return;\n     }\n \n-    // Don\u0027t support specifying \u003e\u003d 2 node labels in a node label expression now\n+    // Don\u0027t support specifying \u003e 1 node labels in a node label expression now\n     if (exp.contains(\"\u0026\u0026\") || exp.contains(\"||\")) {\n       throw new InvalidContainerRequestException(\n-          \"Cannot specify more than two node labels\"\n+          \"Cannot specify more than one node label\"\n               + \" in a single node label expression\");\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void checkNodeLabelExpression(T containerRequest) {\n    String exp \u003d containerRequest.getNodeLabelExpression();\n    \n    if (null \u003d\u003d exp || exp.isEmpty()) {\n      return;\n    }\n\n    // Don\u0027t support specifying \u003e 1 node labels in a node label expression now\n    if (exp.contains(\"\u0026\u0026\") || exp.contains(\"||\")) {\n      throw new InvalidContainerRequestException(\n          \"Cannot specify more than one node label\"\n              + \" in a single node label expression\");\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client/src/main/java/org/apache/hadoop/yarn/client/api/impl/AMRMClientImpl.java",
      "extendedDetails": {}
    },
    "f04c81c9ce93512bc714531a7731debbe6b794ce": {
      "type": "Ybodychange",
      "commitMessage": "YARN-4925. ContainerRequest in AMRMClient, application should be able to specify nodes/racks together with nodeLabelExpression. Contributed by Bibin A Chundatt\n",
      "commitDate": "18/05/16 10:30 AM",
      "commitName": "f04c81c9ce93512bc714531a7731debbe6b794ce",
      "commitAuthor": "Naganarasimha",
      "commitDateOld": "12/02/16 3:02 AM",
      "commitNameOld": "51fc7f542747bf87b48580747f51610e52bdc98b",
      "commitAuthorOld": "Steve Loughran",
      "daysBetweenCommits": 96.27,
      "commitsBetweenForRepo": 603,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,24 +1,14 @@\n   private void checkNodeLabelExpression(T containerRequest) {\n     String exp \u003d containerRequest.getNodeLabelExpression();\n     \n     if (null \u003d\u003d exp || exp.isEmpty()) {\n       return;\n     }\n \n     // Don\u0027t support specifying \u003e\u003d 2 node labels in a node label expression now\n     if (exp.contains(\"\u0026\u0026\") || exp.contains(\"||\")) {\n       throw new InvalidContainerRequestException(\n           \"Cannot specify more than two node labels\"\n               + \" in a single node label expression\");\n     }\n-    \n-    // Don\u0027t allow specify node label against ANY request\n-    if ((containerRequest.getRacks() !\u003d null \u0026\u0026 \n-        (!containerRequest.getRacks().isEmpty()))\n-        || \n-        (containerRequest.getNodes() !\u003d null \u0026\u0026 \n-        (!containerRequest.getNodes().isEmpty()))) {\n-      throw new InvalidContainerRequestException(\n-          \"Cannot specify node label with rack and node\");\n-    }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void checkNodeLabelExpression(T containerRequest) {\n    String exp \u003d containerRequest.getNodeLabelExpression();\n    \n    if (null \u003d\u003d exp || exp.isEmpty()) {\n      return;\n    }\n\n    // Don\u0027t support specifying \u003e\u003d 2 node labels in a node label expression now\n    if (exp.contains(\"\u0026\u0026\") || exp.contains(\"||\")) {\n      throw new InvalidContainerRequestException(\n          \"Cannot specify more than two node labels\"\n              + \" in a single node label expression\");\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client/src/main/java/org/apache/hadoop/yarn/client/api/impl/AMRMClientImpl.java",
      "extendedDetails": {}
    },
    "c1957fef29b07fea70938e971b30532a1e131fd0": {
      "type": "Yintroduced",
      "commitMessage": "YARN-2694. Ensure only single node label specified in ResourceRequest. Contributed by Wangda Tan\n",
      "commitDate": "06/02/15 11:34 AM",
      "commitName": "c1957fef29b07fea70938e971b30532a1e131fd0",
      "commitAuthor": "Jian He",
      "diff": "@@ -0,0 +1,24 @@\n+  private void checkNodeLabelExpression(T containerRequest) {\n+    String exp \u003d containerRequest.getNodeLabelExpression();\n+    \n+    if (null \u003d\u003d exp || exp.isEmpty()) {\n+      return;\n+    }\n+\n+    // Don\u0027t support specifying \u003e\u003d 2 node labels in a node label expression now\n+    if (exp.contains(\"\u0026\u0026\") || exp.contains(\"||\")) {\n+      throw new InvalidContainerRequestException(\n+          \"Cannot specify more than two node labels\"\n+              + \" in a single node label expression\");\n+    }\n+    \n+    // Don\u0027t allow specify node label against ANY request\n+    if ((containerRequest.getRacks() !\u003d null \u0026\u0026 \n+        (!containerRequest.getRacks().isEmpty()))\n+        || \n+        (containerRequest.getNodes() !\u003d null \u0026\u0026 \n+        (!containerRequest.getNodes().isEmpty()))) {\n+      throw new InvalidContainerRequestException(\n+          \"Cannot specify node label with rack and node\");\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private void checkNodeLabelExpression(T containerRequest) {\n    String exp \u003d containerRequest.getNodeLabelExpression();\n    \n    if (null \u003d\u003d exp || exp.isEmpty()) {\n      return;\n    }\n\n    // Don\u0027t support specifying \u003e\u003d 2 node labels in a node label expression now\n    if (exp.contains(\"\u0026\u0026\") || exp.contains(\"||\")) {\n      throw new InvalidContainerRequestException(\n          \"Cannot specify more than two node labels\"\n              + \" in a single node label expression\");\n    }\n    \n    // Don\u0027t allow specify node label against ANY request\n    if ((containerRequest.getRacks() !\u003d null \u0026\u0026 \n        (!containerRequest.getRacks().isEmpty()))\n        || \n        (containerRequest.getNodes() !\u003d null \u0026\u0026 \n        (!containerRequest.getNodes().isEmpty()))) {\n      throw new InvalidContainerRequestException(\n          \"Cannot specify node label with rack and node\");\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client/src/main/java/org/apache/hadoop/yarn/client/api/impl/AMRMClientImpl.java"
    }
  }
}