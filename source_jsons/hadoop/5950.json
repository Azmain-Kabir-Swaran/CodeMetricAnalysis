{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "FSDirEncryptionZoneOp.java",
  "functionName": "getZoneEncryptionInfoProto",
  "functionId": "getZoneEncryptionInfoProto___iip-INodesInPath(modifiers-final)",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirEncryptionZoneOp.java",
  "functionStartLine": 361,
  "functionEndLine": 377,
  "numCommitsSeen": 25,
  "timeTaken": 2615,
  "changeHistory": [
    "2c6cfad5a31ca4d9126ecd2b3c43cca8543aacb4",
    "1000a2af04b24c123a3b08168f36b4e90420cab7"
  ],
  "changeHistoryShort": {
    "2c6cfad5a31ca4d9126ecd2b3c43cca8543aacb4": "Ybodychange",
    "1000a2af04b24c123a3b08168f36b4e90420cab7": "Yintroduced"
  },
  "changeHistoryDetails": {
    "2c6cfad5a31ca4d9126ecd2b3c43cca8543aacb4": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-13087. Snapshotted encryption zone information should be immutable. Contributed by LiXin Ge.\n",
      "commitDate": "29/03/18 3:46 PM",
      "commitName": "2c6cfad5a31ca4d9126ecd2b3c43cca8543aacb4",
      "commitAuthor": "Xiao Chen",
      "commitDateOld": "27/02/18 8:53 AM",
      "commitNameOld": "cd4a97bf80f1170175447b95b95ce78d717d86ff",
      "commitAuthorOld": "Inigo Goiri",
      "daysBetweenCommits": 30.25,
      "commitsBetweenForRepo": 357,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,17 @@\n   private static ZoneEncryptionInfoProto getZoneEncryptionInfoProto(\n       final INodesInPath iip) throws IOException {\n-    final XAttr fileXAttr \u003d FSDirXAttrOp\n-        .unprotectedGetXAttrByPrefixedName(iip, CRYPTO_XATTR_ENCRYPTION_ZONE);\n+    final XAttr fileXAttr \u003d FSDirXAttrOp.unprotectedGetXAttrByPrefixedName(\n+        iip.getLastINode(), iip.getPathSnapshotId(),\n+        CRYPTO_XATTR_ENCRYPTION_ZONE);\n     if (fileXAttr \u003d\u003d null) {\n       throw new IOException(\n           \"Could not find reencryption XAttr for file \" + iip.getPath());\n     }\n     try {\n       return ZoneEncryptionInfoProto.parseFrom(fileXAttr.getValue());\n     } catch (InvalidProtocolBufferException e) {\n       throw new IOException(\n           \"Could not parse file encryption info for \" + \"inode \" + iip\n               .getPath(), e);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private static ZoneEncryptionInfoProto getZoneEncryptionInfoProto(\n      final INodesInPath iip) throws IOException {\n    final XAttr fileXAttr \u003d FSDirXAttrOp.unprotectedGetXAttrByPrefixedName(\n        iip.getLastINode(), iip.getPathSnapshotId(),\n        CRYPTO_XATTR_ENCRYPTION_ZONE);\n    if (fileXAttr \u003d\u003d null) {\n      throw new IOException(\n          \"Could not find reencryption XAttr for file \" + iip.getPath());\n    }\n    try {\n      return ZoneEncryptionInfoProto.parseFrom(fileXAttr.getValue());\n    } catch (InvalidProtocolBufferException e) {\n      throw new IOException(\n          \"Could not parse file encryption info for \" + \"inode \" + iip\n              .getPath(), e);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirEncryptionZoneOp.java",
      "extendedDetails": {}
    },
    "1000a2af04b24c123a3b08168f36b4e90420cab7": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-10899. Add functionality to re-encrypt EDEKs.\n",
      "commitDate": "23/08/17 5:06 PM",
      "commitName": "1000a2af04b24c123a3b08168f36b4e90420cab7",
      "commitAuthor": "Xiao Chen",
      "diff": "@@ -0,0 +1,16 @@\n+  private static ZoneEncryptionInfoProto getZoneEncryptionInfoProto(\n+      final INodesInPath iip) throws IOException {\n+    final XAttr fileXAttr \u003d FSDirXAttrOp\n+        .unprotectedGetXAttrByPrefixedName(iip, CRYPTO_XATTR_ENCRYPTION_ZONE);\n+    if (fileXAttr \u003d\u003d null) {\n+      throw new IOException(\n+          \"Could not find reencryption XAttr for file \" + iip.getPath());\n+    }\n+    try {\n+      return ZoneEncryptionInfoProto.parseFrom(fileXAttr.getValue());\n+    } catch (InvalidProtocolBufferException e) {\n+      throw new IOException(\n+          \"Could not parse file encryption info for \" + \"inode \" + iip\n+              .getPath(), e);\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private static ZoneEncryptionInfoProto getZoneEncryptionInfoProto(\n      final INodesInPath iip) throws IOException {\n    final XAttr fileXAttr \u003d FSDirXAttrOp\n        .unprotectedGetXAttrByPrefixedName(iip, CRYPTO_XATTR_ENCRYPTION_ZONE);\n    if (fileXAttr \u003d\u003d null) {\n      throw new IOException(\n          \"Could not find reencryption XAttr for file \" + iip.getPath());\n    }\n    try {\n      return ZoneEncryptionInfoProto.parseFrom(fileXAttr.getValue());\n    } catch (InvalidProtocolBufferException e) {\n      throw new IOException(\n          \"Could not parse file encryption info for \" + \"inode \" + iip\n              .getPath(), e);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirEncryptionZoneOp.java"
    }
  }
}