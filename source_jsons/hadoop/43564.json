{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "ServiceMaster.java",
  "functionName": "main",
  "functionId": "main___args-String[]",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-applications/hadoop-yarn-services/hadoop-yarn-services-core/src/main/java/org/apache/hadoop/yarn/service/ServiceMaster.java",
  "functionStartLine": 320,
  "functionEndLine": 351,
  "numCommitsSeen": 14,
  "timeTaken": 3630,
  "changeHistory": [
    "7dd26d5378483cdbce1dc594e8650a96c2976281",
    "d30d57828fddaa8667de49af879cde999907c7f6",
    "ba7ed7b66a48c61086ea837f39ff0f22ffe31eca",
    "541b64c7985db425c5ce8bd5f71a2d5980809708",
    "40ab068eabe50875449d601471619a4e82fff86d",
    "1888318c89776f0bf354c1b13e3ee169e14ff638"
  ],
  "changeHistoryShort": {
    "7dd26d5378483cdbce1dc594e8650a96c2976281": "Ybodychange",
    "d30d57828fddaa8667de49af879cde999907c7f6": "Ybodychange",
    "ba7ed7b66a48c61086ea837f39ff0f22ffe31eca": "Ybodychange",
    "541b64c7985db425c5ce8bd5f71a2d5980809708": "Ybodychange",
    "40ab068eabe50875449d601471619a4e82fff86d": "Yfilerename",
    "1888318c89776f0bf354c1b13e3ee169e14ff638": "Yintroduced"
  },
  "changeHistoryDetails": {
    "7dd26d5378483cdbce1dc594e8650a96c2976281": {
      "type": "Ybodychange",
      "commitMessage": "YARN-8308.  Fixed YARN Service AM failure with HDFS token renewal.\n            Contributed by Gour Saha\n",
      "commitDate": "31/05/18 6:09 PM",
      "commitName": "7dd26d5378483cdbce1dc594e8650a96c2976281",
      "commitAuthor": "Eric Yang",
      "commitDateOld": "11/05/18 12:49 PM",
      "commitNameOld": "ca612e353fc3e3766868ec0816de035e48b1f5b4",
      "commitAuthorOld": "Billie Rinaldi",
      "daysBetweenCommits": 20.22,
      "commitsBetweenForRepo": 173,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,23 +1,32 @@\n   public static void main(String[] args) throws Exception {\n     Thread.setDefaultUncaughtExceptionHandler(new YarnUncaughtExceptionHandler());\n     org.apache.hadoop.util.StringUtils\n         .startupShutdownMessage(ServiceMaster.class, args, LOG);\n     try {\n       ServiceMaster serviceMaster \u003d new ServiceMaster(\"Service Master\");\n       ShutdownHookManager.get()\n           .addShutdownHook(new CompositeServiceShutdownHook(serviceMaster), 30);\n       YarnConfiguration conf \u003d new YarnConfiguration();\n       Options opts \u003d new Options();\n       opts.addOption(YARNFILE_OPTION, true, \"HDFS path to JSON service \" +\n           \"specification\");\n       opts.getOption(YARNFILE_OPTION).setRequired(true);\n+      opts.addOption(SERVICE_NAME_OPTION, true, \"Service name\");\n+      opts.getOption(SERVICE_NAME_OPTION).setRequired(true);\n+      opts.addOption(KEYTAB_OPTION, true, \"Service AM keytab\");\n+      opts.addOption(PRINCIPAL_NAME_OPTION, true,\n+          \"Service AM keytab principal\");\n       GenericOptionsParser parser \u003d new GenericOptionsParser(conf, opts, args);\n       CommandLine cmdLine \u003d parser.getCommandLine();\n       serviceMaster.serviceDefPath \u003d cmdLine.getOptionValue(YARNFILE_OPTION);\n+      serviceMaster.serviceName \u003d cmdLine.getOptionValue(SERVICE_NAME_OPTION);\n+      serviceMaster.serviceKeytab \u003d cmdLine.getOptionValue(KEYTAB_OPTION);\n+      serviceMaster.servicePrincipalName \u003d cmdLine\n+          .getOptionValue(PRINCIPAL_NAME_OPTION);\n       serviceMaster.init(conf);\n       serviceMaster.start();\n     } catch (Throwable t) {\n       LOG.error(\"Error starting service master\", t);\n       ExitUtil.terminate(1, \"Error starting service master\");\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void main(String[] args) throws Exception {\n    Thread.setDefaultUncaughtExceptionHandler(new YarnUncaughtExceptionHandler());\n    org.apache.hadoop.util.StringUtils\n        .startupShutdownMessage(ServiceMaster.class, args, LOG);\n    try {\n      ServiceMaster serviceMaster \u003d new ServiceMaster(\"Service Master\");\n      ShutdownHookManager.get()\n          .addShutdownHook(new CompositeServiceShutdownHook(serviceMaster), 30);\n      YarnConfiguration conf \u003d new YarnConfiguration();\n      Options opts \u003d new Options();\n      opts.addOption(YARNFILE_OPTION, true, \"HDFS path to JSON service \" +\n          \"specification\");\n      opts.getOption(YARNFILE_OPTION).setRequired(true);\n      opts.addOption(SERVICE_NAME_OPTION, true, \"Service name\");\n      opts.getOption(SERVICE_NAME_OPTION).setRequired(true);\n      opts.addOption(KEYTAB_OPTION, true, \"Service AM keytab\");\n      opts.addOption(PRINCIPAL_NAME_OPTION, true,\n          \"Service AM keytab principal\");\n      GenericOptionsParser parser \u003d new GenericOptionsParser(conf, opts, args);\n      CommandLine cmdLine \u003d parser.getCommandLine();\n      serviceMaster.serviceDefPath \u003d cmdLine.getOptionValue(YARNFILE_OPTION);\n      serviceMaster.serviceName \u003d cmdLine.getOptionValue(SERVICE_NAME_OPTION);\n      serviceMaster.serviceKeytab \u003d cmdLine.getOptionValue(KEYTAB_OPTION);\n      serviceMaster.servicePrincipalName \u003d cmdLine\n          .getOptionValue(PRINCIPAL_NAME_OPTION);\n      serviceMaster.init(conf);\n      serviceMaster.start();\n    } catch (Throwable t) {\n      LOG.error(\"Error starting service master\", t);\n      ExitUtil.terminate(1, \"Error starting service master\");\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-applications/hadoop-yarn-services/hadoop-yarn-services-core/src/main/java/org/apache/hadoop/yarn/service/ServiceMaster.java",
      "extendedDetails": {}
    },
    "d30d57828fddaa8667de49af879cde999907c7f6": {
      "type": "Ybodychange",
      "commitMessage": "YARN-6669.  Implemented Kerberos security for YARN service framework.  (Contributed by Jian He)\n",
      "commitDate": "04/12/17 12:11 PM",
      "commitName": "d30d57828fddaa8667de49af879cde999907c7f6",
      "commitAuthor": "Eric Yang",
      "commitDateOld": "06/11/17 1:30 PM",
      "commitNameOld": "a127f7b0fbde3942ca4329d5463bb8fe421daf7b",
      "commitAuthorOld": "Billie Rinaldi",
      "daysBetweenCommits": 27.94,
      "commitsBetweenForRepo": 135,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,22 +1,23 @@\n   public static void main(String[] args) throws Exception {\n     Thread.setDefaultUncaughtExceptionHandler(new YarnUncaughtExceptionHandler());\n-    StringUtils.startupShutdownMessage(ServiceMaster.class, args, LOG);\n+    org.apache.hadoop.util.StringUtils\n+        .startupShutdownMessage(ServiceMaster.class, args, LOG);\n     try {\n       ServiceMaster serviceMaster \u003d new ServiceMaster(\"Service Master\");\n       ShutdownHookManager.get()\n           .addShutdownHook(new CompositeServiceShutdownHook(serviceMaster), 30);\n       YarnConfiguration conf \u003d new YarnConfiguration();\n       Options opts \u003d new Options();\n       opts.addOption(YARNFILE_OPTION, true, \"HDFS path to JSON service \" +\n           \"specification\");\n       opts.getOption(YARNFILE_OPTION).setRequired(true);\n       GenericOptionsParser parser \u003d new GenericOptionsParser(conf, opts, args);\n       CommandLine cmdLine \u003d parser.getCommandLine();\n       serviceMaster.serviceDefPath \u003d cmdLine.getOptionValue(YARNFILE_OPTION);\n       serviceMaster.init(conf);\n       serviceMaster.start();\n     } catch (Throwable t) {\n       LOG.error(\"Error starting service master\", t);\n       ExitUtil.terminate(1, \"Error starting service master\");\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void main(String[] args) throws Exception {\n    Thread.setDefaultUncaughtExceptionHandler(new YarnUncaughtExceptionHandler());\n    org.apache.hadoop.util.StringUtils\n        .startupShutdownMessage(ServiceMaster.class, args, LOG);\n    try {\n      ServiceMaster serviceMaster \u003d new ServiceMaster(\"Service Master\");\n      ShutdownHookManager.get()\n          .addShutdownHook(new CompositeServiceShutdownHook(serviceMaster), 30);\n      YarnConfiguration conf \u003d new YarnConfiguration();\n      Options opts \u003d new Options();\n      opts.addOption(YARNFILE_OPTION, true, \"HDFS path to JSON service \" +\n          \"specification\");\n      opts.getOption(YARNFILE_OPTION).setRequired(true);\n      GenericOptionsParser parser \u003d new GenericOptionsParser(conf, opts, args);\n      CommandLine cmdLine \u003d parser.getCommandLine();\n      serviceMaster.serviceDefPath \u003d cmdLine.getOptionValue(YARNFILE_OPTION);\n      serviceMaster.init(conf);\n      serviceMaster.start();\n    } catch (Throwable t) {\n      LOG.error(\"Error starting service master\", t);\n      ExitUtil.terminate(1, \"Error starting service master\");\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-applications/hadoop-yarn-services/hadoop-yarn-services-core/src/main/java/org/apache/hadoop/yarn/service/ServiceMaster.java",
      "extendedDetails": {}
    },
    "ba7ed7b66a48c61086ea837f39ff0f22ffe31eca": {
      "type": "Ybodychange",
      "commitMessage": "YARN-7384. Remove apiserver cmd and merge service cmd into application cmd. Contributed by Billie Rinaldi\n",
      "commitDate": "06/11/17 1:30 PM",
      "commitName": "ba7ed7b66a48c61086ea837f39ff0f22ffe31eca",
      "commitAuthor": "Jian He",
      "commitDateOld": "06/11/17 1:30 PM",
      "commitNameOld": "541b64c7985db425c5ce8bd5f71a2d5980809708",
      "commitAuthorOld": "Gour Saha",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 17,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,22 @@\n   public static void main(String[] args) throws Exception {\n     Thread.setDefaultUncaughtExceptionHandler(new YarnUncaughtExceptionHandler());\n     StringUtils.startupShutdownMessage(ServiceMaster.class, args, LOG);\n-    amArgs \u003d new ServiceAMArgs(args);\n-    amArgs.parse();\n     try {\n       ServiceMaster serviceMaster \u003d new ServiceMaster(\"Service Master\");\n       ShutdownHookManager.get()\n           .addShutdownHook(new CompositeServiceShutdownHook(serviceMaster), 30);\n       YarnConfiguration conf \u003d new YarnConfiguration();\n-      new GenericOptionsParser(conf, args);\n+      Options opts \u003d new Options();\n+      opts.addOption(YARNFILE_OPTION, true, \"HDFS path to JSON service \" +\n+          \"specification\");\n+      opts.getOption(YARNFILE_OPTION).setRequired(true);\n+      GenericOptionsParser parser \u003d new GenericOptionsParser(conf, opts, args);\n+      CommandLine cmdLine \u003d parser.getCommandLine();\n+      serviceMaster.serviceDefPath \u003d cmdLine.getOptionValue(YARNFILE_OPTION);\n       serviceMaster.init(conf);\n       serviceMaster.start();\n     } catch (Throwable t) {\n       LOG.error(\"Error starting service master\", t);\n       ExitUtil.terminate(1, \"Error starting service master\");\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void main(String[] args) throws Exception {\n    Thread.setDefaultUncaughtExceptionHandler(new YarnUncaughtExceptionHandler());\n    StringUtils.startupShutdownMessage(ServiceMaster.class, args, LOG);\n    try {\n      ServiceMaster serviceMaster \u003d new ServiceMaster(\"Service Master\");\n      ShutdownHookManager.get()\n          .addShutdownHook(new CompositeServiceShutdownHook(serviceMaster), 30);\n      YarnConfiguration conf \u003d new YarnConfiguration();\n      Options opts \u003d new Options();\n      opts.addOption(YARNFILE_OPTION, true, \"HDFS path to JSON service \" +\n          \"specification\");\n      opts.getOption(YARNFILE_OPTION).setRequired(true);\n      GenericOptionsParser parser \u003d new GenericOptionsParser(conf, opts, args);\n      CommandLine cmdLine \u003d parser.getCommandLine();\n      serviceMaster.serviceDefPath \u003d cmdLine.getOptionValue(YARNFILE_OPTION);\n      serviceMaster.init(conf);\n      serviceMaster.start();\n    } catch (Throwable t) {\n      LOG.error(\"Error starting service master\", t);\n      ExitUtil.terminate(1, \"Error starting service master\");\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-applications/hadoop-yarn-services/hadoop-yarn-services-core/src/main/java/org/apache/hadoop/yarn/service/ServiceMaster.java",
      "extendedDetails": {}
    },
    "541b64c7985db425c5ce8bd5f71a2d5980809708": {
      "type": "Ybodychange",
      "commitMessage": "YARN-7165. Miscellaneous fixes in yarn-native-services. Contributed by Jian He\n",
      "commitDate": "06/11/17 1:30 PM",
      "commitName": "541b64c7985db425c5ce8bd5f71a2d5980809708",
      "commitAuthor": "Gour Saha",
      "commitDateOld": "06/11/17 1:30 PM",
      "commitNameOld": "40ab068eabe50875449d601471619a4e82fff86d",
      "commitAuthorOld": "Billie Rinaldi",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 8,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,18 @@\n   public static void main(String[] args) throws Exception {\n     Thread.setDefaultUncaughtExceptionHandler(new YarnUncaughtExceptionHandler());\n     StringUtils.startupShutdownMessage(ServiceMaster.class, args, LOG);\n-    amArgs \u003d new SliderAMArgs(args);\n+    amArgs \u003d new ServiceAMArgs(args);\n     amArgs.parse();\n     try {\n       ServiceMaster serviceMaster \u003d new ServiceMaster(\"Service Master\");\n       ShutdownHookManager.get()\n           .addShutdownHook(new CompositeServiceShutdownHook(serviceMaster), 30);\n       YarnConfiguration conf \u003d new YarnConfiguration();\n       new GenericOptionsParser(conf, args);\n       serviceMaster.init(conf);\n       serviceMaster.start();\n     } catch (Throwable t) {\n       LOG.error(\"Error starting service master\", t);\n       ExitUtil.terminate(1, \"Error starting service master\");\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void main(String[] args) throws Exception {\n    Thread.setDefaultUncaughtExceptionHandler(new YarnUncaughtExceptionHandler());\n    StringUtils.startupShutdownMessage(ServiceMaster.class, args, LOG);\n    amArgs \u003d new ServiceAMArgs(args);\n    amArgs.parse();\n    try {\n      ServiceMaster serviceMaster \u003d new ServiceMaster(\"Service Master\");\n      ShutdownHookManager.get()\n          .addShutdownHook(new CompositeServiceShutdownHook(serviceMaster), 30);\n      YarnConfiguration conf \u003d new YarnConfiguration();\n      new GenericOptionsParser(conf, args);\n      serviceMaster.init(conf);\n      serviceMaster.start();\n    } catch (Throwable t) {\n      LOG.error(\"Error starting service master\", t);\n      ExitUtil.terminate(1, \"Error starting service master\");\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-applications/hadoop-yarn-services/hadoop-yarn-services-core/src/main/java/org/apache/hadoop/yarn/service/ServiceMaster.java",
      "extendedDetails": {}
    },
    "40ab068eabe50875449d601471619a4e82fff86d": {
      "type": "Yfilerename",
      "commitMessage": "YARN-7091. Rename application to service in yarn-native-services. Contributed by Jian He\n",
      "commitDate": "06/11/17 1:30 PM",
      "commitName": "40ab068eabe50875449d601471619a4e82fff86d",
      "commitAuthor": "Billie Rinaldi",
      "commitDateOld": "06/11/17 1:30 PM",
      "commitNameOld": "2ba38ce8ecb1cf3836fab48cdb2c5ae7e1b5427d",
      "commitAuthorOld": "Gour Saha",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  public static void main(String[] args) throws Exception {\n    Thread.setDefaultUncaughtExceptionHandler(new YarnUncaughtExceptionHandler());\n    StringUtils.startupShutdownMessage(ServiceMaster.class, args, LOG);\n    amArgs \u003d new SliderAMArgs(args);\n    amArgs.parse();\n    try {\n      ServiceMaster serviceMaster \u003d new ServiceMaster(\"Service Master\");\n      ShutdownHookManager.get()\n          .addShutdownHook(new CompositeServiceShutdownHook(serviceMaster), 30);\n      YarnConfiguration conf \u003d new YarnConfiguration();\n      new GenericOptionsParser(conf, args);\n      serviceMaster.init(conf);\n      serviceMaster.start();\n    } catch (Throwable t) {\n      LOG.error(\"Error starting service master\", t);\n      ExitUtil.terminate(1, \"Error starting service master\");\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-applications/hadoop-yarn-services/hadoop-yarn-services-core/src/main/java/org/apache/hadoop/yarn/service/ServiceMaster.java",
      "extendedDetails": {
        "oldPath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-applications/hadoop-yarn-slider/hadoop-yarn-slider-core/src/main/java/org/apache/hadoop/yarn/service/ServiceMaster.java",
        "newPath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-applications/hadoop-yarn-services/hadoop-yarn-services-core/src/main/java/org/apache/hadoop/yarn/service/ServiceMaster.java"
      }
    },
    "1888318c89776f0bf354c1b13e3ee169e14ff638": {
      "type": "Yintroduced",
      "commitMessage": "YARN-6903. Yarn-native-service framework core rewrite. Contributed by Jian He\n",
      "commitDate": "06/11/17 1:30 PM",
      "commitName": "1888318c89776f0bf354c1b13e3ee169e14ff638",
      "commitAuthor": "Billie Rinaldi",
      "diff": "@@ -0,0 +1,18 @@\n+  public static void main(String[] args) throws Exception {\n+    Thread.setDefaultUncaughtExceptionHandler(new YarnUncaughtExceptionHandler());\n+    StringUtils.startupShutdownMessage(ServiceMaster.class, args, LOG);\n+    amArgs \u003d new SliderAMArgs(args);\n+    amArgs.parse();\n+    try {\n+      ServiceMaster serviceMaster \u003d new ServiceMaster(\"Service Master\");\n+      ShutdownHookManager.get()\n+          .addShutdownHook(new CompositeServiceShutdownHook(serviceMaster), 30);\n+      YarnConfiguration conf \u003d new YarnConfiguration();\n+      new GenericOptionsParser(conf, args);\n+      serviceMaster.init(conf);\n+      serviceMaster.start();\n+    } catch (Throwable t) {\n+      LOG.error(\"Error starting service master\", t);\n+      ExitUtil.terminate(1, \"Error starting service master\");\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public static void main(String[] args) throws Exception {\n    Thread.setDefaultUncaughtExceptionHandler(new YarnUncaughtExceptionHandler());\n    StringUtils.startupShutdownMessage(ServiceMaster.class, args, LOG);\n    amArgs \u003d new SliderAMArgs(args);\n    amArgs.parse();\n    try {\n      ServiceMaster serviceMaster \u003d new ServiceMaster(\"Service Master\");\n      ShutdownHookManager.get()\n          .addShutdownHook(new CompositeServiceShutdownHook(serviceMaster), 30);\n      YarnConfiguration conf \u003d new YarnConfiguration();\n      new GenericOptionsParser(conf, args);\n      serviceMaster.init(conf);\n      serviceMaster.start();\n    } catch (Throwable t) {\n      LOG.error(\"Error starting service master\", t);\n      ExitUtil.terminate(1, \"Error starting service master\");\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-applications/hadoop-yarn-slider/hadoop-yarn-slider-core/src/main/java/org/apache/hadoop/yarn/service/ServiceMaster.java"
    }
  }
}