{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "UnmanagedApplicationManager.java",
  "functionName": "createUAMProxy",
  "functionId": "createUAMProxy___amrmToken-Token__AMRMTokenIdentifier__",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-common/src/main/java/org/apache/hadoop/yarn/server/uam/UnmanagedApplicationManager.java",
  "functionStartLine": 197,
  "functionEndLine": 204,
  "numCommitsSeen": 13,
  "timeTaken": 3952,
  "changeHistory": [
    "c3d22d3b4569b7f87af4ee4abfcc284deebe90de",
    "02b9bfdf9e4bd0b3c05ca5fd75399dedcb656e09",
    "f1525825623a1307b5aa55c456b6afa3e0c61135",
    "8736fc39ac3b3de168d2c216f3d1c0edb48fb3f9",
    "ea9b608237e7f2cf9b1e36b0f78c9674ec84096f",
    "d5f66888b8d767ee6706fab9950c194a1bf26d32"
  ],
  "changeHistoryShort": {
    "c3d22d3b4569b7f87af4ee4abfcc284deebe90de": "Ybodychange",
    "02b9bfdf9e4bd0b3c05ca5fd75399dedcb656e09": "Ybodychange",
    "f1525825623a1307b5aa55c456b6afa3e0c61135": "Ybodychange",
    "8736fc39ac3b3de168d2c216f3d1c0edb48fb3f9": "Ybodychange",
    "ea9b608237e7f2cf9b1e36b0f78c9674ec84096f": "Ybodychange",
    "d5f66888b8d767ee6706fab9950c194a1bf26d32": "Yintroduced"
  },
  "changeHistoryDetails": {
    "c3d22d3b4569b7f87af4ee4abfcc284deebe90de": {
      "type": "Ybodychange",
      "commitMessage": "YARN-7652. Handle AM register requests asynchronously in FederationInterceptor. Contributed by Botong Huang.\n",
      "commitDate": "09/10/18 10:29 AM",
      "commitName": "c3d22d3b4569b7f87af4ee4abfcc284deebe90de",
      "commitAuthor": "Inigo Goiri",
      "commitDateOld": "24/09/18 11:37 AM",
      "commitNameOld": "3090922805699b8374a359e92323884a4177dc4e",
      "commitAuthorOld": "Giovanni Matteo Fumarola",
      "daysBetweenCommits": 14.95,
      "commitsBetweenForRepo": 114,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,10 +1,8 @@\n   protected void createUAMProxy(Token\u003cAMRMTokenIdentifier\u003e amrmToken)\n       throws IOException {\n     this.userUgi \u003d UserGroupInformation.createProxyUser(\n         this.applicationId.toString(), UserGroupInformation.getCurrentUser());\n     this.rmProxyRelayer.setRMClient(createRMProxy(\n         ApplicationMasterProtocol.class, this.conf, this.userUgi, amrmToken));\n-\n-    this.heartbeatHandler.setAMRMClientRelayer(this.rmProxyRelayer);\n     this.heartbeatHandler.setUGI(this.userUgi);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected void createUAMProxy(Token\u003cAMRMTokenIdentifier\u003e amrmToken)\n      throws IOException {\n    this.userUgi \u003d UserGroupInformation.createProxyUser(\n        this.applicationId.toString(), UserGroupInformation.getCurrentUser());\n    this.rmProxyRelayer.setRMClient(createRMProxy(\n        ApplicationMasterProtocol.class, this.conf, this.userUgi, amrmToken));\n    this.heartbeatHandler.setUGI(this.userUgi);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-common/src/main/java/org/apache/hadoop/yarn/server/uam/UnmanagedApplicationManager.java",
      "extendedDetails": {}
    },
    "02b9bfdf9e4bd0b3c05ca5fd75399dedcb656e09": {
      "type": "Ybodychange",
      "commitMessage": "YARN-8658. [AMRMProxy] Metrics for AMRMClientRelayer inside FederationInterceptor. Contributed by Young Chen.\n",
      "commitDate": "12/09/18 11:46 AM",
      "commitName": "02b9bfdf9e4bd0b3c05ca5fd75399dedcb656e09",
      "commitAuthor": "Giovanni Matteo Fumarola",
      "commitDateOld": "27/08/18 10:32 AM",
      "commitNameOld": "f1525825623a1307b5aa55c456b6afa3e0c61135",
      "commitAuthorOld": "Giovanni Matteo Fumarola",
      "daysBetweenCommits": 16.05,
      "commitsBetweenForRepo": 142,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,11 +1,10 @@\n   protected void createUAMProxy(Token\u003cAMRMTokenIdentifier\u003e amrmToken)\n       throws IOException {\n     this.userUgi \u003d UserGroupInformation.createProxyUser(\n         this.applicationId.toString(), UserGroupInformation.getCurrentUser());\n-    this.rmProxyRelayer \u003d\n-        new AMRMClientRelayer(createRMProxy(ApplicationMasterProtocol.class,\n-            this.conf, this.userUgi, amrmToken), this.applicationId);\n+    this.rmProxyRelayer.setRMClient(createRMProxy(\n+        ApplicationMasterProtocol.class, this.conf, this.userUgi, amrmToken));\n \n     this.heartbeatHandler.setAMRMClientRelayer(this.rmProxyRelayer);\n     this.heartbeatHandler.setUGI(this.userUgi);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected void createUAMProxy(Token\u003cAMRMTokenIdentifier\u003e amrmToken)\n      throws IOException {\n    this.userUgi \u003d UserGroupInformation.createProxyUser(\n        this.applicationId.toString(), UserGroupInformation.getCurrentUser());\n    this.rmProxyRelayer.setRMClient(createRMProxy(\n        ApplicationMasterProtocol.class, this.conf, this.userUgi, amrmToken));\n\n    this.heartbeatHandler.setAMRMClientRelayer(this.rmProxyRelayer);\n    this.heartbeatHandler.setUGI(this.userUgi);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-common/src/main/java/org/apache/hadoop/yarn/server/uam/UnmanagedApplicationManager.java",
      "extendedDetails": {}
    },
    "f1525825623a1307b5aa55c456b6afa3e0c61135": {
      "type": "Ybodychange",
      "commitMessage": "YARN-8705. Refactor the UAM heartbeat thread in preparation for YARN-8696. Contributed by Botong Huang.\n",
      "commitDate": "27/08/18 10:32 AM",
      "commitName": "f1525825623a1307b5aa55c456b6afa3e0c61135",
      "commitAuthor": "Giovanni Matteo Fumarola",
      "commitDateOld": "20/08/18 12:22 PM",
      "commitNameOld": "8736fc39ac3b3de168d2c216f3d1c0edb48fb3f9",
      "commitAuthorOld": "Giovanni Matteo Fumarola",
      "daysBetweenCommits": 6.92,
      "commitsBetweenForRepo": 33,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,8 +1,11 @@\n   protected void createUAMProxy(Token\u003cAMRMTokenIdentifier\u003e amrmToken)\n       throws IOException {\n     this.userUgi \u003d UserGroupInformation.createProxyUser(\n         this.applicationId.toString(), UserGroupInformation.getCurrentUser());\n     this.rmProxyRelayer \u003d\n         new AMRMClientRelayer(createRMProxy(ApplicationMasterProtocol.class,\n             this.conf, this.userUgi, amrmToken), this.applicationId);\n+\n+    this.heartbeatHandler.setAMRMClientRelayer(this.rmProxyRelayer);\n+    this.heartbeatHandler.setUGI(this.userUgi);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected void createUAMProxy(Token\u003cAMRMTokenIdentifier\u003e amrmToken)\n      throws IOException {\n    this.userUgi \u003d UserGroupInformation.createProxyUser(\n        this.applicationId.toString(), UserGroupInformation.getCurrentUser());\n    this.rmProxyRelayer \u003d\n        new AMRMClientRelayer(createRMProxy(ApplicationMasterProtocol.class,\n            this.conf, this.userUgi, amrmToken), this.applicationId);\n\n    this.heartbeatHandler.setAMRMClientRelayer(this.rmProxyRelayer);\n    this.heartbeatHandler.setUGI(this.userUgi);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-common/src/main/java/org/apache/hadoop/yarn/server/uam/UnmanagedApplicationManager.java",
      "extendedDetails": {}
    },
    "8736fc39ac3b3de168d2c216f3d1c0edb48fb3f9": {
      "type": "Ybodychange",
      "commitMessage": "YARN-8673. [AMRMProxy] More robust responseId resync after an YarnRM master slave switch. Contributed by Botong Huang.\n",
      "commitDate": "20/08/18 12:22 PM",
      "commitName": "8736fc39ac3b3de168d2c216f3d1c0edb48fb3f9",
      "commitAuthor": "Giovanni Matteo Fumarola",
      "commitDateOld": "09/07/18 12:27 PM",
      "commitNameOld": "ea9b608237e7f2cf9b1e36b0f78c9674ec84096f",
      "commitAuthorOld": "Giovanni Matteo Fumarola",
      "daysBetweenCommits": 42.0,
      "commitsBetweenForRepo": 336,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,8 +1,8 @@\n   protected void createUAMProxy(Token\u003cAMRMTokenIdentifier\u003e amrmToken)\n       throws IOException {\n     this.userUgi \u003d UserGroupInformation.createProxyUser(\n         this.applicationId.toString(), UserGroupInformation.getCurrentUser());\n     this.rmProxyRelayer \u003d\n         new AMRMClientRelayer(createRMProxy(ApplicationMasterProtocol.class,\n-            this.conf, this.userUgi, amrmToken));\n+            this.conf, this.userUgi, amrmToken), this.applicationId);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected void createUAMProxy(Token\u003cAMRMTokenIdentifier\u003e amrmToken)\n      throws IOException {\n    this.userUgi \u003d UserGroupInformation.createProxyUser(\n        this.applicationId.toString(), UserGroupInformation.getCurrentUser());\n    this.rmProxyRelayer \u003d\n        new AMRMClientRelayer(createRMProxy(ApplicationMasterProtocol.class,\n            this.conf, this.userUgi, amrmToken), this.applicationId);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-common/src/main/java/org/apache/hadoop/yarn/server/uam/UnmanagedApplicationManager.java",
      "extendedDetails": {}
    },
    "ea9b608237e7f2cf9b1e36b0f78c9674ec84096f": {
      "type": "Ybodychange",
      "commitMessage": "YARN-7899. [AMRMProxy] Stateful FederationInterceptor for pending requests. Contributed by Botong Huang.\n",
      "commitDate": "09/07/18 12:27 PM",
      "commitName": "ea9b608237e7f2cf9b1e36b0f78c9674ec84096f",
      "commitAuthor": "Giovanni Matteo Fumarola",
      "commitDateOld": "12/06/18 8:35 AM",
      "commitNameOld": "652bcbb3e4950758e61ce123ecc1798ae2b60a7f",
      "commitAuthorOld": "Akira Ajisaka",
      "daysBetweenCommits": 27.16,
      "commitsBetweenForRepo": 144,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,7 +1,8 @@\n   protected void createUAMProxy(Token\u003cAMRMTokenIdentifier\u003e amrmToken)\n       throws IOException {\n     this.userUgi \u003d UserGroupInformation.createProxyUser(\n         this.applicationId.toString(), UserGroupInformation.getCurrentUser());\n-    this.rmProxy \u003d createRMProxy(ApplicationMasterProtocol.class, this.conf,\n-        this.userUgi, amrmToken);\n+    this.rmProxyRelayer \u003d\n+        new AMRMClientRelayer(createRMProxy(ApplicationMasterProtocol.class,\n+            this.conf, this.userUgi, amrmToken));\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected void createUAMProxy(Token\u003cAMRMTokenIdentifier\u003e amrmToken)\n      throws IOException {\n    this.userUgi \u003d UserGroupInformation.createProxyUser(\n        this.applicationId.toString(), UserGroupInformation.getCurrentUser());\n    this.rmProxyRelayer \u003d\n        new AMRMClientRelayer(createRMProxy(ApplicationMasterProtocol.class,\n            this.conf, this.userUgi, amrmToken));\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-common/src/main/java/org/apache/hadoop/yarn/server/uam/UnmanagedApplicationManager.java",
      "extendedDetails": {}
    },
    "d5f66888b8d767ee6706fab9950c194a1bf26d32": {
      "type": "Yintroduced",
      "commitMessage": "YARN-6128. Add support for AMRMProxy HA. (Botong Huang via Subru).\n",
      "commitDate": "17/11/17 5:39 PM",
      "commitName": "d5f66888b8d767ee6706fab9950c194a1bf26d32",
      "commitAuthor": "Subru Krishnan",
      "diff": "@@ -0,0 +1,7 @@\n+  protected void createUAMProxy(Token\u003cAMRMTokenIdentifier\u003e amrmToken)\n+      throws IOException {\n+    this.userUgi \u003d UserGroupInformation.createProxyUser(\n+        this.applicationId.toString(), UserGroupInformation.getCurrentUser());\n+    this.rmProxy \u003d createRMProxy(ApplicationMasterProtocol.class, this.conf,\n+        this.userUgi, amrmToken);\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  protected void createUAMProxy(Token\u003cAMRMTokenIdentifier\u003e amrmToken)\n      throws IOException {\n    this.userUgi \u003d UserGroupInformation.createProxyUser(\n        this.applicationId.toString(), UserGroupInformation.getCurrentUser());\n    this.rmProxy \u003d createRMProxy(ApplicationMasterProtocol.class, this.conf,\n        this.userUgi, amrmToken);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-common/src/main/java/org/apache/hadoop/yarn/server/uam/UnmanagedApplicationManager.java"
    }
  }
}