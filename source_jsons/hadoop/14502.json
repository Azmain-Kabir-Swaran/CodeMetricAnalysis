{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "JournalNode.java",
  "functionName": "validateAndCreateJournalDir",
  "functionId": "validateAndCreateJournalDir___dir-File",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/qjournal/server/JournalNode.java",
  "functionStartLine": 192,
  "functionEndLine": 200,
  "numCommitsSeen": 32,
  "timeTaken": 1076,
  "changeHistory": [
    "415d03831914c01176b63fa3d7cd5fcff165c7fd",
    "160bfcd6c2e2bc4a4adfa397f0f716430a0832bb"
  ],
  "changeHistoryShort": {
    "415d03831914c01176b63fa3d7cd5fcff165c7fd": "Ybodychange",
    "160bfcd6c2e2bc4a4adfa397f0f716430a0832bb": "Yintroduced"
  },
  "changeHistoryDetails": {
    "415d03831914c01176b63fa3d7cd5fcff165c7fd": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-4604. TestJournalNode fails on Windows. Contributed by Ivan Mitic.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1457069 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "15/03/13 11:59 AM",
      "commitName": "415d03831914c01176b63fa3d7cd5fcff165c7fd",
      "commitAuthor": "Suresh Srinivas",
      "commitDateOld": "06/11/12 10:29 PM",
      "commitNameOld": "817a26b6c8518674bce326b85b5a65e538476f0c",
      "commitAuthorOld": "Aaron Myers",
      "daysBetweenCommits": 128.52,
      "commitsBetweenForRepo": 577,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,8 @@\n   private static void validateAndCreateJournalDir(File dir) throws IOException {\n     if (!dir.isAbsolute()) {\n       throw new IllegalArgumentException(\n           \"Journal dir \u0027\" + dir + \"\u0027 should be an absolute path\");\n     }\n \n-    if (!dir.exists() \u0026\u0026 !dir.mkdirs()) {\n-      throw new IOException(\"Could not create journal dir \u0027\" +\n-          dir + \"\u0027\");\n-    } else if (!dir.isDirectory()) {\n-      throw new IOException(\"Journal directory \u0027\" + dir + \"\u0027 is not \" +\n-          \"a directory\");\n-    }\n-    \n-    if (!dir.canWrite()) {\n-      throw new IOException(\"Unable to write to journal dir \u0027\" +\n-          dir + \"\u0027\");\n-    }\n+    DiskChecker.checkDir(dir);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private static void validateAndCreateJournalDir(File dir) throws IOException {\n    if (!dir.isAbsolute()) {\n      throw new IllegalArgumentException(\n          \"Journal dir \u0027\" + dir + \"\u0027 should be an absolute path\");\n    }\n\n    DiskChecker.checkDir(dir);\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/qjournal/server/JournalNode.java",
      "extendedDetails": {}
    },
    "160bfcd6c2e2bc4a4adfa397f0f716430a0832bb": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-3795. QJM: validate journal dir at startup. Contributed by Todd Lipcon.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-3077@1373178 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "14/08/12 5:52 PM",
      "commitName": "160bfcd6c2e2bc4a4adfa397f0f716430a0832bb",
      "commitAuthor": "Todd Lipcon",
      "diff": "@@ -0,0 +1,19 @@\n+  private static void validateAndCreateJournalDir(File dir) throws IOException {\n+    if (!dir.isAbsolute()) {\n+      throw new IllegalArgumentException(\n+          \"Journal dir \u0027\" + dir + \"\u0027 should be an absolute path\");\n+    }\n+\n+    if (!dir.exists() \u0026\u0026 !dir.mkdirs()) {\n+      throw new IOException(\"Could not create journal dir \u0027\" +\n+          dir + \"\u0027\");\n+    } else if (!dir.isDirectory()) {\n+      throw new IOException(\"Journal directory \u0027\" + dir + \"\u0027 is not \" +\n+          \"a directory\");\n+    }\n+    \n+    if (!dir.canWrite()) {\n+      throw new IOException(\"Unable to write to journal dir \u0027\" +\n+          dir + \"\u0027\");\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private static void validateAndCreateJournalDir(File dir) throws IOException {\n    if (!dir.isAbsolute()) {\n      throw new IllegalArgumentException(\n          \"Journal dir \u0027\" + dir + \"\u0027 should be an absolute path\");\n    }\n\n    if (!dir.exists() \u0026\u0026 !dir.mkdirs()) {\n      throw new IOException(\"Could not create journal dir \u0027\" +\n          dir + \"\u0027\");\n    } else if (!dir.isDirectory()) {\n      throw new IOException(\"Journal directory \u0027\" + dir + \"\u0027 is not \" +\n          \"a directory\");\n    }\n    \n    if (!dir.canWrite()) {\n      throw new IOException(\"Unable to write to journal dir \u0027\" +\n          dir + \"\u0027\");\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/qjournal/server/JournalNode.java"
    }
  }
}