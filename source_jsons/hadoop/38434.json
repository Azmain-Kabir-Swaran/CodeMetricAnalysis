{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "NodeAttributesManagerImpl.java",
  "functionName": "addNodeToAttribute",
  "functionId": "addNodeToAttribute___nodeHost-String__attributeMappings-Map__NodeAttribute,AttributeValue__",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/nodelabels/NodeAttributesManagerImpl.java",
  "functionStartLine": 246,
  "functionEndLine": 260,
  "numCommitsSeen": 18,
  "timeTaken": 2044,
  "changeHistory": [
    "8cf6a9a2bde9d4ccad95a514885634792889ec7f",
    "3b3b6efe2103244febfe6b4f61989e92bd7bb08a",
    "2f7712be09d5b68978547f95b1be2352cdd46266"
  ],
  "changeHistoryShort": {
    "8cf6a9a2bde9d4ccad95a514885634792889ec7f": "Ybodychange",
    "3b3b6efe2103244febfe6b4f61989e92bd7bb08a": "Ybodychange",
    "2f7712be09d5b68978547f95b1be2352cdd46266": "Yintroduced"
  },
  "changeHistoryDetails": {
    "8cf6a9a2bde9d4ccad95a514885634792889ec7f": {
      "type": "Ybodychange",
      "commitMessage": "YARN-7892. Revisit NodeAttribute class structure. Contributed by  Naganarasimha G R.\n",
      "commitDate": "12/09/18 3:31 AM",
      "commitName": "8cf6a9a2bde9d4ccad95a514885634792889ec7f",
      "commitAuthor": "bibinchundatt",
      "commitDateOld": "12/09/18 3:31 AM",
      "commitNameOld": "5dc7d6e0f3f46277f0615d61755970a7aa28b8d7",
      "commitAuthorOld": "Naganarasimha",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,11 +1,15 @@\n   private void addNodeToAttribute(String nodeHost,\n       Map\u003cNodeAttribute, AttributeValue\u003e attributeMappings) {\n-    for (NodeAttribute attribute : attributeMappings.keySet()) {\n-      RMNodeAttribute rmNodeAttribute \u003d clusterAttributes.get(attribute);\n+    for (Entry\u003cNodeAttribute, AttributeValue\u003e attributeEntry : attributeMappings\n+        .entrySet()) {\n+\n+      RMNodeAttribute rmNodeAttribute \u003d\n+          clusterAttributes.get(attributeEntry.getKey().getAttributeKey());\n       if (rmNodeAttribute !\u003d null) {\n-        rmNodeAttribute.addNode(nodeHost);\n+        rmNodeAttribute.addNode(nodeHost, attributeEntry.getValue());\n       } else {\n-        clusterAttributes.put(attribute, new RMNodeAttribute(attribute));\n+        clusterAttributes.put(attributeEntry.getKey().getAttributeKey(),\n+            new RMNodeAttribute(attributeEntry.getKey()));\n       }\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void addNodeToAttribute(String nodeHost,\n      Map\u003cNodeAttribute, AttributeValue\u003e attributeMappings) {\n    for (Entry\u003cNodeAttribute, AttributeValue\u003e attributeEntry : attributeMappings\n        .entrySet()) {\n\n      RMNodeAttribute rmNodeAttribute \u003d\n          clusterAttributes.get(attributeEntry.getKey().getAttributeKey());\n      if (rmNodeAttribute !\u003d null) {\n        rmNodeAttribute.addNode(nodeHost, attributeEntry.getValue());\n      } else {\n        clusterAttributes.put(attributeEntry.getKey().getAttributeKey(),\n            new RMNodeAttribute(attributeEntry.getKey()));\n      }\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/nodelabels/NodeAttributesManagerImpl.java",
      "extendedDetails": {}
    },
    "3b3b6efe2103244febfe6b4f61989e92bd7bb08a": {
      "type": "Ybodychange",
      "commitMessage": "YARN-7871. Node attributes reporting from NM to RM. Contributed by Weiwei Yang.\n",
      "commitDate": "12/09/18 3:31 AM",
      "commitName": "3b3b6efe2103244febfe6b4f61989e92bd7bb08a",
      "commitAuthor": "Naganarasimha",
      "commitDateOld": "12/09/18 3:31 AM",
      "commitNameOld": "86d024ef2a5844ac723c7b597689afa4b598ee27",
      "commitAuthorOld": "Naganarasimha",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,6 +1,11 @@\n   private void addNodeToAttribute(String nodeHost,\n       Map\u003cNodeAttribute, AttributeValue\u003e attributeMappings) {\n     for (NodeAttribute attribute : attributeMappings.keySet()) {\n-      clusterAttributes.get(attribute).addNode(nodeHost);\n+      RMNodeAttribute rmNodeAttribute \u003d clusterAttributes.get(attribute);\n+      if (rmNodeAttribute !\u003d null) {\n+        rmNodeAttribute.addNode(nodeHost);\n+      } else {\n+        clusterAttributes.put(attribute, new RMNodeAttribute(attribute));\n+      }\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void addNodeToAttribute(String nodeHost,\n      Map\u003cNodeAttribute, AttributeValue\u003e attributeMappings) {\n    for (NodeAttribute attribute : attributeMappings.keySet()) {\n      RMNodeAttribute rmNodeAttribute \u003d clusterAttributes.get(attribute);\n      if (rmNodeAttribute !\u003d null) {\n        rmNodeAttribute.addNode(nodeHost);\n      } else {\n        clusterAttributes.put(attribute, new RMNodeAttribute(attribute));\n      }\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/nodelabels/NodeAttributesManagerImpl.java",
      "extendedDetails": {}
    },
    "2f7712be09d5b68978547f95b1be2352cdd46266": {
      "type": "Yintroduced",
      "commitMessage": "YARN-6858. Attribute Manager to store and provide node attributes in RM. Contributed by Naganarasimha G R.\n",
      "commitDate": "12/09/18 3:31 AM",
      "commitName": "2f7712be09d5b68978547f95b1be2352cdd46266",
      "commitAuthor": "Sunil G",
      "diff": "@@ -0,0 +1,6 @@\n+  private void addNodeToAttribute(String nodeHost,\n+      Map\u003cNodeAttribute, AttributeValue\u003e attributeMappings) {\n+    for (NodeAttribute attribute : attributeMappings.keySet()) {\n+      clusterAttributes.get(attribute).addNode(nodeHost);\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private void addNodeToAttribute(String nodeHost,\n      Map\u003cNodeAttribute, AttributeValue\u003e attributeMappings) {\n    for (NodeAttribute attribute : attributeMappings.keySet()) {\n      clusterAttributes.get(attribute).addNode(nodeHost);\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/nodelabels/NodeAttributesManagerImpl.java"
    }
  }
}