{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "TimelineReaderServer.java",
  "functionName": "createTimelineReaderStore",
  "functionId": "createTimelineReaderStore___conf-Configuration(modifiers-final)",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-timelineservice/src/main/java/org/apache/hadoop/yarn/server/timelineservice/reader/TimelineReaderServer.java",
  "functionStartLine": 101,
  "functionEndLine": 119,
  "numCommitsSeen": 27,
  "timeTaken": 1982,
  "changeHistory": [
    "a5a55a54ab1568e941062ea3dabdd237f71f15c4",
    "0a9b085f052b5ebaf319bec7609c77d7f1684a4a",
    "d95dc89a02d5915363153e0d9254f2cc0cf73ca0",
    "e27642abf4deb12c6e8c47ffc891b41300494307"
  ],
  "changeHistoryShort": {
    "a5a55a54ab1568e941062ea3dabdd237f71f15c4": "Ymultichange(Ybodychange,Yparametermetachange)",
    "0a9b085f052b5ebaf319bec7609c77d7f1684a4a": "Ybodychange",
    "d95dc89a02d5915363153e0d9254f2cc0cf73ca0": "Ybodychange",
    "e27642abf4deb12c6e8c47ffc891b41300494307": "Yintroduced"
  },
  "changeHistoryDetails": {
    "a5a55a54ab1568e941062ea3dabdd237f71f15c4": {
      "type": "Ymultichange(Ybodychange,Yparametermetachange)",
      "commitMessage": "YARN-5922. Remove direct references of HBaseTimelineWriter/Reader in core ATS classes. Contributed by Haibo Chen.\n",
      "commitDate": "08/12/16 12:31 PM",
      "commitName": "a5a55a54ab1568e941062ea3dabdd237f71f15c4",
      "commitAuthor": "Sangjin Lee",
      "subchanges": [
        {
          "type": "Ybodychange",
          "commitMessage": "YARN-5922. Remove direct references of HBaseTimelineWriter/Reader in core ATS classes. Contributed by Haibo Chen.\n",
          "commitDate": "08/12/16 12:31 PM",
          "commitName": "a5a55a54ab1568e941062ea3dabdd237f71f15c4",
          "commitAuthor": "Sangjin Lee",
          "commitDateOld": "27/10/16 4:09 PM",
          "commitNameOld": "5877f20f9c3f6f0afa505715e9a2ee312475af17",
          "commitAuthorOld": "Robert Kanter",
          "daysBetweenCommits": 41.89,
          "commitsBetweenForRepo": 317,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,8 +1,19 @@\n-  private TimelineReader createTimelineReaderStore(Configuration conf) {\n-    TimelineReader readerStore \u003d ReflectionUtils.newInstance(conf.getClass(\n+  private TimelineReader createTimelineReaderStore(final Configuration conf) {\n+    String timelineReaderClassName \u003d conf.get(\n         YarnConfiguration.TIMELINE_SERVICE_READER_CLASS,\n-        HBaseTimelineReaderImpl.class, TimelineReader.class), conf);\n-    LOG.info(\"Using store \" + readerStore.getClass().getName());\n-    readerStore.init(conf);\n-    return readerStore;\n+        YarnConfiguration.DEFAULT_TIMELINE_SERVICE_READER_CLASS);\n+    LOG.info(\"Using store: \" + timelineReaderClassName);\n+    try {\n+      Class\u003c?\u003e timelineReaderClazz \u003d Class.forName(timelineReaderClassName);\n+      if (TimelineReader.class.isAssignableFrom(timelineReaderClazz)) {\n+        return (TimelineReader) ReflectionUtils.newInstance(\n+            timelineReaderClazz, conf);\n+      } else {\n+        throw new YarnRuntimeException(\"Class: \" + timelineReaderClassName\n+            + \" not instance of \" + TimelineReader.class.getCanonicalName());\n+      }\n+    } catch (ClassNotFoundException e) {\n+      throw new YarnRuntimeException(\"Could not instantiate TimelineReader: \"\n+          + timelineReaderClassName, e);\n+    }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private TimelineReader createTimelineReaderStore(final Configuration conf) {\n    String timelineReaderClassName \u003d conf.get(\n        YarnConfiguration.TIMELINE_SERVICE_READER_CLASS,\n        YarnConfiguration.DEFAULT_TIMELINE_SERVICE_READER_CLASS);\n    LOG.info(\"Using store: \" + timelineReaderClassName);\n    try {\n      Class\u003c?\u003e timelineReaderClazz \u003d Class.forName(timelineReaderClassName);\n      if (TimelineReader.class.isAssignableFrom(timelineReaderClazz)) {\n        return (TimelineReader) ReflectionUtils.newInstance(\n            timelineReaderClazz, conf);\n      } else {\n        throw new YarnRuntimeException(\"Class: \" + timelineReaderClassName\n            + \" not instance of \" + TimelineReader.class.getCanonicalName());\n      }\n    } catch (ClassNotFoundException e) {\n      throw new YarnRuntimeException(\"Could not instantiate TimelineReader: \"\n          + timelineReaderClassName, e);\n    }\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-timelineservice/src/main/java/org/apache/hadoop/yarn/server/timelineservice/reader/TimelineReaderServer.java",
          "extendedDetails": {}
        },
        {
          "type": "Yparametermetachange",
          "commitMessage": "YARN-5922. Remove direct references of HBaseTimelineWriter/Reader in core ATS classes. Contributed by Haibo Chen.\n",
          "commitDate": "08/12/16 12:31 PM",
          "commitName": "a5a55a54ab1568e941062ea3dabdd237f71f15c4",
          "commitAuthor": "Sangjin Lee",
          "commitDateOld": "27/10/16 4:09 PM",
          "commitNameOld": "5877f20f9c3f6f0afa505715e9a2ee312475af17",
          "commitAuthorOld": "Robert Kanter",
          "daysBetweenCommits": 41.89,
          "commitsBetweenForRepo": 317,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,8 +1,19 @@\n-  private TimelineReader createTimelineReaderStore(Configuration conf) {\n-    TimelineReader readerStore \u003d ReflectionUtils.newInstance(conf.getClass(\n+  private TimelineReader createTimelineReaderStore(final Configuration conf) {\n+    String timelineReaderClassName \u003d conf.get(\n         YarnConfiguration.TIMELINE_SERVICE_READER_CLASS,\n-        HBaseTimelineReaderImpl.class, TimelineReader.class), conf);\n-    LOG.info(\"Using store \" + readerStore.getClass().getName());\n-    readerStore.init(conf);\n-    return readerStore;\n+        YarnConfiguration.DEFAULT_TIMELINE_SERVICE_READER_CLASS);\n+    LOG.info(\"Using store: \" + timelineReaderClassName);\n+    try {\n+      Class\u003c?\u003e timelineReaderClazz \u003d Class.forName(timelineReaderClassName);\n+      if (TimelineReader.class.isAssignableFrom(timelineReaderClazz)) {\n+        return (TimelineReader) ReflectionUtils.newInstance(\n+            timelineReaderClazz, conf);\n+      } else {\n+        throw new YarnRuntimeException(\"Class: \" + timelineReaderClassName\n+            + \" not instance of \" + TimelineReader.class.getCanonicalName());\n+      }\n+    } catch (ClassNotFoundException e) {\n+      throw new YarnRuntimeException(\"Could not instantiate TimelineReader: \"\n+          + timelineReaderClassName, e);\n+    }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private TimelineReader createTimelineReaderStore(final Configuration conf) {\n    String timelineReaderClassName \u003d conf.get(\n        YarnConfiguration.TIMELINE_SERVICE_READER_CLASS,\n        YarnConfiguration.DEFAULT_TIMELINE_SERVICE_READER_CLASS);\n    LOG.info(\"Using store: \" + timelineReaderClassName);\n    try {\n      Class\u003c?\u003e timelineReaderClazz \u003d Class.forName(timelineReaderClassName);\n      if (TimelineReader.class.isAssignableFrom(timelineReaderClazz)) {\n        return (TimelineReader) ReflectionUtils.newInstance(\n            timelineReaderClazz, conf);\n      } else {\n        throw new YarnRuntimeException(\"Class: \" + timelineReaderClassName\n            + \" not instance of \" + TimelineReader.class.getCanonicalName());\n      }\n    } catch (ClassNotFoundException e) {\n      throw new YarnRuntimeException(\"Could not instantiate TimelineReader: \"\n          + timelineReaderClassName, e);\n    }\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-timelineservice/src/main/java/org/apache/hadoop/yarn/server/timelineservice/reader/TimelineReaderServer.java",
          "extendedDetails": {
            "oldValue": "[conf-Configuration]",
            "newValue": "[conf-Configuration(modifiers-final)]"
          }
        }
      ]
    },
    "0a9b085f052b5ebaf319bec7609c77d7f1684a4a": {
      "type": "Ybodychange",
      "commitMessage": "YARN-5189. Make HBaseTimeline[Reader|Writer]Impl default and move FileSystemTimeline*Impl. (Joep Rottinghuis and Sangjin Lee via gtcarrera9)\n",
      "commitDate": "10/07/16 8:46 AM",
      "commitName": "0a9b085f052b5ebaf319bec7609c77d7f1684a4a",
      "commitAuthor": "Li Lu",
      "commitDateOld": "10/07/16 8:45 AM",
      "commitNameOld": "960af7d4717b8a8949d0b2e43949e7daab45aa88",
      "commitAuthorOld": "Sangjin Lee",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 29,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,8 +1,8 @@\n   private TimelineReader createTimelineReaderStore(Configuration conf) {\n     TimelineReader readerStore \u003d ReflectionUtils.newInstance(conf.getClass(\n         YarnConfiguration.TIMELINE_SERVICE_READER_CLASS,\n-        FileSystemTimelineReaderImpl.class, TimelineReader.class), conf);\n+        HBaseTimelineReaderImpl.class, TimelineReader.class), conf);\n     LOG.info(\"Using store \" + readerStore.getClass().getName());\n     readerStore.init(conf);\n     return readerStore;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private TimelineReader createTimelineReaderStore(Configuration conf) {\n    TimelineReader readerStore \u003d ReflectionUtils.newInstance(conf.getClass(\n        YarnConfiguration.TIMELINE_SERVICE_READER_CLASS,\n        HBaseTimelineReaderImpl.class, TimelineReader.class), conf);\n    LOG.info(\"Using store \" + readerStore.getClass().getName());\n    readerStore.init(conf);\n    return readerStore;\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-timelineservice/src/main/java/org/apache/hadoop/yarn/server/timelineservice/reader/TimelineReaderServer.java",
      "extendedDetails": {}
    },
    "d95dc89a02d5915363153e0d9254f2cc0cf73ca0": {
      "type": "Ybodychange",
      "commitMessage": "YARN-4075 [reader REST API] implement support for querying for flows and flow runs (Varun Saxena via vrushali)\n",
      "commitDate": "10/07/16 8:45 AM",
      "commitName": "d95dc89a02d5915363153e0d9254f2cc0cf73ca0",
      "commitAuthor": "Vrushali Channapattan",
      "commitDateOld": "10/07/16 8:45 AM",
      "commitNameOld": "451c13b1de1e42394a4c92888192da9a9519d9ac",
      "commitAuthorOld": "Sangjin Lee",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 5,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,7 +1,8 @@\n   private TimelineReader createTimelineReaderStore(Configuration conf) {\n     TimelineReader readerStore \u003d ReflectionUtils.newInstance(conf.getClass(\n         YarnConfiguration.TIMELINE_SERVICE_READER_CLASS,\n         FileSystemTimelineReaderImpl.class, TimelineReader.class), conf);\n+    LOG.info(\"Using store \" + readerStore.getClass().getName());\n     readerStore.init(conf);\n     return readerStore;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private TimelineReader createTimelineReaderStore(Configuration conf) {\n    TimelineReader readerStore \u003d ReflectionUtils.newInstance(conf.getClass(\n        YarnConfiguration.TIMELINE_SERVICE_READER_CLASS,\n        FileSystemTimelineReaderImpl.class, TimelineReader.class), conf);\n    LOG.info(\"Using store \" + readerStore.getClass().getName());\n    readerStore.init(conf);\n    return readerStore;\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-timelineservice/src/main/java/org/apache/hadoop/yarn/server/timelineservice/reader/TimelineReaderServer.java",
      "extendedDetails": {}
    },
    "e27642abf4deb12c6e8c47ffc891b41300494307": {
      "type": "Yintroduced",
      "commitMessage": "YARN-3047. [Data Serving] Set up ATS reader with basic request serving structure and lifecycle (Varun Saxena via sjlee)\n\n(cherry picked from commit 4c5f88fb0f04b7919738d07598b0f006a9ff91f2)\n",
      "commitDate": "10/07/16 8:45 AM",
      "commitName": "e27642abf4deb12c6e8c47ffc891b41300494307",
      "commitAuthor": "Sangjin Lee",
      "diff": "@@ -0,0 +1,7 @@\n+  private TimelineReader createTimelineReaderStore(Configuration conf) {\n+    TimelineReader readerStore \u003d ReflectionUtils.newInstance(conf.getClass(\n+        YarnConfiguration.TIMELINE_SERVICE_READER_CLASS,\n+        FileSystemTimelineReaderImpl.class, TimelineReader.class), conf);\n+    readerStore.init(conf);\n+    return readerStore;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private TimelineReader createTimelineReaderStore(Configuration conf) {\n    TimelineReader readerStore \u003d ReflectionUtils.newInstance(conf.getClass(\n        YarnConfiguration.TIMELINE_SERVICE_READER_CLASS,\n        FileSystemTimelineReaderImpl.class, TimelineReader.class), conf);\n    readerStore.init(conf);\n    return readerStore;\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-timelineservice/src/main/java/org/apache/hadoop/yarn/server/timelineservice/reader/TimelineReaderServer.java"
    }
  }
}