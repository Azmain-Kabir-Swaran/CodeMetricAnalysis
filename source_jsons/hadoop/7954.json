{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "BackupNode.java",
  "functionName": "handshake",
  "functionId": "handshake___conf-Configuration",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/BackupNode.java",
  "functionStartLine": 319,
  "functionEndLine": 344,
  "numCommitsSeen": 57,
  "timeTaken": 6499,
  "changeHistory": [
    "65a941008d4bbf906772399d3f035f2a0da5abfa",
    "aa4b6fbe754ab7e3cf8ee106598d550f6e14783e",
    "045dc880e13271737b3cf316296e92fb95806663",
    "c69dfdd5e14af490790dff8227b11962ec816577",
    "62c7e2edfc0cd5baeda71d7c3737398302aea795",
    "8faf7e8fb6e4024b03ce5f938daba626f2f5357c",
    "2740112bb64e1cc8132a1dc450d9e461c2e4729e",
    "520d2502c52ec60f8ba66d6bd8b7c812e2941bba",
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1",
    "d86f3183d93714ba078416af4f609d26376eadb0",
    "a196766ea07775f18ded69bd9e8d239f8cfd3ccc"
  ],
  "changeHistoryShort": {
    "65a941008d4bbf906772399d3f035f2a0da5abfa": "Ybodychange",
    "aa4b6fbe754ab7e3cf8ee106598d550f6e14783e": "Ybodychange",
    "045dc880e13271737b3cf316296e92fb95806663": "Ybodychange",
    "c69dfdd5e14af490790dff8227b11962ec816577": "Ybodychange",
    "62c7e2edfc0cd5baeda71d7c3737398302aea795": "Ybodychange",
    "8faf7e8fb6e4024b03ce5f938daba626f2f5357c": "Ybodychange",
    "2740112bb64e1cc8132a1dc450d9e461c2e4729e": "Ybodychange",
    "520d2502c52ec60f8ba66d6bd8b7c812e2941bba": "Ybodychange",
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1": "Yfilerename",
    "d86f3183d93714ba078416af4f609d26376eadb0": "Yfilerename",
    "a196766ea07775f18ded69bd9e8d239f8cfd3ccc": "Yintroduced"
  },
  "changeHistoryDetails": {
    "65a941008d4bbf906772399d3f035f2a0da5abfa": {
      "type": "Ybodychange",
      "commitMessage": "Revert \"HDFS-10391. Always enable NameNode service RPC port. Contributed by Gergely Novak.\"\n\nThis reverts commit aa4b6fbe754ab7e3cf8ee106598d550f6e14783e.\n",
      "commitDate": "14/09/17 11:17 AM",
      "commitName": "65a941008d4bbf906772399d3f035f2a0da5abfa",
      "commitAuthor": "Arpit Agarwal",
      "commitDateOld": "09/09/17 8:40 AM",
      "commitNameOld": "aa4b6fbe754ab7e3cf8ee106598d550f6e14783e",
      "commitAuthorOld": "Arpit Agarwal",
      "daysBetweenCommits": 5.11,
      "commitsBetweenForRepo": 81,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,26 +1,26 @@\n   private NamespaceInfo handshake(Configuration conf) throws IOException {\n     // connect to name node\n-    InetSocketAddress nnAddress \u003d NameNode.getServiceAddress(conf);\n+    InetSocketAddress nnAddress \u003d NameNode.getServiceAddress(conf, true);\n     this.namenode \u003d NameNodeProxies.createNonHAProxy(conf, nnAddress,\n         NamenodeProtocol.class, UserGroupInformation.getCurrentUser(),\n         true).getProxy();\n     this.nnRpcAddress \u003d NetUtils.getHostPortString(nnAddress);\n     this.nnHttpAddress \u003d DFSUtil.getInfoServer(nnAddress, conf,\n         DFSUtil.getHttpClientScheme(conf)).toURL();\n     // get version and id info from the name-node\n     NamespaceInfo nsInfo \u003d null;\n     while(!isStopRequested()) {\n       try {\n         nsInfo \u003d handshake(namenode);\n         break;\n       } catch(SocketTimeoutException e) {  // name-node is busy\n         LOG.info(\"Problem connecting to server: \" + nnAddress);\n         try {\n           Thread.sleep(1000);\n         } catch (InterruptedException ie) {\n           LOG.warn(\"Encountered exception \", e);\n         }\n       }\n     }\n     return nsInfo;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private NamespaceInfo handshake(Configuration conf) throws IOException {\n    // connect to name node\n    InetSocketAddress nnAddress \u003d NameNode.getServiceAddress(conf, true);\n    this.namenode \u003d NameNodeProxies.createNonHAProxy(conf, nnAddress,\n        NamenodeProtocol.class, UserGroupInformation.getCurrentUser(),\n        true).getProxy();\n    this.nnRpcAddress \u003d NetUtils.getHostPortString(nnAddress);\n    this.nnHttpAddress \u003d DFSUtil.getInfoServer(nnAddress, conf,\n        DFSUtil.getHttpClientScheme(conf)).toURL();\n    // get version and id info from the name-node\n    NamespaceInfo nsInfo \u003d null;\n    while(!isStopRequested()) {\n      try {\n        nsInfo \u003d handshake(namenode);\n        break;\n      } catch(SocketTimeoutException e) {  // name-node is busy\n        LOG.info(\"Problem connecting to server: \" + nnAddress);\n        try {\n          Thread.sleep(1000);\n        } catch (InterruptedException ie) {\n          LOG.warn(\"Encountered exception \", e);\n        }\n      }\n    }\n    return nsInfo;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/BackupNode.java",
      "extendedDetails": {}
    },
    "aa4b6fbe754ab7e3cf8ee106598d550f6e14783e": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-10391. Always enable NameNode service RPC port. Contributed by Gergely Novak.\n",
      "commitDate": "09/09/17 8:40 AM",
      "commitName": "aa4b6fbe754ab7e3cf8ee106598d550f6e14783e",
      "commitAuthor": "Arpit Agarwal",
      "commitDateOld": "02/08/17 2:22 PM",
      "commitNameOld": "79df1e750ef558afed6d166ce225a23061b36aed",
      "commitAuthorOld": "Manoj Govindassamy",
      "daysBetweenCommits": 37.76,
      "commitsBetweenForRepo": 303,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,26 +1,26 @@\n   private NamespaceInfo handshake(Configuration conf) throws IOException {\n     // connect to name node\n-    InetSocketAddress nnAddress \u003d NameNode.getServiceAddress(conf, true);\n+    InetSocketAddress nnAddress \u003d NameNode.getServiceAddress(conf);\n     this.namenode \u003d NameNodeProxies.createNonHAProxy(conf, nnAddress,\n         NamenodeProtocol.class, UserGroupInformation.getCurrentUser(),\n         true).getProxy();\n     this.nnRpcAddress \u003d NetUtils.getHostPortString(nnAddress);\n     this.nnHttpAddress \u003d DFSUtil.getInfoServer(nnAddress, conf,\n         DFSUtil.getHttpClientScheme(conf)).toURL();\n     // get version and id info from the name-node\n     NamespaceInfo nsInfo \u003d null;\n     while(!isStopRequested()) {\n       try {\n         nsInfo \u003d handshake(namenode);\n         break;\n       } catch(SocketTimeoutException e) {  // name-node is busy\n         LOG.info(\"Problem connecting to server: \" + nnAddress);\n         try {\n           Thread.sleep(1000);\n         } catch (InterruptedException ie) {\n           LOG.warn(\"Encountered exception \", e);\n         }\n       }\n     }\n     return nsInfo;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private NamespaceInfo handshake(Configuration conf) throws IOException {\n    // connect to name node\n    InetSocketAddress nnAddress \u003d NameNode.getServiceAddress(conf);\n    this.namenode \u003d NameNodeProxies.createNonHAProxy(conf, nnAddress,\n        NamenodeProtocol.class, UserGroupInformation.getCurrentUser(),\n        true).getProxy();\n    this.nnRpcAddress \u003d NetUtils.getHostPortString(nnAddress);\n    this.nnHttpAddress \u003d DFSUtil.getInfoServer(nnAddress, conf,\n        DFSUtil.getHttpClientScheme(conf)).toURL();\n    // get version and id info from the name-node\n    NamespaceInfo nsInfo \u003d null;\n    while(!isStopRequested()) {\n      try {\n        nsInfo \u003d handshake(namenode);\n        break;\n      } catch(SocketTimeoutException e) {  // name-node is busy\n        LOG.info(\"Problem connecting to server: \" + nnAddress);\n        try {\n          Thread.sleep(1000);\n        } catch (InterruptedException ie) {\n          LOG.warn(\"Encountered exception \", e);\n        }\n      }\n    }\n    return nsInfo;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/BackupNode.java",
      "extendedDetails": {}
    },
    "045dc880e13271737b3cf316296e92fb95806663": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-5312. Generate HTTP/HTTPS URL in DFSUtil#getInfoServer() based on the configured http policy. Contributed by Haohui Mai.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1548629 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "06/12/13 10:01 AM",
      "commitName": "045dc880e13271737b3cf316296e92fb95806663",
      "commitAuthor": "Jing Zhao",
      "commitDateOld": "04/12/13 1:40 PM",
      "commitNameOld": "d02baff9a0d8cec92bde751777f3e575da2339c8",
      "commitAuthorOld": "Jing Zhao",
      "daysBetweenCommits": 1.85,
      "commitsBetweenForRepo": 23,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,25 +1,26 @@\n   private NamespaceInfo handshake(Configuration conf) throws IOException {\n     // connect to name node\n     InetSocketAddress nnAddress \u003d NameNode.getServiceAddress(conf, true);\n     this.namenode \u003d NameNodeProxies.createNonHAProxy(conf, nnAddress,\n         NamenodeProtocol.class, UserGroupInformation.getCurrentUser(),\n         true).getProxy();\n     this.nnRpcAddress \u003d NetUtils.getHostPortString(nnAddress);\n-    this.nnHttpAddress \u003d NetUtils.getHostPortString(super.getHttpServerAddress(conf));\n+    this.nnHttpAddress \u003d DFSUtil.getInfoServer(nnAddress, conf,\n+        DFSUtil.getHttpClientScheme(conf)).toURL();\n     // get version and id info from the name-node\n     NamespaceInfo nsInfo \u003d null;\n     while(!isStopRequested()) {\n       try {\n         nsInfo \u003d handshake(namenode);\n         break;\n       } catch(SocketTimeoutException e) {  // name-node is busy\n         LOG.info(\"Problem connecting to server: \" + nnAddress);\n         try {\n           Thread.sleep(1000);\n         } catch (InterruptedException ie) {\n           LOG.warn(\"Encountered exception \", e);\n         }\n       }\n     }\n     return nsInfo;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private NamespaceInfo handshake(Configuration conf) throws IOException {\n    // connect to name node\n    InetSocketAddress nnAddress \u003d NameNode.getServiceAddress(conf, true);\n    this.namenode \u003d NameNodeProxies.createNonHAProxy(conf, nnAddress,\n        NamenodeProtocol.class, UserGroupInformation.getCurrentUser(),\n        true).getProxy();\n    this.nnRpcAddress \u003d NetUtils.getHostPortString(nnAddress);\n    this.nnHttpAddress \u003d DFSUtil.getInfoServer(nnAddress, conf,\n        DFSUtil.getHttpClientScheme(conf)).toURL();\n    // get version and id info from the name-node\n    NamespaceInfo nsInfo \u003d null;\n    while(!isStopRequested()) {\n      try {\n        nsInfo \u003d handshake(namenode);\n        break;\n      } catch(SocketTimeoutException e) {  // name-node is busy\n        LOG.info(\"Problem connecting to server: \" + nnAddress);\n        try {\n          Thread.sleep(1000);\n        } catch (InterruptedException ie) {\n          LOG.warn(\"Encountered exception \", e);\n        }\n      }\n    }\n    return nsInfo;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/BackupNode.java",
      "extendedDetails": {}
    },
    "c69dfdd5e14af490790dff8227b11962ec816577": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-2958. Sweep for remaining proxy construction which doesn\u0027t go through failover path.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-1623@1294811 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "28/02/12 12:09 PM",
      "commitName": "c69dfdd5e14af490790dff8227b11962ec816577",
      "commitAuthor": "Aaron Myers",
      "commitDateOld": "25/02/12 8:57 PM",
      "commitNameOld": "ae9014ef6a6a135c1244e2bc5c09b29fd11da370",
      "commitAuthorOld": "",
      "daysBetweenCommits": 2.63,
      "commitsBetweenForRepo": 21,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,24 +1,25 @@\n   private NamespaceInfo handshake(Configuration conf) throws IOException {\n     // connect to name node\n     InetSocketAddress nnAddress \u003d NameNode.getServiceAddress(conf, true);\n-    this.namenode \u003d new NamenodeProtocolTranslatorPB(nnAddress, conf,\n-        UserGroupInformation.getCurrentUser());\n+    this.namenode \u003d NameNodeProxies.createNonHAProxy(conf, nnAddress,\n+        NamenodeProtocol.class, UserGroupInformation.getCurrentUser(),\n+        true).getProxy();\n     this.nnRpcAddress \u003d NetUtils.getHostPortString(nnAddress);\n     this.nnHttpAddress \u003d NetUtils.getHostPortString(super.getHttpServerAddress(conf));\n     // get version and id info from the name-node\n     NamespaceInfo nsInfo \u003d null;\n     while(!isStopRequested()) {\n       try {\n         nsInfo \u003d handshake(namenode);\n         break;\n       } catch(SocketTimeoutException e) {  // name-node is busy\n         LOG.info(\"Problem connecting to server: \" + nnAddress);\n         try {\n           Thread.sleep(1000);\n         } catch (InterruptedException ie) {\n           LOG.warn(\"Encountered exception \", e);\n         }\n       }\n     }\n     return nsInfo;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private NamespaceInfo handshake(Configuration conf) throws IOException {\n    // connect to name node\n    InetSocketAddress nnAddress \u003d NameNode.getServiceAddress(conf, true);\n    this.namenode \u003d NameNodeProxies.createNonHAProxy(conf, nnAddress,\n        NamenodeProtocol.class, UserGroupInformation.getCurrentUser(),\n        true).getProxy();\n    this.nnRpcAddress \u003d NetUtils.getHostPortString(nnAddress);\n    this.nnHttpAddress \u003d NetUtils.getHostPortString(super.getHttpServerAddress(conf));\n    // get version and id info from the name-node\n    NamespaceInfo nsInfo \u003d null;\n    while(!isStopRequested()) {\n      try {\n        nsInfo \u003d handshake(namenode);\n        break;\n      } catch(SocketTimeoutException e) {  // name-node is busy\n        LOG.info(\"Problem connecting to server: \" + nnAddress);\n        try {\n          Thread.sleep(1000);\n        } catch (InterruptedException ie) {\n          LOG.warn(\"Encountered exception \", e);\n        }\n      }\n    }\n    return nsInfo;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/BackupNode.java",
      "extendedDetails": {}
    },
    "62c7e2edfc0cd5baeda71d7c3737398302aea795": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-3003. Remove getHostPortString() from NameNode, replace it with NetUtils.getHostPortString(). Contributed by Brandon Li.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1293338 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/02/12 9:03 AM",
      "commitName": "62c7e2edfc0cd5baeda71d7c3737398302aea795",
      "commitAuthor": "Aaron Myers",
      "commitDateOld": "19/01/12 1:41 PM",
      "commitNameOld": "fa6033a029aeb04ebb0b6221bdc9e6e06c1bf0ba",
      "commitAuthorOld": "Eli Collins",
      "daysBetweenCommits": 35.81,
      "commitsBetweenForRepo": 241,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,24 +1,24 @@\n   private NamespaceInfo handshake(Configuration conf) throws IOException {\n     // connect to name node\n     InetSocketAddress nnAddress \u003d NameNode.getServiceAddress(conf, true);\n     this.namenode \u003d new NamenodeProtocolTranslatorPB(nnAddress, conf,\n         UserGroupInformation.getCurrentUser());\n-    this.nnRpcAddress \u003d getHostPortString(nnAddress);\n-    this.nnHttpAddress \u003d getHostPortString(super.getHttpServerAddress(conf));\n+    this.nnRpcAddress \u003d NetUtils.getHostPortString(nnAddress);\n+    this.nnHttpAddress \u003d NetUtils.getHostPortString(super.getHttpServerAddress(conf));\n     // get version and id info from the name-node\n     NamespaceInfo nsInfo \u003d null;\n     while(!isStopRequested()) {\n       try {\n         nsInfo \u003d handshake(namenode);\n         break;\n       } catch(SocketTimeoutException e) {  // name-node is busy\n         LOG.info(\"Problem connecting to server: \" + nnAddress);\n         try {\n           Thread.sleep(1000);\n         } catch (InterruptedException ie) {\n           LOG.warn(\"Encountered exception \", e);\n         }\n       }\n     }\n     return nsInfo;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private NamespaceInfo handshake(Configuration conf) throws IOException {\n    // connect to name node\n    InetSocketAddress nnAddress \u003d NameNode.getServiceAddress(conf, true);\n    this.namenode \u003d new NamenodeProtocolTranslatorPB(nnAddress, conf,\n        UserGroupInformation.getCurrentUser());\n    this.nnRpcAddress \u003d NetUtils.getHostPortString(nnAddress);\n    this.nnHttpAddress \u003d NetUtils.getHostPortString(super.getHttpServerAddress(conf));\n    // get version and id info from the name-node\n    NamespaceInfo nsInfo \u003d null;\n    while(!isStopRequested()) {\n      try {\n        nsInfo \u003d handshake(namenode);\n        break;\n      } catch(SocketTimeoutException e) {  // name-node is busy\n        LOG.info(\"Problem connecting to server: \" + nnAddress);\n        try {\n          Thread.sleep(1000);\n        } catch (InterruptedException ie) {\n          LOG.warn(\"Encountered exception \", e);\n        }\n      }\n    }\n    return nsInfo;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/BackupNode.java",
      "extendedDetails": {}
    },
    "8faf7e8fb6e4024b03ce5f938daba626f2f5357c": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-2739. SecondaryNameNode doesn\u0027t start up.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1229877 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "10/01/12 6:54 PM",
      "commitName": "8faf7e8fb6e4024b03ce5f938daba626f2f5357c",
      "commitAuthor": "Jitendra Nath Pandey",
      "commitDateOld": "11/12/11 10:53 AM",
      "commitNameOld": "2740112bb64e1cc8132a1dc450d9e461c2e4729e",
      "commitAuthorOld": "Suresh Srinivas",
      "daysBetweenCommits": 30.33,
      "commitsBetweenForRepo": 148,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,27 +1,24 @@\n   private NamespaceInfo handshake(Configuration conf) throws IOException {\n     // connect to name node\n     InetSocketAddress nnAddress \u003d NameNode.getServiceAddress(conf, true);\n-    NamenodeProtocolPB proxy \u003d \n-      RPC.waitForProxy(NamenodeProtocolPB.class,\n-          RPC.getProtocolVersion(NamenodeProtocolPB.class),\n-          nnAddress, conf);\n-    this.namenode \u003d new NamenodeProtocolTranslatorPB(proxy);\n+    this.namenode \u003d new NamenodeProtocolTranslatorPB(nnAddress, conf,\n+        UserGroupInformation.getCurrentUser());\n     this.nnRpcAddress \u003d getHostPortString(nnAddress);\n     this.nnHttpAddress \u003d getHostPortString(super.getHttpServerAddress(conf));\n     // get version and id info from the name-node\n     NamespaceInfo nsInfo \u003d null;\n     while(!isStopRequested()) {\n       try {\n         nsInfo \u003d handshake(namenode);\n         break;\n       } catch(SocketTimeoutException e) {  // name-node is busy\n         LOG.info(\"Problem connecting to server: \" + nnAddress);\n         try {\n           Thread.sleep(1000);\n         } catch (InterruptedException ie) {\n           LOG.warn(\"Encountered exception \", e);\n         }\n       }\n     }\n     return nsInfo;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private NamespaceInfo handshake(Configuration conf) throws IOException {\n    // connect to name node\n    InetSocketAddress nnAddress \u003d NameNode.getServiceAddress(conf, true);\n    this.namenode \u003d new NamenodeProtocolTranslatorPB(nnAddress, conf,\n        UserGroupInformation.getCurrentUser());\n    this.nnRpcAddress \u003d getHostPortString(nnAddress);\n    this.nnHttpAddress \u003d getHostPortString(super.getHttpServerAddress(conf));\n    // get version and id info from the name-node\n    NamespaceInfo nsInfo \u003d null;\n    while(!isStopRequested()) {\n      try {\n        nsInfo \u003d handshake(namenode);\n        break;\n      } catch(SocketTimeoutException e) {  // name-node is busy\n        LOG.info(\"Problem connecting to server: \" + nnAddress);\n        try {\n          Thread.sleep(1000);\n        } catch (InterruptedException ie) {\n          LOG.warn(\"Encountered exception \", e);\n        }\n      }\n    }\n    return nsInfo;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/BackupNode.java",
      "extendedDetails": {}
    },
    "2740112bb64e1cc8132a1dc450d9e461c2e4729e": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-2647. Used protobuf based RPC for InterDatanodeProtocol, ClientDatanodeProtocol, JournalProtocol, NamenodeProtocol. Contributed by Suresh Srinivas.\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1213040 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "11/12/11 10:53 AM",
      "commitName": "2740112bb64e1cc8132a1dc450d9e461c2e4729e",
      "commitAuthor": "Suresh Srinivas",
      "commitDateOld": "04/12/11 12:44 PM",
      "commitNameOld": "65200998c01b17e017d1814e8b1f4d82ac334a23",
      "commitAuthorOld": "Sanjay Radia",
      "daysBetweenCommits": 6.92,
      "commitsBetweenForRepo": 35,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,25 +1,27 @@\n   private NamespaceInfo handshake(Configuration conf) throws IOException {\n     // connect to name node\n     InetSocketAddress nnAddress \u003d NameNode.getServiceAddress(conf, true);\n-    this.namenode \u003d\n-      RPC.waitForProxy(NamenodeProtocol.class,\n-          NamenodeProtocol.versionID, nnAddress, conf);\n+    NamenodeProtocolPB proxy \u003d \n+      RPC.waitForProxy(NamenodeProtocolPB.class,\n+          RPC.getProtocolVersion(NamenodeProtocolPB.class),\n+          nnAddress, conf);\n+    this.namenode \u003d new NamenodeProtocolTranslatorPB(proxy);\n     this.nnRpcAddress \u003d getHostPortString(nnAddress);\n     this.nnHttpAddress \u003d getHostPortString(super.getHttpServerAddress(conf));\n     // get version and id info from the name-node\n     NamespaceInfo nsInfo \u003d null;\n     while(!isStopRequested()) {\n       try {\n         nsInfo \u003d handshake(namenode);\n         break;\n       } catch(SocketTimeoutException e) {  // name-node is busy\n         LOG.info(\"Problem connecting to server: \" + nnAddress);\n         try {\n           Thread.sleep(1000);\n         } catch (InterruptedException ie) {\n           LOG.warn(\"Encountered exception \", e);\n         }\n       }\n     }\n     return nsInfo;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private NamespaceInfo handshake(Configuration conf) throws IOException {\n    // connect to name node\n    InetSocketAddress nnAddress \u003d NameNode.getServiceAddress(conf, true);\n    NamenodeProtocolPB proxy \u003d \n      RPC.waitForProxy(NamenodeProtocolPB.class,\n          RPC.getProtocolVersion(NamenodeProtocolPB.class),\n          nnAddress, conf);\n    this.namenode \u003d new NamenodeProtocolTranslatorPB(proxy);\n    this.nnRpcAddress \u003d getHostPortString(nnAddress);\n    this.nnHttpAddress \u003d getHostPortString(super.getHttpServerAddress(conf));\n    // get version and id info from the name-node\n    NamespaceInfo nsInfo \u003d null;\n    while(!isStopRequested()) {\n      try {\n        nsInfo \u003d handshake(namenode);\n        break;\n      } catch(SocketTimeoutException e) {  // name-node is busy\n        LOG.info(\"Problem connecting to server: \" + nnAddress);\n        try {\n          Thread.sleep(1000);\n        } catch (InterruptedException ie) {\n          LOG.warn(\"Encountered exception \", e);\n        }\n      }\n    }\n    return nsInfo;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/BackupNode.java",
      "extendedDetails": {}
    },
    "520d2502c52ec60f8ba66d6bd8b7c812e2941bba": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-2459. Separate datatypes for Journal Protocol. (suresh)\n\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1186896 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "20/10/11 9:31 AM",
      "commitName": "520d2502c52ec60f8ba66d6bd8b7c812e2941bba",
      "commitAuthor": "Suresh Srinivas",
      "commitDateOld": "28/09/11 3:58 PM",
      "commitNameOld": "e9dd78d9fede044101627786d991bec3265205a4",
      "commitAuthorOld": "Suresh Srinivas",
      "daysBetweenCommits": 21.73,
      "commitsBetweenForRepo": 168,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,23 +1,25 @@\n   private NamespaceInfo handshake(Configuration conf) throws IOException {\n     // connect to name node\n     InetSocketAddress nnAddress \u003d NameNode.getServiceAddress(conf, true);\n     this.namenode \u003d\n-      (NamenodeProtocol) RPC.waitForProxy(NamenodeProtocol.class,\n+      RPC.waitForProxy(NamenodeProtocol.class,\n           NamenodeProtocol.versionID, nnAddress, conf);\n     this.nnRpcAddress \u003d getHostPortString(nnAddress);\n     this.nnHttpAddress \u003d getHostPortString(super.getHttpServerAddress(conf));\n     // get version and id info from the name-node\n     NamespaceInfo nsInfo \u003d null;\n     while(!isStopRequested()) {\n       try {\n         nsInfo \u003d handshake(namenode);\n         break;\n       } catch(SocketTimeoutException e) {  // name-node is busy\n         LOG.info(\"Problem connecting to server: \" + nnAddress);\n         try {\n           Thread.sleep(1000);\n-        } catch (InterruptedException ie) {}\n+        } catch (InterruptedException ie) {\n+          LOG.warn(\"Encountered exception \", e);\n+        }\n       }\n     }\n     return nsInfo;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private NamespaceInfo handshake(Configuration conf) throws IOException {\n    // connect to name node\n    InetSocketAddress nnAddress \u003d NameNode.getServiceAddress(conf, true);\n    this.namenode \u003d\n      RPC.waitForProxy(NamenodeProtocol.class,\n          NamenodeProtocol.versionID, nnAddress, conf);\n    this.nnRpcAddress \u003d getHostPortString(nnAddress);\n    this.nnHttpAddress \u003d getHostPortString(super.getHttpServerAddress(conf));\n    // get version and id info from the name-node\n    NamespaceInfo nsInfo \u003d null;\n    while(!isStopRequested()) {\n      try {\n        nsInfo \u003d handshake(namenode);\n        break;\n      } catch(SocketTimeoutException e) {  // name-node is busy\n        LOG.info(\"Problem connecting to server: \" + nnAddress);\n        try {\n          Thread.sleep(1000);\n        } catch (InterruptedException ie) {\n          LOG.warn(\"Encountered exception \", e);\n        }\n      }\n    }\n    return nsInfo;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/BackupNode.java",
      "extendedDetails": {}
    },
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1": {
      "type": "Yfilerename",
      "commitMessage": "HADOOP-7560. Change src layout to be heirarchical. Contributed by Alejandro Abdelnur.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1161332 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/08/11 5:14 PM",
      "commitName": "cd7157784e5e5ddc4e77144d042e54dd0d04bac1",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "24/08/11 5:06 PM",
      "commitNameOld": "bb0005cfec5fd2861600ff5babd259b48ba18b63",
      "commitAuthorOld": "Arun Murthy",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  private NamespaceInfo handshake(Configuration conf) throws IOException {\n    // connect to name node\n    InetSocketAddress nnAddress \u003d NameNode.getServiceAddress(conf, true);\n    this.namenode \u003d\n      (NamenodeProtocol) RPC.waitForProxy(NamenodeProtocol.class,\n          NamenodeProtocol.versionID, nnAddress, conf);\n    this.nnRpcAddress \u003d getHostPortString(nnAddress);\n    this.nnHttpAddress \u003d getHostPortString(super.getHttpServerAddress(conf));\n    // get version and id info from the name-node\n    NamespaceInfo nsInfo \u003d null;\n    while(!isStopRequested()) {\n      try {\n        nsInfo \u003d handshake(namenode);\n        break;\n      } catch(SocketTimeoutException e) {  // name-node is busy\n        LOG.info(\"Problem connecting to server: \" + nnAddress);\n        try {\n          Thread.sleep(1000);\n        } catch (InterruptedException ie) {}\n      }\n    }\n    return nsInfo;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/BackupNode.java",
      "extendedDetails": {
        "oldPath": "hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/BackupNode.java",
        "newPath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/BackupNode.java"
      }
    },
    "d86f3183d93714ba078416af4f609d26376eadb0": {
      "type": "Yfilerename",
      "commitMessage": "HDFS-2096. Mavenization of hadoop-hdfs. Contributed by Alejandro Abdelnur.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1159702 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "19/08/11 10:36 AM",
      "commitName": "d86f3183d93714ba078416af4f609d26376eadb0",
      "commitAuthor": "Thomas White",
      "commitDateOld": "19/08/11 10:26 AM",
      "commitNameOld": "6ee5a73e0e91a2ef27753a32c576835e951d8119",
      "commitAuthorOld": "Thomas White",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  private NamespaceInfo handshake(Configuration conf) throws IOException {\n    // connect to name node\n    InetSocketAddress nnAddress \u003d NameNode.getServiceAddress(conf, true);\n    this.namenode \u003d\n      (NamenodeProtocol) RPC.waitForProxy(NamenodeProtocol.class,\n          NamenodeProtocol.versionID, nnAddress, conf);\n    this.nnRpcAddress \u003d getHostPortString(nnAddress);\n    this.nnHttpAddress \u003d getHostPortString(super.getHttpServerAddress(conf));\n    // get version and id info from the name-node\n    NamespaceInfo nsInfo \u003d null;\n    while(!isStopRequested()) {\n      try {\n        nsInfo \u003d handshake(namenode);\n        break;\n      } catch(SocketTimeoutException e) {  // name-node is busy\n        LOG.info(\"Problem connecting to server: \" + nnAddress);\n        try {\n          Thread.sleep(1000);\n        } catch (InterruptedException ie) {}\n      }\n    }\n    return nsInfo;\n  }",
      "path": "hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/BackupNode.java",
      "extendedDetails": {
        "oldPath": "hdfs/src/java/org/apache/hadoop/hdfs/server/namenode/BackupNode.java",
        "newPath": "hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/BackupNode.java"
      }
    },
    "a196766ea07775f18ded69bd9e8d239f8cfd3ccc": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-7106. Reorganize SVN layout to combine HDFS, Common, and MR in a single tree (project unsplit)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1134994 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "12/06/11 3:00 PM",
      "commitName": "a196766ea07775f18ded69bd9e8d239f8cfd3ccc",
      "commitAuthor": "Todd Lipcon",
      "diff": "@@ -0,0 +1,23 @@\n+  private NamespaceInfo handshake(Configuration conf) throws IOException {\n+    // connect to name node\n+    InetSocketAddress nnAddress \u003d NameNode.getServiceAddress(conf, true);\n+    this.namenode \u003d\n+      (NamenodeProtocol) RPC.waitForProxy(NamenodeProtocol.class,\n+          NamenodeProtocol.versionID, nnAddress, conf);\n+    this.nnRpcAddress \u003d getHostPortString(nnAddress);\n+    this.nnHttpAddress \u003d getHostPortString(super.getHttpServerAddress(conf));\n+    // get version and id info from the name-node\n+    NamespaceInfo nsInfo \u003d null;\n+    while(!isStopRequested()) {\n+      try {\n+        nsInfo \u003d handshake(namenode);\n+        break;\n+      } catch(SocketTimeoutException e) {  // name-node is busy\n+        LOG.info(\"Problem connecting to server: \" + nnAddress);\n+        try {\n+          Thread.sleep(1000);\n+        } catch (InterruptedException ie) {}\n+      }\n+    }\n+    return nsInfo;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private NamespaceInfo handshake(Configuration conf) throws IOException {\n    // connect to name node\n    InetSocketAddress nnAddress \u003d NameNode.getServiceAddress(conf, true);\n    this.namenode \u003d\n      (NamenodeProtocol) RPC.waitForProxy(NamenodeProtocol.class,\n          NamenodeProtocol.versionID, nnAddress, conf);\n    this.nnRpcAddress \u003d getHostPortString(nnAddress);\n    this.nnHttpAddress \u003d getHostPortString(super.getHttpServerAddress(conf));\n    // get version and id info from the name-node\n    NamespaceInfo nsInfo \u003d null;\n    while(!isStopRequested()) {\n      try {\n        nsInfo \u003d handshake(namenode);\n        break;\n      } catch(SocketTimeoutException e) {  // name-node is busy\n        LOG.info(\"Problem connecting to server: \" + nnAddress);\n        try {\n          Thread.sleep(1000);\n        } catch (InterruptedException ie) {}\n      }\n    }\n    return nsInfo;\n  }",
      "path": "hdfs/src/java/org/apache/hadoop/hdfs/server/namenode/BackupNode.java"
    }
  }
}