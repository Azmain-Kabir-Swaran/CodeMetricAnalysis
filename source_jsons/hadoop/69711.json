{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "AbfsAclHelper.java",
  "functionName": "removeNamedAceAndUpdateSet",
  "functionId": "removeNamedAceAndUpdateSet___entry-String__isDefaultAcl-boolean__removeIndicationSet-Set__String____aclEntries-Map__String,String__",
  "sourceFilePath": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsAclHelper.java",
  "functionStartLine": 198,
  "functionEndLine": 221,
  "numCommitsSeen": 3,
  "timeTaken": 1115,
  "changeHistory": [
    "724c15007beb9ca36f2f37c829f1daa366d95bbf",
    "9c1e4e81399913f180131f4faa95604087c6d962"
  ],
  "changeHistoryShort": {
    "724c15007beb9ca36f2f37c829f1daa366d95bbf": "Ybodychange",
    "9c1e4e81399913f180131f4faa95604087c6d962": "Yintroduced"
  },
  "changeHistoryDetails": {
    "724c15007beb9ca36f2f37c829f1daa366d95bbf": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-15846. ABFS: fix mask related bugs in setAcl, modifyAclEntries and removeAclEntries.\n\nContributed by Junhua Gu.\n\n(cherry picked from commit 66715005f9e8f4f25faa352a06d142b75a029f0e)\n",
      "commitDate": "08/11/18 9:21 AM",
      "commitName": "724c15007beb9ca36f2f37c829f1daa366d95bbf",
      "commitAuthor": "Junhua Gu",
      "commitDateOld": "17/09/18 12:54 PM",
      "commitNameOld": "9c1e4e81399913f180131f4faa95604087c6d962",
      "commitAuthorOld": "Thomas Marquardt",
      "daysBetweenCommits": 51.89,
      "commitsBetweenForRepo": 506,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,25 +1,24 @@\n   private static boolean removeNamedAceAndUpdateSet(String entry, boolean isDefaultAcl, Set\u003cString\u003e removeIndicationSet,\n                                                     Map\u003cString, String\u003e aclEntries)\n       throws AzureBlobFileSystemException {\n     final int startIndex \u003d isDefaultAcl ? 1 : 0;\n     final String[] entryParts \u003d entry.split(AbfsHttpConstants.COLON);\n     final String tag \u003d isDefaultAcl ? AbfsHttpConstants.DEFAULT_SCOPE + entryParts[startIndex] + AbfsHttpConstants.COLON\n         : entryParts[startIndex] + AbfsHttpConstants.COLON;\n \n     if ((entry.equals(AbfsHttpConstants.ACCESS_USER) || entry.equals(AbfsHttpConstants.ACCESS_GROUP)\n-        || entry.equals(AbfsHttpConstants.ACCESS_OTHER))\n-        \u0026\u0026 !isNamedAce(entry)) {\n+        || entry.equals(AbfsHttpConstants.ACCESS_OTHER))) {\n       throw new InvalidAclOperationException(\"Cannot remove user, group or other entry from access ACL.\");\n     }\n \n     boolean touched \u003d false;\n     if (!isNamedAce(entry)) {\n       removeIndicationSet.add(tag); // this must not be a access user, group or other\n       touched \u003d true;\n     } else {\n       if (aclEntries.remove(entry) !\u003d null) {\n         touched \u003d true;\n       }\n     }\n     return touched;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private static boolean removeNamedAceAndUpdateSet(String entry, boolean isDefaultAcl, Set\u003cString\u003e removeIndicationSet,\n                                                    Map\u003cString, String\u003e aclEntries)\n      throws AzureBlobFileSystemException {\n    final int startIndex \u003d isDefaultAcl ? 1 : 0;\n    final String[] entryParts \u003d entry.split(AbfsHttpConstants.COLON);\n    final String tag \u003d isDefaultAcl ? AbfsHttpConstants.DEFAULT_SCOPE + entryParts[startIndex] + AbfsHttpConstants.COLON\n        : entryParts[startIndex] + AbfsHttpConstants.COLON;\n\n    if ((entry.equals(AbfsHttpConstants.ACCESS_USER) || entry.equals(AbfsHttpConstants.ACCESS_GROUP)\n        || entry.equals(AbfsHttpConstants.ACCESS_OTHER))) {\n      throw new InvalidAclOperationException(\"Cannot remove user, group or other entry from access ACL.\");\n    }\n\n    boolean touched \u003d false;\n    if (!isNamedAce(entry)) {\n      removeIndicationSet.add(tag); // this must not be a access user, group or other\n      touched \u003d true;\n    } else {\n      if (aclEntries.remove(entry) !\u003d null) {\n        touched \u003d true;\n      }\n    }\n    return touched;\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsAclHelper.java",
      "extendedDetails": {}
    },
    "9c1e4e81399913f180131f4faa95604087c6d962": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-15661. ABFS: Add support for ACL.\nContributed by Junhua Gu and Da Zhou.\n",
      "commitDate": "17/09/18 12:54 PM",
      "commitName": "9c1e4e81399913f180131f4faa95604087c6d962",
      "commitAuthor": "Thomas Marquardt",
      "diff": "@@ -0,0 +1,25 @@\n+  private static boolean removeNamedAceAndUpdateSet(String entry, boolean isDefaultAcl, Set\u003cString\u003e removeIndicationSet,\n+                                                    Map\u003cString, String\u003e aclEntries)\n+      throws AzureBlobFileSystemException {\n+    final int startIndex \u003d isDefaultAcl ? 1 : 0;\n+    final String[] entryParts \u003d entry.split(AbfsHttpConstants.COLON);\n+    final String tag \u003d isDefaultAcl ? AbfsHttpConstants.DEFAULT_SCOPE + entryParts[startIndex] + AbfsHttpConstants.COLON\n+        : entryParts[startIndex] + AbfsHttpConstants.COLON;\n+\n+    if ((entry.equals(AbfsHttpConstants.ACCESS_USER) || entry.equals(AbfsHttpConstants.ACCESS_GROUP)\n+        || entry.equals(AbfsHttpConstants.ACCESS_OTHER))\n+        \u0026\u0026 !isNamedAce(entry)) {\n+      throw new InvalidAclOperationException(\"Cannot remove user, group or other entry from access ACL.\");\n+    }\n+\n+    boolean touched \u003d false;\n+    if (!isNamedAce(entry)) {\n+      removeIndicationSet.add(tag); // this must not be a access user, group or other\n+      touched \u003d true;\n+    } else {\n+      if (aclEntries.remove(entry) !\u003d null) {\n+        touched \u003d true;\n+      }\n+    }\n+    return touched;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private static boolean removeNamedAceAndUpdateSet(String entry, boolean isDefaultAcl, Set\u003cString\u003e removeIndicationSet,\n                                                    Map\u003cString, String\u003e aclEntries)\n      throws AzureBlobFileSystemException {\n    final int startIndex \u003d isDefaultAcl ? 1 : 0;\n    final String[] entryParts \u003d entry.split(AbfsHttpConstants.COLON);\n    final String tag \u003d isDefaultAcl ? AbfsHttpConstants.DEFAULT_SCOPE + entryParts[startIndex] + AbfsHttpConstants.COLON\n        : entryParts[startIndex] + AbfsHttpConstants.COLON;\n\n    if ((entry.equals(AbfsHttpConstants.ACCESS_USER) || entry.equals(AbfsHttpConstants.ACCESS_GROUP)\n        || entry.equals(AbfsHttpConstants.ACCESS_OTHER))\n        \u0026\u0026 !isNamedAce(entry)) {\n      throw new InvalidAclOperationException(\"Cannot remove user, group or other entry from access ACL.\");\n    }\n\n    boolean touched \u003d false;\n    if (!isNamedAce(entry)) {\n      removeIndicationSet.add(tag); // this must not be a access user, group or other\n      touched \u003d true;\n    } else {\n      if (aclEntries.remove(entry) !\u003d null) {\n        touched \u003d true;\n      }\n    }\n    return touched;\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsAclHelper.java"
    }
  }
}