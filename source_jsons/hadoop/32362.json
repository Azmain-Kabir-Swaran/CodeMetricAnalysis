{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "ContainerExecutor.java",
  "functionName": "run",
  "functionId": "run",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/ContainerExecutor.java",
  "functionStartLine": 873,
  "functionEndLine": 891,
  "numCommitsSeen": 70,
  "timeTaken": 11047,
  "changeHistory": [
    "54bf14f80bcb2cafd1d30b77f2e02cd40b9515d9",
    "3e6fce91a471b4a5099de109582e7c6417e8a822",
    "53fafcf061616516c24e2e2007a66a93d23d3e25",
    "7a29bccd7aaf2eb33adac937379ba6be43a1031d",
    "e1fdf62123625e4ba399af02f8aad500637d29d1",
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1",
    "dbecbe5dfe50f834fc3b8401709079e9470cc517",
    "a196766ea07775f18ded69bd9e8d239f8cfd3ccc"
  ],
  "changeHistoryShort": {
    "54bf14f80bcb2cafd1d30b77f2e02cd40b9515d9": "Ybodychange",
    "3e6fce91a471b4a5099de109582e7c6417e8a822": "Ybodychange",
    "53fafcf061616516c24e2e2007a66a93d23d3e25": "Ybodychange",
    "7a29bccd7aaf2eb33adac937379ba6be43a1031d": "Ybodychange",
    "e1fdf62123625e4ba399af02f8aad500637d29d1": "Yfilerename",
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1": "Yfilerename",
    "dbecbe5dfe50f834fc3b8401709079e9470cc517": "Ymultichange(Ymovefromfile,Ybodychange)",
    "a196766ea07775f18ded69bd9e8d239f8cfd3ccc": "Yintroduced"
  },
  "changeHistoryDetails": {
    "54bf14f80bcb2cafd1d30b77f2e02cd40b9515d9": {
      "type": "Ybodychange",
      "commitMessage": "YARN-5303. Clean up ContainerExecutor JavaDoc. Contributed by Daniel Templeton.\n",
      "commitDate": "14/07/16 6:58 AM",
      "commitName": "54bf14f80bcb2cafd1d30b77f2e02cd40b9515d9",
      "commitAuthor": "Varun Vasudev",
      "commitDateOld": "20/06/16 9:56 AM",
      "commitNameOld": "5107a967fa2558deba11c33a326d4d2e5748f452",
      "commitAuthorOld": "Sangjin Lee",
      "daysBetweenCommits": 23.88,
      "commitsBetweenForRepo": 299,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,19 @@\n     public void run() {\n       try {\n         Thread.sleep(delay);\n         containerExecutor.signalContainer(new ContainerSignalContext.Builder()\n             .setContainer(container)\n             .setUser(user)\n             .setPid(pid)\n             .setSignal(signal)\n             .build());\n       } catch (InterruptedException e) {\n-        return;\n+        interrupt();\n       } catch (IOException e) {\n         String message \u003d \"Exception when user \" + user + \" killing task \" + pid\n             + \" in DelayedProcessKiller: \" + StringUtils.stringifyException(e);\n         LOG.warn(message);\n-        container.handle(new ContainerDiagnosticsUpdateEvent(container\n-          .getContainerId(), message));\n+        container.handle(new ContainerDiagnosticsUpdateEvent(\n+            container.getContainerId(), message));\n       }\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public void run() {\n      try {\n        Thread.sleep(delay);\n        containerExecutor.signalContainer(new ContainerSignalContext.Builder()\n            .setContainer(container)\n            .setUser(user)\n            .setPid(pid)\n            .setSignal(signal)\n            .build());\n      } catch (InterruptedException e) {\n        interrupt();\n      } catch (IOException e) {\n        String message \u003d \"Exception when user \" + user + \" killing task \" + pid\n            + \" in DelayedProcessKiller: \" + StringUtils.stringifyException(e);\n        LOG.warn(message);\n        container.handle(new ContainerDiagnosticsUpdateEvent(\n            container.getContainerId(), message));\n      }\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/ContainerExecutor.java",
      "extendedDetails": {}
    },
    "3e6fce91a471b4a5099de109582e7c6417e8a822": {
      "type": "Ybodychange",
      "commitMessage": "YARN-3853. Add docker container runtime support to LinuxContainterExecutor. Contributed by Sidharta Seethana.\n",
      "commitDate": "27/07/15 11:57 AM",
      "commitName": "3e6fce91a471b4a5099de109582e7c6417e8a822",
      "commitAuthor": "Varun Vasudev",
      "commitDateOld": "26/05/15 11:38 AM",
      "commitNameOld": "500a1d9c76ec612b4e737888f4be79951c11591d",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 62.01,
      "commitsBetweenForRepo": 420,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,19 @@\n     public void run() {\n       try {\n         Thread.sleep(delay);\n         containerExecutor.signalContainer(new ContainerSignalContext.Builder()\n+            .setContainer(container)\n             .setUser(user)\n             .setPid(pid)\n             .setSignal(signal)\n             .build());\n       } catch (InterruptedException e) {\n         return;\n       } catch (IOException e) {\n         String message \u003d \"Exception when user \" + user + \" killing task \" + pid\n             + \" in DelayedProcessKiller: \" + StringUtils.stringifyException(e);\n         LOG.warn(message);\n         container.handle(new ContainerDiagnosticsUpdateEvent(container\n           .getContainerId(), message));\n       }\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public void run() {\n      try {\n        Thread.sleep(delay);\n        containerExecutor.signalContainer(new ContainerSignalContext.Builder()\n            .setContainer(container)\n            .setUser(user)\n            .setPid(pid)\n            .setSignal(signal)\n            .build());\n      } catch (InterruptedException e) {\n        return;\n      } catch (IOException e) {\n        String message \u003d \"Exception when user \" + user + \" killing task \" + pid\n            + \" in DelayedProcessKiller: \" + StringUtils.stringifyException(e);\n        LOG.warn(message);\n        container.handle(new ContainerDiagnosticsUpdateEvent(container\n          .getContainerId(), message));\n      }\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/ContainerExecutor.java",
      "extendedDetails": {}
    },
    "53fafcf061616516c24e2e2007a66a93d23d3e25": {
      "type": "Ybodychange",
      "commitMessage": "YARN-3684. Changed ContainerExecutor\u0027s primary lifecycle methods to use a more extensible mechanism of context objects. Contributed by Sidharta Seethana.\n",
      "commitDate": "21/05/15 3:50 PM",
      "commitName": "53fafcf061616516c24e2e2007a66a93d23d3e25",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "28/03/15 8:00 AM",
      "commitNameOld": "e0ccea33c9e12f6930b2867e14b1b37569fed659",
      "commitAuthorOld": "Ravi Prakash",
      "daysBetweenCommits": 54.33,
      "commitsBetweenForRepo": 549,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,14 +1,18 @@\n     public void run() {\n       try {\n         Thread.sleep(delay);\n-        containerExecutor.signalContainer(user, pid, signal);\n+        containerExecutor.signalContainer(new ContainerSignalContext.Builder()\n+            .setUser(user)\n+            .setPid(pid)\n+            .setSignal(signal)\n+            .build());\n       } catch (InterruptedException e) {\n         return;\n       } catch (IOException e) {\n         String message \u003d \"Exception when user \" + user + \" killing task \" + pid\n             + \" in DelayedProcessKiller: \" + StringUtils.stringifyException(e);\n         LOG.warn(message);\n         container.handle(new ContainerDiagnosticsUpdateEvent(container\n           .getContainerId(), message));\n       }\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public void run() {\n      try {\n        Thread.sleep(delay);\n        containerExecutor.signalContainer(new ContainerSignalContext.Builder()\n            .setUser(user)\n            .setPid(pid)\n            .setSignal(signal)\n            .build());\n      } catch (InterruptedException e) {\n        return;\n      } catch (IOException e) {\n        String message \u003d \"Exception when user \" + user + \" killing task \" + pid\n            + \" in DelayedProcessKiller: \" + StringUtils.stringifyException(e);\n        LOG.warn(message);\n        container.handle(new ContainerDiagnosticsUpdateEvent(container\n          .getContainerId(), message));\n      }\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/ContainerExecutor.java",
      "extendedDetails": {}
    },
    "7a29bccd7aaf2eb33adac937379ba6be43a1031d": {
      "type": "Ybodychange",
      "commitMessage": "YARN-814. Improving diagnostics when containers fail during launch due to various reasons like invalid env etc. Contributed by Jian He.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1504732 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "18/07/13 5:28 PM",
      "commitName": "7a29bccd7aaf2eb33adac937379ba6be43a1031d",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "18/04/13 7:14 PM",
      "commitNameOld": "44bf8525a591b56b5c09cd4201bd193516ea9530",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 90.93,
      "commitsBetweenForRepo": 567,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,10 +1,14 @@\n     public void run() {\n       try {\n         Thread.sleep(delay);\n         containerExecutor.signalContainer(user, pid, signal);\n       } catch (InterruptedException e) {\n         return;\n       } catch (IOException e) {\n-        LOG.warn(\"Exception when killing task \" + pid, e);\n+        String message \u003d \"Exception when user \" + user + \" killing task \" + pid\n+            + \" in DelayedProcessKiller: \" + StringUtils.stringifyException(e);\n+        LOG.warn(message);\n+        container.handle(new ContainerDiagnosticsUpdateEvent(container\n+          .getContainerId(), message));\n       }\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public void run() {\n      try {\n        Thread.sleep(delay);\n        containerExecutor.signalContainer(user, pid, signal);\n      } catch (InterruptedException e) {\n        return;\n      } catch (IOException e) {\n        String message \u003d \"Exception when user \" + user + \" killing task \" + pid\n            + \" in DelayedProcessKiller: \" + StringUtils.stringifyException(e);\n        LOG.warn(message);\n        container.handle(new ContainerDiagnosticsUpdateEvent(container\n          .getContainerId(), message));\n      }\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/ContainerExecutor.java",
      "extendedDetails": {}
    },
    "e1fdf62123625e4ba399af02f8aad500637d29d1": {
      "type": "Yfilerename",
      "commitMessage": "YARN-1. Promote YARN to be a sub-project of Apache Hadoop.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1370666 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "07/08/12 10:22 PM",
      "commitName": "e1fdf62123625e4ba399af02f8aad500637d29d1",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "07/08/12 7:53 PM",
      "commitNameOld": "34554d1e11ee1d5b564d7d9ed3e6d55931d72749",
      "commitAuthorOld": "Aaron Myers",
      "daysBetweenCommits": 0.1,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "    public void run() {\n      try {\n        Thread.sleep(delay);\n        containerExecutor.signalContainer(user, pid, signal);\n      } catch (InterruptedException e) {\n        return;\n      } catch (IOException e) {\n        LOG.warn(\"Exception when killing task \" + pid, e);\n      }\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/ContainerExecutor.java",
      "extendedDetails": {
        "oldPath": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/ContainerExecutor.java",
        "newPath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/ContainerExecutor.java"
      }
    },
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1": {
      "type": "Yfilerename",
      "commitMessage": "HADOOP-7560. Change src layout to be heirarchical. Contributed by Alejandro Abdelnur.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1161332 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/08/11 5:14 PM",
      "commitName": "cd7157784e5e5ddc4e77144d042e54dd0d04bac1",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "24/08/11 5:06 PM",
      "commitNameOld": "bb0005cfec5fd2861600ff5babd259b48ba18b63",
      "commitAuthorOld": "Arun Murthy",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "    public void run() {\n      try {\n        Thread.sleep(delay);\n        containerExecutor.signalContainer(user, pid, signal);\n      } catch (InterruptedException e) {\n        return;\n      } catch (IOException e) {\n        LOG.warn(\"Exception when killing task \" + pid, e);\n      }\n    }",
      "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/ContainerExecutor.java",
      "extendedDetails": {
        "oldPath": "hadoop-mapreduce/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/ContainerExecutor.java",
        "newPath": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/ContainerExecutor.java"
      }
    },
    "dbecbe5dfe50f834fc3b8401709079e9470cc517": {
      "type": "Ymultichange(Ymovefromfile,Ybodychange)",
      "commitMessage": "MAPREDUCE-279. MapReduce 2.0. Merging MR-279 branch into trunk. Contributed by Arun C Murthy, Christopher Douglas, Devaraj Das, Greg Roelofs, Jeffrey Naisbitt, Josh Wills, Jonathan Eagles, Krishna Ramachandran, Luke Lu, Mahadev Konar, Robert Evans, Sharad Agarwal, Siddharth Seth, Thomas Graves, and Vinod Kumar Vavilapalli.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1159166 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "18/08/11 4:07 AM",
      "commitName": "dbecbe5dfe50f834fc3b8401709079e9470cc517",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "subchanges": [
        {
          "type": "Ymovefromfile",
          "commitMessage": "MAPREDUCE-279. MapReduce 2.0. Merging MR-279 branch into trunk. Contributed by Arun C Murthy, Christopher Douglas, Devaraj Das, Greg Roelofs, Jeffrey Naisbitt, Josh Wills, Jonathan Eagles, Krishna Ramachandran, Luke Lu, Mahadev Konar, Robert Evans, Sharad Agarwal, Siddharth Seth, Thomas Graves, and Vinod Kumar Vavilapalli.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1159166 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "18/08/11 4:07 AM",
          "commitName": "dbecbe5dfe50f834fc3b8401709079e9470cc517",
          "commitAuthor": "Vinod Kumar Vavilapalli",
          "commitDateOld": "17/08/11 8:02 PM",
          "commitNameOld": "dd86860633d2ed64705b669a75bf318442ed6225",
          "commitAuthorOld": "Todd Lipcon",
          "daysBetweenCommits": 0.34,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,10 +1,10 @@\n-        public void run() {\n-          try {\n-            taskRunner.launchJvmAndWait(null, vargs, stdout, stderr, 100,\n-                workDir, null);\n-          } catch (Throwable t) {\n-            failed.compareAndSet(null, t);\n-            exec.shutdownNow();\n-            return;\n-          }\n-        }\n\\ No newline at end of file\n+    public void run() {\n+      try {\n+        Thread.sleep(delay);\n+        containerExecutor.signalContainer(user, pid, signal);\n+      } catch (InterruptedException e) {\n+        return;\n+      } catch (IOException e) {\n+        LOG.warn(\"Exception when killing task \" + pid, e);\n+      }\n+    }\n\\ No newline at end of file\n",
          "actualSource": "    public void run() {\n      try {\n        Thread.sleep(delay);\n        containerExecutor.signalContainer(user, pid, signal);\n      } catch (InterruptedException e) {\n        return;\n      } catch (IOException e) {\n        LOG.warn(\"Exception when killing task \" + pid, e);\n      }\n    }",
          "path": "hadoop-mapreduce/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/ContainerExecutor.java",
          "extendedDetails": {
            "oldPath": "mapreduce/src/test/mapred/org/apache/hadoop/mapred/TestJvmManager.java",
            "newPath": "hadoop-mapreduce/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/ContainerExecutor.java",
            "oldMethodName": "run",
            "newMethodName": "run"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "MAPREDUCE-279. MapReduce 2.0. Merging MR-279 branch into trunk. Contributed by Arun C Murthy, Christopher Douglas, Devaraj Das, Greg Roelofs, Jeffrey Naisbitt, Josh Wills, Jonathan Eagles, Krishna Ramachandran, Luke Lu, Mahadev Konar, Robert Evans, Sharad Agarwal, Siddharth Seth, Thomas Graves, and Vinod Kumar Vavilapalli.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1159166 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "18/08/11 4:07 AM",
          "commitName": "dbecbe5dfe50f834fc3b8401709079e9470cc517",
          "commitAuthor": "Vinod Kumar Vavilapalli",
          "commitDateOld": "17/08/11 8:02 PM",
          "commitNameOld": "dd86860633d2ed64705b669a75bf318442ed6225",
          "commitAuthorOld": "Todd Lipcon",
          "daysBetweenCommits": 0.34,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,10 +1,10 @@\n-        public void run() {\n-          try {\n-            taskRunner.launchJvmAndWait(null, vargs, stdout, stderr, 100,\n-                workDir, null);\n-          } catch (Throwable t) {\n-            failed.compareAndSet(null, t);\n-            exec.shutdownNow();\n-            return;\n-          }\n-        }\n\\ No newline at end of file\n+    public void run() {\n+      try {\n+        Thread.sleep(delay);\n+        containerExecutor.signalContainer(user, pid, signal);\n+      } catch (InterruptedException e) {\n+        return;\n+      } catch (IOException e) {\n+        LOG.warn(\"Exception when killing task \" + pid, e);\n+      }\n+    }\n\\ No newline at end of file\n",
          "actualSource": "    public void run() {\n      try {\n        Thread.sleep(delay);\n        containerExecutor.signalContainer(user, pid, signal);\n      } catch (InterruptedException e) {\n        return;\n      } catch (IOException e) {\n        LOG.warn(\"Exception when killing task \" + pid, e);\n      }\n    }",
          "path": "hadoop-mapreduce/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/ContainerExecutor.java",
          "extendedDetails": {}
        }
      ]
    },
    "a196766ea07775f18ded69bd9e8d239f8cfd3ccc": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-7106. Reorganize SVN layout to combine HDFS, Common, and MR in a single tree (project unsplit)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1134994 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "12/06/11 3:00 PM",
      "commitName": "a196766ea07775f18ded69bd9e8d239f8cfd3ccc",
      "commitAuthor": "Todd Lipcon",
      "diff": "@@ -0,0 +1,10 @@\n+        public void run() {\n+          try {\n+            taskRunner.launchJvmAndWait(null, vargs, stdout, stderr, 100,\n+                workDir, null);\n+          } catch (Throwable t) {\n+            failed.compareAndSet(null, t);\n+            exec.shutdownNow();\n+            return;\n+          }\n+        }\n\\ No newline at end of file\n",
      "actualSource": "        public void run() {\n          try {\n            taskRunner.launchJvmAndWait(null, vargs, stdout, stderr, 100,\n                workDir, null);\n          } catch (Throwable t) {\n            failed.compareAndSet(null, t);\n            exec.shutdownNow();\n            return;\n          }\n        }",
      "path": "mapreduce/src/test/mapred/org/apache/hadoop/mapred/TestJvmManager.java"
    }
  }
}