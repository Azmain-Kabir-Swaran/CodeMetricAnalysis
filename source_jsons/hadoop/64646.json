{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "S3AFileSystem.java",
  "functionName": "createListObjectsRequest",
  "functionId": "createListObjectsRequest___key-String__delimiter-String__overrideMaxKeys-Integer",
  "sourceFilePath": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AFileSystem.java",
  "functionStartLine": 2623,
  "functionEndLine": 2650,
  "numCommitsSeen": 141,
  "timeTaken": 3386,
  "changeHistory": [
    "5bbca80428ffbe776650652de86a3bba885edb31"
  ],
  "changeHistoryShort": {
    "5bbca80428ffbe776650652de86a3bba885edb31": "Yintroduced"
  },
  "changeHistoryDetails": {
    "5bbca80428ffbe776650652de86a3bba885edb31": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-13421. Switch to v2 of the S3 List Objects API in S3A.\nContributed by Aaron Fabbri\n",
      "commitDate": "08/09/17 4:07 AM",
      "commitName": "5bbca80428ffbe776650652de86a3bba885edb31",
      "commitAuthor": "Steve Loughran",
      "diff": "@@ -0,0 +1,28 @@\n+  private S3ListRequest createListObjectsRequest(String key,\n+      String delimiter, Integer overrideMaxKeys) {\n+    if (!useListV1) {\n+      ListObjectsV2Request request \u003d\n+          new ListObjectsV2Request().withBucketName(bucket)\n+              .withMaxKeys(maxKeys)\n+              .withPrefix(key);\n+      if (delimiter !\u003d null) {\n+        request.setDelimiter(delimiter);\n+      }\n+      if (overrideMaxKeys !\u003d null) {\n+        request.setMaxKeys(overrideMaxKeys);\n+      }\n+      return S3ListRequest.v2(request);\n+    } else {\n+      ListObjectsRequest request \u003d new ListObjectsRequest();\n+      request.setBucketName(bucket);\n+      request.setMaxKeys(maxKeys);\n+      request.setPrefix(key);\n+      if (delimiter !\u003d null) {\n+        request.setDelimiter(delimiter);\n+      }\n+      if (overrideMaxKeys !\u003d null) {\n+        request.setMaxKeys(overrideMaxKeys);\n+      }\n+      return S3ListRequest.v1(request);\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private S3ListRequest createListObjectsRequest(String key,\n      String delimiter, Integer overrideMaxKeys) {\n    if (!useListV1) {\n      ListObjectsV2Request request \u003d\n          new ListObjectsV2Request().withBucketName(bucket)\n              .withMaxKeys(maxKeys)\n              .withPrefix(key);\n      if (delimiter !\u003d null) {\n        request.setDelimiter(delimiter);\n      }\n      if (overrideMaxKeys !\u003d null) {\n        request.setMaxKeys(overrideMaxKeys);\n      }\n      return S3ListRequest.v2(request);\n    } else {\n      ListObjectsRequest request \u003d new ListObjectsRequest();\n      request.setBucketName(bucket);\n      request.setMaxKeys(maxKeys);\n      request.setPrefix(key);\n      if (delimiter !\u003d null) {\n        request.setDelimiter(delimiter);\n      }\n      if (overrideMaxKeys !\u003d null) {\n        request.setMaxKeys(overrideMaxKeys);\n      }\n      return S3ListRequest.v1(request);\n    }\n  }",
      "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AFileSystem.java"
    }
  }
}