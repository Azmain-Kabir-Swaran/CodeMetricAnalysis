{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "DelegationTokenManager.java",
  "functionName": "decodeToken",
  "functionId": "decodeToken___token-Token__DelegationTokenIdentifier____tokenKind-Text",
  "sourceFilePath": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/delegation/web/DelegationTokenManager.java",
  "functionStartLine": 223,
  "functionEndLine": 232,
  "numCommitsSeen": 14,
  "timeTaken": 2630,
  "changeHistory": [
    "cdce88376a60918dfe2f3bcd82a7666d74992a19",
    "be9c67930b57c516723d566625f9036a88a84055",
    "4e7c4a6e1fd00767d966cd2482a364b2eacbd35b",
    "5e09ae1633fb7fcf293ea10e663064e566c70909",
    "4d4560189adccb941a3dc5eee7add134adbf6519"
  ],
  "changeHistoryShort": {
    "cdce88376a60918dfe2f3bcd82a7666d74992a19": "Ymultichange(Yrename,Yparameterchange,Yreturntypechange,Ymodifierchange,Ybodychange)",
    "be9c67930b57c516723d566625f9036a88a84055": "Ymultichange(Yexceptionschange,Ybodychange)",
    "4e7c4a6e1fd00767d966cd2482a364b2eacbd35b": "Yfilerename",
    "5e09ae1633fb7fcf293ea10e663064e566c70909": "Ybodychange",
    "4d4560189adccb941a3dc5eee7add134adbf6519": "Yintroduced"
  },
  "changeHistoryDetails": {
    "cdce88376a60918dfe2f3bcd82a7666d74992a19": {
      "type": "Ymultichange(Yrename,Yparameterchange,Yreturntypechange,Ymodifierchange,Ybodychange)",
      "commitMessage": "HADOOP-11181. Generalized o.a.h.s.t.d.DelegationTokenManager to handle all sub-classes of AbstractDelegationTokenIdentifier. Contributed by Zhijie Shen.\n",
      "commitDate": "14/10/14 11:35 AM",
      "commitName": "cdce88376a60918dfe2f3bcd82a7666d74992a19",
      "commitAuthor": "Zhijie Shen",
      "subchanges": [
        {
          "type": "Yrename",
          "commitMessage": "HADOOP-11181. Generalized o.a.h.s.t.d.DelegationTokenManager to handle all sub-classes of AbstractDelegationTokenIdentifier. Contributed by Zhijie Shen.\n",
          "commitDate": "14/10/14 11:35 AM",
          "commitName": "cdce88376a60918dfe2f3bcd82a7666d74992a19",
          "commitAuthor": "Zhijie Shen",
          "commitDateOld": "20/09/14 8:21 AM",
          "commitNameOld": "db890eef3208cc557476fa510f7a253ba22bc68a",
          "commitAuthorOld": "Alejandro Abdelnur",
          "daysBetweenCommits": 24.13,
          "commitsBetweenForRepo": 240,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,10 +1,10 @@\n-  public UserGroupInformation verifyToken(Token\u003cDelegationTokenIdentifier\u003e\n-      token) throws IOException {\n+  private static DelegationTokenIdentifier decodeToken(\n+      Token\u003cDelegationTokenIdentifier\u003e token, Text tokenKind)\n+          throws IOException {\n     ByteArrayInputStream buf \u003d new ByteArrayInputStream(token.getIdentifier());\n     DataInputStream dis \u003d new DataInputStream(buf);\n     DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier(tokenKind);\n     id.readFields(dis);\n     dis.close();\n-    secretManager.verifyToken(id, token.getPassword());\n-    return id.getUser();\n+    return id;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private static DelegationTokenIdentifier decodeToken(\n      Token\u003cDelegationTokenIdentifier\u003e token, Text tokenKind)\n          throws IOException {\n    ByteArrayInputStream buf \u003d new ByteArrayInputStream(token.getIdentifier());\n    DataInputStream dis \u003d new DataInputStream(buf);\n    DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier(tokenKind);\n    id.readFields(dis);\n    dis.close();\n    return id;\n  }",
          "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/delegation/web/DelegationTokenManager.java",
          "extendedDetails": {
            "oldValue": "verifyToken",
            "newValue": "decodeToken"
          }
        },
        {
          "type": "Yparameterchange",
          "commitMessage": "HADOOP-11181. Generalized o.a.h.s.t.d.DelegationTokenManager to handle all sub-classes of AbstractDelegationTokenIdentifier. Contributed by Zhijie Shen.\n",
          "commitDate": "14/10/14 11:35 AM",
          "commitName": "cdce88376a60918dfe2f3bcd82a7666d74992a19",
          "commitAuthor": "Zhijie Shen",
          "commitDateOld": "20/09/14 8:21 AM",
          "commitNameOld": "db890eef3208cc557476fa510f7a253ba22bc68a",
          "commitAuthorOld": "Alejandro Abdelnur",
          "daysBetweenCommits": 24.13,
          "commitsBetweenForRepo": 240,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,10 +1,10 @@\n-  public UserGroupInformation verifyToken(Token\u003cDelegationTokenIdentifier\u003e\n-      token) throws IOException {\n+  private static DelegationTokenIdentifier decodeToken(\n+      Token\u003cDelegationTokenIdentifier\u003e token, Text tokenKind)\n+          throws IOException {\n     ByteArrayInputStream buf \u003d new ByteArrayInputStream(token.getIdentifier());\n     DataInputStream dis \u003d new DataInputStream(buf);\n     DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier(tokenKind);\n     id.readFields(dis);\n     dis.close();\n-    secretManager.verifyToken(id, token.getPassword());\n-    return id.getUser();\n+    return id;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private static DelegationTokenIdentifier decodeToken(\n      Token\u003cDelegationTokenIdentifier\u003e token, Text tokenKind)\n          throws IOException {\n    ByteArrayInputStream buf \u003d new ByteArrayInputStream(token.getIdentifier());\n    DataInputStream dis \u003d new DataInputStream(buf);\n    DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier(tokenKind);\n    id.readFields(dis);\n    dis.close();\n    return id;\n  }",
          "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/delegation/web/DelegationTokenManager.java",
          "extendedDetails": {
            "oldValue": "[token-Token\u003cDelegationTokenIdentifier\u003e]",
            "newValue": "[token-Token\u003cDelegationTokenIdentifier\u003e, tokenKind-Text]"
          }
        },
        {
          "type": "Yreturntypechange",
          "commitMessage": "HADOOP-11181. Generalized o.a.h.s.t.d.DelegationTokenManager to handle all sub-classes of AbstractDelegationTokenIdentifier. Contributed by Zhijie Shen.\n",
          "commitDate": "14/10/14 11:35 AM",
          "commitName": "cdce88376a60918dfe2f3bcd82a7666d74992a19",
          "commitAuthor": "Zhijie Shen",
          "commitDateOld": "20/09/14 8:21 AM",
          "commitNameOld": "db890eef3208cc557476fa510f7a253ba22bc68a",
          "commitAuthorOld": "Alejandro Abdelnur",
          "daysBetweenCommits": 24.13,
          "commitsBetweenForRepo": 240,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,10 +1,10 @@\n-  public UserGroupInformation verifyToken(Token\u003cDelegationTokenIdentifier\u003e\n-      token) throws IOException {\n+  private static DelegationTokenIdentifier decodeToken(\n+      Token\u003cDelegationTokenIdentifier\u003e token, Text tokenKind)\n+          throws IOException {\n     ByteArrayInputStream buf \u003d new ByteArrayInputStream(token.getIdentifier());\n     DataInputStream dis \u003d new DataInputStream(buf);\n     DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier(tokenKind);\n     id.readFields(dis);\n     dis.close();\n-    secretManager.verifyToken(id, token.getPassword());\n-    return id.getUser();\n+    return id;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private static DelegationTokenIdentifier decodeToken(\n      Token\u003cDelegationTokenIdentifier\u003e token, Text tokenKind)\n          throws IOException {\n    ByteArrayInputStream buf \u003d new ByteArrayInputStream(token.getIdentifier());\n    DataInputStream dis \u003d new DataInputStream(buf);\n    DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier(tokenKind);\n    id.readFields(dis);\n    dis.close();\n    return id;\n  }",
          "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/delegation/web/DelegationTokenManager.java",
          "extendedDetails": {
            "oldValue": "UserGroupInformation",
            "newValue": "DelegationTokenIdentifier"
          }
        },
        {
          "type": "Ymodifierchange",
          "commitMessage": "HADOOP-11181. Generalized o.a.h.s.t.d.DelegationTokenManager to handle all sub-classes of AbstractDelegationTokenIdentifier. Contributed by Zhijie Shen.\n",
          "commitDate": "14/10/14 11:35 AM",
          "commitName": "cdce88376a60918dfe2f3bcd82a7666d74992a19",
          "commitAuthor": "Zhijie Shen",
          "commitDateOld": "20/09/14 8:21 AM",
          "commitNameOld": "db890eef3208cc557476fa510f7a253ba22bc68a",
          "commitAuthorOld": "Alejandro Abdelnur",
          "daysBetweenCommits": 24.13,
          "commitsBetweenForRepo": 240,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,10 +1,10 @@\n-  public UserGroupInformation verifyToken(Token\u003cDelegationTokenIdentifier\u003e\n-      token) throws IOException {\n+  private static DelegationTokenIdentifier decodeToken(\n+      Token\u003cDelegationTokenIdentifier\u003e token, Text tokenKind)\n+          throws IOException {\n     ByteArrayInputStream buf \u003d new ByteArrayInputStream(token.getIdentifier());\n     DataInputStream dis \u003d new DataInputStream(buf);\n     DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier(tokenKind);\n     id.readFields(dis);\n     dis.close();\n-    secretManager.verifyToken(id, token.getPassword());\n-    return id.getUser();\n+    return id;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private static DelegationTokenIdentifier decodeToken(\n      Token\u003cDelegationTokenIdentifier\u003e token, Text tokenKind)\n          throws IOException {\n    ByteArrayInputStream buf \u003d new ByteArrayInputStream(token.getIdentifier());\n    DataInputStream dis \u003d new DataInputStream(buf);\n    DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier(tokenKind);\n    id.readFields(dis);\n    dis.close();\n    return id;\n  }",
          "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/delegation/web/DelegationTokenManager.java",
          "extendedDetails": {
            "oldValue": "[public]",
            "newValue": "[private, static]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HADOOP-11181. Generalized o.a.h.s.t.d.DelegationTokenManager to handle all sub-classes of AbstractDelegationTokenIdentifier. Contributed by Zhijie Shen.\n",
          "commitDate": "14/10/14 11:35 AM",
          "commitName": "cdce88376a60918dfe2f3bcd82a7666d74992a19",
          "commitAuthor": "Zhijie Shen",
          "commitDateOld": "20/09/14 8:21 AM",
          "commitNameOld": "db890eef3208cc557476fa510f7a253ba22bc68a",
          "commitAuthorOld": "Alejandro Abdelnur",
          "daysBetweenCommits": 24.13,
          "commitsBetweenForRepo": 240,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,10 +1,10 @@\n-  public UserGroupInformation verifyToken(Token\u003cDelegationTokenIdentifier\u003e\n-      token) throws IOException {\n+  private static DelegationTokenIdentifier decodeToken(\n+      Token\u003cDelegationTokenIdentifier\u003e token, Text tokenKind)\n+          throws IOException {\n     ByteArrayInputStream buf \u003d new ByteArrayInputStream(token.getIdentifier());\n     DataInputStream dis \u003d new DataInputStream(buf);\n     DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier(tokenKind);\n     id.readFields(dis);\n     dis.close();\n-    secretManager.verifyToken(id, token.getPassword());\n-    return id.getUser();\n+    return id;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private static DelegationTokenIdentifier decodeToken(\n      Token\u003cDelegationTokenIdentifier\u003e token, Text tokenKind)\n          throws IOException {\n    ByteArrayInputStream buf \u003d new ByteArrayInputStream(token.getIdentifier());\n    DataInputStream dis \u003d new DataInputStream(buf);\n    DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier(tokenKind);\n    id.readFields(dis);\n    dis.close();\n    return id;\n  }",
          "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/delegation/web/DelegationTokenManager.java",
          "extendedDetails": {}
        }
      ]
    },
    "be9c67930b57c516723d566625f9036a88a84055": {
      "type": "Ymultichange(Yexceptionschange,Ybodychange)",
      "commitMessage": "HADOOP-10771. Refactor HTTP delegation support out of httpfs to common, PART 2. (tucu)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1616672 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "07/08/14 9:58 PM",
      "commitName": "be9c67930b57c516723d566625f9036a88a84055",
      "commitAuthor": "Alejandro Abdelnur",
      "subchanges": [
        {
          "type": "Yexceptionschange",
          "commitMessage": "HADOOP-10771. Refactor HTTP delegation support out of httpfs to common, PART 2. (tucu)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1616672 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "07/08/14 9:58 PM",
          "commitName": "be9c67930b57c516723d566625f9036a88a84055",
          "commitAuthor": "Alejandro Abdelnur",
          "commitDateOld": "07/08/14 9:55 PM",
          "commitNameOld": "4e7c4a6e1fd00767d966cd2482a364b2eacbd35b",
          "commitAuthorOld": "Alejandro Abdelnur",
          "daysBetweenCommits": 0.0,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,15 +1,10 @@\n-  public UserGroupInformation verifyToken(Token\u003cDelegationTokenIdentifier\u003e token)\n-    throws DelegationTokenManagerException {\n+  public UserGroupInformation verifyToken(Token\u003cDelegationTokenIdentifier\u003e\n+      token) throws IOException {\n     ByteArrayInputStream buf \u003d new ByteArrayInputStream(token.getIdentifier());\n     DataInputStream dis \u003d new DataInputStream(buf);\n     DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier(tokenKind);\n-    try {\n-      id.readFields(dis);\n-      dis.close();\n-      secretManager.verifyToken(id, token.getPassword());\n-    } catch (Exception ex) {\n-      throw new DelegationTokenManagerException(\n-        DelegationTokenManagerException.ERROR.DT01, ex.toString(), ex);\n-    }\n+    id.readFields(dis);\n+    dis.close();\n+    secretManager.verifyToken(id, token.getPassword());\n     return id.getUser();\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public UserGroupInformation verifyToken(Token\u003cDelegationTokenIdentifier\u003e\n      token) throws IOException {\n    ByteArrayInputStream buf \u003d new ByteArrayInputStream(token.getIdentifier());\n    DataInputStream dis \u003d new DataInputStream(buf);\n    DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier(tokenKind);\n    id.readFields(dis);\n    dis.close();\n    secretManager.verifyToken(id, token.getPassword());\n    return id.getUser();\n  }",
          "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/delegation/web/DelegationTokenManager.java",
          "extendedDetails": {
            "oldValue": "[DelegationTokenManagerException]",
            "newValue": "[IOException]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HADOOP-10771. Refactor HTTP delegation support out of httpfs to common, PART 2. (tucu)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1616672 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "07/08/14 9:58 PM",
          "commitName": "be9c67930b57c516723d566625f9036a88a84055",
          "commitAuthor": "Alejandro Abdelnur",
          "commitDateOld": "07/08/14 9:55 PM",
          "commitNameOld": "4e7c4a6e1fd00767d966cd2482a364b2eacbd35b",
          "commitAuthorOld": "Alejandro Abdelnur",
          "daysBetweenCommits": 0.0,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,15 +1,10 @@\n-  public UserGroupInformation verifyToken(Token\u003cDelegationTokenIdentifier\u003e token)\n-    throws DelegationTokenManagerException {\n+  public UserGroupInformation verifyToken(Token\u003cDelegationTokenIdentifier\u003e\n+      token) throws IOException {\n     ByteArrayInputStream buf \u003d new ByteArrayInputStream(token.getIdentifier());\n     DataInputStream dis \u003d new DataInputStream(buf);\n     DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier(tokenKind);\n-    try {\n-      id.readFields(dis);\n-      dis.close();\n-      secretManager.verifyToken(id, token.getPassword());\n-    } catch (Exception ex) {\n-      throw new DelegationTokenManagerException(\n-        DelegationTokenManagerException.ERROR.DT01, ex.toString(), ex);\n-    }\n+    id.readFields(dis);\n+    dis.close();\n+    secretManager.verifyToken(id, token.getPassword());\n     return id.getUser();\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public UserGroupInformation verifyToken(Token\u003cDelegationTokenIdentifier\u003e\n      token) throws IOException {\n    ByteArrayInputStream buf \u003d new ByteArrayInputStream(token.getIdentifier());\n    DataInputStream dis \u003d new DataInputStream(buf);\n    DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier(tokenKind);\n    id.readFields(dis);\n    dis.close();\n    secretManager.verifyToken(id, token.getPassword());\n    return id.getUser();\n  }",
          "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/delegation/web/DelegationTokenManager.java",
          "extendedDetails": {}
        }
      ]
    },
    "4e7c4a6e1fd00767d966cd2482a364b2eacbd35b": {
      "type": "Yfilerename",
      "commitMessage": "HADOOP-10771. Refactor HTTP delegation support out of httpfs to common, PART 1. (tucu)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1616671 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "07/08/14 9:55 PM",
      "commitName": "4e7c4a6e1fd00767d966cd2482a364b2eacbd35b",
      "commitAuthor": "Alejandro Abdelnur",
      "commitDateOld": "07/08/14 9:27 PM",
      "commitNameOld": "2ac640ec751f665365d548104b3713e414f53351",
      "commitAuthorOld": "Haohui Mai",
      "daysBetweenCommits": 0.02,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  public UserGroupInformation verifyToken(Token\u003cDelegationTokenIdentifier\u003e token)\n    throws DelegationTokenManagerException {\n    ByteArrayInputStream buf \u003d new ByteArrayInputStream(token.getIdentifier());\n    DataInputStream dis \u003d new DataInputStream(buf);\n    DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier(tokenKind);\n    try {\n      id.readFields(dis);\n      dis.close();\n      secretManager.verifyToken(id, token.getPassword());\n    } catch (Exception ex) {\n      throw new DelegationTokenManagerException(\n        DelegationTokenManagerException.ERROR.DT01, ex.toString(), ex);\n    }\n    return id.getUser();\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/delegation/web/DelegationTokenManager.java",
      "extendedDetails": {
        "oldPath": "hadoop-hdfs-project/hadoop-hdfs-httpfs/src/main/java/org/apache/hadoop/lib/service/security/DelegationTokenManagerService.java",
        "newPath": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/token/delegation/web/DelegationTokenManager.java"
      }
    },
    "5e09ae1633fb7fcf293ea10e663064e566c70909": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-5703. Add support for HTTPS and swebhdfs to HttpFS. (tucu)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1560504 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "22/01/14 12:38 PM",
      "commitName": "5e09ae1633fb7fcf293ea10e663064e566c70909",
      "commitAuthor": "Alejandro Abdelnur",
      "commitDateOld": "01/08/12 4:14 PM",
      "commitNameOld": "08e89662170010dd619c0df859c670cb37b630dd",
      "commitAuthorOld": "Alejandro Abdelnur",
      "daysBetweenCommits": 538.89,
      "commitsBetweenForRepo": 3159,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,15 @@\n   public UserGroupInformation verifyToken(Token\u003cDelegationTokenIdentifier\u003e token)\n     throws DelegationTokenManagerException {\n     ByteArrayInputStream buf \u003d new ByteArrayInputStream(token.getIdentifier());\n     DataInputStream dis \u003d new DataInputStream(buf);\n-    DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier();\n+    DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier(tokenKind);\n     try {\n       id.readFields(dis);\n       dis.close();\n       secretManager.verifyToken(id, token.getPassword());\n     } catch (Exception ex) {\n       throw new DelegationTokenManagerException(\n         DelegationTokenManagerException.ERROR.DT01, ex.toString(), ex);\n     }\n     return id.getUser();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public UserGroupInformation verifyToken(Token\u003cDelegationTokenIdentifier\u003e token)\n    throws DelegationTokenManagerException {\n    ByteArrayInputStream buf \u003d new ByteArrayInputStream(token.getIdentifier());\n    DataInputStream dis \u003d new DataInputStream(buf);\n    DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier(tokenKind);\n    try {\n      id.readFields(dis);\n      dis.close();\n      secretManager.verifyToken(id, token.getPassword());\n    } catch (Exception ex) {\n      throw new DelegationTokenManagerException(\n        DelegationTokenManagerException.ERROR.DT01, ex.toString(), ex);\n    }\n    return id.getUser();\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-httpfs/src/main/java/org/apache/hadoop/lib/service/security/DelegationTokenManagerService.java",
      "extendedDetails": {}
    },
    "4d4560189adccb941a3dc5eee7add134adbf6519": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-3113. httpfs does not support delegation tokens. (tucu)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1365988 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "26/07/12 6:39 AM",
      "commitName": "4d4560189adccb941a3dc5eee7add134adbf6519",
      "commitAuthor": "Alejandro Abdelnur",
      "diff": "@@ -0,0 +1,15 @@\n+  public UserGroupInformation verifyToken(Token\u003cDelegationTokenIdentifier\u003e token)\n+    throws DelegationTokenManagerException {\n+    ByteArrayInputStream buf \u003d new ByteArrayInputStream(token.getIdentifier());\n+    DataInputStream dis \u003d new DataInputStream(buf);\n+    DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier();\n+    try {\n+      id.readFields(dis);\n+      dis.close();\n+      secretManager.verifyToken(id, token.getPassword());\n+    } catch (Exception ex) {\n+      throw new DelegationTokenManagerException(\n+        DelegationTokenManagerException.ERROR.DT01, ex.toString(), ex);\n+    }\n+    return id.getUser();\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public UserGroupInformation verifyToken(Token\u003cDelegationTokenIdentifier\u003e token)\n    throws DelegationTokenManagerException {\n    ByteArrayInputStream buf \u003d new ByteArrayInputStream(token.getIdentifier());\n    DataInputStream dis \u003d new DataInputStream(buf);\n    DelegationTokenIdentifier id \u003d new DelegationTokenIdentifier();\n    try {\n      id.readFields(dis);\n      dis.close();\n      secretManager.verifyToken(id, token.getPassword());\n    } catch (Exception ex) {\n      throw new DelegationTokenManagerException(\n        DelegationTokenManagerException.ERROR.DT01, ex.toString(), ex);\n    }\n    return id.getUser();\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-httpfs/src/main/java/org/apache/hadoop/lib/service/security/DelegationTokenManagerService.java"
    }
  }
}