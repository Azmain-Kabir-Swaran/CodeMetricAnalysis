{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "AbfsUriQueryBuilder.java",
  "functionName": "toString",
  "functionId": "toString",
  "sourceFilePath": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsUriQueryBuilder.java",
  "functionStartLine": 49,
  "functionEndLine": 78,
  "numCommitsSeen": 4,
  "timeTaken": 1328,
  "changeHistory": [
    "791270a2e5e31546ff5c1ef4fa8bad6852b906dc",
    "b54b0c1b676c616aef9574e4e88ea30c314c79dc",
    "f044deedbbfee0812316d587139cb828f27172e9"
  ],
  "changeHistoryShort": {
    "791270a2e5e31546ff5c1ef4fa8bad6852b906dc": "Ybodychange",
    "b54b0c1b676c616aef9574e4e88ea30c314c79dc": "Ybodychange",
    "f044deedbbfee0812316d587139cb828f27172e9": "Yintroduced"
  },
  "changeHistoryDetails": {
    "791270a2e5e31546ff5c1ef4fa8bad6852b906dc": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-16730: ABFS: Support for Shared Access Signatures (SAS). Contributed by Sneha Vijayarajan.\n",
      "commitDate": "27/02/20 10:27 AM",
      "commitName": "791270a2e5e31546ff5c1ef4fa8bad6852b906dc",
      "commitAuthor": "Sneha Vijayarajan",
      "commitDateOld": "17/09/18 12:54 PM",
      "commitNameOld": "b54b0c1b676c616aef9574e4e88ea30c314c79dc",
      "commitAuthorOld": "Thomas Marquardt",
      "daysBetweenCommits": 527.94,
      "commitsBetweenForRepo": 3541,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,20 +1,30 @@\n   public String toString() {\n     StringBuilder sb \u003d new StringBuilder();\n     boolean first \u003d true;\n \n     for (Map.Entry\u003cString, String\u003e entry : parameters.entrySet()) {\n       if (first) {\n         sb.append(AbfsHttpConstants.QUESTION_MARK);\n         first \u003d false;\n       } else {\n         sb.append(AbfsHttpConstants.AND_MARK);\n       }\n       try {\n         sb.append(entry.getKey()).append(AbfsHttpConstants.EQUAL).append(AbfsClient.urlEncode(entry.getValue()));\n       }\n       catch (AzureBlobFileSystemException ex) {\n         throw new IllegalArgumentException(\"Query string param is not encode-able: \" + entry.getKey() + \"\u003d\" + entry.getValue());\n       }\n     }\n+    // append SAS Token\n+    if (sasToken !\u003d null) {\n+      if (first) {\n+        sb.append(AbfsHttpConstants.QUESTION_MARK);\n+      } else {\n+        sb.append(AbfsHttpConstants.AND_MARK);\n+      }\n+\n+      sb.append(sasToken);\n+    }\n     return sb.toString();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public String toString() {\n    StringBuilder sb \u003d new StringBuilder();\n    boolean first \u003d true;\n\n    for (Map.Entry\u003cString, String\u003e entry : parameters.entrySet()) {\n      if (first) {\n        sb.append(AbfsHttpConstants.QUESTION_MARK);\n        first \u003d false;\n      } else {\n        sb.append(AbfsHttpConstants.AND_MARK);\n      }\n      try {\n        sb.append(entry.getKey()).append(AbfsHttpConstants.EQUAL).append(AbfsClient.urlEncode(entry.getValue()));\n      }\n      catch (AzureBlobFileSystemException ex) {\n        throw new IllegalArgumentException(\"Query string param is not encode-able: \" + entry.getKey() + \"\u003d\" + entry.getValue());\n      }\n    }\n    // append SAS Token\n    if (sasToken !\u003d null) {\n      if (first) {\n        sb.append(AbfsHttpConstants.QUESTION_MARK);\n      } else {\n        sb.append(AbfsHttpConstants.AND_MARK);\n      }\n\n      sb.append(sasToken);\n    }\n    return sb.toString();\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsUriQueryBuilder.java",
      "extendedDetails": {}
    },
    "b54b0c1b676c616aef9574e4e88ea30c314c79dc": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-15659. Code changes for bug fix and new tests.\nContributed by Da Zhou.\n",
      "commitDate": "17/09/18 12:54 PM",
      "commitName": "b54b0c1b676c616aef9574e4e88ea30c314c79dc",
      "commitAuthor": "Thomas Marquardt",
      "commitDateOld": "17/09/18 12:54 PM",
      "commitNameOld": "ce03a93f78c4d97ccb48a3906fcd77ad0ac756be",
      "commitAuthorOld": "Thomas Marquardt",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,20 @@\n   public String toString() {\n     StringBuilder sb \u003d new StringBuilder();\n     boolean first \u003d true;\n \n     for (Map.Entry\u003cString, String\u003e entry : parameters.entrySet()) {\n       if (first) {\n         sb.append(AbfsHttpConstants.QUESTION_MARK);\n         first \u003d false;\n       } else {\n         sb.append(AbfsHttpConstants.AND_MARK);\n       }\n-      sb.append(entry.getKey()).append(AbfsHttpConstants.EQUAL).append(entry.getValue());\n+      try {\n+        sb.append(entry.getKey()).append(AbfsHttpConstants.EQUAL).append(AbfsClient.urlEncode(entry.getValue()));\n+      }\n+      catch (AzureBlobFileSystemException ex) {\n+        throw new IllegalArgumentException(\"Query string param is not encode-able: \" + entry.getKey() + \"\u003d\" + entry.getValue());\n+      }\n     }\n     return sb.toString();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public String toString() {\n    StringBuilder sb \u003d new StringBuilder();\n    boolean first \u003d true;\n\n    for (Map.Entry\u003cString, String\u003e entry : parameters.entrySet()) {\n      if (first) {\n        sb.append(AbfsHttpConstants.QUESTION_MARK);\n        first \u003d false;\n      } else {\n        sb.append(AbfsHttpConstants.AND_MARK);\n      }\n      try {\n        sb.append(entry.getKey()).append(AbfsHttpConstants.EQUAL).append(AbfsClient.urlEncode(entry.getValue()));\n      }\n      catch (AzureBlobFileSystemException ex) {\n        throw new IllegalArgumentException(\"Query string param is not encode-able: \" + entry.getKey() + \"\u003d\" + entry.getValue());\n      }\n    }\n    return sb.toString();\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsUriQueryBuilder.java",
      "extendedDetails": {}
    },
    "f044deedbbfee0812316d587139cb828f27172e9": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-15407. HADOOP-15540. Support Windows Azure Storage - Blob file system \"ABFS\" in Hadoop: Core Commit.\n\nContributed by Shane Mainali, Thomas Marquardt, Zichen Sun, Georgi Chalakov, Esfandiar Manii, Amit Singh, Dana Kaban, Da Zhou, Junhua Gu, Saher Ahwal, Saurabh Pant, James Baker, Shaoyu Zhang, Lawrence Chen, Kevin Chen and Steve Loughran\n",
      "commitDate": "17/09/18 12:54 PM",
      "commitName": "f044deedbbfee0812316d587139cb828f27172e9",
      "commitAuthor": "Steve Loughran",
      "diff": "@@ -0,0 +1,15 @@\n+  public String toString() {\n+    StringBuilder sb \u003d new StringBuilder();\n+    boolean first \u003d true;\n+\n+    for (Map.Entry\u003cString, String\u003e entry : parameters.entrySet()) {\n+      if (first) {\n+        sb.append(AbfsHttpConstants.QUESTION_MARK);\n+        first \u003d false;\n+      } else {\n+        sb.append(AbfsHttpConstants.AND_MARK);\n+      }\n+      sb.append(entry.getKey()).append(AbfsHttpConstants.EQUAL).append(entry.getValue());\n+    }\n+    return sb.toString();\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public String toString() {\n    StringBuilder sb \u003d new StringBuilder();\n    boolean first \u003d true;\n\n    for (Map.Entry\u003cString, String\u003e entry : parameters.entrySet()) {\n      if (first) {\n        sb.append(AbfsHttpConstants.QUESTION_MARK);\n        first \u003d false;\n      } else {\n        sb.append(AbfsHttpConstants.AND_MARK);\n      }\n      sb.append(entry.getKey()).append(AbfsHttpConstants.EQUAL).append(entry.getValue());\n    }\n    return sb.toString();\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsUriQueryBuilder.java"
    }
  }
}