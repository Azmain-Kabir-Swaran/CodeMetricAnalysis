{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "DelegatingSSLSocketFactory.java",
  "functionName": "alterCipherList",
  "functionId": "alterCipherList___defaultCiphers-String[]",
  "sourceFilePath": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/ssl/DelegatingSSLSocketFactory.java",
  "functionStartLine": 286,
  "functionEndLine": 302,
  "numCommitsSeen": 14,
  "timeTaken": 4209,
  "changeHistory": [
    "42711081e3cba5835493b5cbedc23d16dfea7667",
    "55ce454ce4f1b1eaa9f041f3b0fb69a9fcc56894",
    "309501c6fa1073f3cfd7e535a4207dbfb21165f9",
    "b067f8acaa79b1230336900a5c62ba465b2adb28",
    "d6a4f39bd5f192e5e3377630887a6998d4d400c2"
  ],
  "changeHistoryShort": {
    "42711081e3cba5835493b5cbedc23d16dfea7667": "Ybodychange",
    "55ce454ce4f1b1eaa9f041f3b0fb69a9fcc56894": "Ymultichange(Yfilerename,Ybodychange)",
    "309501c6fa1073f3cfd7e535a4207dbfb21165f9": "Yfilerename",
    "b067f8acaa79b1230336900a5c62ba465b2adb28": "Yfilerename",
    "d6a4f39bd5f192e5e3377630887a6998d4d400c2": "Yintroduced"
  },
  "changeHistoryDetails": {
    "42711081e3cba5835493b5cbedc23d16dfea7667": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-16986. S3A to not need wildfly on the classpath. (#1948)\n\nHADOOP-16986. S3A to not need wildfly JAR on its classpath.\r\n\r\nContributed by Steve Loughran\r\n\r\nThis is a successor to HADOOP-16346, which enabled the S3A connector\r\nto load the native openssl SSL libraries for better HTTPS performance.\r\n\r\nThat patch required wildfly.jar to be on the classpath. This\r\nupdate:\r\n\r\n* Makes wildfly.jar optional except in the special case that \r\n\"fs.s3a.ssl.channel.mode\" is set to \"openssl\"\r\n\r\n* Retains the declaration of wildfly.jar as a compile-time\r\ndependency in the hadoop-aws POM. This means that unless\r\nexplicitly excluded, applications importing that published\r\nmaven artifact will, transitively, add the specified\r\nwildfly JAR into their classpath for compilation/testing/\r\ndistribution.\r\n\r\nThis is done for packaging and to offer that optional\r\nspeedup. It is not mandatory: applications importing\r\nthe hadoop-aws POM can exclude it if they choose.\r\n\r\n",
      "commitDate": "20/04/20 6:32 AM",
      "commitName": "42711081e3cba5835493b5cbedc23d16dfea7667",
      "commitAuthor": "Steve Loughran",
      "commitDateOld": "21/01/20 8:37 AM",
      "commitNameOld": "f206b736f0b370d212a399937c7a84e432f12eb5",
      "commitAuthorOld": "Sahil Takiar",
      "daysBetweenCommits": 89.87,
      "commitsBetweenForRepo": 293,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,17 @@\n   private String[] alterCipherList(String[] defaultCiphers) {\n \n-    ArrayList\u003cString\u003e preferredSuits \u003d new ArrayList\u003c\u003e();\n+    ArrayList\u003cString\u003e preferredSuites \u003d new ArrayList\u003c\u003e();\n \n     // Remove GCM mode based ciphers from the supported list.\n     for (int i \u003d 0; i \u003c defaultCiphers.length; i++) {\n       if (defaultCiphers[i].contains(\"_GCM_\")) {\n         LOG.debug(\"Removed Cipher - {} from list of enabled SSLSocket ciphers\",\n                 defaultCiphers[i]);\n       } else {\n-        preferredSuits.add(defaultCiphers[i]);\n+        preferredSuites.add(defaultCiphers[i]);\n       }\n     }\n \n-    ciphers \u003d preferredSuits.toArray(new String[0]);\n+    ciphers \u003d preferredSuites.toArray(new String[0]);\n     return ciphers;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private String[] alterCipherList(String[] defaultCiphers) {\n\n    ArrayList\u003cString\u003e preferredSuites \u003d new ArrayList\u003c\u003e();\n\n    // Remove GCM mode based ciphers from the supported list.\n    for (int i \u003d 0; i \u003c defaultCiphers.length; i++) {\n      if (defaultCiphers[i].contains(\"_GCM_\")) {\n        LOG.debug(\"Removed Cipher - {} from list of enabled SSLSocket ciphers\",\n                defaultCiphers[i]);\n      } else {\n        preferredSuites.add(defaultCiphers[i]);\n      }\n    }\n\n    ciphers \u003d preferredSuites.toArray(new String[0]);\n    return ciphers;\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/ssl/DelegatingSSLSocketFactory.java",
      "extendedDetails": {}
    },
    "55ce454ce4f1b1eaa9f041f3b0fb69a9fcc56894": {
      "type": "Ymultichange(Yfilerename,Ybodychange)",
      "commitMessage": "HADOOP-16371: Option to disable GCM for SSL connections when running on Java 8.\n\nContributed by Sahil Takiar.\n\nThis moves the SSLSocketFactoryEx class from hadoop-azure into hadoop-common\nas the DelegatingSSLSocketFactory and binds the S3A connector to it so that\nit can avoid using those HTTPS algorithms which are underperformant on Java 8.\n\nChange-Id: Ie9e6ac24deac1aa05e136e08899620efa7d22abd\n",
      "commitDate": "17/09/19 3:32 AM",
      "commitName": "55ce454ce4f1b1eaa9f041f3b0fb69a9fcc56894",
      "commitAuthor": "Sahil Takiar",
      "subchanges": [
        {
          "type": "Yfilerename",
          "commitMessage": "HADOOP-16371: Option to disable GCM for SSL connections when running on Java 8.\n\nContributed by Sahil Takiar.\n\nThis moves the SSLSocketFactoryEx class from hadoop-azure into hadoop-common\nas the DelegatingSSLSocketFactory and binds the S3A connector to it so that\nit can avoid using those HTTPS algorithms which are underperformant on Java 8.\n\nChange-Id: Ie9e6ac24deac1aa05e136e08899620efa7d22abd\n",
          "commitDate": "17/09/19 3:32 AM",
          "commitName": "55ce454ce4f1b1eaa9f041f3b0fb69a9fcc56894",
          "commitAuthor": "Sahil Takiar",
          "commitDateOld": "17/09/19 3:28 AM",
          "commitNameOld": "3a549cea193fef0a2386f6c932a48ca2c66ab89a",
          "commitAuthorOld": "Márton Elek",
          "daysBetweenCommits": 0.0,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,16 +1,17 @@\n   private String[] alterCipherList(String[] defaultCiphers) {\n \n     ArrayList\u003cString\u003e preferredSuits \u003d new ArrayList\u003c\u003e();\n \n     // Remove GCM mode based ciphers from the supported list.\n     for (int i \u003d 0; i \u003c defaultCiphers.length; i++) {\n       if (defaultCiphers[i].contains(\"_GCM_\")) {\n-        LOG.debug(\"Removed Cipher - \" + defaultCiphers[i]);\n+        LOG.debug(\"Removed Cipher - {} from list of enabled SSLSocket ciphers\",\n+                defaultCiphers[i]);\n       } else {\n         preferredSuits.add(defaultCiphers[i]);\n       }\n     }\n \n     ciphers \u003d preferredSuits.toArray(new String[0]);\n     return ciphers;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private String[] alterCipherList(String[] defaultCiphers) {\n\n    ArrayList\u003cString\u003e preferredSuits \u003d new ArrayList\u003c\u003e();\n\n    // Remove GCM mode based ciphers from the supported list.\n    for (int i \u003d 0; i \u003c defaultCiphers.length; i++) {\n      if (defaultCiphers[i].contains(\"_GCM_\")) {\n        LOG.debug(\"Removed Cipher - {} from list of enabled SSLSocket ciphers\",\n                defaultCiphers[i]);\n      } else {\n        preferredSuits.add(defaultCiphers[i]);\n      }\n    }\n\n    ciphers \u003d preferredSuits.toArray(new String[0]);\n    return ciphers;\n  }",
          "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/ssl/DelegatingSSLSocketFactory.java",
          "extendedDetails": {
            "oldPath": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/utils/SSLSocketFactoryEx.java",
            "newPath": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/ssl/DelegatingSSLSocketFactory.java"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HADOOP-16371: Option to disable GCM for SSL connections when running on Java 8.\n\nContributed by Sahil Takiar.\n\nThis moves the SSLSocketFactoryEx class from hadoop-azure into hadoop-common\nas the DelegatingSSLSocketFactory and binds the S3A connector to it so that\nit can avoid using those HTTPS algorithms which are underperformant on Java 8.\n\nChange-Id: Ie9e6ac24deac1aa05e136e08899620efa7d22abd\n",
          "commitDate": "17/09/19 3:32 AM",
          "commitName": "55ce454ce4f1b1eaa9f041f3b0fb69a9fcc56894",
          "commitAuthor": "Sahil Takiar",
          "commitDateOld": "17/09/19 3:28 AM",
          "commitNameOld": "3a549cea193fef0a2386f6c932a48ca2c66ab89a",
          "commitAuthorOld": "Márton Elek",
          "daysBetweenCommits": 0.0,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,16 +1,17 @@\n   private String[] alterCipherList(String[] defaultCiphers) {\n \n     ArrayList\u003cString\u003e preferredSuits \u003d new ArrayList\u003c\u003e();\n \n     // Remove GCM mode based ciphers from the supported list.\n     for (int i \u003d 0; i \u003c defaultCiphers.length; i++) {\n       if (defaultCiphers[i].contains(\"_GCM_\")) {\n-        LOG.debug(\"Removed Cipher - \" + defaultCiphers[i]);\n+        LOG.debug(\"Removed Cipher - {} from list of enabled SSLSocket ciphers\",\n+                defaultCiphers[i]);\n       } else {\n         preferredSuits.add(defaultCiphers[i]);\n       }\n     }\n \n     ciphers \u003d preferredSuits.toArray(new String[0]);\n     return ciphers;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private String[] alterCipherList(String[] defaultCiphers) {\n\n    ArrayList\u003cString\u003e preferredSuits \u003d new ArrayList\u003c\u003e();\n\n    // Remove GCM mode based ciphers from the supported list.\n    for (int i \u003d 0; i \u003c defaultCiphers.length; i++) {\n      if (defaultCiphers[i].contains(\"_GCM_\")) {\n        LOG.debug(\"Removed Cipher - {} from list of enabled SSLSocket ciphers\",\n                defaultCiphers[i]);\n      } else {\n        preferredSuits.add(defaultCiphers[i]);\n      }\n    }\n\n    ciphers \u003d preferredSuits.toArray(new String[0]);\n    return ciphers;\n  }",
          "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/ssl/DelegatingSSLSocketFactory.java",
          "extendedDetails": {}
        }
      ]
    },
    "309501c6fa1073f3cfd7e535a4207dbfb21165f9": {
      "type": "Yfilerename",
      "commitMessage": "Revert \"HADOOP-16050: s3a SSL connections should use OpenSSL\"\n\nThis reverts commit b067f8acaa79b1230336900a5c62ba465b2adb28.\n\nChange-Id: I584b050a56c0e6f70b11fa3f7db00d5ac46e7dd8\n",
      "commitDate": "05/06/19 5:54 AM",
      "commitName": "309501c6fa1073f3cfd7e535a4207dbfb21165f9",
      "commitAuthor": "Steve Loughran",
      "commitDateOld": "05/06/19 5:54 AM",
      "commitNameOld": "7724d8031b3b8cf499c9777c837b5000db12ecee",
      "commitAuthorOld": "Steve Loughran",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  private String[] alterCipherList(String[] defaultCiphers) {\n\n    ArrayList\u003cString\u003e preferredSuits \u003d new ArrayList\u003c\u003e();\n\n    // Remove GCM mode based ciphers from the supported list.\n    for (int i \u003d 0; i \u003c defaultCiphers.length; i++) {\n      if (defaultCiphers[i].contains(\"_GCM_\")) {\n        LOG.debug(\"Removed Cipher - \" + defaultCiphers[i]);\n      } else {\n        preferredSuits.add(defaultCiphers[i]);\n      }\n    }\n\n    ciphers \u003d preferredSuits.toArray(new String[0]);\n    return ciphers;\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/utils/SSLSocketFactoryEx.java",
      "extendedDetails": {
        "oldPath": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/ssl/OpenSSLSocketFactory.java",
        "newPath": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/utils/SSLSocketFactoryEx.java"
      }
    },
    "b067f8acaa79b1230336900a5c62ba465b2adb28": {
      "type": "Yfilerename",
      "commitMessage": "HADOOP-16050: s3a SSL connections should use OpenSSL\n\n(cherry picked from commit aebf229c175dfa19fff3b31e9e67596f6c6124fa)\n",
      "commitDate": "16/05/19 7:57 AM",
      "commitName": "b067f8acaa79b1230336900a5c62ba465b2adb28",
      "commitAuthor": "Sahil Takiar",
      "commitDateOld": "16/05/19 7:38 AM",
      "commitNameOld": "b7de7351590c555cf4f810be490f183a2d36f9e3",
      "commitAuthorOld": "Elek, Márton",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  private String[] alterCipherList(String[] defaultCiphers) {\n\n    ArrayList\u003cString\u003e preferredSuits \u003d new ArrayList\u003c\u003e();\n\n    // Remove GCM mode based ciphers from the supported list.\n    for (int i \u003d 0; i \u003c defaultCiphers.length; i++) {\n      if (defaultCiphers[i].contains(\"_GCM_\")) {\n        LOG.debug(\"Removed Cipher - \" + defaultCiphers[i]);\n      } else {\n        preferredSuits.add(defaultCiphers[i]);\n      }\n    }\n\n    ciphers \u003d preferredSuits.toArray(new String[0]);\n    return ciphers;\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/ssl/OpenSSLSocketFactory.java",
      "extendedDetails": {
        "oldPath": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/utils/SSLSocketFactoryEx.java",
        "newPath": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/ssl/OpenSSLSocketFactory.java"
      }
    },
    "d6a4f39bd5f192e5e3377630887a6998d4d400c2": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-15669. ABFS: Improve HTTPS Performance.\nContributed by Vishwajeet Dusane.\n",
      "commitDate": "17/09/18 12:54 PM",
      "commitName": "d6a4f39bd5f192e5e3377630887a6998d4d400c2",
      "commitAuthor": "Thomas Marquardt",
      "diff": "@@ -0,0 +1,16 @@\n+  private String[] alterCipherList(String[] defaultCiphers) {\n+\n+    ArrayList\u003cString\u003e preferredSuits \u003d new ArrayList\u003c\u003e();\n+\n+    // Remove GCM mode based ciphers from the supported list.\n+    for (int i \u003d 0; i \u003c defaultCiphers.length; i++) {\n+      if (defaultCiphers[i].contains(\"_GCM_\")) {\n+        LOG.debug(\"Removed Cipher - \" + defaultCiphers[i]);\n+      } else {\n+        preferredSuits.add(defaultCiphers[i]);\n+      }\n+    }\n+\n+    ciphers \u003d preferredSuits.toArray(new String[0]);\n+    return ciphers;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private String[] alterCipherList(String[] defaultCiphers) {\n\n    ArrayList\u003cString\u003e preferredSuits \u003d new ArrayList\u003c\u003e();\n\n    // Remove GCM mode based ciphers from the supported list.\n    for (int i \u003d 0; i \u003c defaultCiphers.length; i++) {\n      if (defaultCiphers[i].contains(\"_GCM_\")) {\n        LOG.debug(\"Removed Cipher - \" + defaultCiphers[i]);\n      } else {\n        preferredSuits.add(defaultCiphers[i]);\n      }\n    }\n\n    ciphers \u003d preferredSuits.toArray(new String[0]);\n    return ciphers;\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/utils/SSLSocketFactoryEx.java"
    }
  }
}