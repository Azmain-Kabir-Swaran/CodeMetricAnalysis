{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "ReconfigurationProtocolServerSideUtils.java",
  "functionName": "getReconfigurationStatus",
  "functionId": "getReconfigurationStatus___status-ReconfigurationTaskStatus",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/protocolPB/ReconfigurationProtocolServerSideUtils.java",
  "functionStartLine": 47,
  "functionEndLine": 74,
  "numCommitsSeen": 4,
  "timeTaken": 840,
  "changeHistory": [
    "86c95cb31a392d2ee4dcf3cc36e924ad34000b27"
  ],
  "changeHistoryShort": {
    "86c95cb31a392d2ee4dcf3cc36e924ad34000b27": "Yintroduced"
  },
  "changeHistoryDetails": {
    "86c95cb31a392d2ee4dcf3cc36e924ad34000b27": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-9414. Refactor reconfiguration of ClientDatanodeProtocol for reusability. (Contributed by Xiaobing Zhou)\n",
      "commitDate": "04/12/15 8:24 PM",
      "commitName": "86c95cb31a392d2ee4dcf3cc36e924ad34000b27",
      "commitAuthor": "Arpit Agarwal",
      "diff": "@@ -0,0 +1,28 @@\n+  public static GetReconfigurationStatusResponseProto getReconfigurationStatus(\n+      ReconfigurationTaskStatus status) {\n+    GetReconfigurationStatusResponseProto.Builder builder \u003d\n+        GetReconfigurationStatusResponseProto.newBuilder();\n+\n+    builder.setStartTime(status.getStartTime());\n+    if (status.stopped()) {\n+      builder.setEndTime(status.getEndTime());\n+      assert status.getStatus() !\u003d null;\n+      for (Map.Entry\u003cPropertyChange, Optional\u003cString\u003e\u003e result : status\n+          .getStatus().entrySet()) {\n+        GetReconfigurationStatusConfigChangeProto.Builder changeBuilder \u003d\n+            GetReconfigurationStatusConfigChangeProto.newBuilder();\n+        PropertyChange change \u003d result.getKey();\n+        changeBuilder.setName(change.prop);\n+        changeBuilder.setOldValue(change.oldVal !\u003d null ? change.oldVal : \"\");\n+        if (change.newVal !\u003d null) {\n+          changeBuilder.setNewValue(change.newVal);\n+        }\n+        if (result.getValue().isPresent()) {\n+          // Get full stack trace.\n+          changeBuilder.setErrorMessage(result.getValue().get());\n+        }\n+        builder.addChanges(changeBuilder);\n+      }\n+    }\n+    return builder.build();\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public static GetReconfigurationStatusResponseProto getReconfigurationStatus(\n      ReconfigurationTaskStatus status) {\n    GetReconfigurationStatusResponseProto.Builder builder \u003d\n        GetReconfigurationStatusResponseProto.newBuilder();\n\n    builder.setStartTime(status.getStartTime());\n    if (status.stopped()) {\n      builder.setEndTime(status.getEndTime());\n      assert status.getStatus() !\u003d null;\n      for (Map.Entry\u003cPropertyChange, Optional\u003cString\u003e\u003e result : status\n          .getStatus().entrySet()) {\n        GetReconfigurationStatusConfigChangeProto.Builder changeBuilder \u003d\n            GetReconfigurationStatusConfigChangeProto.newBuilder();\n        PropertyChange change \u003d result.getKey();\n        changeBuilder.setName(change.prop);\n        changeBuilder.setOldValue(change.oldVal !\u003d null ? change.oldVal : \"\");\n        if (change.newVal !\u003d null) {\n          changeBuilder.setNewValue(change.newVal);\n        }\n        if (result.getValue().isPresent()) {\n          // Get full stack trace.\n          changeBuilder.setErrorMessage(result.getValue().get());\n        }\n        builder.addChanges(changeBuilder);\n      }\n    }\n    return builder.build();\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/protocolPB/ReconfigurationProtocolServerSideUtils.java"
    }
  }
}