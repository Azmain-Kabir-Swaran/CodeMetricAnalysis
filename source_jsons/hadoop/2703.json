{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "ClientDatanodeProtocolTranslatorPB.java",
  "functionName": "getReconfigurationStatus",
  "functionId": "getReconfigurationStatus",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/protocolPB/ClientDatanodeProtocolTranslatorPB.java",
  "functionStartLine": 298,
  "functionEndLine": 309,
  "numCommitsSeen": 40,
  "timeTaken": 1879,
  "changeHistory": [
    "86c95cb31a392d2ee4dcf3cc36e924ad34000b27",
    "e2c9b288b223b9fd82dc12018936e13128413492",
    "1861b32eb551a07d748afc6205ea9573f9503eda"
  ],
  "changeHistoryShort": {
    "86c95cb31a392d2ee4dcf3cc36e924ad34000b27": "Ybodychange",
    "e2c9b288b223b9fd82dc12018936e13128413492": "Yfilerename",
    "1861b32eb551a07d748afc6205ea9573f9503eda": "Yintroduced"
  },
  "changeHistoryDetails": {
    "86c95cb31a392d2ee4dcf3cc36e924ad34000b27": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-9414. Refactor reconfiguration of ClientDatanodeProtocol for reusability. (Contributed by Xiaobing Zhou)\n",
      "commitDate": "04/12/15 8:24 PM",
      "commitName": "86c95cb31a392d2ee4dcf3cc36e924ad34000b27",
      "commitAuthor": "Arpit Agarwal",
      "commitDateOld": "03/10/15 11:38 AM",
      "commitNameOld": "7136e8c5582dc4061b566cb9f11a0d6a6d08bb93",
      "commitAuthorOld": "Haohui Mai",
      "daysBetweenCommits": 62.41,
      "commitsBetweenForRepo": 479,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,31 +1,12 @@\n   public ReconfigurationTaskStatus getReconfigurationStatus()\n       throws IOException {\n-    GetReconfigurationStatusResponseProto response;\n-    Map\u003cPropertyChange, Optional\u003cString\u003e\u003e statusMap \u003d null;\n-    long startTime;\n-    long endTime \u003d 0;\n     try {\n-      response \u003d rpcProxy.getReconfigurationStatus(NULL_CONTROLLER,\n-          VOID_GET_RECONFIG_STATUS);\n-      startTime \u003d response.getStartTime();\n-      if (response.hasEndTime()) {\n-        endTime \u003d response.getEndTime();\n-      }\n-      if (response.getChangesCount() \u003e 0) {\n-        statusMap \u003d Maps.newHashMap();\n-        for (GetReconfigurationStatusConfigChangeProto change :\n-            response.getChangesList()) {\n-          PropertyChange pc \u003d new PropertyChange(\n-              change.getName(), change.getNewValue(), change.getOldValue());\n-          String errorMessage \u003d null;\n-          if (change.hasErrorMessage()) {\n-            errorMessage \u003d change.getErrorMessage();\n-          }\n-          statusMap.put(pc, Optional.fromNullable(errorMessage));\n-        }\n-      }\n+      return ReconfigurationProtocolUtils.getReconfigurationStatus(\n+          rpcProxy\n+          .getReconfigurationStatus(\n+              NULL_CONTROLLER,\n+              VOID_GET_RECONFIG_STATUS));\n     } catch (ServiceException e) {\n       throw ProtobufHelper.getRemoteException(e);\n     }\n-    return new ReconfigurationTaskStatus(startTime, endTime, statusMap);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public ReconfigurationTaskStatus getReconfigurationStatus()\n      throws IOException {\n    try {\n      return ReconfigurationProtocolUtils.getReconfigurationStatus(\n          rpcProxy\n          .getReconfigurationStatus(\n              NULL_CONTROLLER,\n              VOID_GET_RECONFIG_STATUS));\n    } catch (ServiceException e) {\n      throw ProtobufHelper.getRemoteException(e);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/protocolPB/ClientDatanodeProtocolTranslatorPB.java",
      "extendedDetails": {}
    },
    "e2c9b288b223b9fd82dc12018936e13128413492": {
      "type": "Yfilerename",
      "commitMessage": "HDFS-8925. Move BlockReaderLocal to hdfs-client. Contributed by Mingliang Liu.\n",
      "commitDate": "28/08/15 2:38 PM",
      "commitName": "e2c9b288b223b9fd82dc12018936e13128413492",
      "commitAuthor": "Haohui Mai",
      "commitDateOld": "28/08/15 2:21 PM",
      "commitNameOld": "b94b56806d3d6e04984e229b479f7ac15b62bbfa",
      "commitAuthorOld": "Colin Patrick Mccabe",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  public ReconfigurationTaskStatus getReconfigurationStatus() throws IOException {\n    GetReconfigurationStatusResponseProto response;\n    Map\u003cPropertyChange, Optional\u003cString\u003e\u003e statusMap \u003d null;\n    long startTime;\n    long endTime \u003d 0;\n    try {\n      response \u003d rpcProxy.getReconfigurationStatus(NULL_CONTROLLER,\n          VOID_GET_RECONFIG_STATUS);\n      startTime \u003d response.getStartTime();\n      if (response.hasEndTime()) {\n        endTime \u003d response.getEndTime();\n      }\n      if (response.getChangesCount() \u003e 0) {\n        statusMap \u003d Maps.newHashMap();\n        for (GetReconfigurationStatusConfigChangeProto change :\n            response.getChangesList()) {\n          PropertyChange pc \u003d new PropertyChange(\n              change.getName(), change.getNewValue(), change.getOldValue());\n          String errorMessage \u003d null;\n          if (change.hasErrorMessage()) {\n            errorMessage \u003d change.getErrorMessage();\n          }\n          statusMap.put(pc, Optional.fromNullable(errorMessage));\n        }\n      }\n    } catch (ServiceException e) {\n      throw ProtobufHelper.getRemoteException(e);\n    }\n    return new ReconfigurationTaskStatus(startTime, endTime, statusMap);\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/protocolPB/ClientDatanodeProtocolTranslatorPB.java",
      "extendedDetails": {
        "oldPath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/protocolPB/ClientDatanodeProtocolTranslatorPB.java",
        "newPath": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/protocolPB/ClientDatanodeProtocolTranslatorPB.java"
      }
    },
    "1861b32eb551a07d748afc6205ea9573f9503eda": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-6808. Add command line option to ask DataNode reload configuration. (Lei Xu via Colin McCabe)\n",
      "commitDate": "25/09/14 1:11 PM",
      "commitName": "1861b32eb551a07d748afc6205ea9573f9503eda",
      "commitAuthor": "Colin Patrick Mccabe",
      "diff": "@@ -0,0 +1,30 @@\n+  public ReconfigurationTaskStatus getReconfigurationStatus() throws IOException {\n+    GetReconfigurationStatusResponseProto response;\n+    Map\u003cPropertyChange, Optional\u003cString\u003e\u003e statusMap \u003d null;\n+    long startTime;\n+    long endTime \u003d 0;\n+    try {\n+      response \u003d rpcProxy.getReconfigurationStatus(NULL_CONTROLLER,\n+          VOID_GET_RECONFIG_STATUS);\n+      startTime \u003d response.getStartTime();\n+      if (response.hasEndTime()) {\n+        endTime \u003d response.getEndTime();\n+      }\n+      if (response.getChangesCount() \u003e 0) {\n+        statusMap \u003d Maps.newHashMap();\n+        for (GetReconfigurationStatusConfigChangeProto change :\n+            response.getChangesList()) {\n+          PropertyChange pc \u003d new PropertyChange(\n+              change.getName(), change.getNewValue(), change.getOldValue());\n+          String errorMessage \u003d null;\n+          if (change.hasErrorMessage()) {\n+            errorMessage \u003d change.getErrorMessage();\n+          }\n+          statusMap.put(pc, Optional.fromNullable(errorMessage));\n+        }\n+      }\n+    } catch (ServiceException e) {\n+      throw ProtobufHelper.getRemoteException(e);\n+    }\n+    return new ReconfigurationTaskStatus(startTime, endTime, statusMap);\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public ReconfigurationTaskStatus getReconfigurationStatus() throws IOException {\n    GetReconfigurationStatusResponseProto response;\n    Map\u003cPropertyChange, Optional\u003cString\u003e\u003e statusMap \u003d null;\n    long startTime;\n    long endTime \u003d 0;\n    try {\n      response \u003d rpcProxy.getReconfigurationStatus(NULL_CONTROLLER,\n          VOID_GET_RECONFIG_STATUS);\n      startTime \u003d response.getStartTime();\n      if (response.hasEndTime()) {\n        endTime \u003d response.getEndTime();\n      }\n      if (response.getChangesCount() \u003e 0) {\n        statusMap \u003d Maps.newHashMap();\n        for (GetReconfigurationStatusConfigChangeProto change :\n            response.getChangesList()) {\n          PropertyChange pc \u003d new PropertyChange(\n              change.getName(), change.getNewValue(), change.getOldValue());\n          String errorMessage \u003d null;\n          if (change.hasErrorMessage()) {\n            errorMessage \u003d change.getErrorMessage();\n          }\n          statusMap.put(pc, Optional.fromNullable(errorMessage));\n        }\n      }\n    } catch (ServiceException e) {\n      throw ProtobufHelper.getRemoteException(e);\n    }\n    return new ReconfigurationTaskStatus(startTime, endTime, statusMap);\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/protocolPB/ClientDatanodeProtocolTranslatorPB.java"
    }
  }
}