{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "AclCommands.java",
  "functionName": "processPath",
  "functionId": "processPath___item-PathData",
  "sourceFilePath": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/AclCommands.java",
  "functionStartLine": 79,
  "functionEndLine": 105,
  "numCommitsSeen": 18,
  "timeTaken": 1024,
  "changeHistory": [
    "327d2ceca22119a73ea05ddf4620e5253a2fded6",
    "cae96dfe6e7c57f927bd825711977ae9199776a9",
    "abe13d6ffb0009df859077032aaa19a6d894ae36"
  ],
  "changeHistoryShort": {
    "327d2ceca22119a73ea05ddf4620e5253a2fded6": "Ybodychange",
    "cae96dfe6e7c57f927bd825711977ae9199776a9": "Ybodychange",
    "abe13d6ffb0009df859077032aaa19a6d894ae36": "Yintroduced"
  },
  "changeHistoryDetails": {
    "327d2ceca22119a73ea05ddf4620e5253a2fded6": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-10352. Recursive setfacl erroneously attempts to apply default ACL to files. Contributed by Chris Nauroth.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1570466 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "20/02/14 10:29 PM",
      "commitName": "327d2ceca22119a73ea05ddf4620e5253a2fded6",
      "commitAuthor": "Chris Nauroth",
      "commitDateOld": "12/02/14 2:54 PM",
      "commitNameOld": "fc14360b0340a33c0e1eb34967d4dcd772533418",
      "commitAuthorOld": "Chris Nauroth",
      "daysBetweenCommits": 8.32,
      "commitsBetweenForRepo": 76,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,13 +1,22 @@\n     protected void processPath(PathData item) throws IOException {\n       if (cf.getOpt(\"b\")) {\n         item.fs.removeAcl(item.path);\n       } else if (cf.getOpt(\"k\")) {\n         item.fs.removeDefaultAcl(item.path);\n       } else if (cf.getOpt(\"m\")) {\n-        item.fs.modifyAclEntries(item.path, aclEntries);\n+        List\u003cAclEntry\u003e entries \u003d getAclEntries(item);\n+        if (!entries.isEmpty()) {\n+          item.fs.modifyAclEntries(item.path, entries);\n+        }\n       } else if (cf.getOpt(\"x\")) {\n-        item.fs.removeAclEntries(item.path, aclEntries);\n+        List\u003cAclEntry\u003e entries \u003d getAclEntries(item);\n+        if (!entries.isEmpty()) {\n+          item.fs.removeAclEntries(item.path, entries);\n+        }\n       } else if (cf.getOpt(\"-set\")) {\n-        item.fs.setAcl(item.path, aclEntries);\n+        List\u003cAclEntry\u003e entries \u003d getAclEntries(item);\n+        if (!entries.isEmpty()) {\n+          item.fs.setAcl(item.path, entries);\n+        }\n       }\n     }\n\\ No newline at end of file\n",
      "actualSource": "    protected void processPath(PathData item) throws IOException {\n      if (cf.getOpt(\"b\")) {\n        item.fs.removeAcl(item.path);\n      } else if (cf.getOpt(\"k\")) {\n        item.fs.removeDefaultAcl(item.path);\n      } else if (cf.getOpt(\"m\")) {\n        List\u003cAclEntry\u003e entries \u003d getAclEntries(item);\n        if (!entries.isEmpty()) {\n          item.fs.modifyAclEntries(item.path, entries);\n        }\n      } else if (cf.getOpt(\"x\")) {\n        List\u003cAclEntry\u003e entries \u003d getAclEntries(item);\n        if (!entries.isEmpty()) {\n          item.fs.removeAclEntries(item.path, entries);\n        }\n      } else if (cf.getOpt(\"-set\")) {\n        List\u003cAclEntry\u003e entries \u003d getAclEntries(item);\n        if (!entries.isEmpty()) {\n          item.fs.setAcl(item.path, entries);\n        }\n      }\n    }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/AclCommands.java",
      "extendedDetails": {}
    },
    "cae96dfe6e7c57f927bd825711977ae9199776a9": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-10213. Fix bugs parsing ACL spec in FsShell setfacl. Contributed by Vinay.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-4685@1559793 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "20/01/14 10:00 AM",
      "commitName": "cae96dfe6e7c57f927bd825711977ae9199776a9",
      "commitAuthor": "Chris Nauroth",
      "commitDateOld": "17/01/14 2:05 PM",
      "commitNameOld": "5300294fbe9e235ce42253d6bcd69d8154d8f198",
      "commitAuthorOld": "Haohui Mai",
      "daysBetweenCommits": 2.83,
      "commitsBetweenForRepo": 4,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,13 +1,13 @@\n     protected void processPath(PathData item) throws IOException {\n       if (cf.getOpt(\"b\")) {\n         item.fs.removeAcl(item.path);\n       } else if (cf.getOpt(\"k\")) {\n         item.fs.removeDefaultAcl(item.path);\n       } else if (cf.getOpt(\"m\")) {\n         item.fs.modifyAclEntries(item.path, aclEntries);\n       } else if (cf.getOpt(\"x\")) {\n         item.fs.removeAclEntries(item.path, aclEntries);\n       } else if (cf.getOpt(\"-set\")) {\n-        item.fs.setAcl(path, aclEntries);\n+        item.fs.setAcl(item.path, aclEntries);\n       }\n     }\n\\ No newline at end of file\n",
      "actualSource": "    protected void processPath(PathData item) throws IOException {\n      if (cf.getOpt(\"b\")) {\n        item.fs.removeAcl(item.path);\n      } else if (cf.getOpt(\"k\")) {\n        item.fs.removeDefaultAcl(item.path);\n      } else if (cf.getOpt(\"m\")) {\n        item.fs.modifyAclEntries(item.path, aclEntries);\n      } else if (cf.getOpt(\"x\")) {\n        item.fs.removeAclEntries(item.path, aclEntries);\n      } else if (cf.getOpt(\"-set\")) {\n        item.fs.setAcl(item.path, aclEntries);\n      }\n    }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/AclCommands.java",
      "extendedDetails": {}
    },
    "abe13d6ffb0009df859077032aaa19a6d894ae36": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-10187. add getfacl and setfacl with minimal support for getting and setting ACLs. Contributed by Vinay.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-4685@1553735 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "27/12/13 12:41 PM",
      "commitName": "abe13d6ffb0009df859077032aaa19a6d894ae36",
      "commitAuthor": "Chris Nauroth",
      "diff": "@@ -0,0 +1,13 @@\n+    protected void processPath(PathData item) throws IOException {\n+      if (cf.getOpt(\"b\")) {\n+        item.fs.removeAcl(item.path);\n+      } else if (cf.getOpt(\"k\")) {\n+        item.fs.removeDefaultAcl(item.path);\n+      } else if (cf.getOpt(\"m\")) {\n+        item.fs.modifyAclEntries(item.path, aclEntries);\n+      } else if (cf.getOpt(\"x\")) {\n+        item.fs.removeAclEntries(item.path, aclEntries);\n+      } else if (cf.getOpt(\"-set\")) {\n+        item.fs.setAcl(path, aclEntries);\n+      }\n+    }\n\\ No newline at end of file\n",
      "actualSource": "    protected void processPath(PathData item) throws IOException {\n      if (cf.getOpt(\"b\")) {\n        item.fs.removeAcl(item.path);\n      } else if (cf.getOpt(\"k\")) {\n        item.fs.removeDefaultAcl(item.path);\n      } else if (cf.getOpt(\"m\")) {\n        item.fs.modifyAclEntries(item.path, aclEntries);\n      } else if (cf.getOpt(\"x\")) {\n        item.fs.removeAclEntries(item.path, aclEntries);\n      } else if (cf.getOpt(\"-set\")) {\n        item.fs.setAcl(path, aclEntries);\n      }\n    }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/shell/AclCommands.java"
    }
  }
}