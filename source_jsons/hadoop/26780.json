{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "JobEndNotifier.java",
  "functionName": "notifyURLOnce",
  "functionId": "notifyURLOnce",
  "sourceFilePath": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/JobEndNotifier.java",
  "functionStartLine": 122,
  "functionEndLine": 146,
  "numCommitsSeen": 11,
  "timeTaken": 1219,
  "changeHistory": [
    "5877f20f9c3f6f0afa505715e9a2ee312475af17",
    "794f9bb3e4f26adaef80e9249d651560930062c3",
    "b2d49acd08aeb158226bc5f99151fc411a450525",
    "a24339e50df4d05928db96498f1bebad93fd6083",
    "44e0bb831b4f137e28fa0d83f1dd2968518420d1",
    "6288dfa873364d1bb735bdb811002f0080e9a1be"
  ],
  "changeHistoryShort": {
    "5877f20f9c3f6f0afa505715e9a2ee312475af17": "Ybodychange",
    "794f9bb3e4f26adaef80e9249d651560930062c3": "Ybodychange",
    "b2d49acd08aeb158226bc5f99151fc411a450525": "Ybodychange",
    "a24339e50df4d05928db96498f1bebad93fd6083": "Ybodychange",
    "44e0bb831b4f137e28fa0d83f1dd2968518420d1": "Ybodychange",
    "6288dfa873364d1bb735bdb811002f0080e9a1be": "Yintroduced"
  },
  "changeHistoryDetails": {
    "5877f20f9c3f6f0afa505715e9a2ee312475af17": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-10075. Update jetty dependency to version 9 (rkanter)\n",
      "commitDate": "27/10/16 4:09 PM",
      "commitName": "5877f20f9c3f6f0afa505715e9a2ee312475af17",
      "commitAuthor": "Robert Kanter",
      "commitDateOld": "03/03/15 1:06 AM",
      "commitNameOld": "9ae7f9eb7baeb244e1b95aabc93ad8124870b9a9",
      "commitAuthorOld": "Tsuyoshi Ozawa",
      "daysBetweenCommits": 604.59,
      "commitsBetweenForRepo": 4588,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,23 +1,25 @@\n   protected boolean notifyURLOnce() {\n     boolean success \u003d false;\n     try {\n-      Log.info(\"Job end notification trying \" + urlToNotify);\n+      Log.getLog().info(\"Job end notification trying \" + urlToNotify);\n       HttpURLConnection conn \u003d\n         (HttpURLConnection) urlToNotify.openConnection(proxyToUse);\n       conn.setConnectTimeout(timeout);\n       conn.setReadTimeout(timeout);\n       conn.setAllowUserInteraction(false);\n       if(conn.getResponseCode() !\u003d HttpURLConnection.HTTP_OK) {\n-        Log.warn(\"Job end notification to \" + urlToNotify +\" failed with code: \"\n-        + conn.getResponseCode() + \" and message \\\"\" + conn.getResponseMessage()\n-        +\"\\\"\");\n+        Log.getLog().warn(\"Job end notification to \" + urlToNotify\n+            + \" failed with code: \" + conn.getResponseCode() + \" and message \\\"\"\n+            + conn.getResponseMessage() + \"\\\"\");\n       }\n       else {\n         success \u003d true;\n-        Log.info(\"Job end notification to \" + urlToNotify + \" succeeded\");\n+        Log.getLog().info(\"Job end notification to \" + urlToNotify\n+            + \" succeeded\");\n       }\n     } catch(IOException ioe) {\n-      Log.warn(\"Job end notification to \" + urlToNotify + \" failed\", ioe);\n+      Log.getLog().warn(\"Job end notification to \" + urlToNotify + \" failed\",\n+          ioe);\n     }\n     return success;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected boolean notifyURLOnce() {\n    boolean success \u003d false;\n    try {\n      Log.getLog().info(\"Job end notification trying \" + urlToNotify);\n      HttpURLConnection conn \u003d\n        (HttpURLConnection) urlToNotify.openConnection(proxyToUse);\n      conn.setConnectTimeout(timeout);\n      conn.setReadTimeout(timeout);\n      conn.setAllowUserInteraction(false);\n      if(conn.getResponseCode() !\u003d HttpURLConnection.HTTP_OK) {\n        Log.getLog().warn(\"Job end notification to \" + urlToNotify\n            + \" failed with code: \" + conn.getResponseCode() + \" and message \\\"\"\n            + conn.getResponseMessage() + \"\\\"\");\n      }\n      else {\n        success \u003d true;\n        Log.getLog().info(\"Job end notification to \" + urlToNotify\n            + \" succeeded\");\n      }\n    } catch(IOException ioe) {\n      Log.getLog().warn(\"Job end notification to \" + urlToNotify + \" failed\",\n          ioe);\n    }\n    return success;\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/JobEndNotifier.java",
      "extendedDetails": {}
    },
    "794f9bb3e4f26adaef80e9249d651560930062c3": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-5066. Added a timeout for the job.end.notification.url. Contributed by Ivan Mitic.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1470216 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "20/04/13 12:18 PM",
      "commitName": "794f9bb3e4f26adaef80e9249d651560930062c3",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "12/11/12 12:32 PM",
      "commitNameOld": "cf6ab9b2e79369bf6224bd68c536f0be5eeb69d6",
      "commitAuthorOld": "Robert Joseph Evans",
      "daysBetweenCommits": 158.95,
      "commitsBetweenForRepo": 756,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,23 +1,23 @@\n   protected boolean notifyURLOnce() {\n     boolean success \u003d false;\n     try {\n       Log.info(\"Job end notification trying \" + urlToNotify);\n       HttpURLConnection conn \u003d\n         (HttpURLConnection) urlToNotify.openConnection(proxyToUse);\n-      conn.setConnectTimeout(5*1000);\n-      conn.setReadTimeout(5*1000);\n+      conn.setConnectTimeout(timeout);\n+      conn.setReadTimeout(timeout);\n       conn.setAllowUserInteraction(false);\n       if(conn.getResponseCode() !\u003d HttpURLConnection.HTTP_OK) {\n         Log.warn(\"Job end notification to \" + urlToNotify +\" failed with code: \"\n         + conn.getResponseCode() + \" and message \\\"\" + conn.getResponseMessage()\n         +\"\\\"\");\n       }\n       else {\n         success \u003d true;\n         Log.info(\"Job end notification to \" + urlToNotify + \" succeeded\");\n       }\n     } catch(IOException ioe) {\n       Log.warn(\"Job end notification to \" + urlToNotify + \" failed\", ioe);\n     }\n     return success;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected boolean notifyURLOnce() {\n    boolean success \u003d false;\n    try {\n      Log.info(\"Job end notification trying \" + urlToNotify);\n      HttpURLConnection conn \u003d\n        (HttpURLConnection) urlToNotify.openConnection(proxyToUse);\n      conn.setConnectTimeout(timeout);\n      conn.setReadTimeout(timeout);\n      conn.setAllowUserInteraction(false);\n      if(conn.getResponseCode() !\u003d HttpURLConnection.HTTP_OK) {\n        Log.warn(\"Job end notification to \" + urlToNotify +\" failed with code: \"\n        + conn.getResponseCode() + \" and message \\\"\" + conn.getResponseMessage()\n        +\"\\\"\");\n      }\n      else {\n        success \u003d true;\n        Log.info(\"Job end notification to \" + urlToNotify + \" succeeded\");\n      }\n    } catch(IOException ioe) {\n      Log.warn(\"Job end notification to \" + urlToNotify + \" failed\", ioe);\n    }\n    return success;\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/JobEndNotifier.java",
      "extendedDetails": {}
    },
    "b2d49acd08aeb158226bc5f99151fc411a450525": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-3840  JobEndNotifier doesn\u0027t use the proxyToUse during connecting (Ravi Prakash via bobby)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1241999 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "08/02/12 9:31 AM",
      "commitName": "b2d49acd08aeb158226bc5f99151fc411a450525",
      "commitAuthor": "Robert Joseph Evans",
      "commitDateOld": "16/01/12 11:35 AM",
      "commitNameOld": "a24339e50df4d05928db96498f1bebad93fd6083",
      "commitAuthorOld": "Mahadev Konar",
      "daysBetweenCommits": 22.91,
      "commitsBetweenForRepo": 171,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,22 +1,23 @@\n   protected boolean notifyURLOnce() {\n     boolean success \u003d false;\n     try {\n       Log.info(\"Job end notification trying \" + urlToNotify);\n-      HttpURLConnection conn \u003d (HttpURLConnection) urlToNotify.openConnection();\n+      HttpURLConnection conn \u003d\n+        (HttpURLConnection) urlToNotify.openConnection(proxyToUse);\n       conn.setConnectTimeout(5*1000);\n       conn.setReadTimeout(5*1000);\n       conn.setAllowUserInteraction(false);\n       if(conn.getResponseCode() !\u003d HttpURLConnection.HTTP_OK) {\n         Log.warn(\"Job end notification to \" + urlToNotify +\" failed with code: \"\n         + conn.getResponseCode() + \" and message \\\"\" + conn.getResponseMessage()\n         +\"\\\"\");\n       }\n       else {\n         success \u003d true;\n         Log.info(\"Job end notification to \" + urlToNotify + \" succeeded\");\n       }\n     } catch(IOException ioe) {\n       Log.warn(\"Job end notification to \" + urlToNotify + \" failed\", ioe);\n     }\n     return success;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected boolean notifyURLOnce() {\n    boolean success \u003d false;\n    try {\n      Log.info(\"Job end notification trying \" + urlToNotify);\n      HttpURLConnection conn \u003d\n        (HttpURLConnection) urlToNotify.openConnection(proxyToUse);\n      conn.setConnectTimeout(5*1000);\n      conn.setReadTimeout(5*1000);\n      conn.setAllowUserInteraction(false);\n      if(conn.getResponseCode() !\u003d HttpURLConnection.HTTP_OK) {\n        Log.warn(\"Job end notification to \" + urlToNotify +\" failed with code: \"\n        + conn.getResponseCode() + \" and message \\\"\" + conn.getResponseMessage()\n        +\"\\\"\");\n      }\n      else {\n        success \u003d true;\n        Log.info(\"Job end notification to \" + urlToNotify + \" succeeded\");\n      }\n    } catch(IOException ioe) {\n      Log.warn(\"Job end notification to \" + urlToNotify + \" failed\", ioe);\n    }\n    return success;\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/JobEndNotifier.java",
      "extendedDetails": {}
    },
    "a24339e50df4d05928db96498f1bebad93fd6083": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-3649. Job End notification gives an error on calling back. (Ravi Prakash via mahadev)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1232126 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "16/01/12 11:35 AM",
      "commitName": "a24339e50df4d05928db96498f1bebad93fd6083",
      "commitAuthor": "Mahadev Konar",
      "commitDateOld": "10/01/12 1:08 PM",
      "commitNameOld": "44e0bb831b4f137e28fa0d83f1dd2968518420d1",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 5.94,
      "commitsBetweenForRepo": 28,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,22 @@\n   protected boolean notifyURLOnce() {\n     boolean success \u003d false;\n     try {\n       Log.info(\"Job end notification trying \" + urlToNotify);\n-      URLConnection conn \u003d urlToNotify.openConnection(proxyToUse);\n+      HttpURLConnection conn \u003d (HttpURLConnection) urlToNotify.openConnection();\n       conn.setConnectTimeout(5*1000);\n       conn.setReadTimeout(5*1000);\n       conn.setAllowUserInteraction(false);\n-      InputStream is \u003d conn.getInputStream();\n-      conn.getContent();\n-      is.close();\n-      success \u003d true;\n-      Log.info(\"Job end notification to \" + urlToNotify + \" succeeded\");\n+      if(conn.getResponseCode() !\u003d HttpURLConnection.HTTP_OK) {\n+        Log.warn(\"Job end notification to \" + urlToNotify +\" failed with code: \"\n+        + conn.getResponseCode() + \" and message \\\"\" + conn.getResponseMessage()\n+        +\"\\\"\");\n+      }\n+      else {\n+        success \u003d true;\n+        Log.info(\"Job end notification to \" + urlToNotify + \" succeeded\");\n+      }\n     } catch(IOException ioe) {\n       Log.warn(\"Job end notification to \" + urlToNotify + \" failed\", ioe);\n     }\n     return success;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected boolean notifyURLOnce() {\n    boolean success \u003d false;\n    try {\n      Log.info(\"Job end notification trying \" + urlToNotify);\n      HttpURLConnection conn \u003d (HttpURLConnection) urlToNotify.openConnection();\n      conn.setConnectTimeout(5*1000);\n      conn.setReadTimeout(5*1000);\n      conn.setAllowUserInteraction(false);\n      if(conn.getResponseCode() !\u003d HttpURLConnection.HTTP_OK) {\n        Log.warn(\"Job end notification to \" + urlToNotify +\" failed with code: \"\n        + conn.getResponseCode() + \" and message \\\"\" + conn.getResponseMessage()\n        +\"\\\"\");\n      }\n      else {\n        success \u003d true;\n        Log.info(\"Job end notification to \" + urlToNotify + \" succeeded\");\n      }\n    } catch(IOException ioe) {\n      Log.warn(\"Job end notification to \" + urlToNotify + \" failed\", ioe);\n    }\n    return success;\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/JobEndNotifier.java",
      "extendedDetails": {}
    },
    "44e0bb831b4f137e28fa0d83f1dd2968518420d1": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-3382. Enhanced MR AM to use a proxy to ping the job-end notification URL. Contributed by Ravi Prakash.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1229736 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "10/01/12 1:08 PM",
      "commitName": "44e0bb831b4f137e28fa0d83f1dd2968518420d1",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "28/10/11 12:44 AM",
      "commitNameOld": "a39992ea6345a9f29814587604ac61b21c99fc3e",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 74.56,
      "commitsBetweenForRepo": 390,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,18 @@\n   protected boolean notifyURLOnce() {\n     boolean success \u003d false;\n     try {\n       Log.info(\"Job end notification trying \" + urlToNotify);\n-      URLConnection conn \u003d urlToNotify.openConnection();\n+      URLConnection conn \u003d urlToNotify.openConnection(proxyToUse);\n       conn.setConnectTimeout(5*1000);\n       conn.setReadTimeout(5*1000);\n       conn.setAllowUserInteraction(false);\n       InputStream is \u003d conn.getInputStream();\n       conn.getContent();\n       is.close();\n       success \u003d true;\n       Log.info(\"Job end notification to \" + urlToNotify + \" succeeded\");\n     } catch(IOException ioe) {\n       Log.warn(\"Job end notification to \" + urlToNotify + \" failed\", ioe);\n     }\n     return success;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected boolean notifyURLOnce() {\n    boolean success \u003d false;\n    try {\n      Log.info(\"Job end notification trying \" + urlToNotify);\n      URLConnection conn \u003d urlToNotify.openConnection(proxyToUse);\n      conn.setConnectTimeout(5*1000);\n      conn.setReadTimeout(5*1000);\n      conn.setAllowUserInteraction(false);\n      InputStream is \u003d conn.getInputStream();\n      conn.getContent();\n      is.close();\n      success \u003d true;\n      Log.info(\"Job end notification to \" + urlToNotify + \" succeeded\");\n    } catch(IOException ioe) {\n      Log.warn(\"Job end notification to \" + urlToNotify + \" failed\", ioe);\n    }\n    return success;\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/JobEndNotifier.java",
      "extendedDetails": {}
    },
    "6288dfa873364d1bb735bdb811002f0080e9a1be": {
      "type": "Yintroduced",
      "commitMessage": "MAPREDUCE-3028. Added job-end notification support. Contributed by Ravi Prakash.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1188377 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/10/11 2:02 PM",
      "commitName": "6288dfa873364d1bb735bdb811002f0080e9a1be",
      "commitAuthor": "Arun Murthy",
      "diff": "@@ -0,0 +1,18 @@\n+  protected boolean notifyURLOnce() {\n+    boolean success \u003d false;\n+    try {\n+      Log.info(\"Job end notification trying \" + urlToNotify);\n+      URLConnection conn \u003d urlToNotify.openConnection();\n+      conn.setConnectTimeout(5*1000);\n+      conn.setReadTimeout(5*1000);\n+      conn.setAllowUserInteraction(false);\n+      InputStream is \u003d conn.getInputStream();\n+      conn.getContent();\n+      is.close();\n+      success \u003d true;\n+      Log.info(\"Job end notification to \" + urlToNotify + \" succeeded\");\n+    } catch(IOException ioe) {\n+      Log.warn(\"Job end notification to \" + urlToNotify + \" failed\", ioe);\n+    }\n+    return success;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  protected boolean notifyURLOnce() {\n    boolean success \u003d false;\n    try {\n      Log.info(\"Job end notification trying \" + urlToNotify);\n      URLConnection conn \u003d urlToNotify.openConnection();\n      conn.setConnectTimeout(5*1000);\n      conn.setReadTimeout(5*1000);\n      conn.setAllowUserInteraction(false);\n      InputStream is \u003d conn.getInputStream();\n      conn.getContent();\n      is.close();\n      success \u003d true;\n      Log.info(\"Job end notification to \" + urlToNotify + \" succeeded\");\n    } catch(IOException ioe) {\n      Log.warn(\"Job end notification to \" + urlToNotify + \" failed\", ioe);\n    }\n    return success;\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/JobEndNotifier.java"
    }
  }
}