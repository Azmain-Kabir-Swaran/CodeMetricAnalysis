{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "NamenodeWebHdfsMethods.java",
  "functionName": "bestNode",
  "functionId": "bestNode___nodes-DatanodeInfo[]__excludes-HashSet__Node__",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
  "functionStartLine": 341,
  "functionEndLine": 349,
  "numCommitsSeen": 155,
  "timeTaken": 3599,
  "changeHistory": [
    "6e31a090842f8aeedb331b653b075499f8df6c60",
    "7c18f8d55b899dc4a6e118d3b54447a9b36b960a",
    "256adb2106cb838f3aff21f5a77f2973807d0df3"
  ],
  "changeHistoryShort": {
    "6e31a090842f8aeedb331b653b075499f8df6c60": "Ymodifierchange",
    "7c18f8d55b899dc4a6e118d3b54447a9b36b960a": "Ymultichange(Yparameterchange,Ybodychange)",
    "256adb2106cb838f3aff21f5a77f2973807d0df3": "Yintroduced"
  },
  "changeHistoryDetails": {
    "6e31a090842f8aeedb331b653b075499f8df6c60": {
      "type": "Ymodifierchange",
      "commitMessage": "HDFS-12512. RBF: Add WebHDFS.\n",
      "commitDate": "23/03/18 8:32 AM",
      "commitName": "6e31a090842f8aeedb331b653b075499f8df6c60",
      "commitAuthor": "weiy",
      "commitDateOld": "12/03/18 8:41 PM",
      "commitNameOld": "0355ec20ebeb988679c7192c7024bef7a2a3bced",
      "commitAuthorOld": "Xiaoyu Yao",
      "daysBetweenCommits": 10.49,
      "commitsBetweenForRepo": 212,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,9 +1,9 @@\n-  private static DatanodeInfo bestNode(DatanodeInfo[] nodes,\n+  protected static DatanodeInfo bestNode(DatanodeInfo[] nodes,\n       HashSet\u003cNode\u003e excludes) throws IOException {\n     for (DatanodeInfo dn: nodes) {\n       if (false \u003d\u003d dn.isDecommissioned() \u0026\u0026 false \u003d\u003d excludes.contains(dn)) {\n         return dn;\n       }\n     }\n     throw new IOException(\"No active nodes contain this block\");\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected static DatanodeInfo bestNode(DatanodeInfo[] nodes,\n      HashSet\u003cNode\u003e excludes) throws IOException {\n    for (DatanodeInfo dn: nodes) {\n      if (false \u003d\u003d dn.isDecommissioned() \u0026\u0026 false \u003d\u003d excludes.contains(dn)) {\n        return dn;\n      }\n    }\n    throw new IOException(\"No active nodes contain this block\");\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
      "extendedDetails": {
        "oldValue": "[private, static]",
        "newValue": "[protected, static]"
      }
    },
    "7c18f8d55b899dc4a6e118d3b54447a9b36b960a": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "HDFS-6616. Add exclude-datanodes feature to WebHDFS redirection so that it will not redirect retries to the same datanode. Contributed by zhaoyunjiong\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1611750 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "18/07/14 11:20 AM",
      "commitName": "7c18f8d55b899dc4a6e118d3b54447a9b36b960a",
      "commitAuthor": "Tsz-wo Sze",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-6616. Add exclude-datanodes feature to WebHDFS redirection so that it will not redirect retries to the same datanode. Contributed by zhaoyunjiong\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1611750 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "18/07/14 11:20 AM",
          "commitName": "7c18f8d55b899dc4a6e118d3b54447a9b36b960a",
          "commitAuthor": "Tsz-wo Sze",
          "commitDateOld": "05/06/14 8:48 PM",
          "commitNameOld": "6a4f6d6b3e41e660c214b77c9ed43d4c65200b6a",
          "commitAuthorOld": "Uma Maheswara Rao G",
          "daysBetweenCommits": 42.61,
          "commitsBetweenForRepo": 298,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,6 +1,9 @@\n-  private static DatanodeInfo bestNode(DatanodeInfo[] nodes) throws IOException {\n-    if (nodes.length \u003d\u003d 0 || nodes[0].isDecommissioned()) {\n-      throw new IOException(\"No active nodes contain this block\");\n+  private static DatanodeInfo bestNode(DatanodeInfo[] nodes,\n+      HashSet\u003cNode\u003e excludes) throws IOException {\n+    for (DatanodeInfo dn: nodes) {\n+      if (false \u003d\u003d dn.isDecommissioned() \u0026\u0026 false \u003d\u003d excludes.contains(dn)) {\n+        return dn;\n+      }\n     }\n-    return nodes[0];\n+    throw new IOException(\"No active nodes contain this block\");\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private static DatanodeInfo bestNode(DatanodeInfo[] nodes,\n      HashSet\u003cNode\u003e excludes) throws IOException {\n    for (DatanodeInfo dn: nodes) {\n      if (false \u003d\u003d dn.isDecommissioned() \u0026\u0026 false \u003d\u003d excludes.contains(dn)) {\n        return dn;\n      }\n    }\n    throw new IOException(\"No active nodes contain this block\");\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {
            "oldValue": "[nodes-DatanodeInfo[]]",
            "newValue": "[nodes-DatanodeInfo[], excludes-HashSet\u003cNode\u003e]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-6616. Add exclude-datanodes feature to WebHDFS redirection so that it will not redirect retries to the same datanode. Contributed by zhaoyunjiong\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1611750 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "18/07/14 11:20 AM",
          "commitName": "7c18f8d55b899dc4a6e118d3b54447a9b36b960a",
          "commitAuthor": "Tsz-wo Sze",
          "commitDateOld": "05/06/14 8:48 PM",
          "commitNameOld": "6a4f6d6b3e41e660c214b77c9ed43d4c65200b6a",
          "commitAuthorOld": "Uma Maheswara Rao G",
          "daysBetweenCommits": 42.61,
          "commitsBetweenForRepo": 298,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,6 +1,9 @@\n-  private static DatanodeInfo bestNode(DatanodeInfo[] nodes) throws IOException {\n-    if (nodes.length \u003d\u003d 0 || nodes[0].isDecommissioned()) {\n-      throw new IOException(\"No active nodes contain this block\");\n+  private static DatanodeInfo bestNode(DatanodeInfo[] nodes,\n+      HashSet\u003cNode\u003e excludes) throws IOException {\n+    for (DatanodeInfo dn: nodes) {\n+      if (false \u003d\u003d dn.isDecommissioned() \u0026\u0026 false \u003d\u003d excludes.contains(dn)) {\n+        return dn;\n+      }\n     }\n-    return nodes[0];\n+    throw new IOException(\"No active nodes contain this block\");\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private static DatanodeInfo bestNode(DatanodeInfo[] nodes,\n      HashSet\u003cNode\u003e excludes) throws IOException {\n    for (DatanodeInfo dn: nodes) {\n      if (false \u003d\u003d dn.isDecommissioned() \u0026\u0026 false \u003d\u003d excludes.contains(dn)) {\n        return dn;\n      }\n    }\n    throw new IOException(\"No active nodes contain this block\");\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {}
        }
      ]
    },
    "256adb2106cb838f3aff21f5a77f2973807d0df3": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-5891. webhdfs should not try connecting the DN during redirection. Contributed by Haohui Mai\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1567810 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "12/02/14 3:57 PM",
      "commitName": "256adb2106cb838f3aff21f5a77f2973807d0df3",
      "commitAuthor": "Brandon Li",
      "diff": "@@ -0,0 +1,6 @@\n+  private static DatanodeInfo bestNode(DatanodeInfo[] nodes) throws IOException {\n+    if (nodes.length \u003d\u003d 0 || nodes[0].isDecommissioned()) {\n+      throw new IOException(\"No active nodes contain this block\");\n+    }\n+    return nodes[0];\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private static DatanodeInfo bestNode(DatanodeInfo[] nodes) throws IOException {\n    if (nodes.length \u003d\u003d 0 || nodes[0].isDecommissioned()) {\n      throw new IOException(\"No active nodes contain this block\");\n    }\n    return nodes[0];\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java"
    }
  }
}