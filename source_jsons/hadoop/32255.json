{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "NodeManager.java",
  "functionName": "run",
  "functionId": "run",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeManager.java",
  "functionStartLine": 530,
  "functionEndLine": 541,
  "numCommitsSeen": 111,
  "timeTaken": 4242,
  "changeHistory": [
    "100470140d86eede0fa240a9aa93226f274ee4f5",
    "91d3443806555d336d27cf8cc9250a0fb85b03a9",
    "d5ff57a08fac983f8b5d201064ce07945f0f216e",
    "424887ecb7d11a72837f2757ed3ff9e0fe8c5b5d",
    "63f7322522e0ab223ceb91440636eb62ca0a3e41",
    "6d7dbd4fedd91a5177a2f0d90c5822394ab18529",
    "1c4047b0e46e95a92509de2e59a93433f5968538",
    "d07f855892e481ef67d00b9527640ba871832e21",
    "44f7ee7192d150b43a3012f06cec67be5b64edd0",
    "d3841bd4997a77855ab2abd9cc294eae7d795a5b",
    "fbb55784d93e1a819daf55d936e864d344579cbf",
    "2e3b56f6e907f15f7c6caaad37d37b9e0ee89963"
  ],
  "changeHistoryShort": {
    "100470140d86eede0fa240a9aa93226f274ee4f5": "Ybodychange",
    "91d3443806555d336d27cf8cc9250a0fb85b03a9": "Ybodychange",
    "d5ff57a08fac983f8b5d201064ce07945f0f216e": "Ybodychange",
    "424887ecb7d11a72837f2757ed3ff9e0fe8c5b5d": "Ybodychange",
    "63f7322522e0ab223ceb91440636eb62ca0a3e41": "Ybodychange",
    "6d7dbd4fedd91a5177a2f0d90c5822394ab18529": "Ybodychange",
    "1c4047b0e46e95a92509de2e59a93433f5968538": "Ybodychange",
    "d07f855892e481ef67d00b9527640ba871832e21": "Ybodychange",
    "44f7ee7192d150b43a3012f06cec67be5b64edd0": "Ybodychange",
    "d3841bd4997a77855ab2abd9cc294eae7d795a5b": "Ybodychange",
    "fbb55784d93e1a819daf55d936e864d344579cbf": "Ybodychange",
    "2e3b56f6e907f15f7c6caaad37d37b9e0ee89963": "Yintroduced"
  },
  "changeHistoryDetails": {
    "100470140d86eede0fa240a9aa93226f274ee4f5": {
      "type": "Ybodychange",
      "commitMessage": "YARN-8451. Multiple NM heartbeat thread created when a slow NM resync with RM. Contributed by Botong Huang\n",
      "commitDate": "29/06/18 11:06 AM",
      "commitName": "100470140d86eede0fa240a9aa93226f274ee4f5",
      "commitAuthor": "Jason Lowe",
      "commitDateOld": "15/03/18 1:26 PM",
      "commitNameOld": "4bf622043f034835d65ff2a4785b9b06d0ef1fd2",
      "commitAuthorOld": "Wangda Tan",
      "daysBetweenCommits": 105.9,
      "commitsBetweenForRepo": 1360,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,21 +1,24 @@\n-      public void run() {\n-        try {\n-          if (!rmWorkPreservingRestartEnabled) {\n-            LOG.info(\"Cleaning up running containers on resync\");\n-            containerManager.cleanupContainersOnNMResync();\n-            // Clear all known collectors for resync.\n-            if (context.getKnownCollectors() !\u003d null) {\n-              context.getKnownCollectors().clear();\n+        public void run() {\n+          try {\n+            if (!rmWorkPreservingRestartEnabled) {\n+              LOG.info(\"Cleaning up running containers on resync\");\n+              containerManager.cleanupContainersOnNMResync();\n+              // Clear all known collectors for resync.\n+              if (context.getKnownCollectors() !\u003d null) {\n+                context.getKnownCollectors().clear();\n+              }\n+            } else {\n+              LOG.info(\"Preserving containers on resync\");\n+              // Re-register known timeline collectors.\n+              reregisterCollectors();\n             }\n-          } else {\n-            LOG.info(\"Preserving containers on resync\");\n-            // Re-register known timeline collectors.\n-            reregisterCollectors();\n+            ((NodeStatusUpdaterImpl) nodeStatusUpdater)\n+                .rebootNodeStatusUpdaterAndRegisterWithRM();\n+          } catch (YarnRuntimeException e) {\n+            LOG.error(\"Error while rebooting NodeStatusUpdater.\", e);\n+            shutDown(NodeManagerStatus.EXCEPTION.getExitCode());\n+          } finally {\n+            // Release lock\n+            resyncingWithRM.set(false);\n           }\n-          ((NodeStatusUpdaterImpl) nodeStatusUpdater)\n-            .rebootNodeStatusUpdaterAndRegisterWithRM();\n-        } catch (YarnRuntimeException e) {\n-          LOG.error(\"Error while rebooting NodeStatusUpdater.\", e);\n-          shutDown(NodeManagerStatus.EXCEPTION.getExitCode());\n-        }\n-      }\n\\ No newline at end of file\n+        }\n\\ No newline at end of file\n",
      "actualSource": "        public void run() {\n          try {\n            if (!rmWorkPreservingRestartEnabled) {\n              LOG.info(\"Cleaning up running containers on resync\");\n              containerManager.cleanupContainersOnNMResync();\n              // Clear all known collectors for resync.\n              if (context.getKnownCollectors() !\u003d null) {\n                context.getKnownCollectors().clear();\n              }\n            } else {\n              LOG.info(\"Preserving containers on resync\");\n              // Re-register known timeline collectors.\n              reregisterCollectors();\n            }\n            ((NodeStatusUpdaterImpl) nodeStatusUpdater)\n                .rebootNodeStatusUpdaterAndRegisterWithRM();\n          } catch (YarnRuntimeException e) {\n            LOG.error(\"Error while rebooting NodeStatusUpdater.\", e);\n            shutDown(NodeManagerStatus.EXCEPTION.getExitCode());\n          } finally {\n            // Release lock\n            resyncingWithRM.set(false);\n          }\n        }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeManager.java",
      "extendedDetails": {}
    },
    "91d3443806555d336d27cf8cc9250a0fb85b03a9": {
      "type": "Ybodychange",
      "commitMessage": "YARN-3359. Recover collector list when RM fails over (Li Lu via Varun Saxena)\n",
      "commitDate": "29/08/17 10:59 PM",
      "commitName": "91d3443806555d336d27cf8cc9250a0fb85b03a9",
      "commitAuthor": "Varun Saxena",
      "commitDateOld": "29/08/17 10:59 PM",
      "commitNameOld": "78b7e070d8009c78665a2baa64fe888788f53e69",
      "commitAuthorOld": "Sangjin Lee",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 4,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,21 @@\n       public void run() {\n         try {\n           if (!rmWorkPreservingRestartEnabled) {\n             LOG.info(\"Cleaning up running containers on resync\");\n             containerManager.cleanupContainersOnNMResync();\n+            // Clear all known collectors for resync.\n+            if (context.getKnownCollectors() !\u003d null) {\n+              context.getKnownCollectors().clear();\n+            }\n           } else {\n             LOG.info(\"Preserving containers on resync\");\n+            // Re-register known timeline collectors.\n+            reregisterCollectors();\n           }\n           ((NodeStatusUpdaterImpl) nodeStatusUpdater)\n             .rebootNodeStatusUpdaterAndRegisterWithRM();\n         } catch (YarnRuntimeException e) {\n           LOG.error(\"Error while rebooting NodeStatusUpdater.\", e);\n           shutDown(NodeManagerStatus.EXCEPTION.getExitCode());\n         }\n       }\n\\ No newline at end of file\n",
      "actualSource": "      public void run() {\n        try {\n          if (!rmWorkPreservingRestartEnabled) {\n            LOG.info(\"Cleaning up running containers on resync\");\n            containerManager.cleanupContainersOnNMResync();\n            // Clear all known collectors for resync.\n            if (context.getKnownCollectors() !\u003d null) {\n              context.getKnownCollectors().clear();\n            }\n          } else {\n            LOG.info(\"Preserving containers on resync\");\n            // Re-register known timeline collectors.\n            reregisterCollectors();\n          }\n          ((NodeStatusUpdaterImpl) nodeStatusUpdater)\n            .rebootNodeStatusUpdaterAndRegisterWithRM();\n        } catch (YarnRuntimeException e) {\n          LOG.error(\"Error while rebooting NodeStatusUpdater.\", e);\n          shutDown(NodeManagerStatus.EXCEPTION.getExitCode());\n        }\n      }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeManager.java",
      "extendedDetails": {}
    },
    "d5ff57a08fac983f8b5d201064ce07945f0f216e": {
      "type": "Ybodychange",
      "commitMessage": "YARN-7047. Moving logging APIs over to slf4j in hadoop-yarn-server-nodemanager. Contributed by Yeliang Cang.\n",
      "commitDate": "22/08/17 1:14 AM",
      "commitName": "d5ff57a08fac983f8b5d201064ce07945f0f216e",
      "commitAuthor": "Akira Ajisaka",
      "commitDateOld": "08/05/17 3:14 PM",
      "commitNameOld": "424887ecb7d11a72837f2757ed3ff9e0fe8c5b5d",
      "commitAuthorOld": "Jason Lowe",
      "daysBetweenCommits": 105.42,
      "commitsBetweenForRepo": 607,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,15 @@\n       public void run() {\n         try {\n           if (!rmWorkPreservingRestartEnabled) {\n             LOG.info(\"Cleaning up running containers on resync\");\n             containerManager.cleanupContainersOnNMResync();\n           } else {\n             LOG.info(\"Preserving containers on resync\");\n           }\n           ((NodeStatusUpdaterImpl) nodeStatusUpdater)\n             .rebootNodeStatusUpdaterAndRegisterWithRM();\n         } catch (YarnRuntimeException e) {\n-          LOG.fatal(\"Error while rebooting NodeStatusUpdater.\", e);\n+          LOG.error(\"Error while rebooting NodeStatusUpdater.\", e);\n           shutDown(NodeManagerStatus.EXCEPTION.getExitCode());\n         }\n       }\n\\ No newline at end of file\n",
      "actualSource": "      public void run() {\n        try {\n          if (!rmWorkPreservingRestartEnabled) {\n            LOG.info(\"Cleaning up running containers on resync\");\n            containerManager.cleanupContainersOnNMResync();\n          } else {\n            LOG.info(\"Preserving containers on resync\");\n          }\n          ((NodeStatusUpdaterImpl) nodeStatusUpdater)\n            .rebootNodeStatusUpdaterAndRegisterWithRM();\n        } catch (YarnRuntimeException e) {\n          LOG.error(\"Error while rebooting NodeStatusUpdater.\", e);\n          shutDown(NodeManagerStatus.EXCEPTION.getExitCode());\n        }\n      }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeManager.java",
      "extendedDetails": {}
    },
    "424887ecb7d11a72837f2757ed3ff9e0fe8c5b5d": {
      "type": "Ybodychange",
      "commitMessage": "YARN-3839. Quit throwing NMNotYetReadyException. Contributed by Manikandan R\n",
      "commitDate": "08/05/17 3:14 PM",
      "commitName": "424887ecb7d11a72837f2757ed3ff9e0fe8c5b5d",
      "commitAuthor": "Jason Lowe",
      "commitDateOld": "19/04/17 11:44 AM",
      "commitNameOld": "dd43b895c2e50fa97cb7327be77509b87dad1823",
      "commitAuthorOld": "Daniel Templeton",
      "daysBetweenCommits": 19.15,
      "commitsBetweenForRepo": 98,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,15 @@\n       public void run() {\n         try {\n-          LOG.info(\"Notifying ContainerManager to block new container-requests\");\n-          containerManager.setBlockNewContainerRequests(true);\n           if (!rmWorkPreservingRestartEnabled) {\n             LOG.info(\"Cleaning up running containers on resync\");\n             containerManager.cleanupContainersOnNMResync();\n           } else {\n             LOG.info(\"Preserving containers on resync\");\n           }\n           ((NodeStatusUpdaterImpl) nodeStatusUpdater)\n             .rebootNodeStatusUpdaterAndRegisterWithRM();\n         } catch (YarnRuntimeException e) {\n           LOG.fatal(\"Error while rebooting NodeStatusUpdater.\", e);\n           shutDown(NodeManagerStatus.EXCEPTION.getExitCode());\n         }\n       }\n\\ No newline at end of file\n",
      "actualSource": "      public void run() {\n        try {\n          if (!rmWorkPreservingRestartEnabled) {\n            LOG.info(\"Cleaning up running containers on resync\");\n            containerManager.cleanupContainersOnNMResync();\n          } else {\n            LOG.info(\"Preserving containers on resync\");\n          }\n          ((NodeStatusUpdaterImpl) nodeStatusUpdater)\n            .rebootNodeStatusUpdaterAndRegisterWithRM();\n        } catch (YarnRuntimeException e) {\n          LOG.fatal(\"Error while rebooting NodeStatusUpdater.\", e);\n          shutDown(NodeManagerStatus.EXCEPTION.getExitCode());\n        }\n      }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeManager.java",
      "extendedDetails": {}
    },
    "63f7322522e0ab223ceb91440636eb62ca0a3e41": {
      "type": "Ybodychange",
      "commitMessage": "YARN-6368. Decommissioning an NM results in a -1 exit code (miklos.szegedi@cloudera.com via rkanter)\n",
      "commitDate": "07/04/17 2:28 PM",
      "commitName": "63f7322522e0ab223ceb91440636eb62ca0a3e41",
      "commitAuthor": "Robert Kanter",
      "commitDateOld": "06/01/17 6:41 PM",
      "commitNameOld": "a59df15757fac7f917cb96fc8fcfeb7017475e4f",
      "commitAuthorOld": "Naganarasimha",
      "daysBetweenCommits": 90.78,
      "commitsBetweenForRepo": 508,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,17 @@\n       public void run() {\n         try {\n           LOG.info(\"Notifying ContainerManager to block new container-requests\");\n           containerManager.setBlockNewContainerRequests(true);\n           if (!rmWorkPreservingRestartEnabled) {\n             LOG.info(\"Cleaning up running containers on resync\");\n             containerManager.cleanupContainersOnNMResync();\n           } else {\n             LOG.info(\"Preserving containers on resync\");\n           }\n           ((NodeStatusUpdaterImpl) nodeStatusUpdater)\n             .rebootNodeStatusUpdaterAndRegisterWithRM();\n         } catch (YarnRuntimeException e) {\n           LOG.fatal(\"Error while rebooting NodeStatusUpdater.\", e);\n-          shutDown();\n+          shutDown(NodeManagerStatus.EXCEPTION.getExitCode());\n         }\n       }\n\\ No newline at end of file\n",
      "actualSource": "      public void run() {\n        try {\n          LOG.info(\"Notifying ContainerManager to block new container-requests\");\n          containerManager.setBlockNewContainerRequests(true);\n          if (!rmWorkPreservingRestartEnabled) {\n            LOG.info(\"Cleaning up running containers on resync\");\n            containerManager.cleanupContainersOnNMResync();\n          } else {\n            LOG.info(\"Preserving containers on resync\");\n          }\n          ((NodeStatusUpdaterImpl) nodeStatusUpdater)\n            .rebootNodeStatusUpdaterAndRegisterWithRM();\n        } catch (YarnRuntimeException e) {\n          LOG.fatal(\"Error while rebooting NodeStatusUpdater.\", e);\n          shutDown(NodeManagerStatus.EXCEPTION.getExitCode());\n        }\n      }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeManager.java",
      "extendedDetails": {}
    },
    "6d7dbd4fedd91a5177a2f0d90c5822394ab18529": {
      "type": "Ybodychange",
      "commitMessage": "YARN-1367. Changed NM to not kill containers on NM resync if RM work-preserving restart is enabled. Contributed by Anubhav Dhoot\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1608334 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "06/07/14 9:37 PM",
      "commitName": "6d7dbd4fedd91a5177a2f0d90c5822394ab18529",
      "commitAuthor": "Jian He",
      "commitDateOld": "16/06/14 6:02 PM",
      "commitNameOld": "072360d1286cf1de3f83664755144b4d468dae6e",
      "commitAuthorOld": "Junping Du",
      "daysBetweenCommits": 20.15,
      "commitsBetweenForRepo": 132,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,13 +1,17 @@\n       public void run() {\n         try {\n           LOG.info(\"Notifying ContainerManager to block new container-requests\");\n           containerManager.setBlockNewContainerRequests(true);\n-          LOG.info(\"Cleaning up running containers on resync\");\n-          containerManager.cleanupContainersOnNMResync();\n+          if (!rmWorkPreservingRestartEnabled) {\n+            LOG.info(\"Cleaning up running containers on resync\");\n+            containerManager.cleanupContainersOnNMResync();\n+          } else {\n+            LOG.info(\"Preserving containers on resync\");\n+          }\n           ((NodeStatusUpdaterImpl) nodeStatusUpdater)\n             .rebootNodeStatusUpdaterAndRegisterWithRM();\n         } catch (YarnRuntimeException e) {\n           LOG.fatal(\"Error while rebooting NodeStatusUpdater.\", e);\n           shutDown();\n         }\n       }\n\\ No newline at end of file\n",
      "actualSource": "      public void run() {\n        try {\n          LOG.info(\"Notifying ContainerManager to block new container-requests\");\n          containerManager.setBlockNewContainerRequests(true);\n          if (!rmWorkPreservingRestartEnabled) {\n            LOG.info(\"Cleaning up running containers on resync\");\n            containerManager.cleanupContainersOnNMResync();\n          } else {\n            LOG.info(\"Preserving containers on resync\");\n          }\n          ((NodeStatusUpdaterImpl) nodeStatusUpdater)\n            .rebootNodeStatusUpdaterAndRegisterWithRM();\n        } catch (YarnRuntimeException e) {\n          LOG.fatal(\"Error while rebooting NodeStatusUpdater.\", e);\n          shutDown();\n        }\n      }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeManager.java",
      "extendedDetails": {}
    },
    "1c4047b0e46e95a92509de2e59a93433f5968538": {
      "type": "Ybodychange",
      "commitMessage": "YARN-1783. Fixed a bug in NodeManager\u0027s status-updater that was losing completed container statuses when NodeManager is forced to resync by the ResourceManager. Contributed by Jian He.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1575437 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "07/03/14 2:36 PM",
      "commitName": "1c4047b0e46e95a92509de2e59a93433f5968538",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "24/02/14 2:41 PM",
      "commitNameOld": "d07f855892e481ef67d00b9527640ba871832e21",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 11.0,
      "commitsBetweenForRepo": 116,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,12 +1,13 @@\n       public void run() {\n         try {\n           LOG.info(\"Notifying ContainerManager to block new container-requests\");\n           containerManager.setBlockNewContainerRequests(true);\n           LOG.info(\"Cleaning up running containers on resync\");\n           containerManager.cleanupContainersOnNMResync();\n-          ((NodeStatusUpdaterImpl) nodeStatusUpdater).rebootNodeStatusUpdater();\n+          ((NodeStatusUpdaterImpl) nodeStatusUpdater)\n+            .rebootNodeStatusUpdaterAndRegisterWithRM();\n         } catch (YarnRuntimeException e) {\n           LOG.fatal(\"Error while rebooting NodeStatusUpdater.\", e);\n           shutDown();\n         }\n       }\n\\ No newline at end of file\n",
      "actualSource": "      public void run() {\n        try {\n          LOG.info(\"Notifying ContainerManager to block new container-requests\");\n          containerManager.setBlockNewContainerRequests(true);\n          LOG.info(\"Cleaning up running containers on resync\");\n          containerManager.cleanupContainersOnNMResync();\n          ((NodeStatusUpdaterImpl) nodeStatusUpdater)\n            .rebootNodeStatusUpdaterAndRegisterWithRM();\n        } catch (YarnRuntimeException e) {\n          LOG.fatal(\"Error while rebooting NodeStatusUpdater.\", e);\n          shutDown();\n        }\n      }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeManager.java",
      "extendedDetails": {}
    },
    "d07f855892e481ef67d00b9527640ba871832e21": {
      "type": "Ybodychange",
      "commitMessage": "YARN-1686. Fixed NodeManager to properly handle any errors during re-registration after a RESYNC and thus avoid hanging. Contributed by Rohith Sharma.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1571474 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/02/14 2:41 PM",
      "commitName": "d07f855892e481ef67d00b9527640ba871832e21",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "14/02/14 12:01 PM",
      "commitNameOld": "990cffdcfa9349fff0cee144b1d0e5267c40f63d",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 10.11,
      "commitsBetweenForRepo": 70,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,7 +1,12 @@\n       public void run() {\n-        LOG.info(\"Notifying ContainerManager to block new container-requests\");\n-        containerManager.setBlockNewContainerRequests(true);\n-        LOG.info(\"Cleaning up running containers on resync\");\n-        containerManager.cleanupContainersOnNMResync();\n-        ((NodeStatusUpdaterImpl) nodeStatusUpdater ).rebootNodeStatusUpdater();\n+        try {\n+          LOG.info(\"Notifying ContainerManager to block new container-requests\");\n+          containerManager.setBlockNewContainerRequests(true);\n+          LOG.info(\"Cleaning up running containers on resync\");\n+          containerManager.cleanupContainersOnNMResync();\n+          ((NodeStatusUpdaterImpl) nodeStatusUpdater).rebootNodeStatusUpdater();\n+        } catch (YarnRuntimeException e) {\n+          LOG.fatal(\"Error while rebooting NodeStatusUpdater.\", e);\n+          shutDown();\n+        }\n       }\n\\ No newline at end of file\n",
      "actualSource": "      public void run() {\n        try {\n          LOG.info(\"Notifying ContainerManager to block new container-requests\");\n          containerManager.setBlockNewContainerRequests(true);\n          LOG.info(\"Cleaning up running containers on resync\");\n          containerManager.cleanupContainersOnNMResync();\n          ((NodeStatusUpdaterImpl) nodeStatusUpdater).rebootNodeStatusUpdater();\n        } catch (YarnRuntimeException e) {\n          LOG.fatal(\"Error while rebooting NodeStatusUpdater.\", e);\n          shutDown();\n        }\n      }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeManager.java",
      "extendedDetails": {}
    },
    "44f7ee7192d150b43a3012f06cec67be5b64edd0": {
      "type": "Ybodychange",
      "commitMessage": "YARN-1278. Fixed NodeManager to not delete local resources for apps on resync command from RM - a bug caused by YARN-1149. Contributed by Hitesh Shah.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1529657 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "06/10/13 11:32 AM",
      "commitName": "44f7ee7192d150b43a3012f06cec67be5b64edd0",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "03/10/13 5:43 PM",
      "commitNameOld": "d3841bd4997a77855ab2abd9cc294eae7d795a5b",
      "commitAuthorOld": "Hitesh Shah",
      "daysBetweenCommits": 2.74,
      "commitsBetweenForRepo": 23,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,6 +1,7 @@\n       public void run() {\n         LOG.info(\"Notifying ContainerManager to block new container-requests\");\n         containerManager.setBlockNewContainerRequests(true);\n-        containerManager.cleanUpApplications(NodeManagerEventType.RESYNC);\n+        LOG.info(\"Cleaning up running containers on resync\");\n+        containerManager.cleanupContainersOnNMResync();\n         ((NodeStatusUpdaterImpl) nodeStatusUpdater ).rebootNodeStatusUpdater();\n       }\n\\ No newline at end of file\n",
      "actualSource": "      public void run() {\n        LOG.info(\"Notifying ContainerManager to block new container-requests\");\n        containerManager.setBlockNewContainerRequests(true);\n        LOG.info(\"Cleaning up running containers on resync\");\n        containerManager.cleanupContainersOnNMResync();\n        ((NodeStatusUpdaterImpl) nodeStatusUpdater ).rebootNodeStatusUpdater();\n      }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeManager.java",
      "extendedDetails": {}
    },
    "d3841bd4997a77855ab2abd9cc294eae7d795a5b": {
      "type": "Ybodychange",
      "commitMessage": "YARN-1149. NM throws InvalidStateTransitonException: Invalid event: APPLICATION_LOG_HANDLING_FINISHED at RUNNING. Contributed by Xuan Gong.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1529043 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "03/10/13 5:43 PM",
      "commitName": "d3841bd4997a77855ab2abd9cc294eae7d795a5b",
      "commitAuthor": "Hitesh Shah",
      "commitDateOld": "01/09/13 5:09 PM",
      "commitNameOld": "a759abcd898224c3481c55aa7e424bc286f60b15",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 32.02,
      "commitsBetweenForRepo": 186,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,6 +1,6 @@\n       public void run() {\n         LOG.info(\"Notifying ContainerManager to block new container-requests\");\n         containerManager.setBlockNewContainerRequests(true);\n-        cleanupContainers(NodeManagerEventType.RESYNC);\n+        containerManager.cleanUpApplications(NodeManagerEventType.RESYNC);\n         ((NodeStatusUpdaterImpl) nodeStatusUpdater ).rebootNodeStatusUpdater();\n       }\n\\ No newline at end of file\n",
      "actualSource": "      public void run() {\n        LOG.info(\"Notifying ContainerManager to block new container-requests\");\n        containerManager.setBlockNewContainerRequests(true);\n        containerManager.cleanUpApplications(NodeManagerEventType.RESYNC);\n        ((NodeStatusUpdaterImpl) nodeStatusUpdater ).rebootNodeStatusUpdater();\n      }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeManager.java",
      "extendedDetails": {}
    },
    "fbb55784d93e1a819daf55d936e864d344579cbf": {
      "type": "Ybodychange",
      "commitMessage": "YARN-562. Modified NM to reject any containers allocated by a previous ResourceManager. Contributed by Jian He.\nMAPREDUCE-5167. Update MR App after YARN-562 to use the new builder API for the container. Contributed by Jian He.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1476034 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "25/04/13 8:50 PM",
      "commitName": "fbb55784d93e1a819daf55d936e864d344579cbf",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "10/04/13 7:00 PM",
      "commitNameOld": "2e3b56f6e907f15f7c6caaad37d37b9e0ee89963",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 15.08,
      "commitsBetweenForRepo": 83,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,4 +1,6 @@\n       public void run() {\n+        LOG.info(\"Notifying ContainerManager to block new container-requests\");\n+        containerManager.setBlockNewContainerRequests(true);\n         cleanupContainers(NodeManagerEventType.RESYNC);\n         ((NodeStatusUpdaterImpl) nodeStatusUpdater ).rebootNodeStatusUpdater();\n       }\n\\ No newline at end of file\n",
      "actualSource": "      public void run() {\n        LOG.info(\"Notifying ContainerManager to block new container-requests\");\n        containerManager.setBlockNewContainerRequests(true);\n        cleanupContainers(NodeManagerEventType.RESYNC);\n        ((NodeStatusUpdaterImpl) nodeStatusUpdater ).rebootNodeStatusUpdater();\n      }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeManager.java",
      "extendedDetails": {}
    },
    "2e3b56f6e907f15f7c6caaad37d37b9e0ee89963": {
      "type": "Yintroduced",
      "commitMessage": "YARN-495. Changed NM reboot behaviour to be a simple resync - kill all containers  and re-register with RM. Contributed by Jian He.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1466752 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "10/04/13 7:00 PM",
      "commitName": "2e3b56f6e907f15f7c6caaad37d37b9e0ee89963",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "diff": "@@ -0,0 +1,4 @@\n+      public void run() {\n+        cleanupContainers(NodeManagerEventType.RESYNC);\n+        ((NodeStatusUpdaterImpl) nodeStatusUpdater ).rebootNodeStatusUpdater();\n+      }\n\\ No newline at end of file\n",
      "actualSource": "      public void run() {\n        cleanupContainers(NodeManagerEventType.RESYNC);\n        ((NodeStatusUpdaterImpl) nodeStatusUpdater ).rebootNodeStatusUpdater();\n      }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeManager.java"
    }
  }
}