{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "DirectorySnapshottableFeature.java",
  "functionName": "computeDiff",
  "functionId": "computeDiff___snapshotRootDir-INodeDirectory(modifiers-final)__snapshotDiffScopeDir-INodeDirectory(modifiers-final)__from-String(modifiers-final)__to-String(modifiers-final)",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/DirectorySnapshottableFeature.java",
  "functionStartLine": 283,
  "functionEndLine": 302,
  "numCommitsSeen": 99,
  "timeTaken": 4850,
  "changeHistory": [
    "28ceb34a725cd06d28fb51361c49bb45464f5368",
    "075dd45a24398dcdcddd60da995f0dc152eee321",
    "76a621ffd2d66bf012a554f4400091a92a5b473e",
    "a5ae562d700a668ed5acc2c148f8cca459a9c9f7",
    "cc2f96f655d0fd4121125fc801056571f4a20a2a",
    "d9e2514d21c2ae356ee7fe8d4a857748b5defa4c",
    "24d96cbcdb80a2de4ada7aa70056a481da24fcc5",
    "66ea187228c899cadf23d10c7032c8efe1aa0df4"
  ],
  "changeHistoryShort": {
    "28ceb34a725cd06d28fb51361c49bb45464f5368": "Ybodychange",
    "075dd45a24398dcdcddd60da995f0dc152eee321": "Ymultichange(Yparameterchange,Ybodychange)",
    "76a621ffd2d66bf012a554f4400091a92a5b473e": "Ymultichange(Yfilerename,Ybodychange,Yparameterchange)",
    "a5ae562d700a668ed5acc2c148f8cca459a9c9f7": "Ybodychange",
    "cc2f96f655d0fd4121125fc801056571f4a20a2a": "Ybodychange",
    "d9e2514d21c2ae356ee7fe8d4a857748b5defa4c": "Ybodychange",
    "24d96cbcdb80a2de4ada7aa70056a481da24fcc5": "Ymultichange(Yreturntypechange,Ybodychange)",
    "66ea187228c899cadf23d10c7032c8efe1aa0df4": "Yintroduced"
  },
  "changeHistoryDetails": {
    "28ceb34a725cd06d28fb51361c49bb45464f5368": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-13868. WebHDFS: GETSNAPSHOTDIFF API NPE when param \"snapshotname\" is given but \"oldsnapshotname\" is not. Contributed by Pranay Singh.\n",
      "commitDate": "19/09/18 3:12 AM",
      "commitName": "28ceb34a725cd06d28fb51361c49bb45464f5368",
      "commitAuthor": "Wei-Chiu Chuang",
      "commitDateOld": "07/05/18 3:36 PM",
      "commitNameOld": "696a4be0daac00dd3bb64801d9fbe659aef9e089",
      "commitAuthorOld": "Xiao Chen",
      "daysBetweenCommits": 134.48,
      "commitsBetweenForRepo": 1061,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,20 +1,20 @@\n   SnapshotDiffInfo computeDiff(final INodeDirectory snapshotRootDir,\n       final INodeDirectory snapshotDiffScopeDir, final String from,\n       final String to) throws SnapshotException {\n     Preconditions.checkArgument(snapshotDiffScopeDir\n         .isDescendantOfSnapshotRoot(snapshotRootDir));\n     Snapshot fromSnapshot \u003d getSnapshotByName(snapshotRootDir, from);\n     Snapshot toSnapshot \u003d getSnapshotByName(snapshotRootDir, to);\n     // if the start point is equal to the end point, return null\n-    if (from.equals(to)) {\n+    if (from !\u003d null \u0026\u0026 from.equals(to)) {\n       return null;\n     }\n     SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(snapshotRootDir,\n         snapshotDiffScopeDir, fromSnapshot, toSnapshot);\n     // The snapshot diff scope dir is passed in as the snapshot dir\n     // so that the file paths in the diff report are relative to the\n     // snapshot scope dir.\n     computeDiffRecursively(snapshotDiffScopeDir, snapshotDiffScopeDir,\n         new ArrayList\u003c\u003e(), diffs);\n     return diffs;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  SnapshotDiffInfo computeDiff(final INodeDirectory snapshotRootDir,\n      final INodeDirectory snapshotDiffScopeDir, final String from,\n      final String to) throws SnapshotException {\n    Preconditions.checkArgument(snapshotDiffScopeDir\n        .isDescendantOfSnapshotRoot(snapshotRootDir));\n    Snapshot fromSnapshot \u003d getSnapshotByName(snapshotRootDir, from);\n    Snapshot toSnapshot \u003d getSnapshotByName(snapshotRootDir, to);\n    // if the start point is equal to the end point, return null\n    if (from !\u003d null \u0026\u0026 from.equals(to)) {\n      return null;\n    }\n    SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(snapshotRootDir,\n        snapshotDiffScopeDir, fromSnapshot, toSnapshot);\n    // The snapshot diff scope dir is passed in as the snapshot dir\n    // so that the file paths in the diff report are relative to the\n    // snapshot scope dir.\n    computeDiffRecursively(snapshotDiffScopeDir, snapshotDiffScopeDir,\n        new ArrayList\u003c\u003e(), diffs);\n    return diffs;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/DirectorySnapshottableFeature.java",
      "extendedDetails": {}
    },
    "075dd45a24398dcdcddd60da995f0dc152eee321": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "HDFS-12544. SnapshotDiff - support diff generation on any snapshot root descendant directory.\n",
      "commitDate": "25/10/17 10:54 AM",
      "commitName": "075dd45a24398dcdcddd60da995f0dc152eee321",
      "commitAuthor": "Manoj Govindassamy",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-12544. SnapshotDiff - support diff generation on any snapshot root descendant directory.\n",
          "commitDate": "25/10/17 10:54 AM",
          "commitName": "075dd45a24398dcdcddd60da995f0dc152eee321",
          "commitAuthor": "Manoj Govindassamy",
          "commitDateOld": "01/08/17 4:28 PM",
          "commitNameOld": "52d7bafcf49916887197436ddb0f08f021d248d9",
          "commitAuthorOld": "Manoj Govindassamy",
          "daysBetweenCommits": 84.77,
          "commitsBetweenForRepo": 753,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,14 +1,20 @@\n-  SnapshotDiffInfo computeDiff(final INodeDirectory snapshotRoot,\n-      final String from, final String to) throws SnapshotException {\n-    Snapshot fromSnapshot \u003d getSnapshotByName(snapshotRoot, from);\n-    Snapshot toSnapshot \u003d getSnapshotByName(snapshotRoot, to);\n+  SnapshotDiffInfo computeDiff(final INodeDirectory snapshotRootDir,\n+      final INodeDirectory snapshotDiffScopeDir, final String from,\n+      final String to) throws SnapshotException {\n+    Preconditions.checkArgument(snapshotDiffScopeDir\n+        .isDescendantOfSnapshotRoot(snapshotRootDir));\n+    Snapshot fromSnapshot \u003d getSnapshotByName(snapshotRootDir, from);\n+    Snapshot toSnapshot \u003d getSnapshotByName(snapshotRootDir, to);\n     // if the start point is equal to the end point, return null\n     if (from.equals(to)) {\n       return null;\n     }\n-    SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(snapshotRoot, fromSnapshot,\n-        toSnapshot);\n-    computeDiffRecursively(snapshotRoot, snapshotRoot, new ArrayList\u003cbyte[]\u003e(),\n-        diffs);\n+    SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(snapshotRootDir,\n+        snapshotDiffScopeDir, fromSnapshot, toSnapshot);\n+    // The snapshot diff scope dir is passed in as the snapshot dir\n+    // so that the file paths in the diff report are relative to the\n+    // snapshot scope dir.\n+    computeDiffRecursively(snapshotDiffScopeDir, snapshotDiffScopeDir,\n+        new ArrayList\u003c\u003e(), diffs);\n     return diffs;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  SnapshotDiffInfo computeDiff(final INodeDirectory snapshotRootDir,\n      final INodeDirectory snapshotDiffScopeDir, final String from,\n      final String to) throws SnapshotException {\n    Preconditions.checkArgument(snapshotDiffScopeDir\n        .isDescendantOfSnapshotRoot(snapshotRootDir));\n    Snapshot fromSnapshot \u003d getSnapshotByName(snapshotRootDir, from);\n    Snapshot toSnapshot \u003d getSnapshotByName(snapshotRootDir, to);\n    // if the start point is equal to the end point, return null\n    if (from.equals(to)) {\n      return null;\n    }\n    SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(snapshotRootDir,\n        snapshotDiffScopeDir, fromSnapshot, toSnapshot);\n    // The snapshot diff scope dir is passed in as the snapshot dir\n    // so that the file paths in the diff report are relative to the\n    // snapshot scope dir.\n    computeDiffRecursively(snapshotDiffScopeDir, snapshotDiffScopeDir,\n        new ArrayList\u003c\u003e(), diffs);\n    return diffs;\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/DirectorySnapshottableFeature.java",
          "extendedDetails": {
            "oldValue": "[snapshotRoot-INodeDirectory(modifiers-final), from-String(modifiers-final), to-String(modifiers-final)]",
            "newValue": "[snapshotRootDir-INodeDirectory(modifiers-final), snapshotDiffScopeDir-INodeDirectory(modifiers-final), from-String(modifiers-final), to-String(modifiers-final)]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-12544. SnapshotDiff - support diff generation on any snapshot root descendant directory.\n",
          "commitDate": "25/10/17 10:54 AM",
          "commitName": "075dd45a24398dcdcddd60da995f0dc152eee321",
          "commitAuthor": "Manoj Govindassamy",
          "commitDateOld": "01/08/17 4:28 PM",
          "commitNameOld": "52d7bafcf49916887197436ddb0f08f021d248d9",
          "commitAuthorOld": "Manoj Govindassamy",
          "daysBetweenCommits": 84.77,
          "commitsBetweenForRepo": 753,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,14 +1,20 @@\n-  SnapshotDiffInfo computeDiff(final INodeDirectory snapshotRoot,\n-      final String from, final String to) throws SnapshotException {\n-    Snapshot fromSnapshot \u003d getSnapshotByName(snapshotRoot, from);\n-    Snapshot toSnapshot \u003d getSnapshotByName(snapshotRoot, to);\n+  SnapshotDiffInfo computeDiff(final INodeDirectory snapshotRootDir,\n+      final INodeDirectory snapshotDiffScopeDir, final String from,\n+      final String to) throws SnapshotException {\n+    Preconditions.checkArgument(snapshotDiffScopeDir\n+        .isDescendantOfSnapshotRoot(snapshotRootDir));\n+    Snapshot fromSnapshot \u003d getSnapshotByName(snapshotRootDir, from);\n+    Snapshot toSnapshot \u003d getSnapshotByName(snapshotRootDir, to);\n     // if the start point is equal to the end point, return null\n     if (from.equals(to)) {\n       return null;\n     }\n-    SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(snapshotRoot, fromSnapshot,\n-        toSnapshot);\n-    computeDiffRecursively(snapshotRoot, snapshotRoot, new ArrayList\u003cbyte[]\u003e(),\n-        diffs);\n+    SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(snapshotRootDir,\n+        snapshotDiffScopeDir, fromSnapshot, toSnapshot);\n+    // The snapshot diff scope dir is passed in as the snapshot dir\n+    // so that the file paths in the diff report are relative to the\n+    // snapshot scope dir.\n+    computeDiffRecursively(snapshotDiffScopeDir, snapshotDiffScopeDir,\n+        new ArrayList\u003c\u003e(), diffs);\n     return diffs;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  SnapshotDiffInfo computeDiff(final INodeDirectory snapshotRootDir,\n      final INodeDirectory snapshotDiffScopeDir, final String from,\n      final String to) throws SnapshotException {\n    Preconditions.checkArgument(snapshotDiffScopeDir\n        .isDescendantOfSnapshotRoot(snapshotRootDir));\n    Snapshot fromSnapshot \u003d getSnapshotByName(snapshotRootDir, from);\n    Snapshot toSnapshot \u003d getSnapshotByName(snapshotRootDir, to);\n    // if the start point is equal to the end point, return null\n    if (from.equals(to)) {\n      return null;\n    }\n    SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(snapshotRootDir,\n        snapshotDiffScopeDir, fromSnapshot, toSnapshot);\n    // The snapshot diff scope dir is passed in as the snapshot dir\n    // so that the file paths in the diff report are relative to the\n    // snapshot scope dir.\n    computeDiffRecursively(snapshotDiffScopeDir, snapshotDiffScopeDir,\n        new ArrayList\u003c\u003e(), diffs);\n    return diffs;\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/DirectorySnapshottableFeature.java",
          "extendedDetails": {}
        }
      ]
    },
    "76a621ffd2d66bf012a554f4400091a92a5b473e": {
      "type": "Ymultichange(Yfilerename,Ybodychange,Yparameterchange)",
      "commitMessage": "HDFS-6609. Use DirectorySnapshottableFeature to represent a snapshottable directory. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1608631 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "07/07/14 5:08 PM",
      "commitName": "76a621ffd2d66bf012a554f4400091a92a5b473e",
      "commitAuthor": "Haohui Mai",
      "subchanges": [
        {
          "type": "Yfilerename",
          "commitMessage": "HDFS-6609. Use DirectorySnapshottableFeature to represent a snapshottable directory. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1608631 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "07/07/14 5:08 PM",
          "commitName": "76a621ffd2d66bf012a554f4400091a92a5b473e",
          "commitAuthor": "Haohui Mai",
          "commitDateOld": "07/07/14 1:14 PM",
          "commitNameOld": "4b2ded8202f9d07ba44066650dc4e5c987cbbacc",
          "commitAuthorOld": "Vinod Kumar Vavilapalli",
          "daysBetweenCommits": 0.16,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,13 +1,14 @@\n-  SnapshotDiffInfo computeDiff(final String from, final String to)\n-      throws SnapshotException {\n-    Snapshot fromSnapshot \u003d getSnapshotByName(from);\n-    Snapshot toSnapshot \u003d getSnapshotByName(to);\n+  SnapshotDiffInfo computeDiff(final INodeDirectory snapshotRoot,\n+      final String from, final String to) throws SnapshotException {\n+    Snapshot fromSnapshot \u003d getSnapshotByName(snapshotRoot, from);\n+    Snapshot toSnapshot \u003d getSnapshotByName(snapshotRoot, to);\n     // if the start point is equal to the end point, return null\n     if (from.equals(to)) {\n       return null;\n     }\n-    SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(this, fromSnapshot,\n+    SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(snapshotRoot, fromSnapshot,\n         toSnapshot);\n-    computeDiffRecursively(this, new ArrayList\u003cbyte[]\u003e(), diffs);\n+    computeDiffRecursively(snapshotRoot, snapshotRoot, new ArrayList\u003cbyte[]\u003e(),\n+        diffs);\n     return diffs;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  SnapshotDiffInfo computeDiff(final INodeDirectory snapshotRoot,\n      final String from, final String to) throws SnapshotException {\n    Snapshot fromSnapshot \u003d getSnapshotByName(snapshotRoot, from);\n    Snapshot toSnapshot \u003d getSnapshotByName(snapshotRoot, to);\n    // if the start point is equal to the end point, return null\n    if (from.equals(to)) {\n      return null;\n    }\n    SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(snapshotRoot, fromSnapshot,\n        toSnapshot);\n    computeDiffRecursively(snapshotRoot, snapshotRoot, new ArrayList\u003cbyte[]\u003e(),\n        diffs);\n    return diffs;\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/DirectorySnapshottableFeature.java",
          "extendedDetails": {
            "oldPath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/INodeDirectorySnapshottable.java",
            "newPath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/DirectorySnapshottableFeature.java"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-6609. Use DirectorySnapshottableFeature to represent a snapshottable directory. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1608631 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "07/07/14 5:08 PM",
          "commitName": "76a621ffd2d66bf012a554f4400091a92a5b473e",
          "commitAuthor": "Haohui Mai",
          "commitDateOld": "07/07/14 1:14 PM",
          "commitNameOld": "4b2ded8202f9d07ba44066650dc4e5c987cbbacc",
          "commitAuthorOld": "Vinod Kumar Vavilapalli",
          "daysBetweenCommits": 0.16,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,13 +1,14 @@\n-  SnapshotDiffInfo computeDiff(final String from, final String to)\n-      throws SnapshotException {\n-    Snapshot fromSnapshot \u003d getSnapshotByName(from);\n-    Snapshot toSnapshot \u003d getSnapshotByName(to);\n+  SnapshotDiffInfo computeDiff(final INodeDirectory snapshotRoot,\n+      final String from, final String to) throws SnapshotException {\n+    Snapshot fromSnapshot \u003d getSnapshotByName(snapshotRoot, from);\n+    Snapshot toSnapshot \u003d getSnapshotByName(snapshotRoot, to);\n     // if the start point is equal to the end point, return null\n     if (from.equals(to)) {\n       return null;\n     }\n-    SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(this, fromSnapshot,\n+    SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(snapshotRoot, fromSnapshot,\n         toSnapshot);\n-    computeDiffRecursively(this, new ArrayList\u003cbyte[]\u003e(), diffs);\n+    computeDiffRecursively(snapshotRoot, snapshotRoot, new ArrayList\u003cbyte[]\u003e(),\n+        diffs);\n     return diffs;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  SnapshotDiffInfo computeDiff(final INodeDirectory snapshotRoot,\n      final String from, final String to) throws SnapshotException {\n    Snapshot fromSnapshot \u003d getSnapshotByName(snapshotRoot, from);\n    Snapshot toSnapshot \u003d getSnapshotByName(snapshotRoot, to);\n    // if the start point is equal to the end point, return null\n    if (from.equals(to)) {\n      return null;\n    }\n    SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(snapshotRoot, fromSnapshot,\n        toSnapshot);\n    computeDiffRecursively(snapshotRoot, snapshotRoot, new ArrayList\u003cbyte[]\u003e(),\n        diffs);\n    return diffs;\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/DirectorySnapshottableFeature.java",
          "extendedDetails": {}
        },
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-6609. Use DirectorySnapshottableFeature to represent a snapshottable directory. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1608631 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "07/07/14 5:08 PM",
          "commitName": "76a621ffd2d66bf012a554f4400091a92a5b473e",
          "commitAuthor": "Haohui Mai",
          "commitDateOld": "07/07/14 1:14 PM",
          "commitNameOld": "4b2ded8202f9d07ba44066650dc4e5c987cbbacc",
          "commitAuthorOld": "Vinod Kumar Vavilapalli",
          "daysBetweenCommits": 0.16,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,13 +1,14 @@\n-  SnapshotDiffInfo computeDiff(final String from, final String to)\n-      throws SnapshotException {\n-    Snapshot fromSnapshot \u003d getSnapshotByName(from);\n-    Snapshot toSnapshot \u003d getSnapshotByName(to);\n+  SnapshotDiffInfo computeDiff(final INodeDirectory snapshotRoot,\n+      final String from, final String to) throws SnapshotException {\n+    Snapshot fromSnapshot \u003d getSnapshotByName(snapshotRoot, from);\n+    Snapshot toSnapshot \u003d getSnapshotByName(snapshotRoot, to);\n     // if the start point is equal to the end point, return null\n     if (from.equals(to)) {\n       return null;\n     }\n-    SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(this, fromSnapshot,\n+    SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(snapshotRoot, fromSnapshot,\n         toSnapshot);\n-    computeDiffRecursively(this, new ArrayList\u003cbyte[]\u003e(), diffs);\n+    computeDiffRecursively(snapshotRoot, snapshotRoot, new ArrayList\u003cbyte[]\u003e(),\n+        diffs);\n     return diffs;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  SnapshotDiffInfo computeDiff(final INodeDirectory snapshotRoot,\n      final String from, final String to) throws SnapshotException {\n    Snapshot fromSnapshot \u003d getSnapshotByName(snapshotRoot, from);\n    Snapshot toSnapshot \u003d getSnapshotByName(snapshotRoot, to);\n    // if the start point is equal to the end point, return null\n    if (from.equals(to)) {\n      return null;\n    }\n    SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(snapshotRoot, fromSnapshot,\n        toSnapshot);\n    computeDiffRecursively(snapshotRoot, snapshotRoot, new ArrayList\u003cbyte[]\u003e(),\n        diffs);\n    return diffs;\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/DirectorySnapshottableFeature.java",
          "extendedDetails": {
            "oldValue": "[from-String(modifiers-final), to-String(modifiers-final)]",
            "newValue": "[snapshotRoot-INodeDirectory(modifiers-final), from-String(modifiers-final), to-String(modifiers-final)]"
          }
        }
      ]
    },
    "a5ae562d700a668ed5acc2c148f8cca459a9c9f7": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-4650. When passing two non-existing snapshot names to snapshotDiff, it returns success if the names are the same.  Contributed by Jing Zhao\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1476408 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "26/04/13 2:30 PM",
      "commitName": "a5ae562d700a668ed5acc2c148f8cca459a9c9f7",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "24/04/13 1:31 PM",
      "commitNameOld": "0fa5cad0b27780c27a284c23101b1099d4886506",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 2.04,
      "commitsBetweenForRepo": 19,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,9 +1,13 @@\n   SnapshotDiffInfo computeDiff(final String from, final String to)\n       throws SnapshotException {\n     Snapshot fromSnapshot \u003d getSnapshotByName(from);\n-    Snapshot toSnapshot \u003d getSnapshotByName(to); \n+    Snapshot toSnapshot \u003d getSnapshotByName(to);\n+    // if the start point is equal to the end point, return null\n+    if (from.equals(to)) {\n+      return null;\n+    }\n     SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(this, fromSnapshot,\n         toSnapshot);\n     computeDiffRecursively(this, new ArrayList\u003cbyte[]\u003e(), diffs);\n     return diffs;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  SnapshotDiffInfo computeDiff(final String from, final String to)\n      throws SnapshotException {\n    Snapshot fromSnapshot \u003d getSnapshotByName(from);\n    Snapshot toSnapshot \u003d getSnapshotByName(to);\n    // if the start point is equal to the end point, return null\n    if (from.equals(to)) {\n      return null;\n    }\n    SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(this, fromSnapshot,\n        toSnapshot);\n    computeDiffRecursively(this, new ArrayList\u003cbyte[]\u003e(), diffs);\n    return diffs;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/INodeDirectorySnapshottable.java",
      "extendedDetails": {}
    },
    "cc2f96f655d0fd4121125fc801056571f4a20a2a": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-4612. Not to use INode.getParent() when generating snapshot diff report.  Contributed by Jing Zhao\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1460590 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "25/03/13 3:21 AM",
      "commitName": "cc2f96f655d0fd4121125fc801056571f4a20a2a",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "18/03/13 11:27 PM",
      "commitNameOld": "9701555899315c94584b24d8717c1d7540a4a491",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 6.16,
      "commitsBetweenForRepo": 33,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,9 +1,9 @@\n   SnapshotDiffInfo computeDiff(final String from, final String to)\n       throws SnapshotException {\n     Snapshot fromSnapshot \u003d getSnapshotByName(from);\n     Snapshot toSnapshot \u003d getSnapshotByName(to); \n     SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(this, fromSnapshot,\n         toSnapshot);\n-    computeDiffRecursively(this, diffs);\n+    computeDiffRecursively(this, new ArrayList\u003cbyte[]\u003e(), diffs);\n     return diffs;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  SnapshotDiffInfo computeDiff(final String from, final String to)\n      throws SnapshotException {\n    Snapshot fromSnapshot \u003d getSnapshotByName(from);\n    Snapshot toSnapshot \u003d getSnapshotByName(to); \n    SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(this, fromSnapshot,\n        toSnapshot);\n    computeDiffRecursively(this, new ArrayList\u003cbyte[]\u003e(), diffs);\n    return diffs;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/INodeDirectorySnapshottable.java",
      "extendedDetails": {}
    },
    "d9e2514d21c2ae356ee7fe8d4a857748b5defa4c": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-4487. Fix snapshot diff report for HDFS-4446.  Contributed by Jing Zhao\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1446385 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "14/02/13 3:07 PM",
      "commitName": "d9e2514d21c2ae356ee7fe8d4a857748b5defa4c",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "14/02/13 2:00 PM",
      "commitNameOld": "d42d0860cb670c8284bb298029cd6f8f59db9510",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 0.05,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,9 +1,9 @@\n   SnapshotDiffInfo computeDiff(final String from, final String to)\n       throws SnapshotException {\n     Snapshot fromSnapshot \u003d getSnapshotByName(from);\n     Snapshot toSnapshot \u003d getSnapshotByName(to); \n     SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(this, fromSnapshot,\n         toSnapshot);\n-    computeDiffInDir(this, diffs);\n+    computeDiffRecursively(this, diffs);\n     return diffs;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  SnapshotDiffInfo computeDiff(final String from, final String to)\n      throws SnapshotException {\n    Snapshot fromSnapshot \u003d getSnapshotByName(from);\n    Snapshot toSnapshot \u003d getSnapshotByName(to); \n    SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(this, fromSnapshot,\n        toSnapshot);\n    computeDiffRecursively(this, diffs);\n    return diffs;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/INodeDirectorySnapshottable.java",
      "extendedDetails": {}
    },
    "24d96cbcdb80a2de4ada7aa70056a481da24fcc5": {
      "type": "Ymultichange(Yreturntypechange,Ybodychange)",
      "commitMessage": "HDFS-4414. Add support for getting snapshot diff from DistributedFileSystem. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1441808 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "02/02/13 12:39 PM",
      "commitName": "24d96cbcdb80a2de4ada7aa70056a481da24fcc5",
      "commitAuthor": "Suresh Srinivas",
      "subchanges": [
        {
          "type": "Yreturntypechange",
          "commitMessage": "HDFS-4414. Add support for getting snapshot diff from DistributedFileSystem. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1441808 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "02/02/13 12:39 PM",
          "commitName": "24d96cbcdb80a2de4ada7aa70056a481da24fcc5",
          "commitAuthor": "Suresh Srinivas",
          "commitDateOld": "01/02/13 5:53 PM",
          "commitNameOld": "e7db60fbfcc222b32d610ffd912683494674ad2f",
          "commitAuthorOld": "Tsz-wo Sze",
          "daysBetweenCommits": 0.78,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,9 +1,9 @@\n-  SnapshotDiffReport computeDiff(final String from, final String to)\n+  SnapshotDiffInfo computeDiff(final String from, final String to)\n       throws SnapshotException {\n     Snapshot fromSnapshot \u003d getSnapshotByName(from);\n     Snapshot toSnapshot \u003d getSnapshotByName(to); \n-    SnapshotDiffReport diffs \u003d new SnapshotDiffReport(this, fromSnapshot,\n+    SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(this, fromSnapshot,\n         toSnapshot);\n     computeDiffInDir(this, diffs);\n     return diffs;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  SnapshotDiffInfo computeDiff(final String from, final String to)\n      throws SnapshotException {\n    Snapshot fromSnapshot \u003d getSnapshotByName(from);\n    Snapshot toSnapshot \u003d getSnapshotByName(to); \n    SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(this, fromSnapshot,\n        toSnapshot);\n    computeDiffInDir(this, diffs);\n    return diffs;\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/INodeDirectorySnapshottable.java",
          "extendedDetails": {
            "oldValue": "SnapshotDiffReport",
            "newValue": "SnapshotDiffInfo"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-4414. Add support for getting snapshot diff from DistributedFileSystem. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1441808 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "02/02/13 12:39 PM",
          "commitName": "24d96cbcdb80a2de4ada7aa70056a481da24fcc5",
          "commitAuthor": "Suresh Srinivas",
          "commitDateOld": "01/02/13 5:53 PM",
          "commitNameOld": "e7db60fbfcc222b32d610ffd912683494674ad2f",
          "commitAuthorOld": "Tsz-wo Sze",
          "daysBetweenCommits": 0.78,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,9 +1,9 @@\n-  SnapshotDiffReport computeDiff(final String from, final String to)\n+  SnapshotDiffInfo computeDiff(final String from, final String to)\n       throws SnapshotException {\n     Snapshot fromSnapshot \u003d getSnapshotByName(from);\n     Snapshot toSnapshot \u003d getSnapshotByName(to); \n-    SnapshotDiffReport diffs \u003d new SnapshotDiffReport(this, fromSnapshot,\n+    SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(this, fromSnapshot,\n         toSnapshot);\n     computeDiffInDir(this, diffs);\n     return diffs;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  SnapshotDiffInfo computeDiff(final String from, final String to)\n      throws SnapshotException {\n    Snapshot fromSnapshot \u003d getSnapshotByName(from);\n    Snapshot toSnapshot \u003d getSnapshotByName(to); \n    SnapshotDiffInfo diffs \u003d new SnapshotDiffInfo(this, fromSnapshot,\n        toSnapshot);\n    computeDiffInDir(this, diffs);\n    return diffs;\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/INodeDirectorySnapshottable.java",
          "extendedDetails": {}
        }
      ]
    },
    "66ea187228c899cadf23d10c7032c8efe1aa0df4": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-4131. Add capability to namenode to get snapshot diff. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1440152 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "29/01/13 1:31 PM",
      "commitName": "66ea187228c899cadf23d10c7032c8efe1aa0df4",
      "commitAuthor": "Suresh Srinivas",
      "diff": "@@ -0,0 +1,9 @@\n+  SnapshotDiffReport computeDiff(final String from, final String to)\n+      throws SnapshotException {\n+    Snapshot fromSnapshot \u003d getSnapshotByName(from);\n+    Snapshot toSnapshot \u003d getSnapshotByName(to); \n+    SnapshotDiffReport diffs \u003d new SnapshotDiffReport(this, fromSnapshot,\n+        toSnapshot);\n+    computeDiffInDir(this, diffs);\n+    return diffs;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  SnapshotDiffReport computeDiff(final String from, final String to)\n      throws SnapshotException {\n    Snapshot fromSnapshot \u003d getSnapshotByName(from);\n    Snapshot toSnapshot \u003d getSnapshotByName(to); \n    SnapshotDiffReport diffs \u003d new SnapshotDiffReport(this, fromSnapshot,\n        toSnapshot);\n    computeDiffInDir(this, diffs);\n    return diffs;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/INodeDirectorySnapshottable.java"
    }
  }
}