{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "FifoSchedulerMetrics.java",
  "functionName": "registerQueueMetrics",
  "functionId": "registerQueueMetrics___queueName-String",
  "sourceFilePath": "hadoop-tools/hadoop-sls/src/main/java/org/apache/hadoop/yarn/sls/scheduler/FifoSchedulerMetrics.java",
  "functionStartLine": 38,
  "functionEndLine": 62,
  "numCommitsSeen": 3,
  "timeTaken": 1840,
  "changeHistory": [
    "46eb1033a86ca53e7b94202567aef8af2417bdf8"
  ],
  "changeHistoryShort": {
    "46eb1033a86ca53e7b94202567aef8af2417bdf8": "Yintroduced"
  },
  "changeHistoryDetails": {
    "46eb1033a86ca53e7b94202567aef8af2417bdf8": {
      "type": "Yintroduced",
      "commitMessage": "YARN-6546. SLS is slow while loading 10k queues. (Yufei Gu via Haibo Chen)\n",
      "commitDate": "17/10/17 4:04 PM",
      "commitName": "46eb1033a86ca53e7b94202567aef8af2417bdf8",
      "commitAuthor": "Haibo Chen",
      "diff": "@@ -0,0 +1,25 @@\n+  protected void registerQueueMetrics(String queueName) {\n+    super.registerQueueMetrics(queueName);\n+\n+    FifoScheduler fifo \u003d (FifoScheduler) scheduler;\n+    // for FifoScheduler, only DEFAULT_QUEUE\n+    // here the three parameters doesn\u0027t affect results\n+    final QueueInfo queue \u003d fifo.getQueueInfo(queueName, false, false);\n+    // track currentCapacity, maximumCapacity (always 1.0f)\n+    metrics.register(\"variable.queue.\" + queueName + \".currentcapacity\",\n+      new Gauge\u003cFloat\u003e() {\n+        @Override\n+        public Float getValue() {\n+          return queue.getCurrentCapacity();\n+        }\n+      }\n+    );\n+    metrics.register(\"variable.queue.\" + queueName + \".\",\n+      new Gauge\u003cFloat\u003e() {\n+        @Override\n+        public Float getValue() {\n+          return queue.getCurrentCapacity();\n+        }\n+      }\n+    );\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  protected void registerQueueMetrics(String queueName) {\n    super.registerQueueMetrics(queueName);\n\n    FifoScheduler fifo \u003d (FifoScheduler) scheduler;\n    // for FifoScheduler, only DEFAULT_QUEUE\n    // here the three parameters doesn\u0027t affect results\n    final QueueInfo queue \u003d fifo.getQueueInfo(queueName, false, false);\n    // track currentCapacity, maximumCapacity (always 1.0f)\n    metrics.register(\"variable.queue.\" + queueName + \".currentcapacity\",\n      new Gauge\u003cFloat\u003e() {\n        @Override\n        public Float getValue() {\n          return queue.getCurrentCapacity();\n        }\n      }\n    );\n    metrics.register(\"variable.queue.\" + queueName + \".\",\n      new Gauge\u003cFloat\u003e() {\n        @Override\n        public Float getValue() {\n          return queue.getCurrentCapacity();\n        }\n      }\n    );\n  }",
      "path": "hadoop-tools/hadoop-sls/src/main/java/org/apache/hadoop/yarn/sls/scheduler/FifoSchedulerMetrics.java"
    }
  }
}