{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "DiskBalancer.java",
  "functionName": "shutdownExecutor",
  "functionId": "shutdownExecutor",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DiskBalancer.java",
  "functionStartLine": 155,
  "functionEndLine": 168,
  "numCommitsSeen": 32,
  "timeTaken": 1933,
  "changeHistory": [
    "baab48922a301d639ea84ecf00d8a7616acd950d",
    "1594b472bb9df7537dbc001411c99058cc11ba41",
    "6c606bf5c8c1ace381ce73679c2be96d5475ba34",
    "2b1b2faf76a7ff148650a7836935a85439f60c49"
  ],
  "changeHistoryShort": {
    "baab48922a301d639ea84ecf00d8a7616acd950d": "Ybodychange",
    "1594b472bb9df7537dbc001411c99058cc11ba41": "Ybodychange",
    "6c606bf5c8c1ace381ce73679c2be96d5475ba34": "Ybodychange",
    "2b1b2faf76a7ff148650a7836935a85439f60c49": "Yintroduced"
  },
  "changeHistoryDetails": {
    "baab48922a301d639ea84ecf00d8a7616acd950d": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-9849. DiskBalancer: reduce lock path in shutdown code. Contributed by Yuanbo Liu.\n",
      "commitDate": "08/09/16 8:00 PM",
      "commitName": "baab48922a301d639ea84ecf00d8a7616acd950d",
      "commitAuthor": "Anu Engineer",
      "commitDateOld": "16/08/16 10:20 AM",
      "commitNameOld": "b047bc7270f3461156e4d08423c728ee9c67dba5",
      "commitAuthorOld": "Anu Engineer",
      "daysBetweenCommits": 23.4,
      "commitsBetweenForRepo": 145,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,14 @@\n   private void shutdownExecutor() {\n     final int secondsTowait \u003d 10;\n-    scheduler.shutdown();\n     try {\n       if (!scheduler.awaitTermination(secondsTowait, TimeUnit.SECONDS)) {\n         scheduler.shutdownNow();\n         if (!scheduler.awaitTermination(secondsTowait, TimeUnit.SECONDS)) {\n           LOG.error(\"Disk Balancer : Scheduler did not terminate.\");\n         }\n       }\n     } catch (InterruptedException ex) {\n       scheduler.shutdownNow();\n       Thread.currentThread().interrupt();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void shutdownExecutor() {\n    final int secondsTowait \u003d 10;\n    try {\n      if (!scheduler.awaitTermination(secondsTowait, TimeUnit.SECONDS)) {\n        scheduler.shutdownNow();\n        if (!scheduler.awaitTermination(secondsTowait, TimeUnit.SECONDS)) {\n          LOG.error(\"Disk Balancer : Scheduler did not terminate.\");\n        }\n      }\n    } catch (InterruptedException ex) {\n      scheduler.shutdownNow();\n      Thread.currentThread().interrupt();\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DiskBalancer.java",
      "extendedDetails": {}
    },
    "1594b472bb9df7537dbc001411c99058cc11ba41": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-9543. DiskBalancer: Add Data mover. Contributed by Anu Engineer.\n",
      "commitDate": "23/06/16 6:20 PM",
      "commitName": "1594b472bb9df7537dbc001411c99058cc11ba41",
      "commitAuthor": "Anu Engineer",
      "commitDateOld": "23/06/16 6:18 PM",
      "commitNameOld": "050677077beaf42255b3936952b8e816a9201203",
      "commitAuthorOld": "Anu Engineer",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 2,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,14 +1,15 @@\n   private void shutdownExecutor() {\n+    final int secondsTowait \u003d 10;\n     scheduler.shutdown();\n     try {\n-      if(!scheduler.awaitTermination(10, TimeUnit.SECONDS)) {\n+      if (!scheduler.awaitTermination(secondsTowait, TimeUnit.SECONDS)) {\n         scheduler.shutdownNow();\n-        if (!scheduler.awaitTermination(10, TimeUnit.SECONDS)) {\n+        if (!scheduler.awaitTermination(secondsTowait, TimeUnit.SECONDS)) {\n           LOG.error(\"Disk Balancer : Scheduler did not terminate.\");\n         }\n       }\n     } catch (InterruptedException ex) {\n       scheduler.shutdownNow();\n       Thread.currentThread().interrupt();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void shutdownExecutor() {\n    final int secondsTowait \u003d 10;\n    scheduler.shutdown();\n    try {\n      if (!scheduler.awaitTermination(secondsTowait, TimeUnit.SECONDS)) {\n        scheduler.shutdownNow();\n        if (!scheduler.awaitTermination(secondsTowait, TimeUnit.SECONDS)) {\n          LOG.error(\"Disk Balancer : Scheduler did not terminate.\");\n        }\n      }\n    } catch (InterruptedException ex) {\n      scheduler.shutdownNow();\n      Thread.currentThread().interrupt();\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DiskBalancer.java",
      "extendedDetails": {}
    },
    "6c606bf5c8c1ace381ce73679c2be96d5475ba34": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-9709. DiskBalancer : Add tests for disk balancer using a Mock Mover class. Contributed by Anu Engineer.\n",
      "commitDate": "23/06/16 6:18 PM",
      "commitName": "6c606bf5c8c1ace381ce73679c2be96d5475ba34",
      "commitAuthor": "Anu Engineer",
      "commitDateOld": "23/06/16 6:18 PM",
      "commitNameOld": "75a711a2d53966361f5d5fa727b43c9fddb01504",
      "commitAuthorOld": "Arpit Agarwal",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 3,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,14 +1,14 @@\n   private void shutdownExecutor() {\n     scheduler.shutdown();\n     try {\n-      if(!scheduler.awaitTermination(30, TimeUnit.SECONDS)) {\n+      if(!scheduler.awaitTermination(10, TimeUnit.SECONDS)) {\n         scheduler.shutdownNow();\n-        if (!scheduler.awaitTermination(30, TimeUnit.SECONDS)) {\n+        if (!scheduler.awaitTermination(10, TimeUnit.SECONDS)) {\n           LOG.error(\"Disk Balancer : Scheduler did not terminate.\");\n         }\n       }\n     } catch (InterruptedException ex) {\n       scheduler.shutdownNow();\n       Thread.currentThread().interrupt();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void shutdownExecutor() {\n    scheduler.shutdown();\n    try {\n      if(!scheduler.awaitTermination(10, TimeUnit.SECONDS)) {\n        scheduler.shutdownNow();\n        if (!scheduler.awaitTermination(10, TimeUnit.SECONDS)) {\n          LOG.error(\"Disk Balancer : Scheduler did not terminate.\");\n        }\n      }\n    } catch (InterruptedException ex) {\n      scheduler.shutdownNow();\n      Thread.currentThread().interrupt();\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DiskBalancer.java",
      "extendedDetails": {}
    },
    "2b1b2faf76a7ff148650a7836935a85439f60c49": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-9671. DiskBalancer: SubmitPlan implementation. (Contributed by Anu Engineer)\n",
      "commitDate": "23/06/16 6:18 PM",
      "commitName": "2b1b2faf76a7ff148650a7836935a85439f60c49",
      "commitAuthor": "Arpit Agarwal",
      "diff": "@@ -0,0 +1,14 @@\n+  private void shutdownExecutor() {\n+    scheduler.shutdown();\n+    try {\n+      if(!scheduler.awaitTermination(30, TimeUnit.SECONDS)) {\n+        scheduler.shutdownNow();\n+        if (!scheduler.awaitTermination(30, TimeUnit.SECONDS)) {\n+          LOG.error(\"Disk Balancer : Scheduler did not terminate.\");\n+        }\n+      }\n+    } catch (InterruptedException ex) {\n+      scheduler.shutdownNow();\n+      Thread.currentThread().interrupt();\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private void shutdownExecutor() {\n    scheduler.shutdown();\n    try {\n      if(!scheduler.awaitTermination(30, TimeUnit.SECONDS)) {\n        scheduler.shutdownNow();\n        if (!scheduler.awaitTermination(30, TimeUnit.SECONDS)) {\n          LOG.error(\"Disk Balancer : Scheduler did not terminate.\");\n        }\n      }\n    } catch (InterruptedException ex) {\n      scheduler.shutdownNow();\n      Thread.currentThread().interrupt();\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/datanode/DiskBalancer.java"
    }
  }
}