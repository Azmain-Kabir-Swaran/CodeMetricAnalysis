{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "AzureBlobFileSystem.java",
  "functionName": "append",
  "functionId": "append___f-Path(modifiers-final)__bufferSize-int(modifiers-final)__progress-Progressable(modifiers-final)",
  "sourceFilePath": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/AzureBlobFileSystem.java",
  "functionStartLine": 244,
  "functionEndLine": 259,
  "numCommitsSeen": 34,
  "timeTaken": 3810,
  "changeHistory": [
    "c734d247b1ea16b7028de3a37ff556cb1ef8b7d6",
    "28afdce00955a51bbea9bf46aa0f784764ec1329",
    "e2c7ac71b5ee47bb40294acd10c0c21dd6ee430f",
    "791270a2e5e31546ff5c1ef4fa8bad6852b906dc",
    "d5da9928c99073abdd27b66f794fe4312434ff96",
    "ce03a93f78c4d97ccb48a3906fcd77ad0ac756be",
    "a271fd0eca75cef8b8ba940cdac8ad4fd21b4462",
    "f044deedbbfee0812316d587139cb828f27172e9"
  ],
  "changeHistoryShort": {
    "c734d247b1ea16b7028de3a37ff556cb1ef8b7d6": "Ybodychange",
    "28afdce00955a51bbea9bf46aa0f784764ec1329": "Ybodychange",
    "e2c7ac71b5ee47bb40294acd10c0c21dd6ee430f": "Ybodychange",
    "791270a2e5e31546ff5c1ef4fa8bad6852b906dc": "Ybodychange",
    "d5da9928c99073abdd27b66f794fe4312434ff96": "Ybodychange",
    "ce03a93f78c4d97ccb48a3906fcd77ad0ac756be": "Ybodychange",
    "a271fd0eca75cef8b8ba940cdac8ad4fd21b4462": "Ybodychange",
    "f044deedbbfee0812316d587139cb828f27172e9": "Yintroduced"
  },
  "changeHistoryDetails": {
    "c734d247b1ea16b7028de3a37ff556cb1ef8b7d6": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-16910 : ABFS Streams to update FileSystem.Statistics counters on IO. (#1918). Contributed by Mehakmeet Singh.\n\n",
      "commitDate": "31/03/20 5:49 AM",
      "commitName": "c734d247b1ea16b7028de3a37ff556cb1ef8b7d6",
      "commitAuthor": "Mehakmeet Singh",
      "commitDateOld": "24/03/20 5:11 AM",
      "commitNameOld": "28afdce00955a51bbea9bf46aa0f784764ec1329",
      "commitAuthorOld": "Steve Loughran",
      "daysBetweenCommits": 7.03,
      "commitsBetweenForRepo": 28,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,16 @@\n   public FSDataOutputStream append(final Path f, final int bufferSize, final Progressable progress) throws IOException {\n     LOG.debug(\n         \"AzureBlobFileSystem.append path: {} bufferSize: {}\",\n         f.toString(),\n         bufferSize);\n \n     Path qualifiedPath \u003d makeQualified(f);\n \n     try {\n-      OutputStream outputStream \u003d abfsStore.openFileForWrite(qualifiedPath, false);\n+      OutputStream outputStream \u003d abfsStore.openFileForWrite(qualifiedPath, statistics, false);\n       return new FSDataOutputStream(outputStream, statistics);\n     } catch(AzureBlobFileSystemException ex) {\n       checkException(f, ex);\n       return null;\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public FSDataOutputStream append(final Path f, final int bufferSize, final Progressable progress) throws IOException {\n    LOG.debug(\n        \"AzureBlobFileSystem.append path: {} bufferSize: {}\",\n        f.toString(),\n        bufferSize);\n\n    Path qualifiedPath \u003d makeQualified(f);\n\n    try {\n      OutputStream outputStream \u003d abfsStore.openFileForWrite(qualifiedPath, statistics, false);\n      return new FSDataOutputStream(outputStream, statistics);\n    } catch(AzureBlobFileSystemException ex) {\n      checkException(f, ex);\n      return null;\n    }\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/AzureBlobFileSystem.java",
      "extendedDetails": {}
    },
    "28afdce00955a51bbea9bf46aa0f784764ec1329": {
      "type": "Ybodychange",
      "commitMessage": "Revert \"\"HADOOP-16910. ABFS Streams to update FileSystem.Statistics counters on IO.\"\n\nThis reverts commit e2c7ac71b5ee47bb40294acd10c0c21dd6ee430f.\n\nChange-Id: I5b5a93f5a36cdb0c3d56d1b3f747c318f089de20\n",
      "commitDate": "24/03/20 5:11 AM",
      "commitName": "28afdce00955a51bbea9bf46aa0f784764ec1329",
      "commitAuthor": "Steve Loughran",
      "commitDateOld": "23/03/20 6:50 AM",
      "commitNameOld": "e2c7ac71b5ee47bb40294acd10c0c21dd6ee430f",
      "commitAuthorOld": "Mehakmeet Singh",
      "daysBetweenCommits": 0.93,
      "commitsBetweenForRepo": 5,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,16 @@\n   public FSDataOutputStream append(final Path f, final int bufferSize, final Progressable progress) throws IOException {\n     LOG.debug(\n         \"AzureBlobFileSystem.append path: {} bufferSize: {}\",\n         f.toString(),\n         bufferSize);\n \n     Path qualifiedPath \u003d makeQualified(f);\n \n     try {\n-      OutputStream outputStream \u003d abfsStore.openFileForWrite(qualifiedPath, statistics, false);\n+      OutputStream outputStream \u003d abfsStore.openFileForWrite(qualifiedPath, false);\n       return new FSDataOutputStream(outputStream, statistics);\n     } catch(AzureBlobFileSystemException ex) {\n       checkException(f, ex);\n       return null;\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public FSDataOutputStream append(final Path f, final int bufferSize, final Progressable progress) throws IOException {\n    LOG.debug(\n        \"AzureBlobFileSystem.append path: {} bufferSize: {}\",\n        f.toString(),\n        bufferSize);\n\n    Path qualifiedPath \u003d makeQualified(f);\n\n    try {\n      OutputStream outputStream \u003d abfsStore.openFileForWrite(qualifiedPath, false);\n      return new FSDataOutputStream(outputStream, statistics);\n    } catch(AzureBlobFileSystemException ex) {\n      checkException(f, ex);\n      return null;\n    }\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/AzureBlobFileSystem.java",
      "extendedDetails": {}
    },
    "e2c7ac71b5ee47bb40294acd10c0c21dd6ee430f": {
      "type": "Ybodychange",
      "commitMessage": "ABFS Streams to update FileSystem.Statistics counters on IO.\n\n\r\nContributed by Mehakmeet Singh",
      "commitDate": "23/03/20 6:50 AM",
      "commitName": "e2c7ac71b5ee47bb40294acd10c0c21dd6ee430f",
      "commitAuthor": "Mehakmeet Singh",
      "commitDateOld": "27/02/20 10:27 AM",
      "commitNameOld": "791270a2e5e31546ff5c1ef4fa8bad6852b906dc",
      "commitAuthorOld": "Sneha Vijayarajan",
      "daysBetweenCommits": 24.81,
      "commitsBetweenForRepo": 75,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,16 @@\n   public FSDataOutputStream append(final Path f, final int bufferSize, final Progressable progress) throws IOException {\n     LOG.debug(\n         \"AzureBlobFileSystem.append path: {} bufferSize: {}\",\n         f.toString(),\n         bufferSize);\n \n     Path qualifiedPath \u003d makeQualified(f);\n \n     try {\n-      OutputStream outputStream \u003d abfsStore.openFileForWrite(qualifiedPath, false);\n+      OutputStream outputStream \u003d abfsStore.openFileForWrite(qualifiedPath, statistics, false);\n       return new FSDataOutputStream(outputStream, statistics);\n     } catch(AzureBlobFileSystemException ex) {\n       checkException(f, ex);\n       return null;\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public FSDataOutputStream append(final Path f, final int bufferSize, final Progressable progress) throws IOException {\n    LOG.debug(\n        \"AzureBlobFileSystem.append path: {} bufferSize: {}\",\n        f.toString(),\n        bufferSize);\n\n    Path qualifiedPath \u003d makeQualified(f);\n\n    try {\n      OutputStream outputStream \u003d abfsStore.openFileForWrite(qualifiedPath, statistics, false);\n      return new FSDataOutputStream(outputStream, statistics);\n    } catch(AzureBlobFileSystemException ex) {\n      checkException(f, ex);\n      return null;\n    }\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/AzureBlobFileSystem.java",
      "extendedDetails": {}
    },
    "791270a2e5e31546ff5c1ef4fa8bad6852b906dc": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-16730: ABFS: Support for Shared Access Signatures (SAS). Contributed by Sneha Vijayarajan.\n",
      "commitDate": "27/02/20 10:27 AM",
      "commitName": "791270a2e5e31546ff5c1ef4fa8bad6852b906dc",
      "commitAuthor": "Sneha Vijayarajan",
      "commitDateOld": "14/01/20 5:28 PM",
      "commitNameOld": "c36f09deb91454c086926c01f872d8ca4419aee0",
      "commitAuthorOld": "Clemens Wolff",
      "daysBetweenCommits": 43.71,
      "commitsBetweenForRepo": 144,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,16 @@\n   public FSDataOutputStream append(final Path f, final int bufferSize, final Progressable progress) throws IOException {\n     LOG.debug(\n         \"AzureBlobFileSystem.append path: {} bufferSize: {}\",\n         f.toString(),\n         bufferSize);\n \n     Path qualifiedPath \u003d makeQualified(f);\n-    performAbfsAuthCheck(FsAction.WRITE, qualifiedPath);\n \n     try {\n       OutputStream outputStream \u003d abfsStore.openFileForWrite(qualifiedPath, false);\n       return new FSDataOutputStream(outputStream, statistics);\n     } catch(AzureBlobFileSystemException ex) {\n       checkException(f, ex);\n       return null;\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public FSDataOutputStream append(final Path f, final int bufferSize, final Progressable progress) throws IOException {\n    LOG.debug(\n        \"AzureBlobFileSystem.append path: {} bufferSize: {}\",\n        f.toString(),\n        bufferSize);\n\n    Path qualifiedPath \u003d makeQualified(f);\n\n    try {\n      OutputStream outputStream \u003d abfsStore.openFileForWrite(qualifiedPath, false);\n      return new FSDataOutputStream(outputStream, statistics);\n    } catch(AzureBlobFileSystemException ex) {\n      checkException(f, ex);\n      return null;\n    }\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/AzureBlobFileSystem.java",
      "extendedDetails": {}
    },
    "d5da9928c99073abdd27b66f794fe4312434ff96": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-15723. ABFS: Ranger Support.\nContributed by Yuan Gao.\n",
      "commitDate": "25/09/18 11:13 AM",
      "commitName": "d5da9928c99073abdd27b66f794fe4312434ff96",
      "commitAuthor": "Steve Loughran",
      "commitDateOld": "19/09/18 3:56 PM",
      "commitNameOld": "8e831ba458ab5ebe9c919c76d66615bbef63f82e",
      "commitAuthorOld": "Sean Mackrory",
      "daysBetweenCommits": 5.8,
      "commitsBetweenForRepo": 30,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,14 +1,17 @@\n   public FSDataOutputStream append(final Path f, final int bufferSize, final Progressable progress) throws IOException {\n     LOG.debug(\n         \"AzureBlobFileSystem.append path: {} bufferSize: {}\",\n         f.toString(),\n         bufferSize);\n \n+    Path qualifiedPath \u003d makeQualified(f);\n+    performAbfsAuthCheck(FsAction.WRITE, qualifiedPath);\n+\n     try {\n-      OutputStream outputStream \u003d abfsStore.openFileForWrite(makeQualified(f), false);\n+      OutputStream outputStream \u003d abfsStore.openFileForWrite(qualifiedPath, false);\n       return new FSDataOutputStream(outputStream, statistics);\n     } catch(AzureBlobFileSystemException ex) {\n       checkException(f, ex);\n       return null;\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public FSDataOutputStream append(final Path f, final int bufferSize, final Progressable progress) throws IOException {\n    LOG.debug(\n        \"AzureBlobFileSystem.append path: {} bufferSize: {}\",\n        f.toString(),\n        bufferSize);\n\n    Path qualifiedPath \u003d makeQualified(f);\n    performAbfsAuthCheck(FsAction.WRITE, qualifiedPath);\n\n    try {\n      OutputStream outputStream \u003d abfsStore.openFileForWrite(qualifiedPath, false);\n      return new FSDataOutputStream(outputStream, statistics);\n    } catch(AzureBlobFileSystemException ex) {\n      checkException(f, ex);\n      return null;\n    }\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/AzureBlobFileSystem.java",
      "extendedDetails": {}
    },
    "ce03a93f78c4d97ccb48a3906fcd77ad0ac756be": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-15446. ABFS: tune imports \u0026 javadocs; stabilise tests.\nContributed by Steve Loughran and Da Zhou.\n",
      "commitDate": "17/09/18 12:54 PM",
      "commitName": "ce03a93f78c4d97ccb48a3906fcd77ad0ac756be",
      "commitAuthor": "Thomas Marquardt",
      "commitDateOld": "17/09/18 12:54 PM",
      "commitNameOld": "a271fd0eca75cef8b8ba940cdac8ad4fd21b4462",
      "commitAuthorOld": "Steve Loughran",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,14 +1,14 @@\n   public FSDataOutputStream append(final Path f, final int bufferSize, final Progressable progress) throws IOException {\n-    this.LOG.debug(\n+    LOG.debug(\n         \"AzureBlobFileSystem.append path: {} bufferSize: {}\",\n         f.toString(),\n         bufferSize);\n \n     try {\n       OutputStream outputStream \u003d abfsStore.openFileForWrite(makeQualified(f), false);\n       return new FSDataOutputStream(outputStream, statistics);\n     } catch(AzureBlobFileSystemException ex) {\n       checkException(f, ex);\n       return null;\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public FSDataOutputStream append(final Path f, final int bufferSize, final Progressable progress) throws IOException {\n    LOG.debug(\n        \"AzureBlobFileSystem.append path: {} bufferSize: {}\",\n        f.toString(),\n        bufferSize);\n\n    try {\n      OutputStream outputStream \u003d abfsStore.openFileForWrite(makeQualified(f), false);\n      return new FSDataOutputStream(outputStream, statistics);\n    } catch(AzureBlobFileSystemException ex) {\n      checkException(f, ex);\n      return null;\n    }\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/AzureBlobFileSystem.java",
      "extendedDetails": {}
    },
    "a271fd0eca75cef8b8ba940cdac8ad4fd21b4462": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-15560. ABFS: removed dependency injection and unnecessary dependencies.\nContributed by Da Zhou.\n",
      "commitDate": "17/09/18 12:54 PM",
      "commitName": "a271fd0eca75cef8b8ba940cdac8ad4fd21b4462",
      "commitAuthor": "Steve Loughran",
      "commitDateOld": "17/09/18 12:54 PM",
      "commitNameOld": "f044deedbbfee0812316d587139cb828f27172e9",
      "commitAuthorOld": "Steve Loughran",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,14 +1,14 @@\n   public FSDataOutputStream append(final Path f, final int bufferSize, final Progressable progress) throws IOException {\n     this.LOG.debug(\n         \"AzureBlobFileSystem.append path: {} bufferSize: {}\",\n         f.toString(),\n         bufferSize);\n \n     try {\n-      OutputStream outputStream \u003d abfsHttpService.openFileForWrite(this, makeQualified(f), false);\n+      OutputStream outputStream \u003d abfsStore.openFileForWrite(makeQualified(f), false);\n       return new FSDataOutputStream(outputStream, statistics);\n     } catch(AzureBlobFileSystemException ex) {\n       checkException(f, ex);\n       return null;\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public FSDataOutputStream append(final Path f, final int bufferSize, final Progressable progress) throws IOException {\n    this.LOG.debug(\n        \"AzureBlobFileSystem.append path: {} bufferSize: {}\",\n        f.toString(),\n        bufferSize);\n\n    try {\n      OutputStream outputStream \u003d abfsStore.openFileForWrite(makeQualified(f), false);\n      return new FSDataOutputStream(outputStream, statistics);\n    } catch(AzureBlobFileSystemException ex) {\n      checkException(f, ex);\n      return null;\n    }\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/AzureBlobFileSystem.java",
      "extendedDetails": {}
    },
    "f044deedbbfee0812316d587139cb828f27172e9": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-15407. HADOOP-15540. Support Windows Azure Storage - Blob file system \"ABFS\" in Hadoop: Core Commit.\n\nContributed by Shane Mainali, Thomas Marquardt, Zichen Sun, Georgi Chalakov, Esfandiar Manii, Amit Singh, Dana Kaban, Da Zhou, Junhua Gu, Saher Ahwal, Saurabh Pant, James Baker, Shaoyu Zhang, Lawrence Chen, Kevin Chen and Steve Loughran\n",
      "commitDate": "17/09/18 12:54 PM",
      "commitName": "f044deedbbfee0812316d587139cb828f27172e9",
      "commitAuthor": "Steve Loughran",
      "diff": "@@ -0,0 +1,14 @@\n+  public FSDataOutputStream append(final Path f, final int bufferSize, final Progressable progress) throws IOException {\n+    this.LOG.debug(\n+        \"AzureBlobFileSystem.append path: {} bufferSize: {}\",\n+        f.toString(),\n+        bufferSize);\n+\n+    try {\n+      OutputStream outputStream \u003d abfsHttpService.openFileForWrite(this, makeQualified(f), false);\n+      return new FSDataOutputStream(outputStream, statistics);\n+    } catch(AzureBlobFileSystemException ex) {\n+      checkException(f, ex);\n+      return null;\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public FSDataOutputStream append(final Path f, final int bufferSize, final Progressable progress) throws IOException {\n    this.LOG.debug(\n        \"AzureBlobFileSystem.append path: {} bufferSize: {}\",\n        f.toString(),\n        bufferSize);\n\n    try {\n      OutputStream outputStream \u003d abfsHttpService.openFileForWrite(this, makeQualified(f), false);\n      return new FSDataOutputStream(outputStream, statistics);\n    } catch(AzureBlobFileSystemException ex) {\n      checkException(f, ex);\n      return null;\n    }\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/AzureBlobFileSystem.java"
    }
  }
}