{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "CosNFileSystem.java",
  "functionName": "createDefaultStore",
  "functionId": "createDefaultStore___conf-Configuration",
  "sourceFilePath": "hadoop-cloud-storage-project/hadoop-cos/src/main/java/org/apache/hadoop/fs/cosn/CosNFileSystem.java",
  "functionStartLine": 142,
  "functionEndLine": 163,
  "numCommitsSeen": 1,
  "timeTaken": 345,
  "changeHistory": [
    "8a9ede5cff816b66afc37e7c9d2b33aee48795d2"
  ],
  "changeHistoryShort": {
    "8a9ede5cff816b66afc37e7c9d2b33aee48795d2": "Yintroduced"
  },
  "changeHistoryDetails": {
    "8a9ede5cff816b66afc37e7c9d2b33aee48795d2": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-15616. Incorporate Tencent Cloud COS File System Implementation. Contributed by Yang Yu.\n",
      "commitDate": "27/09/19 1:53 AM",
      "commitName": "8a9ede5cff816b66afc37e7c9d2b33aee48795d2",
      "commitAuthor": "Sammi Chen",
      "diff": "@@ -0,0 +1,22 @@\n+  private static NativeFileSystemStore createDefaultStore(Configuration conf) {\n+    NativeFileSystemStore store \u003d new CosNativeFileSystemStore();\n+    RetryPolicy basePolicy \u003d RetryPolicies.retryUpToMaximumCountWithFixedSleep(\n+        conf.getInt(CosNConfigKeys.COSN_MAX_RETRIES_KEY,\n+            CosNConfigKeys.DEFAULT_MAX_RETRIES),\n+        conf.getLong(CosNConfigKeys.COSN_RETRY_INTERVAL_KEY,\n+            CosNConfigKeys.DEFAULT_RETRY_INTERVAL),\n+        TimeUnit.SECONDS);\n+    Map\u003cClass\u003c? extends Exception\u003e, RetryPolicy\u003e exceptionToPolicyMap \u003d\n+        new HashMap\u003c\u003e();\n+\n+    exceptionToPolicyMap.put(IOException.class, basePolicy);\n+    RetryPolicy methodPolicy \u003d RetryPolicies.retryByException(\n+        RetryPolicies.TRY_ONCE_THEN_FAIL,\n+        exceptionToPolicyMap);\n+    Map\u003cString, RetryPolicy\u003e methodNameToPolicyMap \u003d new HashMap\u003c\u003e();\n+    methodNameToPolicyMap.put(\"storeFile\", methodPolicy);\n+    methodNameToPolicyMap.put(\"rename\", methodPolicy);\n+\n+    return (NativeFileSystemStore) RetryProxy.create(\n+        NativeFileSystemStore.class, store, methodNameToPolicyMap);\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private static NativeFileSystemStore createDefaultStore(Configuration conf) {\n    NativeFileSystemStore store \u003d new CosNativeFileSystemStore();\n    RetryPolicy basePolicy \u003d RetryPolicies.retryUpToMaximumCountWithFixedSleep(\n        conf.getInt(CosNConfigKeys.COSN_MAX_RETRIES_KEY,\n            CosNConfigKeys.DEFAULT_MAX_RETRIES),\n        conf.getLong(CosNConfigKeys.COSN_RETRY_INTERVAL_KEY,\n            CosNConfigKeys.DEFAULT_RETRY_INTERVAL),\n        TimeUnit.SECONDS);\n    Map\u003cClass\u003c? extends Exception\u003e, RetryPolicy\u003e exceptionToPolicyMap \u003d\n        new HashMap\u003c\u003e();\n\n    exceptionToPolicyMap.put(IOException.class, basePolicy);\n    RetryPolicy methodPolicy \u003d RetryPolicies.retryByException(\n        RetryPolicies.TRY_ONCE_THEN_FAIL,\n        exceptionToPolicyMap);\n    Map\u003cString, RetryPolicy\u003e methodNameToPolicyMap \u003d new HashMap\u003c\u003e();\n    methodNameToPolicyMap.put(\"storeFile\", methodPolicy);\n    methodNameToPolicyMap.put(\"rename\", methodPolicy);\n\n    return (NativeFileSystemStore) RetryProxy.create(\n        NativeFileSystemStore.class, store, methodNameToPolicyMap);\n  }",
      "path": "hadoop-cloud-storage-project/hadoop-cos/src/main/java/org/apache/hadoop/fs/cosn/CosNFileSystem.java"
    }
  }
}