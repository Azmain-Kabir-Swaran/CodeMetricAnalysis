{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "Log4jPropertyHelper.java",
  "functionName": "updateLog4jConfiguration",
  "functionId": "updateLog4jConfiguration___targetClass-Class__?____log4jPath-String",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-applications/hadoop-yarn-applications-distributedshell/src/main/java/org/apache/hadoop/yarn/applications/distributedshell/Log4jPropertyHelper.java",
  "functionStartLine": 33,
  "functionEndLine": 54,
  "numCommitsSeen": 1,
  "timeTaken": 827,
  "changeHistory": [
    "33a8234040959ecd0d0202162e1b18c990effabe"
  ],
  "changeHistoryShort": {
    "33a8234040959ecd0d0202162e1b18c990effabe": "Yintroduced"
  },
  "changeHistoryDetails": {
    "33a8234040959ecd0d0202162e1b18c990effabe": {
      "type": "Yintroduced",
      "commitMessage": "YARN-1320. Fixed Distributed Shell application to respect custom log4j properties file. Contributed by Xuan Gong.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1544364 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "21/11/13 3:16 PM",
      "commitName": "33a8234040959ecd0d0202162e1b18c990effabe",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "diff": "@@ -0,0 +1,22 @@\n+  public static void updateLog4jConfiguration(Class\u003c?\u003e targetClass,\n+      String log4jPath) throws Exception {\n+    Properties customProperties \u003d new Properties();\n+    FileInputStream fs \u003d null;\n+    InputStream is \u003d null;\n+    try {\n+      fs \u003d new FileInputStream(log4jPath);\n+      is \u003d targetClass.getResourceAsStream(\"/log4j.properties\");\n+      customProperties.load(fs);\n+      Properties originalProperties \u003d new Properties();\n+      originalProperties.load(is);\n+      for (Entry\u003cObject, Object\u003e entry : customProperties.entrySet()) {\n+        originalProperties.setProperty(entry.getKey().toString(), entry\n+            .getValue().toString());\n+      }\n+      LogManager.resetConfiguration();\n+      PropertyConfigurator.configure(originalProperties);\n+    }finally {\n+      IOUtils.closeQuietly(is);\n+      IOUtils.closeQuietly(fs);\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public static void updateLog4jConfiguration(Class\u003c?\u003e targetClass,\n      String log4jPath) throws Exception {\n    Properties customProperties \u003d new Properties();\n    FileInputStream fs \u003d null;\n    InputStream is \u003d null;\n    try {\n      fs \u003d new FileInputStream(log4jPath);\n      is \u003d targetClass.getResourceAsStream(\"/log4j.properties\");\n      customProperties.load(fs);\n      Properties originalProperties \u003d new Properties();\n      originalProperties.load(is);\n      for (Entry\u003cObject, Object\u003e entry : customProperties.entrySet()) {\n        originalProperties.setProperty(entry.getKey().toString(), entry\n            .getValue().toString());\n      }\n      LogManager.resetConfiguration();\n      PropertyConfigurator.configure(originalProperties);\n    }finally {\n      IOUtils.closeQuietly(is);\n      IOUtils.closeQuietly(fs);\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-applications/hadoop-yarn-applications-distributedshell/src/main/java/org/apache/hadoop/yarn/applications/distributedshell/Log4jPropertyHelper.java"
    }
  }
}