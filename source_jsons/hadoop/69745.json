{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "SharedKeyCredentials.java",
  "functionName": "signRequest",
  "functionId": "signRequest___connection-HttpURLConnection__contentLength-long(modifiers-final)",
  "sourceFilePath": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/SharedKeyCredentials.java",
  "functionStartLine": 83,
  "functionEndLine": 98,
  "numCommitsSeen": 4,
  "timeTaken": 898,
  "changeHistory": [
    "65f60e56b082faf92e1cd3daee2569d8fc669c67",
    "f044deedbbfee0812316d587139cb828f27172e9"
  ],
  "changeHistoryShort": {
    "65f60e56b082faf92e1cd3daee2569d8fc669c67": "Ybodychange",
    "f044deedbbfee0812316d587139cb828f27172e9": "Yintroduced"
  },
  "changeHistoryDetails": {
    "65f60e56b082faf92e1cd3daee2569d8fc669c67": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-16068. ABFS Authentication and Delegation Token plugins to optionally be bound to specific URI of the store.\n\nContributed by Steve Loughran.\n",
      "commitDate": "28/02/19 6:22 AM",
      "commitName": "65f60e56b082faf92e1cd3daee2569d8fc669c67",
      "commitAuthor": "Steve Loughran",
      "commitDateOld": "17/09/18 12:54 PM",
      "commitNameOld": "b4c23043d38325aad8af4488caca115eae789f07",
      "commitAuthorOld": "Thomas Marquardt",
      "daysBetweenCommits": 163.77,
      "commitsBetweenForRepo": 1279,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,11 +1,16 @@\n   public void signRequest(HttpURLConnection connection, final long contentLength) throws UnsupportedEncodingException {\n \n-    connection.setRequestProperty(HttpHeaderConfigurations.X_MS_DATE, getGMTTime());\n+    String gmtTime \u003d getGMTTime();\n+    connection.setRequestProperty(HttpHeaderConfigurations.X_MS_DATE, gmtTime);\n \n     final String stringToSign \u003d canonicalize(connection, accountName, contentLength);\n \n     final String computedBase64Signature \u003d computeHmac256(stringToSign);\n \n+    String signature \u003d String.format(\"%s %s:%s\", \"SharedKey\", accountName,\n+        computedBase64Signature);\n     connection.setRequestProperty(HttpHeaderConfigurations.AUTHORIZATION,\n-        String.format(\"%s %s:%s\", \"SharedKey\", accountName, computedBase64Signature));\n+        signature);\n+    LOG.debug(\"Signing request with timestamp of {} and signature {}\",\n+        gmtTime, signature);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void signRequest(HttpURLConnection connection, final long contentLength) throws UnsupportedEncodingException {\n\n    String gmtTime \u003d getGMTTime();\n    connection.setRequestProperty(HttpHeaderConfigurations.X_MS_DATE, gmtTime);\n\n    final String stringToSign \u003d canonicalize(connection, accountName, contentLength);\n\n    final String computedBase64Signature \u003d computeHmac256(stringToSign);\n\n    String signature \u003d String.format(\"%s %s:%s\", \"SharedKey\", accountName,\n        computedBase64Signature);\n    connection.setRequestProperty(HttpHeaderConfigurations.AUTHORIZATION,\n        signature);\n    LOG.debug(\"Signing request with timestamp of {} and signature {}\",\n        gmtTime, signature);\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/SharedKeyCredentials.java",
      "extendedDetails": {}
    },
    "f044deedbbfee0812316d587139cb828f27172e9": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-15407. HADOOP-15540. Support Windows Azure Storage - Blob file system \"ABFS\" in Hadoop: Core Commit.\n\nContributed by Shane Mainali, Thomas Marquardt, Zichen Sun, Georgi Chalakov, Esfandiar Manii, Amit Singh, Dana Kaban, Da Zhou, Junhua Gu, Saher Ahwal, Saurabh Pant, James Baker, Shaoyu Zhang, Lawrence Chen, Kevin Chen and Steve Loughran\n",
      "commitDate": "17/09/18 12:54 PM",
      "commitName": "f044deedbbfee0812316d587139cb828f27172e9",
      "commitAuthor": "Steve Loughran",
      "diff": "@@ -0,0 +1,11 @@\n+  public void signRequest(HttpURLConnection connection, final long contentLength) throws UnsupportedEncodingException {\n+\n+    connection.setRequestProperty(HttpHeaderConfigurations.X_MS_DATE, getGMTTime());\n+\n+    final String stringToSign \u003d canonicalize(connection, accountName, contentLength);\n+\n+    final String computedBase64Signature \u003d computeHmac256(stringToSign);\n+\n+    connection.setRequestProperty(HttpHeaderConfigurations.AUTHORIZATION,\n+        String.format(\"%s %s:%s\", \"SharedKey\", accountName, computedBase64Signature));\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public void signRequest(HttpURLConnection connection, final long contentLength) throws UnsupportedEncodingException {\n\n    connection.setRequestProperty(HttpHeaderConfigurations.X_MS_DATE, getGMTTime());\n\n    final String stringToSign \u003d canonicalize(connection, accountName, contentLength);\n\n    final String computedBase64Signature \u003d computeHmac256(stringToSign);\n\n    connection.setRequestProperty(HttpHeaderConfigurations.AUTHORIZATION,\n        String.format(\"%s %s:%s\", \"SharedKey\", accountName, computedBase64Signature));\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/SharedKeyCredentials.java"
    }
  }
}