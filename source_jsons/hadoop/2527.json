{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "PBHelperClient.java",
  "functionName": "convertEditsResponse",
  "functionId": "convertEditsResponse___el-EventBatchList",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/protocolPB/PBHelperClient.java",
  "functionStartLine": 2885,
  "functionEndLine": 3009,
  "numCommitsSeen": 348,
  "timeTaken": 7480,
  "changeHistory": [
    "bf3d591f0cb0fedeab5d89cc8d2270d3b9a70313",
    "06022b8fdc40e50eaac63758246353058e8cfa6d",
    "979c9ca2ca89e99dc7165abfa29c78d66de43d9a",
    "2848db814a98b83e7546f65a2751e56fb5b2dbe0",
    "6e13fc62e1f284f22fd0089f06ce281198bc7c2a",
    "75a326aaff8c92349701d9b3473c3070b8c2be44",
    "6104520369045dfaa4b543cbad21236ed322249b",
    "faa4455be512e070fa420084be8d1be5c72f3b08"
  ],
  "changeHistoryShort": {
    "bf3d591f0cb0fedeab5d89cc8d2270d3b9a70313": "Ybodychange",
    "06022b8fdc40e50eaac63758246353058e8cfa6d": "Ymovefromfile",
    "979c9ca2ca89e99dc7165abfa29c78d66de43d9a": "Ybodychange",
    "2848db814a98b83e7546f65a2751e56fb5b2dbe0": "Ybodychange",
    "6e13fc62e1f284f22fd0089f06ce281198bc7c2a": "Ybodychange",
    "75a326aaff8c92349701d9b3473c3070b8c2be44": "Ymultichange(Yparameterchange,Ybodychange)",
    "6104520369045dfaa4b543cbad21236ed322249b": "Ybodychange",
    "faa4455be512e070fa420084be8d1be5c72f3b08": "Yintroduced"
  },
  "changeHistoryDetails": {
    "bf3d591f0cb0fedeab5d89cc8d2270d3b9a70313": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-13956. iNotify should include information to identify a file as either replicated or erasure coded. Contributed by Hrishikesh Gadre.\n\nSigned-off-by: Wei-Chiu Chuang \u003cweichiu@apache.org\u003e\n",
      "commitDate": "10/10/18 10:23 AM",
      "commitName": "bf3d591f0cb0fedeab5d89cc8d2270d3b9a70313",
      "commitAuthor": "Hrishikesh Gadre",
      "commitDateOld": "12/08/18 3:06 AM",
      "commitNameOld": "39ed3a66dbb01383ed16b141183fc48bfd2e613d",
      "commitAuthorOld": "Uma Maheswara Rao G",
      "daysBetweenCommits": 59.3,
      "commitsBetweenForRepo": 512,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,121 +1,125 @@\n   public static GetEditsFromTxidResponseProto convertEditsResponse(\n       EventBatchList el) {\n     InotifyProtos.EventsListProto.Builder builder \u003d\n         InotifyProtos.EventsListProto.newBuilder();\n     for (EventBatch b : el.getBatches()) {\n       List\u003cInotifyProtos.EventProto\u003e events \u003d Lists.newArrayList();\n       for (Event e : b.getEvents()) {\n         switch (e.getEventType()) {\n         case CLOSE:\n           Event.CloseEvent ce \u003d (Event.CloseEvent) e;\n           events.add(InotifyProtos.EventProto.newBuilder()\n               .setType(InotifyProtos.EventType.EVENT_CLOSE)\n               .setContents(\n                   InotifyProtos.CloseEventProto.newBuilder()\n                       .setPath(ce.getPath())\n                       .setFileSize(ce.getFileSize())\n                       .setTimestamp(ce.getTimestamp()).build().toByteString()\n               ).build());\n           break;\n         case CREATE:\n           Event.CreateEvent ce2 \u003d (Event.CreateEvent) e;\n+          InotifyProtos.CreateEventProto.Builder pB \u003d\n+                  (InotifyProtos.CreateEventProto.newBuilder());\n+          pB.setType(createTypeConvert(ce2.getiNodeType()))\n+             .setPath(ce2.getPath())\n+             .setCtime(ce2.getCtime())\n+             .setOwnerName(ce2.getOwnerName())\n+             .setGroupName(ce2.getGroupName())\n+             .setPerms(convert(ce2.getPerms()))\n+             .setReplication(ce2.getReplication())\n+             .setSymlinkTarget(ce2.getSymlinkTarget() \u003d\u003d null ?\n+                        \"\" : ce2.getSymlinkTarget())\n+             .setDefaultBlockSize(ce2.getDefaultBlockSize())\n+             .setOverwrite(ce2.getOverwrite());\n+          if (ce2.isErasureCoded().isPresent()) {\n+            pB.setErasureCoded(ce2.isErasureCoded().get());\n+          }\n           events.add(InotifyProtos.EventProto.newBuilder()\n               .setType(InotifyProtos.EventType.EVENT_CREATE)\n-              .setContents(\n-                  InotifyProtos.CreateEventProto.newBuilder()\n-                      .setType(createTypeConvert(ce2.getiNodeType()))\n-                      .setPath(ce2.getPath())\n-                      .setCtime(ce2.getCtime())\n-                      .setOwnerName(ce2.getOwnerName())\n-                      .setGroupName(ce2.getGroupName())\n-                      .setPerms(convert(ce2.getPerms()))\n-                      .setReplication(ce2.getReplication())\n-                      .setSymlinkTarget(ce2.getSymlinkTarget() \u003d\u003d null ?\n-                          \"\" : ce2.getSymlinkTarget())\n-                      .setDefaultBlockSize(ce2.getDefaultBlockSize())\n-                      .setOverwrite(ce2.getOverwrite()).build().toByteString()\n-              ).build());\n+              .setContents(pB.build().toByteString())\n+              .build());\n           break;\n         case METADATA:\n           Event.MetadataUpdateEvent me \u003d (Event.MetadataUpdateEvent) e;\n           InotifyProtos.MetadataUpdateEventProto.Builder metaB \u003d\n               InotifyProtos.MetadataUpdateEventProto.newBuilder()\n                   .setPath(me.getPath())\n                   .setType(metadataUpdateTypeConvert(me.getMetadataType()))\n                   .setMtime(me.getMtime())\n                   .setAtime(me.getAtime())\n                   .setReplication(me.getReplication())\n                   .setOwnerName(me.getOwnerName() \u003d\u003d null ? \"\" :\n                       me.getOwnerName())\n                   .setGroupName(me.getGroupName() \u003d\u003d null ? \"\" :\n                       me.getGroupName())\n                   .addAllAcls(me.getAcls() \u003d\u003d null ?\n                       Lists.\u003cAclEntryProto\u003enewArrayList() :\n                       convertAclEntryProto(me.getAcls()))\n                   .addAllXAttrs(me.getxAttrs() \u003d\u003d null ?\n                       Lists.\u003cXAttrProto\u003enewArrayList() :\n                       convertXAttrProto(me.getxAttrs()))\n                   .setXAttrsRemoved(me.isxAttrsRemoved());\n           if (me.getPerms() !\u003d null) {\n             metaB.setPerms(convert(me.getPerms()));\n           }\n           events.add(InotifyProtos.EventProto.newBuilder()\n               .setType(InotifyProtos.EventType.EVENT_METADATA)\n               .setContents(metaB.build().toByteString())\n               .build());\n           break;\n         case RENAME:\n           Event.RenameEvent re \u003d (Event.RenameEvent) e;\n           events.add(InotifyProtos.EventProto.newBuilder()\n               .setType(InotifyProtos.EventType.EVENT_RENAME)\n               .setContents(\n                   InotifyProtos.RenameEventProto.newBuilder()\n                       .setSrcPath(re.getSrcPath())\n                       .setDestPath(re.getDstPath())\n                       .setTimestamp(re.getTimestamp()).build().toByteString()\n               ).build());\n           break;\n         case APPEND:\n           Event.AppendEvent re2 \u003d (Event.AppendEvent) e;\n           events.add(InotifyProtos.EventProto.newBuilder()\n               .setType(InotifyProtos.EventType.EVENT_APPEND)\n               .setContents(InotifyProtos.AppendEventProto.newBuilder()\n                   .setPath(re2.getPath())\n                   .setNewBlock(re2.toNewBlock()).build().toByteString())\n               .build());\n           break;\n         case UNLINK:\n           Event.UnlinkEvent ue \u003d (Event.UnlinkEvent) e;\n           events.add(InotifyProtos.EventProto.newBuilder()\n               .setType(InotifyProtos.EventType.EVENT_UNLINK)\n               .setContents(\n                   InotifyProtos.UnlinkEventProto.newBuilder()\n                       .setPath(ue.getPath())\n                       .setTimestamp(ue.getTimestamp()).build().toByteString()\n               ).build());\n           break;\n         case TRUNCATE:\n           Event.TruncateEvent te \u003d (Event.TruncateEvent) e;\n           events.add(InotifyProtos.EventProto.newBuilder()\n               .setType(InotifyProtos.EventType.EVENT_TRUNCATE)\n               .setContents(\n                   InotifyProtos.TruncateEventProto.newBuilder()\n                       .setPath(te.getPath())\n                       .setFileSize(te.getFileSize())\n                       .setTimestamp(te.getTimestamp()).build().toByteString()\n               ).build());\n           break;\n         default:\n           throw new RuntimeException(\"Unexpected inotify event: \" + e);\n         }\n       }\n       builder.addBatch(InotifyProtos.EventBatchProto.newBuilder().\n           setTxid(b.getTxid()).\n           addAllEvents(events));\n     }\n     builder.setFirstTxid(el.getFirstTxid());\n     builder.setLastTxid(el.getLastTxid());\n     builder.setSyncTxid(el.getSyncTxid());\n     return GetEditsFromTxidResponseProto.newBuilder().setEventsList(\n         builder.build()).build();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static GetEditsFromTxidResponseProto convertEditsResponse(\n      EventBatchList el) {\n    InotifyProtos.EventsListProto.Builder builder \u003d\n        InotifyProtos.EventsListProto.newBuilder();\n    for (EventBatch b : el.getBatches()) {\n      List\u003cInotifyProtos.EventProto\u003e events \u003d Lists.newArrayList();\n      for (Event e : b.getEvents()) {\n        switch (e.getEventType()) {\n        case CLOSE:\n          Event.CloseEvent ce \u003d (Event.CloseEvent) e;\n          events.add(InotifyProtos.EventProto.newBuilder()\n              .setType(InotifyProtos.EventType.EVENT_CLOSE)\n              .setContents(\n                  InotifyProtos.CloseEventProto.newBuilder()\n                      .setPath(ce.getPath())\n                      .setFileSize(ce.getFileSize())\n                      .setTimestamp(ce.getTimestamp()).build().toByteString()\n              ).build());\n          break;\n        case CREATE:\n          Event.CreateEvent ce2 \u003d (Event.CreateEvent) e;\n          InotifyProtos.CreateEventProto.Builder pB \u003d\n                  (InotifyProtos.CreateEventProto.newBuilder());\n          pB.setType(createTypeConvert(ce2.getiNodeType()))\n             .setPath(ce2.getPath())\n             .setCtime(ce2.getCtime())\n             .setOwnerName(ce2.getOwnerName())\n             .setGroupName(ce2.getGroupName())\n             .setPerms(convert(ce2.getPerms()))\n             .setReplication(ce2.getReplication())\n             .setSymlinkTarget(ce2.getSymlinkTarget() \u003d\u003d null ?\n                        \"\" : ce2.getSymlinkTarget())\n             .setDefaultBlockSize(ce2.getDefaultBlockSize())\n             .setOverwrite(ce2.getOverwrite());\n          if (ce2.isErasureCoded().isPresent()) {\n            pB.setErasureCoded(ce2.isErasureCoded().get());\n          }\n          events.add(InotifyProtos.EventProto.newBuilder()\n              .setType(InotifyProtos.EventType.EVENT_CREATE)\n              .setContents(pB.build().toByteString())\n              .build());\n          break;\n        case METADATA:\n          Event.MetadataUpdateEvent me \u003d (Event.MetadataUpdateEvent) e;\n          InotifyProtos.MetadataUpdateEventProto.Builder metaB \u003d\n              InotifyProtos.MetadataUpdateEventProto.newBuilder()\n                  .setPath(me.getPath())\n                  .setType(metadataUpdateTypeConvert(me.getMetadataType()))\n                  .setMtime(me.getMtime())\n                  .setAtime(me.getAtime())\n                  .setReplication(me.getReplication())\n                  .setOwnerName(me.getOwnerName() \u003d\u003d null ? \"\" :\n                      me.getOwnerName())\n                  .setGroupName(me.getGroupName() \u003d\u003d null ? \"\" :\n                      me.getGroupName())\n                  .addAllAcls(me.getAcls() \u003d\u003d null ?\n                      Lists.\u003cAclEntryProto\u003enewArrayList() :\n                      convertAclEntryProto(me.getAcls()))\n                  .addAllXAttrs(me.getxAttrs() \u003d\u003d null ?\n                      Lists.\u003cXAttrProto\u003enewArrayList() :\n                      convertXAttrProto(me.getxAttrs()))\n                  .setXAttrsRemoved(me.isxAttrsRemoved());\n          if (me.getPerms() !\u003d null) {\n            metaB.setPerms(convert(me.getPerms()));\n          }\n          events.add(InotifyProtos.EventProto.newBuilder()\n              .setType(InotifyProtos.EventType.EVENT_METADATA)\n              .setContents(metaB.build().toByteString())\n              .build());\n          break;\n        case RENAME:\n          Event.RenameEvent re \u003d (Event.RenameEvent) e;\n          events.add(InotifyProtos.EventProto.newBuilder()\n              .setType(InotifyProtos.EventType.EVENT_RENAME)\n              .setContents(\n                  InotifyProtos.RenameEventProto.newBuilder()\n                      .setSrcPath(re.getSrcPath())\n                      .setDestPath(re.getDstPath())\n                      .setTimestamp(re.getTimestamp()).build().toByteString()\n              ).build());\n          break;\n        case APPEND:\n          Event.AppendEvent re2 \u003d (Event.AppendEvent) e;\n          events.add(InotifyProtos.EventProto.newBuilder()\n              .setType(InotifyProtos.EventType.EVENT_APPEND)\n              .setContents(InotifyProtos.AppendEventProto.newBuilder()\n                  .setPath(re2.getPath())\n                  .setNewBlock(re2.toNewBlock()).build().toByteString())\n              .build());\n          break;\n        case UNLINK:\n          Event.UnlinkEvent ue \u003d (Event.UnlinkEvent) e;\n          events.add(InotifyProtos.EventProto.newBuilder()\n              .setType(InotifyProtos.EventType.EVENT_UNLINK)\n              .setContents(\n                  InotifyProtos.UnlinkEventProto.newBuilder()\n                      .setPath(ue.getPath())\n                      .setTimestamp(ue.getTimestamp()).build().toByteString()\n              ).build());\n          break;\n        case TRUNCATE:\n          Event.TruncateEvent te \u003d (Event.TruncateEvent) e;\n          events.add(InotifyProtos.EventProto.newBuilder()\n              .setType(InotifyProtos.EventType.EVENT_TRUNCATE)\n              .setContents(\n                  InotifyProtos.TruncateEventProto.newBuilder()\n                      .setPath(te.getPath())\n                      .setFileSize(te.getFileSize())\n                      .setTimestamp(te.getTimestamp()).build().toByteString()\n              ).build());\n          break;\n        default:\n          throw new RuntimeException(\"Unexpected inotify event: \" + e);\n        }\n      }\n      builder.addBatch(InotifyProtos.EventBatchProto.newBuilder().\n          setTxid(b.getTxid()).\n          addAllEvents(events));\n    }\n    builder.setFirstTxid(el.getFirstTxid());\n    builder.setLastTxid(el.getLastTxid());\n    builder.setSyncTxid(el.getSyncTxid());\n    return GetEditsFromTxidResponseProto.newBuilder().setEventsList(\n        builder.build()).build();\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/protocolPB/PBHelperClient.java",
      "extendedDetails": {}
    },
    "06022b8fdc40e50eaac63758246353058e8cfa6d": {
      "type": "Ymovefromfile",
      "commitMessage": "HDFS-9111. Move hdfs-client protobuf convert methods from PBHelper to PBHelperClient. Contributed by Mingliang Liu.\n",
      "commitDate": "21/09/15 6:53 PM",
      "commitName": "06022b8fdc40e50eaac63758246353058e8cfa6d",
      "commitAuthor": "Haohui Mai",
      "commitDateOld": "21/09/15 5:51 PM",
      "commitNameOld": "8e01b0d97ac3d74b049a801dfa1cc6e77d8f680a",
      "commitAuthorOld": "Chris Douglas",
      "daysBetweenCommits": 0.04,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  public static GetEditsFromTxidResponseProto convertEditsResponse(EventBatchList el) {\n    InotifyProtos.EventsListProto.Builder builder \u003d\n        InotifyProtos.EventsListProto.newBuilder();\n    for (EventBatch b : el.getBatches()) {\n      List\u003cInotifyProtos.EventProto\u003e events \u003d Lists.newArrayList();\n      for (Event e : b.getEvents()) {\n        switch (e.getEventType()) {\n          case CLOSE:\n            Event.CloseEvent ce \u003d (Event.CloseEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_CLOSE)\n                .setContents(\n                    InotifyProtos.CloseEventProto.newBuilder()\n                        .setPath(ce.getPath())\n                        .setFileSize(ce.getFileSize())\n                        .setTimestamp(ce.getTimestamp()).build().toByteString()\n                ).build());\n            break;\n          case CREATE:\n            Event.CreateEvent ce2 \u003d (Event.CreateEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_CREATE)\n                .setContents(\n                    InotifyProtos.CreateEventProto.newBuilder()\n                        .setType(createTypeConvert(ce2.getiNodeType()))\n                        .setPath(ce2.getPath())\n                        .setCtime(ce2.getCtime())\n                        .setOwnerName(ce2.getOwnerName())\n                        .setGroupName(ce2.getGroupName())\n                        .setPerms(convert(ce2.getPerms()))\n                        .setReplication(ce2.getReplication())\n                        .setSymlinkTarget(ce2.getSymlinkTarget() \u003d\u003d null ?\n                            \"\" : ce2.getSymlinkTarget())\n                        .setDefaultBlockSize(ce2.getDefaultBlockSize())\n                        .setOverwrite(ce2.getOverwrite()).build().toByteString()\n                ).build());\n            break;\n          case METADATA:\n            Event.MetadataUpdateEvent me \u003d (Event.MetadataUpdateEvent) e;\n            InotifyProtos.MetadataUpdateEventProto.Builder metaB \u003d\n                InotifyProtos.MetadataUpdateEventProto.newBuilder()\n                    .setPath(me.getPath())\n                    .setType(metadataUpdateTypeConvert(me.getMetadataType()))\n                    .setMtime(me.getMtime())\n                    .setAtime(me.getAtime())\n                    .setReplication(me.getReplication())\n                    .setOwnerName(me.getOwnerName() \u003d\u003d null ? \"\" :\n                        me.getOwnerName())\n                    .setGroupName(me.getGroupName() \u003d\u003d null ? \"\" :\n                        me.getGroupName())\n                    .addAllAcls(me.getAcls() \u003d\u003d null ?\n                        Lists.\u003cAclEntryProto\u003enewArrayList() :\n                        convertAclEntryProto(me.getAcls()))\n                    .addAllXAttrs(me.getxAttrs() \u003d\u003d null ?\n                        Lists.\u003cXAttrProto\u003enewArrayList() :\n                        convertXAttrProto(me.getxAttrs()))\n                    .setXAttrsRemoved(me.isxAttrsRemoved());\n            if (me.getPerms() !\u003d null) {\n              metaB.setPerms(convert(me.getPerms()));\n            }\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_METADATA)\n                .setContents(metaB.build().toByteString())\n                .build());\n            break;\n          case RENAME:\n            Event.RenameEvent re \u003d (Event.RenameEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_RENAME)\n                .setContents(\n                    InotifyProtos.RenameEventProto.newBuilder()\n                        .setSrcPath(re.getSrcPath())\n                        .setDestPath(re.getDstPath())\n                        .setTimestamp(re.getTimestamp()).build().toByteString()\n                ).build());\n            break;\n          case APPEND:\n            Event.AppendEvent re2 \u003d (Event.AppendEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_APPEND)\n                .setContents(InotifyProtos.AppendEventProto.newBuilder()\n                    .setPath(re2.getPath())\n                    .setNewBlock(re2.toNewBlock()).build().toByteString())\n                .build());\n            break;\n          case UNLINK:\n            Event.UnlinkEvent ue \u003d (Event.UnlinkEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_UNLINK)\n                .setContents(\n                    InotifyProtos.UnlinkEventProto.newBuilder()\n                        .setPath(ue.getPath())\n                        .setTimestamp(ue.getTimestamp()).build().toByteString()\n                ).build());\n            break;\n          case TRUNCATE:\n            Event.TruncateEvent te \u003d (Event.TruncateEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_TRUNCATE)\n                .setContents(\n                    InotifyProtos.TruncateEventProto.newBuilder()\n                        .setPath(te.getPath())\n                        .setFileSize(te.getFileSize())\n                        .setTimestamp(te.getTimestamp()).build().toByteString()\n                ).build());\n            break;\n          default:\n            throw new RuntimeException(\"Unexpected inotify event: \" + e);\n        }\n      }\n      builder.addBatch(InotifyProtos.EventBatchProto.newBuilder().\n          setTxid(b.getTxid()).\n          addAllEvents(events));\n    }\n    builder.setFirstTxid(el.getFirstTxid());\n    builder.setLastTxid(el.getLastTxid());\n    builder.setSyncTxid(el.getSyncTxid());\n    return GetEditsFromTxidResponseProto.newBuilder().setEventsList(\n        builder.build()).build();\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/protocolPB/PBHelperClient.java",
      "extendedDetails": {
        "oldPath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/protocolPB/PBHelper.java",
        "newPath": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/protocolPB/PBHelperClient.java",
        "oldMethodName": "convertEditsResponse",
        "newMethodName": "convertEditsResponse"
      }
    },
    "979c9ca2ca89e99dc7165abfa29c78d66de43d9a": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-8742. Inotify: Support event for OP_TRUNCATE. Contributed by Surendra Singh Lilhore.\n",
      "commitDate": "14/07/15 12:42 PM",
      "commitName": "979c9ca2ca89e99dc7165abfa29c78d66de43d9a",
      "commitAuthor": "Akira Ajisaka",
      "commitDateOld": "12/06/15 11:17 AM",
      "commitNameOld": "12b5b06c063d93e6c683c9b6fac9a96912f59e59",
      "commitAuthorOld": "Colin Patrick Mccabe",
      "daysBetweenCommits": 32.06,
      "commitsBetweenForRepo": 208,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,109 +1,120 @@\n   public static GetEditsFromTxidResponseProto convertEditsResponse(EventBatchList el) {\n     InotifyProtos.EventsListProto.Builder builder \u003d\n         InotifyProtos.EventsListProto.newBuilder();\n     for (EventBatch b : el.getBatches()) {\n       List\u003cInotifyProtos.EventProto\u003e events \u003d Lists.newArrayList();\n       for (Event e : b.getEvents()) {\n         switch (e.getEventType()) {\n           case CLOSE:\n             Event.CloseEvent ce \u003d (Event.CloseEvent) e;\n             events.add(InotifyProtos.EventProto.newBuilder()\n                 .setType(InotifyProtos.EventType.EVENT_CLOSE)\n                 .setContents(\n                     InotifyProtos.CloseEventProto.newBuilder()\n                         .setPath(ce.getPath())\n                         .setFileSize(ce.getFileSize())\n                         .setTimestamp(ce.getTimestamp()).build().toByteString()\n                 ).build());\n             break;\n           case CREATE:\n             Event.CreateEvent ce2 \u003d (Event.CreateEvent) e;\n             events.add(InotifyProtos.EventProto.newBuilder()\n                 .setType(InotifyProtos.EventType.EVENT_CREATE)\n                 .setContents(\n                     InotifyProtos.CreateEventProto.newBuilder()\n                         .setType(createTypeConvert(ce2.getiNodeType()))\n                         .setPath(ce2.getPath())\n                         .setCtime(ce2.getCtime())\n                         .setOwnerName(ce2.getOwnerName())\n                         .setGroupName(ce2.getGroupName())\n                         .setPerms(convert(ce2.getPerms()))\n                         .setReplication(ce2.getReplication())\n                         .setSymlinkTarget(ce2.getSymlinkTarget() \u003d\u003d null ?\n                             \"\" : ce2.getSymlinkTarget())\n                         .setDefaultBlockSize(ce2.getDefaultBlockSize())\n                         .setOverwrite(ce2.getOverwrite()).build().toByteString()\n                 ).build());\n             break;\n           case METADATA:\n             Event.MetadataUpdateEvent me \u003d (Event.MetadataUpdateEvent) e;\n             InotifyProtos.MetadataUpdateEventProto.Builder metaB \u003d\n                 InotifyProtos.MetadataUpdateEventProto.newBuilder()\n                     .setPath(me.getPath())\n                     .setType(metadataUpdateTypeConvert(me.getMetadataType()))\n                     .setMtime(me.getMtime())\n                     .setAtime(me.getAtime())\n                     .setReplication(me.getReplication())\n                     .setOwnerName(me.getOwnerName() \u003d\u003d null ? \"\" :\n                         me.getOwnerName())\n                     .setGroupName(me.getGroupName() \u003d\u003d null ? \"\" :\n                         me.getGroupName())\n                     .addAllAcls(me.getAcls() \u003d\u003d null ?\n                         Lists.\u003cAclEntryProto\u003enewArrayList() :\n                         convertAclEntryProto(me.getAcls()))\n                     .addAllXAttrs(me.getxAttrs() \u003d\u003d null ?\n                         Lists.\u003cXAttrProto\u003enewArrayList() :\n                         convertXAttrProto(me.getxAttrs()))\n                     .setXAttrsRemoved(me.isxAttrsRemoved());\n             if (me.getPerms() !\u003d null) {\n               metaB.setPerms(convert(me.getPerms()));\n             }\n             events.add(InotifyProtos.EventProto.newBuilder()\n                 .setType(InotifyProtos.EventType.EVENT_METADATA)\n                 .setContents(metaB.build().toByteString())\n                 .build());\n             break;\n           case RENAME:\n             Event.RenameEvent re \u003d (Event.RenameEvent) e;\n             events.add(InotifyProtos.EventProto.newBuilder()\n                 .setType(InotifyProtos.EventType.EVENT_RENAME)\n                 .setContents(\n                     InotifyProtos.RenameEventProto.newBuilder()\n                         .setSrcPath(re.getSrcPath())\n                         .setDestPath(re.getDstPath())\n                         .setTimestamp(re.getTimestamp()).build().toByteString()\n                 ).build());\n             break;\n           case APPEND:\n             Event.AppendEvent re2 \u003d (Event.AppendEvent) e;\n             events.add(InotifyProtos.EventProto.newBuilder()\n                 .setType(InotifyProtos.EventType.EVENT_APPEND)\n                 .setContents(InotifyProtos.AppendEventProto.newBuilder()\n                     .setPath(re2.getPath())\n                     .setNewBlock(re2.toNewBlock()).build().toByteString())\n                 .build());\n             break;\n           case UNLINK:\n             Event.UnlinkEvent ue \u003d (Event.UnlinkEvent) e;\n             events.add(InotifyProtos.EventProto.newBuilder()\n                 .setType(InotifyProtos.EventType.EVENT_UNLINK)\n                 .setContents(\n                     InotifyProtos.UnlinkEventProto.newBuilder()\n                         .setPath(ue.getPath())\n                         .setTimestamp(ue.getTimestamp()).build().toByteString()\n                 ).build());\n             break;\n+          case TRUNCATE:\n+            Event.TruncateEvent te \u003d (Event.TruncateEvent) e;\n+            events.add(InotifyProtos.EventProto.newBuilder()\n+                .setType(InotifyProtos.EventType.EVENT_TRUNCATE)\n+                .setContents(\n+                    InotifyProtos.TruncateEventProto.newBuilder()\n+                        .setPath(te.getPath())\n+                        .setFileSize(te.getFileSize())\n+                        .setTimestamp(te.getTimestamp()).build().toByteString()\n+                ).build());\n+            break;\n           default:\n             throw new RuntimeException(\"Unexpected inotify event: \" + e);\n         }\n       }\n       builder.addBatch(InotifyProtos.EventBatchProto.newBuilder().\n           setTxid(b.getTxid()).\n           addAllEvents(events));\n     }\n     builder.setFirstTxid(el.getFirstTxid());\n     builder.setLastTxid(el.getLastTxid());\n     builder.setSyncTxid(el.getSyncTxid());\n     return GetEditsFromTxidResponseProto.newBuilder().setEventsList(\n         builder.build()).build();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static GetEditsFromTxidResponseProto convertEditsResponse(EventBatchList el) {\n    InotifyProtos.EventsListProto.Builder builder \u003d\n        InotifyProtos.EventsListProto.newBuilder();\n    for (EventBatch b : el.getBatches()) {\n      List\u003cInotifyProtos.EventProto\u003e events \u003d Lists.newArrayList();\n      for (Event e : b.getEvents()) {\n        switch (e.getEventType()) {\n          case CLOSE:\n            Event.CloseEvent ce \u003d (Event.CloseEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_CLOSE)\n                .setContents(\n                    InotifyProtos.CloseEventProto.newBuilder()\n                        .setPath(ce.getPath())\n                        .setFileSize(ce.getFileSize())\n                        .setTimestamp(ce.getTimestamp()).build().toByteString()\n                ).build());\n            break;\n          case CREATE:\n            Event.CreateEvent ce2 \u003d (Event.CreateEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_CREATE)\n                .setContents(\n                    InotifyProtos.CreateEventProto.newBuilder()\n                        .setType(createTypeConvert(ce2.getiNodeType()))\n                        .setPath(ce2.getPath())\n                        .setCtime(ce2.getCtime())\n                        .setOwnerName(ce2.getOwnerName())\n                        .setGroupName(ce2.getGroupName())\n                        .setPerms(convert(ce2.getPerms()))\n                        .setReplication(ce2.getReplication())\n                        .setSymlinkTarget(ce2.getSymlinkTarget() \u003d\u003d null ?\n                            \"\" : ce2.getSymlinkTarget())\n                        .setDefaultBlockSize(ce2.getDefaultBlockSize())\n                        .setOverwrite(ce2.getOverwrite()).build().toByteString()\n                ).build());\n            break;\n          case METADATA:\n            Event.MetadataUpdateEvent me \u003d (Event.MetadataUpdateEvent) e;\n            InotifyProtos.MetadataUpdateEventProto.Builder metaB \u003d\n                InotifyProtos.MetadataUpdateEventProto.newBuilder()\n                    .setPath(me.getPath())\n                    .setType(metadataUpdateTypeConvert(me.getMetadataType()))\n                    .setMtime(me.getMtime())\n                    .setAtime(me.getAtime())\n                    .setReplication(me.getReplication())\n                    .setOwnerName(me.getOwnerName() \u003d\u003d null ? \"\" :\n                        me.getOwnerName())\n                    .setGroupName(me.getGroupName() \u003d\u003d null ? \"\" :\n                        me.getGroupName())\n                    .addAllAcls(me.getAcls() \u003d\u003d null ?\n                        Lists.\u003cAclEntryProto\u003enewArrayList() :\n                        convertAclEntryProto(me.getAcls()))\n                    .addAllXAttrs(me.getxAttrs() \u003d\u003d null ?\n                        Lists.\u003cXAttrProto\u003enewArrayList() :\n                        convertXAttrProto(me.getxAttrs()))\n                    .setXAttrsRemoved(me.isxAttrsRemoved());\n            if (me.getPerms() !\u003d null) {\n              metaB.setPerms(convert(me.getPerms()));\n            }\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_METADATA)\n                .setContents(metaB.build().toByteString())\n                .build());\n            break;\n          case RENAME:\n            Event.RenameEvent re \u003d (Event.RenameEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_RENAME)\n                .setContents(\n                    InotifyProtos.RenameEventProto.newBuilder()\n                        .setSrcPath(re.getSrcPath())\n                        .setDestPath(re.getDstPath())\n                        .setTimestamp(re.getTimestamp()).build().toByteString()\n                ).build());\n            break;\n          case APPEND:\n            Event.AppendEvent re2 \u003d (Event.AppendEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_APPEND)\n                .setContents(InotifyProtos.AppendEventProto.newBuilder()\n                    .setPath(re2.getPath())\n                    .setNewBlock(re2.toNewBlock()).build().toByteString())\n                .build());\n            break;\n          case UNLINK:\n            Event.UnlinkEvent ue \u003d (Event.UnlinkEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_UNLINK)\n                .setContents(\n                    InotifyProtos.UnlinkEventProto.newBuilder()\n                        .setPath(ue.getPath())\n                        .setTimestamp(ue.getTimestamp()).build().toByteString()\n                ).build());\n            break;\n          case TRUNCATE:\n            Event.TruncateEvent te \u003d (Event.TruncateEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_TRUNCATE)\n                .setContents(\n                    InotifyProtos.TruncateEventProto.newBuilder()\n                        .setPath(te.getPath())\n                        .setFileSize(te.getFileSize())\n                        .setTimestamp(te.getTimestamp()).build().toByteString()\n                ).build());\n            break;\n          default:\n            throw new RuntimeException(\"Unexpected inotify event: \" + e);\n        }\n      }\n      builder.addBatch(InotifyProtos.EventBatchProto.newBuilder().\n          setTxid(b.getTxid()).\n          addAllEvents(events));\n    }\n    builder.setFirstTxid(el.getFirstTxid());\n    builder.setLastTxid(el.getLastTxid());\n    builder.setSyncTxid(el.getSyncTxid());\n    return GetEditsFromTxidResponseProto.newBuilder().setEventsList(\n        builder.build()).build();\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/protocolPB/PBHelper.java",
      "extendedDetails": {}
    },
    "2848db814a98b83e7546f65a2751e56fb5b2dbe0": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-3689. Add support for variable length block. Contributed by Jing Zhao.\n",
      "commitDate": "27/01/15 12:58 PM",
      "commitName": "2848db814a98b83e7546f65a2751e56fb5b2dbe0",
      "commitAuthor": "Jing Zhao",
      "commitDateOld": "13/01/15 12:24 AM",
      "commitNameOld": "08ac06283a3e9bf0d49d873823aabd419b08e41f",
      "commitAuthorOld": "Konstantin V Shvachko",
      "daysBetweenCommits": 14.52,
      "commitsBetweenForRepo": 101,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,109 +1,109 @@\n   public static GetEditsFromTxidResponseProto convertEditsResponse(EventBatchList el) {\n     InotifyProtos.EventsListProto.Builder builder \u003d\n         InotifyProtos.EventsListProto.newBuilder();\n     for (EventBatch b : el.getBatches()) {\n       List\u003cInotifyProtos.EventProto\u003e events \u003d Lists.newArrayList();\n       for (Event e : b.getEvents()) {\n         switch (e.getEventType()) {\n           case CLOSE:\n             Event.CloseEvent ce \u003d (Event.CloseEvent) e;\n             events.add(InotifyProtos.EventProto.newBuilder()\n                 .setType(InotifyProtos.EventType.EVENT_CLOSE)\n                 .setContents(\n                     InotifyProtos.CloseEventProto.newBuilder()\n                         .setPath(ce.getPath())\n                         .setFileSize(ce.getFileSize())\n                         .setTimestamp(ce.getTimestamp()).build().toByteString()\n                 ).build());\n             break;\n           case CREATE:\n             Event.CreateEvent ce2 \u003d (Event.CreateEvent) e;\n             events.add(InotifyProtos.EventProto.newBuilder()\n                 .setType(InotifyProtos.EventType.EVENT_CREATE)\n                 .setContents(\n                     InotifyProtos.CreateEventProto.newBuilder()\n                         .setType(createTypeConvert(ce2.getiNodeType()))\n                         .setPath(ce2.getPath())\n                         .setCtime(ce2.getCtime())\n                         .setOwnerName(ce2.getOwnerName())\n                         .setGroupName(ce2.getGroupName())\n                         .setPerms(convert(ce2.getPerms()))\n                         .setReplication(ce2.getReplication())\n                         .setSymlinkTarget(ce2.getSymlinkTarget() \u003d\u003d null ?\n                             \"\" : ce2.getSymlinkTarget())\n                         .setDefaultBlockSize(ce2.getDefaultBlockSize())\n                         .setOverwrite(ce2.getOverwrite()).build().toByteString()\n                 ).build());\n             break;\n           case METADATA:\n             Event.MetadataUpdateEvent me \u003d (Event.MetadataUpdateEvent) e;\n             InotifyProtos.MetadataUpdateEventProto.Builder metaB \u003d\n                 InotifyProtos.MetadataUpdateEventProto.newBuilder()\n                     .setPath(me.getPath())\n                     .setType(metadataUpdateTypeConvert(me.getMetadataType()))\n                     .setMtime(me.getMtime())\n                     .setAtime(me.getAtime())\n                     .setReplication(me.getReplication())\n                     .setOwnerName(me.getOwnerName() \u003d\u003d null ? \"\" :\n                         me.getOwnerName())\n                     .setGroupName(me.getGroupName() \u003d\u003d null ? \"\" :\n                         me.getGroupName())\n                     .addAllAcls(me.getAcls() \u003d\u003d null ?\n                         Lists.\u003cAclEntryProto\u003enewArrayList() :\n                         convertAclEntryProto(me.getAcls()))\n                     .addAllXAttrs(me.getxAttrs() \u003d\u003d null ?\n                         Lists.\u003cXAttrProto\u003enewArrayList() :\n                         convertXAttrProto(me.getxAttrs()))\n                     .setXAttrsRemoved(me.isxAttrsRemoved());\n             if (me.getPerms() !\u003d null) {\n               metaB.setPerms(convert(me.getPerms()));\n             }\n             events.add(InotifyProtos.EventProto.newBuilder()\n                 .setType(InotifyProtos.EventType.EVENT_METADATA)\n                 .setContents(metaB.build().toByteString())\n                 .build());\n             break;\n           case RENAME:\n             Event.RenameEvent re \u003d (Event.RenameEvent) e;\n             events.add(InotifyProtos.EventProto.newBuilder()\n                 .setType(InotifyProtos.EventType.EVENT_RENAME)\n                 .setContents(\n                     InotifyProtos.RenameEventProto.newBuilder()\n                         .setSrcPath(re.getSrcPath())\n                         .setDestPath(re.getDstPath())\n                         .setTimestamp(re.getTimestamp()).build().toByteString()\n                 ).build());\n             break;\n           case APPEND:\n             Event.AppendEvent re2 \u003d (Event.AppendEvent) e;\n             events.add(InotifyProtos.EventProto.newBuilder()\n                 .setType(InotifyProtos.EventType.EVENT_APPEND)\n-                .setContents(\n-                    InotifyProtos.AppendEventProto.newBuilder()\n-                        .setPath(re2.getPath()).build().toByteString()\n-                ).build());\n+                .setContents(InotifyProtos.AppendEventProto.newBuilder()\n+                    .setPath(re2.getPath())\n+                    .setNewBlock(re2.toNewBlock()).build().toByteString())\n+                .build());\n             break;\n           case UNLINK:\n             Event.UnlinkEvent ue \u003d (Event.UnlinkEvent) e;\n             events.add(InotifyProtos.EventProto.newBuilder()\n                 .setType(InotifyProtos.EventType.EVENT_UNLINK)\n                 .setContents(\n                     InotifyProtos.UnlinkEventProto.newBuilder()\n                         .setPath(ue.getPath())\n                         .setTimestamp(ue.getTimestamp()).build().toByteString()\n                 ).build());\n             break;\n           default:\n             throw new RuntimeException(\"Unexpected inotify event: \" + e);\n         }\n       }\n       builder.addBatch(InotifyProtos.EventBatchProto.newBuilder().\n           setTxid(b.getTxid()).\n           addAllEvents(events));\n     }\n     builder.setFirstTxid(el.getFirstTxid());\n     builder.setLastTxid(el.getLastTxid());\n     builder.setSyncTxid(el.getSyncTxid());\n     return GetEditsFromTxidResponseProto.newBuilder().setEventsList(\n         builder.build()).build();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static GetEditsFromTxidResponseProto convertEditsResponse(EventBatchList el) {\n    InotifyProtos.EventsListProto.Builder builder \u003d\n        InotifyProtos.EventsListProto.newBuilder();\n    for (EventBatch b : el.getBatches()) {\n      List\u003cInotifyProtos.EventProto\u003e events \u003d Lists.newArrayList();\n      for (Event e : b.getEvents()) {\n        switch (e.getEventType()) {\n          case CLOSE:\n            Event.CloseEvent ce \u003d (Event.CloseEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_CLOSE)\n                .setContents(\n                    InotifyProtos.CloseEventProto.newBuilder()\n                        .setPath(ce.getPath())\n                        .setFileSize(ce.getFileSize())\n                        .setTimestamp(ce.getTimestamp()).build().toByteString()\n                ).build());\n            break;\n          case CREATE:\n            Event.CreateEvent ce2 \u003d (Event.CreateEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_CREATE)\n                .setContents(\n                    InotifyProtos.CreateEventProto.newBuilder()\n                        .setType(createTypeConvert(ce2.getiNodeType()))\n                        .setPath(ce2.getPath())\n                        .setCtime(ce2.getCtime())\n                        .setOwnerName(ce2.getOwnerName())\n                        .setGroupName(ce2.getGroupName())\n                        .setPerms(convert(ce2.getPerms()))\n                        .setReplication(ce2.getReplication())\n                        .setSymlinkTarget(ce2.getSymlinkTarget() \u003d\u003d null ?\n                            \"\" : ce2.getSymlinkTarget())\n                        .setDefaultBlockSize(ce2.getDefaultBlockSize())\n                        .setOverwrite(ce2.getOverwrite()).build().toByteString()\n                ).build());\n            break;\n          case METADATA:\n            Event.MetadataUpdateEvent me \u003d (Event.MetadataUpdateEvent) e;\n            InotifyProtos.MetadataUpdateEventProto.Builder metaB \u003d\n                InotifyProtos.MetadataUpdateEventProto.newBuilder()\n                    .setPath(me.getPath())\n                    .setType(metadataUpdateTypeConvert(me.getMetadataType()))\n                    .setMtime(me.getMtime())\n                    .setAtime(me.getAtime())\n                    .setReplication(me.getReplication())\n                    .setOwnerName(me.getOwnerName() \u003d\u003d null ? \"\" :\n                        me.getOwnerName())\n                    .setGroupName(me.getGroupName() \u003d\u003d null ? \"\" :\n                        me.getGroupName())\n                    .addAllAcls(me.getAcls() \u003d\u003d null ?\n                        Lists.\u003cAclEntryProto\u003enewArrayList() :\n                        convertAclEntryProto(me.getAcls()))\n                    .addAllXAttrs(me.getxAttrs() \u003d\u003d null ?\n                        Lists.\u003cXAttrProto\u003enewArrayList() :\n                        convertXAttrProto(me.getxAttrs()))\n                    .setXAttrsRemoved(me.isxAttrsRemoved());\n            if (me.getPerms() !\u003d null) {\n              metaB.setPerms(convert(me.getPerms()));\n            }\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_METADATA)\n                .setContents(metaB.build().toByteString())\n                .build());\n            break;\n          case RENAME:\n            Event.RenameEvent re \u003d (Event.RenameEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_RENAME)\n                .setContents(\n                    InotifyProtos.RenameEventProto.newBuilder()\n                        .setSrcPath(re.getSrcPath())\n                        .setDestPath(re.getDstPath())\n                        .setTimestamp(re.getTimestamp()).build().toByteString()\n                ).build());\n            break;\n          case APPEND:\n            Event.AppendEvent re2 \u003d (Event.AppendEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_APPEND)\n                .setContents(InotifyProtos.AppendEventProto.newBuilder()\n                    .setPath(re2.getPath())\n                    .setNewBlock(re2.toNewBlock()).build().toByteString())\n                .build());\n            break;\n          case UNLINK:\n            Event.UnlinkEvent ue \u003d (Event.UnlinkEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_UNLINK)\n                .setContents(\n                    InotifyProtos.UnlinkEventProto.newBuilder()\n                        .setPath(ue.getPath())\n                        .setTimestamp(ue.getTimestamp()).build().toByteString()\n                ).build());\n            break;\n          default:\n            throw new RuntimeException(\"Unexpected inotify event: \" + e);\n        }\n      }\n      builder.addBatch(InotifyProtos.EventBatchProto.newBuilder().\n          setTxid(b.getTxid()).\n          addAllEvents(events));\n    }\n    builder.setFirstTxid(el.getFirstTxid());\n    builder.setLastTxid(el.getLastTxid());\n    builder.setSyncTxid(el.getSyncTxid());\n    return GetEditsFromTxidResponseProto.newBuilder().setEventsList(\n        builder.build()).build();\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/protocolPB/PBHelper.java",
      "extendedDetails": {}
    },
    "6e13fc62e1f284f22fd0089f06ce281198bc7c2a": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-7513. HDFS inotify: add defaultBlockSize to CreateEvent (cmccabe)\n",
      "commitDate": "15/12/14 10:30 AM",
      "commitName": "6e13fc62e1f284f22fd0089f06ce281198bc7c2a",
      "commitAuthor": "Colin Patrick Mccabe",
      "commitDateOld": "08/12/14 10:23 AM",
      "commitNameOld": "ffe942b82c1208bc7b22899da3a233944cb5ab52",
      "commitAuthorOld": "cnauroth",
      "daysBetweenCommits": 7.01,
      "commitsBetweenForRepo": 59,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,108 +1,109 @@\n   public static GetEditsFromTxidResponseProto convertEditsResponse(EventBatchList el) {\n     InotifyProtos.EventsListProto.Builder builder \u003d\n         InotifyProtos.EventsListProto.newBuilder();\n     for (EventBatch b : el.getBatches()) {\n       List\u003cInotifyProtos.EventProto\u003e events \u003d Lists.newArrayList();\n       for (Event e : b.getEvents()) {\n         switch (e.getEventType()) {\n           case CLOSE:\n             Event.CloseEvent ce \u003d (Event.CloseEvent) e;\n             events.add(InotifyProtos.EventProto.newBuilder()\n                 .setType(InotifyProtos.EventType.EVENT_CLOSE)\n                 .setContents(\n                     InotifyProtos.CloseEventProto.newBuilder()\n                         .setPath(ce.getPath())\n                         .setFileSize(ce.getFileSize())\n                         .setTimestamp(ce.getTimestamp()).build().toByteString()\n                 ).build());\n             break;\n           case CREATE:\n             Event.CreateEvent ce2 \u003d (Event.CreateEvent) e;\n             events.add(InotifyProtos.EventProto.newBuilder()\n                 .setType(InotifyProtos.EventType.EVENT_CREATE)\n                 .setContents(\n                     InotifyProtos.CreateEventProto.newBuilder()\n                         .setType(createTypeConvert(ce2.getiNodeType()))\n                         .setPath(ce2.getPath())\n                         .setCtime(ce2.getCtime())\n                         .setOwnerName(ce2.getOwnerName())\n                         .setGroupName(ce2.getGroupName())\n                         .setPerms(convert(ce2.getPerms()))\n                         .setReplication(ce2.getReplication())\n                         .setSymlinkTarget(ce2.getSymlinkTarget() \u003d\u003d null ?\n                             \"\" : ce2.getSymlinkTarget())\n+                        .setDefaultBlockSize(ce2.getDefaultBlockSize())\n                         .setOverwrite(ce2.getOverwrite()).build().toByteString()\n                 ).build());\n             break;\n           case METADATA:\n             Event.MetadataUpdateEvent me \u003d (Event.MetadataUpdateEvent) e;\n             InotifyProtos.MetadataUpdateEventProto.Builder metaB \u003d\n                 InotifyProtos.MetadataUpdateEventProto.newBuilder()\n                     .setPath(me.getPath())\n                     .setType(metadataUpdateTypeConvert(me.getMetadataType()))\n                     .setMtime(me.getMtime())\n                     .setAtime(me.getAtime())\n                     .setReplication(me.getReplication())\n                     .setOwnerName(me.getOwnerName() \u003d\u003d null ? \"\" :\n                         me.getOwnerName())\n                     .setGroupName(me.getGroupName() \u003d\u003d null ? \"\" :\n                         me.getGroupName())\n                     .addAllAcls(me.getAcls() \u003d\u003d null ?\n                         Lists.\u003cAclEntryProto\u003enewArrayList() :\n                         convertAclEntryProto(me.getAcls()))\n                     .addAllXAttrs(me.getxAttrs() \u003d\u003d null ?\n                         Lists.\u003cXAttrProto\u003enewArrayList() :\n                         convertXAttrProto(me.getxAttrs()))\n                     .setXAttrsRemoved(me.isxAttrsRemoved());\n             if (me.getPerms() !\u003d null) {\n               metaB.setPerms(convert(me.getPerms()));\n             }\n             events.add(InotifyProtos.EventProto.newBuilder()\n                 .setType(InotifyProtos.EventType.EVENT_METADATA)\n                 .setContents(metaB.build().toByteString())\n                 .build());\n             break;\n           case RENAME:\n             Event.RenameEvent re \u003d (Event.RenameEvent) e;\n             events.add(InotifyProtos.EventProto.newBuilder()\n                 .setType(InotifyProtos.EventType.EVENT_RENAME)\n                 .setContents(\n                     InotifyProtos.RenameEventProto.newBuilder()\n                         .setSrcPath(re.getSrcPath())\n                         .setDestPath(re.getDstPath())\n                         .setTimestamp(re.getTimestamp()).build().toByteString()\n                 ).build());\n             break;\n           case APPEND:\n             Event.AppendEvent re2 \u003d (Event.AppendEvent) e;\n             events.add(InotifyProtos.EventProto.newBuilder()\n                 .setType(InotifyProtos.EventType.EVENT_APPEND)\n                 .setContents(\n                     InotifyProtos.AppendEventProto.newBuilder()\n                         .setPath(re2.getPath()).build().toByteString()\n                 ).build());\n             break;\n           case UNLINK:\n             Event.UnlinkEvent ue \u003d (Event.UnlinkEvent) e;\n             events.add(InotifyProtos.EventProto.newBuilder()\n                 .setType(InotifyProtos.EventType.EVENT_UNLINK)\n                 .setContents(\n                     InotifyProtos.UnlinkEventProto.newBuilder()\n                         .setPath(ue.getPath())\n                         .setTimestamp(ue.getTimestamp()).build().toByteString()\n                 ).build());\n             break;\n           default:\n             throw new RuntimeException(\"Unexpected inotify event: \" + e);\n         }\n       }\n       builder.addBatch(InotifyProtos.EventBatchProto.newBuilder().\n           setTxid(b.getTxid()).\n           addAllEvents(events));\n     }\n     builder.setFirstTxid(el.getFirstTxid());\n     builder.setLastTxid(el.getLastTxid());\n     builder.setSyncTxid(el.getSyncTxid());\n     return GetEditsFromTxidResponseProto.newBuilder().setEventsList(\n         builder.build()).build();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static GetEditsFromTxidResponseProto convertEditsResponse(EventBatchList el) {\n    InotifyProtos.EventsListProto.Builder builder \u003d\n        InotifyProtos.EventsListProto.newBuilder();\n    for (EventBatch b : el.getBatches()) {\n      List\u003cInotifyProtos.EventProto\u003e events \u003d Lists.newArrayList();\n      for (Event e : b.getEvents()) {\n        switch (e.getEventType()) {\n          case CLOSE:\n            Event.CloseEvent ce \u003d (Event.CloseEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_CLOSE)\n                .setContents(\n                    InotifyProtos.CloseEventProto.newBuilder()\n                        .setPath(ce.getPath())\n                        .setFileSize(ce.getFileSize())\n                        .setTimestamp(ce.getTimestamp()).build().toByteString()\n                ).build());\n            break;\n          case CREATE:\n            Event.CreateEvent ce2 \u003d (Event.CreateEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_CREATE)\n                .setContents(\n                    InotifyProtos.CreateEventProto.newBuilder()\n                        .setType(createTypeConvert(ce2.getiNodeType()))\n                        .setPath(ce2.getPath())\n                        .setCtime(ce2.getCtime())\n                        .setOwnerName(ce2.getOwnerName())\n                        .setGroupName(ce2.getGroupName())\n                        .setPerms(convert(ce2.getPerms()))\n                        .setReplication(ce2.getReplication())\n                        .setSymlinkTarget(ce2.getSymlinkTarget() \u003d\u003d null ?\n                            \"\" : ce2.getSymlinkTarget())\n                        .setDefaultBlockSize(ce2.getDefaultBlockSize())\n                        .setOverwrite(ce2.getOverwrite()).build().toByteString()\n                ).build());\n            break;\n          case METADATA:\n            Event.MetadataUpdateEvent me \u003d (Event.MetadataUpdateEvent) e;\n            InotifyProtos.MetadataUpdateEventProto.Builder metaB \u003d\n                InotifyProtos.MetadataUpdateEventProto.newBuilder()\n                    .setPath(me.getPath())\n                    .setType(metadataUpdateTypeConvert(me.getMetadataType()))\n                    .setMtime(me.getMtime())\n                    .setAtime(me.getAtime())\n                    .setReplication(me.getReplication())\n                    .setOwnerName(me.getOwnerName() \u003d\u003d null ? \"\" :\n                        me.getOwnerName())\n                    .setGroupName(me.getGroupName() \u003d\u003d null ? \"\" :\n                        me.getGroupName())\n                    .addAllAcls(me.getAcls() \u003d\u003d null ?\n                        Lists.\u003cAclEntryProto\u003enewArrayList() :\n                        convertAclEntryProto(me.getAcls()))\n                    .addAllXAttrs(me.getxAttrs() \u003d\u003d null ?\n                        Lists.\u003cXAttrProto\u003enewArrayList() :\n                        convertXAttrProto(me.getxAttrs()))\n                    .setXAttrsRemoved(me.isxAttrsRemoved());\n            if (me.getPerms() !\u003d null) {\n              metaB.setPerms(convert(me.getPerms()));\n            }\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_METADATA)\n                .setContents(metaB.build().toByteString())\n                .build());\n            break;\n          case RENAME:\n            Event.RenameEvent re \u003d (Event.RenameEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_RENAME)\n                .setContents(\n                    InotifyProtos.RenameEventProto.newBuilder()\n                        .setSrcPath(re.getSrcPath())\n                        .setDestPath(re.getDstPath())\n                        .setTimestamp(re.getTimestamp()).build().toByteString()\n                ).build());\n            break;\n          case APPEND:\n            Event.AppendEvent re2 \u003d (Event.AppendEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_APPEND)\n                .setContents(\n                    InotifyProtos.AppendEventProto.newBuilder()\n                        .setPath(re2.getPath()).build().toByteString()\n                ).build());\n            break;\n          case UNLINK:\n            Event.UnlinkEvent ue \u003d (Event.UnlinkEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_UNLINK)\n                .setContents(\n                    InotifyProtos.UnlinkEventProto.newBuilder()\n                        .setPath(ue.getPath())\n                        .setTimestamp(ue.getTimestamp()).build().toByteString()\n                ).build());\n            break;\n          default:\n            throw new RuntimeException(\"Unexpected inotify event: \" + e);\n        }\n      }\n      builder.addBatch(InotifyProtos.EventBatchProto.newBuilder().\n          setTxid(b.getTxid()).\n          addAllEvents(events));\n    }\n    builder.setFirstTxid(el.getFirstTxid());\n    builder.setLastTxid(el.getLastTxid());\n    builder.setSyncTxid(el.getSyncTxid());\n    return GetEditsFromTxidResponseProto.newBuilder().setEventsList(\n        builder.build()).build();\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/protocolPB/PBHelper.java",
      "extendedDetails": {}
    },
    "75a326aaff8c92349701d9b3473c3070b8c2be44": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "HDFS-7446. HDFS inotify should have the ability to determine what txid it has read up to (cmccabe)\n",
      "commitDate": "02/12/14 5:15 PM",
      "commitName": "75a326aaff8c92349701d9b3473c3070b8c2be44",
      "commitAuthor": "Colin Patrick Mccabe",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-7446. HDFS inotify should have the ability to determine what txid it has read up to (cmccabe)\n",
          "commitDate": "02/12/14 5:15 PM",
          "commitName": "75a326aaff8c92349701d9b3473c3070b8c2be44",
          "commitAuthor": "Colin Patrick Mccabe",
          "commitDateOld": "28/10/14 6:11 AM",
          "commitNameOld": "58c0bb9ed9f4a2491395b63c68046562a73526c9",
          "commitAuthorOld": "yliu",
          "daysBetweenCommits": 35.5,
          "commitsBetweenForRepo": 298,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,102 +1,108 @@\n-  public static GetEditsFromTxidResponseProto convertEditsResponse(EventsList el) {\n+  public static GetEditsFromTxidResponseProto convertEditsResponse(EventBatchList el) {\n     InotifyProtos.EventsListProto.Builder builder \u003d\n         InotifyProtos.EventsListProto.newBuilder();\n-    for (Event e : el.getEvents()) {\n-      switch(e.getEventType()) {\n-      case CLOSE:\n-        Event.CloseEvent ce \u003d (Event.CloseEvent) e;\n-        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n-            .setType(InotifyProtos.EventType.EVENT_CLOSE)\n-            .setContents(\n-                InotifyProtos.CloseEventProto.newBuilder()\n-                    .setPath(ce.getPath())\n-                    .setFileSize(ce.getFileSize())\n-                    .setTimestamp(ce.getTimestamp()).build().toByteString()\n-            ).build());\n-        break;\n-      case CREATE:\n-        Event.CreateEvent ce2 \u003d (Event.CreateEvent) e;\n-        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n-            .setType(InotifyProtos.EventType.EVENT_CREATE)\n-            .setContents(\n-                InotifyProtos.CreateEventProto.newBuilder()\n-                    .setType(createTypeConvert(ce2.getiNodeType()))\n-                    .setPath(ce2.getPath())\n-                    .setCtime(ce2.getCtime())\n-                    .setOwnerName(ce2.getOwnerName())\n-                    .setGroupName(ce2.getGroupName())\n-                    .setPerms(convert(ce2.getPerms()))\n-                    .setReplication(ce2.getReplication())\n-                    .setSymlinkTarget(ce2.getSymlinkTarget() \u003d\u003d null ?\n-                        \"\" : ce2.getSymlinkTarget())\n-                    .setOverwrite(ce2.getOverwrite()).build().toByteString()\n-            ).build());\n-        break;\n-      case METADATA:\n-        Event.MetadataUpdateEvent me \u003d (Event.MetadataUpdateEvent) e;\n-        InotifyProtos.MetadataUpdateEventProto.Builder metaB \u003d\n-            InotifyProtos.MetadataUpdateEventProto.newBuilder()\n-                .setPath(me.getPath())\n-                .setType(metadataUpdateTypeConvert(me.getMetadataType()))\n-                .setMtime(me.getMtime())\n-                .setAtime(me.getAtime())\n-                .setReplication(me.getReplication())\n-                .setOwnerName(me.getOwnerName() \u003d\u003d null ? \"\" :\n-                    me.getOwnerName())\n-                .setGroupName(me.getGroupName() \u003d\u003d null ? \"\" :\n-                    me.getGroupName())\n-                .addAllAcls(me.getAcls() \u003d\u003d null ?\n-                    Lists.\u003cAclEntryProto\u003enewArrayList() :\n-                    convertAclEntryProto(me.getAcls()))\n-                .addAllXAttrs(me.getxAttrs() \u003d\u003d null ?\n-                    Lists.\u003cXAttrProto\u003enewArrayList() :\n-                    convertXAttrProto(me.getxAttrs()))\n-                .setXAttrsRemoved(me.isxAttrsRemoved());\n-        if (me.getPerms() !\u003d null) {\n-          metaB.setPerms(convert(me.getPerms()));\n+    for (EventBatch b : el.getBatches()) {\n+      List\u003cInotifyProtos.EventProto\u003e events \u003d Lists.newArrayList();\n+      for (Event e : b.getEvents()) {\n+        switch (e.getEventType()) {\n+          case CLOSE:\n+            Event.CloseEvent ce \u003d (Event.CloseEvent) e;\n+            events.add(InotifyProtos.EventProto.newBuilder()\n+                .setType(InotifyProtos.EventType.EVENT_CLOSE)\n+                .setContents(\n+                    InotifyProtos.CloseEventProto.newBuilder()\n+                        .setPath(ce.getPath())\n+                        .setFileSize(ce.getFileSize())\n+                        .setTimestamp(ce.getTimestamp()).build().toByteString()\n+                ).build());\n+            break;\n+          case CREATE:\n+            Event.CreateEvent ce2 \u003d (Event.CreateEvent) e;\n+            events.add(InotifyProtos.EventProto.newBuilder()\n+                .setType(InotifyProtos.EventType.EVENT_CREATE)\n+                .setContents(\n+                    InotifyProtos.CreateEventProto.newBuilder()\n+                        .setType(createTypeConvert(ce2.getiNodeType()))\n+                        .setPath(ce2.getPath())\n+                        .setCtime(ce2.getCtime())\n+                        .setOwnerName(ce2.getOwnerName())\n+                        .setGroupName(ce2.getGroupName())\n+                        .setPerms(convert(ce2.getPerms()))\n+                        .setReplication(ce2.getReplication())\n+                        .setSymlinkTarget(ce2.getSymlinkTarget() \u003d\u003d null ?\n+                            \"\" : ce2.getSymlinkTarget())\n+                        .setOverwrite(ce2.getOverwrite()).build().toByteString()\n+                ).build());\n+            break;\n+          case METADATA:\n+            Event.MetadataUpdateEvent me \u003d (Event.MetadataUpdateEvent) e;\n+            InotifyProtos.MetadataUpdateEventProto.Builder metaB \u003d\n+                InotifyProtos.MetadataUpdateEventProto.newBuilder()\n+                    .setPath(me.getPath())\n+                    .setType(metadataUpdateTypeConvert(me.getMetadataType()))\n+                    .setMtime(me.getMtime())\n+                    .setAtime(me.getAtime())\n+                    .setReplication(me.getReplication())\n+                    .setOwnerName(me.getOwnerName() \u003d\u003d null ? \"\" :\n+                        me.getOwnerName())\n+                    .setGroupName(me.getGroupName() \u003d\u003d null ? \"\" :\n+                        me.getGroupName())\n+                    .addAllAcls(me.getAcls() \u003d\u003d null ?\n+                        Lists.\u003cAclEntryProto\u003enewArrayList() :\n+                        convertAclEntryProto(me.getAcls()))\n+                    .addAllXAttrs(me.getxAttrs() \u003d\u003d null ?\n+                        Lists.\u003cXAttrProto\u003enewArrayList() :\n+                        convertXAttrProto(me.getxAttrs()))\n+                    .setXAttrsRemoved(me.isxAttrsRemoved());\n+            if (me.getPerms() !\u003d null) {\n+              metaB.setPerms(convert(me.getPerms()));\n+            }\n+            events.add(InotifyProtos.EventProto.newBuilder()\n+                .setType(InotifyProtos.EventType.EVENT_METADATA)\n+                .setContents(metaB.build().toByteString())\n+                .build());\n+            break;\n+          case RENAME:\n+            Event.RenameEvent re \u003d (Event.RenameEvent) e;\n+            events.add(InotifyProtos.EventProto.newBuilder()\n+                .setType(InotifyProtos.EventType.EVENT_RENAME)\n+                .setContents(\n+                    InotifyProtos.RenameEventProto.newBuilder()\n+                        .setSrcPath(re.getSrcPath())\n+                        .setDestPath(re.getDstPath())\n+                        .setTimestamp(re.getTimestamp()).build().toByteString()\n+                ).build());\n+            break;\n+          case APPEND:\n+            Event.AppendEvent re2 \u003d (Event.AppendEvent) e;\n+            events.add(InotifyProtos.EventProto.newBuilder()\n+                .setType(InotifyProtos.EventType.EVENT_APPEND)\n+                .setContents(\n+                    InotifyProtos.AppendEventProto.newBuilder()\n+                        .setPath(re2.getPath()).build().toByteString()\n+                ).build());\n+            break;\n+          case UNLINK:\n+            Event.UnlinkEvent ue \u003d (Event.UnlinkEvent) e;\n+            events.add(InotifyProtos.EventProto.newBuilder()\n+                .setType(InotifyProtos.EventType.EVENT_UNLINK)\n+                .setContents(\n+                    InotifyProtos.UnlinkEventProto.newBuilder()\n+                        .setPath(ue.getPath())\n+                        .setTimestamp(ue.getTimestamp()).build().toByteString()\n+                ).build());\n+            break;\n+          default:\n+            throw new RuntimeException(\"Unexpected inotify event: \" + e);\n         }\n-        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n-            .setType(InotifyProtos.EventType.EVENT_METADATA)\n-            .setContents(metaB.build().toByteString())\n-            .build());\n-        break;\n-      case RENAME:\n-        Event.RenameEvent re \u003d (Event.RenameEvent) e;\n-        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n-            .setType(InotifyProtos.EventType.EVENT_RENAME)\n-            .setContents(\n-                InotifyProtos.RenameEventProto.newBuilder()\n-                    .setSrcPath(re.getSrcPath())\n-                    .setDestPath(re.getDstPath())\n-                    .setTimestamp(re.getTimestamp()).build().toByteString()\n-            ).build());\n-        break;\n-      case APPEND:\n-        Event.AppendEvent re2 \u003d (Event.AppendEvent) e;\n-        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n-            .setType(InotifyProtos.EventType.EVENT_APPEND)\n-            .setContents(\n-                InotifyProtos.AppendEventProto.newBuilder()\n-                    .setPath(re2.getPath()).build().toByteString()\n-            ).build());\n-        break;\n-      case UNLINK:\n-        Event.UnlinkEvent ue \u003d (Event.UnlinkEvent) e;\n-        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n-            .setType(InotifyProtos.EventType.EVENT_UNLINK)\n-            .setContents(\n-                InotifyProtos.UnlinkEventProto.newBuilder()\n-                    .setPath(ue.getPath())\n-                    .setTimestamp(ue.getTimestamp()).build().toByteString()\n-            ).build());\n-        break;\n-      default:\n-        throw new RuntimeException(\"Unexpected inotify event: \" + e);\n       }\n+      builder.addBatch(InotifyProtos.EventBatchProto.newBuilder().\n+          setTxid(b.getTxid()).\n+          addAllEvents(events));\n     }\n     builder.setFirstTxid(el.getFirstTxid());\n     builder.setLastTxid(el.getLastTxid());\n     builder.setSyncTxid(el.getSyncTxid());\n     return GetEditsFromTxidResponseProto.newBuilder().setEventsList(\n         builder.build()).build();\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public static GetEditsFromTxidResponseProto convertEditsResponse(EventBatchList el) {\n    InotifyProtos.EventsListProto.Builder builder \u003d\n        InotifyProtos.EventsListProto.newBuilder();\n    for (EventBatch b : el.getBatches()) {\n      List\u003cInotifyProtos.EventProto\u003e events \u003d Lists.newArrayList();\n      for (Event e : b.getEvents()) {\n        switch (e.getEventType()) {\n          case CLOSE:\n            Event.CloseEvent ce \u003d (Event.CloseEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_CLOSE)\n                .setContents(\n                    InotifyProtos.CloseEventProto.newBuilder()\n                        .setPath(ce.getPath())\n                        .setFileSize(ce.getFileSize())\n                        .setTimestamp(ce.getTimestamp()).build().toByteString()\n                ).build());\n            break;\n          case CREATE:\n            Event.CreateEvent ce2 \u003d (Event.CreateEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_CREATE)\n                .setContents(\n                    InotifyProtos.CreateEventProto.newBuilder()\n                        .setType(createTypeConvert(ce2.getiNodeType()))\n                        .setPath(ce2.getPath())\n                        .setCtime(ce2.getCtime())\n                        .setOwnerName(ce2.getOwnerName())\n                        .setGroupName(ce2.getGroupName())\n                        .setPerms(convert(ce2.getPerms()))\n                        .setReplication(ce2.getReplication())\n                        .setSymlinkTarget(ce2.getSymlinkTarget() \u003d\u003d null ?\n                            \"\" : ce2.getSymlinkTarget())\n                        .setOverwrite(ce2.getOverwrite()).build().toByteString()\n                ).build());\n            break;\n          case METADATA:\n            Event.MetadataUpdateEvent me \u003d (Event.MetadataUpdateEvent) e;\n            InotifyProtos.MetadataUpdateEventProto.Builder metaB \u003d\n                InotifyProtos.MetadataUpdateEventProto.newBuilder()\n                    .setPath(me.getPath())\n                    .setType(metadataUpdateTypeConvert(me.getMetadataType()))\n                    .setMtime(me.getMtime())\n                    .setAtime(me.getAtime())\n                    .setReplication(me.getReplication())\n                    .setOwnerName(me.getOwnerName() \u003d\u003d null ? \"\" :\n                        me.getOwnerName())\n                    .setGroupName(me.getGroupName() \u003d\u003d null ? \"\" :\n                        me.getGroupName())\n                    .addAllAcls(me.getAcls() \u003d\u003d null ?\n                        Lists.\u003cAclEntryProto\u003enewArrayList() :\n                        convertAclEntryProto(me.getAcls()))\n                    .addAllXAttrs(me.getxAttrs() \u003d\u003d null ?\n                        Lists.\u003cXAttrProto\u003enewArrayList() :\n                        convertXAttrProto(me.getxAttrs()))\n                    .setXAttrsRemoved(me.isxAttrsRemoved());\n            if (me.getPerms() !\u003d null) {\n              metaB.setPerms(convert(me.getPerms()));\n            }\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_METADATA)\n                .setContents(metaB.build().toByteString())\n                .build());\n            break;\n          case RENAME:\n            Event.RenameEvent re \u003d (Event.RenameEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_RENAME)\n                .setContents(\n                    InotifyProtos.RenameEventProto.newBuilder()\n                        .setSrcPath(re.getSrcPath())\n                        .setDestPath(re.getDstPath())\n                        .setTimestamp(re.getTimestamp()).build().toByteString()\n                ).build());\n            break;\n          case APPEND:\n            Event.AppendEvent re2 \u003d (Event.AppendEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_APPEND)\n                .setContents(\n                    InotifyProtos.AppendEventProto.newBuilder()\n                        .setPath(re2.getPath()).build().toByteString()\n                ).build());\n            break;\n          case UNLINK:\n            Event.UnlinkEvent ue \u003d (Event.UnlinkEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_UNLINK)\n                .setContents(\n                    InotifyProtos.UnlinkEventProto.newBuilder()\n                        .setPath(ue.getPath())\n                        .setTimestamp(ue.getTimestamp()).build().toByteString()\n                ).build());\n            break;\n          default:\n            throw new RuntimeException(\"Unexpected inotify event: \" + e);\n        }\n      }\n      builder.addBatch(InotifyProtos.EventBatchProto.newBuilder().\n          setTxid(b.getTxid()).\n          addAllEvents(events));\n    }\n    builder.setFirstTxid(el.getFirstTxid());\n    builder.setLastTxid(el.getLastTxid());\n    builder.setSyncTxid(el.getSyncTxid());\n    return GetEditsFromTxidResponseProto.newBuilder().setEventsList(\n        builder.build()).build();\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/protocolPB/PBHelper.java",
          "extendedDetails": {
            "oldValue": "[el-EventsList]",
            "newValue": "[el-EventBatchList]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-7446. HDFS inotify should have the ability to determine what txid it has read up to (cmccabe)\n",
          "commitDate": "02/12/14 5:15 PM",
          "commitName": "75a326aaff8c92349701d9b3473c3070b8c2be44",
          "commitAuthor": "Colin Patrick Mccabe",
          "commitDateOld": "28/10/14 6:11 AM",
          "commitNameOld": "58c0bb9ed9f4a2491395b63c68046562a73526c9",
          "commitAuthorOld": "yliu",
          "daysBetweenCommits": 35.5,
          "commitsBetweenForRepo": 298,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,102 +1,108 @@\n-  public static GetEditsFromTxidResponseProto convertEditsResponse(EventsList el) {\n+  public static GetEditsFromTxidResponseProto convertEditsResponse(EventBatchList el) {\n     InotifyProtos.EventsListProto.Builder builder \u003d\n         InotifyProtos.EventsListProto.newBuilder();\n-    for (Event e : el.getEvents()) {\n-      switch(e.getEventType()) {\n-      case CLOSE:\n-        Event.CloseEvent ce \u003d (Event.CloseEvent) e;\n-        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n-            .setType(InotifyProtos.EventType.EVENT_CLOSE)\n-            .setContents(\n-                InotifyProtos.CloseEventProto.newBuilder()\n-                    .setPath(ce.getPath())\n-                    .setFileSize(ce.getFileSize())\n-                    .setTimestamp(ce.getTimestamp()).build().toByteString()\n-            ).build());\n-        break;\n-      case CREATE:\n-        Event.CreateEvent ce2 \u003d (Event.CreateEvent) e;\n-        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n-            .setType(InotifyProtos.EventType.EVENT_CREATE)\n-            .setContents(\n-                InotifyProtos.CreateEventProto.newBuilder()\n-                    .setType(createTypeConvert(ce2.getiNodeType()))\n-                    .setPath(ce2.getPath())\n-                    .setCtime(ce2.getCtime())\n-                    .setOwnerName(ce2.getOwnerName())\n-                    .setGroupName(ce2.getGroupName())\n-                    .setPerms(convert(ce2.getPerms()))\n-                    .setReplication(ce2.getReplication())\n-                    .setSymlinkTarget(ce2.getSymlinkTarget() \u003d\u003d null ?\n-                        \"\" : ce2.getSymlinkTarget())\n-                    .setOverwrite(ce2.getOverwrite()).build().toByteString()\n-            ).build());\n-        break;\n-      case METADATA:\n-        Event.MetadataUpdateEvent me \u003d (Event.MetadataUpdateEvent) e;\n-        InotifyProtos.MetadataUpdateEventProto.Builder metaB \u003d\n-            InotifyProtos.MetadataUpdateEventProto.newBuilder()\n-                .setPath(me.getPath())\n-                .setType(metadataUpdateTypeConvert(me.getMetadataType()))\n-                .setMtime(me.getMtime())\n-                .setAtime(me.getAtime())\n-                .setReplication(me.getReplication())\n-                .setOwnerName(me.getOwnerName() \u003d\u003d null ? \"\" :\n-                    me.getOwnerName())\n-                .setGroupName(me.getGroupName() \u003d\u003d null ? \"\" :\n-                    me.getGroupName())\n-                .addAllAcls(me.getAcls() \u003d\u003d null ?\n-                    Lists.\u003cAclEntryProto\u003enewArrayList() :\n-                    convertAclEntryProto(me.getAcls()))\n-                .addAllXAttrs(me.getxAttrs() \u003d\u003d null ?\n-                    Lists.\u003cXAttrProto\u003enewArrayList() :\n-                    convertXAttrProto(me.getxAttrs()))\n-                .setXAttrsRemoved(me.isxAttrsRemoved());\n-        if (me.getPerms() !\u003d null) {\n-          metaB.setPerms(convert(me.getPerms()));\n+    for (EventBatch b : el.getBatches()) {\n+      List\u003cInotifyProtos.EventProto\u003e events \u003d Lists.newArrayList();\n+      for (Event e : b.getEvents()) {\n+        switch (e.getEventType()) {\n+          case CLOSE:\n+            Event.CloseEvent ce \u003d (Event.CloseEvent) e;\n+            events.add(InotifyProtos.EventProto.newBuilder()\n+                .setType(InotifyProtos.EventType.EVENT_CLOSE)\n+                .setContents(\n+                    InotifyProtos.CloseEventProto.newBuilder()\n+                        .setPath(ce.getPath())\n+                        .setFileSize(ce.getFileSize())\n+                        .setTimestamp(ce.getTimestamp()).build().toByteString()\n+                ).build());\n+            break;\n+          case CREATE:\n+            Event.CreateEvent ce2 \u003d (Event.CreateEvent) e;\n+            events.add(InotifyProtos.EventProto.newBuilder()\n+                .setType(InotifyProtos.EventType.EVENT_CREATE)\n+                .setContents(\n+                    InotifyProtos.CreateEventProto.newBuilder()\n+                        .setType(createTypeConvert(ce2.getiNodeType()))\n+                        .setPath(ce2.getPath())\n+                        .setCtime(ce2.getCtime())\n+                        .setOwnerName(ce2.getOwnerName())\n+                        .setGroupName(ce2.getGroupName())\n+                        .setPerms(convert(ce2.getPerms()))\n+                        .setReplication(ce2.getReplication())\n+                        .setSymlinkTarget(ce2.getSymlinkTarget() \u003d\u003d null ?\n+                            \"\" : ce2.getSymlinkTarget())\n+                        .setOverwrite(ce2.getOverwrite()).build().toByteString()\n+                ).build());\n+            break;\n+          case METADATA:\n+            Event.MetadataUpdateEvent me \u003d (Event.MetadataUpdateEvent) e;\n+            InotifyProtos.MetadataUpdateEventProto.Builder metaB \u003d\n+                InotifyProtos.MetadataUpdateEventProto.newBuilder()\n+                    .setPath(me.getPath())\n+                    .setType(metadataUpdateTypeConvert(me.getMetadataType()))\n+                    .setMtime(me.getMtime())\n+                    .setAtime(me.getAtime())\n+                    .setReplication(me.getReplication())\n+                    .setOwnerName(me.getOwnerName() \u003d\u003d null ? \"\" :\n+                        me.getOwnerName())\n+                    .setGroupName(me.getGroupName() \u003d\u003d null ? \"\" :\n+                        me.getGroupName())\n+                    .addAllAcls(me.getAcls() \u003d\u003d null ?\n+                        Lists.\u003cAclEntryProto\u003enewArrayList() :\n+                        convertAclEntryProto(me.getAcls()))\n+                    .addAllXAttrs(me.getxAttrs() \u003d\u003d null ?\n+                        Lists.\u003cXAttrProto\u003enewArrayList() :\n+                        convertXAttrProto(me.getxAttrs()))\n+                    .setXAttrsRemoved(me.isxAttrsRemoved());\n+            if (me.getPerms() !\u003d null) {\n+              metaB.setPerms(convert(me.getPerms()));\n+            }\n+            events.add(InotifyProtos.EventProto.newBuilder()\n+                .setType(InotifyProtos.EventType.EVENT_METADATA)\n+                .setContents(metaB.build().toByteString())\n+                .build());\n+            break;\n+          case RENAME:\n+            Event.RenameEvent re \u003d (Event.RenameEvent) e;\n+            events.add(InotifyProtos.EventProto.newBuilder()\n+                .setType(InotifyProtos.EventType.EVENT_RENAME)\n+                .setContents(\n+                    InotifyProtos.RenameEventProto.newBuilder()\n+                        .setSrcPath(re.getSrcPath())\n+                        .setDestPath(re.getDstPath())\n+                        .setTimestamp(re.getTimestamp()).build().toByteString()\n+                ).build());\n+            break;\n+          case APPEND:\n+            Event.AppendEvent re2 \u003d (Event.AppendEvent) e;\n+            events.add(InotifyProtos.EventProto.newBuilder()\n+                .setType(InotifyProtos.EventType.EVENT_APPEND)\n+                .setContents(\n+                    InotifyProtos.AppendEventProto.newBuilder()\n+                        .setPath(re2.getPath()).build().toByteString()\n+                ).build());\n+            break;\n+          case UNLINK:\n+            Event.UnlinkEvent ue \u003d (Event.UnlinkEvent) e;\n+            events.add(InotifyProtos.EventProto.newBuilder()\n+                .setType(InotifyProtos.EventType.EVENT_UNLINK)\n+                .setContents(\n+                    InotifyProtos.UnlinkEventProto.newBuilder()\n+                        .setPath(ue.getPath())\n+                        .setTimestamp(ue.getTimestamp()).build().toByteString()\n+                ).build());\n+            break;\n+          default:\n+            throw new RuntimeException(\"Unexpected inotify event: \" + e);\n         }\n-        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n-            .setType(InotifyProtos.EventType.EVENT_METADATA)\n-            .setContents(metaB.build().toByteString())\n-            .build());\n-        break;\n-      case RENAME:\n-        Event.RenameEvent re \u003d (Event.RenameEvent) e;\n-        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n-            .setType(InotifyProtos.EventType.EVENT_RENAME)\n-            .setContents(\n-                InotifyProtos.RenameEventProto.newBuilder()\n-                    .setSrcPath(re.getSrcPath())\n-                    .setDestPath(re.getDstPath())\n-                    .setTimestamp(re.getTimestamp()).build().toByteString()\n-            ).build());\n-        break;\n-      case APPEND:\n-        Event.AppendEvent re2 \u003d (Event.AppendEvent) e;\n-        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n-            .setType(InotifyProtos.EventType.EVENT_APPEND)\n-            .setContents(\n-                InotifyProtos.AppendEventProto.newBuilder()\n-                    .setPath(re2.getPath()).build().toByteString()\n-            ).build());\n-        break;\n-      case UNLINK:\n-        Event.UnlinkEvent ue \u003d (Event.UnlinkEvent) e;\n-        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n-            .setType(InotifyProtos.EventType.EVENT_UNLINK)\n-            .setContents(\n-                InotifyProtos.UnlinkEventProto.newBuilder()\n-                    .setPath(ue.getPath())\n-                    .setTimestamp(ue.getTimestamp()).build().toByteString()\n-            ).build());\n-        break;\n-      default:\n-        throw new RuntimeException(\"Unexpected inotify event: \" + e);\n       }\n+      builder.addBatch(InotifyProtos.EventBatchProto.newBuilder().\n+          setTxid(b.getTxid()).\n+          addAllEvents(events));\n     }\n     builder.setFirstTxid(el.getFirstTxid());\n     builder.setLastTxid(el.getLastTxid());\n     builder.setSyncTxid(el.getSyncTxid());\n     return GetEditsFromTxidResponseProto.newBuilder().setEventsList(\n         builder.build()).build();\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public static GetEditsFromTxidResponseProto convertEditsResponse(EventBatchList el) {\n    InotifyProtos.EventsListProto.Builder builder \u003d\n        InotifyProtos.EventsListProto.newBuilder();\n    for (EventBatch b : el.getBatches()) {\n      List\u003cInotifyProtos.EventProto\u003e events \u003d Lists.newArrayList();\n      for (Event e : b.getEvents()) {\n        switch (e.getEventType()) {\n          case CLOSE:\n            Event.CloseEvent ce \u003d (Event.CloseEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_CLOSE)\n                .setContents(\n                    InotifyProtos.CloseEventProto.newBuilder()\n                        .setPath(ce.getPath())\n                        .setFileSize(ce.getFileSize())\n                        .setTimestamp(ce.getTimestamp()).build().toByteString()\n                ).build());\n            break;\n          case CREATE:\n            Event.CreateEvent ce2 \u003d (Event.CreateEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_CREATE)\n                .setContents(\n                    InotifyProtos.CreateEventProto.newBuilder()\n                        .setType(createTypeConvert(ce2.getiNodeType()))\n                        .setPath(ce2.getPath())\n                        .setCtime(ce2.getCtime())\n                        .setOwnerName(ce2.getOwnerName())\n                        .setGroupName(ce2.getGroupName())\n                        .setPerms(convert(ce2.getPerms()))\n                        .setReplication(ce2.getReplication())\n                        .setSymlinkTarget(ce2.getSymlinkTarget() \u003d\u003d null ?\n                            \"\" : ce2.getSymlinkTarget())\n                        .setOverwrite(ce2.getOverwrite()).build().toByteString()\n                ).build());\n            break;\n          case METADATA:\n            Event.MetadataUpdateEvent me \u003d (Event.MetadataUpdateEvent) e;\n            InotifyProtos.MetadataUpdateEventProto.Builder metaB \u003d\n                InotifyProtos.MetadataUpdateEventProto.newBuilder()\n                    .setPath(me.getPath())\n                    .setType(metadataUpdateTypeConvert(me.getMetadataType()))\n                    .setMtime(me.getMtime())\n                    .setAtime(me.getAtime())\n                    .setReplication(me.getReplication())\n                    .setOwnerName(me.getOwnerName() \u003d\u003d null ? \"\" :\n                        me.getOwnerName())\n                    .setGroupName(me.getGroupName() \u003d\u003d null ? \"\" :\n                        me.getGroupName())\n                    .addAllAcls(me.getAcls() \u003d\u003d null ?\n                        Lists.\u003cAclEntryProto\u003enewArrayList() :\n                        convertAclEntryProto(me.getAcls()))\n                    .addAllXAttrs(me.getxAttrs() \u003d\u003d null ?\n                        Lists.\u003cXAttrProto\u003enewArrayList() :\n                        convertXAttrProto(me.getxAttrs()))\n                    .setXAttrsRemoved(me.isxAttrsRemoved());\n            if (me.getPerms() !\u003d null) {\n              metaB.setPerms(convert(me.getPerms()));\n            }\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_METADATA)\n                .setContents(metaB.build().toByteString())\n                .build());\n            break;\n          case RENAME:\n            Event.RenameEvent re \u003d (Event.RenameEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_RENAME)\n                .setContents(\n                    InotifyProtos.RenameEventProto.newBuilder()\n                        .setSrcPath(re.getSrcPath())\n                        .setDestPath(re.getDstPath())\n                        .setTimestamp(re.getTimestamp()).build().toByteString()\n                ).build());\n            break;\n          case APPEND:\n            Event.AppendEvent re2 \u003d (Event.AppendEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_APPEND)\n                .setContents(\n                    InotifyProtos.AppendEventProto.newBuilder()\n                        .setPath(re2.getPath()).build().toByteString()\n                ).build());\n            break;\n          case UNLINK:\n            Event.UnlinkEvent ue \u003d (Event.UnlinkEvent) e;\n            events.add(InotifyProtos.EventProto.newBuilder()\n                .setType(InotifyProtos.EventType.EVENT_UNLINK)\n                .setContents(\n                    InotifyProtos.UnlinkEventProto.newBuilder()\n                        .setPath(ue.getPath())\n                        .setTimestamp(ue.getTimestamp()).build().toByteString()\n                ).build());\n            break;\n          default:\n            throw new RuntimeException(\"Unexpected inotify event: \" + e);\n        }\n      }\n      builder.addBatch(InotifyProtos.EventBatchProto.newBuilder().\n          setTxid(b.getTxid()).\n          addAllEvents(events));\n    }\n    builder.setFirstTxid(el.getFirstTxid());\n    builder.setLastTxid(el.getLastTxid());\n    builder.setSyncTxid(el.getSyncTxid());\n    return GetEditsFromTxidResponseProto.newBuilder().setEventsList(\n        builder.build()).build();\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/protocolPB/PBHelper.java",
          "extendedDetails": {}
        }
      ]
    },
    "6104520369045dfaa4b543cbad21236ed322249b": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-6886. Use single editlog record for creating file + overwrite. Contributed by Yi Liu.\n",
      "commitDate": "04/09/14 6:54 PM",
      "commitName": "6104520369045dfaa4b543cbad21236ed322249b",
      "commitAuthor": "Jing Zhao",
      "commitDateOld": "02/09/14 2:02 PM",
      "commitNameOld": "faa4455be512e070fa420084be8d1be5c72f3b08",
      "commitAuthorOld": "Andrew Wang",
      "daysBetweenCommits": 2.2,
      "commitsBetweenForRepo": 22,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,101 +1,102 @@\n   public static GetEditsFromTxidResponseProto convertEditsResponse(EventsList el) {\n     InotifyProtos.EventsListProto.Builder builder \u003d\n         InotifyProtos.EventsListProto.newBuilder();\n     for (Event e : el.getEvents()) {\n       switch(e.getEventType()) {\n       case CLOSE:\n         Event.CloseEvent ce \u003d (Event.CloseEvent) e;\n         builder.addEvents(InotifyProtos.EventProto.newBuilder()\n             .setType(InotifyProtos.EventType.EVENT_CLOSE)\n             .setContents(\n                 InotifyProtos.CloseEventProto.newBuilder()\n                     .setPath(ce.getPath())\n                     .setFileSize(ce.getFileSize())\n                     .setTimestamp(ce.getTimestamp()).build().toByteString()\n             ).build());\n         break;\n       case CREATE:\n         Event.CreateEvent ce2 \u003d (Event.CreateEvent) e;\n         builder.addEvents(InotifyProtos.EventProto.newBuilder()\n             .setType(InotifyProtos.EventType.EVENT_CREATE)\n             .setContents(\n                 InotifyProtos.CreateEventProto.newBuilder()\n                     .setType(createTypeConvert(ce2.getiNodeType()))\n                     .setPath(ce2.getPath())\n                     .setCtime(ce2.getCtime())\n                     .setOwnerName(ce2.getOwnerName())\n                     .setGroupName(ce2.getGroupName())\n                     .setPerms(convert(ce2.getPerms()))\n                     .setReplication(ce2.getReplication())\n                     .setSymlinkTarget(ce2.getSymlinkTarget() \u003d\u003d null ?\n-                        \"\" : ce2.getSymlinkTarget()).build().toByteString()\n+                        \"\" : ce2.getSymlinkTarget())\n+                    .setOverwrite(ce2.getOverwrite()).build().toByteString()\n             ).build());\n         break;\n       case METADATA:\n         Event.MetadataUpdateEvent me \u003d (Event.MetadataUpdateEvent) e;\n         InotifyProtos.MetadataUpdateEventProto.Builder metaB \u003d\n             InotifyProtos.MetadataUpdateEventProto.newBuilder()\n                 .setPath(me.getPath())\n                 .setType(metadataUpdateTypeConvert(me.getMetadataType()))\n                 .setMtime(me.getMtime())\n                 .setAtime(me.getAtime())\n                 .setReplication(me.getReplication())\n                 .setOwnerName(me.getOwnerName() \u003d\u003d null ? \"\" :\n                     me.getOwnerName())\n                 .setGroupName(me.getGroupName() \u003d\u003d null ? \"\" :\n                     me.getGroupName())\n                 .addAllAcls(me.getAcls() \u003d\u003d null ?\n                     Lists.\u003cAclEntryProto\u003enewArrayList() :\n                     convertAclEntryProto(me.getAcls()))\n                 .addAllXAttrs(me.getxAttrs() \u003d\u003d null ?\n                     Lists.\u003cXAttrProto\u003enewArrayList() :\n                     convertXAttrProto(me.getxAttrs()))\n                 .setXAttrsRemoved(me.isxAttrsRemoved());\n         if (me.getPerms() !\u003d null) {\n           metaB.setPerms(convert(me.getPerms()));\n         }\n         builder.addEvents(InotifyProtos.EventProto.newBuilder()\n             .setType(InotifyProtos.EventType.EVENT_METADATA)\n             .setContents(metaB.build().toByteString())\n             .build());\n         break;\n       case RENAME:\n         Event.RenameEvent re \u003d (Event.RenameEvent) e;\n         builder.addEvents(InotifyProtos.EventProto.newBuilder()\n             .setType(InotifyProtos.EventType.EVENT_RENAME)\n             .setContents(\n                 InotifyProtos.RenameEventProto.newBuilder()\n                     .setSrcPath(re.getSrcPath())\n                     .setDestPath(re.getDstPath())\n                     .setTimestamp(re.getTimestamp()).build().toByteString()\n             ).build());\n         break;\n       case APPEND:\n         Event.AppendEvent re2 \u003d (Event.AppendEvent) e;\n         builder.addEvents(InotifyProtos.EventProto.newBuilder()\n             .setType(InotifyProtos.EventType.EVENT_APPEND)\n             .setContents(\n                 InotifyProtos.AppendEventProto.newBuilder()\n                     .setPath(re2.getPath()).build().toByteString()\n             ).build());\n         break;\n       case UNLINK:\n         Event.UnlinkEvent ue \u003d (Event.UnlinkEvent) e;\n         builder.addEvents(InotifyProtos.EventProto.newBuilder()\n             .setType(InotifyProtos.EventType.EVENT_UNLINK)\n             .setContents(\n                 InotifyProtos.UnlinkEventProto.newBuilder()\n                     .setPath(ue.getPath())\n                     .setTimestamp(ue.getTimestamp()).build().toByteString()\n             ).build());\n         break;\n       default:\n         throw new RuntimeException(\"Unexpected inotify event: \" + e);\n       }\n     }\n     builder.setFirstTxid(el.getFirstTxid());\n     builder.setLastTxid(el.getLastTxid());\n     builder.setSyncTxid(el.getSyncTxid());\n     return GetEditsFromTxidResponseProto.newBuilder().setEventsList(\n         builder.build()).build();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static GetEditsFromTxidResponseProto convertEditsResponse(EventsList el) {\n    InotifyProtos.EventsListProto.Builder builder \u003d\n        InotifyProtos.EventsListProto.newBuilder();\n    for (Event e : el.getEvents()) {\n      switch(e.getEventType()) {\n      case CLOSE:\n        Event.CloseEvent ce \u003d (Event.CloseEvent) e;\n        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n            .setType(InotifyProtos.EventType.EVENT_CLOSE)\n            .setContents(\n                InotifyProtos.CloseEventProto.newBuilder()\n                    .setPath(ce.getPath())\n                    .setFileSize(ce.getFileSize())\n                    .setTimestamp(ce.getTimestamp()).build().toByteString()\n            ).build());\n        break;\n      case CREATE:\n        Event.CreateEvent ce2 \u003d (Event.CreateEvent) e;\n        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n            .setType(InotifyProtos.EventType.EVENT_CREATE)\n            .setContents(\n                InotifyProtos.CreateEventProto.newBuilder()\n                    .setType(createTypeConvert(ce2.getiNodeType()))\n                    .setPath(ce2.getPath())\n                    .setCtime(ce2.getCtime())\n                    .setOwnerName(ce2.getOwnerName())\n                    .setGroupName(ce2.getGroupName())\n                    .setPerms(convert(ce2.getPerms()))\n                    .setReplication(ce2.getReplication())\n                    .setSymlinkTarget(ce2.getSymlinkTarget() \u003d\u003d null ?\n                        \"\" : ce2.getSymlinkTarget())\n                    .setOverwrite(ce2.getOverwrite()).build().toByteString()\n            ).build());\n        break;\n      case METADATA:\n        Event.MetadataUpdateEvent me \u003d (Event.MetadataUpdateEvent) e;\n        InotifyProtos.MetadataUpdateEventProto.Builder metaB \u003d\n            InotifyProtos.MetadataUpdateEventProto.newBuilder()\n                .setPath(me.getPath())\n                .setType(metadataUpdateTypeConvert(me.getMetadataType()))\n                .setMtime(me.getMtime())\n                .setAtime(me.getAtime())\n                .setReplication(me.getReplication())\n                .setOwnerName(me.getOwnerName() \u003d\u003d null ? \"\" :\n                    me.getOwnerName())\n                .setGroupName(me.getGroupName() \u003d\u003d null ? \"\" :\n                    me.getGroupName())\n                .addAllAcls(me.getAcls() \u003d\u003d null ?\n                    Lists.\u003cAclEntryProto\u003enewArrayList() :\n                    convertAclEntryProto(me.getAcls()))\n                .addAllXAttrs(me.getxAttrs() \u003d\u003d null ?\n                    Lists.\u003cXAttrProto\u003enewArrayList() :\n                    convertXAttrProto(me.getxAttrs()))\n                .setXAttrsRemoved(me.isxAttrsRemoved());\n        if (me.getPerms() !\u003d null) {\n          metaB.setPerms(convert(me.getPerms()));\n        }\n        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n            .setType(InotifyProtos.EventType.EVENT_METADATA)\n            .setContents(metaB.build().toByteString())\n            .build());\n        break;\n      case RENAME:\n        Event.RenameEvent re \u003d (Event.RenameEvent) e;\n        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n            .setType(InotifyProtos.EventType.EVENT_RENAME)\n            .setContents(\n                InotifyProtos.RenameEventProto.newBuilder()\n                    .setSrcPath(re.getSrcPath())\n                    .setDestPath(re.getDstPath())\n                    .setTimestamp(re.getTimestamp()).build().toByteString()\n            ).build());\n        break;\n      case APPEND:\n        Event.AppendEvent re2 \u003d (Event.AppendEvent) e;\n        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n            .setType(InotifyProtos.EventType.EVENT_APPEND)\n            .setContents(\n                InotifyProtos.AppendEventProto.newBuilder()\n                    .setPath(re2.getPath()).build().toByteString()\n            ).build());\n        break;\n      case UNLINK:\n        Event.UnlinkEvent ue \u003d (Event.UnlinkEvent) e;\n        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n            .setType(InotifyProtos.EventType.EVENT_UNLINK)\n            .setContents(\n                InotifyProtos.UnlinkEventProto.newBuilder()\n                    .setPath(ue.getPath())\n                    .setTimestamp(ue.getTimestamp()).build().toByteString()\n            ).build());\n        break;\n      default:\n        throw new RuntimeException(\"Unexpected inotify event: \" + e);\n      }\n    }\n    builder.setFirstTxid(el.getFirstTxid());\n    builder.setLastTxid(el.getLastTxid());\n    builder.setSyncTxid(el.getSyncTxid());\n    return GetEditsFromTxidResponseProto.newBuilder().setEventsList(\n        builder.build()).build();\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/protocolPB/PBHelper.java",
      "extendedDetails": {}
    },
    "faa4455be512e070fa420084be8d1be5c72f3b08": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-6634. inotify in HDFS. Contributed by James Thomas.\n",
      "commitDate": "02/09/14 2:02 PM",
      "commitName": "faa4455be512e070fa420084be8d1be5c72f3b08",
      "commitAuthor": "Andrew Wang",
      "diff": "@@ -0,0 +1,101 @@\n+  public static GetEditsFromTxidResponseProto convertEditsResponse(EventsList el) {\n+    InotifyProtos.EventsListProto.Builder builder \u003d\n+        InotifyProtos.EventsListProto.newBuilder();\n+    for (Event e : el.getEvents()) {\n+      switch(e.getEventType()) {\n+      case CLOSE:\n+        Event.CloseEvent ce \u003d (Event.CloseEvent) e;\n+        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n+            .setType(InotifyProtos.EventType.EVENT_CLOSE)\n+            .setContents(\n+                InotifyProtos.CloseEventProto.newBuilder()\n+                    .setPath(ce.getPath())\n+                    .setFileSize(ce.getFileSize())\n+                    .setTimestamp(ce.getTimestamp()).build().toByteString()\n+            ).build());\n+        break;\n+      case CREATE:\n+        Event.CreateEvent ce2 \u003d (Event.CreateEvent) e;\n+        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n+            .setType(InotifyProtos.EventType.EVENT_CREATE)\n+            .setContents(\n+                InotifyProtos.CreateEventProto.newBuilder()\n+                    .setType(createTypeConvert(ce2.getiNodeType()))\n+                    .setPath(ce2.getPath())\n+                    .setCtime(ce2.getCtime())\n+                    .setOwnerName(ce2.getOwnerName())\n+                    .setGroupName(ce2.getGroupName())\n+                    .setPerms(convert(ce2.getPerms()))\n+                    .setReplication(ce2.getReplication())\n+                    .setSymlinkTarget(ce2.getSymlinkTarget() \u003d\u003d null ?\n+                        \"\" : ce2.getSymlinkTarget()).build().toByteString()\n+            ).build());\n+        break;\n+      case METADATA:\n+        Event.MetadataUpdateEvent me \u003d (Event.MetadataUpdateEvent) e;\n+        InotifyProtos.MetadataUpdateEventProto.Builder metaB \u003d\n+            InotifyProtos.MetadataUpdateEventProto.newBuilder()\n+                .setPath(me.getPath())\n+                .setType(metadataUpdateTypeConvert(me.getMetadataType()))\n+                .setMtime(me.getMtime())\n+                .setAtime(me.getAtime())\n+                .setReplication(me.getReplication())\n+                .setOwnerName(me.getOwnerName() \u003d\u003d null ? \"\" :\n+                    me.getOwnerName())\n+                .setGroupName(me.getGroupName() \u003d\u003d null ? \"\" :\n+                    me.getGroupName())\n+                .addAllAcls(me.getAcls() \u003d\u003d null ?\n+                    Lists.\u003cAclEntryProto\u003enewArrayList() :\n+                    convertAclEntryProto(me.getAcls()))\n+                .addAllXAttrs(me.getxAttrs() \u003d\u003d null ?\n+                    Lists.\u003cXAttrProto\u003enewArrayList() :\n+                    convertXAttrProto(me.getxAttrs()))\n+                .setXAttrsRemoved(me.isxAttrsRemoved());\n+        if (me.getPerms() !\u003d null) {\n+          metaB.setPerms(convert(me.getPerms()));\n+        }\n+        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n+            .setType(InotifyProtos.EventType.EVENT_METADATA)\n+            .setContents(metaB.build().toByteString())\n+            .build());\n+        break;\n+      case RENAME:\n+        Event.RenameEvent re \u003d (Event.RenameEvent) e;\n+        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n+            .setType(InotifyProtos.EventType.EVENT_RENAME)\n+            .setContents(\n+                InotifyProtos.RenameEventProto.newBuilder()\n+                    .setSrcPath(re.getSrcPath())\n+                    .setDestPath(re.getDstPath())\n+                    .setTimestamp(re.getTimestamp()).build().toByteString()\n+            ).build());\n+        break;\n+      case APPEND:\n+        Event.AppendEvent re2 \u003d (Event.AppendEvent) e;\n+        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n+            .setType(InotifyProtos.EventType.EVENT_APPEND)\n+            .setContents(\n+                InotifyProtos.AppendEventProto.newBuilder()\n+                    .setPath(re2.getPath()).build().toByteString()\n+            ).build());\n+        break;\n+      case UNLINK:\n+        Event.UnlinkEvent ue \u003d (Event.UnlinkEvent) e;\n+        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n+            .setType(InotifyProtos.EventType.EVENT_UNLINK)\n+            .setContents(\n+                InotifyProtos.UnlinkEventProto.newBuilder()\n+                    .setPath(ue.getPath())\n+                    .setTimestamp(ue.getTimestamp()).build().toByteString()\n+            ).build());\n+        break;\n+      default:\n+        throw new RuntimeException(\"Unexpected inotify event: \" + e);\n+      }\n+    }\n+    builder.setFirstTxid(el.getFirstTxid());\n+    builder.setLastTxid(el.getLastTxid());\n+    builder.setSyncTxid(el.getSyncTxid());\n+    return GetEditsFromTxidResponseProto.newBuilder().setEventsList(\n+        builder.build()).build();\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public static GetEditsFromTxidResponseProto convertEditsResponse(EventsList el) {\n    InotifyProtos.EventsListProto.Builder builder \u003d\n        InotifyProtos.EventsListProto.newBuilder();\n    for (Event e : el.getEvents()) {\n      switch(e.getEventType()) {\n      case CLOSE:\n        Event.CloseEvent ce \u003d (Event.CloseEvent) e;\n        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n            .setType(InotifyProtos.EventType.EVENT_CLOSE)\n            .setContents(\n                InotifyProtos.CloseEventProto.newBuilder()\n                    .setPath(ce.getPath())\n                    .setFileSize(ce.getFileSize())\n                    .setTimestamp(ce.getTimestamp()).build().toByteString()\n            ).build());\n        break;\n      case CREATE:\n        Event.CreateEvent ce2 \u003d (Event.CreateEvent) e;\n        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n            .setType(InotifyProtos.EventType.EVENT_CREATE)\n            .setContents(\n                InotifyProtos.CreateEventProto.newBuilder()\n                    .setType(createTypeConvert(ce2.getiNodeType()))\n                    .setPath(ce2.getPath())\n                    .setCtime(ce2.getCtime())\n                    .setOwnerName(ce2.getOwnerName())\n                    .setGroupName(ce2.getGroupName())\n                    .setPerms(convert(ce2.getPerms()))\n                    .setReplication(ce2.getReplication())\n                    .setSymlinkTarget(ce2.getSymlinkTarget() \u003d\u003d null ?\n                        \"\" : ce2.getSymlinkTarget()).build().toByteString()\n            ).build());\n        break;\n      case METADATA:\n        Event.MetadataUpdateEvent me \u003d (Event.MetadataUpdateEvent) e;\n        InotifyProtos.MetadataUpdateEventProto.Builder metaB \u003d\n            InotifyProtos.MetadataUpdateEventProto.newBuilder()\n                .setPath(me.getPath())\n                .setType(metadataUpdateTypeConvert(me.getMetadataType()))\n                .setMtime(me.getMtime())\n                .setAtime(me.getAtime())\n                .setReplication(me.getReplication())\n                .setOwnerName(me.getOwnerName() \u003d\u003d null ? \"\" :\n                    me.getOwnerName())\n                .setGroupName(me.getGroupName() \u003d\u003d null ? \"\" :\n                    me.getGroupName())\n                .addAllAcls(me.getAcls() \u003d\u003d null ?\n                    Lists.\u003cAclEntryProto\u003enewArrayList() :\n                    convertAclEntryProto(me.getAcls()))\n                .addAllXAttrs(me.getxAttrs() \u003d\u003d null ?\n                    Lists.\u003cXAttrProto\u003enewArrayList() :\n                    convertXAttrProto(me.getxAttrs()))\n                .setXAttrsRemoved(me.isxAttrsRemoved());\n        if (me.getPerms() !\u003d null) {\n          metaB.setPerms(convert(me.getPerms()));\n        }\n        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n            .setType(InotifyProtos.EventType.EVENT_METADATA)\n            .setContents(metaB.build().toByteString())\n            .build());\n        break;\n      case RENAME:\n        Event.RenameEvent re \u003d (Event.RenameEvent) e;\n        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n            .setType(InotifyProtos.EventType.EVENT_RENAME)\n            .setContents(\n                InotifyProtos.RenameEventProto.newBuilder()\n                    .setSrcPath(re.getSrcPath())\n                    .setDestPath(re.getDstPath())\n                    .setTimestamp(re.getTimestamp()).build().toByteString()\n            ).build());\n        break;\n      case APPEND:\n        Event.AppendEvent re2 \u003d (Event.AppendEvent) e;\n        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n            .setType(InotifyProtos.EventType.EVENT_APPEND)\n            .setContents(\n                InotifyProtos.AppendEventProto.newBuilder()\n                    .setPath(re2.getPath()).build().toByteString()\n            ).build());\n        break;\n      case UNLINK:\n        Event.UnlinkEvent ue \u003d (Event.UnlinkEvent) e;\n        builder.addEvents(InotifyProtos.EventProto.newBuilder()\n            .setType(InotifyProtos.EventType.EVENT_UNLINK)\n            .setContents(\n                InotifyProtos.UnlinkEventProto.newBuilder()\n                    .setPath(ue.getPath())\n                    .setTimestamp(ue.getTimestamp()).build().toByteString()\n            ).build());\n        break;\n      default:\n        throw new RuntimeException(\"Unexpected inotify event: \" + e);\n      }\n    }\n    builder.setFirstTxid(el.getFirstTxid());\n    builder.setLastTxid(el.getLastTxid());\n    builder.setSyncTxid(el.getSyncTxid());\n    return GetEditsFromTxidResponseProto.newBuilder().setEventsList(\n        builder.build()).build();\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/protocolPB/PBHelper.java"
    }
  }
}