{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "DataTransferProtoUtil.java",
  "functionName": "checkBlockOpStatus",
  "functionId": "checkBlockOpStatus___response-BlockOpResponseProto__logInfo-String__checkBlockPinningErr-boolean",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/protocol/datatransfer/DataTransferProtoUtil.java",
  "functionStartLine": 113,
  "functionEndLine": 139,
  "numCommitsSeen": 5,
  "timeTaken": 1335,
  "changeHistory": [
    "e24a923db50879f7dbe5d2afac0e6757089fb07d"
  ],
  "changeHistoryShort": {
    "e24a923db50879f7dbe5d2afac0e6757089fb07d": "Yintroduced"
  },
  "changeHistoryDetails": {
    "e24a923db50879f7dbe5d2afac0e6757089fb07d": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-11164: Mover should avoid unnecessary retries if the block is pinned. Contributed by Rakesh R\n",
      "commitDate": "13/12/16 5:09 PM",
      "commitName": "e24a923db50879f7dbe5d2afac0e6757089fb07d",
      "commitAuthor": "Uma Maheswara Rao G",
      "diff": "@@ -0,0 +1,27 @@\n+  public static void checkBlockOpStatus(BlockOpResponseProto response,\n+      String logInfo, boolean checkBlockPinningErr) throws IOException {\n+    if (response.getStatus() !\u003d Status.SUCCESS) {\n+      if (response.getStatus() \u003d\u003d Status.ERROR_ACCESS_TOKEN) {\n+        throw new InvalidBlockTokenException(\n+          \"Got access token error\"\n+          + \", status message \" + response.getMessage()\n+          + \", \" + logInfo\n+        );\n+      } else if (checkBlockPinningErr\n+          \u0026\u0026 response.getStatus() \u003d\u003d Status.ERROR_BLOCK_PINNED) {\n+        throw new BlockPinningException(\n+            \"Got error\"\n+            + \", status\u003d\" + response.getStatus().name()\n+            + \", status message \" + response.getMessage()\n+            + \", \" + logInfo\n+          );\n+      } else {\n+        throw new IOException(\n+          \"Got error\"\n+          + \", status\u003d\" + response.getStatus().name()\n+          + \", status message \" + response.getMessage()\n+          + \", \" + logInfo\n+        );\n+      }\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public static void checkBlockOpStatus(BlockOpResponseProto response,\n      String logInfo, boolean checkBlockPinningErr) throws IOException {\n    if (response.getStatus() !\u003d Status.SUCCESS) {\n      if (response.getStatus() \u003d\u003d Status.ERROR_ACCESS_TOKEN) {\n        throw new InvalidBlockTokenException(\n          \"Got access token error\"\n          + \", status message \" + response.getMessage()\n          + \", \" + logInfo\n        );\n      } else if (checkBlockPinningErr\n          \u0026\u0026 response.getStatus() \u003d\u003d Status.ERROR_BLOCK_PINNED) {\n        throw new BlockPinningException(\n            \"Got error\"\n            + \", status\u003d\" + response.getStatus().name()\n            + \", status message \" + response.getMessage()\n            + \", \" + logInfo\n          );\n      } else {\n        throw new IOException(\n          \"Got error\"\n          + \", status\u003d\" + response.getStatus().name()\n          + \", status message \" + response.getMessage()\n          + \", \" + logInfo\n        );\n      }\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/protocol/datatransfer/DataTransferProtoUtil.java"
    }
  }
}