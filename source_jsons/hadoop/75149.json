{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "UserGroupInformation.java",
  "functionName": "checkTGTAndReloginFromKeytab",
  "functionId": "checkTGTAndReloginFromKeytab",
  "sourceFilePath": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java",
  "functionStartLine": 1174,
  "functionEndLine": 1176,
  "numCommitsSeen": 104,
  "timeTaken": 3938,
  "changeHistory": [
    "59cf7588779145ad5850ad63426743dfe03d8347",
    "4c26c241ad2b907dc02cecefa9846cbe2b0465ba",
    "a37a993453c02048a618f71b5b9bc63b5a44dbf6",
    "4a5ba3b7bd2360fd9605863630b477d362874e1e",
    "002dd6968b89ded6a77858ccb50c9b2df074c226"
  ],
  "changeHistoryShort": {
    "59cf7588779145ad5850ad63426743dfe03d8347": "Ymultichange(Ymodifierchange,Ybodychange)",
    "4c26c241ad2b907dc02cecefa9846cbe2b0465ba": "Ybodychange",
    "a37a993453c02048a618f71b5b9bc63b5a44dbf6": "Ybodychange",
    "4a5ba3b7bd2360fd9605863630b477d362874e1e": "Ybodychange",
    "002dd6968b89ded6a77858ccb50c9b2df074c226": "Yintroduced"
  },
  "changeHistoryDetails": {
    "59cf7588779145ad5850ad63426743dfe03d8347": {
      "type": "Ymultichange(Ymodifierchange,Ybodychange)",
      "commitMessage": "HADOOP-9747. Reduce unnecessary UGI synchronization. Contributed by Daryn Sharp.\n",
      "commitDate": "23/02/18 11:10 AM",
      "commitName": "59cf7588779145ad5850ad63426743dfe03d8347",
      "commitAuthor": "Kihwal Lee",
      "subchanges": [
        {
          "type": "Ymodifierchange",
          "commitMessage": "HADOOP-9747. Reduce unnecessary UGI synchronization. Contributed by Daryn Sharp.\n",
          "commitDate": "23/02/18 11:10 AM",
          "commitName": "59cf7588779145ad5850ad63426743dfe03d8347",
          "commitAuthor": "Kihwal Lee",
          "commitDateOld": "27/12/17 11:17 PM",
          "commitNameOld": "d31c9d8c495794a803fb20729b5ed6b374e23eb4",
          "commitAuthorOld": "Jitendra Pandey",
          "daysBetweenCommits": 57.5,
          "commitsBetweenForRepo": 327,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,13 +1,3 @@\n-  public synchronized void checkTGTAndReloginFromKeytab() throws IOException {\n-    if (!isSecurityEnabled()\n-        || user.getAuthenticationMethod() !\u003d AuthenticationMethod.KERBEROS\n-        || !isKeytab) {\n-      return;\n-    }\n-    KerberosTicket tgt \u003d getTGT();\n-    if (tgt !\u003d null \u0026\u0026 !shouldRenewImmediatelyForTests \u0026\u0026\n-        Time.now() \u003c getRefreshTime(tgt)) {\n-      return;\n-    }\n-    reloginFromKeytab();\n+  public void checkTGTAndReloginFromKeytab() throws IOException {\n+    reloginFromKeytab(true);\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public void checkTGTAndReloginFromKeytab() throws IOException {\n    reloginFromKeytab(true);\n  }",
          "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java",
          "extendedDetails": {
            "oldValue": "[public, synchronized]",
            "newValue": "[public]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HADOOP-9747. Reduce unnecessary UGI synchronization. Contributed by Daryn Sharp.\n",
          "commitDate": "23/02/18 11:10 AM",
          "commitName": "59cf7588779145ad5850ad63426743dfe03d8347",
          "commitAuthor": "Kihwal Lee",
          "commitDateOld": "27/12/17 11:17 PM",
          "commitNameOld": "d31c9d8c495794a803fb20729b5ed6b374e23eb4",
          "commitAuthorOld": "Jitendra Pandey",
          "daysBetweenCommits": 57.5,
          "commitsBetweenForRepo": 327,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,13 +1,3 @@\n-  public synchronized void checkTGTAndReloginFromKeytab() throws IOException {\n-    if (!isSecurityEnabled()\n-        || user.getAuthenticationMethod() !\u003d AuthenticationMethod.KERBEROS\n-        || !isKeytab) {\n-      return;\n-    }\n-    KerberosTicket tgt \u003d getTGT();\n-    if (tgt !\u003d null \u0026\u0026 !shouldRenewImmediatelyForTests \u0026\u0026\n-        Time.now() \u003c getRefreshTime(tgt)) {\n-      return;\n-    }\n-    reloginFromKeytab();\n+  public void checkTGTAndReloginFromKeytab() throws IOException {\n+    reloginFromKeytab(true);\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public void checkTGTAndReloginFromKeytab() throws IOException {\n    reloginFromKeytab(true);\n  }",
          "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java",
          "extendedDetails": {}
        }
      ]
    },
    "4c26c241ad2b907dc02cecefa9846cbe2b0465ba": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-13805. UGI.getCurrentUser() fails if user does not have a keytab associated. Contributed by Xiao Chen, Wei-Chiu Chuang, Yongjun Zhang.\n",
      "commitDate": "17/02/17 9:18 AM",
      "commitName": "4c26c241ad2b907dc02cecefa9846cbe2b0465ba",
      "commitAuthor": "Yongjun Zhang",
      "commitDateOld": "25/01/17 1:29 PM",
      "commitNameOld": "7fc3e68a876132563aa2321519fc6941e37b2cae",
      "commitAuthorOld": "Steve Loughran",
      "daysBetweenCommits": 22.83,
      "commitsBetweenForRepo": 109,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,12 +1,13 @@\n   public synchronized void checkTGTAndReloginFromKeytab() throws IOException {\n     if (!isSecurityEnabled()\n         || user.getAuthenticationMethod() !\u003d AuthenticationMethod.KERBEROS\n-        || !isKeytab)\n+        || !isKeytab) {\n       return;\n+    }\n     KerberosTicket tgt \u003d getTGT();\n     if (tgt !\u003d null \u0026\u0026 !shouldRenewImmediatelyForTests \u0026\u0026\n         Time.now() \u003c getRefreshTime(tgt)) {\n       return;\n     }\n     reloginFromKeytab();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public synchronized void checkTGTAndReloginFromKeytab() throws IOException {\n    if (!isSecurityEnabled()\n        || user.getAuthenticationMethod() !\u003d AuthenticationMethod.KERBEROS\n        || !isKeytab) {\n      return;\n    }\n    KerberosTicket tgt \u003d getTGT();\n    if (tgt !\u003d null \u0026\u0026 !shouldRenewImmediatelyForTests \u0026\u0026\n        Time.now() \u003c getRefreshTime(tgt)) {\n      return;\n    }\n    reloginFromKeytab();\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java",
      "extendedDetails": {}
    },
    "a37a993453c02048a618f71b5b9bc63b5a44dbf6": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-10786. Fix UGI#reloginFromKeytab on Java 8. Contributed by Stephen Chu.\n",
      "commitDate": "09/11/14 5:48 PM",
      "commitName": "a37a993453c02048a618f71b5b9bc63b5a44dbf6",
      "commitAuthor": "Haohui Mai",
      "commitDateOld": "30/09/14 5:30 PM",
      "commitNameOld": "a469833639c7a5ef525a108a1ac70213881e627d",
      "commitAuthorOld": "Steve Loughran",
      "daysBetweenCommits": 40.05,
      "commitsBetweenForRepo": 379,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,11 +1,12 @@\n   public synchronized void checkTGTAndReloginFromKeytab() throws IOException {\n     if (!isSecurityEnabled()\n         || user.getAuthenticationMethod() !\u003d AuthenticationMethod.KERBEROS\n         || !isKeytab)\n       return;\n     KerberosTicket tgt \u003d getTGT();\n-    if (tgt !\u003d null \u0026\u0026 Time.now() \u003c getRefreshTime(tgt)) {\n+    if (tgt !\u003d null \u0026\u0026 !shouldRenewImmediatelyForTests \u0026\u0026\n+        Time.now() \u003c getRefreshTime(tgt)) {\n       return;\n     }\n     reloginFromKeytab();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public synchronized void checkTGTAndReloginFromKeytab() throws IOException {\n    if (!isSecurityEnabled()\n        || user.getAuthenticationMethod() !\u003d AuthenticationMethod.KERBEROS\n        || !isKeytab)\n      return;\n    KerberosTicket tgt \u003d getTGT();\n    if (tgt !\u003d null \u0026\u0026 !shouldRenewImmediatelyForTests \u0026\u0026\n        Time.now() \u003c getRefreshTime(tgt)) {\n      return;\n    }\n    reloginFromKeytab();\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java",
      "extendedDetails": {}
    },
    "4a5ba3b7bd2360fd9605863630b477d362874e1e": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-3641. Move server Util time methods to common and use now instead of System#currentTimeMillis. Contributed by Eli Collins\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1360858 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "12/07/12 12:01 PM",
      "commitName": "4a5ba3b7bd2360fd9605863630b477d362874e1e",
      "commitAuthor": "Eli Collins",
      "commitDateOld": "11/07/12 6:22 PM",
      "commitNameOld": "96d77c17cc1f792de4ae026f236e091156d28b53",
      "commitAuthorOld": "Aaron Myers",
      "daysBetweenCommits": 0.74,
      "commitsBetweenForRepo": 3,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,11 +1,11 @@\n   public synchronized void checkTGTAndReloginFromKeytab() throws IOException {\n     if (!isSecurityEnabled()\n         || user.getAuthenticationMethod() !\u003d AuthenticationMethod.KERBEROS\n         || !isKeytab)\n       return;\n     KerberosTicket tgt \u003d getTGT();\n-    if (tgt !\u003d null \u0026\u0026 System.currentTimeMillis() \u003c getRefreshTime(tgt)) {\n+    if (tgt !\u003d null \u0026\u0026 Time.now() \u003c getRefreshTime(tgt)) {\n       return;\n     }\n     reloginFromKeytab();\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public synchronized void checkTGTAndReloginFromKeytab() throws IOException {\n    if (!isSecurityEnabled()\n        || user.getAuthenticationMethod() !\u003d AuthenticationMethod.KERBEROS\n        || !isKeytab)\n      return;\n    KerberosTicket tgt \u003d getTGT();\n    if (tgt !\u003d null \u0026\u0026 Time.now() \u003c getRefreshTime(tgt)) {\n      return;\n    }\n    reloginFromKeytab();\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java",
      "extendedDetails": {}
    },
    "002dd6968b89ded6a77858ccb50c9b2df074c226": {
      "type": "Yintroduced",
      "commitMessage": "MAPREDUCE-2764. Fix renewal of dfs delegation tokens. Contributed by Owen.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1183187 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "13/10/11 6:24 PM",
      "commitName": "002dd6968b89ded6a77858ccb50c9b2df074c226",
      "commitAuthor": "Jitendra Nath Pandey",
      "diff": "@@ -0,0 +1,11 @@\n+  public synchronized void checkTGTAndReloginFromKeytab() throws IOException {\n+    if (!isSecurityEnabled()\n+        || user.getAuthenticationMethod() !\u003d AuthenticationMethod.KERBEROS\n+        || !isKeytab)\n+      return;\n+    KerberosTicket tgt \u003d getTGT();\n+    if (tgt !\u003d null \u0026\u0026 System.currentTimeMillis() \u003c getRefreshTime(tgt)) {\n+      return;\n+    }\n+    reloginFromKeytab();\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public synchronized void checkTGTAndReloginFromKeytab() throws IOException {\n    if (!isSecurityEnabled()\n        || user.getAuthenticationMethod() !\u003d AuthenticationMethod.KERBEROS\n        || !isKeytab)\n      return;\n    KerberosTicket tgt \u003d getTGT();\n    if (tgt !\u003d null \u0026\u0026 System.currentTimeMillis() \u003c getRefreshTime(tgt)) {\n      return;\n    }\n    reloginFromKeytab();\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/UserGroupInformation.java"
    }
  }
}