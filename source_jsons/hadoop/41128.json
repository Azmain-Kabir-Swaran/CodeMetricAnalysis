{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "DominantResourceFairnessPolicy.java",
  "functionName": "calculateClusterAndFairRatios",
  "functionId": "calculateClusterAndFairRatios___resourceInfo-ResourceInformation[]__weight-float__clusterInfo-ResourceInformation[]__shares-double[]",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/fair/policies/DominantResourceFairnessPolicy.java",
  "functionStartLine": 461,
  "functionEndLine": 479,
  "numCommitsSeen": 20,
  "timeTaken": 1100,
  "changeHistory": [
    "9711b78998ca3a1f7734058a78c7baddd130ce0f"
  ],
  "changeHistoryShort": {
    "9711b78998ca3a1f7734058a78c7baddd130ce0f": "Yintroduced"
  },
  "changeHistoryDetails": {
    "9711b78998ca3a1f7734058a78c7baddd130ce0f": {
      "type": "Yintroduced",
      "commitMessage": "YARN-7374. Improve performance of DRF comparisons for resource types in fair scheduler\n",
      "commitDate": "29/10/17 6:54 PM",
      "commitName": "9711b78998ca3a1f7734058a78c7baddd130ce0f",
      "commitAuthor": "Daniel Templeton",
      "diff": "@@ -0,0 +1,19 @@\n+    int calculateClusterAndFairRatios(ResourceInformation[] resourceInfo,\n+        float weight, ResourceInformation[] clusterInfo, double[] shares) {\n+      int dominant;\n+\n+      shares[Resource.MEMORY_INDEX] \u003d\n+          ((double) resourceInfo[Resource.MEMORY_INDEX].getValue()) /\n+          clusterInfo[Resource.MEMORY_INDEX].getValue();\n+      shares[Resource.VCORES_INDEX] \u003d\n+          ((double) resourceInfo[Resource.VCORES_INDEX].getValue()) /\n+          clusterInfo[Resource.VCORES_INDEX].getValue();\n+      dominant \u003d\n+          shares[Resource.VCORES_INDEX] \u003e shares[Resource.MEMORY_INDEX] ?\n+          Resource.VCORES_INDEX : Resource.MEMORY_INDEX;\n+\n+      shares[Resource.MEMORY_INDEX] /\u003d weight;\n+      shares[Resource.VCORES_INDEX] /\u003d weight;\n+\n+      return dominant;\n+    }\n\\ No newline at end of file\n",
      "actualSource": "    int calculateClusterAndFairRatios(ResourceInformation[] resourceInfo,\n        float weight, ResourceInformation[] clusterInfo, double[] shares) {\n      int dominant;\n\n      shares[Resource.MEMORY_INDEX] \u003d\n          ((double) resourceInfo[Resource.MEMORY_INDEX].getValue()) /\n          clusterInfo[Resource.MEMORY_INDEX].getValue();\n      shares[Resource.VCORES_INDEX] \u003d\n          ((double) resourceInfo[Resource.VCORES_INDEX].getValue()) /\n          clusterInfo[Resource.VCORES_INDEX].getValue();\n      dominant \u003d\n          shares[Resource.VCORES_INDEX] \u003e shares[Resource.MEMORY_INDEX] ?\n          Resource.VCORES_INDEX : Resource.MEMORY_INDEX;\n\n      shares[Resource.MEMORY_INDEX] /\u003d weight;\n      shares[Resource.VCORES_INDEX] /\u003d weight;\n\n      return dominant;\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/fair/policies/DominantResourceFairnessPolicy.java"
    }
  }
}