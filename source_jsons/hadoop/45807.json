{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "LogAggregationFileController.java",
  "functionName": "initialize",
  "functionId": "initialize___conf-Configuration__controllerName-String",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/logaggregation/filecontroller/LogAggregationFileController.java",
  "functionStartLine": 119,
  "functionEndLine": 138,
  "numCommitsSeen": 21,
  "timeTaken": 2542,
  "changeHistory": [
    "7d831eca645f93d064975ebae35a7cbea3bbad31",
    "2b39ad26984d641bad57db2cfcc0b7515ef95f46",
    "328f0847e3d98cad8c368d57499f31081c153237",
    "c2cb7ea1ef6532020b69031dbd18b0f9b8369f0f"
  ],
  "changeHistoryShort": {
    "7d831eca645f93d064975ebae35a7cbea3bbad31": "Ybodychange",
    "2b39ad26984d641bad57db2cfcc0b7515ef95f46": "Ybodychange",
    "328f0847e3d98cad8c368d57499f31081c153237": "Ybodychange",
    "c2cb7ea1ef6532020b69031dbd18b0f9b8369f0f": "Yintroduced"
  },
  "changeHistoryDetails": {
    "7d831eca645f93d064975ebae35a7cbea3bbad31": {
      "type": "Ybodychange",
      "commitMessage": "YARN-9519. TFile log aggregation file format is not working for yarn.log-aggregation.TFile.remote-app-log-dir config. Contributed by Adam Antal.\n",
      "commitDate": "14/05/19 10:48 AM",
      "commitName": "7d831eca645f93d064975ebae35a7cbea3bbad31",
      "commitAuthor": "Sunil G",
      "commitDateOld": "06/05/19 4:48 PM",
      "commitNameOld": "49e1292ea3e4d00ab0b0191bd8c4ea4d2afed671",
      "commitAuthorOld": "Eric Yang",
      "daysBetweenCommits": 7.75,
      "commitsBetweenForRepo": 37,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,20 @@\n   public void initialize(Configuration conf, String controllerName) {\n     this.conf \u003d conf;\n     int configuredRetentionSize \u003d conf.getInt(\n         YarnConfiguration.NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP,\n         YarnConfiguration\n             .DEFAULT_NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP);\n     if (configuredRetentionSize \u003c\u003d 0) {\n       this.retentionSize \u003d\n           YarnConfiguration\n               .DEFAULT_NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP;\n     } else {\n       this.retentionSize \u003d configuredRetentionSize;\n     }\n     this.fileControllerName \u003d controllerName;\n+\n+    extractRemoteRootLogDir();\n+    extractRemoteRootLogDirSuffix();\n+\n     initInternal(conf);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void initialize(Configuration conf, String controllerName) {\n    this.conf \u003d conf;\n    int configuredRetentionSize \u003d conf.getInt(\n        YarnConfiguration.NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP,\n        YarnConfiguration\n            .DEFAULT_NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP);\n    if (configuredRetentionSize \u003c\u003d 0) {\n      this.retentionSize \u003d\n          YarnConfiguration\n              .DEFAULT_NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP;\n    } else {\n      this.retentionSize \u003d configuredRetentionSize;\n    }\n    this.fileControllerName \u003d controllerName;\n\n    extractRemoteRootLogDir();\n    extractRemoteRootLogDirSuffix();\n\n    initInternal(conf);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/logaggregation/filecontroller/LogAggregationFileController.java",
      "extendedDetails": {}
    },
    "2b39ad26984d641bad57db2cfcc0b7515ef95f46": {
      "type": "Ybodychange",
      "commitMessage": "YARN-8584. Several typos in Log Aggregation related classes. Contributed by Szilard Nemeth.\n",
      "commitDate": "30/07/18 10:55 AM",
      "commitName": "2b39ad26984d641bad57db2cfcc0b7515ef95f46",
      "commitAuthor": "bibinchundatt",
      "commitDateOld": "12/06/18 8:35 AM",
      "commitNameOld": "652bcbb3e4950758e61ce123ecc1798ae2b60a7f",
      "commitAuthorOld": "Akira Ajisaka",
      "daysBetweenCommits": 48.1,
      "commitsBetweenForRepo": 294,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,16 @@\n   public void initialize(Configuration conf, String controllerName) {\n     this.conf \u003d conf;\n-    int configuredRentionSize \u003d conf.getInt(\n+    int configuredRetentionSize \u003d conf.getInt(\n         YarnConfiguration.NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP,\n         YarnConfiguration\n             .DEFAULT_NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP);\n-    if (configuredRentionSize \u003c\u003d 0) {\n+    if (configuredRetentionSize \u003c\u003d 0) {\n       this.retentionSize \u003d\n           YarnConfiguration\n               .DEFAULT_NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP;\n     } else {\n-      this.retentionSize \u003d configuredRentionSize;\n+      this.retentionSize \u003d configuredRetentionSize;\n     }\n     this.fileControllerName \u003d controllerName;\n     initInternal(conf);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void initialize(Configuration conf, String controllerName) {\n    this.conf \u003d conf;\n    int configuredRetentionSize \u003d conf.getInt(\n        YarnConfiguration.NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP,\n        YarnConfiguration\n            .DEFAULT_NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP);\n    if (configuredRetentionSize \u003c\u003d 0) {\n      this.retentionSize \u003d\n          YarnConfiguration\n              .DEFAULT_NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP;\n    } else {\n      this.retentionSize \u003d configuredRetentionSize;\n    }\n    this.fileControllerName \u003d controllerName;\n    initInternal(conf);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/logaggregation/filecontroller/LogAggregationFileController.java",
      "extendedDetails": {}
    },
    "328f0847e3d98cad8c368d57499f31081c153237": {
      "type": "Ybodychange",
      "commitMessage": "YARN-8128. Documenting the per-node per-app file limit in YARN log aggregation. Contributed by Xuan Gong.\n",
      "commitDate": "17/05/18 12:47 PM",
      "commitName": "328f0847e3d98cad8c368d57499f31081c153237",
      "commitAuthor": "Vinod Kumar Vavilapalli (I am also known as @tshooter.)",
      "commitDateOld": "11/02/18 6:28 PM",
      "commitNameOld": "d4c98579e36df7eeb788352d7b76cd2c7448c511",
      "commitAuthorOld": "Wangda Tan",
      "daysBetweenCommits": 94.72,
      "commitsBetweenForRepo": 1285,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,14 +1,16 @@\n   public void initialize(Configuration conf, String controllerName) {\n     this.conf \u003d conf;\n-    int configuredRentionSize \u003d\n-        conf.getInt(NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP,\n-            DEFAULT_NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP);\n+    int configuredRentionSize \u003d conf.getInt(\n+        YarnConfiguration.NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP,\n+        YarnConfiguration\n+            .DEFAULT_NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP);\n     if (configuredRentionSize \u003c\u003d 0) {\n       this.retentionSize \u003d\n-        DEFAULT_NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP;\n+          YarnConfiguration\n+              .DEFAULT_NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP;\n     } else {\n       this.retentionSize \u003d configuredRentionSize;\n     }\n     this.fileControllerName \u003d controllerName;\n     initInternal(conf);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void initialize(Configuration conf, String controllerName) {\n    this.conf \u003d conf;\n    int configuredRentionSize \u003d conf.getInt(\n        YarnConfiguration.NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP,\n        YarnConfiguration\n            .DEFAULT_NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP);\n    if (configuredRentionSize \u003c\u003d 0) {\n      this.retentionSize \u003d\n          YarnConfiguration\n              .DEFAULT_NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP;\n    } else {\n      this.retentionSize \u003d configuredRentionSize;\n    }\n    this.fileControllerName \u003d controllerName;\n    initInternal(conf);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/logaggregation/filecontroller/LogAggregationFileController.java",
      "extendedDetails": {}
    },
    "c2cb7ea1ef6532020b69031dbd18b0f9b8369f0f": {
      "type": "Yintroduced",
      "commitMessage": "YARN-6876. Create an abstract log writer for extendability. Contributed by Xuan Gong.\n",
      "commitDate": "24/08/17 1:36 PM",
      "commitName": "c2cb7ea1ef6532020b69031dbd18b0f9b8369f0f",
      "commitAuthor": "Junping Du",
      "diff": "@@ -0,0 +1,14 @@\n+  public void initialize(Configuration conf, String controllerName) {\n+    this.conf \u003d conf;\n+    int configuredRentionSize \u003d\n+        conf.getInt(NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP,\n+            DEFAULT_NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP);\n+    if (configuredRentionSize \u003c\u003d 0) {\n+      this.retentionSize \u003d\n+        DEFAULT_NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP;\n+    } else {\n+      this.retentionSize \u003d configuredRentionSize;\n+    }\n+    this.fileControllerName \u003d controllerName;\n+    initInternal(conf);\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public void initialize(Configuration conf, String controllerName) {\n    this.conf \u003d conf;\n    int configuredRentionSize \u003d\n        conf.getInt(NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP,\n            DEFAULT_NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP);\n    if (configuredRentionSize \u003c\u003d 0) {\n      this.retentionSize \u003d\n        DEFAULT_NM_LOG_AGGREGATION_NUM_LOG_FILES_SIZE_PER_APP;\n    } else {\n      this.retentionSize \u003d configuredRentionSize;\n    }\n    this.fileControllerName \u003d controllerName;\n    initInternal(conf);\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/logaggregation/filecontroller/LogAggregationFileController.java"
    }
  }
}