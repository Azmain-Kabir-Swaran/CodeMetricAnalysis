{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "RetriableFileCopyCommand.java",
  "functionName": "getNumBytesToRead",
  "functionId": "getNumBytesToRead___fileLength-long__position-long__bufLength-long",
  "sourceFilePath": "hadoop-tools/hadoop-distcp/src/main/java/org/apache/hadoop/tools/mapred/RetriableFileCopyCommand.java",
  "functionStartLine": 317,
  "functionEndLine": 323,
  "numCommitsSeen": 29,
  "timeTaken": 1774,
  "changeHistory": [
    "51c64b357d4bd1a0038e61df3d4b8ea0a3ad7449"
  ],
  "changeHistoryShort": {
    "51c64b357d4bd1a0038e61df3d4b8ea0a3ad7449": "Yintroduced"
  },
  "changeHistoryDetails": {
    "51c64b357d4bd1a0038e61df3d4b8ea0a3ad7449": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-13660. DistCp job fails when new data is appended in the file while the DistCp copy job is running\n\nThis uses the length of the file known at the start of the copy to determine the amount of data to copy.\n\n* If a file is appended to during the copy, the original bytes are copied.\n* If a file is truncated during a copy, or the attempt to read the data fails with a truncated stream,\n  distcp will now fail. Until now these failures were not detected.\n\nContributed by Mukund Thakur.\n\nChange-Id: I576a49d951fa48d37a45a7e4c82c47488aa8e884\n",
      "commitDate": "24/09/19 3:23 AM",
      "commitName": "51c64b357d4bd1a0038e61df3d4b8ea0a3ad7449",
      "commitAuthor": "Mukund Thakur",
      "diff": "@@ -0,0 +1,7 @@\n+  long getNumBytesToRead(long fileLength, long position, long bufLength) {\n+    if (position + bufLength \u003c fileLength) {\n+      return  bufLength;\n+    } else {\n+      return fileLength - position;\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  long getNumBytesToRead(long fileLength, long position, long bufLength) {\n    if (position + bufLength \u003c fileLength) {\n      return  bufLength;\n    } else {\n      return fileLength - position;\n    }\n  }",
      "path": "hadoop-tools/hadoop-distcp/src/main/java/org/apache/hadoop/tools/mapred/RetriableFileCopyCommand.java"
    }
  }
}