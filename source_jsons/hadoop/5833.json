{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "NameNodeRpcServer.java",
  "functionName": "blockReceivedAndDeleted",
  "functionId": "blockReceivedAndDeleted___nodeReg-DatanodeRegistration(modifiers-final)__poolId-String__receivedAndDeletedBlocks-StorageReceivedDeletedBlocks[]",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeRpcServer.java",
  "functionStartLine": 1662,
  "functionEndLine": 1690,
  "numCommitsSeen": 492,
  "timeTaken": 8579,
  "changeHistory": [
    "f741476146574550a1a208d58ef8be76639e5ddc",
    "db334bb8625da97c7e518cbcf477530c7ba7001e",
    "45db4d204b796eee6dd0e39d3cc94b70c47028d4",
    "938565925adb9d866e8c6951361cd5582076e013",
    "5d9d702607913685eab0d8ad077040ddc82bf085",
    "1b531c1dbb452a6192fad411605d2baaa3831bcd",
    "db71de2e11cfa56a254ef4c92fea5ef4f8c19100",
    "be7dd8333a7e56e732171db0781786987de03195"
  ],
  "changeHistoryShort": {
    "f741476146574550a1a208d58ef8be76639e5ddc": "Ymultichange(Ybodychange,Yparametermetachange)",
    "db334bb8625da97c7e518cbcf477530c7ba7001e": "Ybodychange",
    "45db4d204b796eee6dd0e39d3cc94b70c47028d4": "Ybodychange",
    "938565925adb9d866e8c6951361cd5582076e013": "Ybodychange",
    "5d9d702607913685eab0d8ad077040ddc82bf085": "Ybodychange",
    "1b531c1dbb452a6192fad411605d2baaa3831bcd": "Ybodychange",
    "db71de2e11cfa56a254ef4c92fea5ef4f8c19100": "Ybodychange",
    "be7dd8333a7e56e732171db0781786987de03195": "Ybodychange"
  },
  "changeHistoryDetails": {
    "f741476146574550a1a208d58ef8be76639e5ddc": {
      "type": "Ymultichange(Ybodychange,Yparametermetachange)",
      "commitMessage": "HDFS-9198. Coalesce IBR processing in the NN. (Daryn Sharp via umamahesh)\n",
      "commitDate": "16/12/15 6:16 PM",
      "commitName": "f741476146574550a1a208d58ef8be76639e5ddc",
      "commitAuthor": "Uma Mahesh",
      "subchanges": [
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-9198. Coalesce IBR processing in the NN. (Daryn Sharp via umamahesh)\n",
          "commitDate": "16/12/15 6:16 PM",
          "commitName": "f741476146574550a1a208d58ef8be76639e5ddc",
          "commitAuthor": "Uma Mahesh",
          "commitDateOld": "30/11/15 7:29 PM",
          "commitNameOld": "1c05393b51748033279bff31dbc5c5cae7fc3a86",
          "commitAuthorOld": "Akira Ajisaka",
          "daysBetweenCommits": 15.95,
          "commitsBetweenForRepo": 95,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,14 +1,29 @@\n-  public void blockReceivedAndDeleted(DatanodeRegistration nodeReg, String poolId,\n-      StorageReceivedDeletedBlocks[] receivedAndDeletedBlocks) throws IOException {\n+  public void blockReceivedAndDeleted(final DatanodeRegistration nodeReg,\n+      String poolId, StorageReceivedDeletedBlocks[] receivedAndDeletedBlocks)\n+          throws IOException {\n     checkNNStartup();\n     verifyRequest(nodeReg);\n     metrics.incrBlockReceivedAndDeletedOps();\n     if(blockStateChangeLog.isDebugEnabled()) {\n       blockStateChangeLog.debug(\"*BLOCK* NameNode.blockReceivedAndDeleted: \"\n           +\"from \"+nodeReg+\" \"+receivedAndDeletedBlocks.length\n           +\" blocks.\");\n     }\n-    for(StorageReceivedDeletedBlocks r : receivedAndDeletedBlocks) {\n-      namesystem.processIncrementalBlockReport(nodeReg, r);\n+    final BlockManager bm \u003d namesystem.getBlockManager();\n+    for (final StorageReceivedDeletedBlocks r : receivedAndDeletedBlocks) {\n+      bm.enqueueBlockOp(new Runnable() {\n+        @Override\n+        public void run() {\n+          try {\n+            namesystem.processIncrementalBlockReport(nodeReg, r);\n+          } catch (Exception ex) {\n+            // usually because the node is unregistered/dead.  next heartbeat\n+            // will correct the problem\n+            blockStateChangeLog.error(\n+                \"*BLOCK* NameNode.blockReceivedAndDeleted: \"\n+                    + \"failed from \" + nodeReg + \": \" + ex.getMessage());\n+          }\n+        }\n+      });\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public void blockReceivedAndDeleted(final DatanodeRegistration nodeReg,\n      String poolId, StorageReceivedDeletedBlocks[] receivedAndDeletedBlocks)\n          throws IOException {\n    checkNNStartup();\n    verifyRequest(nodeReg);\n    metrics.incrBlockReceivedAndDeletedOps();\n    if(blockStateChangeLog.isDebugEnabled()) {\n      blockStateChangeLog.debug(\"*BLOCK* NameNode.blockReceivedAndDeleted: \"\n          +\"from \"+nodeReg+\" \"+receivedAndDeletedBlocks.length\n          +\" blocks.\");\n    }\n    final BlockManager bm \u003d namesystem.getBlockManager();\n    for (final StorageReceivedDeletedBlocks r : receivedAndDeletedBlocks) {\n      bm.enqueueBlockOp(new Runnable() {\n        @Override\n        public void run() {\n          try {\n            namesystem.processIncrementalBlockReport(nodeReg, r);\n          } catch (Exception ex) {\n            // usually because the node is unregistered/dead.  next heartbeat\n            // will correct the problem\n            blockStateChangeLog.error(\n                \"*BLOCK* NameNode.blockReceivedAndDeleted: \"\n                    + \"failed from \" + nodeReg + \": \" + ex.getMessage());\n          }\n        }\n      });\n    }\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeRpcServer.java",
          "extendedDetails": {}
        },
        {
          "type": "Yparametermetachange",
          "commitMessage": "HDFS-9198. Coalesce IBR processing in the NN. (Daryn Sharp via umamahesh)\n",
          "commitDate": "16/12/15 6:16 PM",
          "commitName": "f741476146574550a1a208d58ef8be76639e5ddc",
          "commitAuthor": "Uma Mahesh",
          "commitDateOld": "30/11/15 7:29 PM",
          "commitNameOld": "1c05393b51748033279bff31dbc5c5cae7fc3a86",
          "commitAuthorOld": "Akira Ajisaka",
          "daysBetweenCommits": 15.95,
          "commitsBetweenForRepo": 95,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,14 +1,29 @@\n-  public void blockReceivedAndDeleted(DatanodeRegistration nodeReg, String poolId,\n-      StorageReceivedDeletedBlocks[] receivedAndDeletedBlocks) throws IOException {\n+  public void blockReceivedAndDeleted(final DatanodeRegistration nodeReg,\n+      String poolId, StorageReceivedDeletedBlocks[] receivedAndDeletedBlocks)\n+          throws IOException {\n     checkNNStartup();\n     verifyRequest(nodeReg);\n     metrics.incrBlockReceivedAndDeletedOps();\n     if(blockStateChangeLog.isDebugEnabled()) {\n       blockStateChangeLog.debug(\"*BLOCK* NameNode.blockReceivedAndDeleted: \"\n           +\"from \"+nodeReg+\" \"+receivedAndDeletedBlocks.length\n           +\" blocks.\");\n     }\n-    for(StorageReceivedDeletedBlocks r : receivedAndDeletedBlocks) {\n-      namesystem.processIncrementalBlockReport(nodeReg, r);\n+    final BlockManager bm \u003d namesystem.getBlockManager();\n+    for (final StorageReceivedDeletedBlocks r : receivedAndDeletedBlocks) {\n+      bm.enqueueBlockOp(new Runnable() {\n+        @Override\n+        public void run() {\n+          try {\n+            namesystem.processIncrementalBlockReport(nodeReg, r);\n+          } catch (Exception ex) {\n+            // usually because the node is unregistered/dead.  next heartbeat\n+            // will correct the problem\n+            blockStateChangeLog.error(\n+                \"*BLOCK* NameNode.blockReceivedAndDeleted: \"\n+                    + \"failed from \" + nodeReg + \": \" + ex.getMessage());\n+          }\n+        }\n+      });\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public void blockReceivedAndDeleted(final DatanodeRegistration nodeReg,\n      String poolId, StorageReceivedDeletedBlocks[] receivedAndDeletedBlocks)\n          throws IOException {\n    checkNNStartup();\n    verifyRequest(nodeReg);\n    metrics.incrBlockReceivedAndDeletedOps();\n    if(blockStateChangeLog.isDebugEnabled()) {\n      blockStateChangeLog.debug(\"*BLOCK* NameNode.blockReceivedAndDeleted: \"\n          +\"from \"+nodeReg+\" \"+receivedAndDeletedBlocks.length\n          +\" blocks.\");\n    }\n    final BlockManager bm \u003d namesystem.getBlockManager();\n    for (final StorageReceivedDeletedBlocks r : receivedAndDeletedBlocks) {\n      bm.enqueueBlockOp(new Runnable() {\n        @Override\n        public void run() {\n          try {\n            namesystem.processIncrementalBlockReport(nodeReg, r);\n          } catch (Exception ex) {\n            // usually because the node is unregistered/dead.  next heartbeat\n            // will correct the problem\n            blockStateChangeLog.error(\n                \"*BLOCK* NameNode.blockReceivedAndDeleted: \"\n                    + \"failed from \" + nodeReg + \": \" + ex.getMessage());\n          }\n        }\n      });\n    }\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeRpcServer.java",
          "extendedDetails": {
            "oldValue": "[nodeReg-DatanodeRegistration, poolId-String, receivedAndDeletedBlocks-StorageReceivedDeletedBlocks[]]",
            "newValue": "[nodeReg-DatanodeRegistration(modifiers-final), poolId-String, receivedAndDeletedBlocks-StorageReceivedDeletedBlocks[]]"
          }
        }
      ]
    },
    "db334bb8625da97c7e518cbcf477530c7ba7001e": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-3443. Fix NPE when namenode transition to active during startup by adding checkNNStartup() in NameNodeRpcServer.  Contributed by Vinayakumar B\n",
      "commitDate": "21/01/15 11:33 AM",
      "commitName": "db334bb8625da97c7e518cbcf477530c7ba7001e",
      "commitAuthor": "Tsz-Wo Nicholas Sze",
      "commitDateOld": "12/01/15 10:50 PM",
      "commitNameOld": "7e9358feb326d48b8c4f00249e7af5023cebd2e2",
      "commitAuthorOld": "Plamen Jeliazkov",
      "daysBetweenCommits": 8.53,
      "commitsBetweenForRepo": 59,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,13 +1,14 @@\n   public void blockReceivedAndDeleted(DatanodeRegistration nodeReg, String poolId,\n       StorageReceivedDeletedBlocks[] receivedAndDeletedBlocks) throws IOException {\n+    checkNNStartup();\n     verifyRequest(nodeReg);\n     metrics.incrBlockReceivedAndDeletedOps();\n     if(blockStateChangeLog.isDebugEnabled()) {\n       blockStateChangeLog.debug(\"*BLOCK* NameNode.blockReceivedAndDeleted: \"\n           +\"from \"+nodeReg+\" \"+receivedAndDeletedBlocks.length\n           +\" blocks.\");\n     }\n     for(StorageReceivedDeletedBlocks r : receivedAndDeletedBlocks) {\n       namesystem.processIncrementalBlockReport(nodeReg, r);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void blockReceivedAndDeleted(DatanodeRegistration nodeReg, String poolId,\n      StorageReceivedDeletedBlocks[] receivedAndDeletedBlocks) throws IOException {\n    checkNNStartup();\n    verifyRequest(nodeReg);\n    metrics.incrBlockReceivedAndDeletedOps();\n    if(blockStateChangeLog.isDebugEnabled()) {\n      blockStateChangeLog.debug(\"*BLOCK* NameNode.blockReceivedAndDeleted: \"\n          +\"from \"+nodeReg+\" \"+receivedAndDeletedBlocks.length\n          +\" blocks.\");\n    }\n    for(StorageReceivedDeletedBlocks r : receivedAndDeletedBlocks) {\n      namesystem.processIncrementalBlockReport(nodeReg, r);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeRpcServer.java",
      "extendedDetails": {}
    },
    "45db4d204b796eee6dd0e39d3cc94b70c47028d4": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-6794. Update BlockManager methods to use DatanodeStorageInfo where possible. (Arpit Agarwal)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1615169 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "01/08/14 9:58 AM",
      "commitName": "45db4d204b796eee6dd0e39d3cc94b70c47028d4",
      "commitAuthor": "Arpit Agarwal",
      "commitDateOld": "30/07/14 10:49 AM",
      "commitNameOld": "535fe14dedbf919442ec03ac573315c7a16a6dbe",
      "commitAuthorOld": "Chris Nauroth",
      "daysBetweenCommits": 1.96,
      "commitsBetweenForRepo": 13,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,13 +1,13 @@\n   public void blockReceivedAndDeleted(DatanodeRegistration nodeReg, String poolId,\n       StorageReceivedDeletedBlocks[] receivedAndDeletedBlocks) throws IOException {\n     verifyRequest(nodeReg);\n     metrics.incrBlockReceivedAndDeletedOps();\n     if(blockStateChangeLog.isDebugEnabled()) {\n       blockStateChangeLog.debug(\"*BLOCK* NameNode.blockReceivedAndDeleted: \"\n           +\"from \"+nodeReg+\" \"+receivedAndDeletedBlocks.length\n           +\" blocks.\");\n     }\n     for(StorageReceivedDeletedBlocks r : receivedAndDeletedBlocks) {\n-      namesystem.processIncrementalBlockReport(nodeReg, poolId, r);\n+      namesystem.processIncrementalBlockReport(nodeReg, r);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void blockReceivedAndDeleted(DatanodeRegistration nodeReg, String poolId,\n      StorageReceivedDeletedBlocks[] receivedAndDeletedBlocks) throws IOException {\n    verifyRequest(nodeReg);\n    metrics.incrBlockReceivedAndDeletedOps();\n    if(blockStateChangeLog.isDebugEnabled()) {\n      blockStateChangeLog.debug(\"*BLOCK* NameNode.blockReceivedAndDeleted: \"\n          +\"from \"+nodeReg+\" \"+receivedAndDeletedBlocks.length\n          +\" blocks.\");\n    }\n    for(StorageReceivedDeletedBlocks r : receivedAndDeletedBlocks) {\n      namesystem.processIncrementalBlockReport(nodeReg, r);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeRpcServer.java",
      "extendedDetails": {}
    },
    "938565925adb9d866e8c6951361cd5582076e013": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-5406. Send incremental block reports for all storages in a single call.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1551093 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "15/12/13 4:58 PM",
      "commitName": "938565925adb9d866e8c6951361cd5582076e013",
      "commitAuthor": "Arpit Agarwal",
      "commitDateOld": "05/12/13 3:41 PM",
      "commitNameOld": "00718c2ffaa11cbdabac6f5ef4b2de5dcf9d6859",
      "commitAuthorOld": "",
      "daysBetweenCommits": 10.05,
      "commitsBetweenForRepo": 48,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,12 +1,13 @@\n   public void blockReceivedAndDeleted(DatanodeRegistration nodeReg, String poolId,\n       StorageReceivedDeletedBlocks[] receivedAndDeletedBlocks) throws IOException {\n     verifyRequest(nodeReg);\n+    metrics.incrBlockReceivedAndDeletedOps();\n     if(blockStateChangeLog.isDebugEnabled()) {\n       blockStateChangeLog.debug(\"*BLOCK* NameNode.blockReceivedAndDeleted: \"\n           +\"from \"+nodeReg+\" \"+receivedAndDeletedBlocks.length\n           +\" blocks.\");\n     }\n     for(StorageReceivedDeletedBlocks r : receivedAndDeletedBlocks) {\n       namesystem.processIncrementalBlockReport(nodeReg, poolId, r);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void blockReceivedAndDeleted(DatanodeRegistration nodeReg, String poolId,\n      StorageReceivedDeletedBlocks[] receivedAndDeletedBlocks) throws IOException {\n    verifyRequest(nodeReg);\n    metrics.incrBlockReceivedAndDeletedOps();\n    if(blockStateChangeLog.isDebugEnabled()) {\n      blockStateChangeLog.debug(\"*BLOCK* NameNode.blockReceivedAndDeleted: \"\n          +\"from \"+nodeReg+\" \"+receivedAndDeletedBlocks.length\n          +\" blocks.\");\n    }\n    for(StorageReceivedDeletedBlocks r : receivedAndDeletedBlocks) {\n      namesystem.processIncrementalBlockReport(nodeReg, poolId, r);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeRpcServer.java",
      "extendedDetails": {}
    },
    "5d9d702607913685eab0d8ad077040ddc82bf085": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-4987. Namenode changes to track multiple storages per datanode.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2832@1518087 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "27/08/13 11:30 PM",
      "commitName": "5d9d702607913685eab0d8ad077040ddc82bf085",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "08/08/13 2:46 PM",
      "commitNameOld": "81f9786ae6e238c5cebfd2de856cfc9f02bf004a",
      "commitAuthorOld": "Kihwal Lee",
      "daysBetweenCommits": 19.36,
      "commitsBetweenForRepo": 116,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,11 +1,12 @@\n   public void blockReceivedAndDeleted(DatanodeRegistration nodeReg, String poolId,\n       StorageReceivedDeletedBlocks[] receivedAndDeletedBlocks) throws IOException {\n     verifyRequest(nodeReg);\n     if(blockStateChangeLog.isDebugEnabled()) {\n       blockStateChangeLog.debug(\"*BLOCK* NameNode.blockReceivedAndDeleted: \"\n           +\"from \"+nodeReg+\" \"+receivedAndDeletedBlocks.length\n           +\" blocks.\");\n     }\n-    namesystem.processIncrementalBlockReport(\n-        nodeReg, poolId, receivedAndDeletedBlocks[0].getBlocks());\n+    for(StorageReceivedDeletedBlocks r : receivedAndDeletedBlocks) {\n+      namesystem.processIncrementalBlockReport(nodeReg, poolId, r);\n+    }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void blockReceivedAndDeleted(DatanodeRegistration nodeReg, String poolId,\n      StorageReceivedDeletedBlocks[] receivedAndDeletedBlocks) throws IOException {\n    verifyRequest(nodeReg);\n    if(blockStateChangeLog.isDebugEnabled()) {\n      blockStateChangeLog.debug(\"*BLOCK* NameNode.blockReceivedAndDeleted: \"\n          +\"from \"+nodeReg+\" \"+receivedAndDeletedBlocks.length\n          +\" blocks.\");\n    }\n    for(StorageReceivedDeletedBlocks r : receivedAndDeletedBlocks) {\n      namesystem.processIncrementalBlockReport(nodeReg, poolId, r);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeRpcServer.java",
      "extendedDetails": {}
    },
    "1b531c1dbb452a6192fad411605d2baaa3831bcd": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-4979. Implement retry cache on Namenode. Contributed by Suresh Srinivas.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1507170 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "25/07/13 6:09 PM",
      "commitName": "1b531c1dbb452a6192fad411605d2baaa3831bcd",
      "commitAuthor": "Suresh Srinivas",
      "commitDateOld": "20/07/13 9:22 AM",
      "commitNameOld": "313dd0250543177752ebbad7f7f6a6bcf3a8ab42",
      "commitAuthorOld": "Kihwal Lee",
      "daysBetweenCommits": 5.37,
      "commitsBetweenForRepo": 31,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,11 +1,11 @@\n   public void blockReceivedAndDeleted(DatanodeRegistration nodeReg, String poolId,\n       StorageReceivedDeletedBlocks[] receivedAndDeletedBlocks) throws IOException {\n     verifyRequest(nodeReg);\n     if(blockStateChangeLog.isDebugEnabled()) {\n       blockStateChangeLog.debug(\"*BLOCK* NameNode.blockReceivedAndDeleted: \"\n           +\"from \"+nodeReg+\" \"+receivedAndDeletedBlocks.length\n           +\" blocks.\");\n     }\n-    namesystem.getBlockManager().processIncrementalBlockReport(\n+    namesystem.processIncrementalBlockReport(\n         nodeReg, poolId, receivedAndDeletedBlocks[0].getBlocks());\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void blockReceivedAndDeleted(DatanodeRegistration nodeReg, String poolId,\n      StorageReceivedDeletedBlocks[] receivedAndDeletedBlocks) throws IOException {\n    verifyRequest(nodeReg);\n    if(blockStateChangeLog.isDebugEnabled()) {\n      blockStateChangeLog.debug(\"*BLOCK* NameNode.blockReceivedAndDeleted: \"\n          +\"from \"+nodeReg+\" \"+receivedAndDeletedBlocks.length\n          +\" blocks.\");\n    }\n    namesystem.processIncrementalBlockReport(\n        nodeReg, poolId, receivedAndDeletedBlocks[0].getBlocks());\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeRpcServer.java",
      "extendedDetails": {}
    },
    "db71de2e11cfa56a254ef4c92fea5ef4f8c19100": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-4080. Add a separate logger for block state change logs to enable turning off those logs. Contributed by Kihwal Lee.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1407566 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "09/11/12 10:07 AM",
      "commitName": "db71de2e11cfa56a254ef4c92fea5ef4f8c19100",
      "commitAuthor": "Suresh Srinivas",
      "commitDateOld": "19/09/12 6:33 PM",
      "commitNameOld": "d26f05b7f578432b81bece195881f904bbcd3436",
      "commitAuthorOld": "Eli Collins",
      "daysBetweenCommits": 50.69,
      "commitsBetweenForRepo": 289,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,11 +1,11 @@\n   public void blockReceivedAndDeleted(DatanodeRegistration nodeReg, String poolId,\n       StorageReceivedDeletedBlocks[] receivedAndDeletedBlocks) throws IOException {\n     verifyRequest(nodeReg);\n-    if(stateChangeLog.isDebugEnabled()) {\n-      stateChangeLog.debug(\"*BLOCK* NameNode.blockReceivedAndDeleted: \"\n+    if(blockStateChangeLog.isDebugEnabled()) {\n+      blockStateChangeLog.debug(\"*BLOCK* NameNode.blockReceivedAndDeleted: \"\n           +\"from \"+nodeReg+\" \"+receivedAndDeletedBlocks.length\n           +\" blocks.\");\n     }\n     namesystem.getBlockManager().processIncrementalBlockReport(\n         nodeReg, poolId, receivedAndDeletedBlocks[0].getBlocks());\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void blockReceivedAndDeleted(DatanodeRegistration nodeReg, String poolId,\n      StorageReceivedDeletedBlocks[] receivedAndDeletedBlocks) throws IOException {\n    verifyRequest(nodeReg);\n    if(blockStateChangeLog.isDebugEnabled()) {\n      blockStateChangeLog.debug(\"*BLOCK* NameNode.blockReceivedAndDeleted: \"\n          +\"from \"+nodeReg+\" \"+receivedAndDeletedBlocks.length\n          +\" blocks.\");\n    }\n    namesystem.getBlockManager().processIncrementalBlockReport(\n        nodeReg, poolId, receivedAndDeletedBlocks[0].getBlocks());\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeRpcServer.java",
      "extendedDetails": {}
    },
    "be7dd8333a7e56e732171db0781786987de03195": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-3144. Refactor DatanodeID#getName by use. Contributed by Eli Collins\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1308205 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "01/04/12 3:12 PM",
      "commitName": "be7dd8333a7e56e732171db0781786987de03195",
      "commitAuthor": "Eli Collins",
      "commitDateOld": "22/03/12 11:29 PM",
      "commitNameOld": "b795c65f4929330972c07ec2d5d7ce987c5c2316",
      "commitAuthorOld": "Todd Lipcon",
      "daysBetweenCommits": 9.65,
      "commitsBetweenForRepo": 62,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,11 +1,11 @@\n   public void blockReceivedAndDeleted(DatanodeRegistration nodeReg, String poolId,\n       StorageReceivedDeletedBlocks[] receivedAndDeletedBlocks) throws IOException {\n     verifyRequest(nodeReg);\n     if(stateChangeLog.isDebugEnabled()) {\n       stateChangeLog.debug(\"*BLOCK* NameNode.blockReceivedAndDeleted: \"\n-          +\"from \"+nodeReg.getName()+\" \"+receivedAndDeletedBlocks.length\n+          +\"from \"+nodeReg+\" \"+receivedAndDeletedBlocks.length\n           +\" blocks.\");\n     }\n     namesystem.getBlockManager().processIncrementalBlockReport(\n         nodeReg, poolId, receivedAndDeletedBlocks[0].getBlocks());\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void blockReceivedAndDeleted(DatanodeRegistration nodeReg, String poolId,\n      StorageReceivedDeletedBlocks[] receivedAndDeletedBlocks) throws IOException {\n    verifyRequest(nodeReg);\n    if(stateChangeLog.isDebugEnabled()) {\n      stateChangeLog.debug(\"*BLOCK* NameNode.blockReceivedAndDeleted: \"\n          +\"from \"+nodeReg+\" \"+receivedAndDeletedBlocks.length\n          +\" blocks.\");\n    }\n    namesystem.getBlockManager().processIncrementalBlockReport(\n        nodeReg, poolId, receivedAndDeletedBlocks[0].getBlocks());\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeRpcServer.java",
      "extendedDetails": {}
    }
  }
}