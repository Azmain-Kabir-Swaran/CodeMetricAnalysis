{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "FileSystemTimelineWriter.java",
  "functionName": "prepareForWrite",
  "functionId": "prepareForWrite",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/client/api/impl/FileSystemTimelineWriter.java",
  "functionStartLine": 366,
  "functionEndLine": 372,
  "numCommitsSeen": 19,
  "timeTaken": 2439,
  "changeHistory": [
    "82665a7887a4bbb3afbc257bec31089173f3a969",
    "f304ccae3c2e0849b0b0b24c4bfe7a3a1ec2bb94",
    "6f8074298d8f33effe08f6be49ecfc89f69feda7",
    "e8fc81f9c812b0c167411de7f1789a9a433a0d57",
    "9e0f7b8b69ead629f999aa86c8fb7eb581e175d8",
    "882f2f04644a13cadb93070d5545f7a4f8691fde"
  ],
  "changeHistoryShort": {
    "82665a7887a4bbb3afbc257bec31089173f3a969": "Ybodychange",
    "f304ccae3c2e0849b0b0b24c4bfe7a3a1ec2bb94": "Ybodychange",
    "6f8074298d8f33effe08f6be49ecfc89f69feda7": "Ybodychange",
    "e8fc81f9c812b0c167411de7f1789a9a433a0d57": "Ybodychange",
    "9e0f7b8b69ead629f999aa86c8fb7eb581e175d8": "Ybodychange",
    "882f2f04644a13cadb93070d5545f7a4f8691fde": "Yintroduced"
  },
  "changeHistoryDetails": {
    "82665a7887a4bbb3afbc257bec31089173f3a969": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-15299. Bump Jackson 2 version to Jackson 2.9.x.\n",
      "commitDate": "26/03/18 1:05 PM",
      "commitName": "82665a7887a4bbb3afbc257bec31089173f3a969",
      "commitAuthor": "Sean Mackrory",
      "commitDateOld": "04/08/17 4:03 PM",
      "commitNameOld": "f44b349b813508f0f6d99ca10bddba683dedf6c4",
      "commitAuthorOld": "Junping Du",
      "daysBetweenCommits": 233.88,
      "commitsBetweenForRepo": 1826,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,6 +1,7 @@\n     protected void prepareForWrite() throws IOException{\n       this.stream \u003d createLogFileStream(fs, logPath);\n-      this.jsonGenerator \u003d new JsonFactory().createGenerator(stream);\n+      this.jsonGenerator \u003d new JsonFactory().createGenerator(\n+          (OutputStream)stream);\n       this.jsonGenerator.setPrettyPrinter(new MinimalPrettyPrinter(\"\\n\"));\n       this.lastModifiedTime \u003d Time.monotonicNow();\n     }\n\\ No newline at end of file\n",
      "actualSource": "    protected void prepareForWrite() throws IOException{\n      this.stream \u003d createLogFileStream(fs, logPath);\n      this.jsonGenerator \u003d new JsonFactory().createGenerator(\n          (OutputStream)stream);\n      this.jsonGenerator.setPrettyPrinter(new MinimalPrettyPrinter(\"\\n\"));\n      this.lastModifiedTime \u003d Time.monotonicNow();\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/client/api/impl/FileSystemTimelineWriter.java",
      "extendedDetails": {}
    },
    "f304ccae3c2e0849b0b0b24c4bfe7a3a1ec2bb94": {
      "type": "Ybodychange",
      "commitMessage": "YARN-5915. ATS 1.5 FileSystemTimelineWriter causes flush() to be called after every event write. Contributed by Atul Sikaria\n",
      "commitDate": "02/12/16 8:54 AM",
      "commitName": "f304ccae3c2e0849b0b0b24c4bfe7a3a1ec2bb94",
      "commitAuthor": "Jason Lowe",
      "commitDateOld": "21/11/16 5:20 PM",
      "commitNameOld": "6f8074298d8f33effe08f6be49ecfc89f69feda7",
      "commitAuthorOld": "Akira Ajisaka",
      "daysBetweenCommits": 10.65,
      "commitsBetweenForRepo": 68,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,8 +1,6 @@\n     protected void prepareForWrite() throws IOException{\n       this.stream \u003d createLogFileStream(fs, logPath);\n       this.jsonGenerator \u003d new JsonFactory().createGenerator(stream);\n       this.jsonGenerator.setPrettyPrinter(new MinimalPrettyPrinter(\"\\n\"));\n-      this.jsonGenerator.configure(\n-          JsonGenerator.Feature.FLUSH_PASSED_TO_STREAM, false);\n       this.lastModifiedTime \u003d Time.monotonicNow();\n     }\n\\ No newline at end of file\n",
      "actualSource": "    protected void prepareForWrite() throws IOException{\n      this.stream \u003d createLogFileStream(fs, logPath);\n      this.jsonGenerator \u003d new JsonFactory().createGenerator(stream);\n      this.jsonGenerator.setPrettyPrinter(new MinimalPrettyPrinter(\"\\n\"));\n      this.lastModifiedTime \u003d Time.monotonicNow();\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/client/api/impl/FileSystemTimelineWriter.java",
      "extendedDetails": {}
    },
    "6f8074298d8f33effe08f6be49ecfc89f69feda7": {
      "type": "Ybodychange",
      "commitMessage": "YARN-5713. Update jackson from 1.9.13 to 2.x in hadoop-yarn.\n",
      "commitDate": "21/11/16 5:20 PM",
      "commitName": "6f8074298d8f33effe08f6be49ecfc89f69feda7",
      "commitAuthor": "Akira Ajisaka",
      "commitDateOld": "15/11/16 10:57 AM",
      "commitNameOld": "5af572b6443715b7a741296c1bd520a1840f9a7c",
      "commitAuthorOld": "Mingliang Liu",
      "daysBetweenCommits": 6.27,
      "commitsBetweenForRepo": 34,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,8 +1,8 @@\n     protected void prepareForWrite() throws IOException{\n       this.stream \u003d createLogFileStream(fs, logPath);\n-      this.jsonGenerator \u003d new JsonFactory().createJsonGenerator(stream);\n+      this.jsonGenerator \u003d new JsonFactory().createGenerator(stream);\n       this.jsonGenerator.setPrettyPrinter(new MinimalPrettyPrinter(\"\\n\"));\n       this.jsonGenerator.configure(\n           JsonGenerator.Feature.FLUSH_PASSED_TO_STREAM, false);\n       this.lastModifiedTime \u003d Time.monotonicNow();\n     }\n\\ No newline at end of file\n",
      "actualSource": "    protected void prepareForWrite() throws IOException{\n      this.stream \u003d createLogFileStream(fs, logPath);\n      this.jsonGenerator \u003d new JsonFactory().createGenerator(stream);\n      this.jsonGenerator.setPrettyPrinter(new MinimalPrettyPrinter(\"\\n\"));\n      this.jsonGenerator.configure(\n          JsonGenerator.Feature.FLUSH_PASSED_TO_STREAM, false);\n      this.lastModifiedTime \u003d Time.monotonicNow();\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/client/api/impl/FileSystemTimelineWriter.java",
      "extendedDetails": {}
    },
    "e8fc81f9c812b0c167411de7f1789a9a433a0d57": {
      "type": "Ybodychange",
      "commitMessage": "YARN-4814. ATS 1.5 timelineclient impl call flush after every event write. Contributed by Xuan Gong\n",
      "commitDate": "25/03/16 1:15 PM",
      "commitName": "e8fc81f9c812b0c167411de7f1789a9a433a0d57",
      "commitAuthor": "Jason Lowe",
      "commitDateOld": "23/03/16 8:57 AM",
      "commitNameOld": "af1d125f9ce35ec69a610674a1c5c60cc17141a7",
      "commitAuthorOld": "Junping Du",
      "daysBetweenCommits": 2.18,
      "commitsBetweenForRepo": 12,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,6 +1,8 @@\n     protected void prepareForWrite() throws IOException{\n       this.stream \u003d createLogFileStream(fs, logPath);\n       this.jsonGenerator \u003d new JsonFactory().createJsonGenerator(stream);\n       this.jsonGenerator.setPrettyPrinter(new MinimalPrettyPrinter(\"\\n\"));\n+      this.jsonGenerator.configure(\n+          JsonGenerator.Feature.FLUSH_PASSED_TO_STREAM, false);\n       this.lastModifiedTime \u003d Time.monotonicNow();\n     }\n\\ No newline at end of file\n",
      "actualSource": "    protected void prepareForWrite() throws IOException{\n      this.stream \u003d createLogFileStream(fs, logPath);\n      this.jsonGenerator \u003d new JsonFactory().createJsonGenerator(stream);\n      this.jsonGenerator.setPrettyPrinter(new MinimalPrettyPrinter(\"\\n\"));\n      this.jsonGenerator.configure(\n          JsonGenerator.Feature.FLUSH_PASSED_TO_STREAM, false);\n      this.lastModifiedTime \u003d Time.monotonicNow();\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/client/api/impl/FileSystemTimelineWriter.java",
      "extendedDetails": {}
    },
    "9e0f7b8b69ead629f999aa86c8fb7eb581e175d8": {
      "type": "Ybodychange",
      "commitMessage": "YARN-4680. TimerTasks leak in ATS V1.5 Writer. (Xuan Gong via\ngtcarrera9)\n",
      "commitDate": "24/02/16 1:43 PM",
      "commitName": "9e0f7b8b69ead629f999aa86c8fb7eb581e175d8",
      "commitAuthor": "Li Lu",
      "commitDateOld": "23/12/15 5:26 AM",
      "commitNameOld": "882f2f04644a13cadb93070d5545f7a4f8691fde",
      "commitAuthorOld": "Junping Du",
      "daysBetweenCommits": 63.34,
      "commitsBetweenForRepo": 398,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,6 +1,6 @@\n     protected void prepareForWrite() throws IOException{\n       this.stream \u003d createLogFileStream(fs, logPath);\n       this.jsonGenerator \u003d new JsonFactory().createJsonGenerator(stream);\n       this.jsonGenerator.setPrettyPrinter(new MinimalPrettyPrinter(\"\\n\"));\n-      this.lastModifiedTime \u003d System.currentTimeMillis();\n+      this.lastModifiedTime \u003d Time.monotonicNow();\n     }\n\\ No newline at end of file\n",
      "actualSource": "    protected void prepareForWrite() throws IOException{\n      this.stream \u003d createLogFileStream(fs, logPath);\n      this.jsonGenerator \u003d new JsonFactory().createJsonGenerator(stream);\n      this.jsonGenerator.setPrettyPrinter(new MinimalPrettyPrinter(\"\\n\"));\n      this.lastModifiedTime \u003d Time.monotonicNow();\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/client/api/impl/FileSystemTimelineWriter.java",
      "extendedDetails": {}
    },
    "882f2f04644a13cadb93070d5545f7a4f8691fde": {
      "type": "Yintroduced",
      "commitMessage": "YARN-4234. New put APIs in TimelineClient for ats v1.5. Contributed by Xuan Gong.\n",
      "commitDate": "23/12/15 5:26 AM",
      "commitName": "882f2f04644a13cadb93070d5545f7a4f8691fde",
      "commitAuthor": "Junping Du",
      "diff": "@@ -0,0 +1,6 @@\n+    protected void prepareForWrite() throws IOException{\n+      this.stream \u003d createLogFileStream(fs, logPath);\n+      this.jsonGenerator \u003d new JsonFactory().createJsonGenerator(stream);\n+      this.jsonGenerator.setPrettyPrinter(new MinimalPrettyPrinter(\"\\n\"));\n+      this.lastModifiedTime \u003d System.currentTimeMillis();\n+    }\n\\ No newline at end of file\n",
      "actualSource": "    protected void prepareForWrite() throws IOException{\n      this.stream \u003d createLogFileStream(fs, logPath);\n      this.jsonGenerator \u003d new JsonFactory().createJsonGenerator(stream);\n      this.jsonGenerator.setPrettyPrinter(new MinimalPrettyPrinter(\"\\n\"));\n      this.lastModifiedTime \u003d System.currentTimeMillis();\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/client/api/impl/FileSystemTimelineWriter.java"
    }
  }
}