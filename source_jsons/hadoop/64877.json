{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "ProgressableProgressListener.java",
  "functionName": "progressChanged",
  "functionId": "progressChanged___progressEvent-ProgressEvent",
  "sourceFilePath": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/ProgressableProgressListener.java",
  "functionStartLine": 61,
  "functionEndLine": 77,
  "numCommitsSeen": 8,
  "timeTaken": 1633,
  "changeHistory": [
    "c58a59f7081d55dd2108545ebf9ee48cf43ca944",
    "d5403747b57b1e294e533ce17f197e7be8f5339c",
    "24d920b80eb3626073925a1d0b6dcf148add8cc0"
  ],
  "changeHistoryShort": {
    "c58a59f7081d55dd2108545ebf9ee48cf43ca944": "Ymultichange(Ymovefromfile,Ybodychange)",
    "d5403747b57b1e294e533ce17f197e7be8f5339c": "Ybodychange",
    "24d920b80eb3626073925a1d0b6dcf148add8cc0": "Yintroduced"
  },
  "changeHistoryDetails": {
    "c58a59f7081d55dd2108545ebf9ee48cf43ca944": {
      "type": "Ymultichange(Ymovefromfile,Ybodychange)",
      "commitMessage": "HADOOP-13171. Add StorageStatistics to S3A; instrument some more operations. Contributed by Steve Loughran.\n",
      "commitDate": "03/06/16 8:55 AM",
      "commitName": "c58a59f7081d55dd2108545ebf9ee48cf43ca944",
      "commitAuthor": "Chris Nauroth",
      "subchanges": [
        {
          "type": "Ymovefromfile",
          "commitMessage": "HADOOP-13171. Add StorageStatistics to S3A; instrument some more operations. Contributed by Steve Loughran.\n",
          "commitDate": "03/06/16 8:55 AM",
          "commitName": "c58a59f7081d55dd2108545ebf9ee48cf43ca944",
          "commitAuthor": "Chris Nauroth",
          "commitDateOld": "02/06/16 1:14 PM",
          "commitNameOld": "97e244947719d483c3f80521a00fec8e13dcb637",
          "commitAuthorOld": "Arpit Agarwal",
          "daysBetweenCommits": 0.82,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,20 +1,17 @@\n-    public void progressChanged(ProgressEvent progressEvent) {\n-      if (progress !\u003d null) {\n-        progress.progress();\n-      }\n+  public void progressChanged(ProgressEvent progressEvent) {\n+    if (progress !\u003d null) {\n+      progress.progress();\n+    }\n \n-      // There are 3 http ops here, but this should be close enough for now\n-      ProgressEventType pet \u003d progressEvent.getEventType();\n-      if (pet \u003d\u003d TRANSFER_PART_STARTED_EVENT ||\n-          pet \u003d\u003d TRANSFER_COMPLETED_EVENT) {\n-        statistics.incrementWriteOps(1);\n-      }\n+    // There are 3 http ops here, but this should be close enough for now\n+    ProgressEventType pet \u003d progressEvent.getEventType();\n+    if (pet \u003d\u003d TRANSFER_PART_STARTED_EVENT ||\n+        pet \u003d\u003d TRANSFER_COMPLETED_EVENT) {\n+      fs.incrementWriteOperations();\n+    }\n \n-      long transferred \u003d upload.getProgress().getBytesTransferred();\n-      long delta \u003d transferred - lastBytesTransferred;\n-      if (statistics !\u003d null \u0026\u0026 delta !\u003d 0) {\n-        statistics.incrementBytesWritten(delta);\n-      }\n-\n-      lastBytesTransferred \u003d transferred;\n-    }\n\\ No newline at end of file\n+    long transferred \u003d upload.getProgress().getBytesTransferred();\n+    long delta \u003d transferred - lastBytesTransferred;\n+    fs.incrementPutProgressStatistics(key, delta);\n+    lastBytesTransferred \u003d transferred;\n+  }\n\\ No newline at end of file\n",
          "actualSource": "  public void progressChanged(ProgressEvent progressEvent) {\n    if (progress !\u003d null) {\n      progress.progress();\n    }\n\n    // There are 3 http ops here, but this should be close enough for now\n    ProgressEventType pet \u003d progressEvent.getEventType();\n    if (pet \u003d\u003d TRANSFER_PART_STARTED_EVENT ||\n        pet \u003d\u003d TRANSFER_COMPLETED_EVENT) {\n      fs.incrementWriteOperations();\n    }\n\n    long transferred \u003d upload.getProgress().getBytesTransferred();\n    long delta \u003d transferred - lastBytesTransferred;\n    fs.incrementPutProgressStatistics(key, delta);\n    lastBytesTransferred \u003d transferred;\n  }",
          "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/ProgressableProgressListener.java",
          "extendedDetails": {
            "oldPath": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AOutputStream.java",
            "newPath": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/ProgressableProgressListener.java",
            "oldMethodName": "progressChanged",
            "newMethodName": "progressChanged"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HADOOP-13171. Add StorageStatistics to S3A; instrument some more operations. Contributed by Steve Loughran.\n",
          "commitDate": "03/06/16 8:55 AM",
          "commitName": "c58a59f7081d55dd2108545ebf9ee48cf43ca944",
          "commitAuthor": "Chris Nauroth",
          "commitDateOld": "02/06/16 1:14 PM",
          "commitNameOld": "97e244947719d483c3f80521a00fec8e13dcb637",
          "commitAuthorOld": "Arpit Agarwal",
          "daysBetweenCommits": 0.82,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,20 +1,17 @@\n-    public void progressChanged(ProgressEvent progressEvent) {\n-      if (progress !\u003d null) {\n-        progress.progress();\n-      }\n+  public void progressChanged(ProgressEvent progressEvent) {\n+    if (progress !\u003d null) {\n+      progress.progress();\n+    }\n \n-      // There are 3 http ops here, but this should be close enough for now\n-      ProgressEventType pet \u003d progressEvent.getEventType();\n-      if (pet \u003d\u003d TRANSFER_PART_STARTED_EVENT ||\n-          pet \u003d\u003d TRANSFER_COMPLETED_EVENT) {\n-        statistics.incrementWriteOps(1);\n-      }\n+    // There are 3 http ops here, but this should be close enough for now\n+    ProgressEventType pet \u003d progressEvent.getEventType();\n+    if (pet \u003d\u003d TRANSFER_PART_STARTED_EVENT ||\n+        pet \u003d\u003d TRANSFER_COMPLETED_EVENT) {\n+      fs.incrementWriteOperations();\n+    }\n \n-      long transferred \u003d upload.getProgress().getBytesTransferred();\n-      long delta \u003d transferred - lastBytesTransferred;\n-      if (statistics !\u003d null \u0026\u0026 delta !\u003d 0) {\n-        statistics.incrementBytesWritten(delta);\n-      }\n-\n-      lastBytesTransferred \u003d transferred;\n-    }\n\\ No newline at end of file\n+    long transferred \u003d upload.getProgress().getBytesTransferred();\n+    long delta \u003d transferred - lastBytesTransferred;\n+    fs.incrementPutProgressStatistics(key, delta);\n+    lastBytesTransferred \u003d transferred;\n+  }\n\\ No newline at end of file\n",
          "actualSource": "  public void progressChanged(ProgressEvent progressEvent) {\n    if (progress !\u003d null) {\n      progress.progress();\n    }\n\n    // There are 3 http ops here, but this should be close enough for now\n    ProgressEventType pet \u003d progressEvent.getEventType();\n    if (pet \u003d\u003d TRANSFER_PART_STARTED_EVENT ||\n        pet \u003d\u003d TRANSFER_COMPLETED_EVENT) {\n      fs.incrementWriteOperations();\n    }\n\n    long transferred \u003d upload.getProgress().getBytesTransferred();\n    long delta \u003d transferred - lastBytesTransferred;\n    fs.incrementPutProgressStatistics(key, delta);\n    lastBytesTransferred \u003d transferred;\n  }",
          "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/ProgressableProgressListener.java",
          "extendedDetails": {}
        }
      ]
    },
    "d5403747b57b1e294e533ce17f197e7be8f5339c": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-12269. Update aws-sdk dependency to 1.10.6 (Thomas Demoor via Lei (Eddy) Xu)\n",
      "commitDate": "04/08/15 6:51 PM",
      "commitName": "d5403747b57b1e294e533ce17f197e7be8f5339c",
      "commitAuthor": "Lei Xu",
      "commitDateOld": "05/01/15 5:00 AM",
      "commitNameOld": "27d8395867f665fea1360087325cda5ed70efd0c",
      "commitAuthorOld": "Steve Loughran",
      "daysBetweenCommits": 211.54,
      "commitsBetweenForRepo": 1757,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,20 @@\n     public void progressChanged(ProgressEvent progressEvent) {\n       if (progress !\u003d null) {\n         progress.progress();\n       }\n \n       // There are 3 http ops here, but this should be close enough for now\n-      if (progressEvent.getEventCode() \u003d\u003d ProgressEvent.PART_STARTED_EVENT_CODE ||\n-          progressEvent.getEventCode() \u003d\u003d ProgressEvent.COMPLETED_EVENT_CODE) {\n+      ProgressEventType pet \u003d progressEvent.getEventType();\n+      if (pet \u003d\u003d TRANSFER_PART_STARTED_EVENT ||\n+          pet \u003d\u003d TRANSFER_COMPLETED_EVENT) {\n         statistics.incrementWriteOps(1);\n       }\n \n       long transferred \u003d upload.getProgress().getBytesTransferred();\n       long delta \u003d transferred - lastBytesTransferred;\n       if (statistics !\u003d null \u0026\u0026 delta !\u003d 0) {\n         statistics.incrementBytesWritten(delta);\n       }\n \n       lastBytesTransferred \u003d transferred;\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public void progressChanged(ProgressEvent progressEvent) {\n      if (progress !\u003d null) {\n        progress.progress();\n      }\n\n      // There are 3 http ops here, but this should be close enough for now\n      ProgressEventType pet \u003d progressEvent.getEventType();\n      if (pet \u003d\u003d TRANSFER_PART_STARTED_EVENT ||\n          pet \u003d\u003d TRANSFER_COMPLETED_EVENT) {\n        statistics.incrementWriteOps(1);\n      }\n\n      long transferred \u003d upload.getProgress().getBytesTransferred();\n      long delta \u003d transferred - lastBytesTransferred;\n      if (statistics !\u003d null \u0026\u0026 delta !\u003d 0) {\n        statistics.incrementBytesWritten(delta);\n      }\n\n      lastBytesTransferred \u003d transferred;\n    }",
      "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AOutputStream.java",
      "extendedDetails": {}
    },
    "24d920b80eb3626073925a1d0b6dcf148add8cc0": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-10400. Incorporate new S3A FileSystem implementation. Contributed by Jordan Mendelson and Dave Wang.\n",
      "commitDate": "15/09/14 8:27 AM",
      "commitName": "24d920b80eb3626073925a1d0b6dcf148add8cc0",
      "commitAuthor": "Aaron T. Myers",
      "diff": "@@ -0,0 +1,19 @@\n+    public void progressChanged(ProgressEvent progressEvent) {\n+      if (progress !\u003d null) {\n+        progress.progress();\n+      }\n+\n+      // There are 3 http ops here, but this should be close enough for now\n+      if (progressEvent.getEventCode() \u003d\u003d ProgressEvent.PART_STARTED_EVENT_CODE ||\n+          progressEvent.getEventCode() \u003d\u003d ProgressEvent.COMPLETED_EVENT_CODE) {\n+        statistics.incrementWriteOps(1);\n+      }\n+\n+      long transferred \u003d upload.getProgress().getBytesTransferred();\n+      long delta \u003d transferred - lastBytesTransferred;\n+      if (statistics !\u003d null \u0026\u0026 delta !\u003d 0) {\n+        statistics.incrementBytesWritten(delta);\n+      }\n+\n+      lastBytesTransferred \u003d transferred;\n+    }\n\\ No newline at end of file\n",
      "actualSource": "    public void progressChanged(ProgressEvent progressEvent) {\n      if (progress !\u003d null) {\n        progress.progress();\n      }\n\n      // There are 3 http ops here, but this should be close enough for now\n      if (progressEvent.getEventCode() \u003d\u003d ProgressEvent.PART_STARTED_EVENT_CODE ||\n          progressEvent.getEventCode() \u003d\u003d ProgressEvent.COMPLETED_EVENT_CODE) {\n        statistics.incrementWriteOps(1);\n      }\n\n      long transferred \u003d upload.getProgress().getBytesTransferred();\n      long delta \u003d transferred - lastBytesTransferred;\n      if (statistics !\u003d null \u0026\u0026 delta !\u003d 0) {\n        statistics.incrementBytesWritten(delta);\n      }\n\n      lastBytesTransferred \u003d transferred;\n    }",
      "path": "hadoop-tools/hadoop-aws/src/main/java/org/apache/hadoop/fs/s3a/S3AOutputStream.java"
    }
  }
}