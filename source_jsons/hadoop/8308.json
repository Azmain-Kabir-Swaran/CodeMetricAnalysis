{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "NamenodeWebHdfsMethods.java",
  "functionName": "post",
  "functionId": "post___ugi-UserGroupInformation(annotations-@Context__modifiers-final)__delegation-DelegationParam(annotations-@QueryParam(DelegationParam.NAME)-@DefaultValue(DelegationParam.DEFAULT)__modifiers-final)__username-UserParam(annotations-@QueryParam(UserParam.NAME)-@DefaultValue(UserParam.DEFAULT)__modifiers-final)__doAsUser-DoAsParam(annotations-@QueryParam(DoAsParam.NAME)-@DefaultValue(DoAsParam.DEFAULT)__modifiers-final)__path-UriFsPathParam(annotations-@PathParam(UriFsPathParam.NAME)__modifiers-final)__op-PostOpParam(annotations-@QueryParam(PostOpParam.NAME)-@DefaultValue(PostOpParam.DEFAULT)__modifiers-final)__concatSrcs-ConcatSourcesParam(annotations-@QueryParam(ConcatSourcesParam.NAME)-@DefaultValue(ConcatSourcesParam.DEFAULT)__modifiers-final)__bufferSize-BufferSizeParam(annotations-@QueryParam(BufferSizeParam.NAME)-@DefaultValue(BufferSizeParam.DEFAULT)__modifiers-final)__excludeDatanodes-ExcludeDatanodesParam(annotations-@QueryParam(ExcludeDatanodesParam.NAME)-@DefaultValue(ExcludeDatanodesParam.DEFAULT)__modifiers-final)__newLength-NewLengthParam(annotations-@QueryParam(NewLengthParam.NAME)-@DefaultValue(NewLengthParam.DEFAULT)__modifiers-final)__noredirect-NoRedirectParam(annotations-@QueryParam(NoRedirectParam.NAME)-@DefaultValue(NoRedirectParam.DEFAULT)__modifiers-final)",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
  "functionStartLine": 911,
  "functionEndLine": 945,
  "numCommitsSeen": 345,
  "timeTaken": 6762,
  "changeHistory": [
    "85cd06f6636f295ad1f3bf2a90063f4714c9cca7",
    "4b0f55b6ea1665e2118fd573f72a6fcd1fce20d6",
    "03f7ed382b2c06f075811b29096d5bf79f26a5e5",
    "7c18f8d55b899dc4a6e118d3b54447a9b36b960a",
    "02d0f0ba549e584f98b4606c7cea325c9c1afb6c",
    "481b6cccf0493cb3f740b119552bede0f7268121",
    "eeec4dc72abf4c540146a81c5419828520b80fa4",
    "dacbeb5f6711b83bd293928b5329f7b846f2e66e",
    "09a156fcce2bc1be4081717bf7ef7d290e80d818",
    "7d1a5078b73c8523d63c1250812238dcc0963530",
    "a2d7287873685249c2ceeda49f9feadfb307f5c2",
    "4dc4e9e63f7385ddd1d64ae1345e0d32a4acb9de",
    "78e3821b819b441d1faf4bc66c659cdeddc6006c",
    "6c3b59505b863f03629da52a1e9b886fe9b496d0",
    "61d0b7530c8978c095ab6f62d9d38e168bd829c6"
  ],
  "changeHistoryShort": {
    "85cd06f6636f295ad1f3bf2a90063f4714c9cca7": "Ybodychange",
    "4b0f55b6ea1665e2118fd573f72a6fcd1fce20d6": "Ymultichange(Yparameterchange,Ybodychange)",
    "03f7ed382b2c06f075811b29096d5bf79f26a5e5": "Ymultichange(Yparameterchange,Ybodychange)",
    "7c18f8d55b899dc4a6e118d3b54447a9b36b960a": "Ymultichange(Yparameterchange,Ybodychange)",
    "02d0f0ba549e584f98b4606c7cea325c9c1afb6c": "Ybodychange",
    "481b6cccf0493cb3f740b119552bede0f7268121": "Ymultichange(Yparameterchange,Ybodychange)",
    "eeec4dc72abf4c540146a81c5419828520b80fa4": "Ybodychange",
    "dacbeb5f6711b83bd293928b5329f7b846f2e66e": "Ybodychange",
    "09a156fcce2bc1be4081717bf7ef7d290e80d818": "Ymultichange(Yparameterchange,Ybodychange)",
    "7d1a5078b73c8523d63c1250812238dcc0963530": "Ybodychange",
    "a2d7287873685249c2ceeda49f9feadfb307f5c2": "Ymultichange(Yparameterchange,Yexceptionschange)",
    "4dc4e9e63f7385ddd1d64ae1345e0d32a4acb9de": "Ybodychange",
    "78e3821b819b441d1faf4bc66c659cdeddc6006c": "Ymultichange(Yparameterchange,Yexceptionschange,Ybodychange)",
    "6c3b59505b863f03629da52a1e9b886fe9b496d0": "Ybodychange",
    "61d0b7530c8978c095ab6f62d9d38e168bd829c6": "Yintroduced"
  },
  "changeHistoryDetails": {
    "85cd06f6636f295ad1f3bf2a90063f4714c9cca7": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-10789. Route webhdfs through the RPC call queue. Contributed by Daryn Sharp and Rushabh S Shah.\n",
      "commitDate": "12/10/16 1:11 PM",
      "commitName": "85cd06f6636f295ad1f3bf2a90063f4714c9cca7",
      "commitAuthor": "Kihwal Lee",
      "commitDateOld": "06/09/16 11:02 AM",
      "commitNameOld": "f0d5382ff3e31a47d13e4cb6c3a244cca82b17ce",
      "commitAuthorOld": "Chris Nauroth",
      "daysBetweenCommits": 36.09,
      "commitsBetweenForRepo": 241,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,39 +1,35 @@\n   public Response post(\n       @Context final UserGroupInformation ugi,\n       @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n           final DelegationParam delegation,\n       @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n           final UserParam username,\n       @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n           final DoAsParam doAsUser,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n           final PostOpParam op,\n       @QueryParam(ConcatSourcesParam.NAME) @DefaultValue(ConcatSourcesParam.DEFAULT)\n           final ConcatSourcesParam concatSrcs,\n       @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n           final BufferSizeParam bufferSize,\n       @QueryParam(ExcludeDatanodesParam.NAME) @DefaultValue(ExcludeDatanodesParam.DEFAULT)\n           final ExcludeDatanodesParam excludeDatanodes,\n       @QueryParam(NewLengthParam.NAME) @DefaultValue(NewLengthParam.DEFAULT)\n           final NewLengthParam newLength,\n       @QueryParam(NoRedirectParam.NAME) @DefaultValue(NoRedirectParam.DEFAULT)\n           final NoRedirectParam noredirect\n       ) throws IOException, InterruptedException {\n \n     init(ugi, delegation, username, doAsUser, path, op, concatSrcs, bufferSize,\n         excludeDatanodes, newLength);\n \n-    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n+    return doAs(ugi, new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException, URISyntaxException {\n-        try {\n           return post(ugi, delegation, username, doAsUser,\n               path.getAbsolutePath(), op, concatSrcs, bufferSize,\n               excludeDatanodes, newLength, noredirect);\n-        } finally {\n-          reset();\n-        }\n       }\n     });\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public Response post(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n          final UserParam username,\n      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n          final DoAsParam doAsUser,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n          final PostOpParam op,\n      @QueryParam(ConcatSourcesParam.NAME) @DefaultValue(ConcatSourcesParam.DEFAULT)\n          final ConcatSourcesParam concatSrcs,\n      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n          final BufferSizeParam bufferSize,\n      @QueryParam(ExcludeDatanodesParam.NAME) @DefaultValue(ExcludeDatanodesParam.DEFAULT)\n          final ExcludeDatanodesParam excludeDatanodes,\n      @QueryParam(NewLengthParam.NAME) @DefaultValue(NewLengthParam.DEFAULT)\n          final NewLengthParam newLength,\n      @QueryParam(NoRedirectParam.NAME) @DefaultValue(NoRedirectParam.DEFAULT)\n          final NoRedirectParam noredirect\n      ) throws IOException, InterruptedException {\n\n    init(ugi, delegation, username, doAsUser, path, op, concatSrcs, bufferSize,\n        excludeDatanodes, newLength);\n\n    return doAs(ugi, new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException, URISyntaxException {\n          return post(ugi, delegation, username, doAsUser,\n              path.getAbsolutePath(), op, concatSrcs, bufferSize,\n              excludeDatanodes, newLength, noredirect);\n      }\n    });\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
      "extendedDetails": {}
    },
    "4b0f55b6ea1665e2118fd573f72a6fcd1fce20d6": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "HDFS-7766. Add a flag to WebHDFS op\u003dCREATE to not respond with a 307 redirect (Ravi Prakash via aw)\n",
      "commitDate": "23/05/16 3:52 PM",
      "commitName": "4b0f55b6ea1665e2118fd573f72a6fcd1fce20d6",
      "commitAuthor": "Allen Wittenauer",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-7766. Add a flag to WebHDFS op\u003dCREATE to not respond with a 307 redirect (Ravi Prakash via aw)\n",
          "commitDate": "23/05/16 3:52 PM",
          "commitName": "4b0f55b6ea1665e2118fd573f72a6fcd1fce20d6",
          "commitAuthor": "Allen Wittenauer",
          "commitDateOld": "04/05/16 5:02 PM",
          "commitNameOld": "1268cf5fbe4458fa75ad0662512d352f9e8d3470",
          "commitAuthorOld": "Ming Ma",
          "daysBetweenCommits": 18.95,
          "commitsBetweenForRepo": 134,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,37 +1,39 @@\n   public Response post(\n       @Context final UserGroupInformation ugi,\n       @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n           final DelegationParam delegation,\n       @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n           final UserParam username,\n       @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n           final DoAsParam doAsUser,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n           final PostOpParam op,\n       @QueryParam(ConcatSourcesParam.NAME) @DefaultValue(ConcatSourcesParam.DEFAULT)\n           final ConcatSourcesParam concatSrcs,\n       @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n           final BufferSizeParam bufferSize,\n       @QueryParam(ExcludeDatanodesParam.NAME) @DefaultValue(ExcludeDatanodesParam.DEFAULT)\n           final ExcludeDatanodesParam excludeDatanodes,\n       @QueryParam(NewLengthParam.NAME) @DefaultValue(NewLengthParam.DEFAULT)\n-          final NewLengthParam newLength\n+          final NewLengthParam newLength,\n+      @QueryParam(NoRedirectParam.NAME) @DefaultValue(NoRedirectParam.DEFAULT)\n+          final NoRedirectParam noredirect\n       ) throws IOException, InterruptedException {\n \n     init(ugi, delegation, username, doAsUser, path, op, concatSrcs, bufferSize,\n         excludeDatanodes, newLength);\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException, URISyntaxException {\n         try {\n           return post(ugi, delegation, username, doAsUser,\n               path.getAbsolutePath(), op, concatSrcs, bufferSize,\n-              excludeDatanodes, newLength);\n+              excludeDatanodes, newLength, noredirect);\n         } finally {\n           reset();\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public Response post(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n          final UserParam username,\n      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n          final DoAsParam doAsUser,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n          final PostOpParam op,\n      @QueryParam(ConcatSourcesParam.NAME) @DefaultValue(ConcatSourcesParam.DEFAULT)\n          final ConcatSourcesParam concatSrcs,\n      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n          final BufferSizeParam bufferSize,\n      @QueryParam(ExcludeDatanodesParam.NAME) @DefaultValue(ExcludeDatanodesParam.DEFAULT)\n          final ExcludeDatanodesParam excludeDatanodes,\n      @QueryParam(NewLengthParam.NAME) @DefaultValue(NewLengthParam.DEFAULT)\n          final NewLengthParam newLength,\n      @QueryParam(NoRedirectParam.NAME) @DefaultValue(NoRedirectParam.DEFAULT)\n          final NoRedirectParam noredirect\n      ) throws IOException, InterruptedException {\n\n    init(ugi, delegation, username, doAsUser, path, op, concatSrcs, bufferSize,\n        excludeDatanodes, newLength);\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException, URISyntaxException {\n        try {\n          return post(ugi, delegation, username, doAsUser,\n              path.getAbsolutePath(), op, concatSrcs, bufferSize,\n              excludeDatanodes, newLength, noredirect);\n        } finally {\n          reset();\n        }\n      }\n    });\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {
            "oldValue": "[ugi-UserGroupInformation(annotations-@Context__modifiers-final), delegation-DelegationParam(annotations-@QueryParam(DelegationParam.NAME)-@DefaultValue(DelegationParam.DEFAULT)__modifiers-final), username-UserParam(annotations-@QueryParam(UserParam.NAME)-@DefaultValue(UserParam.DEFAULT)__modifiers-final), doAsUser-DoAsParam(annotations-@QueryParam(DoAsParam.NAME)-@DefaultValue(DoAsParam.DEFAULT)__modifiers-final), path-UriFsPathParam(annotations-@PathParam(UriFsPathParam.NAME)__modifiers-final), op-PostOpParam(annotations-@QueryParam(PostOpParam.NAME)-@DefaultValue(PostOpParam.DEFAULT)__modifiers-final), concatSrcs-ConcatSourcesParam(annotations-@QueryParam(ConcatSourcesParam.NAME)-@DefaultValue(ConcatSourcesParam.DEFAULT)__modifiers-final), bufferSize-BufferSizeParam(annotations-@QueryParam(BufferSizeParam.NAME)-@DefaultValue(BufferSizeParam.DEFAULT)__modifiers-final), excludeDatanodes-ExcludeDatanodesParam(annotations-@QueryParam(ExcludeDatanodesParam.NAME)-@DefaultValue(ExcludeDatanodesParam.DEFAULT)__modifiers-final), newLength-NewLengthParam(annotations-@QueryParam(NewLengthParam.NAME)-@DefaultValue(NewLengthParam.DEFAULT)__modifiers-final)]",
            "newValue": "[ugi-UserGroupInformation(annotations-@Context__modifiers-final), delegation-DelegationParam(annotations-@QueryParam(DelegationParam.NAME)-@DefaultValue(DelegationParam.DEFAULT)__modifiers-final), username-UserParam(annotations-@QueryParam(UserParam.NAME)-@DefaultValue(UserParam.DEFAULT)__modifiers-final), doAsUser-DoAsParam(annotations-@QueryParam(DoAsParam.NAME)-@DefaultValue(DoAsParam.DEFAULT)__modifiers-final), path-UriFsPathParam(annotations-@PathParam(UriFsPathParam.NAME)__modifiers-final), op-PostOpParam(annotations-@QueryParam(PostOpParam.NAME)-@DefaultValue(PostOpParam.DEFAULT)__modifiers-final), concatSrcs-ConcatSourcesParam(annotations-@QueryParam(ConcatSourcesParam.NAME)-@DefaultValue(ConcatSourcesParam.DEFAULT)__modifiers-final), bufferSize-BufferSizeParam(annotations-@QueryParam(BufferSizeParam.NAME)-@DefaultValue(BufferSizeParam.DEFAULT)__modifiers-final), excludeDatanodes-ExcludeDatanodesParam(annotations-@QueryParam(ExcludeDatanodesParam.NAME)-@DefaultValue(ExcludeDatanodesParam.DEFAULT)__modifiers-final), newLength-NewLengthParam(annotations-@QueryParam(NewLengthParam.NAME)-@DefaultValue(NewLengthParam.DEFAULT)__modifiers-final), noredirect-NoRedirectParam(annotations-@QueryParam(NoRedirectParam.NAME)-@DefaultValue(NoRedirectParam.DEFAULT)__modifiers-final)]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-7766. Add a flag to WebHDFS op\u003dCREATE to not respond with a 307 redirect (Ravi Prakash via aw)\n",
          "commitDate": "23/05/16 3:52 PM",
          "commitName": "4b0f55b6ea1665e2118fd573f72a6fcd1fce20d6",
          "commitAuthor": "Allen Wittenauer",
          "commitDateOld": "04/05/16 5:02 PM",
          "commitNameOld": "1268cf5fbe4458fa75ad0662512d352f9e8d3470",
          "commitAuthorOld": "Ming Ma",
          "daysBetweenCommits": 18.95,
          "commitsBetweenForRepo": 134,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,37 +1,39 @@\n   public Response post(\n       @Context final UserGroupInformation ugi,\n       @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n           final DelegationParam delegation,\n       @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n           final UserParam username,\n       @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n           final DoAsParam doAsUser,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n           final PostOpParam op,\n       @QueryParam(ConcatSourcesParam.NAME) @DefaultValue(ConcatSourcesParam.DEFAULT)\n           final ConcatSourcesParam concatSrcs,\n       @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n           final BufferSizeParam bufferSize,\n       @QueryParam(ExcludeDatanodesParam.NAME) @DefaultValue(ExcludeDatanodesParam.DEFAULT)\n           final ExcludeDatanodesParam excludeDatanodes,\n       @QueryParam(NewLengthParam.NAME) @DefaultValue(NewLengthParam.DEFAULT)\n-          final NewLengthParam newLength\n+          final NewLengthParam newLength,\n+      @QueryParam(NoRedirectParam.NAME) @DefaultValue(NoRedirectParam.DEFAULT)\n+          final NoRedirectParam noredirect\n       ) throws IOException, InterruptedException {\n \n     init(ugi, delegation, username, doAsUser, path, op, concatSrcs, bufferSize,\n         excludeDatanodes, newLength);\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException, URISyntaxException {\n         try {\n           return post(ugi, delegation, username, doAsUser,\n               path.getAbsolutePath(), op, concatSrcs, bufferSize,\n-              excludeDatanodes, newLength);\n+              excludeDatanodes, newLength, noredirect);\n         } finally {\n           reset();\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public Response post(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n          final UserParam username,\n      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n          final DoAsParam doAsUser,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n          final PostOpParam op,\n      @QueryParam(ConcatSourcesParam.NAME) @DefaultValue(ConcatSourcesParam.DEFAULT)\n          final ConcatSourcesParam concatSrcs,\n      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n          final BufferSizeParam bufferSize,\n      @QueryParam(ExcludeDatanodesParam.NAME) @DefaultValue(ExcludeDatanodesParam.DEFAULT)\n          final ExcludeDatanodesParam excludeDatanodes,\n      @QueryParam(NewLengthParam.NAME) @DefaultValue(NewLengthParam.DEFAULT)\n          final NewLengthParam newLength,\n      @QueryParam(NoRedirectParam.NAME) @DefaultValue(NoRedirectParam.DEFAULT)\n          final NoRedirectParam noredirect\n      ) throws IOException, InterruptedException {\n\n    init(ugi, delegation, username, doAsUser, path, op, concatSrcs, bufferSize,\n        excludeDatanodes, newLength);\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException, URISyntaxException {\n        try {\n          return post(ugi, delegation, username, doAsUser,\n              path.getAbsolutePath(), op, concatSrcs, bufferSize,\n              excludeDatanodes, newLength, noredirect);\n        } finally {\n          reset();\n        }\n      }\n    });\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {}
        }
      ]
    },
    "03f7ed382b2c06f075811b29096d5bf79f26a5e5": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "HDFS-7655. Expose truncate API for Web HDFS. (yliu)\n",
      "commitDate": "05/02/15 7:45 AM",
      "commitName": "03f7ed382b2c06f075811b29096d5bf79f26a5e5",
      "commitAuthor": "yliu",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-7655. Expose truncate API for Web HDFS. (yliu)\n",
          "commitDate": "05/02/15 7:45 AM",
          "commitName": "03f7ed382b2c06f075811b29096d5bf79f26a5e5",
          "commitAuthor": "yliu",
          "commitDateOld": "24/10/14 11:35 AM",
          "commitNameOld": "e2be3337448ec0f6772a2ba463da376e7089b1fa",
          "commitAuthorOld": "Jitendra Pandey",
          "daysBetweenCommits": 103.88,
          "commitsBetweenForRepo": 766,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,35 +1,37 @@\n   public Response post(\n       @Context final UserGroupInformation ugi,\n       @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n           final DelegationParam delegation,\n       @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n           final UserParam username,\n       @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n           final DoAsParam doAsUser,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n           final PostOpParam op,\n       @QueryParam(ConcatSourcesParam.NAME) @DefaultValue(ConcatSourcesParam.DEFAULT)\n           final ConcatSourcesParam concatSrcs,\n       @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n           final BufferSizeParam bufferSize,\n       @QueryParam(ExcludeDatanodesParam.NAME) @DefaultValue(ExcludeDatanodesParam.DEFAULT)\n-          final ExcludeDatanodesParam excludeDatanodes\n+          final ExcludeDatanodesParam excludeDatanodes,\n+      @QueryParam(NewLengthParam.NAME) @DefaultValue(NewLengthParam.DEFAULT)\n+          final NewLengthParam newLength\n       ) throws IOException, InterruptedException {\n \n     init(ugi, delegation, username, doAsUser, path, op, concatSrcs, bufferSize,\n-        excludeDatanodes);\n+        excludeDatanodes, newLength);\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException, URISyntaxException {\n         try {\n           return post(ugi, delegation, username, doAsUser,\n               path.getAbsolutePath(), op, concatSrcs, bufferSize,\n-              excludeDatanodes);\n+              excludeDatanodes, newLength);\n         } finally {\n           reset();\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public Response post(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n          final UserParam username,\n      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n          final DoAsParam doAsUser,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n          final PostOpParam op,\n      @QueryParam(ConcatSourcesParam.NAME) @DefaultValue(ConcatSourcesParam.DEFAULT)\n          final ConcatSourcesParam concatSrcs,\n      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n          final BufferSizeParam bufferSize,\n      @QueryParam(ExcludeDatanodesParam.NAME) @DefaultValue(ExcludeDatanodesParam.DEFAULT)\n          final ExcludeDatanodesParam excludeDatanodes,\n      @QueryParam(NewLengthParam.NAME) @DefaultValue(NewLengthParam.DEFAULT)\n          final NewLengthParam newLength\n      ) throws IOException, InterruptedException {\n\n    init(ugi, delegation, username, doAsUser, path, op, concatSrcs, bufferSize,\n        excludeDatanodes, newLength);\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException, URISyntaxException {\n        try {\n          return post(ugi, delegation, username, doAsUser,\n              path.getAbsolutePath(), op, concatSrcs, bufferSize,\n              excludeDatanodes, newLength);\n        } finally {\n          reset();\n        }\n      }\n    });\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {
            "oldValue": "[ugi-UserGroupInformation(annotations-@Context__modifiers-final), delegation-DelegationParam(annotations-@QueryParam(DelegationParam.NAME)-@DefaultValue(DelegationParam.DEFAULT)__modifiers-final), username-UserParam(annotations-@QueryParam(UserParam.NAME)-@DefaultValue(UserParam.DEFAULT)__modifiers-final), doAsUser-DoAsParam(annotations-@QueryParam(DoAsParam.NAME)-@DefaultValue(DoAsParam.DEFAULT)__modifiers-final), path-UriFsPathParam(annotations-@PathParam(UriFsPathParam.NAME)__modifiers-final), op-PostOpParam(annotations-@QueryParam(PostOpParam.NAME)-@DefaultValue(PostOpParam.DEFAULT)__modifiers-final), concatSrcs-ConcatSourcesParam(annotations-@QueryParam(ConcatSourcesParam.NAME)-@DefaultValue(ConcatSourcesParam.DEFAULT)__modifiers-final), bufferSize-BufferSizeParam(annotations-@QueryParam(BufferSizeParam.NAME)-@DefaultValue(BufferSizeParam.DEFAULT)__modifiers-final), excludeDatanodes-ExcludeDatanodesParam(annotations-@QueryParam(ExcludeDatanodesParam.NAME)-@DefaultValue(ExcludeDatanodesParam.DEFAULT)__modifiers-final)]",
            "newValue": "[ugi-UserGroupInformation(annotations-@Context__modifiers-final), delegation-DelegationParam(annotations-@QueryParam(DelegationParam.NAME)-@DefaultValue(DelegationParam.DEFAULT)__modifiers-final), username-UserParam(annotations-@QueryParam(UserParam.NAME)-@DefaultValue(UserParam.DEFAULT)__modifiers-final), doAsUser-DoAsParam(annotations-@QueryParam(DoAsParam.NAME)-@DefaultValue(DoAsParam.DEFAULT)__modifiers-final), path-UriFsPathParam(annotations-@PathParam(UriFsPathParam.NAME)__modifiers-final), op-PostOpParam(annotations-@QueryParam(PostOpParam.NAME)-@DefaultValue(PostOpParam.DEFAULT)__modifiers-final), concatSrcs-ConcatSourcesParam(annotations-@QueryParam(ConcatSourcesParam.NAME)-@DefaultValue(ConcatSourcesParam.DEFAULT)__modifiers-final), bufferSize-BufferSizeParam(annotations-@QueryParam(BufferSizeParam.NAME)-@DefaultValue(BufferSizeParam.DEFAULT)__modifiers-final), excludeDatanodes-ExcludeDatanodesParam(annotations-@QueryParam(ExcludeDatanodesParam.NAME)-@DefaultValue(ExcludeDatanodesParam.DEFAULT)__modifiers-final), newLength-NewLengthParam(annotations-@QueryParam(NewLengthParam.NAME)-@DefaultValue(NewLengthParam.DEFAULT)__modifiers-final)]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-7655. Expose truncate API for Web HDFS. (yliu)\n",
          "commitDate": "05/02/15 7:45 AM",
          "commitName": "03f7ed382b2c06f075811b29096d5bf79f26a5e5",
          "commitAuthor": "yliu",
          "commitDateOld": "24/10/14 11:35 AM",
          "commitNameOld": "e2be3337448ec0f6772a2ba463da376e7089b1fa",
          "commitAuthorOld": "Jitendra Pandey",
          "daysBetweenCommits": 103.88,
          "commitsBetweenForRepo": 766,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,35 +1,37 @@\n   public Response post(\n       @Context final UserGroupInformation ugi,\n       @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n           final DelegationParam delegation,\n       @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n           final UserParam username,\n       @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n           final DoAsParam doAsUser,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n           final PostOpParam op,\n       @QueryParam(ConcatSourcesParam.NAME) @DefaultValue(ConcatSourcesParam.DEFAULT)\n           final ConcatSourcesParam concatSrcs,\n       @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n           final BufferSizeParam bufferSize,\n       @QueryParam(ExcludeDatanodesParam.NAME) @DefaultValue(ExcludeDatanodesParam.DEFAULT)\n-          final ExcludeDatanodesParam excludeDatanodes\n+          final ExcludeDatanodesParam excludeDatanodes,\n+      @QueryParam(NewLengthParam.NAME) @DefaultValue(NewLengthParam.DEFAULT)\n+          final NewLengthParam newLength\n       ) throws IOException, InterruptedException {\n \n     init(ugi, delegation, username, doAsUser, path, op, concatSrcs, bufferSize,\n-        excludeDatanodes);\n+        excludeDatanodes, newLength);\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException, URISyntaxException {\n         try {\n           return post(ugi, delegation, username, doAsUser,\n               path.getAbsolutePath(), op, concatSrcs, bufferSize,\n-              excludeDatanodes);\n+              excludeDatanodes, newLength);\n         } finally {\n           reset();\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public Response post(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n          final UserParam username,\n      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n          final DoAsParam doAsUser,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n          final PostOpParam op,\n      @QueryParam(ConcatSourcesParam.NAME) @DefaultValue(ConcatSourcesParam.DEFAULT)\n          final ConcatSourcesParam concatSrcs,\n      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n          final BufferSizeParam bufferSize,\n      @QueryParam(ExcludeDatanodesParam.NAME) @DefaultValue(ExcludeDatanodesParam.DEFAULT)\n          final ExcludeDatanodesParam excludeDatanodes,\n      @QueryParam(NewLengthParam.NAME) @DefaultValue(NewLengthParam.DEFAULT)\n          final NewLengthParam newLength\n      ) throws IOException, InterruptedException {\n\n    init(ugi, delegation, username, doAsUser, path, op, concatSrcs, bufferSize,\n        excludeDatanodes, newLength);\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException, URISyntaxException {\n        try {\n          return post(ugi, delegation, username, doAsUser,\n              path.getAbsolutePath(), op, concatSrcs, bufferSize,\n              excludeDatanodes, newLength);\n        } finally {\n          reset();\n        }\n      }\n    });\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {}
        }
      ]
    },
    "7c18f8d55b899dc4a6e118d3b54447a9b36b960a": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "HDFS-6616. Add exclude-datanodes feature to WebHDFS redirection so that it will not redirect retries to the same datanode. Contributed by zhaoyunjiong\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1611750 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "18/07/14 11:20 AM",
      "commitName": "7c18f8d55b899dc4a6e118d3b54447a9b36b960a",
      "commitAuthor": "Tsz-wo Sze",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-6616. Add exclude-datanodes feature to WebHDFS redirection so that it will not redirect retries to the same datanode. Contributed by zhaoyunjiong\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1611750 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "18/07/14 11:20 AM",
          "commitName": "7c18f8d55b899dc4a6e118d3b54447a9b36b960a",
          "commitAuthor": "Tsz-wo Sze",
          "commitDateOld": "05/06/14 8:48 PM",
          "commitNameOld": "6a4f6d6b3e41e660c214b77c9ed43d4c65200b6a",
          "commitAuthorOld": "Uma Maheswara Rao G",
          "daysBetweenCommits": 42.61,
          "commitsBetweenForRepo": 298,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,31 +1,35 @@\n   public Response post(\n       @Context final UserGroupInformation ugi,\n       @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n           final DelegationParam delegation,\n       @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n           final UserParam username,\n       @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n           final DoAsParam doAsUser,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n           final PostOpParam op,\n       @QueryParam(ConcatSourcesParam.NAME) @DefaultValue(ConcatSourcesParam.DEFAULT)\n           final ConcatSourcesParam concatSrcs,\n       @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n-          final BufferSizeParam bufferSize\n+          final BufferSizeParam bufferSize,\n+      @QueryParam(ExcludeDatanodesParam.NAME) @DefaultValue(ExcludeDatanodesParam.DEFAULT)\n+          final ExcludeDatanodesParam excludeDatanodes\n       ) throws IOException, InterruptedException {\n \n-    init(ugi, delegation, username, doAsUser, path, op, concatSrcs, bufferSize);\n+    init(ugi, delegation, username, doAsUser, path, op, concatSrcs, bufferSize,\n+        excludeDatanodes);\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException, URISyntaxException {\n         try {\n           return post(ugi, delegation, username, doAsUser,\n-              path.getAbsolutePath(), op, concatSrcs, bufferSize);\n+              path.getAbsolutePath(), op, concatSrcs, bufferSize,\n+              excludeDatanodes);\n         } finally {\n           reset();\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public Response post(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n          final UserParam username,\n      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n          final DoAsParam doAsUser,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n          final PostOpParam op,\n      @QueryParam(ConcatSourcesParam.NAME) @DefaultValue(ConcatSourcesParam.DEFAULT)\n          final ConcatSourcesParam concatSrcs,\n      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n          final BufferSizeParam bufferSize,\n      @QueryParam(ExcludeDatanodesParam.NAME) @DefaultValue(ExcludeDatanodesParam.DEFAULT)\n          final ExcludeDatanodesParam excludeDatanodes\n      ) throws IOException, InterruptedException {\n\n    init(ugi, delegation, username, doAsUser, path, op, concatSrcs, bufferSize,\n        excludeDatanodes);\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException, URISyntaxException {\n        try {\n          return post(ugi, delegation, username, doAsUser,\n              path.getAbsolutePath(), op, concatSrcs, bufferSize,\n              excludeDatanodes);\n        } finally {\n          reset();\n        }\n      }\n    });\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {
            "oldValue": "[ugi-UserGroupInformation(annotations-@Context__modifiers-final), delegation-DelegationParam(annotations-@QueryParam(DelegationParam.NAME)-@DefaultValue(DelegationParam.DEFAULT)__modifiers-final), username-UserParam(annotations-@QueryParam(UserParam.NAME)-@DefaultValue(UserParam.DEFAULT)__modifiers-final), doAsUser-DoAsParam(annotations-@QueryParam(DoAsParam.NAME)-@DefaultValue(DoAsParam.DEFAULT)__modifiers-final), path-UriFsPathParam(annotations-@PathParam(UriFsPathParam.NAME)__modifiers-final), op-PostOpParam(annotations-@QueryParam(PostOpParam.NAME)-@DefaultValue(PostOpParam.DEFAULT)__modifiers-final), concatSrcs-ConcatSourcesParam(annotations-@QueryParam(ConcatSourcesParam.NAME)-@DefaultValue(ConcatSourcesParam.DEFAULT)__modifiers-final), bufferSize-BufferSizeParam(annotations-@QueryParam(BufferSizeParam.NAME)-@DefaultValue(BufferSizeParam.DEFAULT)__modifiers-final)]",
            "newValue": "[ugi-UserGroupInformation(annotations-@Context__modifiers-final), delegation-DelegationParam(annotations-@QueryParam(DelegationParam.NAME)-@DefaultValue(DelegationParam.DEFAULT)__modifiers-final), username-UserParam(annotations-@QueryParam(UserParam.NAME)-@DefaultValue(UserParam.DEFAULT)__modifiers-final), doAsUser-DoAsParam(annotations-@QueryParam(DoAsParam.NAME)-@DefaultValue(DoAsParam.DEFAULT)__modifiers-final), path-UriFsPathParam(annotations-@PathParam(UriFsPathParam.NAME)__modifiers-final), op-PostOpParam(annotations-@QueryParam(PostOpParam.NAME)-@DefaultValue(PostOpParam.DEFAULT)__modifiers-final), concatSrcs-ConcatSourcesParam(annotations-@QueryParam(ConcatSourcesParam.NAME)-@DefaultValue(ConcatSourcesParam.DEFAULT)__modifiers-final), bufferSize-BufferSizeParam(annotations-@QueryParam(BufferSizeParam.NAME)-@DefaultValue(BufferSizeParam.DEFAULT)__modifiers-final), excludeDatanodes-ExcludeDatanodesParam(annotations-@QueryParam(ExcludeDatanodesParam.NAME)-@DefaultValue(ExcludeDatanodesParam.DEFAULT)__modifiers-final)]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-6616. Add exclude-datanodes feature to WebHDFS redirection so that it will not redirect retries to the same datanode. Contributed by zhaoyunjiong\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1611750 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "18/07/14 11:20 AM",
          "commitName": "7c18f8d55b899dc4a6e118d3b54447a9b36b960a",
          "commitAuthor": "Tsz-wo Sze",
          "commitDateOld": "05/06/14 8:48 PM",
          "commitNameOld": "6a4f6d6b3e41e660c214b77c9ed43d4c65200b6a",
          "commitAuthorOld": "Uma Maheswara Rao G",
          "daysBetweenCommits": 42.61,
          "commitsBetweenForRepo": 298,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,31 +1,35 @@\n   public Response post(\n       @Context final UserGroupInformation ugi,\n       @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n           final DelegationParam delegation,\n       @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n           final UserParam username,\n       @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n           final DoAsParam doAsUser,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n           final PostOpParam op,\n       @QueryParam(ConcatSourcesParam.NAME) @DefaultValue(ConcatSourcesParam.DEFAULT)\n           final ConcatSourcesParam concatSrcs,\n       @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n-          final BufferSizeParam bufferSize\n+          final BufferSizeParam bufferSize,\n+      @QueryParam(ExcludeDatanodesParam.NAME) @DefaultValue(ExcludeDatanodesParam.DEFAULT)\n+          final ExcludeDatanodesParam excludeDatanodes\n       ) throws IOException, InterruptedException {\n \n-    init(ugi, delegation, username, doAsUser, path, op, concatSrcs, bufferSize);\n+    init(ugi, delegation, username, doAsUser, path, op, concatSrcs, bufferSize,\n+        excludeDatanodes);\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException, URISyntaxException {\n         try {\n           return post(ugi, delegation, username, doAsUser,\n-              path.getAbsolutePath(), op, concatSrcs, bufferSize);\n+              path.getAbsolutePath(), op, concatSrcs, bufferSize,\n+              excludeDatanodes);\n         } finally {\n           reset();\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public Response post(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n          final UserParam username,\n      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n          final DoAsParam doAsUser,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n          final PostOpParam op,\n      @QueryParam(ConcatSourcesParam.NAME) @DefaultValue(ConcatSourcesParam.DEFAULT)\n          final ConcatSourcesParam concatSrcs,\n      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n          final BufferSizeParam bufferSize,\n      @QueryParam(ExcludeDatanodesParam.NAME) @DefaultValue(ExcludeDatanodesParam.DEFAULT)\n          final ExcludeDatanodesParam excludeDatanodes\n      ) throws IOException, InterruptedException {\n\n    init(ugi, delegation, username, doAsUser, path, op, concatSrcs, bufferSize,\n        excludeDatanodes);\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException, URISyntaxException {\n        try {\n          return post(ugi, delegation, username, doAsUser,\n              path.getAbsolutePath(), op, concatSrcs, bufferSize,\n              excludeDatanodes);\n        } finally {\n          reset();\n        }\n      }\n    });\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {}
        }
      ]
    },
    "02d0f0ba549e584f98b4606c7cea325c9c1afb6c": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-6218. Audit log should use true client IP for proxied webhdfs operations. Contributed by Daryn Sharp.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1590640 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "28/04/14 7:00 AM",
      "commitName": "02d0f0ba549e584f98b4606c7cea325c9c1afb6c",
      "commitAuthor": "Kihwal Lee",
      "commitDateOld": "19/03/14 10:29 AM",
      "commitNameOld": "7817245d88cb20ece994cc1c5afb3afa0da2661c",
      "commitAuthorOld": "Jing Zhao",
      "daysBetweenCommits": 39.85,
      "commitsBetweenForRepo": 264,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,32 +1,31 @@\n   public Response post(\n       @Context final UserGroupInformation ugi,\n       @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n           final DelegationParam delegation,\n       @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n           final UserParam username,\n       @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n           final DoAsParam doAsUser,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n           final PostOpParam op,\n       @QueryParam(ConcatSourcesParam.NAME) @DefaultValue(ConcatSourcesParam.DEFAULT)\n           final ConcatSourcesParam concatSrcs,\n       @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n           final BufferSizeParam bufferSize\n       ) throws IOException, InterruptedException {\n \n     init(ugi, delegation, username, doAsUser, path, op, concatSrcs, bufferSize);\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException, URISyntaxException {\n-        REMOTE_ADDRESS.set(request.getRemoteAddr());\n         try {\n           return post(ugi, delegation, username, doAsUser,\n               path.getAbsolutePath(), op, concatSrcs, bufferSize);\n         } finally {\n-          REMOTE_ADDRESS.set(null);\n+          reset();\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public Response post(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n          final UserParam username,\n      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n          final DoAsParam doAsUser,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n          final PostOpParam op,\n      @QueryParam(ConcatSourcesParam.NAME) @DefaultValue(ConcatSourcesParam.DEFAULT)\n          final ConcatSourcesParam concatSrcs,\n      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n          final BufferSizeParam bufferSize\n      ) throws IOException, InterruptedException {\n\n    init(ugi, delegation, username, doAsUser, path, op, concatSrcs, bufferSize);\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException, URISyntaxException {\n        try {\n          return post(ugi, delegation, username, doAsUser,\n              path.getAbsolutePath(), op, concatSrcs, bufferSize);\n        } finally {\n          reset();\n        }\n      }\n    });\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
      "extendedDetails": {}
    },
    "481b6cccf0493cb3f740b119552bede0f7268121": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "HDFS-3598. WebHDFS support for file concat. Contributed by Plamen Jeliazkov.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1440290 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "29/01/13 10:51 PM",
      "commitName": "481b6cccf0493cb3f740b119552bede0f7268121",
      "commitAuthor": "Konstantin Shvachko",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-3598. WebHDFS support for file concat. Contributed by Plamen Jeliazkov.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1440290 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "29/01/13 10:51 PM",
          "commitName": "481b6cccf0493cb3f740b119552bede0f7268121",
          "commitAuthor": "Konstantin Shvachko",
          "commitDateOld": "09/01/13 6:30 PM",
          "commitNameOld": "6449f524552f8c24d20b314ad21f6c579fa08e85",
          "commitAuthorOld": "Eli Collins",
          "daysBetweenCommits": 20.18,
          "commitsBetweenForRepo": 105,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,30 +1,32 @@\n   public Response post(\n       @Context final UserGroupInformation ugi,\n       @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n           final DelegationParam delegation,\n       @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n           final UserParam username,\n       @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n           final DoAsParam doAsUser,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n           final PostOpParam op,\n+      @QueryParam(ConcatSourcesParam.NAME) @DefaultValue(ConcatSourcesParam.DEFAULT)\n+          final ConcatSourcesParam concatSrcs,\n       @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n           final BufferSizeParam bufferSize\n       ) throws IOException, InterruptedException {\n \n-    init(ugi, delegation, username, doAsUser, path, op, bufferSize);\n+    init(ugi, delegation, username, doAsUser, path, op, concatSrcs, bufferSize);\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException, URISyntaxException {\n         REMOTE_ADDRESS.set(request.getRemoteAddr());\n         try {\n           return post(ugi, delegation, username, doAsUser,\n-              path.getAbsolutePath(), op, bufferSize);\n+              path.getAbsolutePath(), op, concatSrcs, bufferSize);\n         } finally {\n           REMOTE_ADDRESS.set(null);\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public Response post(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n          final UserParam username,\n      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n          final DoAsParam doAsUser,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n          final PostOpParam op,\n      @QueryParam(ConcatSourcesParam.NAME) @DefaultValue(ConcatSourcesParam.DEFAULT)\n          final ConcatSourcesParam concatSrcs,\n      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n          final BufferSizeParam bufferSize\n      ) throws IOException, InterruptedException {\n\n    init(ugi, delegation, username, doAsUser, path, op, concatSrcs, bufferSize);\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException, URISyntaxException {\n        REMOTE_ADDRESS.set(request.getRemoteAddr());\n        try {\n          return post(ugi, delegation, username, doAsUser,\n              path.getAbsolutePath(), op, concatSrcs, bufferSize);\n        } finally {\n          REMOTE_ADDRESS.set(null);\n        }\n      }\n    });\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {
            "oldValue": "[ugi-UserGroupInformation(annotations-@Context__modifiers-final), delegation-DelegationParam(annotations-@QueryParam(DelegationParam.NAME)-@DefaultValue(DelegationParam.DEFAULT)__modifiers-final), username-UserParam(annotations-@QueryParam(UserParam.NAME)-@DefaultValue(UserParam.DEFAULT)__modifiers-final), doAsUser-DoAsParam(annotations-@QueryParam(DoAsParam.NAME)-@DefaultValue(DoAsParam.DEFAULT)__modifiers-final), path-UriFsPathParam(annotations-@PathParam(UriFsPathParam.NAME)__modifiers-final), op-PostOpParam(annotations-@QueryParam(PostOpParam.NAME)-@DefaultValue(PostOpParam.DEFAULT)__modifiers-final), bufferSize-BufferSizeParam(annotations-@QueryParam(BufferSizeParam.NAME)-@DefaultValue(BufferSizeParam.DEFAULT)__modifiers-final)]",
            "newValue": "[ugi-UserGroupInformation(annotations-@Context__modifiers-final), delegation-DelegationParam(annotations-@QueryParam(DelegationParam.NAME)-@DefaultValue(DelegationParam.DEFAULT)__modifiers-final), username-UserParam(annotations-@QueryParam(UserParam.NAME)-@DefaultValue(UserParam.DEFAULT)__modifiers-final), doAsUser-DoAsParam(annotations-@QueryParam(DoAsParam.NAME)-@DefaultValue(DoAsParam.DEFAULT)__modifiers-final), path-UriFsPathParam(annotations-@PathParam(UriFsPathParam.NAME)__modifiers-final), op-PostOpParam(annotations-@QueryParam(PostOpParam.NAME)-@DefaultValue(PostOpParam.DEFAULT)__modifiers-final), concatSrcs-ConcatSourcesParam(annotations-@QueryParam(ConcatSourcesParam.NAME)-@DefaultValue(ConcatSourcesParam.DEFAULT)__modifiers-final), bufferSize-BufferSizeParam(annotations-@QueryParam(BufferSizeParam.NAME)-@DefaultValue(BufferSizeParam.DEFAULT)__modifiers-final)]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-3598. WebHDFS support for file concat. Contributed by Plamen Jeliazkov.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1440290 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "29/01/13 10:51 PM",
          "commitName": "481b6cccf0493cb3f740b119552bede0f7268121",
          "commitAuthor": "Konstantin Shvachko",
          "commitDateOld": "09/01/13 6:30 PM",
          "commitNameOld": "6449f524552f8c24d20b314ad21f6c579fa08e85",
          "commitAuthorOld": "Eli Collins",
          "daysBetweenCommits": 20.18,
          "commitsBetweenForRepo": 105,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,30 +1,32 @@\n   public Response post(\n       @Context final UserGroupInformation ugi,\n       @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n           final DelegationParam delegation,\n       @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n           final UserParam username,\n       @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n           final DoAsParam doAsUser,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n           final PostOpParam op,\n+      @QueryParam(ConcatSourcesParam.NAME) @DefaultValue(ConcatSourcesParam.DEFAULT)\n+          final ConcatSourcesParam concatSrcs,\n       @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n           final BufferSizeParam bufferSize\n       ) throws IOException, InterruptedException {\n \n-    init(ugi, delegation, username, doAsUser, path, op, bufferSize);\n+    init(ugi, delegation, username, doAsUser, path, op, concatSrcs, bufferSize);\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException, URISyntaxException {\n         REMOTE_ADDRESS.set(request.getRemoteAddr());\n         try {\n           return post(ugi, delegation, username, doAsUser,\n-              path.getAbsolutePath(), op, bufferSize);\n+              path.getAbsolutePath(), op, concatSrcs, bufferSize);\n         } finally {\n           REMOTE_ADDRESS.set(null);\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public Response post(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n          final UserParam username,\n      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n          final DoAsParam doAsUser,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n          final PostOpParam op,\n      @QueryParam(ConcatSourcesParam.NAME) @DefaultValue(ConcatSourcesParam.DEFAULT)\n          final ConcatSourcesParam concatSrcs,\n      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n          final BufferSizeParam bufferSize\n      ) throws IOException, InterruptedException {\n\n    init(ugi, delegation, username, doAsUser, path, op, concatSrcs, bufferSize);\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException, URISyntaxException {\n        REMOTE_ADDRESS.set(request.getRemoteAddr());\n        try {\n          return post(ugi, delegation, username, doAsUser,\n              path.getAbsolutePath(), op, concatSrcs, bufferSize);\n        } finally {\n          REMOTE_ADDRESS.set(null);\n        }\n      }\n    });\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {}
        }
      ]
    },
    "eeec4dc72abf4c540146a81c5419828520b80fa4": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-3294. Fix code indentation in NamenodeWebHdfsMethods and DatanodeWebHdfsMethods.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1327365 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "17/04/12 8:25 PM",
      "commitName": "eeec4dc72abf4c540146a81c5419828520b80fa4",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "15/03/12 5:01 PM",
      "commitNameOld": "7e5b60116eede44d1cb5b6a263b4fec13da3c473",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 33.14,
      "commitsBetweenForRepo": 258,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,43 +1,30 @@\n   public Response post(\n       @Context final UserGroupInformation ugi,\n       @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n           final DelegationParam delegation,\n       @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n           final UserParam username,\n       @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n           final DoAsParam doAsUser,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n           final PostOpParam op,\n       @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n           final BufferSizeParam bufferSize\n       ) throws IOException, InterruptedException {\n \n     init(ugi, delegation, username, doAsUser, path, op, bufferSize);\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException, URISyntaxException {\n         REMOTE_ADDRESS.set(request.getRemoteAddr());\n         try {\n-\n-    final String fullpath \u003d path.getAbsolutePath();\n-    final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n-\n-    switch(op.getValue()) {\n-    case APPEND:\n-    {\n-      final URI uri \u003d redirectURI(namenode, ugi, delegation, username, doAsUser,\n-          fullpath, op.getValue(), -1L, bufferSize);\n-      return Response.temporaryRedirect(uri).type(MediaType.APPLICATION_OCTET_STREAM).build();\n-    }\n-    default:\n-      throw new UnsupportedOperationException(op + \" is not supported\");\n-    }\n-\n+          return post(ugi, delegation, username, doAsUser,\n+              path.getAbsolutePath(), op, bufferSize);\n         } finally {\n           REMOTE_ADDRESS.set(null);\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public Response post(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n          final UserParam username,\n      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n          final DoAsParam doAsUser,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n          final PostOpParam op,\n      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n          final BufferSizeParam bufferSize\n      ) throws IOException, InterruptedException {\n\n    init(ugi, delegation, username, doAsUser, path, op, bufferSize);\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException, URISyntaxException {\n        REMOTE_ADDRESS.set(request.getRemoteAddr());\n        try {\n          return post(ugi, delegation, username, doAsUser,\n              path.getAbsolutePath(), op, bufferSize);\n        } finally {\n          REMOTE_ADDRESS.set(null);\n        }\n      }\n    });\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
      "extendedDetails": {}
    },
    "dacbeb5f6711b83bd293928b5329f7b846f2e66e": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-3006. In WebHDFS, when the return body is empty, set the Content-Type to application/octet-stream instead of application/json.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1293487 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/02/12 4:15 PM",
      "commitName": "dacbeb5f6711b83bd293928b5329f7b846f2e66e",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "13/12/11 5:47 PM",
      "commitNameOld": "433a6e78f69f1168979ff41ac684fba73a6bc2d2",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 72.94,
      "commitsBetweenForRepo": 397,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,43 +1,43 @@\n   public Response post(\n       @Context final UserGroupInformation ugi,\n       @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n           final DelegationParam delegation,\n       @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n           final UserParam username,\n       @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n           final DoAsParam doAsUser,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n           final PostOpParam op,\n       @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n           final BufferSizeParam bufferSize\n       ) throws IOException, InterruptedException {\n \n     init(ugi, delegation, username, doAsUser, path, op, bufferSize);\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException, URISyntaxException {\n         REMOTE_ADDRESS.set(request.getRemoteAddr());\n         try {\n \n     final String fullpath \u003d path.getAbsolutePath();\n     final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n \n     switch(op.getValue()) {\n     case APPEND:\n     {\n       final URI uri \u003d redirectURI(namenode, ugi, delegation, username, doAsUser,\n           fullpath, op.getValue(), -1L, bufferSize);\n-      return Response.temporaryRedirect(uri).build();\n+      return Response.temporaryRedirect(uri).type(MediaType.APPLICATION_OCTET_STREAM).build();\n     }\n     default:\n       throw new UnsupportedOperationException(op + \" is not supported\");\n     }\n \n         } finally {\n           REMOTE_ADDRESS.set(null);\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public Response post(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n          final UserParam username,\n      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n          final DoAsParam doAsUser,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n          final PostOpParam op,\n      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n          final BufferSizeParam bufferSize\n      ) throws IOException, InterruptedException {\n\n    init(ugi, delegation, username, doAsUser, path, op, bufferSize);\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException, URISyntaxException {\n        REMOTE_ADDRESS.set(request.getRemoteAddr());\n        try {\n\n    final String fullpath \u003d path.getAbsolutePath();\n    final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n\n    switch(op.getValue()) {\n    case APPEND:\n    {\n      final URI uri \u003d redirectURI(namenode, ugi, delegation, username, doAsUser,\n          fullpath, op.getValue(), -1L, bufferSize);\n      return Response.temporaryRedirect(uri).type(MediaType.APPLICATION_OCTET_STREAM).build();\n    }\n    default:\n      throw new UnsupportedOperationException(op + \" is not supported\");\n    }\n\n        } finally {\n          REMOTE_ADDRESS.set(null);\n        }\n      }\n    });\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
      "extendedDetails": {}
    },
    "09a156fcce2bc1be4081717bf7ef7d290e80d818": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "HDFS-2539. Support doAs and GETHOMEDIRECTORY in webhdfs.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1200731 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "10/11/11 8:19 PM",
      "commitName": "09a156fcce2bc1be4081717bf7ef7d290e80d818",
      "commitAuthor": "Tsz-wo Sze",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-2539. Support doAs and GETHOMEDIRECTORY in webhdfs.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1200731 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "10/11/11 8:19 PM",
          "commitName": "09a156fcce2bc1be4081717bf7ef7d290e80d818",
          "commitAuthor": "Tsz-wo Sze",
          "commitDateOld": "08/11/11 11:25 AM",
          "commitNameOld": "94c631af1fc49f5ae5881fcd5f0e80b17308d15d",
          "commitAuthorOld": "Tsz-wo Sze",
          "daysBetweenCommits": 2.37,
          "commitsBetweenForRepo": 6,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,45 +1,43 @@\n   public Response post(\n       @Context final UserGroupInformation ugi,\n       @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n           final DelegationParam delegation,\n+      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n+          final UserParam username,\n+      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n+          final DoAsParam doAsUser,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n           final PostOpParam op,\n       @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n           final BufferSizeParam bufferSize\n       ) throws IOException, InterruptedException {\n \n-    if (LOG.isTraceEnabled()) {\n-      LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n-          + Param.toSortedString(\", \", bufferSize));\n-    }\n-\n-    //clear content type\n-    response.setContentType(null);\n+    init(ugi, delegation, username, doAsUser, path, op, bufferSize);\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException, URISyntaxException {\n         REMOTE_ADDRESS.set(request.getRemoteAddr());\n         try {\n \n     final String fullpath \u003d path.getAbsolutePath();\n     final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n \n     switch(op.getValue()) {\n     case APPEND:\n     {\n-      final URI uri \u003d redirectURI(namenode, ugi, delegation, fullpath,\n-          op.getValue(), -1L, bufferSize);\n+      final URI uri \u003d redirectURI(namenode, ugi, delegation, username, doAsUser,\n+          fullpath, op.getValue(), -1L, bufferSize);\n       return Response.temporaryRedirect(uri).build();\n     }\n     default:\n       throw new UnsupportedOperationException(op + \" is not supported\");\n     }\n \n         } finally {\n           REMOTE_ADDRESS.set(null);\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public Response post(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n          final UserParam username,\n      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n          final DoAsParam doAsUser,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n          final PostOpParam op,\n      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n          final BufferSizeParam bufferSize\n      ) throws IOException, InterruptedException {\n\n    init(ugi, delegation, username, doAsUser, path, op, bufferSize);\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException, URISyntaxException {\n        REMOTE_ADDRESS.set(request.getRemoteAddr());\n        try {\n\n    final String fullpath \u003d path.getAbsolutePath();\n    final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n\n    switch(op.getValue()) {\n    case APPEND:\n    {\n      final URI uri \u003d redirectURI(namenode, ugi, delegation, username, doAsUser,\n          fullpath, op.getValue(), -1L, bufferSize);\n      return Response.temporaryRedirect(uri).build();\n    }\n    default:\n      throw new UnsupportedOperationException(op + \" is not supported\");\n    }\n\n        } finally {\n          REMOTE_ADDRESS.set(null);\n        }\n      }\n    });\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {
            "oldValue": "[ugi-UserGroupInformation(annotations-@Context__modifiers-final), delegation-DelegationParam(annotations-@QueryParam(DelegationParam.NAME)-@DefaultValue(DelegationParam.DEFAULT)__modifiers-final), path-UriFsPathParam(annotations-@PathParam(UriFsPathParam.NAME)__modifiers-final), op-PostOpParam(annotations-@QueryParam(PostOpParam.NAME)-@DefaultValue(PostOpParam.DEFAULT)__modifiers-final), bufferSize-BufferSizeParam(annotations-@QueryParam(BufferSizeParam.NAME)-@DefaultValue(BufferSizeParam.DEFAULT)__modifiers-final)]",
            "newValue": "[ugi-UserGroupInformation(annotations-@Context__modifiers-final), delegation-DelegationParam(annotations-@QueryParam(DelegationParam.NAME)-@DefaultValue(DelegationParam.DEFAULT)__modifiers-final), username-UserParam(annotations-@QueryParam(UserParam.NAME)-@DefaultValue(UserParam.DEFAULT)__modifiers-final), doAsUser-DoAsParam(annotations-@QueryParam(DoAsParam.NAME)-@DefaultValue(DoAsParam.DEFAULT)__modifiers-final), path-UriFsPathParam(annotations-@PathParam(UriFsPathParam.NAME)__modifiers-final), op-PostOpParam(annotations-@QueryParam(PostOpParam.NAME)-@DefaultValue(PostOpParam.DEFAULT)__modifiers-final), bufferSize-BufferSizeParam(annotations-@QueryParam(BufferSizeParam.NAME)-@DefaultValue(BufferSizeParam.DEFAULT)__modifiers-final)]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-2539. Support doAs and GETHOMEDIRECTORY in webhdfs.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1200731 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "10/11/11 8:19 PM",
          "commitName": "09a156fcce2bc1be4081717bf7ef7d290e80d818",
          "commitAuthor": "Tsz-wo Sze",
          "commitDateOld": "08/11/11 11:25 AM",
          "commitNameOld": "94c631af1fc49f5ae5881fcd5f0e80b17308d15d",
          "commitAuthorOld": "Tsz-wo Sze",
          "daysBetweenCommits": 2.37,
          "commitsBetweenForRepo": 6,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,45 +1,43 @@\n   public Response post(\n       @Context final UserGroupInformation ugi,\n       @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n           final DelegationParam delegation,\n+      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n+          final UserParam username,\n+      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n+          final DoAsParam doAsUser,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n           final PostOpParam op,\n       @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n           final BufferSizeParam bufferSize\n       ) throws IOException, InterruptedException {\n \n-    if (LOG.isTraceEnabled()) {\n-      LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n-          + Param.toSortedString(\", \", bufferSize));\n-    }\n-\n-    //clear content type\n-    response.setContentType(null);\n+    init(ugi, delegation, username, doAsUser, path, op, bufferSize);\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException, URISyntaxException {\n         REMOTE_ADDRESS.set(request.getRemoteAddr());\n         try {\n \n     final String fullpath \u003d path.getAbsolutePath();\n     final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n \n     switch(op.getValue()) {\n     case APPEND:\n     {\n-      final URI uri \u003d redirectURI(namenode, ugi, delegation, fullpath,\n-          op.getValue(), -1L, bufferSize);\n+      final URI uri \u003d redirectURI(namenode, ugi, delegation, username, doAsUser,\n+          fullpath, op.getValue(), -1L, bufferSize);\n       return Response.temporaryRedirect(uri).build();\n     }\n     default:\n       throw new UnsupportedOperationException(op + \" is not supported\");\n     }\n \n         } finally {\n           REMOTE_ADDRESS.set(null);\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public Response post(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @QueryParam(UserParam.NAME) @DefaultValue(UserParam.DEFAULT)\n          final UserParam username,\n      @QueryParam(DoAsParam.NAME) @DefaultValue(DoAsParam.DEFAULT)\n          final DoAsParam doAsUser,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n          final PostOpParam op,\n      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n          final BufferSizeParam bufferSize\n      ) throws IOException, InterruptedException {\n\n    init(ugi, delegation, username, doAsUser, path, op, bufferSize);\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException, URISyntaxException {\n        REMOTE_ADDRESS.set(request.getRemoteAddr());\n        try {\n\n    final String fullpath \u003d path.getAbsolutePath();\n    final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n\n    switch(op.getValue()) {\n    case APPEND:\n    {\n      final URI uri \u003d redirectURI(namenode, ugi, delegation, username, doAsUser,\n          fullpath, op.getValue(), -1L, bufferSize);\n      return Response.temporaryRedirect(uri).build();\n    }\n    default:\n      throw new UnsupportedOperationException(op + \" is not supported\");\n    }\n\n        } finally {\n          REMOTE_ADDRESS.set(null);\n        }\n      }\n    });\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {}
        }
      ]
    },
    "7d1a5078b73c8523d63c1250812238dcc0963530": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-2441. Remove the Content-Type set by HttpServer.QuotingInputFilter in webhdfs responses.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1183081 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "13/10/11 1:41 PM",
      "commitName": "7d1a5078b73c8523d63c1250812238dcc0963530",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "09/10/11 6:49 PM",
      "commitNameOld": "676f488efffd50eb47e75cd750f9bc948b9e12fb",
      "commitAuthorOld": "Suresh Srinivas",
      "daysBetweenCommits": 3.79,
      "commitsBetweenForRepo": 34,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,42 +1,45 @@\n   public Response post(\n       @Context final UserGroupInformation ugi,\n       @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n           final DelegationParam delegation,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n           final PostOpParam op,\n       @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n           final BufferSizeParam bufferSize\n       ) throws IOException, InterruptedException {\n \n     if (LOG.isTraceEnabled()) {\n       LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n           + Param.toSortedString(\", \", bufferSize));\n     }\n \n+    //clear content type\n+    response.setContentType(null);\n+\n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException, URISyntaxException {\n         REMOTE_ADDRESS.set(request.getRemoteAddr());\n         try {\n \n     final String fullpath \u003d path.getAbsolutePath();\n     final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n \n     switch(op.getValue()) {\n     case APPEND:\n     {\n       final URI uri \u003d redirectURI(namenode, ugi, delegation, fullpath,\n           op.getValue(), -1L, bufferSize);\n       return Response.temporaryRedirect(uri).build();\n     }\n     default:\n       throw new UnsupportedOperationException(op + \" is not supported\");\n     }\n \n         } finally {\n           REMOTE_ADDRESS.set(null);\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public Response post(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n          final PostOpParam op,\n      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n          final BufferSizeParam bufferSize\n      ) throws IOException, InterruptedException {\n\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n          + Param.toSortedString(\", \", bufferSize));\n    }\n\n    //clear content type\n    response.setContentType(null);\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException, URISyntaxException {\n        REMOTE_ADDRESS.set(request.getRemoteAddr());\n        try {\n\n    final String fullpath \u003d path.getAbsolutePath();\n    final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n\n    switch(op.getValue()) {\n    case APPEND:\n    {\n      final URI uri \u003d redirectURI(namenode, ugi, delegation, fullpath,\n          op.getValue(), -1L, bufferSize);\n      return Response.temporaryRedirect(uri).build();\n    }\n    default:\n      throw new UnsupportedOperationException(op + \" is not supported\");\n    }\n\n        } finally {\n          REMOTE_ADDRESS.set(null);\n        }\n      }\n    });\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
      "extendedDetails": {}
    },
    "a2d7287873685249c2ceeda49f9feadfb307f5c2": {
      "type": "Ymultichange(Yparameterchange,Yexceptionschange)",
      "commitMessage": "HDFS-2403. NamenodeWebHdfsMethods.generateDelegationToken(..) does not use the renewer parameter.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1179856 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "06/10/11 2:17 PM",
      "commitName": "a2d7287873685249c2ceeda49f9feadfb307f5c2",
      "commitAuthor": "Tsz-wo Sze",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-2403. NamenodeWebHdfsMethods.generateDelegationToken(..) does not use the renewer parameter.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1179856 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "06/10/11 2:17 PM",
          "commitName": "a2d7287873685249c2ceeda49f9feadfb307f5c2",
          "commitAuthor": "Tsz-wo Sze",
          "commitDateOld": "05/10/11 4:29 AM",
          "commitNameOld": "1b1016beeb716bef8dad93bb2c7c4631a14b3d57",
          "commitAuthorOld": "Tsz-wo Sze",
          "daysBetweenCommits": 1.41,
          "commitsBetweenForRepo": 10,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,43 +1,42 @@\n   public Response post(\n-      final InputStream in,\n       @Context final UserGroupInformation ugi,\n       @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n           final DelegationParam delegation,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n           final PostOpParam op,\n       @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n           final BufferSizeParam bufferSize\n-      ) throws IOException, URISyntaxException, InterruptedException {\n+      ) throws IOException, InterruptedException {\n \n     if (LOG.isTraceEnabled()) {\n       LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n           + Param.toSortedString(\", \", bufferSize));\n     }\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException, URISyntaxException {\n         REMOTE_ADDRESS.set(request.getRemoteAddr());\n         try {\n \n     final String fullpath \u003d path.getAbsolutePath();\n     final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n \n     switch(op.getValue()) {\n     case APPEND:\n     {\n       final URI uri \u003d redirectURI(namenode, ugi, delegation, fullpath,\n           op.getValue(), -1L, bufferSize);\n       return Response.temporaryRedirect(uri).build();\n     }\n     default:\n       throw new UnsupportedOperationException(op + \" is not supported\");\n     }\n \n         } finally {\n           REMOTE_ADDRESS.set(null);\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public Response post(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n          final PostOpParam op,\n      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n          final BufferSizeParam bufferSize\n      ) throws IOException, InterruptedException {\n\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n          + Param.toSortedString(\", \", bufferSize));\n    }\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException, URISyntaxException {\n        REMOTE_ADDRESS.set(request.getRemoteAddr());\n        try {\n\n    final String fullpath \u003d path.getAbsolutePath();\n    final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n\n    switch(op.getValue()) {\n    case APPEND:\n    {\n      final URI uri \u003d redirectURI(namenode, ugi, delegation, fullpath,\n          op.getValue(), -1L, bufferSize);\n      return Response.temporaryRedirect(uri).build();\n    }\n    default:\n      throw new UnsupportedOperationException(op + \" is not supported\");\n    }\n\n        } finally {\n          REMOTE_ADDRESS.set(null);\n        }\n      }\n    });\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {
            "oldValue": "[in-InputStream(modifiers-final), ugi-UserGroupInformation(annotations-@Context__modifiers-final), delegation-DelegationParam(annotations-@QueryParam(DelegationParam.NAME)-@DefaultValue(DelegationParam.DEFAULT)__modifiers-final), path-UriFsPathParam(annotations-@PathParam(UriFsPathParam.NAME)__modifiers-final), op-PostOpParam(annotations-@QueryParam(PostOpParam.NAME)-@DefaultValue(PostOpParam.DEFAULT)__modifiers-final), bufferSize-BufferSizeParam(annotations-@QueryParam(BufferSizeParam.NAME)-@DefaultValue(BufferSizeParam.DEFAULT)__modifiers-final)]",
            "newValue": "[ugi-UserGroupInformation(annotations-@Context__modifiers-final), delegation-DelegationParam(annotations-@QueryParam(DelegationParam.NAME)-@DefaultValue(DelegationParam.DEFAULT)__modifiers-final), path-UriFsPathParam(annotations-@PathParam(UriFsPathParam.NAME)__modifiers-final), op-PostOpParam(annotations-@QueryParam(PostOpParam.NAME)-@DefaultValue(PostOpParam.DEFAULT)__modifiers-final), bufferSize-BufferSizeParam(annotations-@QueryParam(BufferSizeParam.NAME)-@DefaultValue(BufferSizeParam.DEFAULT)__modifiers-final)]"
          }
        },
        {
          "type": "Yexceptionschange",
          "commitMessage": "HDFS-2403. NamenodeWebHdfsMethods.generateDelegationToken(..) does not use the renewer parameter.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1179856 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "06/10/11 2:17 PM",
          "commitName": "a2d7287873685249c2ceeda49f9feadfb307f5c2",
          "commitAuthor": "Tsz-wo Sze",
          "commitDateOld": "05/10/11 4:29 AM",
          "commitNameOld": "1b1016beeb716bef8dad93bb2c7c4631a14b3d57",
          "commitAuthorOld": "Tsz-wo Sze",
          "daysBetweenCommits": 1.41,
          "commitsBetweenForRepo": 10,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,43 +1,42 @@\n   public Response post(\n-      final InputStream in,\n       @Context final UserGroupInformation ugi,\n       @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n           final DelegationParam delegation,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n           final PostOpParam op,\n       @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n           final BufferSizeParam bufferSize\n-      ) throws IOException, URISyntaxException, InterruptedException {\n+      ) throws IOException, InterruptedException {\n \n     if (LOG.isTraceEnabled()) {\n       LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n           + Param.toSortedString(\", \", bufferSize));\n     }\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException, URISyntaxException {\n         REMOTE_ADDRESS.set(request.getRemoteAddr());\n         try {\n \n     final String fullpath \u003d path.getAbsolutePath();\n     final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n \n     switch(op.getValue()) {\n     case APPEND:\n     {\n       final URI uri \u003d redirectURI(namenode, ugi, delegation, fullpath,\n           op.getValue(), -1L, bufferSize);\n       return Response.temporaryRedirect(uri).build();\n     }\n     default:\n       throw new UnsupportedOperationException(op + \" is not supported\");\n     }\n \n         } finally {\n           REMOTE_ADDRESS.set(null);\n         }\n       }\n     });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public Response post(\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n          final PostOpParam op,\n      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n          final BufferSizeParam bufferSize\n      ) throws IOException, InterruptedException {\n\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n          + Param.toSortedString(\", \", bufferSize));\n    }\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException, URISyntaxException {\n        REMOTE_ADDRESS.set(request.getRemoteAddr());\n        try {\n\n    final String fullpath \u003d path.getAbsolutePath();\n    final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n\n    switch(op.getValue()) {\n    case APPEND:\n    {\n      final URI uri \u003d redirectURI(namenode, ugi, delegation, fullpath,\n          op.getValue(), -1L, bufferSize);\n      return Response.temporaryRedirect(uri).build();\n    }\n    default:\n      throw new UnsupportedOperationException(op + \" is not supported\");\n    }\n\n        } finally {\n          REMOTE_ADDRESS.set(null);\n        }\n      }\n    });\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {
            "oldValue": "[IOException, URISyntaxException, InterruptedException]",
            "newValue": "[IOException, InterruptedException]"
          }
        }
      ]
    },
    "4dc4e9e63f7385ddd1d64ae1345e0d32a4acb9de": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-2340. Support getFileBlockLocations and getDelegationToken in webhdfs.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1173468 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "20/09/11 7:56 PM",
      "commitName": "4dc4e9e63f7385ddd1d64ae1345e0d32a4acb9de",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "16/09/11 8:02 AM",
      "commitNameOld": "78e3821b819b441d1faf4bc66c659cdeddc6006c",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 4.5,
      "commitsBetweenForRepo": 31,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,37 +1,43 @@\n   public Response post(\n       final InputStream in,\n       @Context final UserGroupInformation ugi,\n       @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n           final DelegationParam delegation,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n           final PostOpParam op,\n       @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n           final BufferSizeParam bufferSize\n       ) throws IOException, URISyntaxException, InterruptedException {\n \n     if (LOG.isTraceEnabled()) {\n       LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n           + Param.toSortedString(\", \", bufferSize));\n     }\n \n     return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n       @Override\n       public Response run() throws IOException, URISyntaxException {\n+        REMOTE_ADDRESS.set(request.getRemoteAddr());\n+        try {\n \n     final String fullpath \u003d path.getAbsolutePath();\n     final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n \n     switch(op.getValue()) {\n     case APPEND:\n     {\n       final URI uri \u003d redirectURI(namenode, ugi, delegation, fullpath,\n           op.getValue(), -1L, bufferSize);\n       return Response.temporaryRedirect(uri).build();\n     }\n     default:\n       throw new UnsupportedOperationException(op + \" is not supported\");\n     }\n+\n+        } finally {\n+          REMOTE_ADDRESS.set(null);\n+        }\n       }\n     });\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public Response post(\n      final InputStream in,\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n          final PostOpParam op,\n      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n          final BufferSizeParam bufferSize\n      ) throws IOException, URISyntaxException, InterruptedException {\n\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n          + Param.toSortedString(\", \", bufferSize));\n    }\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException, URISyntaxException {\n        REMOTE_ADDRESS.set(request.getRemoteAddr());\n        try {\n\n    final String fullpath \u003d path.getAbsolutePath();\n    final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n\n    switch(op.getValue()) {\n    case APPEND:\n    {\n      final URI uri \u003d redirectURI(namenode, ugi, delegation, fullpath,\n          op.getValue(), -1L, bufferSize);\n      return Response.temporaryRedirect(uri).build();\n    }\n    default:\n      throw new UnsupportedOperationException(op + \" is not supported\");\n    }\n\n        } finally {\n          REMOTE_ADDRESS.set(null);\n        }\n      }\n    });\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
      "extendedDetails": {}
    },
    "78e3821b819b441d1faf4bc66c659cdeddc6006c": {
      "type": "Ymultichange(Yparameterchange,Yexceptionschange,Ybodychange)",
      "commitMessage": "HDFS-2318. Provide authentication to webhdfs using SPNEGO and delegation tokens.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1171611 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "16/09/11 8:02 AM",
      "commitName": "78e3821b819b441d1faf4bc66c659cdeddc6006c",
      "commitAuthor": "Tsz-wo Sze",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-2318. Provide authentication to webhdfs using SPNEGO and delegation tokens.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1171611 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "16/09/11 8:02 AM",
          "commitName": "78e3821b819b441d1faf4bc66c659cdeddc6006c",
          "commitAuthor": "Tsz-wo Sze",
          "commitDateOld": "13/09/11 1:34 AM",
          "commitNameOld": "6c3b59505b863f03629da52a1e9b886fe9b496d0",
          "commitAuthorOld": "Tsz-wo Sze",
          "daysBetweenCommits": 3.27,
          "commitsBetweenForRepo": 20,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,28 +1,37 @@\n   public Response post(\n       final InputStream in,\n+      @Context final UserGroupInformation ugi,\n+      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n+          final DelegationParam delegation,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n           final PostOpParam op,\n       @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n           final BufferSizeParam bufferSize\n-      ) throws IOException, URISyntaxException {\n+      ) throws IOException, URISyntaxException, InterruptedException {\n \n     if (LOG.isTraceEnabled()) {\n-      LOG.trace(op + \": \" + path\n-            + Param.toSortedString(\", \", bufferSize));\n+      LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n+          + Param.toSortedString(\", \", bufferSize));\n     }\n \n+    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n+      @Override\n+      public Response run() throws IOException, URISyntaxException {\n+\n     final String fullpath \u003d path.getAbsolutePath();\n     final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n \n     switch(op.getValue()) {\n     case APPEND:\n     {\n-      final URI uri \u003d redirectURI(namenode, fullpath, op.getValue(), -1L,\n-          bufferSize);\n+      final URI uri \u003d redirectURI(namenode, ugi, delegation, fullpath,\n+          op.getValue(), -1L, bufferSize);\n       return Response.temporaryRedirect(uri).build();\n     }\n     default:\n       throw new UnsupportedOperationException(op + \" is not supported\");\n     }\n+      }\n+    });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public Response post(\n      final InputStream in,\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n          final PostOpParam op,\n      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n          final BufferSizeParam bufferSize\n      ) throws IOException, URISyntaxException, InterruptedException {\n\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n          + Param.toSortedString(\", \", bufferSize));\n    }\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException, URISyntaxException {\n\n    final String fullpath \u003d path.getAbsolutePath();\n    final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n\n    switch(op.getValue()) {\n    case APPEND:\n    {\n      final URI uri \u003d redirectURI(namenode, ugi, delegation, fullpath,\n          op.getValue(), -1L, bufferSize);\n      return Response.temporaryRedirect(uri).build();\n    }\n    default:\n      throw new UnsupportedOperationException(op + \" is not supported\");\n    }\n      }\n    });\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {
            "oldValue": "[in-InputStream(modifiers-final), path-UriFsPathParam(annotations-@PathParam(UriFsPathParam.NAME)__modifiers-final), op-PostOpParam(annotations-@QueryParam(PostOpParam.NAME)-@DefaultValue(PostOpParam.DEFAULT)__modifiers-final), bufferSize-BufferSizeParam(annotations-@QueryParam(BufferSizeParam.NAME)-@DefaultValue(BufferSizeParam.DEFAULT)__modifiers-final)]",
            "newValue": "[in-InputStream(modifiers-final), ugi-UserGroupInformation(annotations-@Context__modifiers-final), delegation-DelegationParam(annotations-@QueryParam(DelegationParam.NAME)-@DefaultValue(DelegationParam.DEFAULT)__modifiers-final), path-UriFsPathParam(annotations-@PathParam(UriFsPathParam.NAME)__modifiers-final), op-PostOpParam(annotations-@QueryParam(PostOpParam.NAME)-@DefaultValue(PostOpParam.DEFAULT)__modifiers-final), bufferSize-BufferSizeParam(annotations-@QueryParam(BufferSizeParam.NAME)-@DefaultValue(BufferSizeParam.DEFAULT)__modifiers-final)]"
          }
        },
        {
          "type": "Yexceptionschange",
          "commitMessage": "HDFS-2318. Provide authentication to webhdfs using SPNEGO and delegation tokens.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1171611 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "16/09/11 8:02 AM",
          "commitName": "78e3821b819b441d1faf4bc66c659cdeddc6006c",
          "commitAuthor": "Tsz-wo Sze",
          "commitDateOld": "13/09/11 1:34 AM",
          "commitNameOld": "6c3b59505b863f03629da52a1e9b886fe9b496d0",
          "commitAuthorOld": "Tsz-wo Sze",
          "daysBetweenCommits": 3.27,
          "commitsBetweenForRepo": 20,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,28 +1,37 @@\n   public Response post(\n       final InputStream in,\n+      @Context final UserGroupInformation ugi,\n+      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n+          final DelegationParam delegation,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n           final PostOpParam op,\n       @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n           final BufferSizeParam bufferSize\n-      ) throws IOException, URISyntaxException {\n+      ) throws IOException, URISyntaxException, InterruptedException {\n \n     if (LOG.isTraceEnabled()) {\n-      LOG.trace(op + \": \" + path\n-            + Param.toSortedString(\", \", bufferSize));\n+      LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n+          + Param.toSortedString(\", \", bufferSize));\n     }\n \n+    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n+      @Override\n+      public Response run() throws IOException, URISyntaxException {\n+\n     final String fullpath \u003d path.getAbsolutePath();\n     final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n \n     switch(op.getValue()) {\n     case APPEND:\n     {\n-      final URI uri \u003d redirectURI(namenode, fullpath, op.getValue(), -1L,\n-          bufferSize);\n+      final URI uri \u003d redirectURI(namenode, ugi, delegation, fullpath,\n+          op.getValue(), -1L, bufferSize);\n       return Response.temporaryRedirect(uri).build();\n     }\n     default:\n       throw new UnsupportedOperationException(op + \" is not supported\");\n     }\n+      }\n+    });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public Response post(\n      final InputStream in,\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n          final PostOpParam op,\n      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n          final BufferSizeParam bufferSize\n      ) throws IOException, URISyntaxException, InterruptedException {\n\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n          + Param.toSortedString(\", \", bufferSize));\n    }\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException, URISyntaxException {\n\n    final String fullpath \u003d path.getAbsolutePath();\n    final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n\n    switch(op.getValue()) {\n    case APPEND:\n    {\n      final URI uri \u003d redirectURI(namenode, ugi, delegation, fullpath,\n          op.getValue(), -1L, bufferSize);\n      return Response.temporaryRedirect(uri).build();\n    }\n    default:\n      throw new UnsupportedOperationException(op + \" is not supported\");\n    }\n      }\n    });\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {
            "oldValue": "[IOException, URISyntaxException]",
            "newValue": "[IOException, URISyntaxException, InterruptedException]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-2318. Provide authentication to webhdfs using SPNEGO and delegation tokens.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1171611 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "16/09/11 8:02 AM",
          "commitName": "78e3821b819b441d1faf4bc66c659cdeddc6006c",
          "commitAuthor": "Tsz-wo Sze",
          "commitDateOld": "13/09/11 1:34 AM",
          "commitNameOld": "6c3b59505b863f03629da52a1e9b886fe9b496d0",
          "commitAuthorOld": "Tsz-wo Sze",
          "daysBetweenCommits": 3.27,
          "commitsBetweenForRepo": 20,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,28 +1,37 @@\n   public Response post(\n       final InputStream in,\n+      @Context final UserGroupInformation ugi,\n+      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n+          final DelegationParam delegation,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n           final PostOpParam op,\n       @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n           final BufferSizeParam bufferSize\n-      ) throws IOException, URISyntaxException {\n+      ) throws IOException, URISyntaxException, InterruptedException {\n \n     if (LOG.isTraceEnabled()) {\n-      LOG.trace(op + \": \" + path\n-            + Param.toSortedString(\", \", bufferSize));\n+      LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n+          + Param.toSortedString(\", \", bufferSize));\n     }\n \n+    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n+      @Override\n+      public Response run() throws IOException, URISyntaxException {\n+\n     final String fullpath \u003d path.getAbsolutePath();\n     final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n \n     switch(op.getValue()) {\n     case APPEND:\n     {\n-      final URI uri \u003d redirectURI(namenode, fullpath, op.getValue(), -1L,\n-          bufferSize);\n+      final URI uri \u003d redirectURI(namenode, ugi, delegation, fullpath,\n+          op.getValue(), -1L, bufferSize);\n       return Response.temporaryRedirect(uri).build();\n     }\n     default:\n       throw new UnsupportedOperationException(op + \" is not supported\");\n     }\n+      }\n+    });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public Response post(\n      final InputStream in,\n      @Context final UserGroupInformation ugi,\n      @QueryParam(DelegationParam.NAME) @DefaultValue(DelegationParam.DEFAULT)\n          final DelegationParam delegation,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n          final PostOpParam op,\n      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n          final BufferSizeParam bufferSize\n      ) throws IOException, URISyntaxException, InterruptedException {\n\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(op + \": \" + path + \", ugi\u003d\" + ugi\n          + Param.toSortedString(\", \", bufferSize));\n    }\n\n    return ugi.doAs(new PrivilegedExceptionAction\u003cResponse\u003e() {\n      @Override\n      public Response run() throws IOException, URISyntaxException {\n\n    final String fullpath \u003d path.getAbsolutePath();\n    final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n\n    switch(op.getValue()) {\n    case APPEND:\n    {\n      final URI uri \u003d redirectURI(namenode, ugi, delegation, fullpath,\n          op.getValue(), -1L, bufferSize);\n      return Response.temporaryRedirect(uri).build();\n    }\n    default:\n      throw new UnsupportedOperationException(op + \" is not supported\");\n    }\n      }\n    });\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
          "extendedDetails": {}
        }
      ]
    },
    "6c3b59505b863f03629da52a1e9b886fe9b496d0": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-2317. Support read access to HDFS in webhdfs.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1170085 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "13/09/11 1:34 AM",
      "commitName": "6c3b59505b863f03629da52a1e9b886fe9b496d0",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "10/09/11 6:41 PM",
      "commitNameOld": "61d0b7530c8978c095ab6f62d9d38e168bd829c6",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 2.29,
      "commitsBetweenForRepo": 14,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,27 +1,28 @@\n   public Response post(\n       final InputStream in,\n       @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n       @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n           final PostOpParam op,\n       @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n           final BufferSizeParam bufferSize\n       ) throws IOException, URISyntaxException {\n \n     if (LOG.isTraceEnabled()) {\n       LOG.trace(op + \": \" + path\n             + Param.toSortedString(\", \", bufferSize));\n     }\n \n     final String fullpath \u003d path.getAbsolutePath();\n     final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n \n     switch(op.getValue()) {\n     case APPEND:\n     {\n-      final URI uri \u003d redirectURI(namenode, fullpath, op.getValue(), bufferSize);\n+      final URI uri \u003d redirectURI(namenode, fullpath, op.getValue(), -1L,\n+          bufferSize);\n       return Response.temporaryRedirect(uri).build();\n     }\n     default:\n       throw new UnsupportedOperationException(op + \" is not supported\");\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public Response post(\n      final InputStream in,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n          final PostOpParam op,\n      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n          final BufferSizeParam bufferSize\n      ) throws IOException, URISyntaxException {\n\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(op + \": \" + path\n            + Param.toSortedString(\", \", bufferSize));\n    }\n\n    final String fullpath \u003d path.getAbsolutePath();\n    final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n\n    switch(op.getValue()) {\n    case APPEND:\n    {\n      final URI uri \u003d redirectURI(namenode, fullpath, op.getValue(), -1L,\n          bufferSize);\n      return Response.temporaryRedirect(uri).build();\n    }\n    default:\n      throw new UnsupportedOperationException(op + \" is not supported\");\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java",
      "extendedDetails": {}
    },
    "61d0b7530c8978c095ab6f62d9d38e168bd829c6": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-2284. Add a new FileSystem, webhdfs://, for supporting write Http access to HDFS.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1167662 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "10/09/11 6:41 PM",
      "commitName": "61d0b7530c8978c095ab6f62d9d38e168bd829c6",
      "commitAuthor": "Tsz-wo Sze",
      "diff": "@@ -0,0 +1,27 @@\n+  public Response post(\n+      final InputStream in,\n+      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n+      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n+          final PostOpParam op,\n+      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n+          final BufferSizeParam bufferSize\n+      ) throws IOException, URISyntaxException {\n+\n+    if (LOG.isTraceEnabled()) {\n+      LOG.trace(op + \": \" + path\n+            + Param.toSortedString(\", \", bufferSize));\n+    }\n+\n+    final String fullpath \u003d path.getAbsolutePath();\n+    final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n+\n+    switch(op.getValue()) {\n+    case APPEND:\n+    {\n+      final URI uri \u003d redirectURI(namenode, fullpath, op.getValue(), bufferSize);\n+      return Response.temporaryRedirect(uri).build();\n+    }\n+    default:\n+      throw new UnsupportedOperationException(op + \" is not supported\");\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public Response post(\n      final InputStream in,\n      @PathParam(UriFsPathParam.NAME) final UriFsPathParam path,\n      @QueryParam(PostOpParam.NAME) @DefaultValue(PostOpParam.DEFAULT)\n          final PostOpParam op,\n      @QueryParam(BufferSizeParam.NAME) @DefaultValue(BufferSizeParam.DEFAULT)\n          final BufferSizeParam bufferSize\n      ) throws IOException, URISyntaxException {\n\n    if (LOG.isTraceEnabled()) {\n      LOG.trace(op + \": \" + path\n            + Param.toSortedString(\", \", bufferSize));\n    }\n\n    final String fullpath \u003d path.getAbsolutePath();\n    final NameNode namenode \u003d (NameNode)context.getAttribute(\"name.node\");\n\n    switch(op.getValue()) {\n    case APPEND:\n    {\n      final URI uri \u003d redirectURI(namenode, fullpath, op.getValue(), bufferSize);\n      return Response.temporaryRedirect(uri).build();\n    }\n    default:\n      throw new UnsupportedOperationException(op + \" is not supported\");\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/web/resources/NamenodeWebHdfsMethods.java"
    }
  }
}