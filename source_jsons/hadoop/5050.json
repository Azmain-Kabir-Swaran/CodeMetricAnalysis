{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "DirectoryWithSnapshotFeature.java",
  "functionName": "findSnapshotDeleted",
  "functionId": "findSnapshotDeleted___child-INode(modifiers-final)",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/DirectoryWithSnapshotFeature.java",
  "functionStartLine": 350,
  "functionEndLine": 359,
  "numCommitsSeen": 38,
  "timeTaken": 3279,
  "changeHistory": [
    "ba0da2785d251745969f88a50d33ce61876d91aa",
    "6ea7d78ccb0d1c4af9bcac02a4cff89bdffff252",
    "b2c85db86c9a62b0a03ee87547265077f664970a",
    "10a037cccb00c9f791da394bf2dc05985fb80612"
  ],
  "changeHistoryShort": {
    "ba0da2785d251745969f88a50d33ce61876d91aa": "Ybodychange",
    "6ea7d78ccb0d1c4af9bcac02a4cff89bdffff252": "Ybodychange",
    "b2c85db86c9a62b0a03ee87547265077f664970a": "Ybodychange",
    "10a037cccb00c9f791da394bf2dc05985fb80612": "Yintroduced"
  },
  "changeHistoryDetails": {
    "ba0da2785d251745969f88a50d33ce61876d91aa": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-13252. Code refactoring: Remove Diff.ListType.\n",
      "commitDate": "09/03/18 3:50 PM",
      "commitName": "ba0da2785d251745969f88a50d33ce61876d91aa",
      "commitAuthor": "Tsz-Wo Nicholas Sze",
      "commitDateOld": "06/03/18 1:35 PM",
      "commitNameOld": "346caa209571dedf1331b2658d5702b45dd40bfe",
      "commitAuthorOld": "Tsz-Wo Nicholas Sze",
      "daysBetweenCommits": 3.09,
      "commitsBetweenForRepo": 27,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,12 +1,10 @@\n     public int findSnapshotDeleted(final INode child) {\n       final DiffList\u003cDirectoryDiff\u003e diffList \u003d asList();\n       for(int i \u003d diffList.size() - 1; i \u003e\u003d 0; i--) {\n-        final ChildrenDiff diff \u003d diffList.get(i).diff;\n-        final int d \u003d diff.searchIndex(ListType.DELETED,\n-            child.getLocalNameBytes());\n-        if (d \u003e\u003d 0 \u0026\u0026 diff.getList(ListType.DELETED).get(d) \u003d\u003d child) {\n-          return diffList.get(i).getSnapshotId();\n+        final DirectoryDiff diff \u003d diffList.get(i);\n+        if (diff.getChildrenDiff().containsDeleted(child)) {\n+          return diff.getSnapshotId();\n         }\n       }\n       return NO_SNAPSHOT_ID;\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public int findSnapshotDeleted(final INode child) {\n      final DiffList\u003cDirectoryDiff\u003e diffList \u003d asList();\n      for(int i \u003d diffList.size() - 1; i \u003e\u003d 0; i--) {\n        final DirectoryDiff diff \u003d diffList.get(i);\n        if (diff.getChildrenDiff().containsDeleted(child)) {\n          return diff.getSnapshotId();\n        }\n      }\n      return NO_SNAPSHOT_ID;\n    }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/DirectoryWithSnapshotFeature.java",
      "extendedDetails": {}
    },
    "6ea7d78ccb0d1c4af9bcac02a4cff89bdffff252": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-13142. Define and Implement a DiifList Interface to store and manage SnapshotDiffs.  Contributed by Shashikant Banerjee\n",
      "commitDate": "15/02/18 3:33 AM",
      "commitName": "6ea7d78ccb0d1c4af9bcac02a4cff89bdffff252",
      "commitAuthor": "Tsz-Wo Nicholas Sze",
      "commitDateOld": "14/07/17 2:35 PM",
      "commitNameOld": "f413ee33df301659c4ca9024380c2354983dcc84",
      "commitAuthorOld": "Tsz-Wo Nicholas Sze",
      "daysBetweenCommits": 215.58,
      "commitsBetweenForRepo": 1591,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,12 +1,12 @@\n     public int findSnapshotDeleted(final INode child) {\n-      final List\u003cDirectoryDiff\u003e diffList \u003d asList();\n+      final DiffList\u003cDirectoryDiff\u003e diffList \u003d asList();\n       for(int i \u003d diffList.size() - 1; i \u003e\u003d 0; i--) {\n         final ChildrenDiff diff \u003d diffList.get(i).diff;\n         final int d \u003d diff.searchIndex(ListType.DELETED,\n             child.getLocalNameBytes());\n         if (d \u003e\u003d 0 \u0026\u0026 diff.getList(ListType.DELETED).get(d) \u003d\u003d child) {\n           return diffList.get(i).getSnapshotId();\n         }\n       }\n       return NO_SNAPSHOT_ID;\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public int findSnapshotDeleted(final INode child) {\n      final DiffList\u003cDirectoryDiff\u003e diffList \u003d asList();\n      for(int i \u003d diffList.size() - 1; i \u003e\u003d 0; i--) {\n        final ChildrenDiff diff \u003d diffList.get(i).diff;\n        final int d \u003d diff.searchIndex(ListType.DELETED,\n            child.getLocalNameBytes());\n        if (d \u003e\u003d 0 \u0026\u0026 diff.getList(ListType.DELETED).get(d) \u003d\u003d child) {\n          return diffList.get(i).getSnapshotId();\n        }\n      }\n      return NO_SNAPSHOT_ID;\n    }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/DirectoryWithSnapshotFeature.java",
      "extendedDetails": {}
    },
    "b2c85db86c9a62b0a03ee87547265077f664970a": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-7728. Avoid updating quota usage while loading edits. Contributed by Jing Zhao.\n",
      "commitDate": "13/05/15 9:50 PM",
      "commitName": "b2c85db86c9a62b0a03ee87547265077f664970a",
      "commitAuthor": "Haohui Mai",
      "commitDateOld": "09/05/15 10:51 PM",
      "commitNameOld": "4536399d47f6c061e149e2504600804a0f1e093d",
      "commitAuthorOld": "Haohui Mai",
      "daysBetweenCommits": 3.96,
      "commitsBetweenForRepo": 43,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,12 +1,12 @@\n     public int findSnapshotDeleted(final INode child) {\n       final List\u003cDirectoryDiff\u003e diffList \u003d asList();\n       for(int i \u003d diffList.size() - 1; i \u003e\u003d 0; i--) {\n         final ChildrenDiff diff \u003d diffList.get(i).diff;\n         final int d \u003d diff.searchIndex(ListType.DELETED,\n             child.getLocalNameBytes());\n         if (d \u003e\u003d 0 \u0026\u0026 diff.getList(ListType.DELETED).get(d) \u003d\u003d child) {\n           return diffList.get(i).getSnapshotId();\n         }\n       }\n-      return Snapshot.NO_SNAPSHOT_ID;\n+      return NO_SNAPSHOT_ID;\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public int findSnapshotDeleted(final INode child) {\n      final List\u003cDirectoryDiff\u003e diffList \u003d asList();\n      for(int i \u003d diffList.size() - 1; i \u003e\u003d 0; i--) {\n        final ChildrenDiff diff \u003d diffList.get(i).diff;\n        final int d \u003d diff.searchIndex(ListType.DELETED,\n            child.getLocalNameBytes());\n        if (d \u003e\u003d 0 \u0026\u0026 diff.getList(ListType.DELETED).get(d) \u003d\u003d child) {\n          return diffList.get(i).getSnapshotId();\n        }\n      }\n      return NO_SNAPSHOT_ID;\n    }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/DirectoryWithSnapshotFeature.java",
      "extendedDetails": {}
    },
    "10a037cccb00c9f791da394bf2dc05985fb80612": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-6266. Identify full path for a given INode. Contributed by Jing Zhao.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1589920 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/04/14 7:05 PM",
      "commitName": "10a037cccb00c9f791da394bf2dc05985fb80612",
      "commitAuthor": "Jing Zhao",
      "diff": "@@ -0,0 +1,12 @@\n+    public int findSnapshotDeleted(final INode child) {\n+      final List\u003cDirectoryDiff\u003e diffList \u003d asList();\n+      for(int i \u003d diffList.size() - 1; i \u003e\u003d 0; i--) {\n+        final ChildrenDiff diff \u003d diffList.get(i).diff;\n+        final int d \u003d diff.searchIndex(ListType.DELETED,\n+            child.getLocalNameBytes());\n+        if (d \u003e\u003d 0 \u0026\u0026 diff.getList(ListType.DELETED).get(d) \u003d\u003d child) {\n+          return diffList.get(i).getSnapshotId();\n+        }\n+      }\n+      return Snapshot.NO_SNAPSHOT_ID;\n+    }\n\\ No newline at end of file\n",
      "actualSource": "    public int findSnapshotDeleted(final INode child) {\n      final List\u003cDirectoryDiff\u003e diffList \u003d asList();\n      for(int i \u003d diffList.size() - 1; i \u003e\u003d 0; i--) {\n        final ChildrenDiff diff \u003d diffList.get(i).diff;\n        final int d \u003d diff.searchIndex(ListType.DELETED,\n            child.getLocalNameBytes());\n        if (d \u003e\u003d 0 \u0026\u0026 diff.getList(ListType.DELETED).get(d) \u003d\u003d child) {\n          return diffList.get(i).getSnapshotId();\n        }\n      }\n      return Snapshot.NO_SNAPSHOT_ID;\n    }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/snapshot/DirectoryWithSnapshotFeature.java"
    }
  }
}