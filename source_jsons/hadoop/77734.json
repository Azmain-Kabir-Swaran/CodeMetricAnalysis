{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "SFTPConnectionPool.java",
  "functionName": "shutdown",
  "functionId": "shutdown",
  "sourceFilePath": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/sftp/SFTPConnectionPool.java",
  "functionStartLine": 87,
  "functionEndLine": 113,
  "numCommitsSeen": 2,
  "timeTaken": 530,
  "changeHistory": [
    "559425dcb9302861c3c28b759492a68f8d597092"
  ],
  "changeHistoryShort": {
    "559425dcb9302861c3c28b759492a68f8d597092": "Yintroduced"
  },
  "changeHistoryDetails": {
    "559425dcb9302861c3c28b759492a68f8d597092": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-5732. Add SFTPFileSystem. Contributed by Ramtin Boustani and Inigo Goiri\n",
      "commitDate": "07/07/15 10:08 AM",
      "commitName": "559425dcb9302861c3c28b759492a68f8d597092",
      "commitAuthor": "Chris Douglas",
      "diff": "@@ -0,0 +1,27 @@\n+  synchronized void shutdown() {\n+    if (this.con2infoMap \u003d\u003d null){\n+      return; // already shutdown in case it is called\n+    }\n+    LOG.info(\"Inside shutdown, con2infoMap size\u003d\" + con2infoMap.size());\n+\n+    this.maxConnection \u003d 0;\n+    Set\u003cChannelSftp\u003e cons \u003d con2infoMap.keySet();\n+    if (cons !\u003d null \u0026\u0026 cons.size() \u003e 0) {\n+      // make a copy since we need to modify the underlying Map\n+      Set\u003cChannelSftp\u003e copy \u003d new HashSet\u003cChannelSftp\u003e(cons);\n+      // Initiate disconnect from all outstanding connections\n+      for (ChannelSftp con : copy) {\n+        try {\n+          disconnect(con);\n+        } catch (IOException ioe) {\n+          ConnectionInfo info \u003d con2infoMap.get(con);\n+          LOG.error(\n+              \"Error encountered while closing connection to \" + info.getHost(),\n+              ioe);\n+        }\n+      }\n+    }\n+    // make sure no further connections can be returned.\n+    this.idleConnections \u003d null;\n+    this.con2infoMap \u003d null;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  synchronized void shutdown() {\n    if (this.con2infoMap \u003d\u003d null){\n      return; // already shutdown in case it is called\n    }\n    LOG.info(\"Inside shutdown, con2infoMap size\u003d\" + con2infoMap.size());\n\n    this.maxConnection \u003d 0;\n    Set\u003cChannelSftp\u003e cons \u003d con2infoMap.keySet();\n    if (cons !\u003d null \u0026\u0026 cons.size() \u003e 0) {\n      // make a copy since we need to modify the underlying Map\n      Set\u003cChannelSftp\u003e copy \u003d new HashSet\u003cChannelSftp\u003e(cons);\n      // Initiate disconnect from all outstanding connections\n      for (ChannelSftp con : copy) {\n        try {\n          disconnect(con);\n        } catch (IOException ioe) {\n          ConnectionInfo info \u003d con2infoMap.get(con);\n          LOG.error(\n              \"Error encountered while closing connection to \" + info.getHost(),\n              ioe);\n        }\n      }\n    }\n    // make sure no further connections can be returned.\n    this.idleConnections \u003d null;\n    this.con2infoMap \u003d null;\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/fs/sftp/SFTPConnectionPool.java"
    }
  }
}