{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "TaskLog.java",
  "functionName": "createLogSyncer",
  "functionId": "createLogSyncer",
  "sourceFilePath": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/TaskLog.java",
  "functionStartLine": 328,
  "functionEndLine": 354,
  "numCommitsSeen": 14,
  "timeTaken": 1475,
  "changeHistory": [
    "2440671a117f165dcda5056404bc898df3c50803",
    "d1963ad4bd1fb735bfa39e2b70773bdf1f623a87"
  ],
  "changeHistoryShort": {
    "2440671a117f165dcda5056404bc898df3c50803": "Ybodychange",
    "d1963ad4bd1fb735bfa39e2b70773bdf1f623a87": "Yintroduced"
  },
  "changeHistoryDetails": {
    "2440671a117f165dcda5056404bc898df3c50803": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-6634. Log uncaught exceptions/errors in various thread pools in mapreduce. Contributed by Sidharta Seethana.\n",
      "commitDate": "18/02/16 12:48 AM",
      "commitName": "2440671a117f165dcda5056404bc898df3c50803",
      "commitAuthor": "Varun Vasudev",
      "commitDateOld": "03/12/14 9:02 AM",
      "commitNameOld": "03ab24aa01ffea1cacf1fa9cbbf73c3f2904d981",
      "commitAuthorOld": "Jason Lowe",
      "daysBetweenCommits": 441.66,
      "commitsBetweenForRepo": 3457,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,27 +1,27 @@\n   public static ScheduledExecutorService createLogSyncer() {\n     final ScheduledExecutorService scheduler \u003d\n-      Executors.newSingleThreadScheduledExecutor(\n-        new ThreadFactory() {\n-          @Override\n-          public Thread newThread(Runnable r) {\n-            final Thread t \u003d Executors.defaultThreadFactory().newThread(r);\n-            t.setDaemon(true);\n-            t.setName(\"Thread for syncLogs\");\n-            return t;\n-          }\n-        });\n+        HadoopExecutors.newSingleThreadScheduledExecutor(\n+            new ThreadFactory() {\n+              @Override\n+              public Thread newThread(Runnable r) {\n+                final Thread t \u003d Executors.defaultThreadFactory().newThread(r);\n+                t.setDaemon(true);\n+                t.setName(\"Thread for syncLogs\");\n+                return t;\n+              }\n+            });\n     ShutdownHookManager.get().addShutdownHook(new Runnable() {\n-        @Override\n-        public void run() {\n-          TaskLog.syncLogsShutdown(scheduler);\n-        }\n-      }, 50);\n+      @Override\n+      public void run() {\n+        TaskLog.syncLogsShutdown(scheduler);\n+      }\n+    }, 50);\n     scheduler.scheduleWithFixedDelay(\n         new Runnable() {\n           @Override\n           public void run() {\n             TaskLog.syncLogs();\n           }\n         }, 0L, 5L, TimeUnit.SECONDS);\n     return scheduler;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static ScheduledExecutorService createLogSyncer() {\n    final ScheduledExecutorService scheduler \u003d\n        HadoopExecutors.newSingleThreadScheduledExecutor(\n            new ThreadFactory() {\n              @Override\n              public Thread newThread(Runnable r) {\n                final Thread t \u003d Executors.defaultThreadFactory().newThread(r);\n                t.setDaemon(true);\n                t.setName(\"Thread for syncLogs\");\n                return t;\n              }\n            });\n    ShutdownHookManager.get().addShutdownHook(new Runnable() {\n      @Override\n      public void run() {\n        TaskLog.syncLogsShutdown(scheduler);\n      }\n    }, 50);\n    scheduler.scheduleWithFixedDelay(\n        new Runnable() {\n          @Override\n          public void run() {\n            TaskLog.syncLogs();\n          }\n        }, 0L, 5L, TimeUnit.SECONDS);\n    return scheduler;\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/TaskLog.java",
      "extendedDetails": {}
    },
    "d1963ad4bd1fb735bfa39e2b70773bdf1f623a87": {
      "type": "Yintroduced",
      "commitMessage": "MAPREDUCE-5693. Restore MRv1 behavior for log flush. Contributed by Gera Shegalov\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1560148 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "21/01/14 11:23 AM",
      "commitName": "d1963ad4bd1fb735bfa39e2b70773bdf1f623a87",
      "commitAuthor": "Jason Darrell Lowe",
      "diff": "@@ -0,0 +1,27 @@\n+  public static ScheduledExecutorService createLogSyncer() {\n+    final ScheduledExecutorService scheduler \u003d\n+      Executors.newSingleThreadScheduledExecutor(\n+        new ThreadFactory() {\n+          @Override\n+          public Thread newThread(Runnable r) {\n+            final Thread t \u003d Executors.defaultThreadFactory().newThread(r);\n+            t.setDaemon(true);\n+            t.setName(\"Thread for syncLogs\");\n+            return t;\n+          }\n+        });\n+    ShutdownHookManager.get().addShutdownHook(new Runnable() {\n+        @Override\n+        public void run() {\n+          TaskLog.syncLogsShutdown(scheduler);\n+        }\n+      }, 50);\n+    scheduler.scheduleWithFixedDelay(\n+        new Runnable() {\n+          @Override\n+          public void run() {\n+            TaskLog.syncLogs();\n+          }\n+        }, 0L, 5L, TimeUnit.SECONDS);\n+    return scheduler;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public static ScheduledExecutorService createLogSyncer() {\n    final ScheduledExecutorService scheduler \u003d\n      Executors.newSingleThreadScheduledExecutor(\n        new ThreadFactory() {\n          @Override\n          public Thread newThread(Runnable r) {\n            final Thread t \u003d Executors.defaultThreadFactory().newThread(r);\n            t.setDaemon(true);\n            t.setName(\"Thread for syncLogs\");\n            return t;\n          }\n        });\n    ShutdownHookManager.get().addShutdownHook(new Runnable() {\n        @Override\n        public void run() {\n          TaskLog.syncLogsShutdown(scheduler);\n        }\n      }, 50);\n    scheduler.scheduleWithFixedDelay(\n        new Runnable() {\n          @Override\n          public void run() {\n            TaskLog.syncLogs();\n          }\n        }, 0L, 5L, TimeUnit.SECONDS);\n    return scheduler;\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-core/src/main/java/org/apache/hadoop/mapred/TaskLog.java"
    }
  }
}