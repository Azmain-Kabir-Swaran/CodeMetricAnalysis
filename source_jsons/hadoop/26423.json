{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "MRAppMaster.java",
  "functionName": "initAndStartAppMaster",
  "functionId": "initAndStartAppMaster___appMaster-MRAppMaster(modifiers-final)__conf-JobConf(modifiers-final)__jobUserName-String",
  "sourceFilePath": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/MRAppMaster.java",
  "functionStartLine": 1732,
  "functionEndLine": 1768,
  "numCommitsSeen": 176,
  "timeTaken": 3861,
  "changeHistory": [
    "453d48bdfbb67ed3e66c33c4aef239c3d7bdd3bc",
    "8f6e14399a3e77e1bdcc5034f7601e9f62163dea",
    "7d0c43d7cff6d250613a04fea9449f139988e901",
    "b64572b06b1282128180b9ebdd971f9b1e973e61",
    "14d856be57288c6fbf6a5f3546240a928bf626ef",
    "6e37a7e5e11efb60058d7012de2ef951a8bac113",
    "64e4fb983e022d8d3375a3e1b8facbf95f7ba403",
    "e979a3ddb17f32582e36cdc9b826f06c80c473f2"
  ],
  "changeHistoryShort": {
    "453d48bdfbb67ed3e66c33c4aef239c3d7bdd3bc": "Ybodychange",
    "8f6e14399a3e77e1bdcc5034f7601e9f62163dea": "Ybodychange",
    "7d0c43d7cff6d250613a04fea9449f139988e901": "Ybodychange",
    "b64572b06b1282128180b9ebdd971f9b1e973e61": "Ybodychange",
    "14d856be57288c6fbf6a5f3546240a928bf626ef": "Ymultichange(Yparameterchange,Ybodychange)",
    "6e37a7e5e11efb60058d7012de2ef951a8bac113": "Ybodychange",
    "64e4fb983e022d8d3375a3e1b8facbf95f7ba403": "Ybodychange",
    "e979a3ddb17f32582e36cdc9b826f06c80c473f2": "Yintroduced"
  },
  "changeHistoryDetails": {
    "453d48bdfbb67ed3e66c33c4aef239c3d7bdd3bc": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-6971. Moving logging APIs over to slf4j in hadoop-mapreduce-client-app. Contributed by Jinjiang Ling.\n",
      "commitDate": "02/10/17 8:14 PM",
      "commitName": "453d48bdfbb67ed3e66c33c4aef239c3d7bdd3bc",
      "commitAuthor": "Akira Ajisaka",
      "commitDateOld": "08/08/17 12:46 PM",
      "commitNameOld": "735fce5bec17f4e1799daf922625c475cf588114",
      "commitAuthorOld": "Jason Lowe",
      "daysBetweenCommits": 55.31,
      "commitsBetweenForRepo": 487,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,40 +1,37 @@\n   protected static void initAndStartAppMaster(final MRAppMaster appMaster,\n       final JobConf conf, String jobUserName) throws IOException,\n       InterruptedException {\n     UserGroupInformation.setConfiguration(conf);\n     // MAPREDUCE-6565: need to set configuration for SecurityUtil.\n     SecurityUtil.setConfiguration(conf);\n     // Security framework already loaded the tokens into current UGI, just use\n     // them\n     Credentials credentials \u003d\n         UserGroupInformation.getCurrentUser().getCredentials();\n-    LOG.info(\"Executing with tokens:\");\n-    for (Token\u003c?\u003e token : credentials.getAllTokens()) {\n-      LOG.info(token);\n-    }\n+    LOG.info(\"Executing with tokens: {}\", credentials.getAllTokens());\n     \n     UserGroupInformation appMasterUgi \u003d UserGroupInformation\n         .createRemoteUser(jobUserName);\n     appMasterUgi.addCredentials(credentials);\n \n     // Now remove the AM-\u003eRM token so tasks don\u0027t have it\n     Iterator\u003cToken\u003c?\u003e\u003e iter \u003d credentials.getAllTokens().iterator();\n     while (iter.hasNext()) {\n       Token\u003c?\u003e token \u003d iter.next();\n       if (token.getKind().equals(AMRMTokenIdentifier.KIND_NAME)) {\n         iter.remove();\n       }\n     }\n     conf.getCredentials().addAll(credentials);\n     appMasterUgi.doAs(new PrivilegedExceptionAction\u003cObject\u003e() {\n       @Override\n       public Object run() throws Exception {\n         appMaster.init(conf);\n         appMaster.start();\n         if(appMaster.errorHappenedShutDown) {\n           throw new IOException(\"Was asked to shut down.\");\n         }\n         return null;\n       }\n     });\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected static void initAndStartAppMaster(final MRAppMaster appMaster,\n      final JobConf conf, String jobUserName) throws IOException,\n      InterruptedException {\n    UserGroupInformation.setConfiguration(conf);\n    // MAPREDUCE-6565: need to set configuration for SecurityUtil.\n    SecurityUtil.setConfiguration(conf);\n    // Security framework already loaded the tokens into current UGI, just use\n    // them\n    Credentials credentials \u003d\n        UserGroupInformation.getCurrentUser().getCredentials();\n    LOG.info(\"Executing with tokens: {}\", credentials.getAllTokens());\n    \n    UserGroupInformation appMasterUgi \u003d UserGroupInformation\n        .createRemoteUser(jobUserName);\n    appMasterUgi.addCredentials(credentials);\n\n    // Now remove the AM-\u003eRM token so tasks don\u0027t have it\n    Iterator\u003cToken\u003c?\u003e\u003e iter \u003d credentials.getAllTokens().iterator();\n    while (iter.hasNext()) {\n      Token\u003c?\u003e token \u003d iter.next();\n      if (token.getKind().equals(AMRMTokenIdentifier.KIND_NAME)) {\n        iter.remove();\n      }\n    }\n    conf.getCredentials().addAll(credentials);\n    appMasterUgi.doAs(new PrivilegedExceptionAction\u003cObject\u003e() {\n      @Override\n      public Object run() throws Exception {\n        appMaster.init(conf);\n        appMaster.start();\n        if(appMaster.errorHappenedShutDown) {\n          throw new IOException(\"Was asked to shut down.\");\n        }\n        return null;\n      }\n    });\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/MRAppMaster.java",
      "extendedDetails": {}
    },
    "8f6e14399a3e77e1bdcc5034f7601e9f62163dea": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-6565. Configuration to use host name in delegation token service is not read from job.xml during MapReduce job execution. Contributed by Li Lu.\n",
      "commitDate": "29/11/16 3:51 PM",
      "commitName": "8f6e14399a3e77e1bdcc5034f7601e9f62163dea",
      "commitAuthor": "Junping Du",
      "commitDateOld": "03/10/16 10:30 AM",
      "commitNameOld": "de7a0a92ca1983b35ca4beb7ab712fd700a9e6e0",
      "commitAuthorOld": "Karthik Kambatla",
      "daysBetweenCommits": 57.26,
      "commitsBetweenForRepo": 471,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,38 +1,40 @@\n   protected static void initAndStartAppMaster(final MRAppMaster appMaster,\n       final JobConf conf, String jobUserName) throws IOException,\n       InterruptedException {\n     UserGroupInformation.setConfiguration(conf);\n+    // MAPREDUCE-6565: need to set configuration for SecurityUtil.\n+    SecurityUtil.setConfiguration(conf);\n     // Security framework already loaded the tokens into current UGI, just use\n     // them\n     Credentials credentials \u003d\n         UserGroupInformation.getCurrentUser().getCredentials();\n     LOG.info(\"Executing with tokens:\");\n     for (Token\u003c?\u003e token : credentials.getAllTokens()) {\n       LOG.info(token);\n     }\n     \n     UserGroupInformation appMasterUgi \u003d UserGroupInformation\n         .createRemoteUser(jobUserName);\n     appMasterUgi.addCredentials(credentials);\n \n     // Now remove the AM-\u003eRM token so tasks don\u0027t have it\n     Iterator\u003cToken\u003c?\u003e\u003e iter \u003d credentials.getAllTokens().iterator();\n     while (iter.hasNext()) {\n       Token\u003c?\u003e token \u003d iter.next();\n       if (token.getKind().equals(AMRMTokenIdentifier.KIND_NAME)) {\n         iter.remove();\n       }\n     }\n     conf.getCredentials().addAll(credentials);\n     appMasterUgi.doAs(new PrivilegedExceptionAction\u003cObject\u003e() {\n       @Override\n       public Object run() throws Exception {\n         appMaster.init(conf);\n         appMaster.start();\n         if(appMaster.errorHappenedShutDown) {\n           throw new IOException(\"Was asked to shut down.\");\n         }\n         return null;\n       }\n     });\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected static void initAndStartAppMaster(final MRAppMaster appMaster,\n      final JobConf conf, String jobUserName) throws IOException,\n      InterruptedException {\n    UserGroupInformation.setConfiguration(conf);\n    // MAPREDUCE-6565: need to set configuration for SecurityUtil.\n    SecurityUtil.setConfiguration(conf);\n    // Security framework already loaded the tokens into current UGI, just use\n    // them\n    Credentials credentials \u003d\n        UserGroupInformation.getCurrentUser().getCredentials();\n    LOG.info(\"Executing with tokens:\");\n    for (Token\u003c?\u003e token : credentials.getAllTokens()) {\n      LOG.info(token);\n    }\n    \n    UserGroupInformation appMasterUgi \u003d UserGroupInformation\n        .createRemoteUser(jobUserName);\n    appMasterUgi.addCredentials(credentials);\n\n    // Now remove the AM-\u003eRM token so tasks don\u0027t have it\n    Iterator\u003cToken\u003c?\u003e\u003e iter \u003d credentials.getAllTokens().iterator();\n    while (iter.hasNext()) {\n      Token\u003c?\u003e token \u003d iter.next();\n      if (token.getKind().equals(AMRMTokenIdentifier.KIND_NAME)) {\n        iter.remove();\n      }\n    }\n    conf.getCredentials().addAll(credentials);\n    appMasterUgi.doAs(new PrivilegedExceptionAction\u003cObject\u003e() {\n      @Override\n      public Object run() throws Exception {\n        appMaster.init(conf);\n        appMaster.start();\n        if(appMaster.errorHappenedShutDown) {\n          throw new IOException(\"Was asked to shut down.\");\n        }\n        return null;\n      }\n    });\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/MRAppMaster.java",
      "extendedDetails": {}
    },
    "7d0c43d7cff6d250613a04fea9449f139988e901": {
      "type": "Ybodychange",
      "commitMessage": "YARN-822. Renamed ApplicationToken to be AMRMToken, and similarly the corresponding TokenSelector and SecretManager. Contributed by Omkar Vinit Joshi.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1493889 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "17/06/13 12:11 PM",
      "commitName": "7d0c43d7cff6d250613a04fea9449f139988e901",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "17/06/13 1:13 AM",
      "commitNameOld": "cd300581936405f67103c3fb0f50728b8d703228",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 0.46,
      "commitsBetweenForRepo": 4,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,38 +1,38 @@\n   protected static void initAndStartAppMaster(final MRAppMaster appMaster,\n       final JobConf conf, String jobUserName) throws IOException,\n       InterruptedException {\n     UserGroupInformation.setConfiguration(conf);\n     // Security framework already loaded the tokens into current UGI, just use\n     // them\n     Credentials credentials \u003d\n         UserGroupInformation.getCurrentUser().getCredentials();\n     LOG.info(\"Executing with tokens:\");\n     for (Token\u003c?\u003e token : credentials.getAllTokens()) {\n       LOG.info(token);\n     }\n     \n     UserGroupInformation appMasterUgi \u003d UserGroupInformation\n         .createRemoteUser(jobUserName);\n     appMasterUgi.addCredentials(credentials);\n \n     // Now remove the AM-\u003eRM token so tasks don\u0027t have it\n     Iterator\u003cToken\u003c?\u003e\u003e iter \u003d credentials.getAllTokens().iterator();\n     while (iter.hasNext()) {\n       Token\u003c?\u003e token \u003d iter.next();\n-      if (token.getKind().equals(ApplicationTokenIdentifier.KIND_NAME)) {\n+      if (token.getKind().equals(AMRMTokenIdentifier.KIND_NAME)) {\n         iter.remove();\n       }\n     }\n     conf.getCredentials().addAll(credentials);\n     appMasterUgi.doAs(new PrivilegedExceptionAction\u003cObject\u003e() {\n       @Override\n       public Object run() throws Exception {\n         appMaster.init(conf);\n         appMaster.start();\n         if(appMaster.errorHappenedShutDown) {\n           throw new IOException(\"Was asked to shut down.\");\n         }\n         return null;\n       }\n     });\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected static void initAndStartAppMaster(final MRAppMaster appMaster,\n      final JobConf conf, String jobUserName) throws IOException,\n      InterruptedException {\n    UserGroupInformation.setConfiguration(conf);\n    // Security framework already loaded the tokens into current UGI, just use\n    // them\n    Credentials credentials \u003d\n        UserGroupInformation.getCurrentUser().getCredentials();\n    LOG.info(\"Executing with tokens:\");\n    for (Token\u003c?\u003e token : credentials.getAllTokens()) {\n      LOG.info(token);\n    }\n    \n    UserGroupInformation appMasterUgi \u003d UserGroupInformation\n        .createRemoteUser(jobUserName);\n    appMasterUgi.addCredentials(credentials);\n\n    // Now remove the AM-\u003eRM token so tasks don\u0027t have it\n    Iterator\u003cToken\u003c?\u003e\u003e iter \u003d credentials.getAllTokens().iterator();\n    while (iter.hasNext()) {\n      Token\u003c?\u003e token \u003d iter.next();\n      if (token.getKind().equals(AMRMTokenIdentifier.KIND_NAME)) {\n        iter.remove();\n      }\n    }\n    conf.getCredentials().addAll(credentials);\n    appMasterUgi.doAs(new PrivilegedExceptionAction\u003cObject\u003e() {\n      @Override\n      public Object run() throws Exception {\n        appMaster.init(conf);\n        appMaster.start();\n        if(appMaster.errorHappenedShutDown) {\n          throw new IOException(\"Was asked to shut down.\");\n        }\n        return null;\n      }\n    });\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/MRAppMaster.java",
      "extendedDetails": {}
    },
    "b64572b06b1282128180b9ebdd971f9b1e973e61": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-5199. Removing ApplicationTokens file as it is no longer needed. Contributed by Daryn Sharp.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1492848 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "13/06/13 1:20 PM",
      "commitName": "b64572b06b1282128180b9ebdd971f9b1e973e61",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "13/06/13 8:54 AM",
      "commitNameOld": "0928502029ef141759008997335ea2cd836a7154",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 0.18,
      "commitsBetweenForRepo": 3,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,24 +1,38 @@\n   protected static void initAndStartAppMaster(final MRAppMaster appMaster,\n       final JobConf conf, String jobUserName) throws IOException,\n       InterruptedException {\n     UserGroupInformation.setConfiguration(conf);\n     // Security framework already loaded the tokens into current UGI, just use\n     // them\n     Credentials credentials \u003d\n         UserGroupInformation.getCurrentUser().getCredentials();\n+    LOG.info(\"Executing with tokens:\");\n+    for (Token\u003c?\u003e token : credentials.getAllTokens()) {\n+      LOG.info(token);\n+    }\n+    \n     UserGroupInformation appMasterUgi \u003d UserGroupInformation\n         .createRemoteUser(jobUserName);\n     appMasterUgi.addCredentials(credentials);\n+\n+    // Now remove the AM-\u003eRM token so tasks don\u0027t have it\n+    Iterator\u003cToken\u003c?\u003e\u003e iter \u003d credentials.getAllTokens().iterator();\n+    while (iter.hasNext()) {\n+      Token\u003c?\u003e token \u003d iter.next();\n+      if (token.getKind().equals(ApplicationTokenIdentifier.KIND_NAME)) {\n+        iter.remove();\n+      }\n+    }\n     conf.getCredentials().addAll(credentials);\n     appMasterUgi.doAs(new PrivilegedExceptionAction\u003cObject\u003e() {\n       @Override\n       public Object run() throws Exception {\n         appMaster.init(conf);\n         appMaster.start();\n         if(appMaster.errorHappenedShutDown) {\n           throw new IOException(\"Was asked to shut down.\");\n         }\n         return null;\n       }\n     });\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected static void initAndStartAppMaster(final MRAppMaster appMaster,\n      final JobConf conf, String jobUserName) throws IOException,\n      InterruptedException {\n    UserGroupInformation.setConfiguration(conf);\n    // Security framework already loaded the tokens into current UGI, just use\n    // them\n    Credentials credentials \u003d\n        UserGroupInformation.getCurrentUser().getCredentials();\n    LOG.info(\"Executing with tokens:\");\n    for (Token\u003c?\u003e token : credentials.getAllTokens()) {\n      LOG.info(token);\n    }\n    \n    UserGroupInformation appMasterUgi \u003d UserGroupInformation\n        .createRemoteUser(jobUserName);\n    appMasterUgi.addCredentials(credentials);\n\n    // Now remove the AM-\u003eRM token so tasks don\u0027t have it\n    Iterator\u003cToken\u003c?\u003e\u003e iter \u003d credentials.getAllTokens().iterator();\n    while (iter.hasNext()) {\n      Token\u003c?\u003e token \u003d iter.next();\n      if (token.getKind().equals(ApplicationTokenIdentifier.KIND_NAME)) {\n        iter.remove();\n      }\n    }\n    conf.getCredentials().addAll(credentials);\n    appMasterUgi.doAs(new PrivilegedExceptionAction\u003cObject\u003e() {\n      @Override\n      public Object run() throws Exception {\n        appMaster.init(conf);\n        appMaster.start();\n        if(appMaster.errorHappenedShutDown) {\n          throw new IOException(\"Was asked to shut down.\");\n        }\n        return null;\n      }\n    });\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/MRAppMaster.java",
      "extendedDetails": {}
    },
    "14d856be57288c6fbf6a5f3546240a928bf626ef": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "MAPREDUCE-5240. Fix a bug in MRAppMaster because of which OutputCommitter could not access credentials set by the user. Contributed by Vinod Kumar Vavilapalli.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1482175 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "13/05/13 7:48 PM",
      "commitName": "14d856be57288c6fbf6a5f3546240a928bf626ef",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "MAPREDUCE-5240. Fix a bug in MRAppMaster because of which OutputCommitter could not access credentials set by the user. Contributed by Vinod Kumar Vavilapalli.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1482175 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "13/05/13 7:48 PM",
          "commitName": "14d856be57288c6fbf6a5f3546240a928bf626ef",
          "commitAuthor": "Vinod Kumar Vavilapalli",
          "commitDateOld": "03/05/13 5:27 PM",
          "commitNameOld": "6e37a7e5e11efb60058d7012de2ef951a8bac113",
          "commitAuthorOld": "Vinod Kumar Vavilapalli",
          "daysBetweenCommits": 10.1,
          "commitsBetweenForRepo": 55,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,23 +1,24 @@\n   protected static void initAndStartAppMaster(final MRAppMaster appMaster,\n-      final YarnConfiguration conf, String jobUserName) throws IOException,\n+      final JobConf conf, String jobUserName) throws IOException,\n       InterruptedException {\n     UserGroupInformation.setConfiguration(conf);\n     // Security framework already loaded the tokens into current UGI, just use\n     // them\n     Credentials credentials \u003d\n         UserGroupInformation.getCurrentUser().getCredentials();\n     UserGroupInformation appMasterUgi \u003d UserGroupInformation\n         .createRemoteUser(jobUserName);\n     appMasterUgi.addCredentials(credentials);\n+    conf.getCredentials().addAll(credentials);\n     appMasterUgi.doAs(new PrivilegedExceptionAction\u003cObject\u003e() {\n       @Override\n       public Object run() throws Exception {\n         appMaster.init(conf);\n         appMaster.start();\n         if(appMaster.errorHappenedShutDown) {\n           throw new IOException(\"Was asked to shut down.\");\n         }\n         return null;\n       }\n     });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  protected static void initAndStartAppMaster(final MRAppMaster appMaster,\n      final JobConf conf, String jobUserName) throws IOException,\n      InterruptedException {\n    UserGroupInformation.setConfiguration(conf);\n    // Security framework already loaded the tokens into current UGI, just use\n    // them\n    Credentials credentials \u003d\n        UserGroupInformation.getCurrentUser().getCredentials();\n    UserGroupInformation appMasterUgi \u003d UserGroupInformation\n        .createRemoteUser(jobUserName);\n    appMasterUgi.addCredentials(credentials);\n    conf.getCredentials().addAll(credentials);\n    appMasterUgi.doAs(new PrivilegedExceptionAction\u003cObject\u003e() {\n      @Override\n      public Object run() throws Exception {\n        appMaster.init(conf);\n        appMaster.start();\n        if(appMaster.errorHappenedShutDown) {\n          throw new IOException(\"Was asked to shut down.\");\n        }\n        return null;\n      }\n    });\n  }",
          "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/MRAppMaster.java",
          "extendedDetails": {
            "oldValue": "[appMaster-MRAppMaster(modifiers-final), conf-YarnConfiguration(modifiers-final), jobUserName-String]",
            "newValue": "[appMaster-MRAppMaster(modifiers-final), conf-JobConf(modifiers-final), jobUserName-String]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "MAPREDUCE-5240. Fix a bug in MRAppMaster because of which OutputCommitter could not access credentials set by the user. Contributed by Vinod Kumar Vavilapalli.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1482175 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "13/05/13 7:48 PM",
          "commitName": "14d856be57288c6fbf6a5f3546240a928bf626ef",
          "commitAuthor": "Vinod Kumar Vavilapalli",
          "commitDateOld": "03/05/13 5:27 PM",
          "commitNameOld": "6e37a7e5e11efb60058d7012de2ef951a8bac113",
          "commitAuthorOld": "Vinod Kumar Vavilapalli",
          "daysBetweenCommits": 10.1,
          "commitsBetweenForRepo": 55,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,23 +1,24 @@\n   protected static void initAndStartAppMaster(final MRAppMaster appMaster,\n-      final YarnConfiguration conf, String jobUserName) throws IOException,\n+      final JobConf conf, String jobUserName) throws IOException,\n       InterruptedException {\n     UserGroupInformation.setConfiguration(conf);\n     // Security framework already loaded the tokens into current UGI, just use\n     // them\n     Credentials credentials \u003d\n         UserGroupInformation.getCurrentUser().getCredentials();\n     UserGroupInformation appMasterUgi \u003d UserGroupInformation\n         .createRemoteUser(jobUserName);\n     appMasterUgi.addCredentials(credentials);\n+    conf.getCredentials().addAll(credentials);\n     appMasterUgi.doAs(new PrivilegedExceptionAction\u003cObject\u003e() {\n       @Override\n       public Object run() throws Exception {\n         appMaster.init(conf);\n         appMaster.start();\n         if(appMaster.errorHappenedShutDown) {\n           throw new IOException(\"Was asked to shut down.\");\n         }\n         return null;\n       }\n     });\n   }\n\\ No newline at end of file\n",
          "actualSource": "  protected static void initAndStartAppMaster(final MRAppMaster appMaster,\n      final JobConf conf, String jobUserName) throws IOException,\n      InterruptedException {\n    UserGroupInformation.setConfiguration(conf);\n    // Security framework already loaded the tokens into current UGI, just use\n    // them\n    Credentials credentials \u003d\n        UserGroupInformation.getCurrentUser().getCredentials();\n    UserGroupInformation appMasterUgi \u003d UserGroupInformation\n        .createRemoteUser(jobUserName);\n    appMasterUgi.addCredentials(credentials);\n    conf.getCredentials().addAll(credentials);\n    appMasterUgi.doAs(new PrivilegedExceptionAction\u003cObject\u003e() {\n      @Override\n      public Object run() throws Exception {\n        appMaster.init(conf);\n        appMaster.start();\n        if(appMaster.errorHappenedShutDown) {\n          throw new IOException(\"Was asked to shut down.\");\n        }\n        return null;\n      }\n    });\n  }",
          "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/MRAppMaster.java",
          "extendedDetails": {}
        }
      ]
    },
    "6e37a7e5e11efb60058d7012de2ef951a8bac113": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-5205. Fixed MR App to load tokens correctly. Contributed by Vinod Kumar Vavilapalli.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1479016 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "03/05/13 5:27 PM",
      "commitName": "6e37a7e5e11efb60058d7012de2ef951a8bac113",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "23/04/13 2:39 PM",
      "commitNameOld": "27e8c86999bc6a972a99216060b11ef35b7de858",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 10.12,
      "commitsBetweenForRepo": 73,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,23 @@\n   protected static void initAndStartAppMaster(final MRAppMaster appMaster,\n       final YarnConfiguration conf, String jobUserName) throws IOException,\n       InterruptedException {\n     UserGroupInformation.setConfiguration(conf);\n+    // Security framework already loaded the tokens into current UGI, just use\n+    // them\n+    Credentials credentials \u003d\n+        UserGroupInformation.getCurrentUser().getCredentials();\n     UserGroupInformation appMasterUgi \u003d UserGroupInformation\n         .createRemoteUser(jobUserName);\n+    appMasterUgi.addCredentials(credentials);\n     appMasterUgi.doAs(new PrivilegedExceptionAction\u003cObject\u003e() {\n       @Override\n       public Object run() throws Exception {\n         appMaster.init(conf);\n         appMaster.start();\n         if(appMaster.errorHappenedShutDown) {\n           throw new IOException(\"Was asked to shut down.\");\n         }\n         return null;\n       }\n     });\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected static void initAndStartAppMaster(final MRAppMaster appMaster,\n      final YarnConfiguration conf, String jobUserName) throws IOException,\n      InterruptedException {\n    UserGroupInformation.setConfiguration(conf);\n    // Security framework already loaded the tokens into current UGI, just use\n    // them\n    Credentials credentials \u003d\n        UserGroupInformation.getCurrentUser().getCredentials();\n    UserGroupInformation appMasterUgi \u003d UserGroupInformation\n        .createRemoteUser(jobUserName);\n    appMasterUgi.addCredentials(credentials);\n    appMasterUgi.doAs(new PrivilegedExceptionAction\u003cObject\u003e() {\n      @Override\n      public Object run() throws Exception {\n        appMaster.init(conf);\n        appMaster.start();\n        if(appMaster.errorHappenedShutDown) {\n          throw new IOException(\"Was asked to shut down.\");\n        }\n        return null;\n      }\n    });\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/MRAppMaster.java",
      "extendedDetails": {}
    },
    "64e4fb983e022d8d3375a3e1b8facbf95f7ba403": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-4819. AM can rerun job after reporting final job status to the client (bobby and Bikas Saha via bobby)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1429114 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "04/01/13 12:35 PM",
      "commitName": "64e4fb983e022d8d3375a3e1b8facbf95f7ba403",
      "commitAuthor": "Robert Joseph Evans",
      "commitDateOld": "04/01/13 11:15 AM",
      "commitNameOld": "78ab699fe93cafbaff8f496be53d26aff40a68b1",
      "commitAuthorOld": "Jason Darrell Lowe",
      "daysBetweenCommits": 0.06,
      "commitsBetweenForRepo": 3,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,18 @@\n   protected static void initAndStartAppMaster(final MRAppMaster appMaster,\n       final YarnConfiguration conf, String jobUserName) throws IOException,\n       InterruptedException {\n     UserGroupInformation.setConfiguration(conf);\n     UserGroupInformation appMasterUgi \u003d UserGroupInformation\n         .createRemoteUser(jobUserName);\n     appMasterUgi.doAs(new PrivilegedExceptionAction\u003cObject\u003e() {\n       @Override\n       public Object run() throws Exception {\n         appMaster.init(conf);\n         appMaster.start();\n+        if(appMaster.errorHappenedShutDown) {\n+          throw new IOException(\"Was asked to shut down.\");\n+        }\n         return null;\n       }\n     });\n   }\n\\ No newline at end of file\n",
      "actualSource": "  protected static void initAndStartAppMaster(final MRAppMaster appMaster,\n      final YarnConfiguration conf, String jobUserName) throws IOException,\n      InterruptedException {\n    UserGroupInformation.setConfiguration(conf);\n    UserGroupInformation appMasterUgi \u003d UserGroupInformation\n        .createRemoteUser(jobUserName);\n    appMasterUgi.doAs(new PrivilegedExceptionAction\u003cObject\u003e() {\n      @Override\n      public Object run() throws Exception {\n        appMaster.init(conf);\n        appMaster.start();\n        if(appMaster.errorHappenedShutDown) {\n          throw new IOException(\"Was asked to shut down.\");\n        }\n        return null;\n      }\n    });\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/MRAppMaster.java",
      "extendedDetails": {}
    },
    "e979a3ddb17f32582e36cdc9b826f06c80c473f2": {
      "type": "Yintroduced",
      "commitMessage": "MAPREDUCE-3056. Changed the default staging directory to not include user.name to prevent issues with non-secure mode. Contributed by Devaraj K.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1178740 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "04/10/11 2:37 AM",
      "commitName": "e979a3ddb17f32582e36cdc9b826f06c80c473f2",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "diff": "@@ -0,0 +1,15 @@\n+  protected static void initAndStartAppMaster(final MRAppMaster appMaster,\n+      final YarnConfiguration conf, String jobUserName) throws IOException,\n+      InterruptedException {\n+    UserGroupInformation.setConfiguration(conf);\n+    UserGroupInformation appMasterUgi \u003d UserGroupInformation\n+        .createRemoteUser(jobUserName);\n+    appMasterUgi.doAs(new PrivilegedExceptionAction\u003cObject\u003e() {\n+      @Override\n+      public Object run() throws Exception {\n+        appMaster.init(conf);\n+        appMaster.start();\n+        return null;\n+      }\n+    });\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  protected static void initAndStartAppMaster(final MRAppMaster appMaster,\n      final YarnConfiguration conf, String jobUserName) throws IOException,\n      InterruptedException {\n    UserGroupInformation.setConfiguration(conf);\n    UserGroupInformation appMasterUgi \u003d UserGroupInformation\n        .createRemoteUser(jobUserName);\n    appMasterUgi.doAs(new PrivilegedExceptionAction\u003cObject\u003e() {\n      @Override\n      public Object run() throws Exception {\n        appMaster.init(conf);\n        appMaster.start();\n        return null;\n      }\n    });\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/MRAppMaster.java"
    }
  }
}