{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "RMNodeImpl.java",
  "functionName": "updateMetricsForDeactivatedNode",
  "functionId": "updateMetricsForDeactivatedNode___initialState-NodeState__finalState-NodeState",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java",
  "functionStartLine": 766,
  "functionEndLine": 808,
  "numCommitsSeen": 142,
  "timeTaken": 5336,
  "changeHistory": [
    "0da69c324dee9baab0f0b9700db1cc5b623f8421",
    "ed55950164a66e08fa34e30dba1030c5a986d1f1",
    "1de56b0448d332717c8316c621b4f6af542a85cc",
    "9bc913a35c46e65d373c3ae3f01a377e16e8d0ca",
    "d7e7f6aa03c67b6a6ccf664adcb06d90bc963e58",
    "241d3b3a50c6af92f023d8b2c24598f4813f4674",
    "8269bfa613999f71767de3c0369817b58cfe1416",
    "da2009528478693f8e355a6a28f0826e68050b7c",
    "56c1b9de0c962661ff4f8650177ca33a24368ea5",
    "e1fdf62123625e4ba399af02f8aad500637d29d1",
    "407cfa3b56a0645d64d2d9af305f6ef24307e775",
    "3343494d6c39883485d29c7439831ab3c1c7248d",
    "3cdc100369ce920701fdddae12d7f7247332b3f3"
  ],
  "changeHistoryShort": {
    "0da69c324dee9baab0f0b9700db1cc5b623f8421": "Ybodychange",
    "ed55950164a66e08fa34e30dba1030c5a986d1f1": "Ybodychange",
    "1de56b0448d332717c8316c621b4f6af542a85cc": "Ybodychange",
    "9bc913a35c46e65d373c3ae3f01a377e16e8d0ca": "Ybodychange",
    "d7e7f6aa03c67b6a6ccf664adcb06d90bc963e58": "Ybodychange",
    "241d3b3a50c6af92f023d8b2c24598f4813f4674": "Ybodychange",
    "8269bfa613999f71767de3c0369817b58cfe1416": "Ybodychange",
    "da2009528478693f8e355a6a28f0826e68050b7c": "Ybodychange",
    "56c1b9de0c962661ff4f8650177ca33a24368ea5": "Ymultichange(Yparameterchange,Ybodychange)",
    "e1fdf62123625e4ba399af02f8aad500637d29d1": "Yfilerename",
    "407cfa3b56a0645d64d2d9af305f6ef24307e775": "Yparameterchange",
    "3343494d6c39883485d29c7439831ab3c1c7248d": "Ymultichange(Ymovefromfile,Ybodychange,Yrename,Yparameterchange)",
    "3cdc100369ce920701fdddae12d7f7247332b3f3": "Yintroduced"
  },
  "changeHistoryDetails": {
    "0da69c324dee9baab0f0b9700db1cc5b623f8421": {
      "type": "Ybodychange",
      "commitMessage": "YARN-4676. Automatic and Asynchronous Decommissioning Nodes Status Tracking. Contributed by Diniel Zhi.\n(cherry picked from commit d464483bf7f0b3e3be3ba32cd6c3eee546747ab5)\n\nConflicts:\n\n\thadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/ResourceTrackerService.java\n\thadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNode.java\n\thadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java\n",
      "commitDate": "18/08/16 7:27 AM",
      "commitName": "0da69c324dee9baab0f0b9700db1cc5b623f8421",
      "commitAuthor": "Junping Du",
      "commitDateOld": "10/06/16 9:52 PM",
      "commitNameOld": "e0f4620cc7db3db4b781e6042ab7dd754af28f18",
      "commitAuthorOld": "Rohith Sharma K S",
      "daysBetweenCommits": 68.4,
      "commitsBetweenForRepo": 586,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,40 +1,43 @@\n   private void updateMetricsForDeactivatedNode(NodeState initialState,\n                                                NodeState finalState) {\n     ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n \n     switch (initialState) {\n     case RUNNING:\n       metrics.decrNumActiveNodes();\n       break;\n     case DECOMMISSIONING:\n       metrics.decrDecommissioningNMs();\n       break;\n+    case DECOMMISSIONED:\n+      metrics.decrDecommisionedNMs();\n+      break;\n     case UNHEALTHY:\n       metrics.decrNumUnhealthyNMs();\n       break;\n     case NEW:\n       break;\n     default:\n       LOG.warn(\"Unexpected initial state\");\n     }\n \n     switch (finalState) {\n     case DECOMMISSIONED:\n       metrics.incrDecommisionedNMs();\n       break;\n     case LOST:\n       metrics.incrNumLostNMs();\n       break;\n     case REBOOTED:\n       metrics.incrNumRebootedNMs();\n       break;\n     case UNHEALTHY:\n       metrics.incrNumUnhealthyNMs();\n       break;\n     case SHUTDOWN:\n       metrics.incrNumShutdownNMs();\n       break;\n     default:\n       LOG.warn(\"Unexpected final state\");\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void updateMetricsForDeactivatedNode(NodeState initialState,\n                                               NodeState finalState) {\n    ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n\n    switch (initialState) {\n    case RUNNING:\n      metrics.decrNumActiveNodes();\n      break;\n    case DECOMMISSIONING:\n      metrics.decrDecommissioningNMs();\n      break;\n    case DECOMMISSIONED:\n      metrics.decrDecommisionedNMs();\n      break;\n    case UNHEALTHY:\n      metrics.decrNumUnhealthyNMs();\n      break;\n    case NEW:\n      break;\n    default:\n      LOG.warn(\"Unexpected initial state\");\n    }\n\n    switch (finalState) {\n    case DECOMMISSIONED:\n      metrics.incrDecommisionedNMs();\n      break;\n    case LOST:\n      metrics.incrNumLostNMs();\n      break;\n    case REBOOTED:\n      metrics.incrNumRebootedNMs();\n      break;\n    case UNHEALTHY:\n      metrics.incrNumUnhealthyNMs();\n      break;\n    case SHUTDOWN:\n      metrics.incrNumShutdownNMs();\n      break;\n    default:\n      LOG.warn(\"Unexpected final state\");\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java",
      "extendedDetails": {}
    },
    "ed55950164a66e08fa34e30dba1030c5a986d1f1": {
      "type": "Ybodychange",
      "commitMessage": "YARN-3102. Decommisioned Nodes not listed in Web UI. Contributed by Kuhu Shukla\n",
      "commitDate": "01/02/16 3:15 PM",
      "commitName": "ed55950164a66e08fa34e30dba1030c5a986d1f1",
      "commitAuthor": "Jason Lowe",
      "commitDateOld": "13/01/16 12:09 PM",
      "commitNameOld": "321072ba8114ed5ad2e9c5c2cfd7e1a54def6ebe",
      "commitAuthorOld": "Karthik Kambatla",
      "daysBetweenCommits": 19.13,
      "commitsBetweenForRepo": 140,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,38 +1,40 @@\n   private void updateMetricsForDeactivatedNode(NodeState initialState,\n                                                NodeState finalState) {\n     ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n \n     switch (initialState) {\n     case RUNNING:\n       metrics.decrNumActiveNodes();\n       break;\n     case DECOMMISSIONING:\n       metrics.decrDecommissioningNMs();\n       break;\n     case UNHEALTHY:\n       metrics.decrNumUnhealthyNMs();\n       break;\n+    case NEW:\n+      break;\n     default:\n       LOG.warn(\"Unexpected initial state\");\n     }\n \n     switch (finalState) {\n     case DECOMMISSIONED:\n       metrics.incrDecommisionedNMs();\n       break;\n     case LOST:\n       metrics.incrNumLostNMs();\n       break;\n     case REBOOTED:\n       metrics.incrNumRebootedNMs();\n       break;\n     case UNHEALTHY:\n       metrics.incrNumUnhealthyNMs();\n       break;\n     case SHUTDOWN:\n       metrics.incrNumShutdownNMs();\n       break;\n     default:\n       LOG.warn(\"Unexpected final state\");\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void updateMetricsForDeactivatedNode(NodeState initialState,\n                                               NodeState finalState) {\n    ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n\n    switch (initialState) {\n    case RUNNING:\n      metrics.decrNumActiveNodes();\n      break;\n    case DECOMMISSIONING:\n      metrics.decrDecommissioningNMs();\n      break;\n    case UNHEALTHY:\n      metrics.decrNumUnhealthyNMs();\n      break;\n    case NEW:\n      break;\n    default:\n      LOG.warn(\"Unexpected initial state\");\n    }\n\n    switch (finalState) {\n    case DECOMMISSIONED:\n      metrics.incrDecommisionedNMs();\n      break;\n    case LOST:\n      metrics.incrNumLostNMs();\n      break;\n    case REBOOTED:\n      metrics.incrNumRebootedNMs();\n      break;\n    case UNHEALTHY:\n      metrics.incrNumUnhealthyNMs();\n      break;\n    case SHUTDOWN:\n      metrics.incrNumShutdownNMs();\n      break;\n    default:\n      LOG.warn(\"Unexpected final state\");\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java",
      "extendedDetails": {}
    },
    "1de56b0448d332717c8316c621b4f6af542a85cc": {
      "type": "Ybodychange",
      "commitMessage": "YARN-3226. UI changes for decommissioning node. Contributed by Sunil G.\n",
      "commitDate": "17/12/15 3:20 PM",
      "commitName": "1de56b0448d332717c8316c621b4f6af542a85cc",
      "commitAuthor": "Junping Du",
      "commitDateOld": "16/12/15 1:18 PM",
      "commitNameOld": "79c41b1d83e981ae74cb8b58ffcf7907b7612ad4",
      "commitAuthorOld": "Wangda Tan",
      "daysBetweenCommits": 1.08,
      "commitsBetweenForRepo": 22,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,38 +1,38 @@\n   private void updateMetricsForDeactivatedNode(NodeState initialState,\n                                                NodeState finalState) {\n     ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n \n     switch (initialState) {\n     case RUNNING:\n       metrics.decrNumActiveNodes();\n       break;\n     case DECOMMISSIONING:\n-      metrics.decrNumActiveNodes();\n+      metrics.decrDecommissioningNMs();\n       break;\n     case UNHEALTHY:\n       metrics.decrNumUnhealthyNMs();\n       break;\n     default:\n-      LOG.debug(\"Unexpected inital state\");\n+      LOG.warn(\"Unexpected initial state\");\n     }\n \n     switch (finalState) {\n     case DECOMMISSIONED:\n-        metrics.incrDecommisionedNMs();\n+      metrics.incrDecommisionedNMs();\n       break;\n     case LOST:\n       metrics.incrNumLostNMs();\n       break;\n     case REBOOTED:\n       metrics.incrNumRebootedNMs();\n       break;\n     case UNHEALTHY:\n       metrics.incrNumUnhealthyNMs();\n       break;\n     case SHUTDOWN:\n       metrics.incrNumShutdownNMs();\n       break;\n     default:\n-      LOG.debug(\"Unexpected final state\");\n+      LOG.warn(\"Unexpected final state\");\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void updateMetricsForDeactivatedNode(NodeState initialState,\n                                               NodeState finalState) {\n    ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n\n    switch (initialState) {\n    case RUNNING:\n      metrics.decrNumActiveNodes();\n      break;\n    case DECOMMISSIONING:\n      metrics.decrDecommissioningNMs();\n      break;\n    case UNHEALTHY:\n      metrics.decrNumUnhealthyNMs();\n      break;\n    default:\n      LOG.warn(\"Unexpected initial state\");\n    }\n\n    switch (finalState) {\n    case DECOMMISSIONED:\n      metrics.incrDecommisionedNMs();\n      break;\n    case LOST:\n      metrics.incrNumLostNMs();\n      break;\n    case REBOOTED:\n      metrics.incrNumRebootedNMs();\n      break;\n    case UNHEALTHY:\n      metrics.incrNumUnhealthyNMs();\n      break;\n    case SHUTDOWN:\n      metrics.incrNumShutdownNMs();\n      break;\n    default:\n      LOG.warn(\"Unexpected final state\");\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java",
      "extendedDetails": {}
    },
    "9bc913a35c46e65d373c3ae3f01a377e16e8d0ca": {
      "type": "Ybodychange",
      "commitMessage": "YARN-3212. RMNode State Transition Update with DECOMMISSIONING state. (Junping Du via wangda)\n",
      "commitDate": "18/09/15 10:04 AM",
      "commitName": "9bc913a35c46e65d373c3ae3f01a377e16e8d0ca",
      "commitAuthor": "Wangda Tan",
      "commitDateOld": "23/08/15 10:55 PM",
      "commitNameOld": "feaf0349949e831ce3f25814c1bbff52f17bfe8f",
      "commitAuthorOld": "Rohith Sharma K S",
      "daysBetweenCommits": 25.46,
      "commitsBetweenForRepo": 158,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,35 +1,38 @@\n   private void updateMetricsForDeactivatedNode(NodeState initialState,\n                                                NodeState finalState) {\n     ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n \n     switch (initialState) {\n-      case RUNNING:\n-        metrics.decrNumActiveNodes();\n-        break;\n-      case UNHEALTHY:\n-        metrics.decrNumUnhealthyNMs();\n-        break;\n-      default:\n-        LOG.debug(\"Unexpected inital state\");\n+    case RUNNING:\n+      metrics.decrNumActiveNodes();\n+      break;\n+    case DECOMMISSIONING:\n+      metrics.decrNumActiveNodes();\n+      break;\n+    case UNHEALTHY:\n+      metrics.decrNumUnhealthyNMs();\n+      break;\n+    default:\n+      LOG.debug(\"Unexpected inital state\");\n     }\n \n     switch (finalState) {\n     case DECOMMISSIONED:\n         metrics.incrDecommisionedNMs();\n       break;\n     case LOST:\n       metrics.incrNumLostNMs();\n       break;\n     case REBOOTED:\n       metrics.incrNumRebootedNMs();\n       break;\n     case UNHEALTHY:\n       metrics.incrNumUnhealthyNMs();\n       break;\n     case SHUTDOWN:\n       metrics.incrNumShutdownNMs();\n       break;\n     default:\n       LOG.debug(\"Unexpected final state\");\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void updateMetricsForDeactivatedNode(NodeState initialState,\n                                               NodeState finalState) {\n    ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n\n    switch (initialState) {\n    case RUNNING:\n      metrics.decrNumActiveNodes();\n      break;\n    case DECOMMISSIONING:\n      metrics.decrNumActiveNodes();\n      break;\n    case UNHEALTHY:\n      metrics.decrNumUnhealthyNMs();\n      break;\n    default:\n      LOG.debug(\"Unexpected inital state\");\n    }\n\n    switch (finalState) {\n    case DECOMMISSIONED:\n        metrics.incrDecommisionedNMs();\n      break;\n    case LOST:\n      metrics.incrNumLostNMs();\n      break;\n    case REBOOTED:\n      metrics.incrNumRebootedNMs();\n      break;\n    case UNHEALTHY:\n      metrics.incrNumUnhealthyNMs();\n      break;\n    case SHUTDOWN:\n      metrics.incrNumShutdownNMs();\n      break;\n    default:\n      LOG.debug(\"Unexpected final state\");\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java",
      "extendedDetails": {}
    },
    "d7e7f6aa03c67b6a6ccf664adcb06d90bc963e58": {
      "type": "Ybodychange",
      "commitMessage": "YARN-41. The RM should handle the graceful shutdown of the NM. Contributed by Devaraj K.\n",
      "commitDate": "04/06/15 4:59 AM",
      "commitName": "d7e7f6aa03c67b6a6ccf664adcb06d90bc963e58",
      "commitAuthor": "Junping Du",
      "commitDateOld": "14/05/15 10:58 AM",
      "commitNameOld": "15ccd967ee3e7046a50522089f67ba01f36ec76a",
      "commitAuthorOld": "Junping Du",
      "daysBetweenCommits": 20.75,
      "commitsBetweenForRepo": 157,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,32 +1,35 @@\n   private void updateMetricsForDeactivatedNode(NodeState initialState,\n                                                NodeState finalState) {\n     ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n \n     switch (initialState) {\n       case RUNNING:\n         metrics.decrNumActiveNodes();\n         break;\n       case UNHEALTHY:\n         metrics.decrNumUnhealthyNMs();\n         break;\n       default:\n         LOG.debug(\"Unexpected inital state\");\n     }\n \n     switch (finalState) {\n     case DECOMMISSIONED:\n         metrics.incrDecommisionedNMs();\n       break;\n     case LOST:\n       metrics.incrNumLostNMs();\n       break;\n     case REBOOTED:\n       metrics.incrNumRebootedNMs();\n       break;\n     case UNHEALTHY:\n       metrics.incrNumUnhealthyNMs();\n       break;\n+    case SHUTDOWN:\n+      metrics.incrNumShutdownNMs();\n+      break;\n     default:\n       LOG.debug(\"Unexpected final state\");\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void updateMetricsForDeactivatedNode(NodeState initialState,\n                                               NodeState finalState) {\n    ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n\n    switch (initialState) {\n      case RUNNING:\n        metrics.decrNumActiveNodes();\n        break;\n      case UNHEALTHY:\n        metrics.decrNumUnhealthyNMs();\n        break;\n      default:\n        LOG.debug(\"Unexpected inital state\");\n    }\n\n    switch (finalState) {\n    case DECOMMISSIONED:\n        metrics.incrDecommisionedNMs();\n      break;\n    case LOST:\n      metrics.incrNumLostNMs();\n      break;\n    case REBOOTED:\n      metrics.incrNumRebootedNMs();\n      break;\n    case UNHEALTHY:\n      metrics.incrNumUnhealthyNMs();\n      break;\n    case SHUTDOWN:\n      metrics.incrNumShutdownNMs();\n      break;\n    default:\n      LOG.debug(\"Unexpected final state\");\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java",
      "extendedDetails": {}
    },
    "241d3b3a50c6af92f023d8b2c24598f4813f4674": {
      "type": "Ybodychange",
      "commitMessage": "YARN-2938. Fixed new findbugs warnings in hadoop-yarn-resourcemanager and hadoop-yarn-applicationhistoryservice. Contributed by Varun Saxena.\n",
      "commitDate": "29/12/14 9:59 AM",
      "commitName": "241d3b3a50c6af92f023d8b2c24598f4813f4674",
      "commitAuthor": "Zhijie Shen",
      "commitDateOld": "22/12/14 4:51 PM",
      "commitNameOld": "fdf042dfffa4d2474e3cac86cfb8fe9ee4648beb",
      "commitAuthorOld": "Jian He",
      "daysBetweenCommits": 6.71,
      "commitsBetweenForRepo": 18,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,28 +1,32 @@\n   private void updateMetricsForDeactivatedNode(NodeState initialState,\n                                                NodeState finalState) {\n     ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n \n     switch (initialState) {\n       case RUNNING:\n         metrics.decrNumActiveNodes();\n         break;\n       case UNHEALTHY:\n         metrics.decrNumUnhealthyNMs();\n         break;\n+      default:\n+        LOG.debug(\"Unexpected inital state\");\n     }\n \n     switch (finalState) {\n     case DECOMMISSIONED:\n         metrics.incrDecommisionedNMs();\n       break;\n     case LOST:\n       metrics.incrNumLostNMs();\n       break;\n     case REBOOTED:\n       metrics.incrNumRebootedNMs();\n       break;\n     case UNHEALTHY:\n       metrics.incrNumUnhealthyNMs();\n       break;\n+    default:\n+      LOG.debug(\"Unexpected final state\");\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void updateMetricsForDeactivatedNode(NodeState initialState,\n                                               NodeState finalState) {\n    ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n\n    switch (initialState) {\n      case RUNNING:\n        metrics.decrNumActiveNodes();\n        break;\n      case UNHEALTHY:\n        metrics.decrNumUnhealthyNMs();\n        break;\n      default:\n        LOG.debug(\"Unexpected inital state\");\n    }\n\n    switch (finalState) {\n    case DECOMMISSIONED:\n        metrics.incrDecommisionedNMs();\n      break;\n    case LOST:\n      metrics.incrNumLostNMs();\n      break;\n    case REBOOTED:\n      metrics.incrNumRebootedNMs();\n      break;\n    case UNHEALTHY:\n      metrics.incrNumUnhealthyNMs();\n      break;\n    default:\n      LOG.debug(\"Unexpected final state\");\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java",
      "extendedDetails": {}
    },
    "8269bfa613999f71767de3c0369817b58cfe1416": {
      "type": "Ybodychange",
      "commitMessage": "YARN-2523. ResourceManager UI showing negative value for \"Decommissioned Nodes\" field. Contributed by Rohith\n",
      "commitDate": "25/09/14 3:37 PM",
      "commitName": "8269bfa613999f71767de3c0369817b58cfe1416",
      "commitAuthor": "Jason Lowe",
      "commitDateOld": "22/09/14 10:30 AM",
      "commitNameOld": "0a641496c706fc175e7bf66d69ebf71c7d078e84",
      "commitAuthorOld": "Jian He",
      "daysBetweenCommits": 3.21,
      "commitsBetweenForRepo": 39,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,41 +1,28 @@\n   private void updateMetricsForDeactivatedNode(NodeState initialState,\n                                                NodeState finalState) {\n     ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n \n     switch (initialState) {\n       case RUNNING:\n         metrics.decrNumActiveNodes();\n         break;\n       case UNHEALTHY:\n         metrics.decrNumUnhealthyNMs();\n         break;\n     }\n \n-    // Decomissioned NMs equals to the nodes missing in include list (if\n-    // include list not empty) or the nodes listed in excluded list.\n-    // DecomissionedNMs as per exclude list is set upfront when the\n-    // exclude list is read so that RM restart can also reflect the\n-    // decomissionedNMs. Note that RM is still not able to know decomissionedNMs\n-    // as per include list after it restarts as they are known when those nodes\n-    // come for registration.\n-    // DecomissionedNMs as per include list is incremented in this transition.\n     switch (finalState) {\n     case DECOMMISSIONED:\n-      Set\u003cString\u003e ecludedHosts \u003d\n-          context.getNodesListManager().getHostsReader().getExcludedHosts();\n-      if (!ecludedHosts.contains(hostName)\n-          \u0026\u0026 !ecludedHosts.contains(NetUtils.normalizeHostName(hostName))) {\n         metrics.incrDecommisionedNMs();\n-      }\n       break;\n     case LOST:\n       metrics.incrNumLostNMs();\n       break;\n     case REBOOTED:\n       metrics.incrNumRebootedNMs();\n       break;\n     case UNHEALTHY:\n       metrics.incrNumUnhealthyNMs();\n       break;\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void updateMetricsForDeactivatedNode(NodeState initialState,\n                                               NodeState finalState) {\n    ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n\n    switch (initialState) {\n      case RUNNING:\n        metrics.decrNumActiveNodes();\n        break;\n      case UNHEALTHY:\n        metrics.decrNumUnhealthyNMs();\n        break;\n    }\n\n    switch (finalState) {\n    case DECOMMISSIONED:\n        metrics.incrDecommisionedNMs();\n      break;\n    case LOST:\n      metrics.incrNumLostNMs();\n      break;\n    case REBOOTED:\n      metrics.incrNumRebootedNMs();\n      break;\n    case UNHEALTHY:\n      metrics.incrNumUnhealthyNMs();\n      break;\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java",
      "extendedDetails": {}
    },
    "da2009528478693f8e355a6a28f0826e68050b7c": {
      "type": "Ybodychange",
      "commitMessage": "YARN-1071. Enabled ResourceManager to recover cluster metrics numDecommissionedNMs after restarting. Contributed by Jian He.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1570469 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "20/02/14 10:46 PM",
      "commitName": "da2009528478693f8e355a6a28f0826e68050b7c",
      "commitAuthor": "Zhijie Shen",
      "commitDateOld": "05/11/13 1:23 PM",
      "commitNameOld": "6990355e577ad19371cb656c250fb665ed14062f",
      "commitAuthorOld": "Luke Lu",
      "daysBetweenCommits": 107.39,
      "commitsBetweenForRepo": 688,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,28 +1,41 @@\n   private void updateMetricsForDeactivatedNode(NodeState initialState,\n                                                NodeState finalState) {\n     ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n \n     switch (initialState) {\n       case RUNNING:\n         metrics.decrNumActiveNodes();\n         break;\n       case UNHEALTHY:\n         metrics.decrNumUnhealthyNMs();\n         break;\n     }\n \n+    // Decomissioned NMs equals to the nodes missing in include list (if\n+    // include list not empty) or the nodes listed in excluded list.\n+    // DecomissionedNMs as per exclude list is set upfront when the\n+    // exclude list is read so that RM restart can also reflect the\n+    // decomissionedNMs. Note that RM is still not able to know decomissionedNMs\n+    // as per include list after it restarts as they are known when those nodes\n+    // come for registration.\n+    // DecomissionedNMs as per include list is incremented in this transition.\n     switch (finalState) {\n     case DECOMMISSIONED:\n-      metrics.incrDecommisionedNMs();\n+      Set\u003cString\u003e ecludedHosts \u003d\n+          context.getNodesListManager().getHostsReader().getExcludedHosts();\n+      if (!ecludedHosts.contains(hostName)\n+          \u0026\u0026 !ecludedHosts.contains(NetUtils.normalizeHostName(hostName))) {\n+        metrics.incrDecommisionedNMs();\n+      }\n       break;\n     case LOST:\n       metrics.incrNumLostNMs();\n       break;\n     case REBOOTED:\n       metrics.incrNumRebootedNMs();\n       break;\n     case UNHEALTHY:\n       metrics.incrNumUnhealthyNMs();\n       break;\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void updateMetricsForDeactivatedNode(NodeState initialState,\n                                               NodeState finalState) {\n    ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n\n    switch (initialState) {\n      case RUNNING:\n        metrics.decrNumActiveNodes();\n        break;\n      case UNHEALTHY:\n        metrics.decrNumUnhealthyNMs();\n        break;\n    }\n\n    // Decomissioned NMs equals to the nodes missing in include list (if\n    // include list not empty) or the nodes listed in excluded list.\n    // DecomissionedNMs as per exclude list is set upfront when the\n    // exclude list is read so that RM restart can also reflect the\n    // decomissionedNMs. Note that RM is still not able to know decomissionedNMs\n    // as per include list after it restarts as they are known when those nodes\n    // come for registration.\n    // DecomissionedNMs as per include list is incremented in this transition.\n    switch (finalState) {\n    case DECOMMISSIONED:\n      Set\u003cString\u003e ecludedHosts \u003d\n          context.getNodesListManager().getHostsReader().getExcludedHosts();\n      if (!ecludedHosts.contains(hostName)\n          \u0026\u0026 !ecludedHosts.contains(NetUtils.normalizeHostName(hostName))) {\n        metrics.incrDecommisionedNMs();\n      }\n      break;\n    case LOST:\n      metrics.incrNumLostNMs();\n      break;\n    case REBOOTED:\n      metrics.incrNumRebootedNMs();\n      break;\n    case UNHEALTHY:\n      metrics.incrNumUnhealthyNMs();\n      break;\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java",
      "extendedDetails": {}
    },
    "56c1b9de0c962661ff4f8650177ca33a24368ea5": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "YARN-1101. Active nodes can be decremented below 0 (Robert Parker via tgraves_\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1518384 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "28/08/13 2:09 PM",
      "commitName": "56c1b9de0c962661ff4f8650177ca33a24368ea5",
      "commitAuthor": "Thomas Graves",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "YARN-1101. Active nodes can be decremented below 0 (Robert Parker via tgraves_\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1518384 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "28/08/13 2:09 PM",
          "commitName": "56c1b9de0c962661ff4f8650177ca33a24368ea5",
          "commitAuthor": "Thomas Graves",
          "commitDateOld": "24/08/13 4:32 PM",
          "commitNameOld": "18e805677d00616997ad7e9c6991bbfb26d73ef4",
          "commitAuthorOld": "Vinod Kumar Vavilapalli",
          "daysBetweenCommits": 3.9,
          "commitsBetweenForRepo": 18,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,19 +1,28 @@\n-  private void updateMetricsForDeactivatedNode(NodeState finalState) {\n+  private void updateMetricsForDeactivatedNode(NodeState initialState,\n+                                               NodeState finalState) {\n     ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n-    metrics.decrNumActiveNodes();\n+\n+    switch (initialState) {\n+      case RUNNING:\n+        metrics.decrNumActiveNodes();\n+        break;\n+      case UNHEALTHY:\n+        metrics.decrNumUnhealthyNMs();\n+        break;\n+    }\n \n     switch (finalState) {\n     case DECOMMISSIONED:\n       metrics.incrDecommisionedNMs();\n       break;\n     case LOST:\n       metrics.incrNumLostNMs();\n       break;\n     case REBOOTED:\n       metrics.incrNumRebootedNMs();\n       break;\n     case UNHEALTHY:\n       metrics.incrNumUnhealthyNMs();\n       break;\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private void updateMetricsForDeactivatedNode(NodeState initialState,\n                                               NodeState finalState) {\n    ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n\n    switch (initialState) {\n      case RUNNING:\n        metrics.decrNumActiveNodes();\n        break;\n      case UNHEALTHY:\n        metrics.decrNumUnhealthyNMs();\n        break;\n    }\n\n    switch (finalState) {\n    case DECOMMISSIONED:\n      metrics.incrDecommisionedNMs();\n      break;\n    case LOST:\n      metrics.incrNumLostNMs();\n      break;\n    case REBOOTED:\n      metrics.incrNumRebootedNMs();\n      break;\n    case UNHEALTHY:\n      metrics.incrNumUnhealthyNMs();\n      break;\n    }\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java",
          "extendedDetails": {
            "oldValue": "[finalState-NodeState]",
            "newValue": "[initialState-NodeState, finalState-NodeState]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "YARN-1101. Active nodes can be decremented below 0 (Robert Parker via tgraves_\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1518384 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "28/08/13 2:09 PM",
          "commitName": "56c1b9de0c962661ff4f8650177ca33a24368ea5",
          "commitAuthor": "Thomas Graves",
          "commitDateOld": "24/08/13 4:32 PM",
          "commitNameOld": "18e805677d00616997ad7e9c6991bbfb26d73ef4",
          "commitAuthorOld": "Vinod Kumar Vavilapalli",
          "daysBetweenCommits": 3.9,
          "commitsBetweenForRepo": 18,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,19 +1,28 @@\n-  private void updateMetricsForDeactivatedNode(NodeState finalState) {\n+  private void updateMetricsForDeactivatedNode(NodeState initialState,\n+                                               NodeState finalState) {\n     ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n-    metrics.decrNumActiveNodes();\n+\n+    switch (initialState) {\n+      case RUNNING:\n+        metrics.decrNumActiveNodes();\n+        break;\n+      case UNHEALTHY:\n+        metrics.decrNumUnhealthyNMs();\n+        break;\n+    }\n \n     switch (finalState) {\n     case DECOMMISSIONED:\n       metrics.incrDecommisionedNMs();\n       break;\n     case LOST:\n       metrics.incrNumLostNMs();\n       break;\n     case REBOOTED:\n       metrics.incrNumRebootedNMs();\n       break;\n     case UNHEALTHY:\n       metrics.incrNumUnhealthyNMs();\n       break;\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private void updateMetricsForDeactivatedNode(NodeState initialState,\n                                               NodeState finalState) {\n    ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n\n    switch (initialState) {\n      case RUNNING:\n        metrics.decrNumActiveNodes();\n        break;\n      case UNHEALTHY:\n        metrics.decrNumUnhealthyNMs();\n        break;\n    }\n\n    switch (finalState) {\n    case DECOMMISSIONED:\n      metrics.incrDecommisionedNMs();\n      break;\n    case LOST:\n      metrics.incrNumLostNMs();\n      break;\n    case REBOOTED:\n      metrics.incrNumRebootedNMs();\n      break;\n    case UNHEALTHY:\n      metrics.incrNumUnhealthyNMs();\n      break;\n    }\n  }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java",
          "extendedDetails": {}
        }
      ]
    },
    "e1fdf62123625e4ba399af02f8aad500637d29d1": {
      "type": "Yfilerename",
      "commitMessage": "YARN-1. Promote YARN to be a sub-project of Apache Hadoop.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1370666 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "07/08/12 10:22 PM",
      "commitName": "e1fdf62123625e4ba399af02f8aad500637d29d1",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "07/08/12 7:53 PM",
      "commitNameOld": "34554d1e11ee1d5b564d7d9ed3e6d55931d72749",
      "commitAuthorOld": "Aaron Myers",
      "daysBetweenCommits": 0.1,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  private void updateMetricsForDeactivatedNode(NodeState finalState) {\n    ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n    metrics.decrNumActiveNodes();\n\n    switch (finalState) {\n    case DECOMMISSIONED:\n      metrics.incrDecommisionedNMs();\n      break;\n    case LOST:\n      metrics.incrNumLostNMs();\n      break;\n    case REBOOTED:\n      metrics.incrNumRebootedNMs();\n      break;\n    case UNHEALTHY:\n      metrics.incrNumUnhealthyNMs();\n      break;\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java",
      "extendedDetails": {
        "oldPath": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java",
        "newPath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java"
      }
    },
    "407cfa3b56a0645d64d2d9af305f6ef24307e775": {
      "type": "Yparameterchange",
      "commitMessage": "MAPREDUCE-3958. RM: Remove RMNodeState and replace it with NodeState (Bikas Saha via bobby)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1334043 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "04/05/12 8:47 AM",
      "commitName": "407cfa3b56a0645d64d2d9af305f6ef24307e775",
      "commitAuthor": "Robert Joseph Evans",
      "commitDateOld": "25/03/12 10:45 PM",
      "commitNameOld": "606114d6029758f2be130960b8fc3102457406ba",
      "commitAuthorOld": "Arun Murthy",
      "daysBetweenCommits": 39.42,
      "commitsBetweenForRepo": 315,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,19 @@\n-  private void updateMetricsForDeactivatedNode(RMNodeState finalState) {\n+  private void updateMetricsForDeactivatedNode(NodeState finalState) {\n     ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n     metrics.decrNumActiveNodes();\n \n     switch (finalState) {\n     case DECOMMISSIONED:\n       metrics.incrDecommisionedNMs();\n       break;\n     case LOST:\n       metrics.incrNumLostNMs();\n       break;\n     case REBOOTED:\n       metrics.incrNumRebootedNMs();\n       break;\n     case UNHEALTHY:\n       metrics.incrNumUnhealthyNMs();\n       break;\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private void updateMetricsForDeactivatedNode(NodeState finalState) {\n    ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n    metrics.decrNumActiveNodes();\n\n    switch (finalState) {\n    case DECOMMISSIONED:\n      metrics.incrDecommisionedNMs();\n      break;\n    case LOST:\n      metrics.incrNumLostNMs();\n      break;\n    case REBOOTED:\n      metrics.incrNumRebootedNMs();\n      break;\n    case UNHEALTHY:\n      metrics.incrNumUnhealthyNMs();\n      break;\n    }\n  }",
      "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java",
      "extendedDetails": {
        "oldValue": "[finalState-RMNodeState]",
        "newValue": "[finalState-NodeState]"
      }
    },
    "3343494d6c39883485d29c7439831ab3c1c7248d": {
      "type": "Ymultichange(Ymovefromfile,Ybodychange,Yrename,Yparameterchange)",
      "commitMessage": "MAPREDUCE-3760. Changed active nodes list to not contain unhealthy nodes on the webUI and metrics. (vinodkv)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1240421 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "03/02/12 5:03 PM",
      "commitName": "3343494d6c39883485d29c7439831ab3c1c7248d",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "subchanges": [
        {
          "type": "Ymovefromfile",
          "commitMessage": "MAPREDUCE-3760. Changed active nodes list to not contain unhealthy nodes on the webUI and metrics. (vinodkv)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1240421 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "03/02/12 5:03 PM",
          "commitName": "3343494d6c39883485d29c7439831ab3c1c7248d",
          "commitAuthor": "Vinod Kumar Vavilapalli",
          "commitDateOld": "03/02/12 4:04 PM",
          "commitNameOld": "94242c93857a06fb9c56ee571a47d6ca18f00f48",
          "commitAuthorOld": "Vinod Kumar Vavilapalli",
          "daysBetweenCommits": 0.04,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,14 +1,19 @@\n-    private void updateMetrics(RMNodeState nodeState) {\n-      ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n-      switch (nodeState) {\n-      case LOST:\n-        metrics.decrNumLostNMs();\n-        break;\n-      case REBOOTED:\n-        metrics.decrNumRebootedNMs();\n-        break;\n-      case DECOMMISSIONED:\n-        metrics.decrDecommisionedNMs();\n-        break;\n-      }\n-    }\n\\ No newline at end of file\n+  private void updateMetricsForDeactivatedNode(RMNodeState finalState) {\n+    ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n+    metrics.decrNumActiveNodes();\n+\n+    switch (finalState) {\n+    case DECOMMISSIONED:\n+      metrics.incrDecommisionedNMs();\n+      break;\n+    case LOST:\n+      metrics.incrNumLostNMs();\n+      break;\n+    case REBOOTED:\n+      metrics.incrNumRebootedNMs();\n+      break;\n+    case UNHEALTHY:\n+      metrics.incrNumUnhealthyNMs();\n+      break;\n+    }\n+  }\n\\ No newline at end of file\n",
          "actualSource": "  private void updateMetricsForDeactivatedNode(RMNodeState finalState) {\n    ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n    metrics.decrNumActiveNodes();\n\n    switch (finalState) {\n    case DECOMMISSIONED:\n      metrics.incrDecommisionedNMs();\n      break;\n    case LOST:\n      metrics.incrNumLostNMs();\n      break;\n    case REBOOTED:\n      metrics.incrNumRebootedNMs();\n      break;\n    case UNHEALTHY:\n      metrics.incrNumUnhealthyNMs();\n      break;\n    }\n  }",
          "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java",
          "extendedDetails": {
            "oldPath": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java",
            "newPath": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java",
            "oldMethodName": "updateMetrics",
            "newMethodName": "updateMetricsForDeactivatedNode"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "MAPREDUCE-3760. Changed active nodes list to not contain unhealthy nodes on the webUI and metrics. (vinodkv)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1240421 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "03/02/12 5:03 PM",
          "commitName": "3343494d6c39883485d29c7439831ab3c1c7248d",
          "commitAuthor": "Vinod Kumar Vavilapalli",
          "commitDateOld": "03/02/12 4:04 PM",
          "commitNameOld": "94242c93857a06fb9c56ee571a47d6ca18f00f48",
          "commitAuthorOld": "Vinod Kumar Vavilapalli",
          "daysBetweenCommits": 0.04,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,14 +1,19 @@\n-    private void updateMetrics(RMNodeState nodeState) {\n-      ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n-      switch (nodeState) {\n-      case LOST:\n-        metrics.decrNumLostNMs();\n-        break;\n-      case REBOOTED:\n-        metrics.decrNumRebootedNMs();\n-        break;\n-      case DECOMMISSIONED:\n-        metrics.decrDecommisionedNMs();\n-        break;\n-      }\n-    }\n\\ No newline at end of file\n+  private void updateMetricsForDeactivatedNode(RMNodeState finalState) {\n+    ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n+    metrics.decrNumActiveNodes();\n+\n+    switch (finalState) {\n+    case DECOMMISSIONED:\n+      metrics.incrDecommisionedNMs();\n+      break;\n+    case LOST:\n+      metrics.incrNumLostNMs();\n+      break;\n+    case REBOOTED:\n+      metrics.incrNumRebootedNMs();\n+      break;\n+    case UNHEALTHY:\n+      metrics.incrNumUnhealthyNMs();\n+      break;\n+    }\n+  }\n\\ No newline at end of file\n",
          "actualSource": "  private void updateMetricsForDeactivatedNode(RMNodeState finalState) {\n    ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n    metrics.decrNumActiveNodes();\n\n    switch (finalState) {\n    case DECOMMISSIONED:\n      metrics.incrDecommisionedNMs();\n      break;\n    case LOST:\n      metrics.incrNumLostNMs();\n      break;\n    case REBOOTED:\n      metrics.incrNumRebootedNMs();\n      break;\n    case UNHEALTHY:\n      metrics.incrNumUnhealthyNMs();\n      break;\n    }\n  }",
          "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java",
          "extendedDetails": {}
        },
        {
          "type": "Yrename",
          "commitMessage": "MAPREDUCE-3760. Changed active nodes list to not contain unhealthy nodes on the webUI and metrics. (vinodkv)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1240421 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "03/02/12 5:03 PM",
          "commitName": "3343494d6c39883485d29c7439831ab3c1c7248d",
          "commitAuthor": "Vinod Kumar Vavilapalli",
          "commitDateOld": "03/02/12 4:04 PM",
          "commitNameOld": "94242c93857a06fb9c56ee571a47d6ca18f00f48",
          "commitAuthorOld": "Vinod Kumar Vavilapalli",
          "daysBetweenCommits": 0.04,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,14 +1,19 @@\n-    private void updateMetrics(RMNodeState nodeState) {\n-      ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n-      switch (nodeState) {\n-      case LOST:\n-        metrics.decrNumLostNMs();\n-        break;\n-      case REBOOTED:\n-        metrics.decrNumRebootedNMs();\n-        break;\n-      case DECOMMISSIONED:\n-        metrics.decrDecommisionedNMs();\n-        break;\n-      }\n-    }\n\\ No newline at end of file\n+  private void updateMetricsForDeactivatedNode(RMNodeState finalState) {\n+    ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n+    metrics.decrNumActiveNodes();\n+\n+    switch (finalState) {\n+    case DECOMMISSIONED:\n+      metrics.incrDecommisionedNMs();\n+      break;\n+    case LOST:\n+      metrics.incrNumLostNMs();\n+      break;\n+    case REBOOTED:\n+      metrics.incrNumRebootedNMs();\n+      break;\n+    case UNHEALTHY:\n+      metrics.incrNumUnhealthyNMs();\n+      break;\n+    }\n+  }\n\\ No newline at end of file\n",
          "actualSource": "  private void updateMetricsForDeactivatedNode(RMNodeState finalState) {\n    ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n    metrics.decrNumActiveNodes();\n\n    switch (finalState) {\n    case DECOMMISSIONED:\n      metrics.incrDecommisionedNMs();\n      break;\n    case LOST:\n      metrics.incrNumLostNMs();\n      break;\n    case REBOOTED:\n      metrics.incrNumRebootedNMs();\n      break;\n    case UNHEALTHY:\n      metrics.incrNumUnhealthyNMs();\n      break;\n    }\n  }",
          "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java",
          "extendedDetails": {
            "oldValue": "updateMetrics",
            "newValue": "updateMetricsForDeactivatedNode"
          }
        },
        {
          "type": "Yparameterchange",
          "commitMessage": "MAPREDUCE-3760. Changed active nodes list to not contain unhealthy nodes on the webUI and metrics. (vinodkv)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1240421 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "03/02/12 5:03 PM",
          "commitName": "3343494d6c39883485d29c7439831ab3c1c7248d",
          "commitAuthor": "Vinod Kumar Vavilapalli",
          "commitDateOld": "03/02/12 4:04 PM",
          "commitNameOld": "94242c93857a06fb9c56ee571a47d6ca18f00f48",
          "commitAuthorOld": "Vinod Kumar Vavilapalli",
          "daysBetweenCommits": 0.04,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,14 +1,19 @@\n-    private void updateMetrics(RMNodeState nodeState) {\n-      ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n-      switch (nodeState) {\n-      case LOST:\n-        metrics.decrNumLostNMs();\n-        break;\n-      case REBOOTED:\n-        metrics.decrNumRebootedNMs();\n-        break;\n-      case DECOMMISSIONED:\n-        metrics.decrDecommisionedNMs();\n-        break;\n-      }\n-    }\n\\ No newline at end of file\n+  private void updateMetricsForDeactivatedNode(RMNodeState finalState) {\n+    ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n+    metrics.decrNumActiveNodes();\n+\n+    switch (finalState) {\n+    case DECOMMISSIONED:\n+      metrics.incrDecommisionedNMs();\n+      break;\n+    case LOST:\n+      metrics.incrNumLostNMs();\n+      break;\n+    case REBOOTED:\n+      metrics.incrNumRebootedNMs();\n+      break;\n+    case UNHEALTHY:\n+      metrics.incrNumUnhealthyNMs();\n+      break;\n+    }\n+  }\n\\ No newline at end of file\n",
          "actualSource": "  private void updateMetricsForDeactivatedNode(RMNodeState finalState) {\n    ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n    metrics.decrNumActiveNodes();\n\n    switch (finalState) {\n    case DECOMMISSIONED:\n      metrics.incrDecommisionedNMs();\n      break;\n    case LOST:\n      metrics.incrNumLostNMs();\n      break;\n    case REBOOTED:\n      metrics.incrNumRebootedNMs();\n      break;\n    case UNHEALTHY:\n      metrics.incrNumUnhealthyNMs();\n      break;\n    }\n  }",
          "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java",
          "extendedDetails": {
            "oldValue": "[nodeState-RMNodeState]",
            "newValue": "[finalState-RMNodeState]"
          }
        }
      ]
    },
    "3cdc100369ce920701fdddae12d7f7247332b3f3": {
      "type": "Yintroduced",
      "commitMessage": "MAPREDUCE-3360. Added information about lost/rebooted/decommissioned nodes on the webapps. Contributed by Bhallamudi Venkata Siva Kamesh and Jason Lowe.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1236433 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "26/01/12 2:56 PM",
      "commitName": "3cdc100369ce920701fdddae12d7f7247332b3f3",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "diff": "@@ -0,0 +1,14 @@\n+    private void updateMetrics(RMNodeState nodeState) {\n+      ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n+      switch (nodeState) {\n+      case LOST:\n+        metrics.decrNumLostNMs();\n+        break;\n+      case REBOOTED:\n+        metrics.decrNumRebootedNMs();\n+        break;\n+      case DECOMMISSIONED:\n+        metrics.decrDecommisionedNMs();\n+        break;\n+      }\n+    }\n\\ No newline at end of file\n",
      "actualSource": "    private void updateMetrics(RMNodeState nodeState) {\n      ClusterMetrics metrics \u003d ClusterMetrics.getMetrics();\n      switch (nodeState) {\n      case LOST:\n        metrics.decrNumLostNMs();\n        break;\n      case REBOOTED:\n        metrics.decrNumRebootedNMs();\n        break;\n      case DECOMMISSIONED:\n        metrics.decrDecommisionedNMs();\n        break;\n      }\n    }",
      "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmnode/RMNodeImpl.java"
    }
  }
}