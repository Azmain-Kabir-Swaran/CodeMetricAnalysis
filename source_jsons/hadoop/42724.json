{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "RMAppAttemptImpl.java",
  "functionName": "transition",
  "functionId": "transition___appAttempt-RMAppAttemptImpl__event-RMAppAttemptEvent",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmapp/attempt/RMAppAttemptImpl.java",
  "functionStartLine": 2057,
  "functionEndLine": 2063,
  "numCommitsSeen": 176,
  "timeTaken": 9767,
  "changeHistory": [
    "9f4d4e27fb1760b352cc5b301cd65a50d2d43ff6",
    "e1fdf62123625e4ba399af02f8aad500637d29d1",
    "1efd2e1d45176b5e17051baba878696f57d35660",
    "ae6cc14611a5898ed637a2e0f9df559f6c29093e",
    "8aabd3d4e67cad8dc7e46f5339981135badc7421",
    "a56f3931d1003ee3423cdd6d7d0c75c551dfc4bf",
    "a5c9ede1433871fcf4e2e802ee2a65950ecd1e72",
    "817ead65b99f465fc2dfa18072cf23cadf5f05d0",
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1",
    "dbecbe5dfe50f834fc3b8401709079e9470cc517"
  ],
  "changeHistoryShort": {
    "9f4d4e27fb1760b352cc5b301cd65a50d2d43ff6": "Ymultichange(Yreturntypechange,Ybodychange)",
    "e1fdf62123625e4ba399af02f8aad500637d29d1": "Yfilerename",
    "1efd2e1d45176b5e17051baba878696f57d35660": "Ybodychange",
    "ae6cc14611a5898ed637a2e0f9df559f6c29093e": "Ybodychange",
    "8aabd3d4e67cad8dc7e46f5339981135badc7421": "Ybodychange",
    "a56f3931d1003ee3423cdd6d7d0c75c551dfc4bf": "Ybodychange",
    "a5c9ede1433871fcf4e2e802ee2a65950ecd1e72": "Ybodychange",
    "817ead65b99f465fc2dfa18072cf23cadf5f05d0": "Ybodychange",
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1": "Yfilerename",
    "dbecbe5dfe50f834fc3b8401709079e9470cc517": "Yintroduced"
  },
  "changeHistoryDetails": {
    "9f4d4e27fb1760b352cc5b301cd65a50d2d43ff6": {
      "type": "Ymultichange(Yreturntypechange,Ybodychange)",
      "commitMessage": "YARN-891. Modified ResourceManager state-store to remember completed applications so that clients can get information about them post RM-restart. Contributed by Jian He.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1537560 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "31/10/13 10:25 AM",
      "commitName": "9f4d4e27fb1760b352cc5b301cd65a50d2d43ff6",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "subchanges": [
        {
          "type": "Yreturntypechange",
          "commitMessage": "YARN-891. Modified ResourceManager state-store to remember completed applications so that clients can get information about them post RM-restart. Contributed by Jian He.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1537560 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "31/10/13 10:25 AM",
          "commitName": "9f4d4e27fb1760b352cc5b301cd65a50d2d43ff6",
          "commitAuthor": "Vinod Kumar Vavilapalli",
          "commitDateOld": "09/10/13 3:49 PM",
          "commitNameOld": "9b9ddf29e28f38648c142adc8bfd8845b7cd7688",
          "commitAuthorOld": "Vinod Kumar Vavilapalli",
          "daysBetweenCommits": 21.77,
          "commitsBetweenForRepo": 130,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,20 +1,14 @@\n-    public RMAppAttemptState transition(RMAppAttemptImpl appAttempt,\n-        RMAppAttemptEvent event) {\n-\n-      RMAppAttemptContainerFinishedEvent containerFinishedEvent\n-        \u003d (RMAppAttemptContainerFinishedEvent) event;\n-      ContainerStatus containerStatus \u003d\n-          containerFinishedEvent.getContainerStatus();\n-\n-      // Is this container the ApplicationMaster container?\n-      if (appAttempt.masterContainer.getId().equals(\n-          containerStatus.getContainerId())) {\n-        new FinalTransition(RMAppAttemptState.FINISHED).transition(\n-            appAttempt, containerFinishedEvent);\n-        return RMAppAttemptState.FINISHED;\n+        transition(RMAppAttemptImpl appAttempt, RMAppAttemptEvent event) {\n+      if (appAttempt.targetedFinalState.equals(RMAppAttemptState.FAILED)\n+          || appAttempt.targetedFinalState.equals(RMAppAttemptState.KILLED)) {\n+        // ignore Container_Finished Event if we were supposed to reach\n+        // FAILED/KILLED state.\n+        return;\n       }\n \n-      // Normal container.\n-      appAttempt.justFinishedContainers.add(containerStatus);\n-      return RMAppAttemptState.FINISHING;\n+      // pass in the earlier AMUnregistered Event also, as this is needed for\n+      // AMFinishedAfterFinalSavingTransition later on\n+      appAttempt.rememberTargetTransitions(event,\n+        new AMFinishedAfterFinalSavingTransition(\n+        appAttempt.eventCausingFinalSaving), RMAppAttemptState.FINISHED);\n     }\n\\ No newline at end of file\n",
          "actualSource": "        transition(RMAppAttemptImpl appAttempt, RMAppAttemptEvent event) {\n      if (appAttempt.targetedFinalState.equals(RMAppAttemptState.FAILED)\n          || appAttempt.targetedFinalState.equals(RMAppAttemptState.KILLED)) {\n        // ignore Container_Finished Event if we were supposed to reach\n        // FAILED/KILLED state.\n        return;\n      }\n\n      // pass in the earlier AMUnregistered Event also, as this is needed for\n      // AMFinishedAfterFinalSavingTransition later on\n      appAttempt.rememberTargetTransitions(event,\n        new AMFinishedAfterFinalSavingTransition(\n        appAttempt.eventCausingFinalSaving), RMAppAttemptState.FINISHED);\n    }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmapp/attempt/RMAppAttemptImpl.java",
          "extendedDetails": {
            "oldValue": "RMAppAttemptState",
            "newValue": "void"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "YARN-891. Modified ResourceManager state-store to remember completed applications so that clients can get information about them post RM-restart. Contributed by Jian He.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1537560 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "31/10/13 10:25 AM",
          "commitName": "9f4d4e27fb1760b352cc5b301cd65a50d2d43ff6",
          "commitAuthor": "Vinod Kumar Vavilapalli",
          "commitDateOld": "09/10/13 3:49 PM",
          "commitNameOld": "9b9ddf29e28f38648c142adc8bfd8845b7cd7688",
          "commitAuthorOld": "Vinod Kumar Vavilapalli",
          "daysBetweenCommits": 21.77,
          "commitsBetweenForRepo": 130,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,20 +1,14 @@\n-    public RMAppAttemptState transition(RMAppAttemptImpl appAttempt,\n-        RMAppAttemptEvent event) {\n-\n-      RMAppAttemptContainerFinishedEvent containerFinishedEvent\n-        \u003d (RMAppAttemptContainerFinishedEvent) event;\n-      ContainerStatus containerStatus \u003d\n-          containerFinishedEvent.getContainerStatus();\n-\n-      // Is this container the ApplicationMaster container?\n-      if (appAttempt.masterContainer.getId().equals(\n-          containerStatus.getContainerId())) {\n-        new FinalTransition(RMAppAttemptState.FINISHED).transition(\n-            appAttempt, containerFinishedEvent);\n-        return RMAppAttemptState.FINISHED;\n+        transition(RMAppAttemptImpl appAttempt, RMAppAttemptEvent event) {\n+      if (appAttempt.targetedFinalState.equals(RMAppAttemptState.FAILED)\n+          || appAttempt.targetedFinalState.equals(RMAppAttemptState.KILLED)) {\n+        // ignore Container_Finished Event if we were supposed to reach\n+        // FAILED/KILLED state.\n+        return;\n       }\n \n-      // Normal container.\n-      appAttempt.justFinishedContainers.add(containerStatus);\n-      return RMAppAttemptState.FINISHING;\n+      // pass in the earlier AMUnregistered Event also, as this is needed for\n+      // AMFinishedAfterFinalSavingTransition later on\n+      appAttempt.rememberTargetTransitions(event,\n+        new AMFinishedAfterFinalSavingTransition(\n+        appAttempt.eventCausingFinalSaving), RMAppAttemptState.FINISHED);\n     }\n\\ No newline at end of file\n",
          "actualSource": "        transition(RMAppAttemptImpl appAttempt, RMAppAttemptEvent event) {\n      if (appAttempt.targetedFinalState.equals(RMAppAttemptState.FAILED)\n          || appAttempt.targetedFinalState.equals(RMAppAttemptState.KILLED)) {\n        // ignore Container_Finished Event if we were supposed to reach\n        // FAILED/KILLED state.\n        return;\n      }\n\n      // pass in the earlier AMUnregistered Event also, as this is needed for\n      // AMFinishedAfterFinalSavingTransition later on\n      appAttempt.rememberTargetTransitions(event,\n        new AMFinishedAfterFinalSavingTransition(\n        appAttempt.eventCausingFinalSaving), RMAppAttemptState.FINISHED);\n    }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmapp/attempt/RMAppAttemptImpl.java",
          "extendedDetails": {}
        }
      ]
    },
    "e1fdf62123625e4ba399af02f8aad500637d29d1": {
      "type": "Yfilerename",
      "commitMessage": "YARN-1. Promote YARN to be a sub-project of Apache Hadoop.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1370666 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "07/08/12 10:22 PM",
      "commitName": "e1fdf62123625e4ba399af02f8aad500637d29d1",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "07/08/12 7:53 PM",
      "commitNameOld": "34554d1e11ee1d5b564d7d9ed3e6d55931d72749",
      "commitAuthorOld": "Aaron Myers",
      "daysBetweenCommits": 0.1,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "    public RMAppAttemptState transition(RMAppAttemptImpl appAttempt,\n        RMAppAttemptEvent event) {\n\n      RMAppAttemptContainerFinishedEvent containerFinishedEvent\n        \u003d (RMAppAttemptContainerFinishedEvent) event;\n      ContainerStatus containerStatus \u003d\n          containerFinishedEvent.getContainerStatus();\n\n      // Is this container the ApplicationMaster container?\n      if (appAttempt.masterContainer.getId().equals(\n          containerStatus.getContainerId())) {\n        new FinalTransition(RMAppAttemptState.FINISHED).transition(\n            appAttempt, containerFinishedEvent);\n        return RMAppAttemptState.FINISHED;\n      }\n\n      // Normal container.\n      appAttempt.justFinishedContainers.add(containerStatus);\n      return RMAppAttemptState.FINISHING;\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmapp/attempt/RMAppAttemptImpl.java",
      "extendedDetails": {
        "oldPath": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmapp/attempt/RMAppAttemptImpl.java",
        "newPath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmapp/attempt/RMAppAttemptImpl.java"
      }
    },
    "1efd2e1d45176b5e17051baba878696f57d35660": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-4157. ResourceManager should not kill apps that are well behaved (Jason Lowe via bobby)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1363067 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "18/07/12 12:40 PM",
      "commitName": "1efd2e1d45176b5e17051baba878696f57d35660",
      "commitAuthor": "Robert Joseph Evans",
      "commitDateOld": "15/07/12 2:46 PM",
      "commitNameOld": "ae6cc14611a5898ed637a2e0f9df559f6c29093e",
      "commitAuthorOld": "Arun Murthy",
      "daysBetweenCommits": 2.91,
      "commitsBetweenForRepo": 26,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,43 +1,20 @@\n     public RMAppAttemptState transition(RMAppAttemptImpl appAttempt,\n         RMAppAttemptEvent event) {\n \n       RMAppAttemptContainerFinishedEvent containerFinishedEvent\n         \u003d (RMAppAttemptContainerFinishedEvent) event;\n       ContainerStatus containerStatus \u003d\n           containerFinishedEvent.getContainerStatus();\n \n-      // Is this container the AmContainer? If the finished container is same as\n-      // the AMContainer, AppAttempt fails\n-      if (appAttempt.masterContainer !\u003d null\n-          \u0026\u0026 appAttempt.masterContainer.getId().equals(\n-              containerStatus.getContainerId())) {\n-        // container associated with AM. must not be unmanaged \n-        assert appAttempt.submissionContext.getUnmanagedAM() \u003d\u003d false;\n-        // Setup diagnostic message\n-        appAttempt.diagnostics.append(\"AM Container for \" +\n-            appAttempt.getAppAttemptId() + \" exited with \" +\n-            \" exitCode: \" + containerStatus.getExitStatus() +\n-            \" due to: \" +  containerStatus.getDiagnostics() + \".\" +\n-            \"Failing this attempt.\");\n-\n-        /*\n-         * In the case when the AM dies, the trackingUrl is left pointing to the AM\u0027s\n-         * URL, which shows up in the scheduler UI as a broken link. Setting it here\n-         * to empty string will prevent any link from being displayed.\n-         * NOTE: don\u0027t set trackingUrl to \u0027null\u0027. That will cause null-pointer exceptions\n-         * in the generated proto code.\n-         */\n-        appAttempt.origTrackingUrl \u003d \"\";\n-        appAttempt.proxiedTrackingUrl \u003d \"\";\n-\n-        new FinalTransition(RMAppAttemptState.FAILED).transition(\n+      // Is this container the ApplicationMaster container?\n+      if (appAttempt.masterContainer.getId().equals(\n+          containerStatus.getContainerId())) {\n+        new FinalTransition(RMAppAttemptState.FINISHED).transition(\n             appAttempt, containerFinishedEvent);\n-        return RMAppAttemptState.FAILED;\n+        return RMAppAttemptState.FINISHED;\n       }\n \n       // Normal container.\n-\n-      // Put it in completedcontainers list\n       appAttempt.justFinishedContainers.add(containerStatus);\n-      return RMAppAttemptState.RUNNING;\n+      return RMAppAttemptState.FINISHING;\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public RMAppAttemptState transition(RMAppAttemptImpl appAttempt,\n        RMAppAttemptEvent event) {\n\n      RMAppAttemptContainerFinishedEvent containerFinishedEvent\n        \u003d (RMAppAttemptContainerFinishedEvent) event;\n      ContainerStatus containerStatus \u003d\n          containerFinishedEvent.getContainerStatus();\n\n      // Is this container the ApplicationMaster container?\n      if (appAttempt.masterContainer.getId().equals(\n          containerStatus.getContainerId())) {\n        new FinalTransition(RMAppAttemptState.FINISHED).transition(\n            appAttempt, containerFinishedEvent);\n        return RMAppAttemptState.FINISHED;\n      }\n\n      // Normal container.\n      appAttempt.justFinishedContainers.add(containerStatus);\n      return RMAppAttemptState.FINISHING;\n    }",
      "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmapp/attempt/RMAppAttemptImpl.java",
      "extendedDetails": {}
    },
    "ae6cc14611a5898ed637a2e0f9df559f6c29093e": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-4427. Added an \u0027unmanaged\u0027 mode for AMs so as to ease development of new applications. Contributed by Bikas Saha.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1361813 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "15/07/12 2:46 PM",
      "commitName": "ae6cc14611a5898ed637a2e0f9df559f6c29093e",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "04/06/12 10:41 AM",
      "commitNameOld": "358eda0bfaaf24f2ff4b2ef9967a370ddcb0a336",
      "commitAuthorOld": "Thomas Graves",
      "daysBetweenCommits": 41.17,
      "commitsBetweenForRepo": 215,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,40 +1,43 @@\n     public RMAppAttemptState transition(RMAppAttemptImpl appAttempt,\n         RMAppAttemptEvent event) {\n \n       RMAppAttemptContainerFinishedEvent containerFinishedEvent\n         \u003d (RMAppAttemptContainerFinishedEvent) event;\n       ContainerStatus containerStatus \u003d\n           containerFinishedEvent.getContainerStatus();\n \n       // Is this container the AmContainer? If the finished container is same as\n       // the AMContainer, AppAttempt fails\n-      if (appAttempt.masterContainer.getId().equals(\n-          containerStatus.getContainerId())) {\n+      if (appAttempt.masterContainer !\u003d null\n+          \u0026\u0026 appAttempt.masterContainer.getId().equals(\n+              containerStatus.getContainerId())) {\n+        // container associated with AM. must not be unmanaged \n+        assert appAttempt.submissionContext.getUnmanagedAM() \u003d\u003d false;\n         // Setup diagnostic message\n         appAttempt.diagnostics.append(\"AM Container for \" +\n             appAttempt.getAppAttemptId() + \" exited with \" +\n             \" exitCode: \" + containerStatus.getExitStatus() +\n             \" due to: \" +  containerStatus.getDiagnostics() + \".\" +\n             \"Failing this attempt.\");\n \n         /*\n          * In the case when the AM dies, the trackingUrl is left pointing to the AM\u0027s\n          * URL, which shows up in the scheduler UI as a broken link. Setting it here\n          * to empty string will prevent any link from being displayed.\n          * NOTE: don\u0027t set trackingUrl to \u0027null\u0027. That will cause null-pointer exceptions\n          * in the generated proto code.\n          */\n         appAttempt.origTrackingUrl \u003d \"\";\n         appAttempt.proxiedTrackingUrl \u003d \"\";\n \n         new FinalTransition(RMAppAttemptState.FAILED).transition(\n             appAttempt, containerFinishedEvent);\n         return RMAppAttemptState.FAILED;\n       }\n \n       // Normal container.\n \n       // Put it in completedcontainers list\n       appAttempt.justFinishedContainers.add(containerStatus);\n       return RMAppAttemptState.RUNNING;\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public RMAppAttemptState transition(RMAppAttemptImpl appAttempt,\n        RMAppAttemptEvent event) {\n\n      RMAppAttemptContainerFinishedEvent containerFinishedEvent\n        \u003d (RMAppAttemptContainerFinishedEvent) event;\n      ContainerStatus containerStatus \u003d\n          containerFinishedEvent.getContainerStatus();\n\n      // Is this container the AmContainer? If the finished container is same as\n      // the AMContainer, AppAttempt fails\n      if (appAttempt.masterContainer !\u003d null\n          \u0026\u0026 appAttempt.masterContainer.getId().equals(\n              containerStatus.getContainerId())) {\n        // container associated with AM. must not be unmanaged \n        assert appAttempt.submissionContext.getUnmanagedAM() \u003d\u003d false;\n        // Setup diagnostic message\n        appAttempt.diagnostics.append(\"AM Container for \" +\n            appAttempt.getAppAttemptId() + \" exited with \" +\n            \" exitCode: \" + containerStatus.getExitStatus() +\n            \" due to: \" +  containerStatus.getDiagnostics() + \".\" +\n            \"Failing this attempt.\");\n\n        /*\n         * In the case when the AM dies, the trackingUrl is left pointing to the AM\u0027s\n         * URL, which shows up in the scheduler UI as a broken link. Setting it here\n         * to empty string will prevent any link from being displayed.\n         * NOTE: don\u0027t set trackingUrl to \u0027null\u0027. That will cause null-pointer exceptions\n         * in the generated proto code.\n         */\n        appAttempt.origTrackingUrl \u003d \"\";\n        appAttempt.proxiedTrackingUrl \u003d \"\";\n\n        new FinalTransition(RMAppAttemptState.FAILED).transition(\n            appAttempt, containerFinishedEvent);\n        return RMAppAttemptState.FAILED;\n      }\n\n      // Normal container.\n\n      // Put it in completedcontainers list\n      appAttempt.justFinishedContainers.add(containerStatus);\n      return RMAppAttemptState.RUNNING;\n    }",
      "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmapp/attempt/RMAppAttemptImpl.java",
      "extendedDetails": {}
    },
    "8aabd3d4e67cad8dc7e46f5339981135badc7421": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-2858. Added a WebApp Proxy for applications. Contributed by Robert Evans.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1189036 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "25/10/11 11:29 PM",
      "commitName": "8aabd3d4e67cad8dc7e46f5339981135badc7421",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "20/10/11 4:45 AM",
      "commitNameOld": "df2991c0cbc3f35c2640b93680667507c4f810dd",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 5.78,
      "commitsBetweenForRepo": 43,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,39 +1,40 @@\n     public RMAppAttemptState transition(RMAppAttemptImpl appAttempt,\n         RMAppAttemptEvent event) {\n \n       RMAppAttemptContainerFinishedEvent containerFinishedEvent\n         \u003d (RMAppAttemptContainerFinishedEvent) event;\n       ContainerStatus containerStatus \u003d\n           containerFinishedEvent.getContainerStatus();\n \n       // Is this container the AmContainer? If the finished container is same as\n       // the AMContainer, AppAttempt fails\n       if (appAttempt.masterContainer.getId().equals(\n           containerStatus.getContainerId())) {\n         // Setup diagnostic message\n         appAttempt.diagnostics.append(\"AM Container for \" +\n             appAttempt.getAppAttemptId() + \" exited with \" +\n             \" exitCode: \" + containerStatus.getExitStatus() +\n             \" due to: \" +  containerStatus.getDiagnostics() + \".\" +\n             \"Failing this attempt.\");\n \n         /*\n          * In the case when the AM dies, the trackingUrl is left pointing to the AM\u0027s\n          * URL, which shows up in the scheduler UI as a broken link. Setting it here\n          * to empty string will prevent any link from being displayed.\n          * NOTE: don\u0027t set trackingUrl to \u0027null\u0027. That will cause null-pointer exceptions\n          * in the generated proto code.\n          */\n-        appAttempt.trackingUrl \u003d \"\";\n+        appAttempt.origTrackingUrl \u003d \"\";\n+        appAttempt.proxiedTrackingUrl \u003d \"\";\n \n         new FinalTransition(RMAppAttemptState.FAILED).transition(\n             appAttempt, containerFinishedEvent);\n         return RMAppAttemptState.FAILED;\n       }\n \n       // Normal container.\n \n       // Put it in completedcontainers list\n       appAttempt.justFinishedContainers.add(containerStatus);\n       return RMAppAttemptState.RUNNING;\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public RMAppAttemptState transition(RMAppAttemptImpl appAttempt,\n        RMAppAttemptEvent event) {\n\n      RMAppAttemptContainerFinishedEvent containerFinishedEvent\n        \u003d (RMAppAttemptContainerFinishedEvent) event;\n      ContainerStatus containerStatus \u003d\n          containerFinishedEvent.getContainerStatus();\n\n      // Is this container the AmContainer? If the finished container is same as\n      // the AMContainer, AppAttempt fails\n      if (appAttempt.masterContainer.getId().equals(\n          containerStatus.getContainerId())) {\n        // Setup diagnostic message\n        appAttempt.diagnostics.append(\"AM Container for \" +\n            appAttempt.getAppAttemptId() + \" exited with \" +\n            \" exitCode: \" + containerStatus.getExitStatus() +\n            \" due to: \" +  containerStatus.getDiagnostics() + \".\" +\n            \"Failing this attempt.\");\n\n        /*\n         * In the case when the AM dies, the trackingUrl is left pointing to the AM\u0027s\n         * URL, which shows up in the scheduler UI as a broken link. Setting it here\n         * to empty string will prevent any link from being displayed.\n         * NOTE: don\u0027t set trackingUrl to \u0027null\u0027. That will cause null-pointer exceptions\n         * in the generated proto code.\n         */\n        appAttempt.origTrackingUrl \u003d \"\";\n        appAttempt.proxiedTrackingUrl \u003d \"\";\n\n        new FinalTransition(RMAppAttemptState.FAILED).transition(\n            appAttempt, containerFinishedEvent);\n        return RMAppAttemptState.FAILED;\n      }\n\n      // Normal container.\n\n      // Put it in completedcontainers list\n      appAttempt.justFinishedContainers.add(containerStatus);\n      return RMAppAttemptState.RUNNING;\n    }",
      "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmapp/attempt/RMAppAttemptImpl.java",
      "extendedDetails": {}
    },
    "a56f3931d1003ee3423cdd6d7d0c75c551dfc4bf": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-2783. Fixing RM web-UI to show no tracking-URL when AM crashes. Contributed by Eric Payne.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1179975 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "07/10/11 2:17 AM",
      "commitName": "a56f3931d1003ee3423cdd6d7d0c75c551dfc4bf",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "30/09/11 5:46 AM",
      "commitNameOld": "063e33a862f99ce93b8399924c35d39ccd880f01",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 6.86,
      "commitsBetweenForRepo": 52,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,30 +1,39 @@\n     public RMAppAttemptState transition(RMAppAttemptImpl appAttempt,\n         RMAppAttemptEvent event) {\n \n       RMAppAttemptContainerFinishedEvent containerFinishedEvent\n         \u003d (RMAppAttemptContainerFinishedEvent) event;\n       ContainerStatus containerStatus \u003d\n           containerFinishedEvent.getContainerStatus();\n \n       // Is this container the AmContainer? If the finished container is same as\n       // the AMContainer, AppAttempt fails\n       if (appAttempt.masterContainer.getId().equals(\n           containerStatus.getContainerId())) {\n         // Setup diagnostic message\n         appAttempt.diagnostics.append(\"AM Container for \" +\n             appAttempt.getAppAttemptId() + \" exited with \" +\n             \" exitCode: \" + containerStatus.getExitStatus() +\n             \" due to: \" +  containerStatus.getDiagnostics() + \".\" +\n             \"Failing this attempt.\");\n \n+        /*\n+         * In the case when the AM dies, the trackingUrl is left pointing to the AM\u0027s\n+         * URL, which shows up in the scheduler UI as a broken link. Setting it here\n+         * to empty string will prevent any link from being displayed.\n+         * NOTE: don\u0027t set trackingUrl to \u0027null\u0027. That will cause null-pointer exceptions\n+         * in the generated proto code.\n+         */\n+        appAttempt.trackingUrl \u003d \"\";\n+\n         new FinalTransition(RMAppAttemptState.FAILED).transition(\n             appAttempt, containerFinishedEvent);\n         return RMAppAttemptState.FAILED;\n       }\n \n       // Normal container.\n \n       // Put it in completedcontainers list\n       appAttempt.justFinishedContainers.add(containerStatus);\n       return RMAppAttemptState.RUNNING;\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public RMAppAttemptState transition(RMAppAttemptImpl appAttempt,\n        RMAppAttemptEvent event) {\n\n      RMAppAttemptContainerFinishedEvent containerFinishedEvent\n        \u003d (RMAppAttemptContainerFinishedEvent) event;\n      ContainerStatus containerStatus \u003d\n          containerFinishedEvent.getContainerStatus();\n\n      // Is this container the AmContainer? If the finished container is same as\n      // the AMContainer, AppAttempt fails\n      if (appAttempt.masterContainer.getId().equals(\n          containerStatus.getContainerId())) {\n        // Setup diagnostic message\n        appAttempt.diagnostics.append(\"AM Container for \" +\n            appAttempt.getAppAttemptId() + \" exited with \" +\n            \" exitCode: \" + containerStatus.getExitStatus() +\n            \" due to: \" +  containerStatus.getDiagnostics() + \".\" +\n            \"Failing this attempt.\");\n\n        /*\n         * In the case when the AM dies, the trackingUrl is left pointing to the AM\u0027s\n         * URL, which shows up in the scheduler UI as a broken link. Setting it here\n         * to empty string will prevent any link from being displayed.\n         * NOTE: don\u0027t set trackingUrl to \u0027null\u0027. That will cause null-pointer exceptions\n         * in the generated proto code.\n         */\n        appAttempt.trackingUrl \u003d \"\";\n\n        new FinalTransition(RMAppAttemptState.FAILED).transition(\n            appAttempt, containerFinishedEvent);\n        return RMAppAttemptState.FAILED;\n      }\n\n      // Normal container.\n\n      // Put it in completedcontainers list\n      appAttempt.justFinishedContainers.add(containerStatus);\n      return RMAppAttemptState.RUNNING;\n    }",
      "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmapp/attempt/RMAppAttemptImpl.java",
      "extendedDetails": {}
    },
    "a5c9ede1433871fcf4e2e802ee2a65950ecd1e72": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-2952. Fixed ResourceManager/MR-client to consume diagnostics for AM failures in a couple of corner cases. Contributed by Arun C Murthy.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1175403 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "25/09/11 7:46 AM",
      "commitName": "a5c9ede1433871fcf4e2e802ee2a65950ecd1e72",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "19/09/11 4:56 PM",
      "commitNameOld": "bbfd81503cfd98aaeb0334ba356076bfdf6bbd9f",
      "commitAuthorOld": "Mahadev Konar",
      "daysBetweenCommits": 5.62,
      "commitsBetweenForRepo": 37,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,23 +1,30 @@\n     public RMAppAttemptState transition(RMAppAttemptImpl appAttempt,\n         RMAppAttemptEvent event) {\n \n       RMAppAttemptContainerFinishedEvent containerFinishedEvent\n         \u003d (RMAppAttemptContainerFinishedEvent) event;\n       ContainerStatus containerStatus \u003d \n           containerFinishedEvent.getContainerStatus();\n \n       // Is this container the AmContainer? If the finished container is same as\n       // the AMContainer, AppAttempt fails\n       if (appAttempt.masterContainer.getId().equals(\n           containerStatus.getContainerId())) {\n+        // Setup diagnostic message\n+        appAttempt.diagnostics.append(\"AM Container for \" +\n+            appAttempt.getAppAttemptId() + \" exited with \" +\n+            \" exitCode: \" + containerStatus.getExitStatus() + \n+            \" due to: \" +  containerStatus.getDiagnostics() + \".\" +\n+            \"Failing this attempt.\");\n+\n         new FinalTransition(RMAppAttemptState.FAILED).transition(\n             appAttempt, containerFinishedEvent);\n         return RMAppAttemptState.FAILED;\n       }\n \n       // Normal container.\n \n       // Put it in completedcontainers list\n       appAttempt.justFinishedContainers.add(containerStatus);\n       return RMAppAttemptState.RUNNING;\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public RMAppAttemptState transition(RMAppAttemptImpl appAttempt,\n        RMAppAttemptEvent event) {\n\n      RMAppAttemptContainerFinishedEvent containerFinishedEvent\n        \u003d (RMAppAttemptContainerFinishedEvent) event;\n      ContainerStatus containerStatus \u003d \n          containerFinishedEvent.getContainerStatus();\n\n      // Is this container the AmContainer? If the finished container is same as\n      // the AMContainer, AppAttempt fails\n      if (appAttempt.masterContainer.getId().equals(\n          containerStatus.getContainerId())) {\n        // Setup diagnostic message\n        appAttempt.diagnostics.append(\"AM Container for \" +\n            appAttempt.getAppAttemptId() + \" exited with \" +\n            \" exitCode: \" + containerStatus.getExitStatus() + \n            \" due to: \" +  containerStatus.getDiagnostics() + \".\" +\n            \"Failing this attempt.\");\n\n        new FinalTransition(RMAppAttemptState.FAILED).transition(\n            appAttempt, containerFinishedEvent);\n        return RMAppAttemptState.FAILED;\n      }\n\n      // Normal container.\n\n      // Put it in completedcontainers list\n      appAttempt.justFinishedContainers.add(containerStatus);\n      return RMAppAttemptState.RUNNING;\n    }",
      "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmapp/attempt/RMAppAttemptImpl.java",
      "extendedDetails": {}
    },
    "817ead65b99f465fc2dfa18072cf23cadf5f05d0": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-2933. Change allocate call to return ContainerStatus for completed containers rather than Container.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1169484 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "11/09/11 10:26 AM",
      "commitName": "817ead65b99f465fc2dfa18072cf23cadf5f05d0",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "25/08/11 10:16 AM",
      "commitNameOld": "7c85f33ce1b209e1e5bb17b9dd2ad270ca451d60",
      "commitAuthorOld": "Mahadev Konar",
      "daysBetweenCommits": 17.01,
      "commitsBetweenForRepo": 98,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,21 +1,23 @@\n     public RMAppAttemptState transition(RMAppAttemptImpl appAttempt,\n         RMAppAttemptEvent event) {\n \n       RMAppAttemptContainerFinishedEvent containerFinishedEvent\n         \u003d (RMAppAttemptContainerFinishedEvent) event;\n-      Container container \u003d containerFinishedEvent.getContainer();\n+      ContainerStatus containerStatus \u003d \n+          containerFinishedEvent.getContainerStatus();\n \n       // Is this container the AmContainer? If the finished container is same as\n       // the AMContainer, AppAttempt fails\n-      if (appAttempt.masterContainer.getId().equals(container.getId())) {\n+      if (appAttempt.masterContainer.getId().equals(\n+          containerStatus.getContainerId())) {\n         new FinalTransition(RMAppAttemptState.FAILED).transition(\n             appAttempt, containerFinishedEvent);\n         return RMAppAttemptState.FAILED;\n       }\n \n       // Normal container.\n \n       // Put it in completedcontainers list\n-      appAttempt.justFinishedContainers.add(container);\n+      appAttempt.justFinishedContainers.add(containerStatus);\n       return RMAppAttemptState.RUNNING;\n     }\n\\ No newline at end of file\n",
      "actualSource": "    public RMAppAttemptState transition(RMAppAttemptImpl appAttempt,\n        RMAppAttemptEvent event) {\n\n      RMAppAttemptContainerFinishedEvent containerFinishedEvent\n        \u003d (RMAppAttemptContainerFinishedEvent) event;\n      ContainerStatus containerStatus \u003d \n          containerFinishedEvent.getContainerStatus();\n\n      // Is this container the AmContainer? If the finished container is same as\n      // the AMContainer, AppAttempt fails\n      if (appAttempt.masterContainer.getId().equals(\n          containerStatus.getContainerId())) {\n        new FinalTransition(RMAppAttemptState.FAILED).transition(\n            appAttempt, containerFinishedEvent);\n        return RMAppAttemptState.FAILED;\n      }\n\n      // Normal container.\n\n      // Put it in completedcontainers list\n      appAttempt.justFinishedContainers.add(containerStatus);\n      return RMAppAttemptState.RUNNING;\n    }",
      "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmapp/attempt/RMAppAttemptImpl.java",
      "extendedDetails": {}
    },
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1": {
      "type": "Yfilerename",
      "commitMessage": "HADOOP-7560. Change src layout to be heirarchical. Contributed by Alejandro Abdelnur.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1161332 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/08/11 5:14 PM",
      "commitName": "cd7157784e5e5ddc4e77144d042e54dd0d04bac1",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "24/08/11 5:06 PM",
      "commitNameOld": "bb0005cfec5fd2861600ff5babd259b48ba18b63",
      "commitAuthorOld": "Arun Murthy",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "    public RMAppAttemptState transition(RMAppAttemptImpl appAttempt,\n        RMAppAttemptEvent event) {\n\n      RMAppAttemptContainerFinishedEvent containerFinishedEvent\n        \u003d (RMAppAttemptContainerFinishedEvent) event;\n      Container container \u003d containerFinishedEvent.getContainer();\n\n      // Is this container the AmContainer? If the finished container is same as\n      // the AMContainer, AppAttempt fails\n      if (appAttempt.masterContainer.getId().equals(container.getId())) {\n        new FinalTransition(RMAppAttemptState.FAILED).transition(\n            appAttempt, containerFinishedEvent);\n        return RMAppAttemptState.FAILED;\n      }\n\n      // Normal container.\n\n      // Put it in completedcontainers list\n      appAttempt.justFinishedContainers.add(container);\n      return RMAppAttemptState.RUNNING;\n    }",
      "path": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmapp/attempt/RMAppAttemptImpl.java",
      "extendedDetails": {
        "oldPath": "hadoop-mapreduce/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmapp/attempt/RMAppAttemptImpl.java",
        "newPath": "hadoop-mapreduce-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmapp/attempt/RMAppAttemptImpl.java"
      }
    },
    "dbecbe5dfe50f834fc3b8401709079e9470cc517": {
      "type": "Yintroduced",
      "commitMessage": "MAPREDUCE-279. MapReduce 2.0. Merging MR-279 branch into trunk. Contributed by Arun C Murthy, Christopher Douglas, Devaraj Das, Greg Roelofs, Jeffrey Naisbitt, Josh Wills, Jonathan Eagles, Krishna Ramachandran, Luke Lu, Mahadev Konar, Robert Evans, Sharad Agarwal, Siddharth Seth, Thomas Graves, and Vinod Kumar Vavilapalli.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1159166 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "18/08/11 4:07 AM",
      "commitName": "dbecbe5dfe50f834fc3b8401709079e9470cc517",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "diff": "@@ -0,0 +1,21 @@\n+    public RMAppAttemptState transition(RMAppAttemptImpl appAttempt,\n+        RMAppAttemptEvent event) {\n+\n+      RMAppAttemptContainerFinishedEvent containerFinishedEvent\n+        \u003d (RMAppAttemptContainerFinishedEvent) event;\n+      Container container \u003d containerFinishedEvent.getContainer();\n+\n+      // Is this container the AmContainer? If the finished container is same as\n+      // the AMContainer, AppAttempt fails\n+      if (appAttempt.masterContainer.getId().equals(container.getId())) {\n+        new FinalTransition(RMAppAttemptState.FAILED).transition(\n+            appAttempt, containerFinishedEvent);\n+        return RMAppAttemptState.FAILED;\n+      }\n+\n+      // Normal container.\n+\n+      // Put it in completedcontainers list\n+      appAttempt.justFinishedContainers.add(container);\n+      return RMAppAttemptState.RUNNING;\n+    }\n\\ No newline at end of file\n",
      "actualSource": "    public RMAppAttemptState transition(RMAppAttemptImpl appAttempt,\n        RMAppAttemptEvent event) {\n\n      RMAppAttemptContainerFinishedEvent containerFinishedEvent\n        \u003d (RMAppAttemptContainerFinishedEvent) event;\n      Container container \u003d containerFinishedEvent.getContainer();\n\n      // Is this container the AmContainer? If the finished container is same as\n      // the AMContainer, AppAttempt fails\n      if (appAttempt.masterContainer.getId().equals(container.getId())) {\n        new FinalTransition(RMAppAttemptState.FAILED).transition(\n            appAttempt, containerFinishedEvent);\n        return RMAppAttemptState.FAILED;\n      }\n\n      // Normal container.\n\n      // Put it in completedcontainers list\n      appAttempt.justFinishedContainers.add(container);\n      return RMAppAttemptState.RUNNING;\n    }",
      "path": "hadoop-mapreduce/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/rmapp/attempt/RMAppAttemptImpl.java"
    }
  }
}