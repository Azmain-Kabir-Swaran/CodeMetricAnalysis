{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "AbfsClient.java",
  "functionName": "initializeUserAgent",
  "functionId": "initializeUserAgent___abfsConfiguration-AbfsConfiguration(modifiers-final)__sslProviderName-String(modifiers-final)",
  "sourceFilePath": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsClient.java",
  "functionStartLine": 829,
  "functionEndLine": 872,
  "numCommitsSeen": 31,
  "timeTaken": 4378,
  "changeHistory": [
    "264e49c8f2cfd15826655bbc1847f378f60ad8c7",
    "65f60e56b082faf92e1cd3daee2569d8fc669c67",
    "d6a4f39bd5f192e5e3377630887a6998d4d400c2",
    "b54b0c1b676c616aef9574e4e88ea30c314c79dc",
    "ce03a93f78c4d97ccb48a3906fcd77ad0ac756be",
    "f044deedbbfee0812316d587139cb828f27172e9"
  ],
  "changeHistoryShort": {
    "264e49c8f2cfd15826655bbc1847f378f60ad8c7": "Ybodychange",
    "65f60e56b082faf92e1cd3daee2569d8fc669c67": "Ybodychange",
    "d6a4f39bd5f192e5e3377630887a6998d4d400c2": "Ymultichange(Yparameterchange,Ybodychange)",
    "b54b0c1b676c616aef9574e4e88ea30c314c79dc": "Ymultichange(Yparameterchange,Ymodifierchange,Ybodychange)",
    "ce03a93f78c4d97ccb48a3906fcd77ad0ac756be": "Ybodychange",
    "f044deedbbfee0812316d587139cb828f27172e9": "Yintroduced"
  },
  "changeHistoryDetails": {
    "264e49c8f2cfd15826655bbc1847f378f60ad8c7": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-16922. ABFS: Change User-Agent header (#1938)\n\n\r\nContributed by Bilahari T H.",
      "commitDate": "21/04/20 9:37 AM",
      "commitName": "264e49c8f2cfd15826655bbc1847f378f60ad8c7",
      "commitAuthor": "bilaharith",
      "commitDateOld": "26/03/20 8:24 AM",
      "commitNameOld": "745a6c1e69b3699f6496a146afc48824dd735461",
      "commitAuthorOld": "Steve Loughran",
      "daysBetweenCommits": 26.05,
      "commitsBetweenForRepo": 78,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,28 +1,44 @@\n   String initializeUserAgent(final AbfsConfiguration abfsConfiguration,\n-                             final String sslProviderName) {\n+      final String sslProviderName) {\n+\n     StringBuilder sb \u003d new StringBuilder();\n-    sb.append(\"(JavaJRE \");\n+\n+    sb.append(APN_VERSION);\n+    sb.append(SINGLE_WHITE_SPACE);\n+    sb.append(CLIENT_VERSION);\n+    sb.append(SINGLE_WHITE_SPACE);\n+\n+    sb.append(\"(\");\n+\n+    sb.append(System.getProperty(JAVA_VENDOR)\n+        .replaceAll(SINGLE_WHITE_SPACE, EMPTY_STRING));\n+    sb.append(SINGLE_WHITE_SPACE);\n+    sb.append(\"JavaJRE\");\n+    sb.append(SINGLE_WHITE_SPACE);\n     sb.append(System.getProperty(JAVA_VERSION));\n-    sb.append(\"; \");\n-    sb.append(\n-        System.getProperty(OS_NAME).replaceAll(SINGLE_WHITE_SPACE, EMPTY_STRING));\n-    sb.append(\" \");\n+    sb.append(SEMICOLON);\n+    sb.append(SINGLE_WHITE_SPACE);\n+\n+    sb.append(System.getProperty(OS_NAME)\n+        .replaceAll(SINGLE_WHITE_SPACE, EMPTY_STRING));\n+    sb.append(SINGLE_WHITE_SPACE);\n     sb.append(System.getProperty(OS_VERSION));\n-    if (sslProviderName !\u003d null \u0026\u0026 !sslProviderName.isEmpty()) {\n-      sb.append(\"; \");\n-      sb.append(sslProviderName);\n-    }\n-    String tokenProviderField \u003d\n-        ExtensionHelper.getUserAgentSuffix(tokenProvider, \"\");\n-    if (!tokenProviderField.isEmpty()) {\n-      sb.append(\"; \").append(tokenProviderField);\n-    }\n+    sb.append(FORWARD_SLASH);\n+    sb.append(System.getProperty(OS_ARCH));\n+    sb.append(SEMICOLON);\n+\n+    appendIfNotEmpty(sb, sslProviderName, true);\n+    appendIfNotEmpty(sb,\n+        ExtensionHelper.getUserAgentSuffix(tokenProvider, EMPTY_STRING), true);\n+\n+    sb.append(SINGLE_WHITE_SPACE);\n+    sb.append(abfsConfiguration.getClusterName());\n+    sb.append(FORWARD_SLASH);\n+    sb.append(abfsConfiguration.getClusterType());\n+\n     sb.append(\")\");\n-    final String userAgentComment \u003d sb.toString();\n-    String customUserAgentId \u003d abfsConfiguration.getCustomUserAgentPrefix();\n-    if (customUserAgentId !\u003d null \u0026\u0026 !customUserAgentId.isEmpty()) {\n-      return String.format(Locale.ROOT, CLIENT_VERSION + \" %s %s\",\n-          userAgentComment, customUserAgentId);\n-    }\n-    return String.format(Locale.ROOT, CLIENT_VERSION + \" %s\", userAgentComment);\n+\n+    appendIfNotEmpty(sb, abfsConfiguration.getCustomUserAgentPrefix(), false);\n+\n+    return String.format(Locale.ROOT, sb.toString());\n   }\n\\ No newline at end of file\n",
      "actualSource": "  String initializeUserAgent(final AbfsConfiguration abfsConfiguration,\n      final String sslProviderName) {\n\n    StringBuilder sb \u003d new StringBuilder();\n\n    sb.append(APN_VERSION);\n    sb.append(SINGLE_WHITE_SPACE);\n    sb.append(CLIENT_VERSION);\n    sb.append(SINGLE_WHITE_SPACE);\n\n    sb.append(\"(\");\n\n    sb.append(System.getProperty(JAVA_VENDOR)\n        .replaceAll(SINGLE_WHITE_SPACE, EMPTY_STRING));\n    sb.append(SINGLE_WHITE_SPACE);\n    sb.append(\"JavaJRE\");\n    sb.append(SINGLE_WHITE_SPACE);\n    sb.append(System.getProperty(JAVA_VERSION));\n    sb.append(SEMICOLON);\n    sb.append(SINGLE_WHITE_SPACE);\n\n    sb.append(System.getProperty(OS_NAME)\n        .replaceAll(SINGLE_WHITE_SPACE, EMPTY_STRING));\n    sb.append(SINGLE_WHITE_SPACE);\n    sb.append(System.getProperty(OS_VERSION));\n    sb.append(FORWARD_SLASH);\n    sb.append(System.getProperty(OS_ARCH));\n    sb.append(SEMICOLON);\n\n    appendIfNotEmpty(sb, sslProviderName, true);\n    appendIfNotEmpty(sb,\n        ExtensionHelper.getUserAgentSuffix(tokenProvider, EMPTY_STRING), true);\n\n    sb.append(SINGLE_WHITE_SPACE);\n    sb.append(abfsConfiguration.getClusterName());\n    sb.append(FORWARD_SLASH);\n    sb.append(abfsConfiguration.getClusterType());\n\n    sb.append(\")\");\n\n    appendIfNotEmpty(sb, abfsConfiguration.getCustomUserAgentPrefix(), false);\n\n    return String.format(Locale.ROOT, sb.toString());\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsClient.java",
      "extendedDetails": {}
    },
    "65f60e56b082faf92e1cd3daee2569d8fc669c67": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-16068. ABFS Authentication and Delegation Token plugins to optionally be bound to specific URI of the store.\n\nContributed by Steve Loughran.\n",
      "commitDate": "28/02/19 6:22 AM",
      "commitName": "65f60e56b082faf92e1cd3daee2569d8fc669c67",
      "commitAuthor": "Steve Loughran",
      "commitDateOld": "23/11/18 6:17 AM",
      "commitNameOld": "a8302e398c2ca4b0deff062c0e921053351b688e",
      "commitAuthorOld": "Da Zhou",
      "daysBetweenCommits": 97.0,
      "commitsBetweenForRepo": 673,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,23 +1,28 @@\n   String initializeUserAgent(final AbfsConfiguration abfsConfiguration,\n                              final String sslProviderName) {\n     StringBuilder sb \u003d new StringBuilder();\n     sb.append(\"(JavaJRE \");\n     sb.append(System.getProperty(JAVA_VERSION));\n     sb.append(\"; \");\n     sb.append(\n         System.getProperty(OS_NAME).replaceAll(SINGLE_WHITE_SPACE, EMPTY_STRING));\n     sb.append(\" \");\n     sb.append(System.getProperty(OS_VERSION));\n     if (sslProviderName !\u003d null \u0026\u0026 !sslProviderName.isEmpty()) {\n       sb.append(\"; \");\n       sb.append(sslProviderName);\n     }\n+    String tokenProviderField \u003d\n+        ExtensionHelper.getUserAgentSuffix(tokenProvider, \"\");\n+    if (!tokenProviderField.isEmpty()) {\n+      sb.append(\"; \").append(tokenProviderField);\n+    }\n     sb.append(\")\");\n     final String userAgentComment \u003d sb.toString();\n     String customUserAgentId \u003d abfsConfiguration.getCustomUserAgentPrefix();\n     if (customUserAgentId !\u003d null \u0026\u0026 !customUserAgentId.isEmpty()) {\n       return String.format(Locale.ROOT, CLIENT_VERSION + \" %s %s\",\n           userAgentComment, customUserAgentId);\n     }\n-    return String.format(CLIENT_VERSION + \" %s\", userAgentComment);\n+    return String.format(Locale.ROOT, CLIENT_VERSION + \" %s\", userAgentComment);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  String initializeUserAgent(final AbfsConfiguration abfsConfiguration,\n                             final String sslProviderName) {\n    StringBuilder sb \u003d new StringBuilder();\n    sb.append(\"(JavaJRE \");\n    sb.append(System.getProperty(JAVA_VERSION));\n    sb.append(\"; \");\n    sb.append(\n        System.getProperty(OS_NAME).replaceAll(SINGLE_WHITE_SPACE, EMPTY_STRING));\n    sb.append(\" \");\n    sb.append(System.getProperty(OS_VERSION));\n    if (sslProviderName !\u003d null \u0026\u0026 !sslProviderName.isEmpty()) {\n      sb.append(\"; \");\n      sb.append(sslProviderName);\n    }\n    String tokenProviderField \u003d\n        ExtensionHelper.getUserAgentSuffix(tokenProvider, \"\");\n    if (!tokenProviderField.isEmpty()) {\n      sb.append(\"; \").append(tokenProviderField);\n    }\n    sb.append(\")\");\n    final String userAgentComment \u003d sb.toString();\n    String customUserAgentId \u003d abfsConfiguration.getCustomUserAgentPrefix();\n    if (customUserAgentId !\u003d null \u0026\u0026 !customUserAgentId.isEmpty()) {\n      return String.format(Locale.ROOT, CLIENT_VERSION + \" %s %s\",\n          userAgentComment, customUserAgentId);\n    }\n    return String.format(Locale.ROOT, CLIENT_VERSION + \" %s\", userAgentComment);\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsClient.java",
      "extendedDetails": {}
    },
    "d6a4f39bd5f192e5e3377630887a6998d4d400c2": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "HADOOP-15669. ABFS: Improve HTTPS Performance.\nContributed by Vishwajeet Dusane.\n",
      "commitDate": "17/09/18 12:54 PM",
      "commitName": "d6a4f39bd5f192e5e3377630887a6998d4d400c2",
      "commitAuthor": "Thomas Marquardt",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HADOOP-15669. ABFS: Improve HTTPS Performance.\nContributed by Vishwajeet Dusane.\n",
          "commitDate": "17/09/18 12:54 PM",
          "commitName": "d6a4f39bd5f192e5e3377630887a6998d4d400c2",
          "commitAuthor": "Thomas Marquardt",
          "commitDateOld": "17/09/18 12:54 PM",
          "commitNameOld": "b54b0c1b676c616aef9574e4e88ea30c314c79dc",
          "commitAuthorOld": "Thomas Marquardt",
          "daysBetweenCommits": 0.0,
          "commitsBetweenForRepo": 2,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,13 +1,23 @@\n-  String initializeUserAgent(final AbfsConfiguration abfsConfiguration) {\n-    final String userAgentComment \u003d String.format(Locale.ROOT,\n-            \"(JavaJRE %s; %s %s)\",\n-            System.getProperty(JAVA_VERSION),\n-            System.getProperty(OS_NAME)\n-                    .replaceAll(SINGLE_WHITE_SPACE, EMPTY_STRING),\n-            System.getProperty(OS_VERSION));\n+  String initializeUserAgent(final AbfsConfiguration abfsConfiguration,\n+                             final String sslProviderName) {\n+    StringBuilder sb \u003d new StringBuilder();\n+    sb.append(\"(JavaJRE \");\n+    sb.append(System.getProperty(JAVA_VERSION));\n+    sb.append(\"; \");\n+    sb.append(\n+        System.getProperty(OS_NAME).replaceAll(SINGLE_WHITE_SPACE, EMPTY_STRING));\n+    sb.append(\" \");\n+    sb.append(System.getProperty(OS_VERSION));\n+    if (sslProviderName !\u003d null \u0026\u0026 !sslProviderName.isEmpty()) {\n+      sb.append(\"; \");\n+      sb.append(sslProviderName);\n+    }\n+    sb.append(\")\");\n+    final String userAgentComment \u003d sb.toString();\n     String customUserAgentId \u003d abfsConfiguration.getCustomUserAgentPrefix();\n     if (customUserAgentId !\u003d null \u0026\u0026 !customUserAgentId.isEmpty()) {\n-      return String.format(Locale.ROOT, CLIENT_VERSION + \" %s %s\", userAgentComment, customUserAgentId);\n+      return String.format(Locale.ROOT, CLIENT_VERSION + \" %s %s\",\n+          userAgentComment, customUserAgentId);\n     }\n     return String.format(CLIENT_VERSION + \" %s\", userAgentComment);\n   }\n\\ No newline at end of file\n",
          "actualSource": "  String initializeUserAgent(final AbfsConfiguration abfsConfiguration,\n                             final String sslProviderName) {\n    StringBuilder sb \u003d new StringBuilder();\n    sb.append(\"(JavaJRE \");\n    sb.append(System.getProperty(JAVA_VERSION));\n    sb.append(\"; \");\n    sb.append(\n        System.getProperty(OS_NAME).replaceAll(SINGLE_WHITE_SPACE, EMPTY_STRING));\n    sb.append(\" \");\n    sb.append(System.getProperty(OS_VERSION));\n    if (sslProviderName !\u003d null \u0026\u0026 !sslProviderName.isEmpty()) {\n      sb.append(\"; \");\n      sb.append(sslProviderName);\n    }\n    sb.append(\")\");\n    final String userAgentComment \u003d sb.toString();\n    String customUserAgentId \u003d abfsConfiguration.getCustomUserAgentPrefix();\n    if (customUserAgentId !\u003d null \u0026\u0026 !customUserAgentId.isEmpty()) {\n      return String.format(Locale.ROOT, CLIENT_VERSION + \" %s %s\",\n          userAgentComment, customUserAgentId);\n    }\n    return String.format(CLIENT_VERSION + \" %s\", userAgentComment);\n  }",
          "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsClient.java",
          "extendedDetails": {
            "oldValue": "[abfsConfiguration-AbfsConfiguration(modifiers-final)]",
            "newValue": "[abfsConfiguration-AbfsConfiguration(modifiers-final), sslProviderName-String(modifiers-final)]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HADOOP-15669. ABFS: Improve HTTPS Performance.\nContributed by Vishwajeet Dusane.\n",
          "commitDate": "17/09/18 12:54 PM",
          "commitName": "d6a4f39bd5f192e5e3377630887a6998d4d400c2",
          "commitAuthor": "Thomas Marquardt",
          "commitDateOld": "17/09/18 12:54 PM",
          "commitNameOld": "b54b0c1b676c616aef9574e4e88ea30c314c79dc",
          "commitAuthorOld": "Thomas Marquardt",
          "daysBetweenCommits": 0.0,
          "commitsBetweenForRepo": 2,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,13 +1,23 @@\n-  String initializeUserAgent(final AbfsConfiguration abfsConfiguration) {\n-    final String userAgentComment \u003d String.format(Locale.ROOT,\n-            \"(JavaJRE %s; %s %s)\",\n-            System.getProperty(JAVA_VERSION),\n-            System.getProperty(OS_NAME)\n-                    .replaceAll(SINGLE_WHITE_SPACE, EMPTY_STRING),\n-            System.getProperty(OS_VERSION));\n+  String initializeUserAgent(final AbfsConfiguration abfsConfiguration,\n+                             final String sslProviderName) {\n+    StringBuilder sb \u003d new StringBuilder();\n+    sb.append(\"(JavaJRE \");\n+    sb.append(System.getProperty(JAVA_VERSION));\n+    sb.append(\"; \");\n+    sb.append(\n+        System.getProperty(OS_NAME).replaceAll(SINGLE_WHITE_SPACE, EMPTY_STRING));\n+    sb.append(\" \");\n+    sb.append(System.getProperty(OS_VERSION));\n+    if (sslProviderName !\u003d null \u0026\u0026 !sslProviderName.isEmpty()) {\n+      sb.append(\"; \");\n+      sb.append(sslProviderName);\n+    }\n+    sb.append(\")\");\n+    final String userAgentComment \u003d sb.toString();\n     String customUserAgentId \u003d abfsConfiguration.getCustomUserAgentPrefix();\n     if (customUserAgentId !\u003d null \u0026\u0026 !customUserAgentId.isEmpty()) {\n-      return String.format(Locale.ROOT, CLIENT_VERSION + \" %s %s\", userAgentComment, customUserAgentId);\n+      return String.format(Locale.ROOT, CLIENT_VERSION + \" %s %s\",\n+          userAgentComment, customUserAgentId);\n     }\n     return String.format(CLIENT_VERSION + \" %s\", userAgentComment);\n   }\n\\ No newline at end of file\n",
          "actualSource": "  String initializeUserAgent(final AbfsConfiguration abfsConfiguration,\n                             final String sslProviderName) {\n    StringBuilder sb \u003d new StringBuilder();\n    sb.append(\"(JavaJRE \");\n    sb.append(System.getProperty(JAVA_VERSION));\n    sb.append(\"; \");\n    sb.append(\n        System.getProperty(OS_NAME).replaceAll(SINGLE_WHITE_SPACE, EMPTY_STRING));\n    sb.append(\" \");\n    sb.append(System.getProperty(OS_VERSION));\n    if (sslProviderName !\u003d null \u0026\u0026 !sslProviderName.isEmpty()) {\n      sb.append(\"; \");\n      sb.append(sslProviderName);\n    }\n    sb.append(\")\");\n    final String userAgentComment \u003d sb.toString();\n    String customUserAgentId \u003d abfsConfiguration.getCustomUserAgentPrefix();\n    if (customUserAgentId !\u003d null \u0026\u0026 !customUserAgentId.isEmpty()) {\n      return String.format(Locale.ROOT, CLIENT_VERSION + \" %s %s\",\n          userAgentComment, customUserAgentId);\n    }\n    return String.format(CLIENT_VERSION + \" %s\", userAgentComment);\n  }",
          "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsClient.java",
          "extendedDetails": {}
        }
      ]
    },
    "b54b0c1b676c616aef9574e4e88ea30c314c79dc": {
      "type": "Ymultichange(Yparameterchange,Ymodifierchange,Ybodychange)",
      "commitMessage": "HADOOP-15659. Code changes for bug fix and new tests.\nContributed by Da Zhou.\n",
      "commitDate": "17/09/18 12:54 PM",
      "commitName": "b54b0c1b676c616aef9574e4e88ea30c314c79dc",
      "commitAuthor": "Thomas Marquardt",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HADOOP-15659. Code changes for bug fix and new tests.\nContributed by Da Zhou.\n",
          "commitDate": "17/09/18 12:54 PM",
          "commitName": "b54b0c1b676c616aef9574e4e88ea30c314c79dc",
          "commitAuthor": "Thomas Marquardt",
          "commitDateOld": "17/09/18 12:54 PM",
          "commitNameOld": "ce03a93f78c4d97ccb48a3906fcd77ad0ac756be",
          "commitAuthorOld": "Thomas Marquardt",
          "daysBetweenCommits": 0.0,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,10 +1,13 @@\n-  private String initializeUserAgent() {\n+  String initializeUserAgent(final AbfsConfiguration abfsConfiguration) {\n     final String userAgentComment \u003d String.format(Locale.ROOT,\n             \"(JavaJRE %s; %s %s)\",\n             System.getProperty(JAVA_VERSION),\n             System.getProperty(OS_NAME)\n                     .replaceAll(SINGLE_WHITE_SPACE, EMPTY_STRING),\n             System.getProperty(OS_VERSION));\n-\n+    String customUserAgentId \u003d abfsConfiguration.getCustomUserAgentPrefix();\n+    if (customUserAgentId !\u003d null \u0026\u0026 !customUserAgentId.isEmpty()) {\n+      return String.format(Locale.ROOT, CLIENT_VERSION + \" %s %s\", userAgentComment, customUserAgentId);\n+    }\n     return String.format(CLIENT_VERSION + \" %s\", userAgentComment);\n   }\n\\ No newline at end of file\n",
          "actualSource": "  String initializeUserAgent(final AbfsConfiguration abfsConfiguration) {\n    final String userAgentComment \u003d String.format(Locale.ROOT,\n            \"(JavaJRE %s; %s %s)\",\n            System.getProperty(JAVA_VERSION),\n            System.getProperty(OS_NAME)\n                    .replaceAll(SINGLE_WHITE_SPACE, EMPTY_STRING),\n            System.getProperty(OS_VERSION));\n    String customUserAgentId \u003d abfsConfiguration.getCustomUserAgentPrefix();\n    if (customUserAgentId !\u003d null \u0026\u0026 !customUserAgentId.isEmpty()) {\n      return String.format(Locale.ROOT, CLIENT_VERSION + \" %s %s\", userAgentComment, customUserAgentId);\n    }\n    return String.format(CLIENT_VERSION + \" %s\", userAgentComment);\n  }",
          "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsClient.java",
          "extendedDetails": {
            "oldValue": "[]",
            "newValue": "[abfsConfiguration-AbfsConfiguration(modifiers-final)]"
          }
        },
        {
          "type": "Ymodifierchange",
          "commitMessage": "HADOOP-15659. Code changes for bug fix and new tests.\nContributed by Da Zhou.\n",
          "commitDate": "17/09/18 12:54 PM",
          "commitName": "b54b0c1b676c616aef9574e4e88ea30c314c79dc",
          "commitAuthor": "Thomas Marquardt",
          "commitDateOld": "17/09/18 12:54 PM",
          "commitNameOld": "ce03a93f78c4d97ccb48a3906fcd77ad0ac756be",
          "commitAuthorOld": "Thomas Marquardt",
          "daysBetweenCommits": 0.0,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,10 +1,13 @@\n-  private String initializeUserAgent() {\n+  String initializeUserAgent(final AbfsConfiguration abfsConfiguration) {\n     final String userAgentComment \u003d String.format(Locale.ROOT,\n             \"(JavaJRE %s; %s %s)\",\n             System.getProperty(JAVA_VERSION),\n             System.getProperty(OS_NAME)\n                     .replaceAll(SINGLE_WHITE_SPACE, EMPTY_STRING),\n             System.getProperty(OS_VERSION));\n-\n+    String customUserAgentId \u003d abfsConfiguration.getCustomUserAgentPrefix();\n+    if (customUserAgentId !\u003d null \u0026\u0026 !customUserAgentId.isEmpty()) {\n+      return String.format(Locale.ROOT, CLIENT_VERSION + \" %s %s\", userAgentComment, customUserAgentId);\n+    }\n     return String.format(CLIENT_VERSION + \" %s\", userAgentComment);\n   }\n\\ No newline at end of file\n",
          "actualSource": "  String initializeUserAgent(final AbfsConfiguration abfsConfiguration) {\n    final String userAgentComment \u003d String.format(Locale.ROOT,\n            \"(JavaJRE %s; %s %s)\",\n            System.getProperty(JAVA_VERSION),\n            System.getProperty(OS_NAME)\n                    .replaceAll(SINGLE_WHITE_SPACE, EMPTY_STRING),\n            System.getProperty(OS_VERSION));\n    String customUserAgentId \u003d abfsConfiguration.getCustomUserAgentPrefix();\n    if (customUserAgentId !\u003d null \u0026\u0026 !customUserAgentId.isEmpty()) {\n      return String.format(Locale.ROOT, CLIENT_VERSION + \" %s %s\", userAgentComment, customUserAgentId);\n    }\n    return String.format(CLIENT_VERSION + \" %s\", userAgentComment);\n  }",
          "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsClient.java",
          "extendedDetails": {
            "oldValue": "[private]",
            "newValue": "[]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HADOOP-15659. Code changes for bug fix and new tests.\nContributed by Da Zhou.\n",
          "commitDate": "17/09/18 12:54 PM",
          "commitName": "b54b0c1b676c616aef9574e4e88ea30c314c79dc",
          "commitAuthor": "Thomas Marquardt",
          "commitDateOld": "17/09/18 12:54 PM",
          "commitNameOld": "ce03a93f78c4d97ccb48a3906fcd77ad0ac756be",
          "commitAuthorOld": "Thomas Marquardt",
          "daysBetweenCommits": 0.0,
          "commitsBetweenForRepo": 1,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,10 +1,13 @@\n-  private String initializeUserAgent() {\n+  String initializeUserAgent(final AbfsConfiguration abfsConfiguration) {\n     final String userAgentComment \u003d String.format(Locale.ROOT,\n             \"(JavaJRE %s; %s %s)\",\n             System.getProperty(JAVA_VERSION),\n             System.getProperty(OS_NAME)\n                     .replaceAll(SINGLE_WHITE_SPACE, EMPTY_STRING),\n             System.getProperty(OS_VERSION));\n-\n+    String customUserAgentId \u003d abfsConfiguration.getCustomUserAgentPrefix();\n+    if (customUserAgentId !\u003d null \u0026\u0026 !customUserAgentId.isEmpty()) {\n+      return String.format(Locale.ROOT, CLIENT_VERSION + \" %s %s\", userAgentComment, customUserAgentId);\n+    }\n     return String.format(CLIENT_VERSION + \" %s\", userAgentComment);\n   }\n\\ No newline at end of file\n",
          "actualSource": "  String initializeUserAgent(final AbfsConfiguration abfsConfiguration) {\n    final String userAgentComment \u003d String.format(Locale.ROOT,\n            \"(JavaJRE %s; %s %s)\",\n            System.getProperty(JAVA_VERSION),\n            System.getProperty(OS_NAME)\n                    .replaceAll(SINGLE_WHITE_SPACE, EMPTY_STRING),\n            System.getProperty(OS_VERSION));\n    String customUserAgentId \u003d abfsConfiguration.getCustomUserAgentPrefix();\n    if (customUserAgentId !\u003d null \u0026\u0026 !customUserAgentId.isEmpty()) {\n      return String.format(Locale.ROOT, CLIENT_VERSION + \" %s %s\", userAgentComment, customUserAgentId);\n    }\n    return String.format(CLIENT_VERSION + \" %s\", userAgentComment);\n  }",
          "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsClient.java",
          "extendedDetails": {}
        }
      ]
    },
    "ce03a93f78c4d97ccb48a3906fcd77ad0ac756be": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-15446. ABFS: tune imports \u0026 javadocs; stabilise tests.\nContributed by Steve Loughran and Da Zhou.\n",
      "commitDate": "17/09/18 12:54 PM",
      "commitName": "ce03a93f78c4d97ccb48a3906fcd77ad0ac756be",
      "commitAuthor": "Thomas Marquardt",
      "commitDateOld": "17/09/18 12:54 PM",
      "commitNameOld": "a271fd0eca75cef8b8ba940cdac8ad4fd21b4462",
      "commitAuthorOld": "Steve Loughran",
      "daysBetweenCommits": 0.0,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,10 +1,10 @@\n   private String initializeUserAgent() {\n     final String userAgentComment \u003d String.format(Locale.ROOT,\n             \"(JavaJRE %s; %s %s)\",\n-            System.getProperty(AbfsHttpConstants.JAVA_VERSION),\n-            System.getProperty(AbfsHttpConstants.OS_NAME)\n-                    .replaceAll(AbfsHttpConstants.SINGLE_WHITE_SPACE, AbfsHttpConstants.EMPTY_STRING),\n-            System.getProperty(AbfsHttpConstants.OS_VERSION));\n+            System.getProperty(JAVA_VERSION),\n+            System.getProperty(OS_NAME)\n+                    .replaceAll(SINGLE_WHITE_SPACE, EMPTY_STRING),\n+            System.getProperty(OS_VERSION));\n \n-    return String.format(AbfsHttpConstants.CLIENT_VERSION + \" %s\", userAgentComment);\n+    return String.format(CLIENT_VERSION + \" %s\", userAgentComment);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  private String initializeUserAgent() {\n    final String userAgentComment \u003d String.format(Locale.ROOT,\n            \"(JavaJRE %s; %s %s)\",\n            System.getProperty(JAVA_VERSION),\n            System.getProperty(OS_NAME)\n                    .replaceAll(SINGLE_WHITE_SPACE, EMPTY_STRING),\n            System.getProperty(OS_VERSION));\n\n    return String.format(CLIENT_VERSION + \" %s\", userAgentComment);\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsClient.java",
      "extendedDetails": {}
    },
    "f044deedbbfee0812316d587139cb828f27172e9": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-15407. HADOOP-15540. Support Windows Azure Storage - Blob file system \"ABFS\" in Hadoop: Core Commit.\n\nContributed by Shane Mainali, Thomas Marquardt, Zichen Sun, Georgi Chalakov, Esfandiar Manii, Amit Singh, Dana Kaban, Da Zhou, Junhua Gu, Saher Ahwal, Saurabh Pant, James Baker, Shaoyu Zhang, Lawrence Chen, Kevin Chen and Steve Loughran\n",
      "commitDate": "17/09/18 12:54 PM",
      "commitName": "f044deedbbfee0812316d587139cb828f27172e9",
      "commitAuthor": "Steve Loughran",
      "diff": "@@ -0,0 +1,10 @@\n+  private String initializeUserAgent() {\n+    final String userAgentComment \u003d String.format(Locale.ROOT,\n+            \"(JavaJRE %s; %s %s)\",\n+            System.getProperty(AbfsHttpConstants.JAVA_VERSION),\n+            System.getProperty(AbfsHttpConstants.OS_NAME)\n+                    .replaceAll(AbfsHttpConstants.SINGLE_WHITE_SPACE, AbfsHttpConstants.EMPTY_STRING),\n+            System.getProperty(AbfsHttpConstants.OS_VERSION));\n+\n+    return String.format(AbfsHttpConstants.CLIENT_VERSION + \" %s\", userAgentComment);\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private String initializeUserAgent() {\n    final String userAgentComment \u003d String.format(Locale.ROOT,\n            \"(JavaJRE %s; %s %s)\",\n            System.getProperty(AbfsHttpConstants.JAVA_VERSION),\n            System.getProperty(AbfsHttpConstants.OS_NAME)\n                    .replaceAll(AbfsHttpConstants.SINGLE_WHITE_SPACE, AbfsHttpConstants.EMPTY_STRING),\n            System.getProperty(AbfsHttpConstants.OS_VERSION));\n\n    return String.format(AbfsHttpConstants.CLIENT_VERSION + \" %s\", userAgentComment);\n  }",
      "path": "hadoop-tools/hadoop-azure/src/main/java/org/apache/hadoop/fs/azurebfs/services/AbfsClient.java"
    }
  }
}