{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "NameNodeRpcServer.java",
  "functionName": "addErasureCodingPolicies",
  "functionId": "addErasureCodingPolicies___policies-ErasureCodingPolicy[]",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeRpcServer.java",
  "functionStartLine": 2530,
  "functionEndLine": 2550,
  "numCommitsSeen": 296,
  "timeTaken": 6352,
  "changeHistory": [
    "a12f09ba3c4a3aa4c4558090c5e1b7bcaebe3b94",
    "08d996d3e9265efad737efad50cbc5b10a0202f8",
    "0b67436068899497e99c86f37fd4887ca188fae2",
    "a62be38a5e5d3a61dfb59054b3f5fd5b1b7053b3",
    "cb672a45a0bbd8950b9b5e304c2e03f516945903"
  ],
  "changeHistoryShort": {
    "a12f09ba3c4a3aa4c4558090c5e1b7bcaebe3b94": "Ymultichange(Yreturntypechange,Ybodychange)",
    "08d996d3e9265efad737efad50cbc5b10a0202f8": "Ybodychange",
    "0b67436068899497e99c86f37fd4887ca188fae2": "Ybodychange",
    "a62be38a5e5d3a61dfb59054b3f5fd5b1b7053b3": "Ymultichange(Yreturntypechange,Ybodychange)",
    "cb672a45a0bbd8950b9b5e304c2e03f516945903": "Yintroduced"
  },
  "changeHistoryDetails": {
    "a12f09ba3c4a3aa4c4558090c5e1b7bcaebe3b94": {
      "type": "Ymultichange(Yreturntypechange,Ybodychange)",
      "commitMessage": "HDFS-12447. Rename AddECPolicyResponse to AddErasureCodingPolicyResponse. Contributed by SammiChen.\n",
      "commitDate": "20/09/17 11:51 AM",
      "commitName": "a12f09ba3c4a3aa4c4558090c5e1b7bcaebe3b94",
      "commitAuthor": "Andrew Wang",
      "subchanges": [
        {
          "type": "Yreturntypechange",
          "commitMessage": "HDFS-12447. Rename AddECPolicyResponse to AddErasureCodingPolicyResponse. Contributed by SammiChen.\n",
          "commitDate": "20/09/17 11:51 AM",
          "commitName": "a12f09ba3c4a3aa4c4558090c5e1b7bcaebe3b94",
          "commitAuthor": "Andrew Wang",
          "commitDateOld": "15/09/17 11:08 AM",
          "commitNameOld": "de197fc1562c4d1c39d24738c7cf8a8869dcec9c",
          "commitAuthorOld": "Nathan Roberts",
          "daysBetweenCommits": 5.03,
          "commitsBetweenForRepo": 40,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,20 +1,21 @@\n-  public AddECPolicyResponse[] addErasureCodingPolicies(\n+  public AddErasureCodingPolicyResponse[] addErasureCodingPolicies(\n       ErasureCodingPolicy[] policies) throws IOException {\n     checkNNStartup();\n     namesystem.checkSuperuserPrivilege();\n     final CacheEntryWithPayload cacheEntry \u003d\n         RetryCache.waitForCompletion(retryCache, null);\n     if (cacheEntry !\u003d null \u0026\u0026 cacheEntry.isSuccess()) {\n-      return (AddECPolicyResponse[]) cacheEntry.getPayload();\n+      return (AddErasureCodingPolicyResponse[]) cacheEntry.getPayload();\n     }\n     boolean success \u003d false;\n-    AddECPolicyResponse[] responses \u003d new AddECPolicyResponse[0];\n+    AddErasureCodingPolicyResponse[] responses \u003d\n+        new AddErasureCodingPolicyResponse[0];\n     try {\n       responses \u003d\n           namesystem.addErasureCodingPolicies(policies, cacheEntry !\u003d null);\n       success \u003d true;\n     } finally {\n       RetryCache.setState(cacheEntry, success, responses);\n     }\n     return responses;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public AddErasureCodingPolicyResponse[] addErasureCodingPolicies(\n      ErasureCodingPolicy[] policies) throws IOException {\n    checkNNStartup();\n    namesystem.checkSuperuserPrivilege();\n    final CacheEntryWithPayload cacheEntry \u003d\n        RetryCache.waitForCompletion(retryCache, null);\n    if (cacheEntry !\u003d null \u0026\u0026 cacheEntry.isSuccess()) {\n      return (AddErasureCodingPolicyResponse[]) cacheEntry.getPayload();\n    }\n    boolean success \u003d false;\n    AddErasureCodingPolicyResponse[] responses \u003d\n        new AddErasureCodingPolicyResponse[0];\n    try {\n      responses \u003d\n          namesystem.addErasureCodingPolicies(policies, cacheEntry !\u003d null);\n      success \u003d true;\n    } finally {\n      RetryCache.setState(cacheEntry, success, responses);\n    }\n    return responses;\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeRpcServer.java",
          "extendedDetails": {
            "oldValue": "AddECPolicyResponse[]",
            "newValue": "AddErasureCodingPolicyResponse[]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-12447. Rename AddECPolicyResponse to AddErasureCodingPolicyResponse. Contributed by SammiChen.\n",
          "commitDate": "20/09/17 11:51 AM",
          "commitName": "a12f09ba3c4a3aa4c4558090c5e1b7bcaebe3b94",
          "commitAuthor": "Andrew Wang",
          "commitDateOld": "15/09/17 11:08 AM",
          "commitNameOld": "de197fc1562c4d1c39d24738c7cf8a8869dcec9c",
          "commitAuthorOld": "Nathan Roberts",
          "daysBetweenCommits": 5.03,
          "commitsBetweenForRepo": 40,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,20 +1,21 @@\n-  public AddECPolicyResponse[] addErasureCodingPolicies(\n+  public AddErasureCodingPolicyResponse[] addErasureCodingPolicies(\n       ErasureCodingPolicy[] policies) throws IOException {\n     checkNNStartup();\n     namesystem.checkSuperuserPrivilege();\n     final CacheEntryWithPayload cacheEntry \u003d\n         RetryCache.waitForCompletion(retryCache, null);\n     if (cacheEntry !\u003d null \u0026\u0026 cacheEntry.isSuccess()) {\n-      return (AddECPolicyResponse[]) cacheEntry.getPayload();\n+      return (AddErasureCodingPolicyResponse[]) cacheEntry.getPayload();\n     }\n     boolean success \u003d false;\n-    AddECPolicyResponse[] responses \u003d new AddECPolicyResponse[0];\n+    AddErasureCodingPolicyResponse[] responses \u003d\n+        new AddErasureCodingPolicyResponse[0];\n     try {\n       responses \u003d\n           namesystem.addErasureCodingPolicies(policies, cacheEntry !\u003d null);\n       success \u003d true;\n     } finally {\n       RetryCache.setState(cacheEntry, success, responses);\n     }\n     return responses;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public AddErasureCodingPolicyResponse[] addErasureCodingPolicies(\n      ErasureCodingPolicy[] policies) throws IOException {\n    checkNNStartup();\n    namesystem.checkSuperuserPrivilege();\n    final CacheEntryWithPayload cacheEntry \u003d\n        RetryCache.waitForCompletion(retryCache, null);\n    if (cacheEntry !\u003d null \u0026\u0026 cacheEntry.isSuccess()) {\n      return (AddErasureCodingPolicyResponse[]) cacheEntry.getPayload();\n    }\n    boolean success \u003d false;\n    AddErasureCodingPolicyResponse[] responses \u003d\n        new AddErasureCodingPolicyResponse[0];\n    try {\n      responses \u003d\n          namesystem.addErasureCodingPolicies(policies, cacheEntry !\u003d null);\n      success \u003d true;\n    } finally {\n      RetryCache.setState(cacheEntry, success, responses);\n    }\n    return responses;\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeRpcServer.java",
          "extendedDetails": {}
        }
      ]
    },
    "08d996d3e9265efad737efad50cbc5b10a0202f8": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-12395. Support erasure coding policy operations in namenode edit log. Contributed by Sammi Chen\n",
      "commitDate": "14/09/17 6:43 PM",
      "commitName": "08d996d3e9265efad737efad50cbc5b10a0202f8",
      "commitAuthor": "Kai Zheng",
      "commitDateOld": "14/09/17 11:17 AM",
      "commitNameOld": "65a941008d4bbf906772399d3f035f2a0da5abfa",
      "commitAuthorOld": "Arpit Agarwal",
      "daysBetweenCommits": 0.31,
      "commitsBetweenForRepo": 8,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,6 +1,20 @@\n   public AddECPolicyResponse[] addErasureCodingPolicies(\n       ErasureCodingPolicy[] policies) throws IOException {\n     checkNNStartup();\n     namesystem.checkSuperuserPrivilege();\n-    return namesystem.addErasureCodingPolicies(policies);\n+    final CacheEntryWithPayload cacheEntry \u003d\n+        RetryCache.waitForCompletion(retryCache, null);\n+    if (cacheEntry !\u003d null \u0026\u0026 cacheEntry.isSuccess()) {\n+      return (AddECPolicyResponse[]) cacheEntry.getPayload();\n+    }\n+    boolean success \u003d false;\n+    AddECPolicyResponse[] responses \u003d new AddECPolicyResponse[0];\n+    try {\n+      responses \u003d\n+          namesystem.addErasureCodingPolicies(policies, cacheEntry !\u003d null);\n+      success \u003d true;\n+    } finally {\n+      RetryCache.setState(cacheEntry, success, responses);\n+    }\n+    return responses;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public AddECPolicyResponse[] addErasureCodingPolicies(\n      ErasureCodingPolicy[] policies) throws IOException {\n    checkNNStartup();\n    namesystem.checkSuperuserPrivilege();\n    final CacheEntryWithPayload cacheEntry \u003d\n        RetryCache.waitForCompletion(retryCache, null);\n    if (cacheEntry !\u003d null \u0026\u0026 cacheEntry.isSuccess()) {\n      return (AddECPolicyResponse[]) cacheEntry.getPayload();\n    }\n    boolean success \u003d false;\n    AddECPolicyResponse[] responses \u003d new AddECPolicyResponse[0];\n    try {\n      responses \u003d\n          namesystem.addErasureCodingPolicies(policies, cacheEntry !\u003d null);\n      success \u003d true;\n    } finally {\n      RetryCache.setState(cacheEntry, success, responses);\n    }\n    return responses;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeRpcServer.java",
      "extendedDetails": {}
    },
    "0b67436068899497e99c86f37fd4887ca188fae2": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-12306. Add audit log for some erasure coding operations. Contributed by Huafeng Wang\n",
      "commitDate": "07/08/17 4:30 AM",
      "commitName": "0b67436068899497e99c86f37fd4887ca188fae2",
      "commitAuthor": "Kai Zheng",
      "commitDateOld": "02/08/17 12:12 PM",
      "commitNameOld": "12e44e7bdaf53d3720a89d32f0cc2717241bd6b2",
      "commitAuthorOld": "Chris Douglas",
      "daysBetweenCommits": 4.68,
      "commitsBetweenForRepo": 23,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,6 +1,6 @@\n   public AddECPolicyResponse[] addErasureCodingPolicies(\n       ErasureCodingPolicy[] policies) throws IOException {\n     checkNNStartup();\n     namesystem.checkSuperuserPrivilege();\n-    return namesystem.addECPolicies(policies);\n+    return namesystem.addErasureCodingPolicies(policies);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public AddECPolicyResponse[] addErasureCodingPolicies(\n      ErasureCodingPolicy[] policies) throws IOException {\n    checkNNStartup();\n    namesystem.checkSuperuserPrivilege();\n    return namesystem.addErasureCodingPolicies(policies);\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeRpcServer.java",
      "extendedDetails": {}
    },
    "a62be38a5e5d3a61dfb59054b3f5fd5b1b7053b3": {
      "type": "Ymultichange(Yreturntypechange,Ybodychange)",
      "commitMessage": "HDFS-11793. Allow to enable user defined erasure coding policy. Contributed by Sammi Chen\n",
      "commitDate": "24/05/17 3:45 AM",
      "commitName": "a62be38a5e5d3a61dfb59054b3f5fd5b1b7053b3",
      "commitAuthor": "Kai Zheng",
      "subchanges": [
        {
          "type": "Yreturntypechange",
          "commitMessage": "HDFS-11793. Allow to enable user defined erasure coding policy. Contributed by Sammi Chen\n",
          "commitDate": "24/05/17 3:45 AM",
          "commitName": "a62be38a5e5d3a61dfb59054b3f5fd5b1b7053b3",
          "commitAuthor": "Kai Zheng",
          "commitDateOld": "23/05/17 4:33 AM",
          "commitNameOld": "1b5451bf054c335188e4cd66f7b4a1d80013e86d",
          "commitAuthorOld": "Rakesh Radhakrishnan",
          "daysBetweenCommits": 0.97,
          "commitsBetweenForRepo": 2,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,5 +1,6 @@\n-  public AddingECPolicyResponse[] addErasureCodingPolicies(\n+  public AddECPolicyResponse[] addErasureCodingPolicies(\n       ErasureCodingPolicy[] policies) throws IOException {\n     checkNNStartup();\n+    namesystem.checkSuperuserPrivilege();\n     return namesystem.addECPolicies(policies);\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public AddECPolicyResponse[] addErasureCodingPolicies(\n      ErasureCodingPolicy[] policies) throws IOException {\n    checkNNStartup();\n    namesystem.checkSuperuserPrivilege();\n    return namesystem.addECPolicies(policies);\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeRpcServer.java",
          "extendedDetails": {
            "oldValue": "AddingECPolicyResponse[]",
            "newValue": "AddECPolicyResponse[]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-11793. Allow to enable user defined erasure coding policy. Contributed by Sammi Chen\n",
          "commitDate": "24/05/17 3:45 AM",
          "commitName": "a62be38a5e5d3a61dfb59054b3f5fd5b1b7053b3",
          "commitAuthor": "Kai Zheng",
          "commitDateOld": "23/05/17 4:33 AM",
          "commitNameOld": "1b5451bf054c335188e4cd66f7b4a1d80013e86d",
          "commitAuthorOld": "Rakesh Radhakrishnan",
          "daysBetweenCommits": 0.97,
          "commitsBetweenForRepo": 2,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,5 +1,6 @@\n-  public AddingECPolicyResponse[] addErasureCodingPolicies(\n+  public AddECPolicyResponse[] addErasureCodingPolicies(\n       ErasureCodingPolicy[] policies) throws IOException {\n     checkNNStartup();\n+    namesystem.checkSuperuserPrivilege();\n     return namesystem.addECPolicies(policies);\n   }\n\\ No newline at end of file\n",
          "actualSource": "  public AddECPolicyResponse[] addErasureCodingPolicies(\n      ErasureCodingPolicy[] policies) throws IOException {\n    checkNNStartup();\n    namesystem.checkSuperuserPrivilege();\n    return namesystem.addECPolicies(policies);\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeRpcServer.java",
          "extendedDetails": {}
        }
      ]
    },
    "cb672a45a0bbd8950b9b5e304c2e03f516945903": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-11605. Allow user to customize new erasure code policies. Contributed by Huafeng Wang\n",
      "commitDate": "27/04/17 10:18 PM",
      "commitName": "cb672a45a0bbd8950b9b5e304c2e03f516945903",
      "commitAuthor": "Kai Zheng",
      "diff": "@@ -0,0 +1,5 @@\n+  public AddingECPolicyResponse[] addErasureCodingPolicies(\n+      ErasureCodingPolicy[] policies) throws IOException {\n+    checkNNStartup();\n+    return namesystem.addECPolicies(policies);\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public AddingECPolicyResponse[] addErasureCodingPolicies(\n      ErasureCodingPolicy[] policies) throws IOException {\n    checkNNStartup();\n    return namesystem.addECPolicies(policies);\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeRpcServer.java"
    }
  }
}