{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "NodeManager.java",
  "functionName": "handle",
  "functionId": "handle___event-NodeManagerEvent",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeManager.java",
  "functionStartLine": 971,
  "functionEndLine": 982,
  "numCommitsSeen": 111,
  "timeTaken": 2415,
  "changeHistory": [
    "63f7322522e0ab223ceb91440636eb62ca0a3e41",
    "db1e0c1eefc1f6ad8fd317088d548c7814ea7aff",
    "fbb55784d93e1a819daf55d936e864d344579cbf",
    "2e3b56f6e907f15f7c6caaad37d37b9e0ee89963",
    "2cd41855d51fd18955a1ab187900ba02c6a6cfa9"
  ],
  "changeHistoryShort": {
    "63f7322522e0ab223ceb91440636eb62ca0a3e41": "Ybodychange",
    "db1e0c1eefc1f6ad8fd317088d548c7814ea7aff": "Ybodychange",
    "fbb55784d93e1a819daf55d936e864d344579cbf": "Ybodychange",
    "2e3b56f6e907f15f7c6caaad37d37b9e0ee89963": "Ybodychange",
    "2cd41855d51fd18955a1ab187900ba02c6a6cfa9": "Yintroduced"
  },
  "changeHistoryDetails": {
    "63f7322522e0ab223ceb91440636eb62ca0a3e41": {
      "type": "Ybodychange",
      "commitMessage": "YARN-6368. Decommissioning an NM results in a -1 exit code (miklos.szegedi@cloudera.com via rkanter)\n",
      "commitDate": "07/04/17 2:28 PM",
      "commitName": "63f7322522e0ab223ceb91440636eb62ca0a3e41",
      "commitAuthor": "Robert Kanter",
      "commitDateOld": "06/01/17 6:41 PM",
      "commitNameOld": "a59df15757fac7f917cb96fc8fcfeb7017475e4f",
      "commitAuthorOld": "Naganarasimha",
      "daysBetweenCommits": 90.78,
      "commitsBetweenForRepo": 508,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,12 +1,12 @@\n   public void handle(NodeManagerEvent event) {\n     switch (event.getType()) {\n     case SHUTDOWN:\n-      shutDown();\n+      shutDown(NodeManagerStatus.NO_ERROR.getExitCode());\n       break;\n     case RESYNC:\n       resyncWithRM();\n       break;\n     default:\n       LOG.warn(\"Invalid shutdown event \" + event.getType() + \". Ignoring.\");\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void handle(NodeManagerEvent event) {\n    switch (event.getType()) {\n    case SHUTDOWN:\n      shutDown(NodeManagerStatus.NO_ERROR.getExitCode());\n      break;\n    case RESYNC:\n      resyncWithRM();\n      break;\n    default:\n      LOG.warn(\"Invalid shutdown event \" + event.getType() + \". Ignoring.\");\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeManager.java",
      "extendedDetails": {}
    },
    "db1e0c1eefc1f6ad8fd317088d548c7814ea7aff": {
      "type": "Ybodychange",
      "commitMessage": "YARN-688. Fixed NodeManager to properly cleanup containers when it is shut down. Contributed by Jian He.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1506814 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/07/13 9:14 PM",
      "commitName": "db1e0c1eefc1f6ad8fd317088d548c7814ea7aff",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "18/06/13 4:19 PM",
      "commitNameOld": "243bcd367ff3130d74676280233041f88aca62a5",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 36.2,
      "commitsBetweenForRepo": 191,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,12 +1,12 @@\n   public void handle(NodeManagerEvent event) {\n     switch (event.getType()) {\n     case SHUTDOWN:\n-      stop();\n+      shutDown();\n       break;\n     case RESYNC:\n       resyncWithRM();\n       break;\n     default:\n       LOG.warn(\"Invalid shutdown event \" + event.getType() + \". Ignoring.\");\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void handle(NodeManagerEvent event) {\n    switch (event.getType()) {\n    case SHUTDOWN:\n      shutDown();\n      break;\n    case RESYNC:\n      resyncWithRM();\n      break;\n    default:\n      LOG.warn(\"Invalid shutdown event \" + event.getType() + \". Ignoring.\");\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeManager.java",
      "extendedDetails": {}
    },
    "fbb55784d93e1a819daf55d936e864d344579cbf": {
      "type": "Ybodychange",
      "commitMessage": "YARN-562. Modified NM to reject any containers allocated by a previous ResourceManager. Contributed by Jian He.\nMAPREDUCE-5167. Update MR App after YARN-562 to use the new builder API for the container. Contributed by Jian He.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1476034 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "25/04/13 8:50 PM",
      "commitName": "fbb55784d93e1a819daf55d936e864d344579cbf",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "10/04/13 7:00 PM",
      "commitNameOld": "2e3b56f6e907f15f7c6caaad37d37b9e0ee89963",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 15.08,
      "commitsBetweenForRepo": 83,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,12 +1,12 @@\n   public void handle(NodeManagerEvent event) {\n     switch (event.getType()) {\n     case SHUTDOWN:\n       stop();\n       break;\n     case RESYNC:\n-      cleanupContainersOnResync();\n+      resyncWithRM();\n       break;\n     default:\n       LOG.warn(\"Invalid shutdown event \" + event.getType() + \". Ignoring.\");\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void handle(NodeManagerEvent event) {\n    switch (event.getType()) {\n    case SHUTDOWN:\n      stop();\n      break;\n    case RESYNC:\n      resyncWithRM();\n      break;\n    default:\n      LOG.warn(\"Invalid shutdown event \" + event.getType() + \". Ignoring.\");\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeManager.java",
      "extendedDetails": {}
    },
    "2e3b56f6e907f15f7c6caaad37d37b9e0ee89963": {
      "type": "Ybodychange",
      "commitMessage": "YARN-495. Changed NM reboot behaviour to be a simple resync - kill all containers  and re-register with RM. Contributed by Jian He.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1466752 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "10/04/13 7:00 PM",
      "commitName": "2e3b56f6e907f15f7c6caaad37d37b9e0ee89963",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "03/04/13 9:57 AM",
      "commitNameOld": "3e9200ddde4858be8ecdd8347b5fee63ed83df84",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 7.38,
      "commitsBetweenForRepo": 42,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,13 +1,12 @@\n   public void handle(NodeManagerEvent event) {\n     switch (event.getType()) {\n     case SHUTDOWN:\n       stop();\n       break;\n-    case REBOOT:\n-      stop();\n-      reboot();\n+    case RESYNC:\n+      cleanupContainersOnResync();\n       break;\n     default:\n       LOG.warn(\"Invalid shutdown event \" + event.getType() + \". Ignoring.\");\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void handle(NodeManagerEvent event) {\n    switch (event.getType()) {\n    case SHUTDOWN:\n      stop();\n      break;\n    case RESYNC:\n      cleanupContainersOnResync();\n      break;\n    default:\n      LOG.warn(\"Invalid shutdown event \" + event.getType() + \". Ignoring.\");\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeManager.java",
      "extendedDetails": {}
    },
    "2cd41855d51fd18955a1ab187900ba02c6a6cfa9": {
      "type": "Yintroduced",
      "commitMessage": "YARN-170. Change NodeManager stop to be reentrant. Contributed by Sandy Ryza.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1429796 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "07/01/13 5:43 AM",
      "commitName": "2cd41855d51fd18955a1ab187900ba02c6a6cfa9",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "diff": "@@ -0,0 +1,13 @@\n+  public void handle(NodeManagerEvent event) {\n+    switch (event.getType()) {\n+    case SHUTDOWN:\n+      stop();\n+      break;\n+    case REBOOT:\n+      stop();\n+      reboot();\n+      break;\n+    default:\n+      LOG.warn(\"Invalid shutdown event \" + event.getType() + \". Ignoring.\");\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public void handle(NodeManagerEvent event) {\n    switch (event.getType()) {\n    case SHUTDOWN:\n      stop();\n      break;\n    case REBOOT:\n      stop();\n      reboot();\n      break;\n    default:\n      LOG.warn(\"Invalid shutdown event \" + event.getType() + \". Ignoring.\");\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-nodemanager/src/main/java/org/apache/hadoop/yarn/server/nodemanager/NodeManager.java"
    }
  }
}