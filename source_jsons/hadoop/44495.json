{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "ApplicationMaster.java",
  "functionName": "publishContainerStartFailedEvent",
  "functionId": "publishContainerStartFailedEvent___containerId-ContainerId(modifiers-final)__diagnostics-String",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-applications/hadoop-yarn-applications-distributedshell/src/main/java/org/apache/hadoop/yarn/applications/distributedshell/ApplicationMaster.java",
  "functionStartLine": 1832,
  "functionEndLine": 1855,
  "numCommitsSeen": 113,
  "timeTaken": 1080,
  "changeHistory": [
    "1ef0a1db1d6a412b2a26782329a8325635866d0a"
  ],
  "changeHistoryShort": {
    "1ef0a1db1d6a412b2a26782329a8325635866d0a": "Yintroduced"
  },
  "changeHistoryDetails": {
    "1ef0a1db1d6a412b2a26782329a8325635866d0a": {
      "type": "Yintroduced",
      "commitMessage": "YARN-7894. Improve ATS response for DShell DS_CONTAINER when container launch fails. Contributed by Chandni Singh\n",
      "commitDate": "08/05/18 1:49 PM",
      "commitName": "1ef0a1db1d6a412b2a26782329a8325635866d0a",
      "commitAuthor": "Billie Rinaldi",
      "diff": "@@ -0,0 +1,24 @@\n+  private void publishContainerStartFailedEvent(final ContainerId containerId,\n+      String diagnostics) {\n+    final TimelineEntity entityV1 \u003d new TimelineEntity();\n+    entityV1.setEntityId(containerId.toString());\n+    entityV1.setEntityType(DSEntity.DS_CONTAINER.toString());\n+    entityV1.setDomainId(domainId);\n+    entityV1.addPrimaryFilter(USER_TIMELINE_FILTER_NAME, appSubmitterUgi\n+        .getShortUserName());\n+    entityV1.addPrimaryFilter(APPID_TIMELINE_FILTER_NAME,\n+        containerId.getApplicationAttemptId().getApplicationId().toString());\n+\n+    TimelineEvent eventV1 \u003d new TimelineEvent();\n+    eventV1.setTimestamp(System.currentTimeMillis());\n+    eventV1.setEventType(DSEvent.DS_CONTAINER_END.toString());\n+    eventV1.addEventInfo(DIAGNOSTICS, diagnostics);\n+    entityV1.addEvent(eventV1);\n+    try {\n+      processTimelineResponseErrors(putContainerEntity(timelineClient,\n+          containerId.getApplicationAttemptId(), entityV1));\n+    } catch (YarnException | IOException | ClientHandlerException e) {\n+      LOG.error(\"Container end event could not be published for {}\",\n+          containerId, e);\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private void publishContainerStartFailedEvent(final ContainerId containerId,\n      String diagnostics) {\n    final TimelineEntity entityV1 \u003d new TimelineEntity();\n    entityV1.setEntityId(containerId.toString());\n    entityV1.setEntityType(DSEntity.DS_CONTAINER.toString());\n    entityV1.setDomainId(domainId);\n    entityV1.addPrimaryFilter(USER_TIMELINE_FILTER_NAME, appSubmitterUgi\n        .getShortUserName());\n    entityV1.addPrimaryFilter(APPID_TIMELINE_FILTER_NAME,\n        containerId.getApplicationAttemptId().getApplicationId().toString());\n\n    TimelineEvent eventV1 \u003d new TimelineEvent();\n    eventV1.setTimestamp(System.currentTimeMillis());\n    eventV1.setEventType(DSEvent.DS_CONTAINER_END.toString());\n    eventV1.addEventInfo(DIAGNOSTICS, diagnostics);\n    entityV1.addEvent(eventV1);\n    try {\n      processTimelineResponseErrors(putContainerEntity(timelineClient,\n          containerId.getApplicationAttemptId(), entityV1));\n    } catch (YarnException | IOException | ClientHandlerException e) {\n      LOG.error(\"Container end event could not be published for {}\",\n          containerId, e);\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-applications/hadoop-yarn-applications-distributedshell/src/main/java/org/apache/hadoop/yarn/applications/distributedshell/ApplicationMaster.java"
    }
  }
}