{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "EntityGroupFSTimelineStore.java",
  "functionName": "loadDetailLog",
  "functionId": "loadDetailLog___tdm-TimelineDataManager__groupId-TimelineEntityGroupId",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-timeline-pluginstorage/src/main/java/org/apache/hadoop/yarn/server/timeline/EntityGroupFSTimelineStore.java",
  "functionStartLine": 828,
  "functionEndLine": 850,
  "numCommitsSeen": 17,
  "timeTaken": 791,
  "changeHistory": [
    "673e5e02feba9171498a518c06ae70639c5f8854"
  ],
  "changeHistoryShort": {
    "673e5e02feba9171498a518c06ae70639c5f8854": "Yintroduced"
  },
  "changeHistoryDetails": {
    "673e5e02feba9171498a518c06ae70639c5f8854": {
      "type": "Yintroduced",
      "commitMessage": "YARN-5314. Fixed a ConcurrentModificationException in ATS v1.5 EntityGroupFSTimelineStore. Contributed by Li Lu.\n",
      "commitDate": "07/07/16 10:37 PM",
      "commitName": "673e5e02feba9171498a518c06ae70639c5f8854",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "diff": "@@ -0,0 +1,23 @@\n+    synchronized void loadDetailLog(TimelineDataManager tdm,\n+        TimelineEntityGroupId groupId) throws IOException {\n+      List\u003cLogInfo\u003e removeList \u003d new ArrayList\u003c\u003e();\n+      for (LogInfo log : detailLogs) {\n+        LOG.debug(\"Try refresh logs for {}\", log.getFilename());\n+        // Only refresh the log that matches the cache id\n+        if (log.matchesGroupId(groupId)) {\n+          Path dirPath \u003d getAppDirPath();\n+          if (fs.exists(log.getPath(dirPath))) {\n+            LOG.debug(\"Refresh logs for cache id {}\", groupId);\n+            log.parseForStore(tdm, dirPath, isDone(),\n+                jsonFactory, objMapper, fs);\n+          } else {\n+            // The log may have been removed, remove the log\n+            removeList.add(log);\n+            LOG.info(\n+                \"File {} no longer exists, removing it from log list\",\n+                log.getPath(dirPath));\n+          }\n+        }\n+      }\n+      detailLogs.removeAll(removeList);\n+    }\n\\ No newline at end of file\n",
      "actualSource": "    synchronized void loadDetailLog(TimelineDataManager tdm,\n        TimelineEntityGroupId groupId) throws IOException {\n      List\u003cLogInfo\u003e removeList \u003d new ArrayList\u003c\u003e();\n      for (LogInfo log : detailLogs) {\n        LOG.debug(\"Try refresh logs for {}\", log.getFilename());\n        // Only refresh the log that matches the cache id\n        if (log.matchesGroupId(groupId)) {\n          Path dirPath \u003d getAppDirPath();\n          if (fs.exists(log.getPath(dirPath))) {\n            LOG.debug(\"Refresh logs for cache id {}\", groupId);\n            log.parseForStore(tdm, dirPath, isDone(),\n                jsonFactory, objMapper, fs);\n          } else {\n            // The log may have been removed, remove the log\n            removeList.add(log);\n            LOG.info(\n                \"File {} no longer exists, removing it from log list\",\n                log.getPath(dirPath));\n          }\n        }\n      }\n      detailLogs.removeAll(removeList);\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-timeline-pluginstorage/src/main/java/org/apache/hadoop/yarn/server/timeline/EntityGroupFSTimelineStore.java"
    }
  }
}