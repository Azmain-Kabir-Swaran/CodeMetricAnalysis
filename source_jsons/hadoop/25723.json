{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "KillAMPreemptionPolicy.java",
  "functionName": "preempt",
  "functionId": "preempt___ctxt-Context__preemptionRequests-PreemptionMessage",
  "sourceFilePath": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/rm/preemption/KillAMPreemptionPolicy.java",
  "functionStartLine": 54,
  "functionEndLine": 70,
  "numCommitsSeen": 4,
  "timeTaken": 1047,
  "changeHistory": [
    "f74e44635596276f35b7127f99bc5ab96ab534ed",
    "9ca394d54dd24e67867c845a58150f6b51761512"
  ],
  "changeHistoryShort": {
    "f74e44635596276f35b7127f99bc5ab96ab534ed": "Ybodychange",
    "9ca394d54dd24e67867c845a58150f6b51761512": "Yintroduced"
  },
  "changeHistoryDetails": {
    "f74e44635596276f35b7127f99bc5ab96ab534ed": {
      "type": "Ybodychange",
      "commitMessage": "MAPREDUCE-5867. Fix NPE in KillAMPreemptionPolicy related to ProportionalCapacityPreemptionPolicy. Contributed by Sunil G.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1595754 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "18/05/14 11:42 PM",
      "commitName": "f74e44635596276f35b7127f99bc5ab96ab534ed",
      "commitAuthor": "Devarajulu K",
      "commitDateOld": "28/12/13 1:58 PM",
      "commitNameOld": "47cca0cb6d1f4e5979d11d9a624b005e6e666f2f",
      "commitAuthorOld": "Christopher Douglas",
      "daysBetweenCommits": 141.36,
      "commitsBetweenForRepo": 1008,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,12 +1,17 @@\n   public void preempt(Context ctxt, PreemptionMessage preemptionRequests) {\n     // for both strict and negotiable preemption requests kill the\n     // container\n-    for (PreemptionContainer c :\n-        preemptionRequests.getStrictContract().getContainers()) {\n-      killContainer(ctxt, c);\n+    StrictPreemptionContract strictContract \u003d preemptionRequests\n+        .getStrictContract();\n+    if (strictContract !\u003d null) {\n+      for (PreemptionContainer c : strictContract.getContainers()) {\n+        killContainer(ctxt, c);\n+      }\n     }\n-    for (PreemptionContainer c :\n-         preemptionRequests.getContract().getContainers()) {\n-       killContainer(ctxt, c);\n+    PreemptionContract contract \u003d preemptionRequests.getContract();\n+    if (contract !\u003d null) {\n+      for (PreemptionContainer c : contract.getContainers()) {\n+        killContainer(ctxt, c);\n+      }\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void preempt(Context ctxt, PreemptionMessage preemptionRequests) {\n    // for both strict and negotiable preemption requests kill the\n    // container\n    StrictPreemptionContract strictContract \u003d preemptionRequests\n        .getStrictContract();\n    if (strictContract !\u003d null) {\n      for (PreemptionContainer c : strictContract.getContainers()) {\n        killContainer(ctxt, c);\n      }\n    }\n    PreemptionContract contract \u003d preemptionRequests.getContract();\n    if (contract !\u003d null) {\n      for (PreemptionContainer c : contract.getContainers()) {\n        killContainer(ctxt, c);\n      }\n    }\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/rm/preemption/KillAMPreemptionPolicy.java",
      "extendedDetails": {}
    },
    "9ca394d54dd24e67867c845a58150f6b51761512": {
      "type": "Yintroduced",
      "commitMessage": "MAPREDUCE-5189. Add policies and wiring to respond to preemption requests\nfrom YARN. Contributed by Carlo Curino.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1551748 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "17/12/13 2:54 PM",
      "commitName": "9ca394d54dd24e67867c845a58150f6b51761512",
      "commitAuthor": "Christopher Douglas",
      "diff": "@@ -0,0 +1,12 @@\n+  public void preempt(Context ctxt, PreemptionMessage preemptionRequests) {\n+    // for both strict and negotiable preemption requests kill the\n+    // container\n+    for (PreemptionContainer c :\n+        preemptionRequests.getStrictContract().getContainers()) {\n+      killContainer(ctxt, c);\n+    }\n+    for (PreemptionContainer c :\n+         preemptionRequests.getContract().getContainers()) {\n+       killContainer(ctxt, c);\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public void preempt(Context ctxt, PreemptionMessage preemptionRequests) {\n    // for both strict and negotiable preemption requests kill the\n    // container\n    for (PreemptionContainer c :\n        preemptionRequests.getStrictContract().getContainers()) {\n      killContainer(ctxt, c);\n    }\n    for (PreemptionContainer c :\n         preemptionRequests.getContract().getContainers()) {\n       killContainer(ctxt, c);\n    }\n  }",
      "path": "hadoop-mapreduce-project/hadoop-mapreduce-client/hadoop-mapreduce-client-app/src/main/java/org/apache/hadoop/mapreduce/v2/app/rm/preemption/KillAMPreemptionPolicy.java"
    }
  }
}