{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "DominantResourceFairnessPolicy.java",
  "functionName": "compareRatios",
  "functionId": "compareRatios___ratios1-float[][]__ratios2-float[][]__index-int",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/fair/policies/DominantResourceFairnessPolicy.java",
  "functionStartLine": 346,
  "functionEndLine": 358,
  "numCommitsSeen": 37,
  "timeTaken": 3544,
  "changeHistory": [
    "09b476e6dabe8039a41dde7930c8a9c0d14bb750",
    "c1b635ed4826b0f9c8574d262dfeb13fa5ceb650"
  ],
  "changeHistoryShort": {
    "09b476e6dabe8039a41dde7930c8a9c0d14bb750": "Ymultichange(Yrename,Yparameterchange,Ymodifierchange,Ybodychange)",
    "c1b635ed4826b0f9c8574d262dfeb13fa5ceb650": "Yintroduced"
  },
  "changeHistoryDetails": {
    "09b476e6dabe8039a41dde7930c8a9c0d14bb750": {
      "type": "Ymultichange(Yrename,Yparameterchange,Ymodifierchange,Ybodychange)",
      "commitMessage": "YARN-6612. Update fair scheduler policies to be aware of resource types. (Contributed by Daniel Templeton via Yufei Gu)\n",
      "commitDate": "14/09/17 11:23 AM",
      "commitName": "09b476e6dabe8039a41dde7930c8a9c0d14bb750",
      "commitAuthor": "Yufei Gu",
      "subchanges": [
        {
          "type": "Yrename",
          "commitMessage": "YARN-6612. Update fair scheduler policies to be aware of resource types. (Contributed by Daniel Templeton via Yufei Gu)\n",
          "commitDate": "14/09/17 11:23 AM",
          "commitName": "09b476e6dabe8039a41dde7930c8a9c0d14bb750",
          "commitAuthor": "Yufei Gu",
          "commitDateOld": "24/07/17 12:13 PM",
          "commitNameOld": "bb30bd3771442df253cbe55c448379580bd5ad07",
          "commitAuthorOld": "Daniel Templeton",
          "daysBetweenCommits": 51.97,
          "commitsBetweenForRepo": 500,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,11 +1,13 @@\n-    private int compareShares(ResourceWeights shares1, ResourceWeights shares2,\n-        ResourceType[] resourceOrder1, ResourceType[] resourceOrder2) {\n-      for (int i \u003d 0; i \u003c resourceOrder1.length; i++) {\n-        int ret \u003d (int)Math.signum(shares1.getWeight(resourceOrder1[i])\n-            - shares2.getWeight(resourceOrder2[i]));\n+    int compareRatios(float[][] ratios1, float[][] ratios2, int index) {\n+      int ret \u003d 0;\n+\n+      for (int i \u003d 0; i \u003c ratios1.length; i++) {\n+        ret \u003d (int) Math.signum(ratios1[i][index] - ratios2[i][index]);\n+\n         if (ret !\u003d 0) {\n-          return ret;\n+          break;\n         }\n       }\n-      return 0;\n+\n+      return ret;\n     }\n\\ No newline at end of file\n",
          "actualSource": "    int compareRatios(float[][] ratios1, float[][] ratios2, int index) {\n      int ret \u003d 0;\n\n      for (int i \u003d 0; i \u003c ratios1.length; i++) {\n        ret \u003d (int) Math.signum(ratios1[i][index] - ratios2[i][index]);\n\n        if (ret !\u003d 0) {\n          break;\n        }\n      }\n\n      return ret;\n    }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/fair/policies/DominantResourceFairnessPolicy.java",
          "extendedDetails": {
            "oldValue": "compareShares",
            "newValue": "compareRatios"
          }
        },
        {
          "type": "Yparameterchange",
          "commitMessage": "YARN-6612. Update fair scheduler policies to be aware of resource types. (Contributed by Daniel Templeton via Yufei Gu)\n",
          "commitDate": "14/09/17 11:23 AM",
          "commitName": "09b476e6dabe8039a41dde7930c8a9c0d14bb750",
          "commitAuthor": "Yufei Gu",
          "commitDateOld": "24/07/17 12:13 PM",
          "commitNameOld": "bb30bd3771442df253cbe55c448379580bd5ad07",
          "commitAuthorOld": "Daniel Templeton",
          "daysBetweenCommits": 51.97,
          "commitsBetweenForRepo": 500,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,11 +1,13 @@\n-    private int compareShares(ResourceWeights shares1, ResourceWeights shares2,\n-        ResourceType[] resourceOrder1, ResourceType[] resourceOrder2) {\n-      for (int i \u003d 0; i \u003c resourceOrder1.length; i++) {\n-        int ret \u003d (int)Math.signum(shares1.getWeight(resourceOrder1[i])\n-            - shares2.getWeight(resourceOrder2[i]));\n+    int compareRatios(float[][] ratios1, float[][] ratios2, int index) {\n+      int ret \u003d 0;\n+\n+      for (int i \u003d 0; i \u003c ratios1.length; i++) {\n+        ret \u003d (int) Math.signum(ratios1[i][index] - ratios2[i][index]);\n+\n         if (ret !\u003d 0) {\n-          return ret;\n+          break;\n         }\n       }\n-      return 0;\n+\n+      return ret;\n     }\n\\ No newline at end of file\n",
          "actualSource": "    int compareRatios(float[][] ratios1, float[][] ratios2, int index) {\n      int ret \u003d 0;\n\n      for (int i \u003d 0; i \u003c ratios1.length; i++) {\n        ret \u003d (int) Math.signum(ratios1[i][index] - ratios2[i][index]);\n\n        if (ret !\u003d 0) {\n          break;\n        }\n      }\n\n      return ret;\n    }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/fair/policies/DominantResourceFairnessPolicy.java",
          "extendedDetails": {
            "oldValue": "[shares1-ResourceWeights, shares2-ResourceWeights, resourceOrder1-ResourceType[], resourceOrder2-ResourceType[]]",
            "newValue": "[ratios1-float[][], ratios2-float[][], index-int]"
          }
        },
        {
          "type": "Ymodifierchange",
          "commitMessage": "YARN-6612. Update fair scheduler policies to be aware of resource types. (Contributed by Daniel Templeton via Yufei Gu)\n",
          "commitDate": "14/09/17 11:23 AM",
          "commitName": "09b476e6dabe8039a41dde7930c8a9c0d14bb750",
          "commitAuthor": "Yufei Gu",
          "commitDateOld": "24/07/17 12:13 PM",
          "commitNameOld": "bb30bd3771442df253cbe55c448379580bd5ad07",
          "commitAuthorOld": "Daniel Templeton",
          "daysBetweenCommits": 51.97,
          "commitsBetweenForRepo": 500,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,11 +1,13 @@\n-    private int compareShares(ResourceWeights shares1, ResourceWeights shares2,\n-        ResourceType[] resourceOrder1, ResourceType[] resourceOrder2) {\n-      for (int i \u003d 0; i \u003c resourceOrder1.length; i++) {\n-        int ret \u003d (int)Math.signum(shares1.getWeight(resourceOrder1[i])\n-            - shares2.getWeight(resourceOrder2[i]));\n+    int compareRatios(float[][] ratios1, float[][] ratios2, int index) {\n+      int ret \u003d 0;\n+\n+      for (int i \u003d 0; i \u003c ratios1.length; i++) {\n+        ret \u003d (int) Math.signum(ratios1[i][index] - ratios2[i][index]);\n+\n         if (ret !\u003d 0) {\n-          return ret;\n+          break;\n         }\n       }\n-      return 0;\n+\n+      return ret;\n     }\n\\ No newline at end of file\n",
          "actualSource": "    int compareRatios(float[][] ratios1, float[][] ratios2, int index) {\n      int ret \u003d 0;\n\n      for (int i \u003d 0; i \u003c ratios1.length; i++) {\n        ret \u003d (int) Math.signum(ratios1[i][index] - ratios2[i][index]);\n\n        if (ret !\u003d 0) {\n          break;\n        }\n      }\n\n      return ret;\n    }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/fair/policies/DominantResourceFairnessPolicy.java",
          "extendedDetails": {
            "oldValue": "[private]",
            "newValue": "[]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "YARN-6612. Update fair scheduler policies to be aware of resource types. (Contributed by Daniel Templeton via Yufei Gu)\n",
          "commitDate": "14/09/17 11:23 AM",
          "commitName": "09b476e6dabe8039a41dde7930c8a9c0d14bb750",
          "commitAuthor": "Yufei Gu",
          "commitDateOld": "24/07/17 12:13 PM",
          "commitNameOld": "bb30bd3771442df253cbe55c448379580bd5ad07",
          "commitAuthorOld": "Daniel Templeton",
          "daysBetweenCommits": 51.97,
          "commitsBetweenForRepo": 500,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,11 +1,13 @@\n-    private int compareShares(ResourceWeights shares1, ResourceWeights shares2,\n-        ResourceType[] resourceOrder1, ResourceType[] resourceOrder2) {\n-      for (int i \u003d 0; i \u003c resourceOrder1.length; i++) {\n-        int ret \u003d (int)Math.signum(shares1.getWeight(resourceOrder1[i])\n-            - shares2.getWeight(resourceOrder2[i]));\n+    int compareRatios(float[][] ratios1, float[][] ratios2, int index) {\n+      int ret \u003d 0;\n+\n+      for (int i \u003d 0; i \u003c ratios1.length; i++) {\n+        ret \u003d (int) Math.signum(ratios1[i][index] - ratios2[i][index]);\n+\n         if (ret !\u003d 0) {\n-          return ret;\n+          break;\n         }\n       }\n-      return 0;\n+\n+      return ret;\n     }\n\\ No newline at end of file\n",
          "actualSource": "    int compareRatios(float[][] ratios1, float[][] ratios2, int index) {\n      int ret \u003d 0;\n\n      for (int i \u003d 0; i \u003c ratios1.length; i++) {\n        ret \u003d (int) Math.signum(ratios1[i][index] - ratios2[i][index]);\n\n        if (ret !\u003d 0) {\n          break;\n        }\n      }\n\n      return ret;\n    }",
          "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/fair/policies/DominantResourceFairnessPolicy.java",
          "extendedDetails": {}
        }
      ]
    },
    "c1b635ed4826b0f9c8574d262dfeb13fa5ceb650": {
      "type": "Yintroduced",
      "commitMessage": "YARN-326. Add multi-resource scheduling to the fair scheduler. (sandyr via tucu)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1489070 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "03/06/13 10:33 AM",
      "commitName": "c1b635ed4826b0f9c8574d262dfeb13fa5ceb650",
      "commitAuthor": "Alejandro Abdelnur",
      "diff": "@@ -0,0 +1,11 @@\n+    private int compareShares(ResourceWeights shares1, ResourceWeights shares2,\n+        ResourceType[] resourceOrder1, ResourceType[] resourceOrder2) {\n+      for (int i \u003d 0; i \u003c resourceOrder1.length; i++) {\n+        int ret \u003d (int)Math.signum(shares1.getWeight(resourceOrder1[i])\n+            - shares2.getWeight(resourceOrder2[i]));\n+        if (ret !\u003d 0) {\n+          return ret;\n+        }\n+      }\n+      return 0;\n+    }\n\\ No newline at end of file\n",
      "actualSource": "    private int compareShares(ResourceWeights shares1, ResourceWeights shares2,\n        ResourceType[] resourceOrder1, ResourceType[] resourceOrder2) {\n      for (int i \u003d 0; i \u003c resourceOrder1.length; i++) {\n        int ret \u003d (int)Math.signum(shares1.getWeight(resourceOrder1[i])\n            - shares2.getWeight(resourceOrder2[i]));\n        if (ret !\u003d 0) {\n          return ret;\n        }\n      }\n      return 0;\n    }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/fair/policies/DominantResourceFairnessPolicy.java"
    }
  }
}