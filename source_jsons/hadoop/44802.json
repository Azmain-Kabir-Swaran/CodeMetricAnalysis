{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "SchedConfCLI.java",
  "functionName": "getSchedulerConf",
  "functionId": "getSchedulerConf___webAppAddress-String__resource-WebResource",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client/src/main/java/org/apache/hadoop/yarn/client/cli/SchedConfCLI.java",
  "functionStartLine": 220,
  "functionEndLine": 262,
  "numCommitsSeen": 8,
  "timeTaken": 1265,
  "changeHistory": [
    "c71befaf8fec1e5a962359c9cc131fb47adfd9d1"
  ],
  "changeHistoryShort": {
    "c71befaf8fec1e5a962359c9cc131fb47adfd9d1": "Yintroduced"
  },
  "changeHistoryDetails": {
    "c71befaf8fec1e5a962359c9cc131fb47adfd9d1": {
      "type": "Yintroduced",
      "commitMessage": "YARN-9781. SchedConfCli to get current stored scheduler configuration. Contributed by Prabhu Joseph\n",
      "commitDate": "05/12/19 11:31 AM",
      "commitName": "c71befaf8fec1e5a962359c9cc131fb47adfd9d1",
      "commitAuthor": "Szilard Nemeth",
      "diff": "@@ -0,0 +1,43 @@\n+  int getSchedulerConf(String webAppAddress, WebResource resource)\n+      throws Exception {\n+    ClientResponse response \u003d null;\n+    resource \u003d (resource !\u003d null) ? resource :\n+        initializeWebResource(webAppAddress);\n+    try {\n+      Builder builder;\n+      if (UserGroupInformation.isSecurityEnabled()) {\n+        builder \u003d resource\n+            .path(\"ws\").path(\"v1\").path(\"cluster\")\n+            .path(\"scheduler-conf\").accept(MediaType.APPLICATION_XML);\n+      } else {\n+        builder \u003d resource\n+            .path(\"ws\").path(\"v1\").path(\"cluster\").path(\"scheduler-conf\")\n+            .queryParam(\"user.name\", UserGroupInformation.getCurrentUser()\n+            .getShortUserName()).accept(MediaType.APPLICATION_XML);\n+      }\n+      response \u003d builder.get(ClientResponse.class);\n+      if (response !\u003d null) {\n+        if (response.getStatus() \u003d\u003d Status.OK.getStatusCode()) {\n+          ConfInfo schedulerConf \u003d response.getEntity(ConfInfo.class);\n+          JAXBContext jaxbContext \u003d JAXBContext.newInstance(ConfInfo.class);\n+          Marshaller jaxbMarshaller \u003d jaxbContext.createMarshaller();\n+          StringWriter sw \u003d new StringWriter();\n+          jaxbMarshaller.marshal(schedulerConf, sw);\n+          prettyFormatWithIndent(sw.toString(), 2);\n+          return 0;\n+        } else {\n+          System.err.println(\"Failed to get scheduler configuration: \"\n+              + response.getEntity(String.class));\n+        }\n+      } else {\n+        System.err.println(\"Failed to get scheduler configuration: \" +\n+            \"null response\");\n+      }\n+      return -1;\n+    } finally {\n+      if (response !\u003d null) {\n+        response.close();\n+      }\n+      destroyClient();\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  int getSchedulerConf(String webAppAddress, WebResource resource)\n      throws Exception {\n    ClientResponse response \u003d null;\n    resource \u003d (resource !\u003d null) ? resource :\n        initializeWebResource(webAppAddress);\n    try {\n      Builder builder;\n      if (UserGroupInformation.isSecurityEnabled()) {\n        builder \u003d resource\n            .path(\"ws\").path(\"v1\").path(\"cluster\")\n            .path(\"scheduler-conf\").accept(MediaType.APPLICATION_XML);\n      } else {\n        builder \u003d resource\n            .path(\"ws\").path(\"v1\").path(\"cluster\").path(\"scheduler-conf\")\n            .queryParam(\"user.name\", UserGroupInformation.getCurrentUser()\n            .getShortUserName()).accept(MediaType.APPLICATION_XML);\n      }\n      response \u003d builder.get(ClientResponse.class);\n      if (response !\u003d null) {\n        if (response.getStatus() \u003d\u003d Status.OK.getStatusCode()) {\n          ConfInfo schedulerConf \u003d response.getEntity(ConfInfo.class);\n          JAXBContext jaxbContext \u003d JAXBContext.newInstance(ConfInfo.class);\n          Marshaller jaxbMarshaller \u003d jaxbContext.createMarshaller();\n          StringWriter sw \u003d new StringWriter();\n          jaxbMarshaller.marshal(schedulerConf, sw);\n          prettyFormatWithIndent(sw.toString(), 2);\n          return 0;\n        } else {\n          System.err.println(\"Failed to get scheduler configuration: \"\n              + response.getEntity(String.class));\n        }\n      } else {\n        System.err.println(\"Failed to get scheduler configuration: \" +\n            \"null response\");\n      }\n      return -1;\n    } finally {\n      if (response !\u003d null) {\n        response.close();\n      }\n      destroyClient();\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-client/src/main/java/org/apache/hadoop/yarn/client/cli/SchedConfCLI.java"
    }
  }
}