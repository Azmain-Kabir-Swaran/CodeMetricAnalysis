{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "ReservationsACLsManager.java",
  "functionName": "checkAccess",
  "functionId": "checkAccess___callerUGI-UserGroupInformation__acl-ReservationACL__queueName-String",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/security/ReservationsACLsManager.java",
  "functionStartLine": 73,
  "functionEndLine": 91,
  "numCommitsSeen": 2,
  "timeTaken": 1675,
  "changeHistory": [
    "56b7571131b0af03b32bf1c5673c32634652df21",
    "23f937e3b718f607d4fc975610ab3a03265f0f7e"
  ],
  "changeHistoryShort": {
    "56b7571131b0af03b32bf1c5673c32634652df21": "Ybodychange",
    "23f937e3b718f607d4fc975610ab3a03265f0f7e": "Yintroduced"
  },
  "changeHistoryDetails": {
    "56b7571131b0af03b32bf1c5673c32634652df21": {
      "type": "Ybodychange",
      "commitMessage": "YARN-9815 ReservationACLsTestBase fails with NPE. Contributed by Ahmed Hussein\n",
      "commitDate": "11/09/19 2:59 PM",
      "commitName": "56b7571131b0af03b32bf1c5673c32634652df21",
      "commitAuthor": "Eric Badger",
      "commitDateOld": "11/02/16 10:47 AM",
      "commitNameOld": "23f937e3b718f607d4fc975610ab3a03265f0f7e",
      "commitAuthorOld": "Arun Suresh",
      "daysBetweenCommits": 1308.13,
      "commitsBetweenForRepo": 9883,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,19 +1,19 @@\n   public boolean checkAccess(UserGroupInformation callerUGI,\n       ReservationACL acl, String queueName) {\n     if (!isReservationACLsEnable) {\n       return true;\n     }\n \n     if (this.reservationAcls.containsKey(queueName)) {\n       Map\u003cReservationACL, AccessControlList\u003e acls \u003d this.reservationAcls.get(\n               queueName);\n-      if (acls.containsKey(acl)) {\n+      if (acls !\u003d null \u0026\u0026 acls.containsKey(acl)) {\n         return acls.get(acl).isUserAllowed(callerUGI);\n       } else {\n         // Give access if acl is undefined for queue.\n         return true;\n       }\n     }\n \n     return false;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public boolean checkAccess(UserGroupInformation callerUGI,\n      ReservationACL acl, String queueName) {\n    if (!isReservationACLsEnable) {\n      return true;\n    }\n\n    if (this.reservationAcls.containsKey(queueName)) {\n      Map\u003cReservationACL, AccessControlList\u003e acls \u003d this.reservationAcls.get(\n              queueName);\n      if (acls !\u003d null \u0026\u0026 acls.containsKey(acl)) {\n        return acls.get(acl).isUserAllowed(callerUGI);\n      } else {\n        // Give access if acl is undefined for queue.\n        return true;\n      }\n    }\n\n    return false;\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/security/ReservationsACLsManager.java",
      "extendedDetails": {}
    },
    "23f937e3b718f607d4fc975610ab3a03265f0f7e": {
      "type": "Yintroduced",
      "commitMessage": "YARN-2575. Create separate ACLs for Reservation create/update/delete/list ops (Sean Po via asuresh)\n",
      "commitDate": "11/02/16 10:47 AM",
      "commitName": "23f937e3b718f607d4fc975610ab3a03265f0f7e",
      "commitAuthor": "Arun Suresh",
      "diff": "@@ -0,0 +1,19 @@\n+  public boolean checkAccess(UserGroupInformation callerUGI,\n+      ReservationACL acl, String queueName) {\n+    if (!isReservationACLsEnable) {\n+      return true;\n+    }\n+\n+    if (this.reservationAcls.containsKey(queueName)) {\n+      Map\u003cReservationACL, AccessControlList\u003e acls \u003d this.reservationAcls.get(\n+              queueName);\n+      if (acls.containsKey(acl)) {\n+        return acls.get(acl).isUserAllowed(callerUGI);\n+      } else {\n+        // Give access if acl is undefined for queue.\n+        return true;\n+      }\n+    }\n+\n+    return false;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public boolean checkAccess(UserGroupInformation callerUGI,\n      ReservationACL acl, String queueName) {\n    if (!isReservationACLsEnable) {\n      return true;\n    }\n\n    if (this.reservationAcls.containsKey(queueName)) {\n      Map\u003cReservationACL, AccessControlList\u003e acls \u003d this.reservationAcls.get(\n              queueName);\n      if (acls.containsKey(acl)) {\n        return acls.get(acl).isUserAllowed(callerUGI);\n      } else {\n        // Give access if acl is undefined for queue.\n        return true;\n      }\n    }\n\n    return false;\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/security/ReservationsACLsManager.java"
    }
  }
}