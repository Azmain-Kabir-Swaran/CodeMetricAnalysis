{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "HeartbeatManager.java",
  "functionName": "register",
  "functionId": "register___d-DatanodeDescriptor(modifiers-final)",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.java",
  "functionStartLine": 221,
  "functionEndLine": 229,
  "numCommitsSeen": 36,
  "timeTaken": 3078,
  "changeHistory": [
    "df83230948204ee2d2b06ecc66ce0163e2df27ef",
    "be7a0add8b6561d3c566237cc0370b06e7f32bb4",
    "9729b244de50322c2cc889c97c2ffb2b4675cf77",
    "41980c56d3c01d7a0ddc7deea2d89b7f28026722",
    "551024915d487957d9e829493ab319c8e31dfa81",
    "b884af72c563403a7264b1a4b42ab58790af72f3",
    "fc14a92c6b46cc435a8f33e6fa0512c70caa06e0",
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1",
    "d86f3183d93714ba078416af4f609d26376eadb0",
    "7fac946ac983e31613fd62836c8ac9c4a579210a"
  ],
  "changeHistoryShort": {
    "df83230948204ee2d2b06ecc66ce0163e2df27ef": "Ybodychange",
    "be7a0add8b6561d3c566237cc0370b06e7f32bb4": "Ybodychange",
    "9729b244de50322c2cc889c97c2ffb2b4675cf77": "Ybodychange",
    "41980c56d3c01d7a0ddc7deea2d89b7f28026722": "Ybodychange",
    "551024915d487957d9e829493ab319c8e31dfa81": "Ybodychange",
    "b884af72c563403a7264b1a4b42ab58790af72f3": "Ybodychange",
    "fc14a92c6b46cc435a8f33e6fa0512c70caa06e0": "Ybodychange",
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1": "Yfilerename",
    "d86f3183d93714ba078416af4f609d26376eadb0": "Yfilerename",
    "7fac946ac983e31613fd62836c8ac9c4a579210a": "Yintroduced"
  },
  "changeHistoryDetails": {
    "df83230948204ee2d2b06ecc66ce0163e2df27ef": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-9034. StorageTypeStats Metric should not count failed storage. Contributed by Surendra Singh Lilhore.\n",
      "commitDate": "22/12/15 3:28 PM",
      "commitName": "df83230948204ee2d2b06ecc66ce0163e2df27ef",
      "commitAuthor": "Benoy Antony",
      "commitDateOld": "15/12/15 10:47 AM",
      "commitNameOld": "8602692338d6f493647205e0241e4116211fab75",
      "commitAuthorOld": "Jing Zhao",
      "daysBetweenCommits": 7.19,
      "commitsBetweenForRepo": 58,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,8 +1,9 @@\n   synchronized void register(final DatanodeDescriptor d) {\n     if (!d.isAlive()) {\n       addDatanode(d);\n \n       //update its timestamp\n       d.updateHeartbeatState(StorageReport.EMPTY_ARRAY, 0L, 0L, 0, 0, null);\n+      stats.add(d);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  synchronized void register(final DatanodeDescriptor d) {\n    if (!d.isAlive()) {\n      addDatanode(d);\n\n      //update its timestamp\n      d.updateHeartbeatState(StorageReport.EMPTY_ARRAY, 0L, 0L, 0, 0, null);\n      stats.add(d);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.java",
      "extendedDetails": {}
    },
    "be7a0add8b6561d3c566237cc0370b06e7f32bb4": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-9223. Code cleanup for DatanodeDescriptor and HeartbeatManager. Contributed by Jing Zhao.\n",
      "commitDate": "14/10/15 4:17 PM",
      "commitName": "be7a0add8b6561d3c566237cc0370b06e7f32bb4",
      "commitAuthor": "Jing Zhao",
      "commitDateOld": "25/09/15 3:25 PM",
      "commitNameOld": "4e7c6a653f108d44589f84d78a03d92ee0e8a3c3",
      "commitAuthorOld": "Colin Patrick Mccabe",
      "daysBetweenCommits": 19.04,
      "commitsBetweenForRepo": 140,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,8 +1,8 @@\n   synchronized void register(final DatanodeDescriptor d) {\n-    if (!d.isAlive) {\n+    if (!d.isAlive()) {\n       addDatanode(d);\n \n       //update its timestamp\n       d.updateHeartbeatState(StorageReport.EMPTY_ARRAY, 0L, 0L, 0, 0, null);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  synchronized void register(final DatanodeDescriptor d) {\n    if (!d.isAlive()) {\n      addDatanode(d);\n\n      //update its timestamp\n      d.updateHeartbeatState(StorageReport.EMPTY_ARRAY, 0L, 0L, 0, 0, null);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.java",
      "extendedDetails": {}
    },
    "9729b244de50322c2cc889c97c2ffb2b4675cf77": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-7604. Track and display failed DataNode storage locations in NameNode. Contributed by Chris Nauroth.\n",
      "commitDate": "16/02/15 2:43 PM",
      "commitName": "9729b244de50322c2cc889c97c2ffb2b4675cf77",
      "commitAuthor": "cnauroth",
      "commitDateOld": "23/10/14 12:28 PM",
      "commitNameOld": "8c5b23b5473e447384f818d69d907d5c35ed6d6a",
      "commitAuthorOld": "Andrew Wang",
      "daysBetweenCommits": 116.14,
      "commitsBetweenForRepo": 911,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,8 +1,8 @@\n   synchronized void register(final DatanodeDescriptor d) {\n     if (!d.isAlive) {\n       addDatanode(d);\n \n       //update its timestamp\n-      d.updateHeartbeatState(StorageReport.EMPTY_ARRAY, 0L, 0L, 0, 0);\n+      d.updateHeartbeatState(StorageReport.EMPTY_ARRAY, 0L, 0L, 0, 0, null);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  synchronized void register(final DatanodeDescriptor d) {\n    if (!d.isAlive) {\n      addDatanode(d);\n\n      //update its timestamp\n      d.updateHeartbeatState(StorageReport.EMPTY_ARRAY, 0L, 0L, 0, 0, null);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.java",
      "extendedDetails": {}
    },
    "41980c56d3c01d7a0ddc7deea2d89b7f28026722": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-7208. NN doesn\u0027t schedule replication when a DN storage fails.  Contributed by Ming Ma\n",
      "commitDate": "15/10/14 8:44 PM",
      "commitName": "41980c56d3c01d7a0ddc7deea2d89b7f28026722",
      "commitAuthor": "Tsz-Wo Nicholas Sze",
      "commitDateOld": "07/08/14 10:41 PM",
      "commitNameOld": "d3a2fe280775e9320181b671d5951f06837bddad",
      "commitAuthorOld": "Arpit Agarwal",
      "daysBetweenCommits": 68.92,
      "commitsBetweenForRepo": 692,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,8 +1,8 @@\n   synchronized void register(final DatanodeDescriptor d) {\n     if (!d.isAlive) {\n       addDatanode(d);\n \n       //update its timestamp\n-      d.updateHeartbeat(StorageReport.EMPTY_ARRAY, 0L, 0L, 0, 0);\n+      d.updateHeartbeatState(StorageReport.EMPTY_ARRAY, 0L, 0L, 0, 0);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  synchronized void register(final DatanodeDescriptor d) {\n    if (!d.isAlive) {\n      addDatanode(d);\n\n      //update its timestamp\n      d.updateHeartbeatState(StorageReport.EMPTY_ARRAY, 0L, 0L, 0, 0);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.java",
      "extendedDetails": {}
    },
    "551024915d487957d9e829493ab319c8e31dfa81": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-6599. 2.4 addBlock is 10 to 20 times slower compared to 0.23 (daryn)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1611737 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "18/07/14 10:58 AM",
      "commitName": "551024915d487957d9e829493ab319c8e31dfa81",
      "commitAuthor": "Daryn Sharp",
      "commitDateOld": "02/12/13 9:41 AM",
      "commitNameOld": "18159be495f96bde4bd4fa2cacb14aafb87e87bc",
      "commitAuthorOld": "",
      "daysBetweenCommits": 228.01,
      "commitsBetweenForRepo": 1548,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,8 +1,8 @@\n   synchronized void register(final DatanodeDescriptor d) {\n-    if (!datanodes.contains(d)) {\n+    if (!d.isAlive) {\n       addDatanode(d);\n \n       //update its timestamp\n       d.updateHeartbeat(StorageReport.EMPTY_ARRAY, 0L, 0L, 0, 0);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  synchronized void register(final DatanodeDescriptor d) {\n    if (!d.isAlive) {\n      addDatanode(d);\n\n      //update its timestamp\n      d.updateHeartbeat(StorageReport.EMPTY_ARRAY, 0L, 0L, 0, 0);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.java",
      "extendedDetails": {}
    },
    "b884af72c563403a7264b1a4b42ab58790af72f3": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-5398. NameNode changes to process storage reports per storage directory.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2832@1534847 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "22/10/13 4:29 PM",
      "commitName": "b884af72c563403a7264b1a4b42ab58790af72f3",
      "commitAuthor": "Arpit Agarwal",
      "commitDateOld": "07/06/13 1:01 PM",
      "commitNameOld": "2a76cddcd53ab10a79372b09595bb6df4bb44e01",
      "commitAuthorOld": "Kihwal Lee",
      "daysBetweenCommits": 137.14,
      "commitsBetweenForRepo": 854,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,8 +1,8 @@\n   synchronized void register(final DatanodeDescriptor d) {\n     if (!datanodes.contains(d)) {\n       addDatanode(d);\n \n       //update its timestamp\n-      d.updateHeartbeat(0L, 0L, 0L, 0L, 0, 0);\n+      d.updateHeartbeat(StorageReport.EMPTY_ARRAY, 0, 0);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  synchronized void register(final DatanodeDescriptor d) {\n    if (!datanodes.contains(d)) {\n      addDatanode(d);\n\n      //update its timestamp\n      d.updateHeartbeat(StorageReport.EMPTY_ARRAY, 0, 0);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.java",
      "extendedDetails": {}
    },
    "fc14a92c6b46cc435a8f33e6fa0512c70caa06e0": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-5141. Add cache status information to datanode heartbeat. (Contributed by Andrew Wang)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-4949@1519101 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "30/08/13 3:15 PM",
      "commitName": "fc14a92c6b46cc435a8f33e6fa0512c70caa06e0",
      "commitAuthor": "Andrew Wang",
      "commitDateOld": "07/06/13 1:01 PM",
      "commitNameOld": "2a76cddcd53ab10a79372b09595bb6df4bb44e01",
      "commitAuthorOld": "Kihwal Lee",
      "daysBetweenCommits": 84.09,
      "commitsBetweenForRepo": 422,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,8 +1,8 @@\n   synchronized void register(final DatanodeDescriptor d) {\n     if (!datanodes.contains(d)) {\n       addDatanode(d);\n \n       //update its timestamp\n-      d.updateHeartbeat(0L, 0L, 0L, 0L, 0, 0);\n+      d.updateHeartbeat(0L, 0L, 0L, 0L, 0L, 0L, 0, 0);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  synchronized void register(final DatanodeDescriptor d) {\n    if (!datanodes.contains(d)) {\n      addDatanode(d);\n\n      //update its timestamp\n      d.updateHeartbeat(0L, 0L, 0L, 0L, 0L, 0L, 0, 0);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.java",
      "extendedDetails": {}
    },
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1": {
      "type": "Yfilerename",
      "commitMessage": "HADOOP-7560. Change src layout to be heirarchical. Contributed by Alejandro Abdelnur.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1161332 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/08/11 5:14 PM",
      "commitName": "cd7157784e5e5ddc4e77144d042e54dd0d04bac1",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "24/08/11 5:06 PM",
      "commitNameOld": "bb0005cfec5fd2861600ff5babd259b48ba18b63",
      "commitAuthorOld": "Arun Murthy",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  synchronized void register(final DatanodeDescriptor d) {\n    if (!datanodes.contains(d)) {\n      addDatanode(d);\n\n      //update its timestamp\n      d.updateHeartbeat(0L, 0L, 0L, 0L, 0, 0);\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.java",
      "extendedDetails": {
        "oldPath": "hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.java",
        "newPath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.java"
      }
    },
    "d86f3183d93714ba078416af4f609d26376eadb0": {
      "type": "Yfilerename",
      "commitMessage": "HDFS-2096. Mavenization of hadoop-hdfs. Contributed by Alejandro Abdelnur.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1159702 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "19/08/11 10:36 AM",
      "commitName": "d86f3183d93714ba078416af4f609d26376eadb0",
      "commitAuthor": "Thomas White",
      "commitDateOld": "19/08/11 10:26 AM",
      "commitNameOld": "6ee5a73e0e91a2ef27753a32c576835e951d8119",
      "commitAuthorOld": "Thomas White",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  synchronized void register(final DatanodeDescriptor d) {\n    if (!datanodes.contains(d)) {\n      addDatanode(d);\n\n      //update its timestamp\n      d.updateHeartbeat(0L, 0L, 0L, 0L, 0, 0);\n    }\n  }",
      "path": "hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.java",
      "extendedDetails": {
        "oldPath": "hdfs/src/java/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.java",
        "newPath": "hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.java"
      }
    },
    "7fac946ac983e31613fd62836c8ac9c4a579210a": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-2108. Move datanode heartbeat handling from namenode package to blockmanagement package.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1154042 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "04/08/11 3:55 PM",
      "commitName": "7fac946ac983e31613fd62836c8ac9c4a579210a",
      "commitAuthor": "Tsz-wo Sze",
      "diff": "@@ -0,0 +1,8 @@\n+  synchronized void register(final DatanodeDescriptor d) {\n+    if (!datanodes.contains(d)) {\n+      addDatanode(d);\n+\n+      //update its timestamp\n+      d.updateHeartbeat(0L, 0L, 0L, 0L, 0, 0);\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  synchronized void register(final DatanodeDescriptor d) {\n    if (!datanodes.contains(d)) {\n      addDatanode(d);\n\n      //update its timestamp\n      d.updateHeartbeat(0L, 0L, 0L, 0L, 0, 0);\n    }\n  }",
      "path": "hdfs/src/java/org/apache/hadoop/hdfs/server/blockmanagement/HeartbeatManager.java"
    }
  }
}