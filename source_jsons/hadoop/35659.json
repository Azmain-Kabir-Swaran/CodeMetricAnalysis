{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "TimelineServiceV2Publisher.java",
  "functionName": "appUpdated",
  "functionId": "appUpdated___app-RMApp__currentTimeMillis-long",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/metrics/TimelineServiceV2Publisher.java",
  "functionStartLine": 288,
  "functionEndLine": 302,
  "numCommitsSeen": 27,
  "timeTaken": 1041,
  "changeHistory": [
    "a926f895c11cd69cf2117c3b970304f3f1f53d92",
    "10ec5586fba20d80dd91d8d0ddb442c66d39a0d4"
  ],
  "changeHistoryShort": {
    "a926f895c11cd69cf2117c3b970304f3f1f53d92": "Ybodychange",
    "10ec5586fba20d80dd91d8d0ddb442c66d39a0d4": "Yintroduced"
  },
  "changeHistoryDetails": {
    "a926f895c11cd69cf2117c3b970304f3f1f53d92": {
      "type": "Ybodychange",
      "commitMessage": "YARN-5865. Retrospect updateApplicationPriority api to handle state store exception in align with YARN-5611. Contributed by Sunil G.\n",
      "commitDate": "22/11/16 1:19 AM",
      "commitName": "a926f895c11cd69cf2117c3b970304f3f1f53d92",
      "commitAuthor": "Rohith Sharma K S",
      "commitDateOld": "10/11/16 2:35 PM",
      "commitNameOld": "93eeb13164707d0e3556c2bf737bd2ee09a335c6",
      "commitAuthorOld": "Eric Payne",
      "daysBetweenCommits": 11.45,
      "commitsBetweenForRepo": 60,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,15 +1,15 @@\n   public void appUpdated(RMApp app, long currentTimeMillis) {\n     ApplicationEntity entity \u003d createApplicationEntity(app.getApplicationId());\n     Map\u003cString, Object\u003e eventInfo \u003d new HashMap\u003cString, Object\u003e();\n     eventInfo.put(ApplicationMetricsConstants.QUEUE_ENTITY_INFO,\n         app.getQueue());\n     eventInfo.put(ApplicationMetricsConstants.APPLICATION_PRIORITY_INFO,\n-        app.getApplicationSubmissionContext().getPriority().getPriority());\n+        app.getApplicationPriority().getPriority());\n     TimelineEvent tEvent \u003d new TimelineEvent();\n     tEvent.setId(ApplicationMetricsConstants.UPDATED_EVENT_TYPE);\n     tEvent.setTimestamp(currentTimeMillis);\n     tEvent.setInfo(eventInfo);\n     entity.addEvent(tEvent);\n     getDispatcher().getEventHandler().handle(new TimelineV2PublishEvent(\n         SystemMetricsEventType.PUBLISH_ENTITY, entity, app.getApplicationId()));\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void appUpdated(RMApp app, long currentTimeMillis) {\n    ApplicationEntity entity \u003d createApplicationEntity(app.getApplicationId());\n    Map\u003cString, Object\u003e eventInfo \u003d new HashMap\u003cString, Object\u003e();\n    eventInfo.put(ApplicationMetricsConstants.QUEUE_ENTITY_INFO,\n        app.getQueue());\n    eventInfo.put(ApplicationMetricsConstants.APPLICATION_PRIORITY_INFO,\n        app.getApplicationPriority().getPriority());\n    TimelineEvent tEvent \u003d new TimelineEvent();\n    tEvent.setId(ApplicationMetricsConstants.UPDATED_EVENT_TYPE);\n    tEvent.setTimestamp(currentTimeMillis);\n    tEvent.setInfo(eventInfo);\n    entity.addEvent(tEvent);\n    getDispatcher().getEventHandler().handle(new TimelineV2PublishEvent(\n        SystemMetricsEventType.PUBLISH_ENTITY, entity, app.getApplicationId()));\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/metrics/TimelineServiceV2Publisher.java",
      "extendedDetails": {}
    },
    "10ec5586fba20d80dd91d8d0ddb442c66d39a0d4": {
      "type": "Yintroduced",
      "commitMessage": "YARN-4129. Refactor the SystemMetricPublisher in RM to better support newer events (Naganarasimha G R via sjlee)\n",
      "commitDate": "10/07/16 8:45 AM",
      "commitName": "10ec5586fba20d80dd91d8d0ddb442c66d39a0d4",
      "commitAuthor": "Sangjin Lee",
      "diff": "@@ -0,0 +1,15 @@\n+  public void appUpdated(RMApp app, long currentTimeMillis) {\n+    ApplicationEntity entity \u003d createApplicationEntity(app.getApplicationId());\n+    Map\u003cString, Object\u003e eventInfo \u003d new HashMap\u003cString, Object\u003e();\n+    eventInfo.put(ApplicationMetricsConstants.QUEUE_ENTITY_INFO,\n+        app.getQueue());\n+    eventInfo.put(ApplicationMetricsConstants.APPLICATION_PRIORITY_INFO,\n+        app.getApplicationSubmissionContext().getPriority().getPriority());\n+    TimelineEvent tEvent \u003d new TimelineEvent();\n+    tEvent.setId(ApplicationMetricsConstants.UPDATED_EVENT_TYPE);\n+    tEvent.setTimestamp(currentTimeMillis);\n+    tEvent.setInfo(eventInfo);\n+    entity.addEvent(tEvent);\n+    getDispatcher().getEventHandler().handle(new TimelineV2PublishEvent(\n+        SystemMetricsEventType.PUBLISH_ENTITY, entity, app.getApplicationId()));\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public void appUpdated(RMApp app, long currentTimeMillis) {\n    ApplicationEntity entity \u003d createApplicationEntity(app.getApplicationId());\n    Map\u003cString, Object\u003e eventInfo \u003d new HashMap\u003cString, Object\u003e();\n    eventInfo.put(ApplicationMetricsConstants.QUEUE_ENTITY_INFO,\n        app.getQueue());\n    eventInfo.put(ApplicationMetricsConstants.APPLICATION_PRIORITY_INFO,\n        app.getApplicationSubmissionContext().getPriority().getPriority());\n    TimelineEvent tEvent \u003d new TimelineEvent();\n    tEvent.setId(ApplicationMetricsConstants.UPDATED_EVENT_TYPE);\n    tEvent.setTimestamp(currentTimeMillis);\n    tEvent.setInfo(eventInfo);\n    entity.addEvent(tEvent);\n    getDispatcher().getEventHandler().handle(new TimelineV2PublishEvent(\n        SystemMetricsEventType.PUBLISH_ENTITY, entity, app.getApplicationId()));\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/metrics/TimelineServiceV2Publisher.java"
    }
  }
}