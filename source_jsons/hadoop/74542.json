{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "Credentials.java",
  "functionName": "readTokenStorageFile",
  "functionId": "readTokenStorageFile___filename-File__conf-Configuration",
  "sourceFilePath": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/Credentials.java",
  "functionStartLine": 240,
  "functionEndLine": 255,
  "numCommitsSeen": 25,
  "timeTaken": 1829,
  "changeHistory": [
    "7a3188d054481b9bd563e337901e93476303ce7f",
    "ccaf036662e22da14583942054898c99fa51dae5",
    "0d143ad72326d80ffc4a63777befb478b7e59af3"
  ],
  "changeHistoryShort": {
    "7a3188d054481b9bd563e337901e93476303ce7f": "Ybodychange",
    "ccaf036662e22da14583942054898c99fa51dae5": "Ybodychange",
    "0d143ad72326d80ffc4a63777befb478b7e59af3": "Yintroduced"
  },
  "changeHistoryDetails": {
    "7a3188d054481b9bd563e337901e93476303ce7f": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-16282. Avoid FileStream to improve performance. Contributed by Ayush Saxena.\n",
      "commitDate": "02/05/19 12:58 PM",
      "commitName": "7a3188d054481b9bd563e337901e93476303ce7f",
      "commitAuthor": "Giovanni Matteo Fumarola",
      "commitDateOld": "03/11/18 9:21 AM",
      "commitNameOld": "cb8d679c95642842efacc5d38ccf2a61b043c689",
      "commitAuthorOld": "Lars Francke",
      "daysBetweenCommits": 180.15,
      "commitsBetweenForRepo": 1267,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,16 @@\n   public static Credentials readTokenStorageFile(File filename,\n                                                  Configuration conf)\n       throws IOException {\n     DataInputStream in \u003d null;\n     Credentials credentials \u003d new Credentials();\n     try {\n       in \u003d new DataInputStream(new BufferedInputStream(\n-          new FileInputStream(filename)));\n+          Files.newInputStream(filename.toPath())));\n       credentials.readTokenStorageStream(in);\n       return credentials;\n     } catch(IOException ioe) {\n       throw new IOException(\"Exception reading \" + filename, ioe);\n     } finally {\n       IOUtils.cleanupWithLogger(LOG, in);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static Credentials readTokenStorageFile(File filename,\n                                                 Configuration conf)\n      throws IOException {\n    DataInputStream in \u003d null;\n    Credentials credentials \u003d new Credentials();\n    try {\n      in \u003d new DataInputStream(new BufferedInputStream(\n          Files.newInputStream(filename.toPath())));\n      credentials.readTokenStorageStream(in);\n      return credentials;\n    } catch(IOException ioe) {\n      throw new IOException(\"Exception reading \" + filename, ioe);\n    } finally {\n      IOUtils.cleanupWithLogger(LOG, in);\n    }\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/Credentials.java",
      "extendedDetails": {}
    },
    "ccaf036662e22da14583942054898c99fa51dae5": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-14539. Move commons logging APIs over to slf4j in hadoop-common. Contributed by Wenxin He.\n",
      "commitDate": "17/07/17 9:32 PM",
      "commitName": "ccaf036662e22da14583942054898c99fa51dae5",
      "commitAuthor": "Akira Ajisaka",
      "commitDateOld": "24/11/16 9:54 AM",
      "commitNameOld": "01665e456de8d79000ce273dded5ea53aa62965a",
      "commitAuthorOld": "Steve Loughran",
      "daysBetweenCommits": 235.44,
      "commitsBetweenForRepo": 1225,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,16 +1,16 @@\n   public static Credentials readTokenStorageFile(File filename,\n                                                  Configuration conf)\n       throws IOException {\n     DataInputStream in \u003d null;\n     Credentials credentials \u003d new Credentials();\n     try {\n       in \u003d new DataInputStream(new BufferedInputStream(\n           new FileInputStream(filename)));\n       credentials.readTokenStorageStream(in);\n       return credentials;\n     } catch(IOException ioe) {\n       throw new IOException(\"Exception reading \" + filename, ioe);\n     } finally {\n-      IOUtils.cleanup(LOG, in);\n+      IOUtils.cleanupWithLogger(LOG, in);\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static Credentials readTokenStorageFile(File filename,\n                                                 Configuration conf)\n      throws IOException {\n    DataInputStream in \u003d null;\n    Credentials credentials \u003d new Credentials();\n    try {\n      in \u003d new DataInputStream(new BufferedInputStream(\n          new FileInputStream(filename)));\n      credentials.readTokenStorageStream(in);\n      return credentials;\n    } catch(IOException ioe) {\n      throw new IOException(\"Exception reading \" + filename, ioe);\n    } finally {\n      IOUtils.cleanupWithLogger(LOG, in);\n    }\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/Credentials.java",
      "extendedDetails": {}
    },
    "0d143ad72326d80ffc4a63777befb478b7e59af3": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-9212. Potential deadlock in FileSystem.Cache/IPC/UGI.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1433879 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "16/01/13 2:20 AM",
      "commitName": "0d143ad72326d80ffc4a63777befb478b7e59af3",
      "commitAuthor": "Thomas White",
      "diff": "@@ -0,0 +1,15 @@\n+  public static Credentials readTokenStorageFile(File filename, Configuration conf)\n+      throws IOException {\n+    DataInputStream in \u003d null;\n+    Credentials credentials \u003d new Credentials();\n+    try {\n+      in \u003d new DataInputStream(new BufferedInputStream(\n+          new FileInputStream(filename)));\n+      credentials.readTokenStorageStream(in);\n+      return credentials;\n+    } catch(IOException ioe) {\n+      throw new IOException(\"Exception reading \" + filename, ioe);\n+    } finally {\n+      IOUtils.cleanup(LOG, in);\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public static Credentials readTokenStorageFile(File filename, Configuration conf)\n      throws IOException {\n    DataInputStream in \u003d null;\n    Credentials credentials \u003d new Credentials();\n    try {\n      in \u003d new DataInputStream(new BufferedInputStream(\n          new FileInputStream(filename)));\n      credentials.readTokenStorageStream(in);\n      return credentials;\n    } catch(IOException ioe) {\n      throw new IOException(\"Exception reading \" + filename, ioe);\n    } finally {\n      IOUtils.cleanup(LOG, in);\n    }\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/Credentials.java"
    }
  }
}