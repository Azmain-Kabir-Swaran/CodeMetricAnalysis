{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "RMWebServices.java",
  "functionName": "createNewApplication",
  "functionId": "createNewApplication___hsr-HttpServletRequest(annotations-@Context)",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/RMWebServices.java",
  "functionStartLine": 1726,
  "functionEndLine": 1738,
  "numCommitsSeen": 106,
  "timeTaken": 4561,
  "changeHistory": [
    "fddc3d55c3e309936216b8c61944e113509999e2",
    "d76fbbc9b82e720d7d5188f9ae2f56a8d78f3a98",
    "d6532d3a77abe5a9b1760c1e26a899d49aa661dc",
    "030580387a4d8d97560a93da2fd7494b4366e3b6",
    "075ff276ca9e8c192717a50b0e18485afc8571a6"
  ],
  "changeHistoryShort": {
    "fddc3d55c3e309936216b8c61944e113509999e2": "Ybodychange",
    "d76fbbc9b82e720d7d5188f9ae2f56a8d78f3a98": "Ybodychange",
    "d6532d3a77abe5a9b1760c1e26a899d49aa661dc": "Ybodychange",
    "030580387a4d8d97560a93da2fd7494b4366e3b6": "Ybodychange",
    "075ff276ca9e8c192717a50b0e18485afc8571a6": "Yintroduced"
  },
  "changeHistoryDetails": {
    "fddc3d55c3e309936216b8c61944e113509999e2": {
      "type": "Ybodychange",
      "commitMessage": "YARN-10039. Allow disabling app submission from REST endpoints\n",
      "commitDate": "18/12/19 10:48 AM",
      "commitName": "fddc3d55c3e309936216b8c61944e113509999e2",
      "commitAuthor": "Jonathan Hung",
      "commitDateOld": "05/12/19 11:31 AM",
      "commitNameOld": "c71befaf8fec1e5a962359c9cc131fb47adfd9d1",
      "commitAuthorOld": "Szilard Nemeth",
      "daysBetweenCommits": 12.97,
      "commitsBetweenForRepo": 52,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,9 +1,13 @@\n   public Response createNewApplication(@Context HttpServletRequest hsr)\n       throws AuthorizationException, IOException, InterruptedException {\n+    if (!enableRestAppSubmissions) {\n+      String msg \u003d \"App submission via REST is disabled.\";\n+      return Response.status(Status.FORBIDDEN).entity(msg).build();\n+    }\n     UserGroupInformation callerUGI \u003d getCallerUserGroupInformation(hsr, true);\n     initForWritableEndpoints(callerUGI, false);\n \n     NewApplication appId \u003d createNewApplication();\n     return Response.status(Status.OK).entity(appId).build();\n \n   }\n\\ No newline at end of file\n",
      "actualSource": "  public Response createNewApplication(@Context HttpServletRequest hsr)\n      throws AuthorizationException, IOException, InterruptedException {\n    if (!enableRestAppSubmissions) {\n      String msg \u003d \"App submission via REST is disabled.\";\n      return Response.status(Status.FORBIDDEN).entity(msg).build();\n    }\n    UserGroupInformation callerUGI \u003d getCallerUserGroupInformation(hsr, true);\n    initForWritableEndpoints(callerUGI, false);\n\n    NewApplication appId \u003d createNewApplication();\n    return Response.status(Status.OK).entity(appId).build();\n\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/RMWebServices.java",
      "extendedDetails": {}
    },
    "d76fbbc9b82e720d7d5188f9ae2f56a8d78f3a98": {
      "type": "Ybodychange",
      "commitMessage": "YARN-8249. Fixed few REST APIs in RMWebServices to have static-user check. Contributed by Sunil Govindan.\n",
      "commitDate": "10/05/18 7:05 PM",
      "commitName": "d76fbbc9b82e720d7d5188f9ae2f56a8d78f3a98",
      "commitAuthor": "Vinod Kumar Vavilapalli (I am also known as @tshooter.)",
      "commitDateOld": "27/04/18 10:28 AM",
      "commitNameOld": "ef3ecc308dbea41c6a88bd4d16739c7bbc10cdda",
      "commitAuthorOld": "Rohith Sharma K S",
      "daysBetweenCommits": 13.36,
      "commitsBetweenForRepo": 87,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,9 @@\n   public Response createNewApplication(@Context HttpServletRequest hsr)\n       throws AuthorizationException, IOException, InterruptedException {\n-    init();\n     UserGroupInformation callerUGI \u003d getCallerUserGroupInformation(hsr, true);\n-    if (callerUGI \u003d\u003d null) {\n-      throw new AuthorizationException(\n-          \"Unable to obtain user name, \" + \"user not authenticated\");\n-    }\n-    if (UserGroupInformation.isSecurityEnabled() \u0026\u0026 isStaticUser(callerUGI)) {\n-      String msg \u003d \"The default static user cannot carry out this operation.\";\n-      return Response.status(Status.FORBIDDEN).entity(msg).build();\n-    }\n+    initForWritableEndpoints(callerUGI, false);\n \n     NewApplication appId \u003d createNewApplication();\n     return Response.status(Status.OK).entity(appId).build();\n \n   }\n\\ No newline at end of file\n",
      "actualSource": "  public Response createNewApplication(@Context HttpServletRequest hsr)\n      throws AuthorizationException, IOException, InterruptedException {\n    UserGroupInformation callerUGI \u003d getCallerUserGroupInformation(hsr, true);\n    initForWritableEndpoints(callerUGI, false);\n\n    NewApplication appId \u003d createNewApplication();\n    return Response.status(Status.OK).entity(appId).build();\n\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/RMWebServices.java",
      "extendedDetails": {}
    },
    "d6532d3a77abe5a9b1760c1e26a899d49aa661dc": {
      "type": "Ybodychange",
      "commitMessage": "YARN-2247. Made RM web services authenticate users via kerberos and delegation token. Contributed by Varun Vasudev.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1613821 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "27/07/14 10:55 AM",
      "commitName": "d6532d3a77abe5a9b1760c1e26a899d49aa661dc",
      "commitAuthor": "Zhijie Shen",
      "commitDateOld": "15/07/14 4:00 PM",
      "commitNameOld": "030580387a4d8d97560a93da2fd7494b4366e3b6",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 11.79,
      "commitsBetweenForRepo": 104,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,13 +1,17 @@\n   public Response createNewApplication(@Context HttpServletRequest hsr)\n       throws AuthorizationException, IOException, InterruptedException {\n     init();\n     UserGroupInformation callerUGI \u003d getCallerUserGroupInformation(hsr, true);\n     if (callerUGI \u003d\u003d null) {\n       throw new AuthorizationException(\"Unable to obtain user name, \"\n           + \"user not authenticated\");\n     }\n+    if (UserGroupInformation.isSecurityEnabled() \u0026\u0026 isStaticUser(callerUGI)) {\n+      String msg \u003d \"The default static user cannot carry out this operation.\";\n+      return Response.status(Status.FORBIDDEN).entity(msg).build();\n+    }\n \n     NewApplication appId \u003d createNewApplication();\n     return Response.status(Status.OK).entity(appId).build();\n \n   }\n\\ No newline at end of file\n",
      "actualSource": "  public Response createNewApplication(@Context HttpServletRequest hsr)\n      throws AuthorizationException, IOException, InterruptedException {\n    init();\n    UserGroupInformation callerUGI \u003d getCallerUserGroupInformation(hsr, true);\n    if (callerUGI \u003d\u003d null) {\n      throw new AuthorizationException(\"Unable to obtain user name, \"\n          + \"user not authenticated\");\n    }\n    if (UserGroupInformation.isSecurityEnabled() \u0026\u0026 isStaticUser(callerUGI)) {\n      String msg \u003d \"The default static user cannot carry out this operation.\";\n      return Response.status(Status.FORBIDDEN).entity(msg).build();\n    }\n\n    NewApplication appId \u003d createNewApplication();\n    return Response.status(Status.OK).entity(appId).build();\n\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/RMWebServices.java",
      "extendedDetails": {}
    },
    "030580387a4d8d97560a93da2fd7494b4366e3b6": {
      "type": "Ybodychange",
      "commitMessage": "YARN-2233. Implemented ResourceManager web-services to create, renew and cancel delegation tokens. Contributed by Varun Vasudev.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1610876 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "15/07/14 4:00 PM",
      "commitName": "030580387a4d8d97560a93da2fd7494b4366e3b6",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "commitDateOld": "01/07/14 5:23 PM",
      "commitNameOld": "075ff276ca9e8c192717a50b0e18485afc8571a6",
      "commitAuthorOld": "Vinod Kumar Vavilapalli",
      "daysBetweenCommits": 13.94,
      "commitsBetweenForRepo": 91,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,13 +1,13 @@\n   public Response createNewApplication(@Context HttpServletRequest hsr)\n       throws AuthorizationException, IOException, InterruptedException {\n     init();\n-    UserGroupInformation callerUGI \u003d getCallerUserGroupInformation(hsr);\n+    UserGroupInformation callerUGI \u003d getCallerUserGroupInformation(hsr, true);\n     if (callerUGI \u003d\u003d null) {\n       throw new AuthorizationException(\"Unable to obtain user name, \"\n           + \"user not authenticated\");\n     }\n \n     NewApplication appId \u003d createNewApplication();\n     return Response.status(Status.OK).entity(appId).build();\n \n   }\n\\ No newline at end of file\n",
      "actualSource": "  public Response createNewApplication(@Context HttpServletRequest hsr)\n      throws AuthorizationException, IOException, InterruptedException {\n    init();\n    UserGroupInformation callerUGI \u003d getCallerUserGroupInformation(hsr, true);\n    if (callerUGI \u003d\u003d null) {\n      throw new AuthorizationException(\"Unable to obtain user name, \"\n          + \"user not authenticated\");\n    }\n\n    NewApplication appId \u003d createNewApplication();\n    return Response.status(Status.OK).entity(appId).build();\n\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/RMWebServices.java",
      "extendedDetails": {}
    },
    "075ff276ca9e8c192717a50b0e18485afc8571a6": {
      "type": "Yintroduced",
      "commitMessage": "YARN-1713. Added get-new-app and submit-app functionality to RM web services. Contributed by Varun Vasudev.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1607216 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "01/07/14 5:23 PM",
      "commitName": "075ff276ca9e8c192717a50b0e18485afc8571a6",
      "commitAuthor": "Vinod Kumar Vavilapalli",
      "diff": "@@ -0,0 +1,13 @@\n+  public Response createNewApplication(@Context HttpServletRequest hsr)\n+      throws AuthorizationException, IOException, InterruptedException {\n+    init();\n+    UserGroupInformation callerUGI \u003d getCallerUserGroupInformation(hsr);\n+    if (callerUGI \u003d\u003d null) {\n+      throw new AuthorizationException(\"Unable to obtain user name, \"\n+          + \"user not authenticated\");\n+    }\n+\n+    NewApplication appId \u003d createNewApplication();\n+    return Response.status(Status.OK).entity(appId).build();\n+\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public Response createNewApplication(@Context HttpServletRequest hsr)\n      throws AuthorizationException, IOException, InterruptedException {\n    init();\n    UserGroupInformation callerUGI \u003d getCallerUserGroupInformation(hsr);\n    if (callerUGI \u003d\u003d null) {\n      throw new AuthorizationException(\"Unable to obtain user name, \"\n          + \"user not authenticated\");\n    }\n\n    NewApplication appId \u003d createNewApplication();\n    return Response.status(Status.OK).entity(appId).build();\n\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/RMWebServices.java"
    }
  }
}