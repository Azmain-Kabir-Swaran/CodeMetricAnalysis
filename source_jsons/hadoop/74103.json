{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "HadoopKerberosName.java",
  "functionName": "setConfiguration",
  "functionId": "setConfiguration___conf-Configuration",
  "sourceFilePath": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/HadoopKerberosName.java",
  "functionStartLine": 63,
  "functionEndLine": 85,
  "numCommitsSeen": 10,
  "timeTaken": 1511,
  "changeHistory": [
    "d43af8b3db4743b4b240751b6f29de6c20cfd6e5",
    "7eb7b3b723c524ece8ef2247943eb631fefcfe41",
    "161ed29087030170651e874e9e1e49f7d1ef689f",
    "66fce20802653ebed492024b01441644e028036a",
    "58361d3f34a3598b55944c37623052cbb0d1659d",
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1",
    "a0f120ce68dddb0cb31b64c89f3224313f3cb5af"
  ],
  "changeHistoryShort": {
    "d43af8b3db4743b4b240751b6f29de6c20cfd6e5": "Ybodychange",
    "7eb7b3b723c524ece8ef2247943eb631fefcfe41": "Ybodychange",
    "161ed29087030170651e874e9e1e49f7d1ef689f": "Ybodychange",
    "66fce20802653ebed492024b01441644e028036a": "Ybodychange",
    "58361d3f34a3598b55944c37623052cbb0d1659d": "Ybodychange",
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1": "Yfilerename",
    "a0f120ce68dddb0cb31b64c89f3224313f3cb5af": "Yintroduced"
  },
  "changeHistoryDetails": {
    "d43af8b3db4743b4b240751b6f29de6c20cfd6e5": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-15996.  Improved Kerberos username mapping strategy in Hadoop.\n               Contributed by Bolke de Bruin\n",
      "commitDate": "04/01/19 2:54 PM",
      "commitName": "d43af8b3db4743b4b240751b6f29de6c20cfd6e5",
      "commitAuthor": "Eric Yang",
      "commitDateOld": "10/10/18 9:51 PM",
      "commitNameOld": "7b57f2f71fbaa5af4897309597cca70a95b04edd",
      "commitAuthorOld": "Takanobu Asanuma",
      "daysBetweenCommits": 85.75,
      "commitsBetweenForRepo": 634,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,20 +1,23 @@\n   public static void setConfiguration(Configuration conf) throws IOException {\n     final String defaultRule;\n     switch (SecurityUtil.getAuthenticationMethod(conf)) {\n       case KERBEROS:\n       case KERBEROS_SSL:\n         try {\n           KerberosUtil.getDefaultRealm();\n         } catch (Exception ke) {\n           throw new IllegalArgumentException(\"Can\u0027t get Kerberos realm\", ke);\n         }\n         defaultRule \u003d \"DEFAULT\";\n         break;\n       default:\n         // just extract the simple user name\n         defaultRule \u003d \"RULE:[1:$1] RULE:[2:$1]\";\n         break; \n     }\n     String ruleString \u003d conf.get(HADOOP_SECURITY_AUTH_TO_LOCAL, defaultRule);\n     setRules(ruleString);\n+\n+    String ruleMechanism \u003d conf.get(HADOOP_SECURITY_AUTH_TO_LOCAL_MECHANISM,  DEFAULT_MECHANISM);\n+    setRuleMechanism(ruleMechanism);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void setConfiguration(Configuration conf) throws IOException {\n    final String defaultRule;\n    switch (SecurityUtil.getAuthenticationMethod(conf)) {\n      case KERBEROS:\n      case KERBEROS_SSL:\n        try {\n          KerberosUtil.getDefaultRealm();\n        } catch (Exception ke) {\n          throw new IllegalArgumentException(\"Can\u0027t get Kerberos realm\", ke);\n        }\n        defaultRule \u003d \"DEFAULT\";\n        break;\n      default:\n        // just extract the simple user name\n        defaultRule \u003d \"RULE:[1:$1] RULE:[2:$1]\";\n        break; \n    }\n    String ruleString \u003d conf.get(HADOOP_SECURITY_AUTH_TO_LOCAL, defaultRule);\n    setRules(ruleString);\n\n    String ruleMechanism \u003d conf.get(HADOOP_SECURITY_AUTH_TO_LOCAL_MECHANISM,  DEFAULT_MECHANISM);\n    setRuleMechanism(ruleMechanism);\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/HadoopKerberosName.java",
      "extendedDetails": {}
    },
    "7eb7b3b723c524ece8ef2247943eb631fefcfe41": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-9299.  kerberos name resolution is kicking in even when kerberos is not configured (daryn)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1457763 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "18/03/13 6:46 AM",
      "commitName": "7eb7b3b723c524ece8ef2247943eb631fefcfe41",
      "commitAuthor": "Daryn Sharp",
      "commitDateOld": "02/07/12 3:46 PM",
      "commitNameOld": "161ed29087030170651e874e9e1e49f7d1ef689f",
      "commitAuthorOld": "Eli Collins",
      "daysBetweenCommits": 258.62,
      "commitsBetweenForRepo": 1339,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,4 +1,20 @@\n   public static void setConfiguration(Configuration conf) throws IOException {\n-    String ruleString \u003d conf.get(CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTH_TO_LOCAL, \"DEFAULT\");\n+    final String defaultRule;\n+    switch (SecurityUtil.getAuthenticationMethod(conf)) {\n+      case KERBEROS:\n+      case KERBEROS_SSL:\n+        try {\n+          KerberosUtil.getDefaultRealm();\n+        } catch (Exception ke) {\n+          throw new IllegalArgumentException(\"Can\u0027t get Kerberos realm\", ke);\n+        }\n+        defaultRule \u003d \"DEFAULT\";\n+        break;\n+      default:\n+        // just extract the simple user name\n+        defaultRule \u003d \"RULE:[1:$1] RULE:[2:$1]\";\n+        break; \n+    }\n+    String ruleString \u003d conf.get(HADOOP_SECURITY_AUTH_TO_LOCAL, defaultRule);\n     setRules(ruleString);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void setConfiguration(Configuration conf) throws IOException {\n    final String defaultRule;\n    switch (SecurityUtil.getAuthenticationMethod(conf)) {\n      case KERBEROS:\n      case KERBEROS_SSL:\n        try {\n          KerberosUtil.getDefaultRealm();\n        } catch (Exception ke) {\n          throw new IllegalArgumentException(\"Can\u0027t get Kerberos realm\", ke);\n        }\n        defaultRule \u003d \"DEFAULT\";\n        break;\n      default:\n        // just extract the simple user name\n        defaultRule \u003d \"RULE:[1:$1] RULE:[2:$1]\";\n        break; \n    }\n    String ruleString \u003d conf.get(HADOOP_SECURITY_AUTH_TO_LOCAL, defaultRule);\n    setRules(ruleString);\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/HadoopKerberosName.java",
      "extendedDetails": {}
    },
    "161ed29087030170651e874e9e1e49f7d1ef689f": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-8463. hadoop.security.auth_to_local needs a key definition and doc. Contributed by Madhukara Phatak\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1356513 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "02/07/12 3:46 PM",
      "commitName": "161ed29087030170651e874e9e1e49f7d1ef689f",
      "commitAuthor": "Eli Collins",
      "commitDateOld": "15/03/12 6:45 PM",
      "commitNameOld": "2a0147f8f698f22e61281c06691107e24a2f139c",
      "commitAuthorOld": "Devaraj Das",
      "daysBetweenCommits": 108.88,
      "commitsBetweenForRepo": 671,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,4 +1,4 @@\n   public static void setConfiguration(Configuration conf) throws IOException {\n-    String ruleString \u003d conf.get(\"hadoop.security.auth_to_local\", \"DEFAULT\");\n+    String ruleString \u003d conf.get(CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTH_TO_LOCAL, \"DEFAULT\");\n     setRules(ruleString);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void setConfiguration(Configuration conf) throws IOException {\n    String ruleString \u003d conf.get(CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTH_TO_LOCAL, \"DEFAULT\");\n    setRules(ruleString);\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/HadoopKerberosName.java",
      "extendedDetails": {}
    },
    "66fce20802653ebed492024b01441644e028036a": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-7902. skipping name rules setting (if already set) should be done on UGI initialization only. (tucu)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1212591 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "09/12/11 11:28 AM",
      "commitName": "66fce20802653ebed492024b01441644e028036a",
      "commitAuthor": "Alejandro Abdelnur",
      "commitDateOld": "07/12/11 2:17 PM",
      "commitNameOld": "58361d3f34a3598b55944c37623052cbb0d1659d",
      "commitAuthorOld": "Alejandro Abdelnur",
      "daysBetweenCommits": 1.88,
      "commitsBetweenForRepo": 14,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,6 +1,4 @@\n   public static void setConfiguration(Configuration conf) throws IOException {\n-    if (!hasRulesBeenSet()) {\n-      String ruleString \u003d conf.get(\"hadoop.security.auth_to_local\", \"DEFAULT\");\n-      setRules(ruleString);\n-    }\n+    String ruleString \u003d conf.get(\"hadoop.security.auth_to_local\", \"DEFAULT\");\n+    setRules(ruleString);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void setConfiguration(Configuration conf) throws IOException {\n    String ruleString \u003d conf.get(\"hadoop.security.auth_to_local\", \"DEFAULT\");\n    setRules(ruleString);\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/HadoopKerberosName.java",
      "extendedDetails": {}
    },
    "58361d3f34a3598b55944c37623052cbb0d1659d": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-7887. KerberosAuthenticatorHandler is not setting KerberosName name rules from configuration. (tucu)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1211673 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "07/12/11 2:17 PM",
      "commitName": "58361d3f34a3598b55944c37623052cbb0d1659d",
      "commitAuthor": "Alejandro Abdelnur",
      "commitDateOld": "31/08/11 3:40 PM",
      "commitNameOld": "2b016dac8232e0f5c43293adcbdf7164f5fca74c",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 97.98,
      "commitsBetweenForRepo": 668,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,4 +1,6 @@\n   public static void setConfiguration(Configuration conf) throws IOException {\n-    String ruleString \u003d conf.get(\"hadoop.security.auth_to_local\", \"DEFAULT\");\n-    setRules(ruleString);\n+    if (!hasRulesBeenSet()) {\n+      String ruleString \u003d conf.get(\"hadoop.security.auth_to_local\", \"DEFAULT\");\n+      setRules(ruleString);\n+    }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static void setConfiguration(Configuration conf) throws IOException {\n    if (!hasRulesBeenSet()) {\n      String ruleString \u003d conf.get(\"hadoop.security.auth_to_local\", \"DEFAULT\");\n      setRules(ruleString);\n    }\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/HadoopKerberosName.java",
      "extendedDetails": {}
    },
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1": {
      "type": "Yfilerename",
      "commitMessage": "HADOOP-7560. Change src layout to be heirarchical. Contributed by Alejandro Abdelnur.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1161332 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/08/11 5:14 PM",
      "commitName": "cd7157784e5e5ddc4e77144d042e54dd0d04bac1",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "24/08/11 5:06 PM",
      "commitNameOld": "bb0005cfec5fd2861600ff5babd259b48ba18b63",
      "commitAuthorOld": "Arun Murthy",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  public static void setConfiguration(Configuration conf) throws IOException {\n    String ruleString \u003d conf.get(\"hadoop.security.auth_to_local\", \"DEFAULT\");\n    setRules(ruleString);\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/HadoopKerberosName.java",
      "extendedDetails": {
        "oldPath": "hadoop-common/src/main/java/org/apache/hadoop/security/HadoopKerberosName.java",
        "newPath": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/security/HadoopKerberosName.java"
      }
    },
    "a0f120ce68dddb0cb31b64c89f3224313f3cb5af": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-7119. add Kerberos HTTP SPNEGO authentication support to Hadoop JT/NN/DN/TT web-consoles. (Alejandro Abdelnur via atm)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1159804 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "19/08/11 3:31 PM",
      "commitName": "a0f120ce68dddb0cb31b64c89f3224313f3cb5af",
      "commitAuthor": "Aaron Myers",
      "diff": "@@ -0,0 +1,4 @@\n+  public static void setConfiguration(Configuration conf) throws IOException {\n+    String ruleString \u003d conf.get(\"hadoop.security.auth_to_local\", \"DEFAULT\");\n+    setRules(ruleString);\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public static void setConfiguration(Configuration conf) throws IOException {\n    String ruleString \u003d conf.get(\"hadoop.security.auth_to_local\", \"DEFAULT\");\n    setRules(ruleString);\n  }",
      "path": "hadoop-common/src/main/java/org/apache/hadoop/security/HadoopKerberosName.java"
    }
  }
}