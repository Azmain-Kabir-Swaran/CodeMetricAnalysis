{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "RMAppAttemptBlock.java",
  "functionName": "createDiagnosticsTable",
  "functionId": "createDiagnosticsTable___html-Block__parentDiv-DIV__Hamlet__",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/RMAppAttemptBlock.java",
  "functionStartLine": 542,
  "functionEndLine": 588,
  "numCommitsSeen": 17,
  "timeTaken": 2129,
  "changeHistory": [
    "b9d825f178809148a157055509bdceffd46095ca"
  ],
  "changeHistoryShort": {
    "b9d825f178809148a157055509bdceffd46095ca": "Yintroduced"
  },
  "changeHistoryDetails": {
    "b9d825f178809148a157055509bdceffd46095ca": {
      "type": "Yintroduced",
      "commitMessage": "YARN-9567. Add diagnostics for outstanding resource requests on app attempts page. Contributed by Tao Yang.\n",
      "commitDate": "13/03/20 2:39 PM",
      "commitName": "b9d825f178809148a157055509bdceffd46095ca",
      "commitAuthor": "Weiwei Yang",
      "diff": "@@ -0,0 +1,47 @@\n+  private void createDiagnosticsTable(Block html, DIV\u003cHamlet\u003e parentDiv) {\n+    if (!(rm.getResourceScheduler() instanceof CapacityScheduler)) {\n+      return;\n+    }\n+    String appActivitiesURL \u003d\n+        new StringBuilder().append(RMWSConsts.RM_WEB_SERVICE_PATH).append(\n+            RMWSConsts.SCHEDULER_APP_ACTIVITIES.replace(\"{appid}\",\n+                this.appAttemptId.getApplicationId().toString())).append(\"?\")\n+            .toString();\n+    String refreshAppActivitiesURL \u003d appActivitiesURL + \"actions\u003drefresh\";\n+    String getAppActivitiesURL \u003d appActivitiesURL\n+        + \"actions\u003dget\u0026groupBy\u003ddiagnostic\u0026summarize\u003dtrue\";\n+    String refreshAndGetAppActivitiesURL \u003d appActivitiesURL\n+        + \"actions\u003drefresh\u0026actions\u003dget\u0026groupBy\u003ddiagnostic\u0026summarize\u003dtrue\";\n+    String schedulerActivitiesURL \u003d\n+        new StringBuilder().append(RMWSConsts.RM_WEB_SERVICE_PATH)\n+            .append(RMWSConsts.SCHEDULER_ACTIVITIES).append(\"?\")\n+            .append(RMWSConsts.GROUP_BY).append(\"\u003ddiagnostic\").toString();\n+\n+    DIV\u003cDIV\u003cHamlet\u003e\u003e div \u003d parentDiv.div();\n+    div.p().__(\"Diagnostics in cache \").__(\"(For more details refer to \")\n+        .a(refreshAndGetAppActivitiesURL, \"App Activities\").__(\" or \")\n+        .a(schedulerActivitiesURL, \"Scheduler Activities\").__(\")\").__();\n+    div.button().$id(\"refreshDiagnosticsBtn\")\n+        .$style(\"border-style: solid; border-color: #000000; border-width: 1px;\"\n+                + \" cursor: hand; cursor: pointer; border-radius: 4px\")\n+        .$onclick(\"refreshAppDiagnostics()\").b(\"Refresh\").__();\n+    div.p().$id(\"diagnosticsUpdateTime\").__();\n+    div.p().$id(\"appDiagnostic\").__();\n+    div.div(\"#diagnosticsTableDiv\").__();\n+\n+    div.__();\n+\n+    StringBuilder script \u003d new StringBuilder();\n+    script\n+        .append(\"var refreshAppActivitiesURL \u003d \u0027\")\n+        .append(refreshAppActivitiesURL).append(\"\u0027;\")\n+        .append(\"var getAppActivitiesURL \u003d \u0027\")\n+        .append(getAppActivitiesURL).append(\"\u0027;\")\n+        .append(\"var schedulerActivitiesURL \u003d \u0027\")\n+        .append(schedulerActivitiesURL).append(\"\u0027;\")\n+        .append(\"var ignoreActivityContent \u003d \u0027\")\n+        .append(\"does not need more resource\u0027;\")\n+        .append(DIAGNOSTICS_SCRIPT_BODY);\n+\n+    html.script().$type(\"text/javascript\").__(script.toString()).__();\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private void createDiagnosticsTable(Block html, DIV\u003cHamlet\u003e parentDiv) {\n    if (!(rm.getResourceScheduler() instanceof CapacityScheduler)) {\n      return;\n    }\n    String appActivitiesURL \u003d\n        new StringBuilder().append(RMWSConsts.RM_WEB_SERVICE_PATH).append(\n            RMWSConsts.SCHEDULER_APP_ACTIVITIES.replace(\"{appid}\",\n                this.appAttemptId.getApplicationId().toString())).append(\"?\")\n            .toString();\n    String refreshAppActivitiesURL \u003d appActivitiesURL + \"actions\u003drefresh\";\n    String getAppActivitiesURL \u003d appActivitiesURL\n        + \"actions\u003dget\u0026groupBy\u003ddiagnostic\u0026summarize\u003dtrue\";\n    String refreshAndGetAppActivitiesURL \u003d appActivitiesURL\n        + \"actions\u003drefresh\u0026actions\u003dget\u0026groupBy\u003ddiagnostic\u0026summarize\u003dtrue\";\n    String schedulerActivitiesURL \u003d\n        new StringBuilder().append(RMWSConsts.RM_WEB_SERVICE_PATH)\n            .append(RMWSConsts.SCHEDULER_ACTIVITIES).append(\"?\")\n            .append(RMWSConsts.GROUP_BY).append(\"\u003ddiagnostic\").toString();\n\n    DIV\u003cDIV\u003cHamlet\u003e\u003e div \u003d parentDiv.div();\n    div.p().__(\"Diagnostics in cache \").__(\"(For more details refer to \")\n        .a(refreshAndGetAppActivitiesURL, \"App Activities\").__(\" or \")\n        .a(schedulerActivitiesURL, \"Scheduler Activities\").__(\")\").__();\n    div.button().$id(\"refreshDiagnosticsBtn\")\n        .$style(\"border-style: solid; border-color: #000000; border-width: 1px;\"\n                + \" cursor: hand; cursor: pointer; border-radius: 4px\")\n        .$onclick(\"refreshAppDiagnostics()\").b(\"Refresh\").__();\n    div.p().$id(\"diagnosticsUpdateTime\").__();\n    div.p().$id(\"appDiagnostic\").__();\n    div.div(\"#diagnosticsTableDiv\").__();\n\n    div.__();\n\n    StringBuilder script \u003d new StringBuilder();\n    script\n        .append(\"var refreshAppActivitiesURL \u003d \u0027\")\n        .append(refreshAppActivitiesURL).append(\"\u0027;\")\n        .append(\"var getAppActivitiesURL \u003d \u0027\")\n        .append(getAppActivitiesURL).append(\"\u0027;\")\n        .append(\"var schedulerActivitiesURL \u003d \u0027\")\n        .append(schedulerActivitiesURL).append(\"\u0027;\")\n        .append(\"var ignoreActivityContent \u003d \u0027\")\n        .append(\"does not need more resource\u0027;\")\n        .append(DIAGNOSTICS_SCRIPT_BODY);\n\n    html.script().$type(\"text/javascript\").__(script.toString()).__();\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/webapp/RMAppAttemptBlock.java"
    }
  }
}