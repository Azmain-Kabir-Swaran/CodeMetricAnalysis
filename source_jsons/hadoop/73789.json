{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "Server.java",
  "functionName": "refreshCallQueue",
  "functionId": "refreshCallQueue___conf-Configuration",
  "sourceFilePath": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ipc/Server.java",
  "functionStartLine": 731,
  "functionEndLine": 740,
  "numCommitsSeen": 162,
  "timeTaken": 4975,
  "changeHistory": [
    "8c95cb9d6bef369fef6a8364f0c0764eba90e44a",
    "acfd764fcc9990e507c0e7cea746652375aaa632",
    "d95c6eb32cec7768ac418fb467b1198ccf3cf0dc",
    "37cb314f79f515421cfc2c3605382bf1534dc266",
    "d61d1c120d5cecc97514e2f8d79dacdbd4e610a3"
  ],
  "changeHistoryShort": {
    "8c95cb9d6bef369fef6a8364f0c0764eba90e44a": "Ybodychange",
    "acfd764fcc9990e507c0e7cea746652375aaa632": "Ybodychange",
    "d95c6eb32cec7768ac418fb467b1198ccf3cf0dc": "Ybodychange",
    "37cb314f79f515421cfc2c3605382bf1534dc266": "Ybodychange",
    "d61d1c120d5cecc97514e2f8d79dacdbd4e610a3": "Yintroduced"
  },
  "changeHistoryDetails": {
    "8c95cb9d6bef369fef6a8364f0c0764eba90e44a": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-16192. Fix CallQueue backoff bugs: perform backoff when add() is used and update backoff when refreshed.\n",
      "commitDate": "18/03/19 8:13 AM",
      "commitName": "8c95cb9d6bef369fef6a8364f0c0764eba90e44a",
      "commitAuthor": "Erik Krogen",
      "commitDateOld": "11/03/19 1:48 PM",
      "commitNameOld": "4ad295a4f1c202f08e40a57f31c1dc1ade96a4ca",
      "commitAuthorOld": "Konstantin V Shvachko",
      "daysBetweenCommits": 6.77,
      "commitsBetweenForRepo": 56,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,9 +1,10 @@\n   public synchronized void refreshCallQueue(Configuration conf) {\n     // Create the next queue\n     String prefix \u003d getQueueClassPrefix();\n     this.maxQueueSize \u003d handlerCount * conf.getInt(\n         CommonConfigurationKeys.IPC_SERVER_HANDLER_QUEUE_SIZE_KEY,\n         CommonConfigurationKeys.IPC_SERVER_HANDLER_QUEUE_SIZE_DEFAULT);\n     callQueue.swapQueue(getSchedulerClass(prefix, conf),\n         getQueueClass(prefix, conf), maxQueueSize, prefix, conf);\n+    callQueue.setClientBackoffEnabled(getClientBackoffEnable(prefix, conf));\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public synchronized void refreshCallQueue(Configuration conf) {\n    // Create the next queue\n    String prefix \u003d getQueueClassPrefix();\n    this.maxQueueSize \u003d handlerCount * conf.getInt(\n        CommonConfigurationKeys.IPC_SERVER_HANDLER_QUEUE_SIZE_KEY,\n        CommonConfigurationKeys.IPC_SERVER_HANDLER_QUEUE_SIZE_DEFAULT);\n    callQueue.swapQueue(getSchedulerClass(prefix, conf),\n        getQueueClass(prefix, conf), maxQueueSize, prefix, conf);\n    callQueue.setClientBackoffEnabled(getClientBackoffEnable(prefix, conf));\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ipc/Server.java",
      "extendedDetails": {}
    },
    "acfd764fcc9990e507c0e7cea746652375aaa632": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-15253. Should update maxQueueSize when refresh call queue. Contributed by Tao Jie.",
      "commitDate": "30/03/18 6:55 PM",
      "commitName": "acfd764fcc9990e507c0e7cea746652375aaa632",
      "commitAuthor": "Konstantin V Shvachko",
      "commitDateOld": "17/07/17 9:32 PM",
      "commitNameOld": "ccaf036662e22da14583942054898c99fa51dae5",
      "commitAuthorOld": "Akira Ajisaka",
      "daysBetweenCommits": 255.89,
      "commitsBetweenForRepo": 2015,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,6 +1,9 @@\n   public synchronized void refreshCallQueue(Configuration conf) {\n     // Create the next queue\n     String prefix \u003d getQueueClassPrefix();\n+    this.maxQueueSize \u003d handlerCount * conf.getInt(\n+        CommonConfigurationKeys.IPC_SERVER_HANDLER_QUEUE_SIZE_KEY,\n+        CommonConfigurationKeys.IPC_SERVER_HANDLER_QUEUE_SIZE_DEFAULT);\n     callQueue.swapQueue(getSchedulerClass(prefix, conf),\n         getQueueClass(prefix, conf), maxQueueSize, prefix, conf);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public synchronized void refreshCallQueue(Configuration conf) {\n    // Create the next queue\n    String prefix \u003d getQueueClassPrefix();\n    this.maxQueueSize \u003d handlerCount * conf.getInt(\n        CommonConfigurationKeys.IPC_SERVER_HANDLER_QUEUE_SIZE_KEY,\n        CommonConfigurationKeys.IPC_SERVER_HANDLER_QUEUE_SIZE_DEFAULT);\n    callQueue.swapQueue(getSchedulerClass(prefix, conf),\n        getQueueClass(prefix, conf), maxQueueSize, prefix, conf);\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ipc/Server.java",
      "extendedDetails": {}
    },
    "d95c6eb32cec7768ac418fb467b1198ccf3cf0dc": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-12916. Allow RPC scheduler/callqueue backoff using response times. Contributed by Xiaoyu Yao.\n",
      "commitDate": "31/03/16 8:42 AM",
      "commitName": "d95c6eb32cec7768ac418fb467b1198ccf3cf0dc",
      "commitAuthor": "Xiaoyu Yao",
      "commitDateOld": "08/03/16 11:29 PM",
      "commitNameOld": "2e040d31c7bba021576e6baf267d937da7ff814a",
      "commitAuthorOld": "Arpit Agarwal",
      "daysBetweenCommits": 22.34,
      "commitsBetweenForRepo": 115,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,5 +1,6 @@\n   public synchronized void refreshCallQueue(Configuration conf) {\n     // Create the next queue\n     String prefix \u003d getQueueClassPrefix();\n-    callQueue.swapQueue(getQueueClass(prefix, conf), maxQueueSize, prefix, conf);\n+    callQueue.swapQueue(getSchedulerClass(prefix, conf),\n+        getQueueClass(prefix, conf), maxQueueSize, prefix, conf);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public synchronized void refreshCallQueue(Configuration conf) {\n    // Create the next queue\n    String prefix \u003d getQueueClassPrefix();\n    callQueue.swapQueue(getSchedulerClass(prefix, conf),\n        getQueueClass(prefix, conf), maxQueueSize, prefix, conf);\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ipc/Server.java",
      "extendedDetails": {}
    },
    "37cb314f79f515421cfc2c3605382bf1534dc266": {
      "type": "Ybodychange",
      "commitMessage": "HADOOP-10407. Fix the javac warnings in org.apache.hadoop.ipc package.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1577710 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "14/03/14 2:12 PM",
      "commitName": "37cb314f79f515421cfc2c3605382bf1534dc266",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "21/02/14 12:53 PM",
      "commitNameOld": "d61d1c120d5cecc97514e2f8d79dacdbd4e610a3",
      "commitAuthorOld": "Arpit Agarwal",
      "daysBetweenCommits": 21.01,
      "commitsBetweenForRepo": 194,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,9 +1,5 @@\n   public synchronized void refreshCallQueue(Configuration conf) {\n     // Create the next queue\n-    String prefix \u003d CommonConfigurationKeys.IPC_CALLQUEUE_NAMESPACE + \".\" +\n-      this.port;\n-    Class queueClassToUse \u003d conf.getClass(prefix + \".\" +\n-      CommonConfigurationKeys.IPC_CALLQUEUE_IMPL_KEY, LinkedBlockingQueue.class);\n-\n-    callQueue.swapQueue(queueClassToUse, maxQueueSize, prefix, conf);\n+    String prefix \u003d getQueueClassPrefix();\n+    callQueue.swapQueue(getQueueClass(prefix, conf), maxQueueSize, prefix, conf);\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public synchronized void refreshCallQueue(Configuration conf) {\n    // Create the next queue\n    String prefix \u003d getQueueClassPrefix();\n    callQueue.swapQueue(getQueueClass(prefix, conf), maxQueueSize, prefix, conf);\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ipc/Server.java",
      "extendedDetails": {}
    },
    "d61d1c120d5cecc97514e2f8d79dacdbd4e610a3": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-10278. Refactor to make CallQueue pluggable. (Contributed by Chris Li)\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1570703 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "21/02/14 12:53 PM",
      "commitName": "d61d1c120d5cecc97514e2f8d79dacdbd4e610a3",
      "commitAuthor": "Arpit Agarwal",
      "diff": "@@ -0,0 +1,9 @@\n+  public synchronized void refreshCallQueue(Configuration conf) {\n+    // Create the next queue\n+    String prefix \u003d CommonConfigurationKeys.IPC_CALLQUEUE_NAMESPACE + \".\" +\n+      this.port;\n+    Class queueClassToUse \u003d conf.getClass(prefix + \".\" +\n+      CommonConfigurationKeys.IPC_CALLQUEUE_IMPL_KEY, LinkedBlockingQueue.class);\n+\n+    callQueue.swapQueue(queueClassToUse, maxQueueSize, prefix, conf);\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public synchronized void refreshCallQueue(Configuration conf) {\n    // Create the next queue\n    String prefix \u003d CommonConfigurationKeys.IPC_CALLQUEUE_NAMESPACE + \".\" +\n      this.port;\n    Class queueClassToUse \u003d conf.getClass(prefix + \".\" +\n      CommonConfigurationKeys.IPC_CALLQUEUE_IMPL_KEY, LinkedBlockingQueue.class);\n\n    callQueue.swapQueue(queueClassToUse, maxQueueSize, prefix, conf);\n  }",
      "path": "hadoop-common-project/hadoop-common/src/main/java/org/apache/hadoop/ipc/Server.java"
    }
  }
}