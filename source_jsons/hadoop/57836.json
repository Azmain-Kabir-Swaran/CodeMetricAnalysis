{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "WebAppUtils.java",
  "functionName": "execOnActiveRM",
  "functionId": "execOnActiveRM___conf-Configuration__func-ThrowingBiFunction__String,T,R____arg-T",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/webapp/util/WebAppUtils.java",
  "functionStartLine": 98,
  "functionEndLine": 118,
  "numCommitsSeen": 29,
  "timeTaken": 3768,
  "changeHistory": [
    "f02b0e19940dc6fc1e19258a40db37d1eed89d21",
    "cb9bc6e64c590622ae04aea2c81962be59037f7a"
  ],
  "changeHistoryShort": {
    "f02b0e19940dc6fc1e19258a40db37d1eed89d21": "Ybodychange",
    "cb9bc6e64c590622ae04aea2c81962be59037f7a": "Yintroduced"
  },
  "changeHistoryDetails": {
    "f02b0e19940dc6fc1e19258a40db37d1eed89d21": {
      "type": "Ybodychange",
      "commitMessage": "YARN-9581. Add support for get multiple RM webapp URLs.\n           Contributed by Prabhu Joseph\n",
      "commitDate": "28/06/19 11:54 AM",
      "commitName": "f02b0e19940dc6fc1e19258a40db37d1eed89d21",
      "commitAuthor": "Eric Yang",
      "commitDateOld": "06/06/19 1:41 PM",
      "commitNameOld": "cb9bc6e64c590622ae04aea2c81962be59037f7a",
      "commitAuthorOld": "Eric Yang",
      "daysBetweenCommits": 21.93,
      "commitsBetweenForRepo": 220,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,13 +1,21 @@\n   public static \u003cT, R\u003e R execOnActiveRM(Configuration conf,\n       ThrowingBiFunction\u003cString, T, R\u003e func, T arg) throws Exception {\n     String rm1Address \u003d getRMWebAppURLWithScheme(conf, 0);\n     try {\n       return func.apply(rm1Address, arg);\n     } catch (Exception e) {\n       if (HAUtil.isHAEnabled(conf)) {\n-        String rm2Address \u003d getRMWebAppURLWithScheme(conf, 1);\n-        return func.apply(rm2Address, arg);\n+        int rms \u003d HAUtil.getRMHAIds(conf).size();\n+        for (int i\u003d1; i\u003crms; i++) {\n+          try {\n+            rm1Address \u003d getRMWebAppURLWithScheme(conf, i);\n+            return func.apply(rm1Address, arg);\n+          } catch (Exception e1) {\n+            // ignore and try next one when RM is down\n+            e \u003d e1;\n+          }\n+        }\n       }\n       throw e;\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public static \u003cT, R\u003e R execOnActiveRM(Configuration conf,\n      ThrowingBiFunction\u003cString, T, R\u003e func, T arg) throws Exception {\n    String rm1Address \u003d getRMWebAppURLWithScheme(conf, 0);\n    try {\n      return func.apply(rm1Address, arg);\n    } catch (Exception e) {\n      if (HAUtil.isHAEnabled(conf)) {\n        int rms \u003d HAUtil.getRMHAIds(conf).size();\n        for (int i\u003d1; i\u003crms; i++) {\n          try {\n            rm1Address \u003d getRMWebAppURLWithScheme(conf, i);\n            return func.apply(rm1Address, arg);\n          } catch (Exception e1) {\n            // ignore and try next one when RM is down\n            e \u003d e1;\n          }\n        }\n      }\n      throw e;\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/webapp/util/WebAppUtils.java",
      "extendedDetails": {}
    },
    "cb9bc6e64c590622ae04aea2c81962be59037f7a": {
      "type": "Yintroduced",
      "commitMessage": "YARN-9581.  Fixed yarn logs cli to access RM2.\n            Contributed by Prabhu Joseph\n",
      "commitDate": "06/06/19 1:41 PM",
      "commitName": "cb9bc6e64c590622ae04aea2c81962be59037f7a",
      "commitAuthor": "Eric Yang",
      "diff": "@@ -0,0 +1,13 @@\n+  public static \u003cT, R\u003e R execOnActiveRM(Configuration conf,\n+      ThrowingBiFunction\u003cString, T, R\u003e func, T arg) throws Exception {\n+    String rm1Address \u003d getRMWebAppURLWithScheme(conf, 0);\n+    try {\n+      return func.apply(rm1Address, arg);\n+    } catch (Exception e) {\n+      if (HAUtil.isHAEnabled(conf)) {\n+        String rm2Address \u003d getRMWebAppURLWithScheme(conf, 1);\n+        return func.apply(rm2Address, arg);\n+      }\n+      throw e;\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  public static \u003cT, R\u003e R execOnActiveRM(Configuration conf,\n      ThrowingBiFunction\u003cString, T, R\u003e func, T arg) throws Exception {\n    String rm1Address \u003d getRMWebAppURLWithScheme(conf, 0);\n    try {\n      return func.apply(rm1Address, arg);\n    } catch (Exception e) {\n      if (HAUtil.isHAEnabled(conf)) {\n        String rm2Address \u003d getRMWebAppURLWithScheme(conf, 1);\n        return func.apply(rm2Address, arg);\n      }\n      throw e;\n    }\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-common/src/main/java/org/apache/hadoop/yarn/webapp/util/WebAppUtils.java"
    }
  }
}