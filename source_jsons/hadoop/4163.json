{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "ECPolicyLoader.java",
  "functionName": "getPolicyFile",
  "functionId": "getPolicyFile___policyFilePath-String",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/util/ECPolicyLoader.java",
  "functionStartLine": 223,
  "functionEndLine": 238,
  "numCommitsSeen": 3,
  "timeTaken": 1079,
  "changeHistory": [
    "cb672a45a0bbd8950b9b5e304c2e03f516945903",
    "b0803388fc5ec03b774aa003f52232deb8db6f69"
  ],
  "changeHistoryShort": {
    "cb672a45a0bbd8950b9b5e304c2e03f516945903": "Ymultichange(Yexceptionschange,Ybodychange)",
    "b0803388fc5ec03b774aa003f52232deb8db6f69": "Yintroduced"
  },
  "changeHistoryDetails": {
    "cb672a45a0bbd8950b9b5e304c2e03f516945903": {
      "type": "Ymultichange(Yexceptionschange,Ybodychange)",
      "commitMessage": "HDFS-11605. Allow user to customize new erasure code policies. Contributed by Huafeng Wang\n",
      "commitDate": "27/04/17 10:18 PM",
      "commitName": "cb672a45a0bbd8950b9b5e304c2e03f516945903",
      "commitAuthor": "Kai Zheng",
      "subchanges": [
        {
          "type": "Yexceptionschange",
          "commitMessage": "HDFS-11605. Allow user to customize new erasure code policies. Contributed by Huafeng Wang\n",
          "commitDate": "27/04/17 10:18 PM",
          "commitName": "cb672a45a0bbd8950b9b5e304c2e03f516945903",
          "commitAuthor": "Kai Zheng",
          "commitDateOld": "20/04/17 10:33 PM",
          "commitNameOld": "b0803388fc5ec03b774aa003f52232deb8db6f69",
          "commitAuthorOld": "Kai Zheng",
          "daysBetweenCommits": 6.99,
          "commitsBetweenForRepo": 37,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,19 +1,16 @@\n-  private File getPolicyFile(String policyFilePath) {\n+  private File getPolicyFile(String policyFilePath)\n+      throws MalformedURLException {\n     File policyFile \u003d new File(policyFilePath);\n     if (!policyFile.isAbsolute()) {\n-      URL url \u003d Thread.currentThread().getContextClassLoader()\n-          .getResource(policyFilePath);\n-      if (url \u003d\u003d null) {\n-        LOG.warn(policyFilePath + \" not found on the classpath.\");\n-        policyFile \u003d null;\n-      } else if (!url.getProtocol().equalsIgnoreCase(\"file\")) {\n+      URL url \u003d new URL(policyFilePath);\n+      if (!url.getProtocol().equalsIgnoreCase(\"file\")) {\n         throw new RuntimeException(\n             \"EC policy file \" + url\n                 + \" found on the classpath is not on the local filesystem.\");\n       } else {\n         policyFile \u003d new File(url.getPath());\n       }\n     }\n \n     return policyFile;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private File getPolicyFile(String policyFilePath)\n      throws MalformedURLException {\n    File policyFile \u003d new File(policyFilePath);\n    if (!policyFile.isAbsolute()) {\n      URL url \u003d new URL(policyFilePath);\n      if (!url.getProtocol().equalsIgnoreCase(\"file\")) {\n        throw new RuntimeException(\n            \"EC policy file \" + url\n                + \" found on the classpath is not on the local filesystem.\");\n      } else {\n        policyFile \u003d new File(url.getPath());\n      }\n    }\n\n    return policyFile;\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/util/ECPolicyLoader.java",
          "extendedDetails": {
            "oldValue": "[]",
            "newValue": "[MalformedURLException]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-11605. Allow user to customize new erasure code policies. Contributed by Huafeng Wang\n",
          "commitDate": "27/04/17 10:18 PM",
          "commitName": "cb672a45a0bbd8950b9b5e304c2e03f516945903",
          "commitAuthor": "Kai Zheng",
          "commitDateOld": "20/04/17 10:33 PM",
          "commitNameOld": "b0803388fc5ec03b774aa003f52232deb8db6f69",
          "commitAuthorOld": "Kai Zheng",
          "daysBetweenCommits": 6.99,
          "commitsBetweenForRepo": 37,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,19 +1,16 @@\n-  private File getPolicyFile(String policyFilePath) {\n+  private File getPolicyFile(String policyFilePath)\n+      throws MalformedURLException {\n     File policyFile \u003d new File(policyFilePath);\n     if (!policyFile.isAbsolute()) {\n-      URL url \u003d Thread.currentThread().getContextClassLoader()\n-          .getResource(policyFilePath);\n-      if (url \u003d\u003d null) {\n-        LOG.warn(policyFilePath + \" not found on the classpath.\");\n-        policyFile \u003d null;\n-      } else if (!url.getProtocol().equalsIgnoreCase(\"file\")) {\n+      URL url \u003d new URL(policyFilePath);\n+      if (!url.getProtocol().equalsIgnoreCase(\"file\")) {\n         throw new RuntimeException(\n             \"EC policy file \" + url\n                 + \" found on the classpath is not on the local filesystem.\");\n       } else {\n         policyFile \u003d new File(url.getPath());\n       }\n     }\n \n     return policyFile;\n   }\n\\ No newline at end of file\n",
          "actualSource": "  private File getPolicyFile(String policyFilePath)\n      throws MalformedURLException {\n    File policyFile \u003d new File(policyFilePath);\n    if (!policyFile.isAbsolute()) {\n      URL url \u003d new URL(policyFilePath);\n      if (!url.getProtocol().equalsIgnoreCase(\"file\")) {\n        throw new RuntimeException(\n            \"EC policy file \" + url\n                + \" found on the classpath is not on the local filesystem.\");\n      } else {\n        policyFile \u003d new File(url.getPath());\n      }\n    }\n\n    return policyFile;\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/util/ECPolicyLoader.java",
          "extendedDetails": {}
        }
      ]
    },
    "b0803388fc5ec03b774aa003f52232deb8db6f69": {
      "type": "Yintroduced",
      "commitMessage": "HDFS-11604. Define and parse erasure code policies. Contributed by Lin Zeng\n",
      "commitDate": "20/04/17 10:33 PM",
      "commitName": "b0803388fc5ec03b774aa003f52232deb8db6f69",
      "commitAuthor": "Kai Zheng",
      "diff": "@@ -0,0 +1,19 @@\n+  private File getPolicyFile(String policyFilePath) {\n+    File policyFile \u003d new File(policyFilePath);\n+    if (!policyFile.isAbsolute()) {\n+      URL url \u003d Thread.currentThread().getContextClassLoader()\n+          .getResource(policyFilePath);\n+      if (url \u003d\u003d null) {\n+        LOG.warn(policyFilePath + \" not found on the classpath.\");\n+        policyFile \u003d null;\n+      } else if (!url.getProtocol().equalsIgnoreCase(\"file\")) {\n+        throw new RuntimeException(\n+            \"EC policy file \" + url\n+                + \" found on the classpath is not on the local filesystem.\");\n+      } else {\n+        policyFile \u003d new File(url.getPath());\n+      }\n+    }\n+\n+    return policyFile;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  private File getPolicyFile(String policyFilePath) {\n    File policyFile \u003d new File(policyFilePath);\n    if (!policyFile.isAbsolute()) {\n      URL url \u003d Thread.currentThread().getContextClassLoader()\n          .getResource(policyFilePath);\n      if (url \u003d\u003d null) {\n        LOG.warn(policyFilePath + \" not found on the classpath.\");\n        policyFile \u003d null;\n      } else if (!url.getProtocol().equalsIgnoreCase(\"file\")) {\n        throw new RuntimeException(\n            \"EC policy file \" + url\n                + \" found on the classpath is not on the local filesystem.\");\n      } else {\n        policyFile \u003d new File(url.getPath());\n      }\n    }\n\n    return policyFile;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs-client/src/main/java/org/apache/hadoop/hdfs/util/ECPolicyLoader.java"
    }
  }
}