{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "FSDirectory.java",
  "functionName": "updateSpaceConsumed",
  "functionId": "updateSpaceConsumed___iip-INodesInPath__nsDelta-long__ssDelta-long__replication-short",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
  "functionStartLine": 939,
  "functionEndLine": 951,
  "numCommitsSeen": 1010,
  "timeTaken": 13344,
  "changeHistory": [
    "f2231cebcddc80f0b753c4a7cb45ee4040846951",
    "5dae97a584d30cef3e34141edfaca49c4ec57913",
    "c78e3a7cdd10c40454e9acb06986ba6d8573cb19",
    "0689363343a281a6f7f6f395227668bddc2663eb",
    "2372e394dd99d69d396327d5a5e172953a8b8c6a",
    "9047eb516261b8c9c380d140a43dfdd5d701dee5",
    "34413c2000d9262faa37fde88a72939587edc776",
    "7ee5ce3176a74d217551b5981f809a56c719424b",
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1",
    "d86f3183d93714ba078416af4f609d26376eadb0",
    "5d5b1c6c10c66c6a17b483a3e1a98d59d3d0bdee",
    "09b6f98de431628c80bc8a6faf0070eeaf72ff2a",
    "97b6ca4dd7d1233e8f8c90b1c01e47228c044e13",
    "1bcfe45e47775b98cce5541f328c4fd46e5eb13d",
    "a196766ea07775f18ded69bd9e8d239f8cfd3ccc"
  ],
  "changeHistoryShort": {
    "f2231cebcddc80f0b753c4a7cb45ee4040846951": "Ymultichange(Yparameterchange,Ybodychange)",
    "5dae97a584d30cef3e34141edfaca49c4ec57913": "Ymultichange(Yparameterchange,Ybodychange)",
    "c78e3a7cdd10c40454e9acb06986ba6d8573cb19": "Ymultichange(Yparameterchange,Ybodychange)",
    "0689363343a281a6f7f6f395227668bddc2663eb": "Ybodychange",
    "2372e394dd99d69d396327d5a5e172953a8b8c6a": "Ymultichange(Yexceptionschange,Ybodychange)",
    "9047eb516261b8c9c380d140a43dfdd5d701dee5": "Ybodychange",
    "34413c2000d9262faa37fde88a72939587edc776": "Ybodychange",
    "7ee5ce3176a74d217551b5981f809a56c719424b": "Ybodychange",
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1": "Yfilerename",
    "d86f3183d93714ba078416af4f609d26376eadb0": "Yfilerename",
    "5d5b1c6c10c66c6a17b483a3e1a98d59d3d0bdee": "Ymodifierchange",
    "09b6f98de431628c80bc8a6faf0070eeaf72ff2a": "Ymodifierchange",
    "97b6ca4dd7d1233e8f8c90b1c01e47228c044e13": "Ymodifierchange",
    "1bcfe45e47775b98cce5541f328c4fd46e5eb13d": "Ymodifierchange",
    "a196766ea07775f18ded69bd9e8d239f8cfd3ccc": "Yintroduced"
  },
  "changeHistoryDetails": {
    "f2231cebcddc80f0b753c4a7cb45ee4040846951": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "HDFS-7775. Use consistent naming for NN-internal quota related types and functions. (Contributed bu Xiaoyu Yao)\n",
      "commitDate": "13/02/15 9:01 PM",
      "commitName": "f2231cebcddc80f0b753c4a7cb45ee4040846951",
      "commitAuthor": "Arpit Agarwal",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-7775. Use consistent naming for NN-internal quota related types and functions. (Contributed bu Xiaoyu Yao)\n",
          "commitDate": "13/02/15 9:01 PM",
          "commitName": "f2231cebcddc80f0b753c4a7cb45ee4040846951",
          "commitAuthor": "Arpit Agarwal",
          "commitDateOld": "11/02/15 10:41 AM",
          "commitNameOld": "5dae97a584d30cef3e34141edfaca49c4ec57913",
          "commitAuthorOld": "Arpit Agarwal",
          "daysBetweenCommits": 2.43,
          "commitsBetweenForRepo": 58,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,13 +1,13 @@\n-  void updateSpaceConsumed(INodesInPath iip, long nsDelta, long dsDelta, short replication)\n+  void updateSpaceConsumed(INodesInPath iip, long nsDelta, long ssDelta, short replication)\n     throws QuotaExceededException, FileNotFoundException,\n     UnresolvedLinkException, SnapshotAccessControlException {\n     writeLock();\n     try {\n       if (iip.getLastINode() \u003d\u003d null) {\n         throw new FileNotFoundException(\"Path not found: \" + iip.getPath());\n       }\n-      updateCount(iip, nsDelta, dsDelta, replication, true);\n+      updateCount(iip, nsDelta, ssDelta, replication, true);\n     } finally {\n       writeUnlock();\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  void updateSpaceConsumed(INodesInPath iip, long nsDelta, long ssDelta, short replication)\n    throws QuotaExceededException, FileNotFoundException,\n    UnresolvedLinkException, SnapshotAccessControlException {\n    writeLock();\n    try {\n      if (iip.getLastINode() \u003d\u003d null) {\n        throw new FileNotFoundException(\"Path not found: \" + iip.getPath());\n      }\n      updateCount(iip, nsDelta, ssDelta, replication, true);\n    } finally {\n      writeUnlock();\n    }\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
          "extendedDetails": {
            "oldValue": "[iip-INodesInPath, nsDelta-long, dsDelta-long, replication-short]",
            "newValue": "[iip-INodesInPath, nsDelta-long, ssDelta-long, replication-short]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-7775. Use consistent naming for NN-internal quota related types and functions. (Contributed bu Xiaoyu Yao)\n",
          "commitDate": "13/02/15 9:01 PM",
          "commitName": "f2231cebcddc80f0b753c4a7cb45ee4040846951",
          "commitAuthor": "Arpit Agarwal",
          "commitDateOld": "11/02/15 10:41 AM",
          "commitNameOld": "5dae97a584d30cef3e34141edfaca49c4ec57913",
          "commitAuthorOld": "Arpit Agarwal",
          "daysBetweenCommits": 2.43,
          "commitsBetweenForRepo": 58,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,13 +1,13 @@\n-  void updateSpaceConsumed(INodesInPath iip, long nsDelta, long dsDelta, short replication)\n+  void updateSpaceConsumed(INodesInPath iip, long nsDelta, long ssDelta, short replication)\n     throws QuotaExceededException, FileNotFoundException,\n     UnresolvedLinkException, SnapshotAccessControlException {\n     writeLock();\n     try {\n       if (iip.getLastINode() \u003d\u003d null) {\n         throw new FileNotFoundException(\"Path not found: \" + iip.getPath());\n       }\n-      updateCount(iip, nsDelta, dsDelta, replication, true);\n+      updateCount(iip, nsDelta, ssDelta, replication, true);\n     } finally {\n       writeUnlock();\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  void updateSpaceConsumed(INodesInPath iip, long nsDelta, long ssDelta, short replication)\n    throws QuotaExceededException, FileNotFoundException,\n    UnresolvedLinkException, SnapshotAccessControlException {\n    writeLock();\n    try {\n      if (iip.getLastINode() \u003d\u003d null) {\n        throw new FileNotFoundException(\"Path not found: \" + iip.getPath());\n      }\n      updateCount(iip, nsDelta, ssDelta, replication, true);\n    } finally {\n      writeUnlock();\n    }\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
          "extendedDetails": {}
        }
      ]
    },
    "5dae97a584d30cef3e34141edfaca49c4ec57913": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "HDFS-7723. Quota By Storage Type namenode implemenation. (Contributed by Xiaoyu Yao)\n",
      "commitDate": "11/02/15 10:41 AM",
      "commitName": "5dae97a584d30cef3e34141edfaca49c4ec57913",
      "commitAuthor": "Arpit Agarwal",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-7723. Quota By Storage Type namenode implemenation. (Contributed by Xiaoyu Yao)\n",
          "commitDate": "11/02/15 10:41 AM",
          "commitName": "5dae97a584d30cef3e34141edfaca49c4ec57913",
          "commitAuthor": "Arpit Agarwal",
          "commitDateOld": "08/02/15 11:51 AM",
          "commitNameOld": "1382ae525c67bf95d8f3a436b547dbc72cfbb177",
          "commitAuthorOld": "Jing Zhao",
          "daysBetweenCommits": 2.95,
          "commitsBetweenForRepo": 40,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,13 +1,13 @@\n-  void updateSpaceConsumed(INodesInPath iip, long nsDelta, long dsDelta)\n-      throws QuotaExceededException, FileNotFoundException,\n-          UnresolvedLinkException, SnapshotAccessControlException {\n+  void updateSpaceConsumed(INodesInPath iip, long nsDelta, long dsDelta, short replication)\n+    throws QuotaExceededException, FileNotFoundException,\n+    UnresolvedLinkException, SnapshotAccessControlException {\n     writeLock();\n     try {\n       if (iip.getLastINode() \u003d\u003d null) {\n         throw new FileNotFoundException(\"Path not found: \" + iip.getPath());\n       }\n-      updateCount(iip, nsDelta, dsDelta, true);\n+      updateCount(iip, nsDelta, dsDelta, replication, true);\n     } finally {\n       writeUnlock();\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  void updateSpaceConsumed(INodesInPath iip, long nsDelta, long dsDelta, short replication)\n    throws QuotaExceededException, FileNotFoundException,\n    UnresolvedLinkException, SnapshotAccessControlException {\n    writeLock();\n    try {\n      if (iip.getLastINode() \u003d\u003d null) {\n        throw new FileNotFoundException(\"Path not found: \" + iip.getPath());\n      }\n      updateCount(iip, nsDelta, dsDelta, replication, true);\n    } finally {\n      writeUnlock();\n    }\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
          "extendedDetails": {
            "oldValue": "[iip-INodesInPath, nsDelta-long, dsDelta-long]",
            "newValue": "[iip-INodesInPath, nsDelta-long, dsDelta-long, replication-short]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-7723. Quota By Storage Type namenode implemenation. (Contributed by Xiaoyu Yao)\n",
          "commitDate": "11/02/15 10:41 AM",
          "commitName": "5dae97a584d30cef3e34141edfaca49c4ec57913",
          "commitAuthor": "Arpit Agarwal",
          "commitDateOld": "08/02/15 11:51 AM",
          "commitNameOld": "1382ae525c67bf95d8f3a436b547dbc72cfbb177",
          "commitAuthorOld": "Jing Zhao",
          "daysBetweenCommits": 2.95,
          "commitsBetweenForRepo": 40,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,13 +1,13 @@\n-  void updateSpaceConsumed(INodesInPath iip, long nsDelta, long dsDelta)\n-      throws QuotaExceededException, FileNotFoundException,\n-          UnresolvedLinkException, SnapshotAccessControlException {\n+  void updateSpaceConsumed(INodesInPath iip, long nsDelta, long dsDelta, short replication)\n+    throws QuotaExceededException, FileNotFoundException,\n+    UnresolvedLinkException, SnapshotAccessControlException {\n     writeLock();\n     try {\n       if (iip.getLastINode() \u003d\u003d null) {\n         throw new FileNotFoundException(\"Path not found: \" + iip.getPath());\n       }\n-      updateCount(iip, nsDelta, dsDelta, true);\n+      updateCount(iip, nsDelta, dsDelta, replication, true);\n     } finally {\n       writeUnlock();\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  void updateSpaceConsumed(INodesInPath iip, long nsDelta, long dsDelta, short replication)\n    throws QuotaExceededException, FileNotFoundException,\n    UnresolvedLinkException, SnapshotAccessControlException {\n    writeLock();\n    try {\n      if (iip.getLastINode() \u003d\u003d null) {\n        throw new FileNotFoundException(\"Path not found: \" + iip.getPath());\n      }\n      updateCount(iip, nsDelta, dsDelta, replication, true);\n    } finally {\n      writeUnlock();\n    }\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
          "extendedDetails": {}
        }
      ]
    },
    "c78e3a7cdd10c40454e9acb06986ba6d8573cb19": {
      "type": "Ymultichange(Yparameterchange,Ybodychange)",
      "commitMessage": "HDFS-7059. Avoid resolving path multiple times. Contributed by Jing Zhao.\n",
      "commitDate": "12/12/14 3:13 PM",
      "commitName": "c78e3a7cdd10c40454e9acb06986ba6d8573cb19",
      "commitAuthor": "Jing Zhao",
      "subchanges": [
        {
          "type": "Yparameterchange",
          "commitMessage": "HDFS-7059. Avoid resolving path multiple times. Contributed by Jing Zhao.\n",
          "commitDate": "12/12/14 3:13 PM",
          "commitName": "c78e3a7cdd10c40454e9acb06986ba6d8573cb19",
          "commitAuthor": "Jing Zhao",
          "commitDateOld": "09/12/14 11:37 AM",
          "commitNameOld": "5776a41da08af653206bb94d7c76c9c4dcce059a",
          "commitAuthorOld": "Jing Zhao",
          "daysBetweenCommits": 3.15,
          "commitsBetweenForRepo": 33,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,14 +1,13 @@\n-  void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n+  void updateSpaceConsumed(INodesInPath iip, long nsDelta, long dsDelta)\n       throws QuotaExceededException, FileNotFoundException,\n           UnresolvedLinkException, SnapshotAccessControlException {\n     writeLock();\n     try {\n-      final INodesInPath iip \u003d getINodesInPath4Write(path, false);\n       if (iip.getLastINode() \u003d\u003d null) {\n-        throw new FileNotFoundException(\"Path not found: \" + path);\n+        throw new FileNotFoundException(\"Path not found: \" + iip.getPath());\n       }\n       updateCount(iip, nsDelta, dsDelta, true);\n     } finally {\n       writeUnlock();\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  void updateSpaceConsumed(INodesInPath iip, long nsDelta, long dsDelta)\n      throws QuotaExceededException, FileNotFoundException,\n          UnresolvedLinkException, SnapshotAccessControlException {\n    writeLock();\n    try {\n      if (iip.getLastINode() \u003d\u003d null) {\n        throw new FileNotFoundException(\"Path not found: \" + iip.getPath());\n      }\n      updateCount(iip, nsDelta, dsDelta, true);\n    } finally {\n      writeUnlock();\n    }\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
          "extendedDetails": {
            "oldValue": "[path-String, nsDelta-long, dsDelta-long]",
            "newValue": "[iip-INodesInPath, nsDelta-long, dsDelta-long]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-7059. Avoid resolving path multiple times. Contributed by Jing Zhao.\n",
          "commitDate": "12/12/14 3:13 PM",
          "commitName": "c78e3a7cdd10c40454e9acb06986ba6d8573cb19",
          "commitAuthor": "Jing Zhao",
          "commitDateOld": "09/12/14 11:37 AM",
          "commitNameOld": "5776a41da08af653206bb94d7c76c9c4dcce059a",
          "commitAuthorOld": "Jing Zhao",
          "daysBetweenCommits": 3.15,
          "commitsBetweenForRepo": 33,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,14 +1,13 @@\n-  void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n+  void updateSpaceConsumed(INodesInPath iip, long nsDelta, long dsDelta)\n       throws QuotaExceededException, FileNotFoundException,\n           UnresolvedLinkException, SnapshotAccessControlException {\n     writeLock();\n     try {\n-      final INodesInPath iip \u003d getINodesInPath4Write(path, false);\n       if (iip.getLastINode() \u003d\u003d null) {\n-        throw new FileNotFoundException(\"Path not found: \" + path);\n+        throw new FileNotFoundException(\"Path not found: \" + iip.getPath());\n       }\n       updateCount(iip, nsDelta, dsDelta, true);\n     } finally {\n       writeUnlock();\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  void updateSpaceConsumed(INodesInPath iip, long nsDelta, long dsDelta)\n      throws QuotaExceededException, FileNotFoundException,\n          UnresolvedLinkException, SnapshotAccessControlException {\n    writeLock();\n    try {\n      if (iip.getLastINode() \u003d\u003d null) {\n        throw new FileNotFoundException(\"Path not found: \" + iip.getPath());\n      }\n      updateCount(iip, nsDelta, dsDelta, true);\n    } finally {\n      writeUnlock();\n    }\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
          "extendedDetails": {}
        }
      ]
    },
    "0689363343a281a6f7f6f395227668bddc2663eb": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-6304. Consolidate the logic of path resolution in FSDirectory. Contributed by Haohui Mai.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1591411 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "30/04/14 10:44 AM",
      "commitName": "0689363343a281a6f7f6f395227668bddc2663eb",
      "commitAuthor": "Haohui Mai",
      "commitDateOld": "24/04/14 7:05 PM",
      "commitNameOld": "10a037cccb00c9f791da394bf2dc05985fb80612",
      "commitAuthorOld": "Jing Zhao",
      "daysBetweenCommits": 5.65,
      "commitsBetweenForRepo": 24,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,14 +1,14 @@\n   void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n       throws QuotaExceededException, FileNotFoundException,\n           UnresolvedLinkException, SnapshotAccessControlException {\n     writeLock();\n     try {\n-      final INodesInPath iip \u003d rootDir.getINodesInPath4Write(path, false);\n+      final INodesInPath iip \u003d getINodesInPath4Write(path, false);\n       if (iip.getLastINode() \u003d\u003d null) {\n         throw new FileNotFoundException(\"Path not found: \" + path);\n       }\n       updateCount(iip, nsDelta, dsDelta, true);\n     } finally {\n       writeUnlock();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n      throws QuotaExceededException, FileNotFoundException,\n          UnresolvedLinkException, SnapshotAccessControlException {\n    writeLock();\n    try {\n      final INodesInPath iip \u003d getINodesInPath4Write(path, false);\n      if (iip.getLastINode() \u003d\u003d null) {\n        throw new FileNotFoundException(\"Path not found: \" + path);\n      }\n      updateCount(iip, nsDelta, dsDelta, true);\n    } finally {\n      writeUnlock();\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
      "extendedDetails": {}
    },
    "2372e394dd99d69d396327d5a5e172953a8b8c6a": {
      "type": "Ymultichange(Yexceptionschange,Ybodychange)",
      "commitMessage": "HDFS-4189. Renames the getMutableXxx methods to getXxx4Write and fix a bug that some getExistingPathINodes calls should be getINodesInPath4Write.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1441193 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "31/01/13 1:13 PM",
      "commitName": "2372e394dd99d69d396327d5a5e172953a8b8c6a",
      "commitAuthor": "Tsz-wo Sze",
      "subchanges": [
        {
          "type": "Yexceptionschange",
          "commitMessage": "HDFS-4189. Renames the getMutableXxx methods to getXxx4Write and fix a bug that some getExistingPathINodes calls should be getINodesInPath4Write.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1441193 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "31/01/13 1:13 PM",
          "commitName": "2372e394dd99d69d396327d5a5e172953a8b8c6a",
          "commitAuthor": "Tsz-wo Sze",
          "commitDateOld": "25/01/13 4:01 PM",
          "commitNameOld": "a3bf2083867db5d848ea14f145d120f02b820af2",
          "commitAuthorOld": "Tsz-wo Sze",
          "daysBetweenCommits": 5.88,
          "commitsBetweenForRepo": 22,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,15 +1,14 @@\n   void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n-      throws QuotaExceededException, FileNotFoundException, UnresolvedLinkException {\n+      throws QuotaExceededException, FileNotFoundException,\n+          UnresolvedLinkException, SnapshotAccessControlException {\n     writeLock();\n     try {\n-      final INodesInPath inodesInPath \u003d rootDir.getExistingPathINodes(path, false);\n-      final INode[] inodes \u003d inodesInPath.getINodes();\n-      int len \u003d inodes.length;\n-      if (inodes[len - 1] \u003d\u003d null) {\n+      final INodesInPath iip \u003d rootDir.getINodesInPath4Write(path, false);\n+      if (iip.getLastINode() \u003d\u003d null) {\n         throw new FileNotFoundException(\"Path not found: \" + path);\n       }\n-      updateCount(inodesInPath, len-1, nsDelta, dsDelta, true);\n+      updateCount(iip, nsDelta, dsDelta, true);\n     } finally {\n       writeUnlock();\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n      throws QuotaExceededException, FileNotFoundException,\n          UnresolvedLinkException, SnapshotAccessControlException {\n    writeLock();\n    try {\n      final INodesInPath iip \u003d rootDir.getINodesInPath4Write(path, false);\n      if (iip.getLastINode() \u003d\u003d null) {\n        throw new FileNotFoundException(\"Path not found: \" + path);\n      }\n      updateCount(iip, nsDelta, dsDelta, true);\n    } finally {\n      writeUnlock();\n    }\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
          "extendedDetails": {
            "oldValue": "[QuotaExceededException, FileNotFoundException, UnresolvedLinkException]",
            "newValue": "[QuotaExceededException, FileNotFoundException, UnresolvedLinkException, SnapshotAccessControlException]"
          }
        },
        {
          "type": "Ybodychange",
          "commitMessage": "HDFS-4189. Renames the getMutableXxx methods to getXxx4Write and fix a bug that some getExistingPathINodes calls should be getINodesInPath4Write.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1441193 13f79535-47bb-0310-9956-ffa450edef68\n",
          "commitDate": "31/01/13 1:13 PM",
          "commitName": "2372e394dd99d69d396327d5a5e172953a8b8c6a",
          "commitAuthor": "Tsz-wo Sze",
          "commitDateOld": "25/01/13 4:01 PM",
          "commitNameOld": "a3bf2083867db5d848ea14f145d120f02b820af2",
          "commitAuthorOld": "Tsz-wo Sze",
          "daysBetweenCommits": 5.88,
          "commitsBetweenForRepo": 22,
          "commitsBetweenForFile": 1,
          "diff": "@@ -1,15 +1,14 @@\n   void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n-      throws QuotaExceededException, FileNotFoundException, UnresolvedLinkException {\n+      throws QuotaExceededException, FileNotFoundException,\n+          UnresolvedLinkException, SnapshotAccessControlException {\n     writeLock();\n     try {\n-      final INodesInPath inodesInPath \u003d rootDir.getExistingPathINodes(path, false);\n-      final INode[] inodes \u003d inodesInPath.getINodes();\n-      int len \u003d inodes.length;\n-      if (inodes[len - 1] \u003d\u003d null) {\n+      final INodesInPath iip \u003d rootDir.getINodesInPath4Write(path, false);\n+      if (iip.getLastINode() \u003d\u003d null) {\n         throw new FileNotFoundException(\"Path not found: \" + path);\n       }\n-      updateCount(inodesInPath, len-1, nsDelta, dsDelta, true);\n+      updateCount(iip, nsDelta, dsDelta, true);\n     } finally {\n       writeUnlock();\n     }\n   }\n\\ No newline at end of file\n",
          "actualSource": "  void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n      throws QuotaExceededException, FileNotFoundException,\n          UnresolvedLinkException, SnapshotAccessControlException {\n    writeLock();\n    try {\n      final INodesInPath iip \u003d rootDir.getINodesInPath4Write(path, false);\n      if (iip.getLastINode() \u003d\u003d null) {\n        throw new FileNotFoundException(\"Path not found: \" + path);\n      }\n      updateCount(iip, nsDelta, dsDelta, true);\n    } finally {\n      writeUnlock();\n    }\n  }",
          "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
          "extendedDetails": {}
        }
      ]
    },
    "9047eb516261b8c9c380d140a43dfdd5d701dee5": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-4209. Clean up the addNode/addChild/addChildNoQuotaCheck methods in FSDirectory and INodeDirectory.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1414447 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "27/11/12 2:36 PM",
      "commitName": "9047eb516261b8c9c380d140a43dfdd5d701dee5",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "21/11/12 11:27 AM",
      "commitNameOld": "0f1899ee19ab13d5128801063b0ce17612c0e96f",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 6.13,
      "commitsBetweenForRepo": 10,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,18 +1,15 @@\n   void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n-                                         throws QuotaExceededException,\n-                                                FileNotFoundException,\n-                                                UnresolvedLinkException {\n+      throws QuotaExceededException, FileNotFoundException, UnresolvedLinkException {\n     writeLock();\n     try {\n       final INodesInPath inodesInPath \u003d rootDir.getExistingPathINodes(path, false);\n       final INode[] inodes \u003d inodesInPath.getINodes();\n       int len \u003d inodes.length;\n       if (inodes[len - 1] \u003d\u003d null) {\n-        throw new FileNotFoundException(path + \n-                                        \" does not exist under rootDir.\");\n+        throw new FileNotFoundException(\"Path not found: \" + path);\n       }\n       updateCount(inodesInPath, len-1, nsDelta, dsDelta, true);\n     } finally {\n       writeUnlock();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n      throws QuotaExceededException, FileNotFoundException, UnresolvedLinkException {\n    writeLock();\n    try {\n      final INodesInPath inodesInPath \u003d rootDir.getExistingPathINodes(path, false);\n      final INode[] inodes \u003d inodesInPath.getINodes();\n      int len \u003d inodes.length;\n      if (inodes[len - 1] \u003d\u003d null) {\n        throw new FileNotFoundException(\"Path not found: \" + path);\n      }\n      updateCount(inodesInPath, len-1, nsDelta, dsDelta, true);\n    } finally {\n      writeUnlock();\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
      "extendedDetails": {}
    },
    "34413c2000d9262faa37fde88a72939587edc776": {
      "type": "Ybodychange",
      "commitMessage": "svn merge -c 1406006 from trunk for HDFS-4151. Change the methods in FSDirectory to pass INodesInPath instead of INode[] as a parameter.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-2802@1406014 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "05/11/12 3:56 PM",
      "commitName": "34413c2000d9262faa37fde88a72939587edc776",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "04/11/12 5:22 PM",
      "commitNameOld": "b3bc2fb76e1aca8e7327d1d1a6e4c8a013c575de",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 0.94,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,18 @@\n   void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n                                          throws QuotaExceededException,\n                                                 FileNotFoundException,\n                                                 UnresolvedLinkException {\n     writeLock();\n     try {\n-      INode[] inodes \u003d rootDir.getExistingPathINodes(path, false);\n+      final INodesInPath inodesInPath \u003d rootDir.getExistingPathINodes(path, false);\n+      final INode[] inodes \u003d inodesInPath.getINodes();\n       int len \u003d inodes.length;\n       if (inodes[len - 1] \u003d\u003d null) {\n         throw new FileNotFoundException(path + \n                                         \" does not exist under rootDir.\");\n       }\n-      updateCount(inodes, len-1, nsDelta, dsDelta, true);\n+      updateCount(inodesInPath, len-1, nsDelta, dsDelta, true);\n     } finally {\n       writeUnlock();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n                                         throws QuotaExceededException,\n                                                FileNotFoundException,\n                                                UnresolvedLinkException {\n    writeLock();\n    try {\n      final INodesInPath inodesInPath \u003d rootDir.getExistingPathINodes(path, false);\n      final INode[] inodes \u003d inodesInPath.getINodes();\n      int len \u003d inodes.length;\n      if (inodes[len - 1] \u003d\u003d null) {\n        throw new FileNotFoundException(path + \n                                        \" does not exist under rootDir.\");\n      }\n      updateCount(inodesInPath, len-1, nsDelta, dsDelta, true);\n    } finally {\n      writeUnlock();\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
      "extendedDetails": {}
    },
    "7ee5ce3176a74d217551b5981f809a56c719424b": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-4151. Change the methods in FSDirectory to pass INodesInPath instead of INode[] as a parameter.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1406006 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "05/11/12 3:26 PM",
      "commitName": "7ee5ce3176a74d217551b5981f809a56c719424b",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "02/11/12 5:20 PM",
      "commitNameOld": "d174f574bafcfefc635c64a47f258b1ce5d5c84e",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 2.96,
      "commitsBetweenForRepo": 5,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,18 @@\n   void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n                                          throws QuotaExceededException,\n                                                 FileNotFoundException,\n                                                 UnresolvedLinkException {\n     writeLock();\n     try {\n-      INode[] inodes \u003d rootDir.getExistingPathINodes(path, false);\n+      final INodesInPath inodesInPath \u003d rootDir.getExistingPathINodes(path, false);\n+      final INode[] inodes \u003d inodesInPath.getINodes();\n       int len \u003d inodes.length;\n       if (inodes[len - 1] \u003d\u003d null) {\n         throw new FileNotFoundException(path + \n                                         \" does not exist under rootDir.\");\n       }\n-      updateCount(inodes, len-1, nsDelta, dsDelta, true);\n+      updateCount(inodesInPath, len-1, nsDelta, dsDelta, true);\n     } finally {\n       writeUnlock();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n                                         throws QuotaExceededException,\n                                                FileNotFoundException,\n                                                UnresolvedLinkException {\n    writeLock();\n    try {\n      final INodesInPath inodesInPath \u003d rootDir.getExistingPathINodes(path, false);\n      final INode[] inodes \u003d inodesInPath.getINodes();\n      int len \u003d inodes.length;\n      if (inodes[len - 1] \u003d\u003d null) {\n        throw new FileNotFoundException(path + \n                                        \" does not exist under rootDir.\");\n      }\n      updateCount(inodesInPath, len-1, nsDelta, dsDelta, true);\n    } finally {\n      writeUnlock();\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
      "extendedDetails": {}
    },
    "cd7157784e5e5ddc4e77144d042e54dd0d04bac1": {
      "type": "Yfilerename",
      "commitMessage": "HADOOP-7560. Change src layout to be heirarchical. Contributed by Alejandro Abdelnur.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1161332 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "24/08/11 5:14 PM",
      "commitName": "cd7157784e5e5ddc4e77144d042e54dd0d04bac1",
      "commitAuthor": "Arun Murthy",
      "commitDateOld": "24/08/11 5:06 PM",
      "commitNameOld": "bb0005cfec5fd2861600ff5babd259b48ba18b63",
      "commitAuthorOld": "Arun Murthy",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n                                         throws QuotaExceededException,\n                                                FileNotFoundException,\n                                                UnresolvedLinkException {\n    writeLock();\n    try {\n      INode[] inodes \u003d rootDir.getExistingPathINodes(path, false);\n      int len \u003d inodes.length;\n      if (inodes[len - 1] \u003d\u003d null) {\n        throw new FileNotFoundException(path + \n                                        \" does not exist under rootDir.\");\n      }\n      updateCount(inodes, len-1, nsDelta, dsDelta, true);\n    } finally {\n      writeUnlock();\n    }\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
      "extendedDetails": {
        "oldPath": "hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
        "newPath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java"
      }
    },
    "d86f3183d93714ba078416af4f609d26376eadb0": {
      "type": "Yfilerename",
      "commitMessage": "HDFS-2096. Mavenization of hadoop-hdfs. Contributed by Alejandro Abdelnur.\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1159702 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "19/08/11 10:36 AM",
      "commitName": "d86f3183d93714ba078416af4f609d26376eadb0",
      "commitAuthor": "Thomas White",
      "commitDateOld": "19/08/11 10:26 AM",
      "commitNameOld": "6ee5a73e0e91a2ef27753a32c576835e951d8119",
      "commitAuthorOld": "Thomas White",
      "daysBetweenCommits": 0.01,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "",
      "actualSource": "  void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n                                         throws QuotaExceededException,\n                                                FileNotFoundException,\n                                                UnresolvedLinkException {\n    writeLock();\n    try {\n      INode[] inodes \u003d rootDir.getExistingPathINodes(path, false);\n      int len \u003d inodes.length;\n      if (inodes[len - 1] \u003d\u003d null) {\n        throw new FileNotFoundException(path + \n                                        \" does not exist under rootDir.\");\n      }\n      updateCount(inodes, len-1, nsDelta, dsDelta, true);\n    } finally {\n      writeUnlock();\n    }\n  }",
      "path": "hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
      "extendedDetails": {
        "oldPath": "hdfs/src/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
        "newPath": "hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java"
      }
    },
    "5d5b1c6c10c66c6a17b483a3e1a98d59d3d0bdee": {
      "type": "Ymodifierchange",
      "commitMessage": "HDFS-2239. Reduce access levels of the fields and methods in FSNamesystem.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1155998 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "09/08/11 6:50 PM",
      "commitName": "5d5b1c6c10c66c6a17b483a3e1a98d59d3d0bdee",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "08/08/11 3:06 AM",
      "commitNameOld": "371f4a59059322000a40eb4bdf5386b96b626ece",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 1.66,
      "commitsBetweenForRepo": 6,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,17 @@\n-  public void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n+  void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n                                          throws QuotaExceededException,\n                                                 FileNotFoundException,\n                                                 UnresolvedLinkException {\n     writeLock();\n     try {\n       INode[] inodes \u003d rootDir.getExistingPathINodes(path, false);\n       int len \u003d inodes.length;\n       if (inodes[len - 1] \u003d\u003d null) {\n         throw new FileNotFoundException(path + \n                                         \" does not exist under rootDir.\");\n       }\n       updateCount(inodes, len-1, nsDelta, dsDelta, true);\n     } finally {\n       writeUnlock();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n                                         throws QuotaExceededException,\n                                                FileNotFoundException,\n                                                UnresolvedLinkException {\n    writeLock();\n    try {\n      INode[] inodes \u003d rootDir.getExistingPathINodes(path, false);\n      int len \u003d inodes.length;\n      if (inodes[len - 1] \u003d\u003d null) {\n        throw new FileNotFoundException(path + \n                                        \" does not exist under rootDir.\");\n      }\n      updateCount(inodes, len-1, nsDelta, dsDelta, true);\n    } finally {\n      writeUnlock();\n    }\n  }",
      "path": "hdfs/src/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
      "extendedDetails": {
        "oldValue": "[public]",
        "newValue": "[]"
      }
    },
    "09b6f98de431628c80bc8a6faf0070eeaf72ff2a": {
      "type": "Ymodifierchange",
      "commitMessage": "HDFS-2107. Move block management code from o.a.h.h.s.namenode to a new package o.a.h.h.s.blockmanagement.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1140939 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "28/06/11 6:31 PM",
      "commitName": "09b6f98de431628c80bc8a6faf0070eeaf72ff2a",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "28/06/11 5:26 PM",
      "commitNameOld": "97b6ca4dd7d1233e8f8c90b1c01e47228c044e13",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 0.04,
      "commitsBetweenForRepo": 1,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,17 @@\n-  void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n+  public void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n                                          throws QuotaExceededException,\n                                                 FileNotFoundException,\n                                                 UnresolvedLinkException {\n     writeLock();\n     try {\n       INode[] inodes \u003d rootDir.getExistingPathINodes(path, false);\n       int len \u003d inodes.length;\n       if (inodes[len - 1] \u003d\u003d null) {\n         throw new FileNotFoundException(path + \n                                         \" does not exist under rootDir.\");\n       }\n       updateCount(inodes, len-1, nsDelta, dsDelta, true);\n     } finally {\n       writeUnlock();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n                                         throws QuotaExceededException,\n                                                FileNotFoundException,\n                                                UnresolvedLinkException {\n    writeLock();\n    try {\n      INode[] inodes \u003d rootDir.getExistingPathINodes(path, false);\n      int len \u003d inodes.length;\n      if (inodes[len - 1] \u003d\u003d null) {\n        throw new FileNotFoundException(path + \n                                        \" does not exist under rootDir.\");\n      }\n      updateCount(inodes, len-1, nsDelta, dsDelta, true);\n    } finally {\n      writeUnlock();\n    }\n  }",
      "path": "hdfs/src/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
      "extendedDetails": {
        "oldValue": "[]",
        "newValue": "[public]"
      }
    },
    "97b6ca4dd7d1233e8f8c90b1c01e47228c044e13": {
      "type": "Ymodifierchange",
      "commitMessage": "Revert 1140913 and 1140909 for HDFS-2107.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1140920 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "28/06/11 5:26 PM",
      "commitName": "97b6ca4dd7d1233e8f8c90b1c01e47228c044e13",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "28/06/11 4:43 PM",
      "commitNameOld": "1bcfe45e47775b98cce5541f328c4fd46e5eb13d",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 0.03,
      "commitsBetweenForRepo": 2,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,17 @@\n-  public void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n+  void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n                                          throws QuotaExceededException,\n                                                 FileNotFoundException,\n                                                 UnresolvedLinkException {\n     writeLock();\n     try {\n       INode[] inodes \u003d rootDir.getExistingPathINodes(path, false);\n       int len \u003d inodes.length;\n       if (inodes[len - 1] \u003d\u003d null) {\n         throw new FileNotFoundException(path + \n                                         \" does not exist under rootDir.\");\n       }\n       updateCount(inodes, len-1, nsDelta, dsDelta, true);\n     } finally {\n       writeUnlock();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n                                         throws QuotaExceededException,\n                                                FileNotFoundException,\n                                                UnresolvedLinkException {\n    writeLock();\n    try {\n      INode[] inodes \u003d rootDir.getExistingPathINodes(path, false);\n      int len \u003d inodes.length;\n      if (inodes[len - 1] \u003d\u003d null) {\n        throw new FileNotFoundException(path + \n                                        \" does not exist under rootDir.\");\n      }\n      updateCount(inodes, len-1, nsDelta, dsDelta, true);\n    } finally {\n      writeUnlock();\n    }\n  }",
      "path": "hdfs/src/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
      "extendedDetails": {
        "oldValue": "[public]",
        "newValue": "[]"
      }
    },
    "1bcfe45e47775b98cce5541f328c4fd46e5eb13d": {
      "type": "Ymodifierchange",
      "commitMessage": "HDFS-2106. Move block management code from o.a.h.h.s.namenode to a new package o.a.h.h.s.blockmanagement.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1140909 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "28/06/11 4:43 PM",
      "commitName": "1bcfe45e47775b98cce5541f328c4fd46e5eb13d",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "12/06/11 3:00 PM",
      "commitNameOld": "a196766ea07775f18ded69bd9e8d239f8cfd3ccc",
      "commitAuthorOld": "Todd Lipcon",
      "daysBetweenCommits": 16.07,
      "commitsBetweenForRepo": 52,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,17 +1,17 @@\n-  void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n+  public void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n                                          throws QuotaExceededException,\n                                                 FileNotFoundException,\n                                                 UnresolvedLinkException {\n     writeLock();\n     try {\n       INode[] inodes \u003d rootDir.getExistingPathINodes(path, false);\n       int len \u003d inodes.length;\n       if (inodes[len - 1] \u003d\u003d null) {\n         throw new FileNotFoundException(path + \n                                         \" does not exist under rootDir.\");\n       }\n       updateCount(inodes, len-1, nsDelta, dsDelta, true);\n     } finally {\n       writeUnlock();\n     }\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n                                         throws QuotaExceededException,\n                                                FileNotFoundException,\n                                                UnresolvedLinkException {\n    writeLock();\n    try {\n      INode[] inodes \u003d rootDir.getExistingPathINodes(path, false);\n      int len \u003d inodes.length;\n      if (inodes[len - 1] \u003d\u003d null) {\n        throw new FileNotFoundException(path + \n                                        \" does not exist under rootDir.\");\n      }\n      updateCount(inodes, len-1, nsDelta, dsDelta, true);\n    } finally {\n      writeUnlock();\n    }\n  }",
      "path": "hdfs/src/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java",
      "extendedDetails": {
        "oldValue": "[]",
        "newValue": "[public]"
      }
    },
    "a196766ea07775f18ded69bd9e8d239f8cfd3ccc": {
      "type": "Yintroduced",
      "commitMessage": "HADOOP-7106. Reorganize SVN layout to combine HDFS, Common, and MR in a single tree (project unsplit)\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1134994 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "12/06/11 3:00 PM",
      "commitName": "a196766ea07775f18ded69bd9e8d239f8cfd3ccc",
      "commitAuthor": "Todd Lipcon",
      "diff": "@@ -0,0 +1,17 @@\n+  void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n+                                         throws QuotaExceededException,\n+                                                FileNotFoundException,\n+                                                UnresolvedLinkException {\n+    writeLock();\n+    try {\n+      INode[] inodes \u003d rootDir.getExistingPathINodes(path, false);\n+      int len \u003d inodes.length;\n+      if (inodes[len - 1] \u003d\u003d null) {\n+        throw new FileNotFoundException(path + \n+                                        \" does not exist under rootDir.\");\n+      }\n+      updateCount(inodes, len-1, nsDelta, dsDelta, true);\n+    } finally {\n+      writeUnlock();\n+    }\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  void updateSpaceConsumed(String path, long nsDelta, long dsDelta)\n                                         throws QuotaExceededException,\n                                                FileNotFoundException,\n                                                UnresolvedLinkException {\n    writeLock();\n    try {\n      INode[] inodes \u003d rootDir.getExistingPathINodes(path, false);\n      int len \u003d inodes.length;\n      if (inodes[len - 1] \u003d\u003d null) {\n        throw new FileNotFoundException(path + \n                                        \" does not exist under rootDir.\");\n      }\n      updateCount(inodes, len-1, nsDelta, dsDelta, true);\n    } finally {\n      writeUnlock();\n    }\n  }",
      "path": "hdfs/src/java/org/apache/hadoop/hdfs/server/namenode/FSDirectory.java"
    }
  }
}