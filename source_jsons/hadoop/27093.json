{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "WebAppProxyServlet.java",
  "functionName": "checkHttpsStrictAndNotProvided",
  "functionId": "checkHttpsStrictAndNotProvided___resp-HttpServletResponse__link-URI__conf-YarnConfiguration",
  "sourceFilePath": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/main/java/org/apache/hadoop/yarn/server/webproxy/WebAppProxyServlet.java",
  "functionStartLine": 189,
  "functionEndLine": 212,
  "numCommitsSeen": 31,
  "timeTaken": 3405,
  "changeHistory": [
    "c2288ac45b748b4119442c46147ccc324926c340"
  ],
  "changeHistoryShort": {
    "c2288ac45b748b4119442c46147ccc324926c340": "Yintroduced"
  },
  "changeHistoryDetails": {
    "c2288ac45b748b4119442c46147ccc324926c340": {
      "type": "Yintroduced",
      "commitMessage": "YARN-8448. AM HTTPS Support for AM communication with RMWeb proxy. (Contributed by Robert Kanter)\n",
      "commitDate": "16/10/18 1:36 PM",
      "commitName": "c2288ac45b748b4119442c46147ccc324926c340",
      "commitAuthor": "Haibo Chen",
      "diff": "@@ -0,0 +1,24 @@\n+  static boolean checkHttpsStrictAndNotProvided(\n+      HttpServletResponse resp, URI link, YarnConfiguration conf)\n+      throws IOException {\n+    String httpsPolicy \u003d conf.get(\n+        YarnConfiguration.RM_APPLICATION_HTTPS_POLICY,\n+        YarnConfiguration.DEFAULT_RM_APPLICATION_HTTPS_POLICY);\n+    boolean required \u003d httpsPolicy.equals(\"STRICT\");\n+    boolean provided \u003d link.getScheme().equals(\"https\");\n+    if (required \u0026\u0026 !provided) {\n+      resp.setContentType(MimeType.HTML);\n+      Page p \u003d new Page(resp.getWriter());\n+      p.html().\n+          h1(\"HTTPS must be used\").\n+          h3().\n+          __(YarnConfiguration.RM_APPLICATION_HTTPS_POLICY,\n+              \"is set to STRICT, which means that the tracking URL \",\n+              \"must be an HTTPS URL, but it is not.\").\n+          __(\"The tracking URL is: \", link).\n+          __().\n+          __();\n+      return true;\n+    }\n+    return false;\n+  }\n\\ No newline at end of file\n",
      "actualSource": "  static boolean checkHttpsStrictAndNotProvided(\n      HttpServletResponse resp, URI link, YarnConfiguration conf)\n      throws IOException {\n    String httpsPolicy \u003d conf.get(\n        YarnConfiguration.RM_APPLICATION_HTTPS_POLICY,\n        YarnConfiguration.DEFAULT_RM_APPLICATION_HTTPS_POLICY);\n    boolean required \u003d httpsPolicy.equals(\"STRICT\");\n    boolean provided \u003d link.getScheme().equals(\"https\");\n    if (required \u0026\u0026 !provided) {\n      resp.setContentType(MimeType.HTML);\n      Page p \u003d new Page(resp.getWriter());\n      p.html().\n          h1(\"HTTPS must be used\").\n          h3().\n          __(YarnConfiguration.RM_APPLICATION_HTTPS_POLICY,\n              \"is set to STRICT, which means that the tracking URL \",\n              \"must be an HTTPS URL, but it is not.\").\n          __(\"The tracking URL is: \", link).\n          __().\n          __();\n      return true;\n    }\n    return false;\n  }",
      "path": "hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-web-proxy/src/main/java/org/apache/hadoop/yarn/server/webproxy/WebAppProxyServlet.java"
    }
  }
}