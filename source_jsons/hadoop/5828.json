{
  "origin": "codeshovel",
  "repositoryName": "hadoop",
  "repositoryPath": "/home/shaiful/research/codeshovel/codeshovel-projects/hadoop/.git",
  "startCommitName": "HEAD",
  "sourceFileName": "NameNodeRpcServer.java",
  "functionName": "registerDatanode",
  "functionId": "registerDatanode___nodeReg-DatanodeRegistration",
  "sourceFilePath": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeRpcServer.java",
  "functionStartLine": 1576,
  "functionEndLine": 1582,
  "numCommitsSeen": 337,
  "timeTaken": 6101,
  "changeHistory": [
    "db334bb8625da97c7e518cbcf477530c7ba7001e",
    "00067895a01c66d53715b50bbcb3605efd6425f2",
    "7f427646dfe80f9a4dfac0a979709f367e74a7e7",
    "9e108e61fb28244326d7cf4bb31d175eb75d2636"
  ],
  "changeHistoryShort": {
    "db334bb8625da97c7e518cbcf477530c7ba7001e": "Ybodychange",
    "00067895a01c66d53715b50bbcb3605efd6425f2": "Ybodychange",
    "7f427646dfe80f9a4dfac0a979709f367e74a7e7": "Ybodychange",
    "9e108e61fb28244326d7cf4bb31d175eb75d2636": "Yparameterchange"
  },
  "changeHistoryDetails": {
    "db334bb8625da97c7e518cbcf477530c7ba7001e": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-3443. Fix NPE when namenode transition to active during startup by adding checkNNStartup() in NameNodeRpcServer.  Contributed by Vinayakumar B\n",
      "commitDate": "21/01/15 11:33 AM",
      "commitName": "db334bb8625da97c7e518cbcf477530c7ba7001e",
      "commitAuthor": "Tsz-Wo Nicholas Sze",
      "commitDateOld": "12/01/15 10:50 PM",
      "commitNameOld": "7e9358feb326d48b8c4f00249e7af5023cebd2e2",
      "commitAuthorOld": "Plamen Jeliazkov",
      "daysBetweenCommits": 8.53,
      "commitsBetweenForRepo": 59,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,6 +1,7 @@\n   public DatanodeRegistration registerDatanode(DatanodeRegistration nodeReg)\n       throws IOException {\n+    checkNNStartup();\n     verifySoftwareVersion(nodeReg);\n     namesystem.registerDatanode(nodeReg);\n     return nodeReg;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public DatanodeRegistration registerDatanode(DatanodeRegistration nodeReg)\n      throws IOException {\n    checkNNStartup();\n    verifySoftwareVersion(nodeReg);\n    namesystem.registerDatanode(nodeReg);\n    return nodeReg;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeRpcServer.java",
      "extendedDetails": {}
    },
    "00067895a01c66d53715b50bbcb3605efd6425f2": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-5754. Split LayoutVerion into NameNodeLayoutVersion and DataNodeLayoutVersion. Contributed by Brandon Li\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/branches/HDFS-5535@1563041 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "30/01/14 7:21 PM",
      "commitName": "00067895a01c66d53715b50bbcb3605efd6425f2",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "17/01/14 6:07 PM",
      "commitNameOld": "09b8ce5b442489739694a2ebac4e342f6d2e2ac0",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 13.05,
      "commitsBetweenForRepo": 47,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,7 +1,6 @@\n   public DatanodeRegistration registerDatanode(DatanodeRegistration nodeReg)\n       throws IOException {\n-    verifyLayoutVersion(nodeReg.getVersion());\n     verifySoftwareVersion(nodeReg);\n     namesystem.registerDatanode(nodeReg);\n     return nodeReg;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public DatanodeRegistration registerDatanode(DatanodeRegistration nodeReg)\n      throws IOException {\n    verifySoftwareVersion(nodeReg);\n    namesystem.registerDatanode(nodeReg);\n    return nodeReg;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeRpcServer.java",
      "extendedDetails": {}
    },
    "7f427646dfe80f9a4dfac0a979709f367e74a7e7": {
      "type": "Ybodychange",
      "commitMessage": "HDFS-2983. Relax the build version check to permit rolling upgrades within a release. Contributed by Aaron T. Myers.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1325110 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "11/04/12 8:36 PM",
      "commitName": "7f427646dfe80f9a4dfac0a979709f367e74a7e7",
      "commitAuthor": "Aaron Myers",
      "commitDateOld": "01/04/12 3:12 PM",
      "commitNameOld": "be7dd8333a7e56e732171db0781786987de03195",
      "commitAuthorOld": "Eli Collins",
      "daysBetweenCommits": 10.23,
      "commitsBetweenForRepo": 113,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,6 +1,7 @@\n-  public DatanodeRegistration registerDatanode(DatanodeRegistration nodeReg\n-      ) throws IOException {\n-    verifyVersion(nodeReg.getVersion());\n+  public DatanodeRegistration registerDatanode(DatanodeRegistration nodeReg)\n+      throws IOException {\n+    verifyLayoutVersion(nodeReg.getVersion());\n+    verifySoftwareVersion(nodeReg);\n     namesystem.registerDatanode(nodeReg);\n     return nodeReg;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public DatanodeRegistration registerDatanode(DatanodeRegistration nodeReg)\n      throws IOException {\n    verifyLayoutVersion(nodeReg.getVersion());\n    verifySoftwareVersion(nodeReg);\n    namesystem.registerDatanode(nodeReg);\n    return nodeReg;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeRpcServer.java",
      "extendedDetails": {}
    },
    "9e108e61fb28244326d7cf4bb31d175eb75d2636": {
      "type": "Yparameterchange",
      "commitMessage": "HDFS-3086. Change Datanode not to send storage list in registration.\n\n\ngit-svn-id: https://svn.apache.org/repos/asf/hadoop/common/trunk@1303318 13f79535-47bb-0310-9956-ffa450edef68\n",
      "commitDate": "21/03/12 2:07 AM",
      "commitName": "9e108e61fb28244326d7cf4bb31d175eb75d2636",
      "commitAuthor": "Tsz-wo Sze",
      "commitDateOld": "19/03/12 3:09 PM",
      "commitNameOld": "6326605acb5a5bf48d994278c9d3a39733679e81",
      "commitAuthorOld": "Tsz-wo Sze",
      "daysBetweenCommits": 1.46,
      "commitsBetweenForRepo": 11,
      "commitsBetweenForFile": 1,
      "diff": "@@ -1,7 +1,6 @@\n-  public DatanodeRegistration registerDatanode(DatanodeRegistration nodeReg,\n-      DatanodeStorage[] storages) throws IOException {\n+  public DatanodeRegistration registerDatanode(DatanodeRegistration nodeReg\n+      ) throws IOException {\n     verifyVersion(nodeReg.getVersion());\n     namesystem.registerDatanode(nodeReg);\n-      \n     return nodeReg;\n   }\n\\ No newline at end of file\n",
      "actualSource": "  public DatanodeRegistration registerDatanode(DatanodeRegistration nodeReg\n      ) throws IOException {\n    verifyVersion(nodeReg.getVersion());\n    namesystem.registerDatanode(nodeReg);\n    return nodeReg;\n  }",
      "path": "hadoop-hdfs-project/hadoop-hdfs/src/main/java/org/apache/hadoop/hdfs/server/namenode/NameNodeRpcServer.java",
      "extendedDetails": {
        "oldValue": "[nodeReg-DatanodeRegistration, storages-DatanodeStorage[]]",
        "newValue": "[nodeReg-DatanodeRegistration]"
      }
    }
  }
}